
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="156cbe3b-9859-5f43-b52d-e72aa03bd098")}catch(e){}}();
import{a as jn,b as Or}from"/chunks/chunk-6TVYR7MV.js";import{a as Qe,b as we}from"/chunks/chunk-TD2M4TOM.js";import{a as Kr}from"/chunks/chunk-FU2A4ZD4.js";import{a as Mr,c as de,d as Jn,g as Vr,h as c,i as Nr}from"/chunks/chunk-ZITCEVDD.js";import"/chunks/chunk-OZB4FKQX.js";import"/chunks/chunk-YUOMCGI6.js";import{c as Ur}from"/chunks/chunk-KZ7O6TEE.js";import"/chunks/chunk-OK4UQCTS.js";import"/chunks/chunk-NC7PITUF.js";import{a as Gr}from"/chunks/chunk-AH364VTO.js";import"/chunks/chunk-R5KLIN6L.js";import{$b as Xe,A as ur,B as fr,C as Kn,Cb as ue,D as Bn,Da as N,Dc as Je,Ea as Cn,Eb as Sr,Fa as br,Fb as Ye,Fc as Fr,Gb as Br,Ha as Ke,Ia as hr,Jb as Cr,Ka as vr,Kb as sn,Kc as Jo,La as wr,Lb as ln,Mb as fe,Nb as Yn,Ob as Xn,Pb as bn,Qb as be,Rb as Ir,Sb as he,Ub as Er,Va as yr,Vb as zr,Wb as ve,Xb as Rr,Yb as Lr,Zb as Tr,_b as Dr,ac as qr,b as $o,bc as jr,cc as Ze,dc as $e,ec as Ar,fc as Pr,g as xr,gc as qn,hc as Hr,i as fn,ic as Wr,j as kr,k as E,lc as Zn,oc as $n,vc as In,x as gr}from"/chunks/chunk-U774LSRJ.js";import{a as b,b as d}from"/chunks/chunk-EXMDW5FT.js";import"/chunks/chunk-JP74F4RL.js";import{a as Sn}from"/chunks/chunk-YVQAWSEC.js";import{B as Tn,C as cr,J as pn,M as $,R as pr,S as Dn,T as p,U as le,a as Y,q as _r,x as Ue,y as se,z as mr}from"/chunks/chunk-UC3RRRGX.js";import{c as t}from"/chunks/chunk-54UHBIHR.js";var Vn=t(b()),Zo=t($o());var P=t(b());var Yr=t(b()),Zr=t(d()),C=(0,Yr.createContext)({}),Xr=({bridge:e,fillingAndSavingTelemetry:r,children:o})=>(0,Zr.jsx)(C.Provider,{value:{fillingAndSavingTelemetry:r,bridge:e},children:o});var $r=t(Sn()),_e=t(b());var nr={wrapper:"Ie",currency:"Pd"};var me=t(d()),ni=/^[0-9]*(\.[0-9]{0,2})?$/;function ei(e){if(e.length===0||e===".")return;let[r,o]=e.startsWith(".")?[void 0,e.substring(1)]:e.split("."),i=r?parseInt(r,10):0,a=o?o.length===2?parseInt(o,10):parseInt(o,10)*10:0;return i*100+a}function ye({id:e,onChange:r,placeholder:o}){let i=(0,_e.useContext)(c),{state:a}=(0,_e.useContext)(fn),[s,m]=(0,_e.useState)("");function _(k){let n=k.target.value;n.match(ni)&&(m(n),r(ei(n)))}return(0,me.jsxs)("div",{className:(0,$r.default)(nr.wrapper,{[nr.currency]:s}),children:[s&&(0,me.jsx)("span",{children:"$"}),(0,me.jsx)(be,{id:e,placeholder:o,variant:a.primaryInput==="touch"?"large":"medium",type:"text",inputMode:"decimal",maxLength:8,value:s,onChange:_,"aria-label":i("Enter the amount in dollars")})]})}var Qr=t(Sn());var Jr="/assets/svg/app_icon-64-L7VWMEDC.svg?url";var er={closeButton:"Hb",header:"Vi"};var An=t(d()),xn=({title:e,className:r,onClose:o,disabledClose:i})=>(0,An.jsxs)("div",{className:(0,Qr.default)(er.header,r),children:[(0,An.jsx)("img",{src:Jr,alt:""}),typeof e=="string"?(0,An.jsx)("h1",{children:e}):e,o&&(0,An.jsx)("div",{className:er.closeButton,children:(0,An.jsx)(E,{onClick:o,mode:"transparent",disabled:i,children:(0,An.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:$.Close}}]})})})]});var eo=t(b());var ce=t(Sn()),Se=t(b());var En={wrapper:"Wb",dialog:"Xi",footer:"Zi",actions:"Vd",error:"Tb",secondary:"Ab"};var J=t(d());function Be({children:e,className:r,title:o,confirmButtonText:i,cancelButtonText:a,onConfirm:s,footerClassName:m,actionButtonsClassName:_,onCancel:k,isConfirmDisabled:n,isCancelDisabled:l,errorMessage:u,handleFocus:g,SaveButtonAccessory:x}){let I=(0,Se.useRef)(null),A=(0,Se.useContext)(c),Z=g===!0||g===void 0;return(0,J.jsx)("form",{onSubmit:W=>{W.preventDefault(),s&&s()},children:(0,J.jsxs)("div",{id:"dialog",className:(0,ce.default)(En.dialog,r),children:[(0,J.jsx)(xn,{title:o}),(0,J.jsxs)("div",{className:En.wrapper,children:[e,(0,J.jsxs)("div",{className:(0,ce.default)(En.footer,m),children:[(0,J.jsxs)("div",{className:_?(0,ce.default)(En.actions,_):En.actions,children:[s&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(E,{autoFocus:Z,className:En.submit,disabled:n,mode:"primary",ref:I,type:"submit",children:i??A("Confirm")}),x&&(0,J.jsx)(x,{ref:I})]}),k&&(0,J.jsx)(E,{onClick:k,autoFocus:Z&&!s,disabled:l,children:a??A("Cancel")})]}),(0,J.jsx)("p",{"aria-live":"assertive","aria-hidden":!!u,className:(0,ce.default)(En.secondary,En.error),children:u})]})]})]})})}var no={error:"Mb"};var rr=t(d());function Pn({header:e,message:r}){let o=(0,eo.useContext)(c);return(0,rr.jsx)(Be,{title:e,confirmButtonText:o("OK"),onConfirm:async()=>p("close-modal",void 0),children:(0,rr.jsx)("p",{className:no.error,children:r})})}var O={dialogWrapper:"Xd",header:"Zd",itemTitle:"Nd",error:"Ob",details:"Pl",detailsRow:"Mr",label:"Gb",reason:"Ce",memo:"Db",footer:"sn",integrationInfo:"Kd",account:"Ud",inlineIcon:"Pb",actionButtons:"Ee",submit:"Vb"};var ro=t(b());var Ee=t(b());var Ce={list:"Vl"};var Ie=t(d());function ze({selectedItem:e,accounts:r,setSelectedAccount:o,disabled:i,selectClassName:a}){let s=(0,Ee.useContext)(c),m=(0,Ee.useRef)(null);return(0,Ie.jsx)(Bn,{accessibilityLabel:s("Select account"),ref:m,buttonClassName:a,listClassName:Ce.list,items:r.map(_=>({type:"text",id:_.uuid,icon:_.icon&&(0,Ie.jsx)(N,{..._.icon,size:"mini",className:Ce.icon}),value:_.name,typeAhead:_.name,selected:_.uuid===e?.uuid,onSelect:()=>o(_)})),disabled:i,children:e?(0,Ie.jsx)(Cn,{icon:e.icon&&{...e.icon,className:Ce.locationIcon,size:"mini"},label:e.name,size:"small",disabled:i}):s("Choose an account")})}var zn=t(d());function oo({accounts:e,selectedAccount:r,isSubmitting:o,onSelectAccount:i,onSubmit:a}){let s=(0,ro.useContext)(c);return(0,zn.jsxs)("div",{className:O.footer,children:[(0,zn.jsxs)("span",{className:O.integrationInfo,children:[(0,zn.jsx)(N,{className:O.inlineIcon,sources:[{type:"DefaultIcon",content:{file:Tn.BrexVault}}],size:"mini",shape:_r.Circle}),(0,zn.jsx)("p",{children:s("Brex cards are stored and sync from Brex.com.")})]}),(0,zn.jsxs)("div",{className:O.actionButtons,children:[(0,zn.jsx)(ze,{selectedItem:r,accounts:e,setSelectedAccount:i,disabled:e?.length===1}),(0,zn.jsx)(E,{className:O.submit,mode:"primary",onClick:a,working:o,children:s("Create & Fill")})]})]})}var R=t(d()),li=new URLSearchParams(window.location.search);function di({accounts:e,idempotentKey:r}){let{bridge:o}=(0,P.useContext)(C),i=(0,P.useContext)(c),{state:a}=(0,P.useContext)(fn),s=(0,P.useContext)(jn),[m,_]=(0,P.useState)(!1),[k,n]=(0,P.useState)(),[l,u]=(0,P.useState)(""),[g,x]=(0,P.useState)(),[I,A]=(0,P.useState)(mr.Monthly),[Z,W]=(0,P.useState)("one-year"),[v,y]=(0,P.useState)(""),[U,M]=(0,P.useState)(e[0]),T=s==="small"&&a.primaryInput==="touch",en={MONTHLY:i("every month"),QUARTERLY:i("every quarter"),YEARLY:i("every year"),ONE_TIME:i("one time")},cn={"seven-days":i("in 7 Days"),"one-month":i("in 1 Month"),"one-year":i("in 1 Year"),custom:i("Custom"),none:i("None")};function wn(B){switch(B.data.type){case"IntegrationDisabled":return i("The integration with Brex has been disabled, please reconnect it on 1Password.com");case"UnableToGetToken":return i("A problem occurred when communicating with Brex.com. Please try again");case"AppLocked":return i("1Password is locked. Please try again after unlocking.");case"DidNotAcceptFill":return;case"Validation":switch(B.data.data){case"TitleRequired":return i("A title is required");case"SpendLimitRequired":return i("The spending limit is required");case"SpendLimitDurationRequired":return i("A duration for the spending limit is required");case"LockAfterRequired":return i("Lock card is required");case"ReasonForCardRequired":return i("The reason for a card is required");default:Y(B.data)}break;case"UnableToCreateCard":return i("Unable to create card, please try again.");default:Y(B.data)}}return(0,R.jsx)(In,{ariaLabel:i("Create Brex vendor card\u2026"),buttonOrientation:T?"vertical":"horizontal",headerAccessories:(0,R.jsx)(xn,{title:i("Create Brex vendor card\u2026"),className:O.header,onClose:async()=>p("close-modal",void 0)}),children:(0,R.jsxs)("div",{className:O.dialogWrapper,children:[(0,R.jsx)(qn,{type:"icon",className:O.itemTitle,onChange:u,icon:{id:"id",sources:[{type:"DefaultIcon",content:{file:Tn.BrexVendor}}]},placeholder:i("Title"),value:l,autoFocus:!0}),(0,R.jsxs)("div",{className:O.details,children:[(0,R.jsxs)("div",{className:O.detailsRow,children:[(0,R.jsx)(ye,{onChange:B=>x(B),placeholder:i("Set Spending Limit")}),(0,R.jsx)(Bn,{items:Object.keys(en).map(B=>{let K=B;return{id:B,type:"text",typeAhead:en[K],value:en[K],onSelect:()=>A(K),selected:K===I}}),children:en[I]})]}),(0,R.jsxs)("div",{className:O.detailsRow,children:[(0,R.jsx)("span",{className:O.label,children:i("Lock Card")}),(0,R.jsx)(Bn,{items:Object.keys(cn).filter(B=>B!=="custom").map(B=>{let K=B;return{id:K,type:"text",typeAhead:cn[K],value:cn[K],onSelect:()=>W(K),selected:K===Z}}),children:cn[Z]})]})]}),(0,R.jsxs)("div",{className:O.reason,children:[(0,R.jsx)(be,{placeholder:i("Reason for card"),onChange:B=>y(B.target.value),value:v,icon:"edit",variant:"large"}),(0,R.jsx)("p",{children:(0,R.jsx)("span",{className:O.memo,children:i("Brex will auto-fill transaction memos on this card.")})})]}),k&&(0,R.jsxs)("div",{className:O.error,"aria-errormessage":"error","aria-live":"polite",children:[(0,R.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:$.Warning}}]}),(0,R.jsx)("div",{children:k})]}),(0,R.jsx)(oo,{accounts:e,selectedAccount:U,isSubmitting:m,onSelectAccount:B=>M(B),onSubmit:async()=>{_(!0),n(void 0);let B=await o.fillNewBrexCard({accountUuid:U.uuid,title:l,spendLimit:g??0,spendLimitDuration:I,lockCardType:Z==="custom"?{type:"custom",data:""}:{type:Z},reasonForCard:v,frameIdentifier:li.get("frameIdentifier")??void 0,idempotentKey:r});B.type==="Success"?p("close-modal",void 0):(n(wn(B)),_(!1))}})]})})}function io(){let{bridge:e}=(0,P.useContext)(C),r=(0,P.useContext)(c),[o,i]=(0,P.useState)(void 0);return(0,P.useEffect)(()=>{e.getBrexDialogConfiguration().then(i)},[e]),o?o.type==="Success"?(0,R.jsx)(di,{accounts:o.data.accounts,idempotentKey:o.data.idempotentKey}):(0,R.jsx)(Pn,{header:r("An error has occurred"),message:r("An unexpected error occurred. Please contact support@1password.com")}):null}var hn=t(b());var ao={"*":"strong","`":"mark"};function _i(e){let r="",o=[],i=new Map;for(let[a,s]of[...e].entries()){if(Object.keys(ao).includes(s)){let m=ao[s];i.size===0?(o.push(r),r="",i.set(m,"")):i.keys().next().value===m&&(o.push(...i.entries()),i.clear());continue}if(i.size>0){let m=i.keys().next().value;i.set(m,i.get(m)+s);continue}r+=s,r&&a===e.length-1&&o.push(r)}return o}function to(e){return typeof e!="string"?[]:e.split(/\r?\n/g).reduce((r,o)=>(r.push(..._i(o)),r),[])}var Qn=t(d());function Re({input:e}){let r=to(e),o=[];for(let[i,a]of r.entries())a instanceof Array?a[0]==="strong"?o.push((0,Qn.jsx)("strong",{children:a[1]},i)):r[0]==="mark"&&o.push((0,Qn.jsx)("mark",{children:a[1]},i)):o.push(a);return(0,Qn.jsx)(Qn.Fragment,{children:o})}var or={content:"Xl",inlineIcon:"Xb"};var F=t(d());function so(){let{bridge:e}=(0,hn.useContext)(C),r=(0,hn.useContext)(c),[o,i]=(0,hn.useState)(void 0),a=(0,hn.useId)();return(0,hn.useEffect)(()=>{e.canRequestUnlock().then(i)},[e]),(0,F.jsxs)(Xn,{ariaLabel:a,onClose:async()=>p("close-modal",void 0),open:!0,children:[(0,F.jsxs)(sn,{children:[(0,F.jsx)(Yn,{}),(0,F.jsx)(ln,{id:a,text:r("Your account is offline.")})]}),(0,F.jsx)("div",{className:or.content,children:(0,F.jsx)(ci,{keyboardShortcut:o?.data?.keyboardShortcut})}),(0,F.jsx)(bn,{children:(0,F.jsx)(E,{onClick:async()=>p("close-modal",void 0),children:r("Close")})})]})}var ci=({keyboardShortcut:e})=>{let r=(0,hn.useContext)(c),o=e?(0,F.jsx)(Re,{input:r("Press {shortcut} to open 1Password.",{shortcut:`*${e}*`})}):r("Press the 1Password icon in your browser\u2019s toolbar to open 1Password.");return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ke,{as:"p",variant:"medium",alignment:"center",children:o}),(0,F.jsx)(Ke,{as:"p",variant:"medium",alignment:"center",children:r.$("Then tap the offline indicator ( <offlineIndicator /> ) and finish signing in to save your changes.",{offlineIndicator:()=>(0,F.jsx)("span",{className:or.inlineIcon,children:(0,F.jsx)(N,{sources:[{type:"ThemedIcon",content:{file:$.NoConnection}}],size:"mini"},"offline-icon")},"icon-container")})})]})};var D=t(b());var kn={titleStyles:"Yd",stackLabel:"Zb",fieldWrapper:"Fd",regenerateButton:"Nb",regenerateContainer:"Kb",btnWrapper:"Jd",errorMessage:"Ub",header:"Qd",selectedIcon:"Yb",accountSelector:"Ni",accountSelectorSeparator:"Fb",listItem:"Jb",select:"Zl",icon:"Qb"};var Q=t(d()),xi=3,ir=15,ki=({accounts:e})=>{let{bridge:r}=(0,D.useContext)(C),o=(0,D.useContext)(c),{state:i}=(0,D.useContext)(fn),a=(0,D.useContext)(jn),[s,m]=(0,D.useState)(),[_,k]=(0,D.useState)(!1),[n,l]=(0,D.useState)(0),[u,g]=(0,D.useState)(0),[x,I]=(0,D.useState)(e[0]),[A,Z]=(0,D.useState)(e[0].emailAliasAccounts[0]),[W,v]=(0,D.useState)(void 0),y=u>0?o("Regenerate again in {secondsLeft}s",{secondsLeft:u}):o("Regenerate"),U=e.reduce(function(L,V){return L+V.emailAliasAccounts.length},0),M=s?[{type:"plainText",content:{text:s.substring(0,s.lastIndexOf("@"))}},{type:"secondaryText",content:{text:s.substring(s.lastIndexOf("@"))}}]:[{type:"secondaryText",content:{text:"unable to generate Masked Email"}}];async function T(L){m(void 0),v(void 0),k(!0);let V=await L.generateEmailAlias();V.type==="Success"?m(V.data):v(V.data),k(!1)}async function en(){if(s){let L=await r.fillEmailAlias(s);if(L.type==="Error"){v(L.data);return}else L.data||p("close-modal",void 0)}else p("close-modal",void 0)}let cn=async L=>{if(L.preventDefault(),await T(r),n+1>=ir){let V=n-ir||1;g(V*xi)}l(n+1)};(0,D.useEffect)(()=>{u>0&&setTimeout(()=>g(u-1),1e3)},[u]),(0,D.useEffect)(()=>{r.startEmailAliasSession({accountUuid:x.uuid,emailAliasAccountId:A.id}).then(L=>{if(L.type==="Error"){v(L.data);return}T(r)})},[r,x,A]);let wn={key:"primaryButton",value:o("Fill Email"),disabled:!s,onClick:async()=>await en()},B={key:"secondaryButton",value:o("Cancel"),onClick:()=>{s&&r.cancelEmailAliasSession(),p("close-modal",void 0)}},K={key:"regenerateButton",value:y,working:_,mode:"primaryAlt",disabled:_||n>=ir&&u>0,onClick:cn},Ge=()=>{let L=[];return e.map((V,w)=>{L.push({type:"groupLabel",id:V.uuid,value:V.name.toUpperCase(),className:kn.listItem}),V.emailAliasAccounts.map(yn=>{yn.name&&L.push({type:"text",id:`${yn.id}|${V.uuid}`,value:yn.name,typeAhead:yn.name,selected:A.id===yn.id&&x.uuid===V.uuid,onSelect:()=>{I(V),Z(yn)},className:kn.listItem})}),w+1<e.length&&L.push({type:"separator",id:`separator${w}`})}),L},te=a==="small"&&i.primaryInput==="touch";return(0,Q.jsx)(In,{ariaLabel:o("Create Masked Email"),buttonOrientation:te?"vertical":"horizontal",headerAccessories:(0,Q.jsx)(xn,{title:o("Create Masked Email"),className:kn.header}),primaryButton:wn,secondaryButton:te?K:B,tertiaryButton:te?B:K,children:(0,Q.jsxs)("div",{className:kn.fieldWrapper,children:[U>1&&(0,Q.jsx)($n,{useId:!0,label:o("Assign to Account"),labelTextClassName:kn.titleStyles,className:kn.stackLabel,children:(0,Q.jsx)(Bn,{buttonClassName:kn.select,items:Ge(),matchTriggerWidth:!0,children:(0,Q.jsxs)("div",{className:kn.accountSelector,children:[(0,Q.jsx)(Cn,{icon:{...x.icon,size:"mini"},label:x.name,size:"small"}),(0,Q.jsx)("div",{className:kn.accountSelectorSeparator}),A.name&&(0,Q.jsx)(Cn,{label:A.name,size:"small"})]})})}),(0,Q.jsx)(he,{label:o("email"),borderStyle:cr.TopAndBottom,value:_?o("loading..."):M}),W&&(0,Q.jsx)("div",{className:kn.errorMessage,children:W})]})})},lo=()=>{let{bridge:e}=(0,D.useContext)(C),r=(0,D.useContext)(c),[o,i]=(0,D.useState)(void 0);return(0,D.useEffect)(()=>{e.getEmailAliasDialogConfiguration().then(i)},[e]),o?o.type==="Success"?(0,Q.jsx)(ki,{accounts:o.data.accounts}):(0,Q.jsx)(Pn,{header:r("An error has occurred"),message:r("An unexpected error occurred. Please contact support@1password.com")}):null};var Rn=t(b());var _o={content:"nh"};var dn=t(d());function ar(){let{bridge:e}=(0,Rn.useContext)(C),r=(0,Rn.useContext)(c),[o,i]=(0,Rn.useState)(void 0),a=(0,Rn.useId)();return(0,Rn.useEffect)(()=>{e.canRequestUnlock().then(i)},[e]),(0,dn.jsxs)(Xn,{ariaLabel:a,onClose:async()=>p("close-modal",void 0),open:!0,children:[(0,dn.jsxs)(sn,{children:[(0,dn.jsx)(Yn,{}),(0,dn.jsx)(ln,{id:a,text:r("1Password is locked")})]}),(0,dn.jsx)("div",{className:_o.content,children:(0,dn.jsx)("p",{children:o?.name==="no"&&o.data.keyboardShortcut?(0,dn.jsx)(Re,{input:r("Press {shortcut} to unlock 1Password",{shortcut:`*${o.data.keyboardShortcut}*`})}):r("To continue saving with 1Password, unlock an account.")})}),(0,dn.jsxs)(bn,{children:[o?.name==="yes"&&(0,dn.jsx)(E,{mode:"primary",onClick:async()=>p("request-managed-unlock",void 0),children:r("Open 1Password")}),(0,dn.jsx)(E,{onClick:async()=>p("close-modal",void 0),children:r("Close")})]})]})}var Te=t(Sn()),q=t(b());function Le(e,r){switch(e){case"NoValidAccounts":return{header:r("Unable to enable integration"),message:r("A 1Password membership is required to integrate with Privacy.")};case"UnableToGetFundingAccounts":return{header:r("An error has occurred"),message:r("Please ensure there is at least one Funding Source associated with your Privacy.com account, then try again.")};case"UnknownError":return{header:r("An error has occurred"),message:r("An unexpected error occurred. Please contact support@1password.com")};default:Y(e)}}var co=t(Sn());var mo={detailsRow:"Nl"};var po=t(d()),ne=({className:e,children:r})=>(0,po.jsx)("div",{className:(0,co.default)(mo.detailsRow,e),children:r});var h={detailsRowPrimaryElement:"nm",detailsRowSecondaryElement:"Ul",select:"rh",label:"Qn",loadingText:"rm",checkbox:"oh",header:"eh",itemTitle:"ih",dialogWrapper:"om",details:"je",error:"ah",actionButtons:"ho",vaultSelect:"em",submit:"lh"};var xo=t(b());var ee=t(d()),tr=({vaultListElements:e,onSelectVault:r,selectedVault:o,onButtonClick:i,working:a,disabled:s=!1})=>{let m=(0,xo.useContext)(c);return(0,ee.jsxs)("div",{className:h.actionButtons,children:[(0,ee.jsx)("div",{children:e&&r&&(0,ee.jsx)(we,{buttonClassName:h.vaultSelect,vaultListElements:e,selectedVaultId:o,onSelect:r})}),(0,ee.jsx)(E,{className:h.submit,mode:"primary",onClick:i,working:a,disabled:s||!o,"data-testid":"privacy-create-dialog-submit-button",children:m("Create & Fill")})]})};var ko=t(b());var go=t(d()),sr=({onChange:e,value:r})=>{let o=(0,ko.useContext)(c);return(0,go.jsx)(qn,{type:"icon",className:h.itemTitle,onChange:e,icon:{id:"id",sources:[{type:"DefaultIcon",content:{file:Tn.PrivacyCom}}]},placeholder:o("Title"),value:r,autoFocus:!0,"data-test-id":"privacy-card-name-input"})};var f=t(d()),bi=new URLSearchParams(window.location.search);function hi({suggestedVaultId:e,vaultListElements:r,fundingAccounts:o,defaultCardName:i}){let a=(0,q.useContext)(c),{bridge:s}=(0,q.useContext)(C),{state:m}=(0,q.useContext)(fn),_=(0,q.useContext)(jn),[k,n]=(0,q.useState)(i??""),[l,u]=(0,q.useState)(),[g,x]=(0,q.useState)(!1),[I,A]=(0,q.useState)(!1),[Z,W]=(0,q.useState)(!1),[v,y]=(0,q.useState)(pn.Monthly),[U,M]=(0,q.useState)(e),[T,en]=(0,q.useState)(o[0]),[cn,wn]=(0,q.useState)(),B=_==="small"&&m.primaryInput==="touch";function K(w){switch(w){case pn.Monthly:return a("every month");case pn.Annually:return a("every year");case pn.Transaction:return a("every transaction");case pn.Forever:return a("forever");default:return}}function Ge(w){switch(w.type){case"IntegrationDisabled":return a("Please enable the Privacy integration from the Developer Tools context menu.");case"AppLocked":return a("1Password is locked. Please try again after unlocking.");case"VaultLocked":return a("This vault is locked. Please try again after unlocking.");case"SaveFailed":return a("Unable to save item. Check that the vault is unlocked and try again.");case"EmptyCardName":return a("Please enter a name for the card.");case"CardNameTooLarge":return a("Please enter a smaller name for the card.");case"EmptyLimit":return a("You must provide a spending limit for the card.");case"LimitTooLarge":return a("Please enter a smaller spending limit for the card.");case"PageUrlParseError":return a("Unable to parse URL");case"HttpError":return a("We were unable to reach Privacy. Please check your internet connection and try again.");case"InvalidApiKey":return a("Unable to authenticate with Privacy. Please check your API key and try again.");case"ApiError":return w.content.message?a("Error creating card: {message}",{message:w.content.message}):a("Error creating card.");case"BrainError":return a("Unable to create credit card item from Privacy Card.");case"NoVaultSelected":return a("Please select a vault.");default:return a("An unexpected error occurred.")}}async function te(){if(!U){wn({type:"NoVaultSelected",content:void 0}),W(!1);return}W(!0);try{if(T){let w=await s.fillNewPrivacyCard({params:{itemTitle:k,fundingToken:T.token,limitAmount:g?l:void 0,limitDuration:g?v:void 0},vaultId:U,frameIdentifier:bi.get("frameIdentifier")??void 0,apiKey:T.apiKey});wn(w.error)}}finally{W(!1)}}function L(w){let yn=K(w);return{type:"text",id:w,value:yn,onSelect:()=>y(w),typeAhead:yn||"",selected:v===w}}function V(w){return{type:"text",id:w.token,value:w.label,onSelect:()=>en(w),typeAhead:w.label,selected:w.token===T.token}}return(0,f.jsxs)(In,{ariaLabel:a("Create Privacy Card"),buttonOrientation:B?"vertical":"horizontal",headerAccessories:(0,f.jsx)(xn,{title:a("Create Privacy Card"),className:h.header,onClose:async()=>p("close-modal",void 0)}),children:[(0,f.jsxs)("div",{className:h.dialogWrapper,children:[(0,f.jsx)(sr,{onChange:n,value:k}),(0,f.jsxs)("div",{className:h.details,children:[(0,f.jsx)(ne,{children:(0,f.jsx)($n,{label:a("Spending Limit"),className:(0,Te.default)(h.label,h.checkbox),children:(0,f.jsx)(Je,{checked:g,onClick:()=>{x(!g),u(void 0),y(pn.Monthly),wn(void 0)},"data-test-id":"privacy-spend-limit-toggle"})})}),g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(ne,{children:[(0,f.jsx)("div",{"data-test-id":"privacy-spend-limit-amount",className:h.detailsRowPrimaryElement,children:(0,f.jsx)(ye,{id:"currencyInput",onChange:w=>{u(w),wn(void 0)},placeholder:a("Set Spending Limit")})}),(0,f.jsx)("div",{"data-test-id":"privacy-spend-limit-frequency",className:h.detailsRowSecondaryElement,children:(0,f.jsx)(Qe,{"data-test-id":"privacy-spend-limit-frequency",items:[L(pn.Monthly),L(pn.Annually),L(pn.Transaction),L(pn.Forever)],useCustomButton:!0,children:(0,f.jsx)(E,{accessory:"select",className:h.select,disabled:I,children:K(v)})})})]}),(0,f.jsx)(ne,{children:(0,f.jsx)($n,{label:a("Single Use"),className:(0,Te.default)(h.label,h.checkbox),children:(0,f.jsx)(Je,{checked:I,onClick:()=>{A(!I),wn(void 0)},"data-test-id":"privacy-single-use-toggle"})})})]}),(0,f.jsxs)(ne,{children:[(0,f.jsx)("div",{className:h.detailsRowPrimaryElement,children:(0,f.jsx)(Br,{children:a("Funding Source")})}),(0,f.jsx)("div",{className:h.detailsRowSecondaryElement,children:(0,f.jsx)(Qe,{items:o.map(V),buttonClassName:h.select,useCustomButton:!0,children:(0,f.jsx)(E,{accessory:"select",className:h.select,children:o.find(w=>w.token===T.token)?.label})})})]})]}),cn&&(0,f.jsxs)("div",{className:h.error,"aria-errormessage":"error","aria-live":"polite",children:[(0,f.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:$.Warning}}]}),(0,f.jsx)("div",{children:Ge(cn)})]})]}),(0,f.jsx)(tr,{vaultListElements:r,selectedVault:U,onSelectVault:w=>M(w.content.id),onButtonClick:te,working:Z})]})}function uo(){let{bridge:e}=(0,q.useContext)(C),r=(0,q.useContext)(c),[o,i]=(0,q.useState)();return(0,q.useEffect)(()=>{e.getPrivacyDialogConfiguration().then(i)},[e]),o?o.response.type==="Success"?(0,f.jsx)(hi,{suggestedVaultId:o.response.data.suggestedVaultId,vaultListElements:o.response.data.vaultListElements,fundingAccounts:o.response.data.fundingAccounts,defaultCardName:o.response.data.defaultCardName}):(0,f.jsx)(Pn,{...Le(o.response.data,r)}):(0,f.jsxs)(In,{ariaLabel:r("Create Privacy Card"),headerAccessories:(0,f.jsx)(xn,{title:r("Create Privacy Card"),className:h.header,onClose:async()=>p("close-modal",void 0)}),children:[(0,f.jsxs)("div",{className:h.dialogWrapper,children:[(0,f.jsx)(sr,{onChange:()=>{},value:r("Privacy Card")}),(0,f.jsx)("div",{className:h.details,children:(0,f.jsx)(ne,{children:(0,f.jsx)($n,{label:r("Connecting to Privacy Card\u2026"),className:(0,Te.default)(h.label,h.checkbox),labelTextClassName:h.loadingText,children:(0,f.jsx)(ue,{className:h.spinner})})})})]}),(0,f.jsx)(tr,{disabled:!0})]})}var gn=t(b());var De={labelText:"sh",select:"_h"};var rn=t(d());function wi({suggestedAccountUuid:e,accounts:r}){let{bridge:o}=(0,gn.useContext)(C),i=(0,gn.useContext)(c),[a,s]=(0,gn.useState)(),[m,_]=(0,gn.useState)(r.find(l=>l.uuid===e)||r[0]);function k(l){switch(l){case"AccountLocked":return r.length>1?i("Please unlock the selected account to enable the integration."):i("Please unlock 1Password to enable the integration.");case"FailedToCreateApiKey":return i("Unable to enable the Privacy integration. Please try again later.");default:Y(l)}}async function n(){let l=await o.enablePrivacyIntegration({accountUuid:m.uuid});s(l.error)}return(0,rn.jsx)(Be,{title:i("Add to 1Password"),confirmButtonText:i("Add to 1Password"),errorMessage:a&&k(a),onConfirm:async()=>n(),onCancel:async()=>p("close-modal",void 0),children:(0,rn.jsxs)(rn.Fragment,{children:[(0,rn.jsx)("p",{className:De.labelText,children:i("Use 1Password to create and fill Privacy Cards everywhere you pay online, and save merchant cards for future use.")}),r.length>0?(0,rn.jsxs)(rn.Fragment,{children:[(0,rn.jsx)("label",{className:De.labelText,children:i("Choose an account")}),(0,rn.jsx)(ze,{selectedItem:m,accounts:r,disabled:r.length<2,setSelectedAccount:_,selectClassName:De.select})]}):void 0]})})}function fo(){let{bridge:e}=(0,gn.useContext)(C),r=(0,gn.useContext)(c),[o,i]=(0,gn.useState)();return(0,gn.useEffect)(()=>{e.getPrivacyEnableDialogConfiguration().then(i)},[e]),o?o.response.type==="Success"?(0,rn.jsx)(wi,{suggestedAccountUuid:o.response.data.suggestedAccountUuid,accounts:o.response.data.accounts}):(0,rn.jsx)(Pn,{...Le(o.response.data,r)}):null}var nn=t(b());var vo=t(b());var z=t(b()),ho=t(d()),je=({children:e,initialElements:r=[],initialCallout:o,onError:i})=>{let[a,s]=(0,z.useState)(new Map),[m,_]=(0,z.useState)(r),[k,n]=(0,z.useState)(o),l=(0,z.useContext)(c),u=(0,z.useRef)(i);(0,z.useInsertionEffect)(()=>{u.current=i},[i]);let g=(0,z.useCallback)((...v)=>{let y=u.current;return y(...v)},[]);(0,z.useEffect)(()=>{r.length>0&&_(r)},[r]),(0,z.useEffect)(()=>{n(o)},[o]);let x=(0,z.useCallback)(async(v,y=[])=>{let U=[...y,...Array.from(a.values())];return p("save-dialog-edit-item",{type:v,data:{values:U}}).then(M=>M.ok?(M.data.type==="viewModel"&&n(M.data.data.callout),M.data.type==="error"?(g(M.data.data.message),M.data):(s(T=>{for(let[en,cn]of a)T.get(en)===cn&&T.delete(en);return T.size!==a.size?new Map(T):T}),M.data)):(g(M.type),{type:"error",data:{message:""}})).catch(()=>(g(l("An unexpected error occurred. Please contact support@1password.com")),{type:"error",data:{message:""}}))},[a,l,g]),I=(0,z.useCallback)(()=>{x("save")},[x]),A=(0,z.useCallback)(async(v=[])=>x("update",v).then(y=>(y&&y.type==="viewModel"&&_(y.data.elements),y)),[x]),Z=(0,z.useCallback)(v=>{yi(v)?s(y=>new Map(y).set(v.content.id,v)):A([v]).catch(y=>console.error("Failed to update",y))},[A]);(0,z.useEffect)(()=>{if(!a.size)return;let v=window.setTimeout(A,250);return()=>{window.clearTimeout(v)}},[A,a]);let W=(0,z.useMemo)(()=>{let v=Dn.createActiveSpan("elementsWithDraftChanges","saveDialog");if(!m)return[];if(!a.size)return m;let y=window.structuredClone(m);for(let[U,M]of a)for(let T of y){T.header&&bo({type:"sectionHeader",content:T.header},M,U);for(let en of T.elements)bo(en,M,U)}return Dn.endActiveSpan(v),y},[m,a]);return(0,ho.jsx)(Ln.Provider,{value:{sections:W,calloutBanner:k,updateItem:Z,saveItem:I},children:e})},Ln=(0,z.createContext)({});function yi(e){switch(e.type){case"text":case"concealedText":case"monthYear":case"dayMonthYear":return!0}return!1}function qe(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var Si=e=>{let r=i=>typeof i=="object"&&i!==null&&qe(i,"type")&&i.type==="textField",o=i=>typeof i=="object"&&i!==null&&qe(i,"type")&&i.type==="textFieldWithSuggestions";return qe(e,"label")&&(r(e.label)||o(e.label))?e.label.content:void 0},Bi=e=>{let r=i=>typeof i=="object"&&i!==null&&"type"in i&&(i.type==="textField"||i.type==="textFieldWithSuggestions"),o=i=>typeof i=="object"&&i!==null&&"id"in i&&"placeholder"in i&&"text"in i;if(e&&qe(e,"textField")){if(o(e.textField))return e.textField;if(r(e.textField))return e.textField.content}};function bo(e,r,o){switch(r.type){case"text":case"concealedText":{let i=Bi(e.content),a=Si(e.content),{text:s}=r.content;if(i?.id===o&&(i.text=s),a?.id===o&&(a.text=s),"components"in e.content)for(let m of e.content.components)m.content.id===o&&(m.content.text=s)}break;case"monthYear":if(e.type==="monthYear"&&e.content.id===o&&e.content.value){let{month:i,year:a}=r.content;e.content.value={month:i,year:a}}break;case"dayMonthYear":{e.type==="dayMonthYear"&&e.content.id===o&&(e.content.value=r.content.utcTimestamp);break}default:Y(r)}}var Ae=t(d()),pe=({errorMessage:e})=>{let{calloutBanner:r}=(0,vo.useContext)(Ln);if(e)return(0,Ae.jsx)(Ye,{icon:{id:"warning",sources:[{type:"ThemedIcon",content:{file:$.Warning}}]},role:"status",variant:"warning",children:e});if(r){let{icon:o,variant:i,text:a}=r;return(0,Ae.jsx)(Ye,{icon:o,role:"alert",variant:i,children:(0,Ae.jsx)(Sr,{value:a})})}return null};var Bo=t(b());var xe=t(b());var wo=t(d()),Hn=({inTutorial:e})=>{let{fillingAndSavingTelemetry:r}=(0,xe.useContext)(C),o=(0,xe.useContext)(c),i=(0,xe.useCallback)(()=>{r&&p("record-click-event-all-accounts",{event:{componentType:"button",source:"save_dialog",componentName:"SAVE_DIALOG_CLOSE"}}),p("close-modal",void 0)},[r]);return(0,wo.jsx)(fe,{label:o("Close"),disabled:e,onClick:i,type:"close"})};var yo={hiddenTitleBarText:"dh",loadingSpinner:"mh"};var So={loadingSpinner:"xh","fade-in":"lm"};var lr=t(d()),Wn=()=>(0,lr.jsx)("div",{className:So.loadingSpinner,children:(0,lr.jsx)(ue,{})});var vn=t(d()),Co=({titleId:e})=>{let r=(0,Bo.useContext)(c);return(0,vn.jsxs)(vn.Fragment,{children:[(0,vn.jsxs)(sn,{children:[(0,vn.jsx)("div",{className:yo.hiddenTitleBarText,children:(0,vn.jsx)(ln,{id:e,text:r("Loading\u2026")})}),(0,vn.jsx)(Hn,{})]}),(0,vn.jsx)(Wn,{})]})};var Do=t(Sn()),qo=t(Jo()),X=t(b());var Fn={content:"sm",scrollableContent:"_m",reduceTopPadding:"fh",noFlex:"bh",vaultSelectorOption:"hh",disabled:"vh"};var To=t(Sn()),Me=t(b());var Ro=t(Sn()),Fe=t(b());var He=t(b());var Io={button:"Or",expanded:"dm"};var Eo=t(b());var Pe={container:"mm",value:"wh",pill:"xm"};var re=t(d()),Nn=({value:e})=>{let r=(0,Eo.useContext)(c);return e?(0,re.jsxs)("div",{className:Pe.container,children:[(0,re.jsx)("div",{className:Pe.value,children:e}),(0,re.jsx)("div",{className:Pe.pill,children:(0,re.jsx)(Cr,{color:"inherit",level:6,truncate:1,children:r("Previous")})})]}):null};var On=t(d()),zo=({previousValue:e,...r})=>{let[o,i]=(0,He.useState)(!1),a=(0,He.useContext)(c),s=o?e:a("Reveal to see previous value"),m=a(o?"Conceal previous value":"Reveal previous value"),_=o?$.Hide:$.Show;return e?(0,On.jsx)(Xe,{...r,value:{...r.value,concealedValue:o?r.value.value:r.value.concealedValue},accessory:(0,On.jsx)(Nn,{value:s}),accessoryAction:(0,On.jsx)(Er,{value:m,children:(0,On.jsx)("button",{className:Io.button,onClick:()=>i(!o),children:(0,On.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:_}}]})})})}):(0,On.jsx)(Xe,{...r})};var We={element:"yh",primary:"Bh",secondary:"km"};var S=t(d()),Lo=({compact:e,element:r,onChange:o,topBorder:i})=>{let[a,s]=(0,Fe.useState)(""),m=async n=>p("edit-item-filter",n,{enableTracing:!1}).then(l=>l.ok?l.data:{filteredSuggestions:[]}),_=dr(m,o),k=(0,Fe.useContext)(c);return(0,S.jsx)("div",{className:(0,Ro.default)(We.element,{[We.primary]:i==="primary",[We.seconary]:i==="secondary"}),children:(()=>{switch(r.type){case"add":{let{content:n}=r;return(0,S.jsx)(Ir,{compact:e,icon:n.icon,onClick:()=>o(n.saveValue),value:n.label},n.id)}case"address":{let{content:n}=r;return(0,S.jsx)(Rr,{compact:e,components:n.components,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},filterSuggestions:m,label:_(n.label),onInputChange:(l,u)=>o({type:"text",content:{id:l,text:u}}),onSuggestionSelected:o},n.id)}case"customConcealed":case"concealed":{let{content:n}=r;return(0,S.jsx)(zo,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},getPasswordGenerator:async()=>Promise.resolve({type:"password",content:{entropy:0,password:"",styledText:[]}}),label:_(n.label),accessibilityLabel:n.textField.accessibilityLabel,value:{concealedValue:n.textField.concealedText,id:n.textField.id,onChange:l=>{o({type:"concealedText",content:{id:n.textField.id,...l}})},placeholder:n.textField.placeholder,value:n.textField.text},previousValue:n.textField.previousValue},n.id)}case"dayMonthYear":{let{content:n}=r;return(0,S.jsx)(Lr,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},id:n.id,label:_(n.label),value:Ti(n.value),onChange:l=>{if(l){let u=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds())),g=Math.floor(u.getTime()/1e3).toString();o({type:"dayMonthYear",content:{id:n.id,utcTimestamp:g}})}else o({type:"dayMonthYear",content:{id:n.id,utcTimestamp:void 0}})},openCalendarTooltip:n.openCalendarTooltip},n.id)}case"document":{let{content:n}=r;return(0,S.jsx)(zr,{filename:n.previewLabel,fileStatus:{type:"ready",content:{actions:[]}},icon:n.icon,uuid:n.id,documentPlaceholder:n.newDocumentPlaceholder,fileStatusIcon:n.addFileButtonIcon},n.id)}case"editableLabelAndText":{let{content:n}=r;return(0,S.jsx)(ve,{accessory:(0,S.jsx)(Nn,{value:n.textField.content.previousValue}),compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:_(n.label),value:{id:n.textField.content.id,onChange:l=>{o({type:"text",content:{id:n.textField.content.id,text:l}})},placeholder:n.textField.content.placeholder,value:n.textField.content.text}},n.id)}case"url":{let{content:n}=r;return(0,S.jsx)(Tr,{accessory:(0,S.jsx)(Nn,{value:n.textField.content.previousValue}),id:n.id,compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:_(n.label),toolAction:n.toolAction?.toolType.type==="autofillBehavior"?{...n.toolAction,onChange:o}:void 0,value:{id:n.textField.content.id,onChange:l=>{o({type:"text",content:{id:n.textField.content.id,text:l}})},placeholder:n.textField.content.placeholder,value:n.textField.content.text}},n.id)}case"totp":{let{content:n}=r,l=n.textField.concealedText;return(0,S.jsx)(ve,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:_(n.label),value:{concealedInput:l!==void 0,concealedValue:l,id:n.textField.id,onChange:u=>{o({type:"text",content:{id:n.textField.id,text:u}})},placeholder:n.textField.placeholder,value:n.textField.text}},n.id)}case"linkedItem":{let{content:n}=r;return(0,S.jsx)($e,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},icon:n.icon,subtitle:n.subtitle,title:n.title},n.id)}case"monthYear":{let{content:n}=r;return(0,S.jsx)(jr,{accessory:(0,S.jsx)(Nn,{value:(u=>u?`${u.month} / ${u.year}`:"")(n.previousValue)}),compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},id:n.id,label:_(n.label),onChange:u=>{o({type:"monthYear",content:{id:n.id,...u}})},placeholder:n.placeholder,value:n.value},n.id)}case"note":{let{content:n}=r;return(0,S.jsx)(Ze,{compact:e,label:_(n.label),value:{id:n.textField.id,onChange:l=>{o({type:"text",content:{id:n.textField.id,text:l}})},placeholder:n.textField.placeholder,value:n.textField.text}},n.id)}case"passkey":{let{content:n}=r;return(0,S.jsx)(Hr,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:n.label.type==="label"?n.label.content:void 0,createdAt:n.createdAt},n.id)}case"editableLabelAndTextArea":{let{content:n}=r;return(0,S.jsx)(Ze,{compact:e,label:_(n.label),value:{id:n.textField.id,onChange:l=>{o({type:"text",content:{id:n.textField.id,text:l}})},placeholder:n.textField.placeholder,value:n.textField.text},buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o}},n.id)}case"tags":{let{content:n}=r;return(0,S.jsx)(Pr,{accessibilityLabel:n.accessibilityLabel,addTag:{icon:n.addTagIcon,onBlur:()=>{a&&(o({type:"tag",content:{type:"create",content:a}}),s(""))},onChange:s,onSubmit:l=>{o({type:"tag",content:{type:"create",content:l}}),s("")},placeholder:n.addTagPlaceholder,value:a,suggestions:n.suggestions,filterSuggestions:m},compact:e,label:n.label,onActionSelected:o,tags:n.tags},n.id)}case"textWithSuggestions":{let{content:n}=r;return(0,S.jsx)(qr,{accessory:(0,S.jsx)(Nn,{value:n.textField.previousValue}),compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},filterSuggestions:m,label:_(n.label),suggestions:n.textField.suggestions,input:{id:n.textField.id,onChange:l=>{o({type:"text",content:{id:n.textField.id,text:l}})},placeholder:n.textField.placeholder,value:n.textField.text},accessibilityLabel:n.textField.accessibilityLabel},n.id)}case"title":{let{content:n}=r;return(0,S.jsx)(qn,{type:"icon",compact:e,icon:n.icon,id:n.textField.content.id,onChange:l=>{o({type:"text",content:{id:n.textField.content.id,text:l}})},"aria-label":k("Input field for the item's title"),placeholder:n.textField.content.placeholder,value:n.textField.content.text},n.id)}case"file":{let{content:n}=r;return(0,S.jsx)($e,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},icon:n.icon,subtitle:"",title:n.filename},n.id)}case"unsupported":{let{content:n}=r;return(0,S.jsx)(he,{compact:e,label:n.label,value:n.displayValue},n.id)}case"readOnlyLabelAndText":{let{content:n}=r;return(0,S.jsx)(ve,{compact:e,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:_(n.label),value:n.value,inlineIcon:n.icon},n.id)}case"ssoLogin":{let{content:n}=r;return(0,S.jsx)(Wr,{buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},icon:n.icon,label:_(n.label),options:n.menuEntries,subtitle:n.subtitle,title:n.title,onSsoOptionSelected:o},n.id)}case"addMore":case"callToAction":case"standaloneFile":return null;case"location":return null;case"addLocation":return null;case"shortcut":return null;case"formattedText":return null;default:Y(r)}})()})},Ti=e=>{if(!e)return;let r=new Date(parseInt(e,10)*1e3);return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0,1,0)},dr=(e,r)=>o=>{let i=a=>({id:a.id,onChange:s=>r({type:"text",content:{id:a.id,text:s}}),placeholder:a.placeholder,value:a.text});switch(o.type){case"label":return o.content;case"textField":return i(o.content);case"textFieldWithSuggestions":return{...i(o.content),suggestions:o.content.suggestions,onSuggestionSelected:s=>r({type:"text",content:{id:o.content.id,text:s}}),filterSuggestions:e,accessibilityLabel:o.content.accessibilityLabel};default:Y(o)}};var oe={singleSpacingBefore:"zh",doubleSpacingBefore:"Sh",primary:"pm",secondary:"Ih"};var ie=t(d()),Ve=({section:e})=>{let{updateItem:r}=(0,Me.useContext)(Ln),i=dr(async a=>p("edit-item-filter",a,{enableTracing:!1}).then(s=>s.ok?s.data:{filteredSuggestions:[]}),r);return(0,ie.jsx)("div",{className:(0,To.default)(oe[e.aboveSpacing+"Spacing"],{[oe.singleSpacingBefore]:e.aboveSpacing===Ue.Single,[oe.doubleSpacingBefore]:e.aboveSpacing===Ue.Double,[oe.primary]:e.kind===se.Primary,[oe.secondary]:e.kind===se.Secondary}),children:e.elements.map((a,s)=>{let m=(e?.header||s>0)&&s<e.elements.length,_=e.kind===se.Primary||e.kind===se.Secondary?e.kind:void 0;return(0,ie.jsxs)(Me.default.Fragment,{children:[e.header&&s===0&&(0,ie.jsx)(Ar,{buttonAction:e.header.buttonAction&&{type:"ButtonAction",...e.header.buttonAction,onButtonClick:r},value:i(e.header.label)}),(0,ie.jsx)(Lo,{element:a,onChange:r,topBorder:m?_:void 0})]},`${e.id}-${a.content.id}`)})})};var j=t(d()),jo=({calloutBanner:e,focusFieldId:r,showTutorialTooltip:o,underTabBar:i,vaultSelector:a,onVaultChange:s})=>{let{sections:m,saveItem:_}=(0,X.useContext)(Ln),k=(0,X.useRef)(null),n=(0,X.useContext)(c),{fillingAndSavingTelemetry:l}=(0,X.useContext)(C),u=(0,X.useCallback)(()=>{l&&p("record-click-event-first-account",{event:{componentType:"button",source:"save_dialog",componentName:"SAVE_DIALOG_SAVE"}}),_()},[l,_]),g=(0,qo.default)(u,100);(0,X.useEffect)(()=>{r&&document.getElementById(r)?.focus()},[r,m.length]);let x=()=>m.length===0?(0,j.jsx)(Wn,{}):(0,j.jsx)(Kn,{elevateOnScroll:"both",thin:!0,children:(0,j.jsx)("div",{className:(0,Do.default)(Fn.scrollableContent,{[Fn.reduceTopPadding]:i}),children:m.map(I=>(0,j.jsx)(Ve,{section:I},I.id))})});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:Fn.content,children:x()}),(0,j.jsxs)(bn,{description:e,children:[a?(0,j.jsx)(qi,{onChange:s,options:a.elements,selected:a.selectedOption}):null,(0,j.jsx)("div",{className:Fn.noFlex,children:(0,j.jsx)(E,{mode:"primary",ref:k,onClick:g,disabled:!a?.selectedOption,children:n("Save")})}),o?(0,j.jsx)(gr,{children:(0,j.jsx)(Kr,{initialPlacement:"right",primaryText:n("Step 3: Review or edit your new login item, then save it."),secondaryText:n("Once saved, we'll remember it for you."),targetRef:k})}):null]})]})},qi=({onChange:e,options:r,selected:o})=>{let i=(0,X.useContext)(c),[a,s]=(0,X.useState)("bottom-start");(0,X.useEffect)(()=>{let k=n=>{let l=n.target;l.visualViewport?.height&&l.visualViewport.height>800?s("top-start"):s("bottom-start")};return window.addEventListener("resize",k),window.visualViewport?.height&&window.visualViewport.height>800&&s("top-start"),()=>window.removeEventListener("resize",k)},[]);let m=(0,X.useMemo)(()=>r.length===0?[{type:"text",className:Fn.disabled,id:"no-vaults",typeAhead:i("All vaults are disabled."),value:i("All vaults are disabled."),disabled:!0,onSelect:()=>{}}]:r.map(k=>{switch(k.type){case"header":return{id:k.data.id,type:"groupLabel",value:k.data.label};case"option":{let{data:n}=k;return{className:Fn.vaultSelectorOption,disabled:n.state==="disabled",id:n.id,onSelect:()=>e(n.id),selected:n.state==="selected",type:"text",typeAhead:n.label,value:(0,j.jsx)(Cn,{disabled:n.state==="disabled",icon:{...n.icon,size:"medium"},label:n.label,secondaryLabel:n.subtitle})}}case"separator":return{id:k.data.id,type:"separator"};default:Y(k)}}),[i,r,e]);return(0,j.jsx)(Bn,{placement:a,items:m,children:r.length===0?(0,j.jsx)("span",{className:Fn.disabled,children:i("All vaults are disabled.")}):o?(0,j.jsx)(Zn,{items:o}):i("Select a vault")})};var Ao=t(b());var on=t(d()),Po=({errorMessage:e})=>{let r=(0,Ao.useContext)(c);return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)(sn,{children:[(0,on.jsx)(ln,{text:r("Error")}),(0,on.jsx)(Hn,{})]}),(0,on.jsx)(Wn,{}),(0,on.jsxs)(bn,{description:(0,on.jsx)(pe,{errorMessage:e}),children:[(0,on.jsx)(E,{mode:"primaryAlt",onClick:()=>void p("open-support-link",void 0),children:r("Get Help\u2026")}),(0,on.jsx)(E,{mode:"primary",onClick:async()=>p("close-modal",void 0),children:r("Close")})]})]})};var un=t(b());var Gn={header:"Ch",separator:"Eh",selectableRow:"Yi",textLabel:"jh",chevron:"Rh",items:"Fl"};var _n=t(d()),Ho=({items:e,onItemSelected:r})=>{let o=(0,un.useRef)(null),i=(0,un.useRef)(!1),a=(0,un.useRef)(null),s=(0,un.useMemo)(()=>e.reduce((g,x)=>(x.type==="option"&&g.push(x.data),g),[]),[e]),m=(0,un.useMemo)(()=>s.map(g=>g.id),[s]),[_,k]=ur(m),n=(0,un.useContext)(c);(0,un.useLayoutEffect)(()=>{a.current?.querySelector("li[aria-selected=true]")?.scrollIntoView({block:"nearest"})},[_]),xr({next:[{key:"ArrowDown"},{key:"n",modifiers:{ctrl:!0},os:"macos"}],previous:[{key:"ArrowUp"},{key:"p",modifiers:{ctrl:!0},os:"macos"}],selectWithEnter:{key:"Enter"},selectWithSpace:{key:" "}},{next:()=>k.next(),previous:()=>k.previous(),selectWithEnter:()=>{let g=s.find(x=>x.id===_);g&&r(g.id)},selectWithSpace:()=>{if(!l){let g=s.find(x=>x.id===_);g&&r(g.id)}}},o);let l=fr(g=>{for(let x of s)if(x.label.replace(/\s+/g,"").toLowerCase().startsWith(g.toLowerCase())){k.entry(x.id);break}},o),u=async g=>{let x=await p("get-custom-icon-url",{itemId:g});if(x.ok)return x.data;if(x.type==="nolistener"){let I="No listener registered for GetCustomIconUrl";throw new Error(I)}else throw x.error};return(0,_n.jsx)(Kn,{elevateOnScroll:"top",ref:a,thin:!0,children:(0,_n.jsx)("ul",{"aria-activedescendant":_,"aria-label":n("Existing items"),className:Gn.items,onBlur:()=>k.none(),onFocus:()=>{!_&&!i.current&&k.entry(m[0]),i.current&&(i.current=!1)},onMouseDown:g=>{g.currentTarget!==document.activeElement&&(i.current=!0)},ref:o,role:"listbox",tabIndex:0,children:e.map(g=>{switch(g.type){case"header":{let{data:x}=g;return(0,_n.jsx)("li",{className:Gn.header,children:(0,_n.jsx)(Zn,{items:[{icon:x.accountIcon,text:x.accountLabel},{icon:x.vaultIcon,text:x.vaultLabel}]})},x.id)}case"option":{let{data:x}=g;return(0,_n.jsxs)("li",{"aria-selected":_===x.id||void 0,className:Gn.selectableRow,"data-theme":_===x.id?"dark":void 0,id:x.id,onClick:()=>r(x.id),role:"option",children:[(0,_n.jsx)(Cn,{className:Gn.textLabel,icon:(0,_n.jsx)(N,{...x.icon,size:"medium",getCustomIcon:u}),label:x.label,secondaryLabel:x.subtitle}),(0,_n.jsx)(N,{className:Gn.chevron,sources:[{type:"ThemedIcon",content:{file:$.ChevronRight}}],size:"mini"})]},x.id)}case"separator":return(0,_n.jsx)("li",{children:(0,_n.jsx)("hr",{className:Gn.separator})},g.data.id)}})})})};var Wo={tabsContainer:"qh"};var Fo=t(b());var ae=t(d()),Mo=({titleId:e,inTutorial:r})=>{let o=(0,Fo.useContext)(c);return(0,ae.jsxs)(sn,{children:[(0,ae.jsx)(Yn,{}),(0,ae.jsx)(ln,{id:e,text:o("Save Item")}),(0,ae.jsx)(Hn,{inTutorial:r})]})};var Mn=t(d()),Vo=({autoFocus:e,activeTabId:r,children:o,onTabChange:i,tabs:a,titleId:s,inTutorial:m})=>(0,Mn.jsxs)(Mn.Fragment,{children:[(0,Mn.jsx)(Mo,{titleId:s,inTutorial:m}),a.length>0?(0,Mn.jsx)("div",{className:Wo.tabsContainer,children:(0,Mn.jsx)(Fr,{autoFocus:e,activeTabId:r,onTabClick:i,tabs:a})}):null,o]});var Un=t(b());var ke={content:"cm",scrollableContent:"Lh",itemLocation:"Hh",noFlex:"Wh"};var H=t(d()),No=({calloutBanner:e,focusFieldId:r,itemLocation:o,onBack:i,titleId:a})=>{let{sections:s,saveItem:m}=(0,Un.useContext)(Ln),_=(0,Un.useContext)(c),k=(0,Un.useCallback)(()=>{p("record-click-event-first-account",{event:{componentType:"button",source:"save_dialog",componentName:"SAVE_DIALOG_UPDATE"}}),m()},[m]);return(0,Un.useEffect)(()=>{!r||s.length===0||document.getElementById(r)?.focus()},[r,s.length]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(sn,{children:[(0,H.jsx)(fe,{autoFocus:!0,label:_("Back"),onClick:i,type:"back"}),(0,H.jsx)(ln,{centered:!0,id:a,text:_("Update Item")}),(0,H.jsx)(Hn,{})]}),(0,H.jsx)("div",{className:ke.content,children:s.length===0?(0,H.jsx)(Wn,{}):(0,H.jsx)(Kn,{elevateOnScroll:"both",thin:!0,children:(0,H.jsx)("div",{className:ke.scrollableContent,children:s.map(n=>(0,H.jsx)(Ve,{section:n},n.id))})})}),(0,H.jsxs)(bn,{description:e,children:[o?(0,H.jsx)("div",{className:ke.itemLocation,children:(0,H.jsx)(Zn,{items:o})}):null,(0,H.jsx)("div",{className:ke.noFlex,children:(0,H.jsx)(E,{mode:"primary",onClick:k,children:_("Update")})})]})]})};var ge=t(b());var Go=t(d()),Oo=({children:e,id:r,itemLocation:o,initialViewModel:i,onError:a})=>{let[s,m]=(0,ge.useState)({itemLocation:o}),[_,k]=(0,ge.useState)(i),n=i!==void 0;return(0,ge.useEffect)(()=>{!r||n||p("save-dialog-update-item-view",{id:r}).then(l=>{l.ok?(m({focusFieldId:l.data.viewModel.focus?.textFieldId??l.data.viewModel.focus?.elementId,itemLocation:l.data.itemLocation}),k(l.data.viewModel)):console.error("Failed to get SaveDialogUpdateItemView")})},[r,n]),(0,Go.jsx)(je,{initialElements:_?.elements,onError:a,initialCallout:_?.callout,children:e?.(s)})};var mn=t(d()),Uo=()=>{let[e,r]=(0,nn.useReducer)(Hi,{currentView:"waiting-for-initial-config"}),{bridge:o}=(0,nn.useContext)(C),i=e.initialNewItemView!==void 0,a=(0,nn.useContext)(c),s=(0,nn.useId)();(0,nn.useEffect)(()=>{!i&&(e.currentView==="new-item"||e.currentView==="updatable-item-list")&&p("save-dialog-new-item-view",void 0).then(n=>{n.ok?r({type:"new-item-view",data:n.data}):r({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})}).catch(()=>r({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")}))},[i,e.currentView,a]);let m=(0,nn.useCallback)(async()=>p("save-dialog-configuration",void 0).then(n=>{if(n.ok)switch(n.data.type){case"success":r({type:"configure",data:n.data.data});break;case"error":r({type:"error",error:n.data.data&&n.data.data.length>0?n.data.data:a("An unexpected error occurred. Please contact support@1password.com")})}else r({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})}).catch(()=>r({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})),[a]),_=(0,nn.useCallback)(()=>{p("close-modal",void 0)},[]);(0,nn.useEffect)(()=>{m().catch(_)},[m,_]),Jn("vaults-changed",m,[]),(0,nn.useEffect)(()=>{let n=o.on("refresh-items",m);return()=>{o.off("refresh-items",n)}},[m,a]);let k=()=>{if(e.currentView==="update-item")return(0,mn.jsx)(Oo,{id:e.updateItemId,initialViewModel:e.initialUpdateItemView?.viewModel,itemLocation:e.initialUpdateItemView?.itemLocation,onError:l=>r({type:"error",error:l}),children:({itemLocation:l,focusFieldId:u})=>(0,mn.jsx)(No,{calloutBanner:(0,mn.jsx)(pe,{errorMessage:e.errorMessage}),focusFieldId:u,itemLocation:l,onBack:()=>r({type:"current-view",data:e.updatableItems&&e.updatableItems.itemListElements.length>0?"updatable-item-list":"new-item"}),titleId:s})});let n=e.updatableItems?[{id:"new-item",label:a("New Item")},{id:"updatable-item-list",label:a("Update Existing")}]:[];return(0,mn.jsx)(je,{initialElements:e.initialNewItemView?.viewModel.elements,initialCallout:e.initialNewItemView?.viewModel.callout,onError:l=>r({type:"error",error:l}),children:(0,mn.jsx)(Vo,{autoFocus:e.currentView==="updatable-item-list",activeTabId:e.currentView,onTabChange:l=>{l!=="new-item"&&l!=="updatable-item-list"||r({type:"current-view",data:l})},tabs:n,titleId:s,inTutorial:e.initialNewItemView?.inTutorial,children:e.currentView==="updatable-item-list"?(0,mn.jsx)(Ho,{items:e.updatableItems?.itemListElements??[],onItemSelected:l=>{r({type:"current-view",data:"update-item"}),r({type:"update-item-id",data:l})}}):(0,mn.jsx)(jo,{calloutBanner:(0,mn.jsx)(pe,{errorMessage:e.errorMessage}),focusFieldId:(()=>{if(!(e.previousView==="waiting-for-initial-config"))return;let u=e.initialNewItemView?.viewModel.focus;return u?.textFieldId??u?.elementId})(),showTutorialTooltip:e.initialNewItemView?.inTutorial,underTabBar:n.length>0,vaultSelector:e.initialNewItemView?.vaultSelector,onVaultChange:l=>{p("save-dialog-vault-selector",l).then(u=>{u.ok?r({type:"update-vault-selector",data:u.data}):r({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})}).catch(()=>r({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")}))}})})})};return(0,mn.jsx)(Xn,{role:"dialog",ariaLabel:a("Save or update information dialog in 1Password"),height:500,onClose:_,open:!0,children:e.currentView==="waiting-for-initial-config"?e.errorMessage?(0,mn.jsx)(Po,{errorMessage:e.errorMessage}):(0,mn.jsx)(Co,{titleId:s}):Dn.syncObserve("render","saveDialog",()=>k())})},Hi=(e,r)=>{switch(r.type){case"configure":{let{updatableItems:o,initialView:i,showUpdatableItemList:a}=r.data,s=e.currentView==="updatable-item-list"&&o&&o.itemListElements.length>0;return{...e,currentView:a||s?"updatable-item-list":i.type,initialNewItemView:i.type==="new-item"?i.data:e.initialNewItemView,initialUpdateItemView:i.type==="update-item"?i.data:e.initialUpdateItemView,previousView:e.currentView,updatableItems:o}}case"current-view":{let o=e.currentView!=="update-item"&&r.data==="update-item",i=e.currentView==="update-item"&&r.data!=="update-item";return{...e,currentView:r.data,initialNewItemView:o?void 0:e.initialNewItemView,initialUpdateItemView:i?void 0:e.initialUpdateItemView,previousView:e.currentView}}case"new-item-view":return{...e,initialNewItemView:r.data};case"update-item-id":return{...e,updateItemId:r.data};case"update-vault-selector":{let{vaultSelector:o,viewModel:i}=r.data;return{...e,initialNewItemView:e.initialNewItemView?{...e.initialNewItemView,vaultSelector:o,viewModel:i||e.initialNewItemView.viewModel}:void 0}}case"error":return{...e,errorMessage:r.error};default:Y(r)}};var Ko=t(Sn()),tn=t(b());var Ne={marginReset:"Th",paddingReset:"Ah"};var an=t(d());function Fi({suggestedVaultUuid:e,vaults:r,title:o}){let{bridge:i}=(0,tn.useContext)(C),a=(0,tn.useContext)(c),{state:s}=(0,tn.useContext)(fn),m=(0,tn.useContext)(jn),[_,k]=(0,tn.useState)(o),[n,l]=(0,tn.useState)(e),[u,g]=(0,tn.useState)(),[x,I]=(0,tn.useState)(!1),{withChangedSettings:A,handleSettingChange:Z,state:W}=Gr("SaveDialog_Ssh"),v=async()=>{if(!W.context||!n)return;g(!1),I(!0),await p("generate-and-fill-ssh-key",{title:_,context:W.context,accountVaultUuid:n})?(p("close-modal",void 0),i.onSshKeyCreated()):(g(!0),I(!1))},y=m==="small"&&s.primaryInput==="touch";if(W.elements)return(0,an.jsx)(In,{ariaLabel:a("Create & Fill SSH Key"),buttonOrientation:y?"vertical":"horizontal",headerAccessories:(0,an.jsx)(xn,{title:a("Create & Fill SSH Key"),onClose:async()=>p("close-modal",void 0),disabledClose:x}),children:(0,an.jsxs)(wr,{"data-testid":"ssh-body",padding:"medium",gap:"medium",children:[(0,an.jsx)(qn,{id:"editableTitle",type:"icon",className:(0,Ko.default)(Ne.marginRest,Ne.paddingReset),onChange:k,icon:{id:"itemIcon",sources:[{type:"DefaultIcon",content:{file:Tn.Ssh}}]},placeholder:a("Title"),value:_,autoFocus:!0}),(0,an.jsx)(Dr,{elements:A(W.elements),onChange:Z,onButtonClick:()=>{console.warn("This is impossible")}}),u&&(0,an.jsx)(yr.Critical,{title:a("An unexpected error occurred. Please contact support@1password.com")}),(0,an.jsxs)(vr,{direction:y?"column":"row",alignItems:y?"flex-end":void 0,wrap:"nowrap",gap:"small",children:[(0,an.jsx)(we,{selectedVaultId:n,vaultListElements:r,onSelect:U=>l(U.content.id),buttonClassName:Ne.marginReset}),(0,an.jsx)(br,{flexShrink:"0",children:(0,an.jsx)(hr.Primary,{onClick:v,loading:x,disabled:!W.context||!n,children:a("Create & Fill")})})]})]})})}var Yo=()=>{let[e,r]=(0,tn.useState)();return(0,tn.useEffect)(()=>{p("get-ssh-create-dialog-configuration",void 0).then(o=>{o.ok?r(o.data):console.error("Failed to get SshKeyCreateDialogConfiguration")})},[]),e?(0,an.jsx)(Fi,{suggestedVaultUuid:e.vaults.suggestedVaultId,vaults:e.vaults.vaultListElements,title:e.title}):null};var Oe=class{constructor(r){this.transport=r}on(r,o){return this.transport.on(r,o)}off(r,o){return this.transport.off(r,o)}async getAppConfiguration(){return this.transport.request({name:"get-app-configuration",data:void 0})}async getPrivacyEnableDialogConfiguration(){return this.transport.request({name:"get-privacy-enable-dialog-configuration",data:void 0})}async getPrivacyDialogConfiguration(){return this.transport.request({name:"get-privacy-create-dialog-configuration",data:void 0})}async onSshKeyCreated(){return this.transport.request({name:"on-ssh-key-created"})}async enablePrivacyIntegration(r){return this.transport.request({name:"enable-privacy-integration",data:r})}async fillNewPrivacyCard(r){return this.transport.request({name:"fill-new-privacy-card",data:r})}async canRequestUnlock(){return this.transport.request({name:"can-request-unlock",data:void 0})}async getEmailAliasDialogConfiguration(){return this.transport.request({name:"get-email-alias-dialog-configuration"})}async startEmailAliasSession(r){return this.transport.request({name:"start-email-alias-session",data:r})}async generateEmailAlias(){return this.transport.request({name:"generate-email-alias",data:void 0})}async cancelEmailAliasSession(){return this.transport.request({name:"cancel-email-alias-session",data:void 0})}async fillEmailAlias(r){return this.transport.request({name:"fill-new-email-alias",data:r})}async getBrexDialogConfiguration(){return this.transport.request({name:"get-brex-dialog-configuration",data:void 0})}async fillNewBrexCard(r){return this.transport.request({name:"fill-new-brex-card",data:r})}};import Mi from"/assets/js/messages.i18n-ZO4Z24RJ.js";var Xo=()=>{pr(3),le("app-theme-changed",de("app-theme-changed")),le("update-connectivity-status",de("update-connectivity-status")),le("vaults-changed",de("vaults-changed")),le("lock-state-changed",de("lock-state-changed"))};var G=t(d());document.addEventListener("DOMContentLoaded",()=>{let e=new Oe(Ur());Xo(),(0,Zo.createRoot)(document.getElementById("root")).render((0,G.jsx)(Ni,{bridge:e}))});var Vi=new Dn("b5x-save-dialog",e=>{p("send-trace",e,{enableTracing:!1})});function Ni({bridge:e,telemetryEnabledOverrideForTesting:r}){let[o,i]=(0,Vn.useState)(),[a,s]=(0,Vn.useState)(window.location.hash),[m,_]=(0,Vn.useState)(r??!1);(0,Vn.useEffect)(()=>{e.getAppConfiguration().then(n=>{_(n.unleashFeatures["b5x-filling-saving-telemetry"]),i(n)}),p("has-pre-registration-flag","b5x-pre-auth-tracing").then(n=>{n.ok&&n.data===!0&&Vi.startObserver()})},[e]),Jn("lock-state-changed",n=>{i(l=>{if(l)return{...l,locked:n.locked}})},[]),Jn("app-theme-changed",n=>{i(l=>{if(l)return{...l,appTheme:n.appTheme}})},[]),Jn("update-connectivity-status",n=>{i(l=>{if(l)return{...l,connectivityStatus:n}})},[]),(0,Vn.useEffect)(()=>{let n=()=>s(window.location.hash);return window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[]),(0,Vn.useEffect)(()=>{m&&p("record-view-event-all-accounts",{event:{componentType:"dialog",source:"save_dialog",componentName:`DIALOG_VIEW_save_dialog_${a}`}})},[m,a]);let k=()=>{if(!o)return null;if(o.locked)return(0,G.jsx)(ar,{});if(o.connectivityStatus!=="online")return(0,G.jsx)(so,{});switch(a){case"#brex-create-credit-card":return(0,G.jsx)(io,{});case"#privacy-create-credit-card":return(0,G.jsx)(uo,{});case"#privacy-enable-integration":return(0,G.jsx)(fo,{});case"#create-an-email-alias":return(0,G.jsx)(lo,{});case"#save-dialog":return(0,G.jsx)(Uo,{});case"#loading":return null;case"#create-ssh-key":return(0,G.jsx)(Yo,{});default:return(0,G.jsx)(ar,{})}};return(0,G.jsx)(kr,{themeOverride:o?.appTheme,children:(0,G.jsx)(Vr,{children:(0,G.jsx)(Or,{children:(0,G.jsx)(Mr,{children:(0,G.jsx)(Xr,{bridge:e,fillingAndSavingTelemetry:m,children:(0,G.jsx)(Nr,{locale:o?.locale||"en",messages:Mi,children:Dn.syncObserve("componentToRender","modal",()=>k())})})})})})})}export{Ni as App};

//# debugId=156cbe3b-9859-5f43-b52d-e72aa03bd098
