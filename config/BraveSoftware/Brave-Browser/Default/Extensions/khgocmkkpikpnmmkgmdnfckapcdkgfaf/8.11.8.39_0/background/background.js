
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="da58d091-1ab6-527a-a5c2-526914129329")}catch(e){}}();
var hQA=Object.create;var _8=Object.defineProperty;var uiA=Object.getOwnPropertyDescriptor;var qQA=Object.getOwnPropertyNames;var vQA=Object.getPrototypeOf,xQA=Object.prototype.hasOwnProperty;var Lb=(A=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(A,{get:(j,e)=>(typeof require<"u"?require:j)[e]}):A)(function(A){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+A+'" is not supported')});var OA=(A,j)=>()=>(j||A((j={exports:{}}).exports,j),j.exports),Yt=(A,j)=>{for(var e in j)_8(A,e,{get:j[e],enumerable:!0})},fQA=(A,j,e,t)=>{if(j&&typeof j=="object"||typeof j=="function")for(let r of qQA(j))!xQA.call(A,r)&&r!==e&&_8(A,r,{get:()=>j[r],enumerable:!(t=uiA(j,r))||t.enumerable});return A};var W=(A,j,e)=>(e=A!=null?hQA(vQA(A)):{},fQA(j||!A||!A.__esModule?_8(e,"default",{value:A,enumerable:!0}):e,A));var n6=(A,j,e,t)=>{for(var r=t>1?void 0:t?uiA(j,e):j,a=A.length-1,n;a>=0;a--)(n=A[a])&&(r=(t?n(j,e,r):n(r))||r);return t&&r&&_8(j,e,r),r},Zv=(A,j)=>(e,t)=>j(e,t,A);var $_=OA((y_,miA)=>{(function(A,j){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],j);else if(typeof y_<"u")j(miA);else{var e={exports:{}};j(e),A.browser=e.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:y_,function(A){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let j="The message port closed before a response was received.",e=t=>{let r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(r).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(C,b=void 0){super(b),this.createItem=C}get(C){return this.has(C)||this.set(C,this.createItem(C)),super.get(C)}}let n=D=>D&&typeof D=="object"&&typeof D.then=="function",o=(D,C)=>(...b)=>{t.runtime.lastError?D.reject(new Error(t.runtime.lastError.message)):C.singleCallbackArg||b.length<=1&&C.singleCallbackArg!==!1?D.resolve(b[0]):D.resolve(b)},i=D=>D==1?"argument":"arguments",s=(D,C)=>function(h,...O){if(O.length<C.minArgs)throw new Error(`Expected at least ${C.minArgs} ${i(C.minArgs)} for ${D}(), got ${O.length}`);if(O.length>C.maxArgs)throw new Error(`Expected at most ${C.maxArgs} ${i(C.maxArgs)} for ${D}(), got ${O.length}`);return new Promise((V,Y)=>{if(C.fallbackToNoCallback)try{h[D](...O,o({resolve:V,reject:Y},C))}catch(rA){console.warn(`${D} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,rA),h[D](...O),C.fallbackToNoCallback=!1,C.noCallback=!0,V()}else C.noCallback?(h[D](...O),V()):h[D](...O,o({resolve:V,reject:Y},C))})},l=(D,C,b)=>new Proxy(C,{apply(h,O,V){return b.call(O,D,...V)}}),d=Function.call.bind(Object.prototype.hasOwnProperty),k=(D,C={},b={})=>{let h=Object.create(null),O={has(Y,rA){return rA in D||rA in h},get(Y,rA,yA){if(rA in h)return h[rA];if(!(rA in D))return;let VA=D[rA];if(typeof VA=="function")if(typeof C[rA]=="function")VA=l(D,D[rA],C[rA]);else if(d(b,rA)){let dj=s(rA,b[rA]);VA=l(D,D[rA],dj)}else VA=VA.bind(D);else if(typeof VA=="object"&&VA!==null&&(d(C,rA)||d(b,rA)))VA=k(VA,C[rA],b[rA]);else if(d(b,"*"))VA=k(VA,C[rA],b["*"]);else return Object.defineProperty(h,rA,{configurable:!0,enumerable:!0,get(){return D[rA]},set(dj){D[rA]=dj}}),VA;return h[rA]=VA,VA},set(Y,rA,yA,VA){return rA in h?h[rA]=yA:D[rA]=yA,!0},defineProperty(Y,rA,yA){return Reflect.defineProperty(h,rA,yA)},deleteProperty(Y,rA){return Reflect.deleteProperty(h,rA)}},V=Object.create(D);return new Proxy(V,O)},u=D=>({addListener(C,b,...h){C.addListener(D.get(b),...h)},hasListener(C,b){return C.hasListener(D.get(b))},removeListener(C,b){C.removeListener(D.get(b))}}),m=new a(D=>typeof D!="function"?D:function(b){let h=k(b,{},{getContent:{minArgs:0,maxArgs:0}});D(h)}),I=new a(D=>typeof D!="function"?D:function(b,h,O){let V=!1,Y,rA=new Promise(bA=>{Y=function(Mj){V=!0,bA(Mj)}}),yA;try{yA=D(b,h,Y)}catch(bA){yA=Promise.reject(bA)}let VA=yA!==!0&&n(yA);if(yA!==!0&&!VA&&!V)return!1;let dj=bA=>{bA.then(Mj=>{O(Mj)},Mj=>{let mj;Mj&&(Mj instanceof Error||typeof Mj.message=="string")?mj=Mj.message:mj="An unexpected error occurred",O({__mozWebExtensionPolyfillReject__:!0,message:mj})}).catch(Mj=>{console.error("Failed to send onMessage rejected reply",Mj)})};return dj(VA?yA:rA),!0}),S=({reject:D,resolve:C},b)=>{t.runtime.lastError?t.runtime.lastError.message===j?C():D(new Error(t.runtime.lastError.message)):b&&b.__mozWebExtensionPolyfillReject__?D(new Error(b.message)):C(b)},f=(D,C,b,...h)=>{if(h.length<C.minArgs)throw new Error(`Expected at least ${C.minArgs} ${i(C.minArgs)} for ${D}(), got ${h.length}`);if(h.length>C.maxArgs)throw new Error(`Expected at most ${C.maxArgs} ${i(C.maxArgs)} for ${D}(), got ${h.length}`);return new Promise((O,V)=>{let Y=S.bind(null,{resolve:O,reject:V});h.push(Y),b.sendMessage(...h)})},v={devtools:{network:{onRequestFinished:u(m)}},runtime:{onMessage:u(I),onMessageExternal:u(I),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},P={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":P},services:{"*":P},websites:{"*":P}},k(t,v,r)};A.exports=e(chrome)}else A.exports=globalThis.browser})});var Yk=OA(_e=>{"use strict";var bQA=_e&&_e.__spreadArray||function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};Object.defineProperty(_e,"__esModule",{value:!0});_e.dual=_e.getEndomorphismMonoid=_e.not=_e.SK=_e.hole=_e.pipe=_e.untupled=_e.tupled=_e.absurd=_e.decrement=_e.increment=_e.tuple=_e.flow=_e.flip=_e.constVoid=_e.constUndefined=_e.constNull=_e.constFalse=_e.constTrue=_e.constant=_e.unsafeCoerce=_e.identity=_e.apply=_e.getRing=_e.getSemiring=_e.getMonoid=_e.getSemigroup=_e.getBooleanAlgebra=void 0;var yQA=function(A){return function(){return{meet:function(j,e){return function(t){return A.meet(j(t),e(t))}},join:function(j,e){return function(t){return A.join(j(t),e(t))}},zero:function(){return A.zero},one:function(){return A.one},implies:function(j,e){return function(t){return A.implies(j(t),e(t))}},not:function(j){return function(e){return A.not(j(e))}}}}};_e.getBooleanAlgebra=yQA;var $QA=function(A){return function(){return{concat:function(j,e){return function(t){return A.concat(j(t),e(t))}}}}};_e.getSemigroup=$QA;var wQA=function(A){var j=(0,_e.getSemigroup)(A);return function(){return{concat:j().concat,empty:function(){return A.empty}}}};_e.getMonoid=wQA;var IQA=function(A){return{add:function(j,e){return function(t){return A.add(j(t),e(t))}},zero:function(){return A.zero},mul:function(j,e){return function(t){return A.mul(j(t),e(t))}},one:function(){return A.one}}};_e.getSemiring=IQA;var DQA=function(A){var j=(0,_e.getSemiring)(A);return{add:j.add,mul:j.mul,one:j.one,zero:j.zero,sub:function(e,t){return function(r){return A.sub(e(r),t(r))}}}};_e.getRing=DQA;var OQA=function(A){return function(j){return j(A)}};_e.apply=OQA;function I_(A){return A}_e.identity=I_;_e.unsafeCoerce=I_;function Nb(A){return function(){return A}}_e.constant=Nb;_e.constTrue=Nb(!0);_e.constFalse=Nb(!1);_e.constNull=Nb(null);_e.constUndefined=Nb(void 0);_e.constVoid=_e.constUndefined;function PQA(A){return function(){for(var j=[],e=0;e<arguments.length;e++)j[e]=arguments[e];return j.length>1?A(j[1],j[0]):function(t){return A(t)(j[0])}}}_e.flip=PQA;function EiA(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return function(){return j(A.apply(this,arguments))};case 3:return function(){return e(j(A.apply(this,arguments)))};case 4:return function(){return t(e(j(A.apply(this,arguments))))};case 5:return function(){return r(t(e(j(A.apply(this,arguments)))))};case 6:return function(){return a(r(t(e(j(A.apply(this,arguments))))))};case 7:return function(){return n(a(r(t(e(j(A.apply(this,arguments)))))))};case 8:return function(){return o(n(a(r(t(e(j(A.apply(this,arguments))))))))};case 9:return function(){return i(o(n(a(r(t(e(j(A.apply(this,arguments)))))))))}}}_e.flow=EiA;function CQA(){for(var A=[],j=0;j<arguments.length;j++)A[j]=arguments[j];return A}_e.tuple=CQA;function HQA(A){return A+1}_e.increment=HQA;function TQA(A){return A-1}_e.decrement=TQA;function BiA(A){throw new Error("Called `absurd` function which should be uncallable")}_e.absurd=BiA;function KQA(A){return function(j){return A.apply(void 0,j)}}_e.tupled=KQA;function SQA(A){return function(){for(var j=[],e=0;e<arguments.length;e++)j[e]=arguments[e];return A(j)}}_e.untupled=SQA;function MQA(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return j(A);case 3:return e(j(A));case 4:return t(e(j(A)));case 5:return r(t(e(j(A))));case 6:return a(r(t(e(j(A)))));case 7:return n(a(r(t(e(j(A))))));case 8:return o(n(a(r(t(e(j(A)))))));case 9:return i(o(n(a(r(t(e(j(A))))))));default:{for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}}_e.pipe=MQA;_e.hole=BiA;var _QA=function(A,j){return j};_e.SK=_QA;function LQA(A){return function(j){return!A(j)}}_e.not=LQA;var NQA=function(){return{concat:function(A,j){return EiA(A,j)},empty:I_}};_e.getEndomorphismMonoid=NQA;var zQA=function(A,j){var e=typeof A=="number"?function(t){return t.length>=A}:A;return function(){var t=Array.from(arguments);return e(arguments)?j.apply(this,t):function(r){return j.apply(void 0,bQA([r],t,!1))}}};_e.dual=zQA});var zb=OA(Qe=>{"use strict";var RQA=Qe&&Qe.__spreadArray||function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.flatMapReader=Qe.flatMapTask=Qe.flatMapIO=Qe.flatMapEither=Qe.flatMapOption=Qe.flatMapNullable=Qe.liftOption=Qe.liftNullable=Qe.fromReadonlyNonEmptyArray=Qe.has=Qe.emptyRecord=Qe.emptyReadonlyArray=Qe.tail=Qe.head=Qe.isNonEmpty=Qe.singleton=Qe.right=Qe.left=Qe.isRight=Qe.isLeft=Qe.some=Qe.none=Qe.isSome=Qe.isNone=void 0;var Ax=Yk(),JQA=function(A){return A._tag==="None"};Qe.isNone=JQA;var UQA=function(A){return A._tag==="Some"};Qe.isSome=UQA;Qe.none={_tag:"None"};var XQA=function(A){return{_tag:"Some",value:A}};Qe.some=XQA;var VQA=function(A){return A._tag==="Left"};Qe.isLeft=VQA;var WQA=function(A){return A._tag==="Right"};Qe.isRight=WQA;var YQA=function(A){return{_tag:"Left",left:A}};Qe.left=YQA;var QQA=function(A){return{_tag:"Right",right:A}};Qe.right=QQA;var ZQA=function(A){return[A]};Qe.singleton=ZQA;var AZA=function(A){return A.length>0};Qe.isNonEmpty=AZA;var jZA=function(A){return A[0]};Qe.head=jZA;var eZA=function(A){return A.slice(1)};Qe.tail=eZA;Qe.emptyReadonlyArray=[];Qe.emptyRecord={};Qe.has=Object.prototype.hasOwnProperty;var tZA=function(A){return RQA([A[0]],A.slice(1),!0)};Qe.fromReadonlyNonEmptyArray=tZA;var rZA=function(A){return function(j,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=j.apply(void 0,t);return A.fromEither(a==null?(0,Qe.left)(e.apply(void 0,t)):(0,Qe.right)(a))}}};Qe.liftNullable=rZA;var aZA=function(A){return function(j,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=j.apply(void 0,t);return A.fromEither((0,Qe.isNone)(a)?(0,Qe.left)(e.apply(void 0,t)):(0,Qe.right)(a.value))}}};Qe.liftOption=aZA;var nZA=function(A,j){return(0,Ax.dual)(3,function(e,t,r){return j.flatMap(e,(0,Qe.liftNullable)(A)(t,r))})};Qe.flatMapNullable=nZA;var oZA=function(A,j){return(0,Ax.dual)(3,function(e,t,r){return j.flatMap(e,(0,Qe.liftOption)(A)(t,r))})};Qe.flatMapOption=oZA;var iZA=function(A,j){return(0,Ax.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromEither(t(r))})})};Qe.flatMapEither=iZA;var sZA=function(A,j){return(0,Ax.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromIO(t(r))})})};Qe.flatMapIO=sZA;var lZA=function(A,j){return(0,Ax.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromTask(t(r))})})};Qe.flatMapTask=lZA;var cZA=function(A,j){return(0,Ax.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromReader(t(r))})})};Qe.flatMapReader=cZA});var P_=OA(dn=>{"use strict";var dZA=dn&&dn.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),kZA=dn&&dn.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),uZA=dn&&dn.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&dZA(j,A,e);return kZA(j,A),j};Object.defineProperty(dn,"__esModule",{value:!0});dn.sequenceS=dn.sequenceT=dn.getApplySemigroup=dn.apS=dn.apSecond=dn.apFirst=dn.ap=void 0;var pZA=Yk(),mZA=uZA(zb());function EZA(A,j){return function(e){return function(t){return A.ap(A.map(t,function(r){return function(a){return j.ap(r,a)}}),e)}}}dn.ap=EZA;function BZA(A){return function(j){return function(e){return A.ap(A.map(e,function(t){return function(){return t}}),j)}}}dn.apFirst=BZA;function gZA(A){return function(j){return function(e){return A.ap(A.map(e,function(){return function(t){return t}}),j)}}}dn.apSecond=gZA;function hZA(A){return function(j,e){return function(t){return A.ap(A.map(t,function(r){return function(a){var n;return Object.assign({},r,(n={},n[j]=a,n))}}),e)}}}dn.apS=hZA;function qZA(A){return function(j){return{concat:function(e,t){return A.ap(A.map(e,function(r){return function(a){return j.concat(r,a)}}),t)}}}}dn.getApplySemigroup=qZA;function O_(A,j,e){return function(t){for(var r=Array(e.length+1),a=0;a<e.length;a++)r[a]=e[a];return r[e.length]=t,j===0?A.apply(null,r):O_(A,j-1,r)}}var D_={1:function(A){return[A]},2:function(A){return function(j){return[A,j]}},3:function(A){return function(j){return function(e){return[A,j,e]}}},4:function(A){return function(j){return function(e){return function(t){return[A,j,e,t]}}}},5:function(A){return function(j){return function(e){return function(t){return function(r){return[A,j,e,t,r]}}}}}};function vZA(A){return mZA.has.call(D_,A)||(D_[A]=O_(pZA.tuple,A-1,[])),D_[A]}function xZA(A){return function(){for(var j=[],e=0;e<arguments.length;e++)j[e]=arguments[e];for(var t=j.length,r=vZA(t),a=A.map(j[0],r),n=1;n<t;n++)a=A.ap(a,j[n]);return a}}dn.sequenceT=xZA;function fZA(A){var j=A.length;switch(j){case 1:return function(e){var t;return t={},t[A[0]]=e,t};case 2:return function(e){return function(t){var r;return r={},r[A[0]]=e,r[A[1]]=t,r}};case 3:return function(e){return function(t){return function(r){var a;return a={},a[A[0]]=e,a[A[1]]=t,a[A[2]]=r,a}}};case 4:return function(e){return function(t){return function(r){return function(a){var n;return n={},n[A[0]]=e,n[A[1]]=t,n[A[2]]=r,n[A[3]]=a,n}}}};case 5:return function(e){return function(t){return function(r){return function(a){return function(n){var o;return o={},o[A[0]]=e,o[A[1]]=t,o[A[2]]=r,o[A[3]]=a,o[A[4]]=n,o}}}}};default:return O_(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={},a=0;a<j;a++)r[A[a]]=e[a];return r},j-1,[])}}function GZA(A){return function(j){for(var e=Object.keys(j),t=e.length,r=fZA(e),a=A.map(j[e[0]],r),n=1;n<t;n++)a=A.ap(a,j[e[n]]);return a}}dn.sequenceS=GZA});var L8=OA(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.asUnit=yi.as=yi.getFunctorComposition=yi.let=yi.bindTo=yi.flap=yi.map=void 0;var FZA=Yk();function giA(A,j){return function(e){return function(t){return A.map(t,function(r){return j.map(r,e)})}}}yi.map=giA;function bZA(A){return function(j){return function(e){return A.map(e,function(t){return t(j)})}}}yi.flap=bZA;function yZA(A){return function(j){return function(e){return A.map(e,function(t){var r;return r={},r[j]=t,r})}}}yi.bindTo=yZA;function $ZA(A){return function(j,e){return function(t){return A.map(t,function(r){var a;return Object.assign({},r,(a={},a[j]=e(r),a))})}}}yi.let=$ZA;function wZA(A,j){var e=giA(A,j);return{map:function(t,r){return(0,FZA.pipe)(t,e(r))}}}yi.getFunctorComposition=wZA;function hiA(A){return function(j,e){return A.map(j,function(){return e})}}yi.as=hiA;function IZA(A){var j=hiA(A);return function(e){return j(e,void 0)}}yi.asUnit=IZA});var viA=OA(jx=>{"use strict";Object.defineProperty(jx,"__esModule",{value:!0});jx.getApplicativeComposition=jx.getApplicativeMonoid=void 0;var qiA=P_(),DZA=Yk(),OZA=L8();function PZA(A){var j=(0,qiA.getApplySemigroup)(A);return function(e){return{concat:j(e).concat,empty:A.of(e.empty)}}}jx.getApplicativeMonoid=PZA;function CZA(A,j){var e=(0,OZA.getFunctorComposition)(A,j).map,t=(0,qiA.ap)(A,j);return{map:e,of:function(r){return A.of(j.of(r))},ap:function(r,a){return(0,DZA.pipe)(r,t(a))}}}jx.getApplicativeComposition=CZA});var C_=OA(gE=>{"use strict";Object.defineProperty(gE,"__esModule",{value:!0});gE.bind=gE.tap=gE.chainFirst=void 0;function HZA(A){var j=xiA(A);return function(e){return function(t){return j(t,e)}}}gE.chainFirst=HZA;function xiA(A){return function(j,e){return A.chain(j,function(t){return A.map(e(t),function(){return t})})}}gE.tap=xiA;function TZA(A){return function(j,e){return function(t){return A.chain(t,function(r){return A.map(e(r),function(a){var n;return Object.assign({},r,(n={},n[j]=a,n))})})}}}gE.bind=TZA});var fiA=OA(N8=>{"use strict";Object.defineProperty(N8,"__esModule",{value:!0});N8.tailRec=void 0;var KZA=function(A,j){for(var e=j(A);e._tag==="Left";)e=j(e.left);return e.right};N8.tailRec=KZA});var $iA=OA(o6=>{"use strict";var SZA=o6&&o6.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),MZA=o6&&o6.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),_ZA=o6&&o6.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&SZA(j,A,e);return MZA(j,A),j};Object.defineProperty(o6,"__esModule",{value:!0});o6.tapEither=o6.filterOrElse=o6.chainFirstEitherK=o6.chainEitherK=o6.fromEitherK=o6.chainOptionK=o6.fromOptionK=o6.fromPredicate=o6.fromOption=void 0;var LZA=C_(),GiA=Yk(),_g=_ZA(zb());function FiA(A){return function(j){return function(e){return A.fromEither(_g.isNone(e)?_g.left(j()):_g.right(e.value))}}}o6.fromOption=FiA;function NZA(A){return function(j,e){return function(t){return A.fromEither(j(t)?_g.right(t):_g.left(e(t)))}}}o6.fromPredicate=NZA;function biA(A){var j=FiA(A);return function(e){var t=j(e);return function(r){return(0,GiA.flow)(r,t)}}}o6.fromOptionK=biA;function zZA(A,j){var e=biA(A);return function(t){var r=e(t);return function(a){return function(n){return j.chain(n,r(a))}}}}o6.chainOptionK=zZA;function H_(A){return function(j){return(0,GiA.flow)(j,A.fromEither)}}o6.fromEitherK=H_;function RZA(A,j){var e=H_(A);return function(t){return function(r){return j.chain(r,e(t))}}}o6.chainEitherK=RZA;function JZA(A,j){var e=yiA(A,j);return function(t){return function(r){return e(r,t)}}}o6.chainFirstEitherK=JZA;function UZA(A,j){return function(e,t){return function(r){return j.chain(r,function(a){return A.fromEither(e(a)?_g.right(a):_g.left(t(a)))})}}}o6.filterOrElse=UZA;function yiA(A,j){var e=H_(A),t=(0,LZA.tap)(j);return function(r,a){return t(r,e(a))}}o6.tapEither=yiA});var wiA=OA($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.right=$r.left=$r.flap=$r.Functor=$r.Bifunctor=$r.URI=$r.bimap=$r.mapLeft=$r.map=$r.separated=void 0;var T_=Yk(),XZA=L8(),VZA=function(A,j){return{left:A,right:j}};$r.separated=VZA;var WZA=function(A,j){return(0,T_.pipe)(A,(0,$r.map)(j))},YZA=function(A,j){return(0,T_.pipe)(A,(0,$r.mapLeft)(j))},QZA=function(A,j,e){return(0,T_.pipe)(A,(0,$r.bimap)(j,e))},ZZA=function(A){return function(j){return(0,$r.separated)((0,$r.left)(j),A((0,$r.right)(j)))}};$r.map=ZZA;var AAj=function(A){return function(j){return(0,$r.separated)(A((0,$r.left)(j)),(0,$r.right)(j))}};$r.mapLeft=AAj;var jAj=function(A,j){return function(e){return(0,$r.separated)(A((0,$r.left)(e)),j((0,$r.right)(e)))}};$r.bimap=jAj;$r.URI="Separated";$r.Bifunctor={URI:$r.URI,mapLeft:YZA,bimap:QZA};$r.Functor={URI:$r.URI,map:WZA};$r.flap=(0,XZA.flap)($r.Functor);var eAj=function(A){return A.left};$r.left=eAj;var tAj=function(A){return A.right};$r.right=tAj});var DiA=OA(zs=>{"use strict";var rAj=zs&&zs.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),aAj=zs&&zs.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),nAj=zs&&zs.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&rAj(j,A,e);return aAj(j,A),j};Object.defineProperty(zs,"__esModule",{value:!0});zs.filterE=zs.witherDefault=zs.wiltDefault=void 0;var IiA=nAj(zb());function oAj(A,j){return function(e){var t=A.traverse(e);return function(r,a){return e.map(t(r,a),j.separate)}}}zs.wiltDefault=oAj;function iAj(A,j){return function(e){var t=A.traverse(e);return function(r,a){return e.map(t(r,a),j.compact)}}}zs.witherDefault=iAj;function sAj(A){return function(j){var e=A.wither(j);return function(t){return function(r){return e(r,function(a){return j.map(t(a),function(n){return n?IiA.some(a):IiA.none})})}}}}zs.filterE=sAj});var Dn=OA(y=>{"use strict";var lAj=y&&y.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),cAj=y&&y.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),PiA=y&&y.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&lAj(j,A,e);return cAj(j,A),j};Object.defineProperty(y,"__esModule",{value:!0});y.match=y.foldW=y.matchW=y.isRight=y.isLeft=y.fromOption=y.fromPredicate=y.FromEither=y.MonadThrow=y.throwError=y.ChainRec=y.Extend=y.extend=y.Alt=y.alt=y.altW=y.Bifunctor=y.mapLeft=y.bimap=y.Traversable=y.sequence=y.traverse=y.Foldable=y.reduceRight=y.foldMap=y.reduce=y.Monad=y.Chain=y.Applicative=y.Apply=y.ap=y.apW=y.Pointed=y.of=y.asUnit=y.as=y.Functor=y.map=y.getAltValidation=y.getApplicativeValidation=y.getWitherable=y.getFilterable=y.getCompactable=y.getSemigroup=y.getEq=y.getShow=y.URI=y.flatMap=y.right=y.left=void 0;y.chainFirstW=y.chainFirst=y.chain=y.chainW=y.sequenceArray=y.traverseArray=y.traverseArrayWithIndex=y.traverseReadonlyArrayWithIndex=y.traverseReadonlyNonEmptyArrayWithIndex=y.ApT=y.apSW=y.apS=y.bindW=y.bind=y.let=y.bindTo=y.Do=y.exists=y.elem=y.toError=y.toUnion=y.chainNullableK=y.fromNullableK=y.tryCatchK=y.tryCatch=y.fromNullable=y.orElse=y.orElseW=y.swap=y.filterOrElseW=y.filterOrElse=y.flatMapOption=y.flatMapNullable=y.liftOption=y.liftNullable=y.chainOptionKW=y.chainOptionK=y.fromOptionK=y.duplicate=y.flatten=y.flattenW=y.tap=y.apSecondW=y.apSecond=y.apFirstW=y.apFirst=y.flap=y.getOrElse=y.getOrElseW=y.fold=void 0;y.getValidation=y.getValidationMonoid=y.getValidationSemigroup=y.getApplyMonoid=y.getApplySemigroup=y.either=y.stringifyJSON=y.parseJSON=void 0;var CiA=viA(),Rb=P_(),HiA=PiA(C_()),dAj=fiA(),Jb=$iA(),Vn=Yk(),Ub=L8(),fc=PiA(zb()),Ep=wiA(),OiA=DiA();y.left=fc.left;y.right=fc.right;y.flatMap=(0,Vn.dual)(2,function(A,j){return(0,y.isLeft)(A)?A:j(A.right)});var $i=function(A,j){return(0,Vn.pipe)(A,(0,y.map)(j))},Lg=function(A,j){return(0,Vn.pipe)(A,(0,y.ap)(j))},Xb=function(A,j,e){return(0,Vn.pipe)(A,(0,y.reduce)(j,e))},Vb=function(A){return function(j,e){var t=(0,y.foldMap)(A);return(0,Vn.pipe)(j,t(e))}},Wb=function(A,j,e){return(0,Vn.pipe)(A,(0,y.reduceRight)(j,e))},z8=function(A){var j=(0,y.traverse)(A);return function(e,t){return(0,Vn.pipe)(e,j(t))}},K_=function(A,j,e){return(0,Vn.pipe)(A,(0,y.bimap)(j,e))},S_=function(A,j){return(0,Vn.pipe)(A,(0,y.mapLeft)(j))},TiA=function(A,j){return(0,Vn.pipe)(A,(0,y.alt)(j))},M_=function(A,j){return(0,Vn.pipe)(A,(0,y.extend)(j))},__=function(A,j){return(0,dAj.tailRec)(j(A),function(e){return(0,y.isLeft)(e)?(0,y.right)((0,y.left)(e.left)):(0,y.isLeft)(e.right)?(0,y.left)(j(e.right.left)):(0,y.right)((0,y.right)(e.right.right))})};y.URI="Either";var kAj=function(A,j){return{show:function(e){return(0,y.isLeft)(e)?"left(".concat(A.show(e.left),")"):"right(".concat(j.show(e.right),")")}}};y.getShow=kAj;var uAj=function(A,j){return{equals:function(e,t){return e===t||((0,y.isLeft)(e)?(0,y.isLeft)(t)&&A.equals(e.left,t.left):(0,y.isRight)(t)&&j.equals(e.right,t.right))}}};y.getEq=uAj;var pAj=function(A){return{concat:function(j,e){return(0,y.isLeft)(e)?j:(0,y.isLeft)(j)?e:(0,y.right)(A.concat(j.right,e.right))}}};y.getSemigroup=pAj;var mAj=function(A){var j=(0,y.left)(A.empty);return{URI:y.URI,_E:void 0,compact:function(e){return(0,y.isLeft)(e)?e:e.right._tag==="None"?j:(0,y.right)(e.right.value)},separate:function(e){return(0,y.isLeft)(e)?(0,Ep.separated)(e,e):(0,y.isLeft)(e.right)?(0,Ep.separated)((0,y.right)(e.right.left),j):(0,Ep.separated)(j,(0,y.right)(e.right.right))}}};y.getCompactable=mAj;var EAj=function(A){var j=(0,y.left)(A.empty),e=(0,y.getCompactable)(A),t=e.compact,r=e.separate,a=function(o,i){return(0,y.isLeft)(o)||i(o.right)?o:j},n=function(o,i){return(0,y.isLeft)(o)?(0,Ep.separated)(o,o):i(o.right)?(0,Ep.separated)(j,(0,y.right)(o.right)):(0,Ep.separated)((0,y.right)(o.right),j)};return{URI:y.URI,_E:void 0,map:$i,compact:t,separate:r,filter:a,filterMap:function(o,i){if((0,y.isLeft)(o))return o;var s=i(o.right);return s._tag==="None"?j:(0,y.right)(s.value)},partition:n,partitionMap:function(o,i){if((0,y.isLeft)(o))return(0,Ep.separated)(o,o);var s=i(o.right);return(0,y.isLeft)(s)?(0,Ep.separated)((0,y.right)(s.left),j):(0,Ep.separated)(j,(0,y.right)(s.right))}}};y.getFilterable=EAj;var BAj=function(A){var j=(0,y.getFilterable)(A),e=(0,y.getCompactable)(A);return{URI:y.URI,_E:void 0,map:$i,compact:j.compact,separate:j.separate,filter:j.filter,filterMap:j.filterMap,partition:j.partition,partitionMap:j.partitionMap,traverse:z8,sequence:y.sequence,reduce:Xb,foldMap:Vb,reduceRight:Wb,wither:(0,OiA.witherDefault)(y.Traversable,e),wilt:(0,OiA.wiltDefault)(y.Traversable,e)}};y.getWitherable=BAj;var gAj=function(A){return{URI:y.URI,_E:void 0,map:$i,ap:function(j,e){return(0,y.isLeft)(j)?(0,y.isLeft)(e)?(0,y.left)(A.concat(j.left,e.left)):j:(0,y.isLeft)(e)?e:(0,y.right)(j.right(e.right))},of:y.of}};y.getApplicativeValidation=gAj;var hAj=function(A){return{URI:y.URI,_E:void 0,map:$i,alt:function(j,e){if((0,y.isRight)(j))return j;var t=e();return(0,y.isLeft)(t)?(0,y.left)(A.concat(j.left,t.left)):t}}};y.getAltValidation=hAj;var qAj=function(A){return function(j){return(0,y.isLeft)(j)?j:(0,y.right)(A(j.right))}};y.map=qAj;y.Functor={URI:y.URI,map:$i};y.as=(0,Vn.dual)(2,(0,Ub.as)(y.Functor));y.asUnit=(0,Ub.asUnit)(y.Functor);y.of=y.right;y.Pointed={URI:y.URI,of:y.of};var vAj=function(A){return function(j){return(0,y.isLeft)(j)?j:(0,y.isLeft)(A)?A:(0,y.right)(j.right(A.right))}};y.apW=vAj;y.ap=y.apW;y.Apply={URI:y.URI,map:$i,ap:Lg};y.Applicative={URI:y.URI,map:$i,ap:Lg,of:y.of};y.Chain={URI:y.URI,map:$i,ap:Lg,chain:y.flatMap};y.Monad={URI:y.URI,map:$i,ap:Lg,of:y.of,chain:y.flatMap};var xAj=function(A,j){return function(e){return(0,y.isLeft)(e)?A:j(A,e.right)}};y.reduce=xAj;var fAj=function(A){return function(j){return function(e){return(0,y.isLeft)(e)?A.empty:j(e.right)}}};y.foldMap=fAj;var GAj=function(A,j){return function(e){return(0,y.isLeft)(e)?A:j(e.right,A)}};y.reduceRight=GAj;y.Foldable={URI:y.URI,reduce:Xb,foldMap:Vb,reduceRight:Wb};var FAj=function(A){return function(j){return function(e){return(0,y.isLeft)(e)?A.of((0,y.left)(e.left)):A.map(j(e.right),y.right)}}};y.traverse=FAj;var bAj=function(A){return function(j){return(0,y.isLeft)(j)?A.of((0,y.left)(j.left)):A.map(j.right,y.right)}};y.sequence=bAj;y.Traversable={URI:y.URI,map:$i,reduce:Xb,foldMap:Vb,reduceRight:Wb,traverse:z8,sequence:y.sequence};var yAj=function(A,j){return function(e){return(0,y.isLeft)(e)?(0,y.left)(A(e.left)):(0,y.right)(j(e.right))}};y.bimap=yAj;var $Aj=function(A){return function(j){return(0,y.isLeft)(j)?(0,y.left)(A(j.left)):j}};y.mapLeft=$Aj;y.Bifunctor={URI:y.URI,bimap:K_,mapLeft:S_};var wAj=function(A){return function(j){return(0,y.isLeft)(j)?A():j}};y.altW=wAj;y.alt=y.altW;y.Alt={URI:y.URI,map:$i,alt:TiA};var IAj=function(A){return function(j){return(0,y.isLeft)(j)?j:(0,y.right)(A(j))}};y.extend=IAj;y.Extend={URI:y.URI,map:$i,extend:M_};y.ChainRec={URI:y.URI,map:$i,ap:Lg,chain:y.flatMap,chainRec:__};y.throwError=y.left;y.MonadThrow={URI:y.URI,map:$i,ap:Lg,of:y.of,chain:y.flatMap,throwError:y.throwError};y.FromEither={URI:y.URI,fromEither:Vn.identity};y.fromPredicate=(0,Jb.fromPredicate)(y.FromEither);y.fromOption=(0,Jb.fromOption)(y.FromEither);y.isLeft=fc.isLeft;y.isRight=fc.isRight;var DAj=function(A,j){return function(e){return(0,y.isLeft)(e)?A(e.left):j(e.right)}};y.matchW=DAj;y.foldW=y.matchW;y.match=y.matchW;y.fold=y.match;var OAj=function(A){return function(j){return(0,y.isLeft)(j)?A(j.left):j.right}};y.getOrElseW=OAj;y.getOrElse=y.getOrElseW;y.flap=(0,Ub.flap)(y.Functor);y.apFirst=(0,Rb.apFirst)(y.Apply);y.apFirstW=y.apFirst;y.apSecond=(0,Rb.apSecond)(y.Apply);y.apSecondW=y.apSecond;y.tap=(0,Vn.dual)(2,HiA.tap(y.Chain));y.flattenW=(0,y.flatMap)(Vn.identity);y.flatten=y.flattenW;y.duplicate=(0,y.extend)(Vn.identity);y.fromOptionK=(0,Jb.fromOptionK)(y.FromEither);y.chainOptionK=(0,Jb.chainOptionK)(y.FromEither,y.Chain);y.chainOptionKW=y.chainOptionK;var R8={fromEither:y.FromEither.fromEither};y.liftNullable=fc.liftNullable(R8);y.liftOption=fc.liftOption(R8);var KiA={flatMap:y.flatMap};y.flatMapNullable=fc.flatMapNullable(R8,KiA);y.flatMapOption=fc.flatMapOption(R8,KiA);y.filterOrElse=(0,Jb.filterOrElse)(y.FromEither,y.Chain);y.filterOrElseW=y.filterOrElse;var PAj=function(A){return(0,y.isLeft)(A)?(0,y.right)(A.left):(0,y.left)(A.right)};y.swap=PAj;var CAj=function(A){return function(j){return(0,y.isLeft)(j)?A(j.left):j}};y.orElseW=CAj;y.orElse=y.orElseW;var HAj=function(A){return function(j){return j==null?(0,y.left)(A):(0,y.right)(j)}};y.fromNullable=HAj;var TAj=function(A,j){try{return(0,y.right)(A())}catch(e){return(0,y.left)(j(e))}};y.tryCatch=TAj;var KAj=function(A,j){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,y.tryCatch)(function(){return A.apply(void 0,e)},j)}};y.tryCatchK=KAj;var SAj=function(A){var j=(0,y.fromNullable)(A);return function(e){return(0,Vn.flow)(e,j)}};y.fromNullableK=SAj;var MAj=function(A){var j=(0,y.fromNullableK)(A);return function(e){return(0,y.flatMap)(j(e))}};y.chainNullableK=MAj;y.toUnion=(0,y.foldW)(Vn.identity,Vn.identity);function _Aj(A){try{return A instanceof Error?A:new Error(String(A))}catch{return new Error}}y.toError=_Aj;function SiA(A){return function(j,e){if(e===void 0){var t=SiA(A);return function(r){return t(j,r)}}return(0,y.isLeft)(e)?!1:A.equals(j,e.right)}}y.elem=SiA;var LAj=function(A){return function(j){return(0,y.isLeft)(j)?!1:A(j.right)}};y.exists=LAj;y.Do=(0,y.of)(fc.emptyRecord);y.bindTo=(0,Ub.bindTo)(y.Functor);var NAj=(0,Ub.let)(y.Functor);y.let=NAj;y.bind=HiA.bind(y.Chain);y.bindW=y.bind;y.apS=(0,Rb.apS)(y.Apply);y.apSW=y.apS;y.ApT=(0,y.of)(fc.emptyReadonlyArray);var zAj=function(A){return function(j){var e=A(0,fc.head(j));if((0,y.isLeft)(e))return e;for(var t=[e.right],r=1;r<j.length;r++){var a=A(r,j[r]);if((0,y.isLeft)(a))return a;t.push(a.right)}return(0,y.right)(t)}};y.traverseReadonlyNonEmptyArrayWithIndex=zAj;var RAj=function(A){var j=(0,y.traverseReadonlyNonEmptyArrayWithIndex)(A);return function(e){return fc.isNonEmpty(e)?j(e):y.ApT}};y.traverseReadonlyArrayWithIndex=RAj;y.traverseArrayWithIndex=y.traverseReadonlyArrayWithIndex;var JAj=function(A){return(0,y.traverseReadonlyArrayWithIndex)(function(j,e){return A(e)})};y.traverseArray=JAj;y.sequenceArray=(0,y.traverseArray)(Vn.identity);y.chainW=y.flatMap;y.chain=y.flatMap;y.chainFirst=y.tap;y.chainFirstW=y.tap;function UAj(A,j){return(0,y.tryCatch)(function(){return JSON.parse(A)},j)}y.parseJSON=UAj;var XAj=function(A,j){return(0,y.tryCatch)(function(){var e=JSON.stringify(A);if(typeof e!="string")throw new Error("Converting unsupported structure to JSON");return e},j)};y.stringifyJSON=XAj;y.either={URI:y.URI,map:$i,of:y.of,ap:Lg,chain:y.flatMap,reduce:Xb,foldMap:Vb,reduceRight:Wb,traverse:z8,sequence:y.sequence,bimap:K_,mapLeft:S_,alt:TiA,extend:M_,chainRec:__,throwError:y.throwError};y.getApplySemigroup=(0,Rb.getApplySemigroup)(y.Apply);y.getApplyMonoid=(0,CiA.getApplicativeMonoid)(y.Applicative);var VAj=function(A,j){return(0,Rb.getApplySemigroup)((0,y.getApplicativeValidation)(A))(j)};y.getValidationSemigroup=VAj;var WAj=function(A,j){return(0,CiA.getApplicativeMonoid)((0,y.getApplicativeValidation)(A))(j)};y.getValidationMonoid=WAj;function YAj(A){var j=(0,y.getApplicativeValidation)(A).ap,e=(0,y.getAltValidation)(A).alt;return{URI:y.URI,_E:void 0,map:$i,of:y.of,chain:y.flatMap,bimap:K_,mapLeft:S_,reduce:Xb,foldMap:Vb,reduceRight:Wb,extend:M_,traverse:z8,sequence:y.sequence,chainRec:__,throwError:y.throwError,ap:j,alt:e}}y.getValidation=YAj});var aA=OA(U=>{"use strict";var pa=U&&U.__extends||function(){var A=function(j,e){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},A(j,e)};return function(j,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A(j,e);function t(){this.constructor=j}j.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ex=U&&U.__assign||function(){return ex=Object.assign||function(A){for(var j,e=1,t=arguments.length;e<t;e++){j=arguments[e];for(var r in j)Object.prototype.hasOwnProperty.call(j,r)&&(A[r]=j[r])}return A},ex.apply(this,arguments)},QAj=U&&U.__spreadArray||function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};Object.defineProperty(U,"__esModule",{value:!0});U.partial=U.PartialType=U.type=U.InterfaceType=U.array=U.ArrayType=U.recursion=U.RecursiveType=U.Int=U.brand=U.RefinementType=U.keyof=U.KeyofType=U.literal=U.LiteralType=U.void=U.undefined=U.null=U.UnknownRecord=U.AnyDictionaryType=U.UnknownArray=U.AnyArrayType=U.boolean=U.BooleanType=U.bigint=U.BigIntType=U.number=U.NumberType=U.string=U.StringType=U.unknown=U.UnknownType=U.voidType=U.VoidType=U.UndefinedType=U.nullType=U.NullType=U.getIndex=U.getTags=U.emptyTags=U.mergeAll=U.getDomainKeys=U.appendContext=U.getContextEntry=U.getFunctionName=U.identity=U.Type=U.success=U.failure=U.failures=void 0;U.alias=U.clean=U.StrictType=U.dictionary=U.object=U.ObjectType=U.Dictionary=U.getDefaultContext=U.getValidationError=U.interface=U.Array=U.taggedUnion=U.TaggedUnionType=U.Integer=U.refinement=U.any=U.AnyType=U.never=U.NeverType=U.Function=U.FunctionType=U.exact=U.ExactType=U.strict=U.readonlyArray=U.ReadonlyArrayType=U.readonly=U.ReadonlyType=U.tuple=U.TupleType=U.intersection=U.IntersectionType=U.union=U.UnionType=U.record=U.DictionaryType=void 0;var kn=Dn();U.failures=kn.left;var ZAj=function(A,j,e){return(0,U.failures)([{value:A,context:j,message:e}])};U.failure=ZAj;U.success=kn.right;var ma=function(){function A(j,e,t,r){this.name=j,this.is=e,this.validate=t,this.encode=r,this.decode=this.decode.bind(this)}return A.prototype.pipe=function(j,e){var t=this;return e===void 0&&(e="pipe(".concat(this.name,", ").concat(j.name,")")),new A(e,j.is,function(r,a){var n=t.validate(r,a);return(0,kn.isLeft)(n)?n:j.validate(n.right,a)},this.encode===U.identity&&j.encode===U.identity?U.identity:function(r){return t.encode(j.encode(r))})},A.prototype.asDecoder=function(){return this},A.prototype.asEncoder=function(){return this},A.prototype.decode=function(j){return this.validate(j,[{key:"",type:this,actual:j}])},A}();U.Type=ma;var Ajj=function(A){return A};U.identity=Ajj;function LiA(A){return A.displayName||A.name||"<function".concat(A.length,">")}U.getFunctionName=LiA;function jjj(A,j){return{key:A,type:j}}U.getContextEntry=jjj;function Gd(A,j,e,t){for(var r=A.length,a=Array(r+1),n=0;n<r;n++)a[n]=A[n];return a[r]={key:j,type:e,actual:t},a}U.appendContext=Gd;function Bp(A,j){for(var e=j.length,t=0;t<e;t++)A.push(j[t])}var Ng=Object.prototype.hasOwnProperty;function N_(A){return Object.keys(A).map(function(j){return"".concat(j,": ").concat(A[j].name)}).join(", ")}function Yb(A){for(var j=0;j<A.length;j++)if(A[j].encode!==U.identity)return!1;return!0}function NiA(A){return"{ ".concat(N_(A)," }")}function ziA(A){return"Partial<".concat(A,">")}function ejj(A,j,e,t){t===void 0&&(t="{ [K in ".concat(j.name,"]: ").concat(e.name," }"));var r=A.length;return new V_(t,function(a){return U.UnknownRecord.is(a)&&A.every(function(n){return e.is(a[n])})},function(a,n){var o=U.UnknownRecord.validate(a,n);if((0,kn.isLeft)(o))return o;for(var i=o.right,s={},l=[],d=!1,k=0;k<r;k++){var u=A[k],m=i[u],I=e.validate(m,Gd(n,u,e,m));if((0,kn.isLeft)(I))Bp(l,I.left);else{var S=I.right;d=d||S!==m,s[u]=S}}return l.length>0?(0,U.failures)(l):(0,U.success)(d||Object.keys(i).length!==r?s:i)},e.encode===U.identity?U.identity:function(a){for(var n={},o=0;o<r;o++){var i=A[o];n[i]=e.encode(a[i])}return n},j,e)}function J_(A){var j;if(UiA(A)){var e=A.value;if(U.string.is(e))return j={},j[e]=null,j}else{if(ijj(A))return A.keys;if(ViA(A)){var t=A.types.map(function(r){return J_(r)});return t.some(J8.is)?void 0:Object.assign.apply(Object,QAj([{}],t,!1))}}}U.getDomainKeys=J_;function tjj(A,j,e){return e===void 0&&(e="{ [K in ".concat(A.name,"]: ").concat(j.name," }")),new V_(e,function(t){return U.UnknownRecord.is(t)?Object.keys(t).every(function(r){return A.is(r)&&j.is(t[r])}):_iA(j)&&Array.isArray(t)},function(t,r){if(U.UnknownRecord.is(t)){for(var a={},n=[],o=Object.keys(t),i=o.length,s=!1,l=0;l<i;l++){var d=o[l],k=t[d],u=A.validate(d,Gd(r,d,A,d));if((0,kn.isLeft)(u))Bp(n,u.left);else{var m=u.right;s=s||m!==d,d=m;var I=j.validate(k,Gd(r,d,j,k));if((0,kn.isLeft)(I))Bp(n,I.left);else{var S=I.right;s=s||S!==k,a[d]=S}}}return n.length>0?(0,U.failures)(n):(0,U.success)(s?a:t)}return _iA(j)&&Array.isArray(t)?(0,U.success)(t):(0,U.failure)(t,r)},A.encode===U.identity&&j.encode===U.identity?U.identity:function(t){for(var r={},a=Object.keys(t),n=a.length,o=0;o<n;o++){var i=a[o];r[String(A.encode(i))]=j.encode(t[i])}return r},A,j)}function RiA(A){return"("+A.map(function(j){return j.name}).join(" | ")+")"}function z_(A,j){for(var e=!0,t=!0,r=!U.UnknownRecord.is(A),a=0,n=j;a<n.length;a++){var o=n[a];o!==A&&(e=!1),U.UnknownRecord.is(o)&&(t=!1)}if(e)return A;if(t)return j[j.length-1];for(var i={},s=0,l=j;s<l.length;s++){var o=l[s];for(var d in o)(!Ng.call(i,d)||r||o[d]!==A[d])&&(i[d]=o[d])}return i}U.mergeAll=z_;function R_(A){switch(A._tag){case"RefinementType":case"ReadonlyType":return R_(A.type);case"InterfaceType":case"StrictType":case"PartialType":return A.props;case"IntersectionType":return A.types.reduce(function(j,e){return Object.assign(j,R_(e))},{})}}function MiA(A,j){for(var e=Object.getOwnPropertyNames(A),t=!1,r={},a=0;a<e.length;a++){var n=e[a];Ng.call(j,n)?r[n]=A[n]:t=!0}return t?r:A}function rjj(A){return XiA(A)?"{| ".concat(N_(A.props)," |}"):sjj(A)?ziA("{| ".concat(N_(A.props)," |}")):"Exact<".concat(A.name,">")}function ajj(A){return A.length>0}U.emptyTags={};function JiA(A,j){for(var e=[],t=0,r=A;t<r.length;t++){var a=r[t];j.indexOf(a)!==-1&&e.push(a)}return e}function njj(A,j){if(A===U.emptyTags)return j;if(j===U.emptyTags)return A;var e=Object.assign({},A);for(var t in j)if(Ng.call(A,t)){var r=JiA(A[t],j[t]);if(ajj(r))e[t]=r;else{e=U.emptyTags;break}}else e[t]=j[t];return e}function ojj(A,j){if(A===U.emptyTags||j===U.emptyTags)return U.emptyTags;var e=U.emptyTags;for(var t in A)if(Ng.call(j,t)){var r=JiA(A[t],j[t]);r.length===0&&(e===U.emptyTags&&(e={}),e[t]=A[t].concat(j[t]))}return e}function _iA(A){return A._tag==="AnyType"}function UiA(A){return A._tag==="LiteralType"}function ijj(A){return A._tag==="KeyofType"}function XiA(A){return A._tag==="InterfaceType"}function sjj(A){return A._tag==="PartialType"}function ljj(A){return A._tag==="StrictType"}function cjj(A){return A._tag==="ExactType"}function djj(A){return A._tag==="RefinementType"}function kjj(A){return A._tag==="IntersectionType"}function ViA(A){return A._tag==="UnionType"}function ujj(A){return A._tag==="RecursiveType"}var L_=[];function hE(A){if(L_.indexOf(A)!==-1)return U.emptyTags;if(XiA(A)||ljj(A)){var j=U.emptyTags;for(var e in A.props){var t=A.props[e];UiA(t)&&(j===U.emptyTags&&(j={}),j[e]=[t.value])}return j}else{if(cjj(A)||djj(A))return hE(A.type);if(kjj(A))return A.types.reduce(function(a,n){return njj(a,hE(n))},U.emptyTags);if(ViA(A))return A.types.slice(1).reduce(function(a,n){return ojj(a,hE(n))},hE(A.types[0]));if(ujj(A)){L_.push(A);var r=hE(A.type);return L_.pop(),r}}return U.emptyTags}U.getTags=hE;function WiA(A){var j=hE(A[0]),e=Object.keys(j),t=A.length,r=function(s){for(var l=j[s].slice(),d=[j[s]],k=1;k<t;k++){var u=A[k],m=hE(u),I=m[s];if(I===void 0)return"continue-keys";if(I.some(function(S){return l.indexOf(S)!==-1}))return"continue-keys";l.push.apply(l,I),d.push(I)}return{value:[s,d]}};A:for(var a=0,n=e;a<n.length;a++){var o=n[a],i=r(o);if(typeof i=="object")return i.value;switch(i){case"continue-keys":continue A}}}U.getIndex=WiA;var YiA=function(A){pa(j,A);function j(){var e=A.call(this,"null",function(t){return t===null},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="NullType",e}return j}(ma);U.NullType=YiA;U.nullType=new YiA;U.null=U.nullType;var QiA=function(A){pa(j,A);function j(){var e=A.call(this,"undefined",function(t){return t===void 0},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="UndefinedType",e}return j}(ma);U.UndefinedType=QiA;var J8=new QiA;U.undefined=J8;var ZiA=function(A){pa(j,A);function j(){var e=A.call(this,"void",J8.is,J8.validate,U.identity)||this;return e._tag="VoidType",e}return j}(ma);U.VoidType=ZiA;U.voidType=new ZiA;U.void=U.voidType;var AsA=function(A){pa(j,A);function j(){var e=A.call(this,"unknown",function(t){return!0},U.success,U.identity)||this;return e._tag="UnknownType",e}return j}(ma);U.UnknownType=AsA;U.unknown=new AsA;var jsA=function(A){pa(j,A);function j(){var e=A.call(this,"string",function(t){return typeof t=="string"},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="StringType",e}return j}(ma);U.StringType=jsA;U.string=new jsA;var esA=function(A){pa(j,A);function j(){var e=A.call(this,"number",function(t){return typeof t=="number"},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="NumberType",e}return j}(ma);U.NumberType=esA;U.number=new esA;var tsA=function(A){pa(j,A);function j(){var e=A.call(this,"bigint",function(t){return typeof t=="bigint"},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="BigIntType",e}return j}(ma);U.BigIntType=tsA;U.bigint=new tsA;var rsA=function(A){pa(j,A);function j(){var e=A.call(this,"boolean",function(t){return typeof t=="boolean"},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="BooleanType",e}return j}(ma);U.BooleanType=rsA;U.boolean=new rsA;var asA=function(A){pa(j,A);function j(){var e=A.call(this,"UnknownArray",Array.isArray,function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="AnyArrayType",e}return j}(ma);U.AnyArrayType=asA;U.UnknownArray=new asA;U.Array=U.UnknownArray;var nsA=function(A){pa(j,A);function j(){var e=A.call(this,"UnknownRecord",function(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="AnyDictionaryType",e}return j}(ma);U.AnyDictionaryType=nsA;U.UnknownRecord=new nsA;var osA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.value=n,o._tag="LiteralType",o}return j}(ma);U.LiteralType=osA;function pjj(A,j){j===void 0&&(j=JSON.stringify(A));var e=function(t){return t===A};return new osA(j,e,function(t,r){return e(t)?(0,U.success)(A):(0,U.failure)(t,r)},U.identity,A)}U.literal=pjj;var isA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.keys=n,o._tag="KeyofType",o}return j}(ma);U.KeyofType=isA;function mjj(A,j){j===void 0&&(j=Object.keys(A).map(function(t){return JSON.stringify(t)}).join(" | "));var e=function(t){return U.string.is(t)&&Ng.call(A,t)};return new isA(j,e,function(t,r){return e(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity,A)}U.keyof=mjj;var ssA=function(A){pa(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.type=n,i.predicate=o,i._tag="RefinementType",i}return j}(ma);U.RefinementType=ssA;function lsA(A,j,e){return Y_(A,j,e)}U.brand=lsA;U.Int=lsA(U.number,function(A){return Number.isInteger(A)},"Int");var U_=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.runDefinition=n,o._tag="RecursiveType",o}return j}(ma);U.RecursiveType=U_;Object.defineProperty(U_.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function Ejj(A,j){var e,t=function(){return e||(e=j(r),e.name=A),e},r=new U_(A,function(a){return t().is(a)},function(a,n){return t().validate(a,n)},function(a){return t().encode(a)},t);return r}U.recursion=Ejj;var csA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ArrayType",o}return j}(ma);U.ArrayType=csA;function dsA(A,j){return j===void 0&&(j="Array<".concat(A.name,">")),new csA(j,function(e){return U.UnknownArray.is(e)&&e.every(A.is)},function(e,t){var r=U.UnknownArray.validate(e,t);if((0,kn.isLeft)(r))return r;for(var a=r.right,n=a.length,o=a,i=[],s=0;s<n;s++){var l=a[s],d=A.validate(l,Gd(t,String(s),A,l));if((0,kn.isLeft)(d))Bp(i,d.left);else{var k=d.right;k!==l&&(o===a&&(o=a.slice()),o[s]=k)}}return i.length>0?(0,U.failures)(i):(0,U.success)(o)},A.encode===U.identity?U.identity:function(e){return e.map(A.encode)},A)}U.array=dsA;var ksA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="InterfaceType",o}return j}(ma);U.InterfaceType=ksA;function X_(A,j){j===void 0&&(j=NiA(A));var e=Object.keys(A),t=e.map(function(a){return A[a]}),r=e.length;return new ksA(j,function(a){if(U.UnknownRecord.is(a)){for(var n=0;n<r;n++){var o=e[n],i=a[o];if(i===void 0&&!Ng.call(a,o)||!t[n].is(i))return!1}return!0}return!1},function(a,n){var o=U.UnknownRecord.validate(a,n);if((0,kn.isLeft)(o))return o;for(var i=o.right,s=i,l=[],d=0;d<r;d++){var k=e[d],u=s[k],m=t[d],I=m.validate(u,Gd(n,k,m,u));if((0,kn.isLeft)(I))Bp(l,I.left);else{var S=I.right;(S!==u||S===void 0&&!Ng.call(s,k))&&(s===i&&(s=ex({},i)),s[k]=S)}}return l.length>0?(0,U.failures)(l):(0,U.success)(s)},Yb(t)?U.identity:function(a){for(var n=ex({},a),o=0;o<r;o++){var i=e[o],s=t[o].encode;s!==U.identity&&(n[i]=s(a[i]))}return n},A)}U.type=X_;U.interface=X_;var usA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="PartialType",o}return j}(ma);U.PartialType=usA;function Bjj(A,j){j===void 0&&(j=ziA(NiA(A)));var e=Object.keys(A),t=e.map(function(a){return A[a]}),r=e.length;return new usA(j,function(a){if(U.UnknownRecord.is(a)){for(var n=0;n<r;n++){var o=e[n],i=a[o];if(i!==void 0&&!A[o].is(i))return!1}return!0}return!1},function(a,n){var o=U.UnknownRecord.validate(a,n);if((0,kn.isLeft)(o))return o;for(var i=o.right,s=i,l=[],d=0;d<r;d++){var k=e[d],u=s[k],m=A[k],I=m.validate(u,Gd(n,k,m,u));if((0,kn.isLeft)(I))u!==void 0&&Bp(l,I.left);else{var S=I.right;S!==u&&(s===i&&(s=ex({},i)),s[k]=S)}}return l.length>0?(0,U.failures)(l):(0,U.success)(s)},Yb(t)?U.identity:function(a){for(var n=ex({},a),o=0;o<r;o++){var i=e[o],s=a[i];s!==void 0&&(n[i]=t[o].encode(s))}return n},A)}U.partial=Bjj;var V_=function(A){pa(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.domain=n,i.codomain=o,i._tag="DictionaryType",i}return j}(ma);U.DictionaryType=V_;function psA(A,j,e){var t=J_(A);return t?ejj(Object.keys(t),A,j,e):tjj(A,j,e)}U.record=psA;var W_=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="UnionType",o}return j}(ma);U.UnionType=W_;function msA(A,j){j===void 0&&(j=RiA(A));var e=WiA(A);if(e!==void 0&&A.length>0){var t=e[0],r=e[1],a=r.length,n=function(o){for(var i=0;i<a;i++)if(r[i].indexOf(o)!==-1)return i};return new U8(j,function(o){if(U.UnknownRecord.is(o)){var i=n(o[t]);return i!==void 0?A[i].is(o):!1}return!1},function(o,i){var s=U.UnknownRecord.validate(o,i);if((0,kn.isLeft)(s))return s;var l=s.right,d=n(l[t]);if(d===void 0)return(0,U.failure)(o,i);var k=A[d];return k.validate(l,Gd(i,String(d),k,l))},Yb(A)?U.identity:function(o){var i=n(o[t]);if(i===void 0)throw new Error("no codec found to encode value in union codec ".concat(j));return A[i].encode(o)},A,t)}else return new W_(j,function(o){return A.some(function(i){return i.is(o)})},function(o,i){for(var s=[],l=0;l<A.length;l++){var d=A[l],k=d.validate(o,Gd(i,String(l),d,o));if((0,kn.isLeft)(k))Bp(s,k.left);else return(0,U.success)(k.right)}return(0,U.failures)(s)},Yb(A)?U.identity:function(o){for(var i=0,s=A;i<s.length;i++){var l=s[i];if(l.is(o))return l.encode(o)}throw new Error("no codec found to encode value in union type ".concat(j))},A)}U.union=msA;var EsA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="IntersectionType",o}return j}(ma);U.IntersectionType=EsA;function gjj(A,j){j===void 0&&(j="(".concat(A.map(function(t){return t.name}).join(" & "),")"));var e=A.length;return new EsA(j,function(t){return A.every(function(r){return r.is(t)})},A.length===0?U.success:function(t,r){for(var a=[],n=[],o=0;o<e;o++){var i=A[o],s=i.validate(t,Gd(r,String(o),i,t));(0,kn.isLeft)(s)?Bp(n,s.left):a.push(s.right)}return n.length>0?(0,U.failures)(n):(0,U.success)(z_(t,a))},A.length===0?U.identity:function(t){return z_(t,A.map(function(r){return r.encode(t)}))},A)}U.intersection=gjj;var BsA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="TupleType",o}return j}(ma);U.TupleType=BsA;function hjj(A,j){j===void 0&&(j="[".concat(A.map(function(t){return t.name}).join(", "),"]"));var e=A.length;return new BsA(j,function(t){return U.UnknownArray.is(t)&&t.length===e&&A.every(function(r,a){return r.is(t[a])})},function(t,r){var a=U.UnknownArray.validate(t,r);if((0,kn.isLeft)(a))return a;for(var n=a.right,o=n.length>e?n.slice(0,e):n,i=[],s=0;s<e;s++){var l=n[s],d=A[s],k=d.validate(l,Gd(r,String(s),d,l));if((0,kn.isLeft)(k))Bp(i,k.left);else{var u=k.right;u!==l&&(o===n&&(o=n.slice()),o[s]=u)}}return i.length>0?(0,U.failures)(i):(0,U.success)(o)},Yb(A)?U.identity:function(t){return A.map(function(r,a){return r.encode(t[a])})},A)}U.tuple=hjj;var gsA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyType",o}return j}(ma);U.ReadonlyType=gsA;function qjj(A,j){return j===void 0&&(j="Readonly<".concat(A.name,">")),new gsA(j,A.is,A.validate,A.encode,A)}U.readonly=qjj;var hsA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyArrayType",o}return j}(ma);U.ReadonlyArrayType=hsA;function vjj(A,j){j===void 0&&(j="ReadonlyArray<".concat(A.name,">"));var e=dsA(A);return new hsA(j,e.is,e.validate,e.encode,A)}U.readonlyArray=vjj;var xjj=function(A,j){return vsA(X_(A),j)};U.strict=xjj;var qsA=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ExactType",o}return j}(ma);U.ExactType=qsA;function vsA(A,j){j===void 0&&(j=rjj(A));var e=R_(A);return new qsA(j,A.is,function(t,r){var a=U.UnknownRecord.validate(t,r);if((0,kn.isLeft)(a))return a;var n=A.validate(t,r);return(0,kn.isLeft)(n)?n:(0,kn.right)(MiA(n.right,e))},function(t){return A.encode(MiA(t,e))},A)}U.exact=vsA;var xsA=function(A){pa(j,A);function j(){var e=A.call(this,"Function",function(t){return typeof t=="function"},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="FunctionType",e}return j}(ma);U.FunctionType=xsA;U.Function=new xsA;var fsA=function(A){pa(j,A);function j(){var e=A.call(this,"never",function(t){return!1},function(t,r){return(0,U.failure)(t,r)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return j}(ma);U.NeverType=fsA;U.never=new fsA;var GsA=function(A){pa(j,A);function j(){var e=A.call(this,"any",function(t){return!0},U.success,U.identity)||this;return e._tag="AnyType",e}return j}(ma);U.AnyType=GsA;U.any=new GsA;function Y_(A,j,e){return e===void 0&&(e="(".concat(A.name," | ").concat(LiA(j),")")),new ssA(e,function(t){return A.is(t)&&j(t)},function(t,r){var a=A.validate(t,r);if((0,kn.isLeft)(a))return a;var n=a.right;return j(n)?(0,U.success)(n):(0,U.failure)(n,r)},A.encode,A,j)}U.refinement=Y_;U.Integer=Y_(U.number,Number.isInteger,"Integer");var U8=function(A){pa(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a,n)||this;return i.tag=o,i}return j}(W_);U.TaggedUnionType=U8;var fjj=function(A,j,e){e===void 0&&(e=RiA(j));var t=msA(j,e);return t instanceof U8?t:(console.warn("[io-ts] Cannot build a tagged union for ".concat(e,", returning a de-optimized union")),new U8(e,t.is,t.validate,t.encode,j,A))};U.taggedUnion=fjj;var Gjj=function(A,j){return{value:A,context:j}};U.getValidationError=Gjj;var Fjj=function(A){return[{key:"",type:A}]};U.getDefaultContext=Fjj;U.Dictionary=U.UnknownRecord;var FsA=function(A){pa(j,A);function j(){var e=A.call(this,"object",function(t){return t!==null&&typeof t=="object"},function(t,r){return e.is(t)?(0,U.success)(t):(0,U.failure)(t,r)},U.identity)||this;return e._tag="ObjectType",e}return j}(ma);U.ObjectType=FsA;U.object=new FsA;U.dictionary=psA;var bjj=function(A){pa(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="StrictType",o}return j}(ma);U.StrictType=bjj;function yjj(A){return A}U.clean=yjj;function $jj(A){return function(){return A}}U.alias=$jj});var $0=OA((BGe,oBA)=>{"use strict";var Idj="2.0.0",Ddj=Number.MAX_SAFE_INTEGER||9007199254740991,Odj=16,Pdj=250,Cdj=["major","premajor","minor","preminor","patch","prepatch","prerelease"];oBA.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Odj,MAX_SAFE_BUILD_LENGTH:Pdj,MAX_SAFE_INTEGER:Ddj,RELEASE_TYPES:Cdj,SEMVER_SPEC_VERSION:Idj,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var w0=OA((gGe,iBA)=>{"use strict";var Hdj=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...A)=>console.error("SEMVER",...A):()=>{};iBA.exports=Hdj});var Ux=OA((ku,sBA)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:w9,MAX_SAFE_BUILD_LENGTH:Tdj,MAX_LENGTH:Kdj}=$0(),Sdj=w0();ku=sBA.exports={};var Mdj=ku.re=[],_dj=ku.safeRe=[],be=ku.src=[],Ldj=ku.safeSrc=[],ye=ku.t={},Ndj=0,I9="[a-zA-Z0-9-]",zdj=[["\\s",1],["\\d",Kdj],[I9,Tdj]],Rdj=A=>{for(let[j,e]of zdj)A=A.split(`${j}*`).join(`${j}{0,${e}}`).split(`${j}+`).join(`${j}{1,${e}}`);return A},ar=(A,j,e)=>{let t=Rdj(j),r=Ndj++;Sdj(A,r,j),ye[A]=r,be[r]=j,Ldj[r]=t,Mdj[r]=new RegExp(j,e?"g":void 0),_dj[r]=new RegExp(t,e?"g":void 0)};ar("NUMERICIDENTIFIER","0|[1-9]\\d*");ar("NUMERICIDENTIFIERLOOSE","\\d+");ar("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${I9}*`);ar("MAINVERSION",`(${be[ye.NUMERICIDENTIFIER]})\\.(${be[ye.NUMERICIDENTIFIER]})\\.(${be[ye.NUMERICIDENTIFIER]})`);ar("MAINVERSIONLOOSE",`(${be[ye.NUMERICIDENTIFIERLOOSE]})\\.(${be[ye.NUMERICIDENTIFIERLOOSE]})\\.(${be[ye.NUMERICIDENTIFIERLOOSE]})`);ar("PRERELEASEIDENTIFIER",`(?:${be[ye.NONNUMERICIDENTIFIER]}|${be[ye.NUMERICIDENTIFIER]})`);ar("PRERELEASEIDENTIFIERLOOSE",`(?:${be[ye.NONNUMERICIDENTIFIER]}|${be[ye.NUMERICIDENTIFIERLOOSE]})`);ar("PRERELEASE",`(?:-(${be[ye.PRERELEASEIDENTIFIER]}(?:\\.${be[ye.PRERELEASEIDENTIFIER]})*))`);ar("PRERELEASELOOSE",`(?:-?(${be[ye.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${be[ye.PRERELEASEIDENTIFIERLOOSE]})*))`);ar("BUILDIDENTIFIER",`${I9}+`);ar("BUILD",`(?:\\+(${be[ye.BUILDIDENTIFIER]}(?:\\.${be[ye.BUILDIDENTIFIER]})*))`);ar("FULLPLAIN",`v?${be[ye.MAINVERSION]}${be[ye.PRERELEASE]}?${be[ye.BUILD]}?`);ar("FULL",`^${be[ye.FULLPLAIN]}$`);ar("LOOSEPLAIN",`[v=\\s]*${be[ye.MAINVERSIONLOOSE]}${be[ye.PRERELEASELOOSE]}?${be[ye.BUILD]}?`);ar("LOOSE",`^${be[ye.LOOSEPLAIN]}$`);ar("GTLT","((?:<|>)?=?)");ar("XRANGEIDENTIFIERLOOSE",`${be[ye.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ar("XRANGEIDENTIFIER",`${be[ye.NUMERICIDENTIFIER]}|x|X|\\*`);ar("XRANGEPLAIN",`[v=\\s]*(${be[ye.XRANGEIDENTIFIER]})(?:\\.(${be[ye.XRANGEIDENTIFIER]})(?:\\.(${be[ye.XRANGEIDENTIFIER]})(?:${be[ye.PRERELEASE]})?${be[ye.BUILD]}?)?)?`);ar("XRANGEPLAINLOOSE",`[v=\\s]*(${be[ye.XRANGEIDENTIFIERLOOSE]})(?:\\.(${be[ye.XRANGEIDENTIFIERLOOSE]})(?:\\.(${be[ye.XRANGEIDENTIFIERLOOSE]})(?:${be[ye.PRERELEASELOOSE]})?${be[ye.BUILD]}?)?)?`);ar("XRANGE",`^${be[ye.GTLT]}\\s*${be[ye.XRANGEPLAIN]}$`);ar("XRANGELOOSE",`^${be[ye.GTLT]}\\s*${be[ye.XRANGEPLAINLOOSE]}$`);ar("COERCEPLAIN",`(^|[^\\d])(\\d{1,${w9}})(?:\\.(\\d{1,${w9}}))?(?:\\.(\\d{1,${w9}}))?`);ar("COERCE",`${be[ye.COERCEPLAIN]}(?:$|[^\\d])`);ar("COERCEFULL",be[ye.COERCEPLAIN]+`(?:${be[ye.PRERELEASE]})?(?:${be[ye.BUILD]})?(?:$|[^\\d])`);ar("COERCERTL",be[ye.COERCE],!0);ar("COERCERTLFULL",be[ye.COERCEFULL],!0);ar("LONETILDE","(?:~>?)");ar("TILDETRIM",`(\\s*)${be[ye.LONETILDE]}\\s+`,!0);ku.tildeTrimReplace="$1~";ar("TILDE",`^${be[ye.LONETILDE]}${be[ye.XRANGEPLAIN]}$`);ar("TILDELOOSE",`^${be[ye.LONETILDE]}${be[ye.XRANGEPLAINLOOSE]}$`);ar("LONECARET","(?:\\^)");ar("CARETTRIM",`(\\s*)${be[ye.LONECARET]}\\s+`,!0);ku.caretTrimReplace="$1^";ar("CARET",`^${be[ye.LONECARET]}${be[ye.XRANGEPLAIN]}$`);ar("CARETLOOSE",`^${be[ye.LONECARET]}${be[ye.XRANGEPLAINLOOSE]}$`);ar("COMPARATORLOOSE",`^${be[ye.GTLT]}\\s*(${be[ye.LOOSEPLAIN]})$|^$`);ar("COMPARATOR",`^${be[ye.GTLT]}\\s*(${be[ye.FULLPLAIN]})$|^$`);ar("COMPARATORTRIM",`(\\s*)${be[ye.GTLT]}\\s*(${be[ye.LOOSEPLAIN]}|${be[ye.XRANGEPLAIN]})`,!0);ku.comparatorTrimReplace="$1$2$3";ar("HYPHENRANGE",`^\\s*(${be[ye.XRANGEPLAIN]})\\s+-\\s+(${be[ye.XRANGEPLAIN]})\\s*$`);ar("HYPHENRANGELOOSE",`^\\s*(${be[ye.XRANGEPLAINLOOSE]})\\s+-\\s+(${be[ye.XRANGEPLAINLOOSE]})\\s*$`);ar("STAR","(<|>)?=?\\s*\\*");ar("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ar("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var bO=OA((hGe,lBA)=>{"use strict";var Jdj=Object.freeze({loose:!0}),Udj=Object.freeze({}),Xdj=A=>A?typeof A!="object"?Jdj:A:Udj;lBA.exports=Xdj});var D9=OA((qGe,kBA)=>{"use strict";var cBA=/^[0-9]+$/,dBA=(A,j)=>{let e=cBA.test(A),t=cBA.test(j);return e&&t&&(A=+A,j=+j),A===j?0:e&&!t?-1:t&&!e?1:A<j?-1:1},Vdj=(A,j)=>dBA(j,A);kBA.exports={compareIdentifiers:dBA,rcompareIdentifiers:Vdj}});var Pi=OA((vGe,pBA)=>{"use strict";var yO=w0(),{MAX_LENGTH:uBA,MAX_SAFE_INTEGER:$O}=$0(),{safeRe:wO,t:IO}=Ux(),Wdj=bO(),{compareIdentifiers:Xx}=D9(),O9=class A{constructor(j,e){if(e=Wdj(e),j instanceof A){if(j.loose===!!e.loose&&j.includePrerelease===!!e.includePrerelease)return j;j=j.version}else if(typeof j!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof j}".`);if(j.length>uBA)throw new TypeError(`version is longer than ${uBA} characters`);yO("SemVer",j,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;let t=j.trim().match(e.loose?wO[IO.LOOSE]:wO[IO.FULL]);if(!t)throw new TypeError(`Invalid Version: ${j}`);if(this.raw=j,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>$O||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$O||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$O||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){let a=+r;if(a>=0&&a<$O)return a}return r}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(j){if(yO("SemVer.compare",this.version,this.options,j),!(j instanceof A)){if(typeof j=="string"&&j===this.version)return 0;j=new A(j,this.options)}return j.version===this.version?0:this.compareMain(j)||this.comparePre(j)}compareMain(j){return j instanceof A||(j=new A(j,this.options)),Xx(this.major,j.major)||Xx(this.minor,j.minor)||Xx(this.patch,j.patch)}comparePre(j){if(j instanceof A||(j=new A(j,this.options)),this.prerelease.length&&!j.prerelease.length)return-1;if(!this.prerelease.length&&j.prerelease.length)return 1;if(!this.prerelease.length&&!j.prerelease.length)return 0;let e=0;do{let t=this.prerelease[e],r=j.prerelease[e];if(yO("prerelease compare",e,t,r),t===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(t===void 0)return-1;if(t===r)continue;return Xx(t,r)}while(++e)}compareBuild(j){j instanceof A||(j=new A(j,this.options));let e=0;do{let t=this.build[e],r=j.build[e];if(yO("build compare",e,t,r),t===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(t===void 0)return-1;if(t===r)continue;return Xx(t,r)}while(++e)}inc(j,e,t){if(j.startsWith("pre")){if(!e&&t===!1)throw new Error("invalid increment argument: identifier is empty");if(e){let r=`-${e}`.match(this.options.loose?wO[IO.PRERELEASELOOSE]:wO[IO.PRERELEASE]);if(!r||r[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(j){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,t),this.inc("pre",e,t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,t),this.inc("pre",e,t);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let r=Number(t)?1:0;if(this.prerelease.length===0)this.prerelease=[r];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(e===this.prerelease.join(".")&&t===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(e){let a=[e,r];t===!1&&(a=[e]),Xx(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${j}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};pBA.exports=O9});var th=OA((xGe,EBA)=>{"use strict";var mBA=Pi(),Ydj=(A,j,e=!1)=>{if(A instanceof mBA)return A;try{return new mBA(A,j)}catch(t){if(!e)return null;throw t}};EBA.exports=Ydj});var gBA=OA((fGe,BBA)=>{"use strict";var Qdj=th(),Zdj=(A,j)=>{let e=Qdj(A,j);return e?e.version:null};BBA.exports=Zdj});var qBA=OA((GGe,hBA)=>{"use strict";var Akj=th(),jkj=(A,j)=>{let e=Akj(A.trim().replace(/^[=v]+/,""),j);return e?e.version:null};hBA.exports=jkj});var fBA=OA((FGe,xBA)=>{"use strict";var vBA=Pi(),ekj=(A,j,e,t,r)=>{typeof e=="string"&&(r=t,t=e,e=void 0);try{return new vBA(A instanceof vBA?A.version:A,e).inc(j,t,r).version}catch{return null}};xBA.exports=ekj});var bBA=OA((bGe,FBA)=>{"use strict";var GBA=th(),tkj=(A,j)=>{let e=GBA(A,null,!0),t=GBA(j,null,!0),r=e.compare(t);if(r===0)return null;let a=r>0,n=a?e:t,o=a?t:e,i=!!n.prerelease.length;if(!!o.prerelease.length&&!i){if(!o.patch&&!o.minor)return"major";if(o.compareMain(n)===0)return o.minor&&!o.patch?"minor":"patch"}let l=i?"pre":"";return e.major!==t.major?l+"major":e.minor!==t.minor?l+"minor":e.patch!==t.patch?l+"patch":"prerelease"};FBA.exports=tkj});var $BA=OA((yGe,yBA)=>{"use strict";var rkj=Pi(),akj=(A,j)=>new rkj(A,j).major;yBA.exports=akj});var IBA=OA(($Ge,wBA)=>{"use strict";var nkj=Pi(),okj=(A,j)=>new nkj(A,j).minor;wBA.exports=okj});var OBA=OA((wGe,DBA)=>{"use strict";var ikj=Pi(),skj=(A,j)=>new ikj(A,j).patch;DBA.exports=skj});var CBA=OA((IGe,PBA)=>{"use strict";var lkj=th(),ckj=(A,j)=>{let e=lkj(A,j);return e&&e.prerelease.length?e.prerelease:null};PBA.exports=ckj});var Cc=OA((DGe,TBA)=>{"use strict";var HBA=Pi(),dkj=(A,j,e)=>new HBA(A,e).compare(new HBA(j,e));TBA.exports=dkj});var SBA=OA((OGe,KBA)=>{"use strict";var kkj=Cc(),ukj=(A,j,e)=>kkj(j,A,e);KBA.exports=ukj});var _BA=OA((PGe,MBA)=>{"use strict";var pkj=Cc(),mkj=(A,j)=>pkj(A,j,!0);MBA.exports=mkj});var DO=OA((CGe,NBA)=>{"use strict";var LBA=Pi(),Ekj=(A,j,e)=>{let t=new LBA(A,e),r=new LBA(j,e);return t.compare(r)||t.compareBuild(r)};NBA.exports=Ekj});var RBA=OA((HGe,zBA)=>{"use strict";var Bkj=DO(),gkj=(A,j)=>A.sort((e,t)=>Bkj(e,t,j));zBA.exports=gkj});var UBA=OA((TGe,JBA)=>{"use strict";var hkj=DO(),qkj=(A,j)=>A.sort((e,t)=>hkj(t,e,j));JBA.exports=qkj});var I0=OA((KGe,XBA)=>{"use strict";var vkj=Cc(),xkj=(A,j,e)=>vkj(A,j,e)>0;XBA.exports=xkj});var OO=OA((SGe,VBA)=>{"use strict";var fkj=Cc(),Gkj=(A,j,e)=>fkj(A,j,e)<0;VBA.exports=Gkj});var P9=OA((MGe,WBA)=>{"use strict";var Fkj=Cc(),bkj=(A,j,e)=>Fkj(A,j,e)===0;WBA.exports=bkj});var C9=OA((_Ge,YBA)=>{"use strict";var ykj=Cc(),$kj=(A,j,e)=>ykj(A,j,e)!==0;YBA.exports=$kj});var PO=OA((LGe,QBA)=>{"use strict";var wkj=Cc(),Ikj=(A,j,e)=>wkj(A,j,e)>=0;QBA.exports=Ikj});var CO=OA((NGe,ZBA)=>{"use strict";var Dkj=Cc(),Okj=(A,j,e)=>Dkj(A,j,e)<=0;ZBA.exports=Okj});var H9=OA((zGe,AgA)=>{"use strict";var Pkj=P9(),Ckj=C9(),Hkj=I0(),Tkj=PO(),Kkj=OO(),Skj=CO(),Mkj=(A,j,e,t)=>{switch(j){case"===":return typeof A=="object"&&(A=A.version),typeof e=="object"&&(e=e.version),A===e;case"!==":return typeof A=="object"&&(A=A.version),typeof e=="object"&&(e=e.version),A!==e;case"":case"=":case"==":return Pkj(A,e,t);case"!=":return Ckj(A,e,t);case">":return Hkj(A,e,t);case">=":return Tkj(A,e,t);case"<":return Kkj(A,e,t);case"<=":return Skj(A,e,t);default:throw new TypeError(`Invalid operator: ${j}`)}};AgA.exports=Mkj});var egA=OA((RGe,jgA)=>{"use strict";var _kj=Pi(),Lkj=th(),{safeRe:HO,t:TO}=Ux(),Nkj=(A,j)=>{if(A instanceof _kj)return A;if(typeof A=="number"&&(A=String(A)),typeof A!="string")return null;j=j||{};let e=null;if(!j.rtl)e=A.match(j.includePrerelease?HO[TO.COERCEFULL]:HO[TO.COERCE]);else{let i=j.includePrerelease?HO[TO.COERCERTLFULL]:HO[TO.COERCERTL],s;for(;(s=i.exec(A))&&(!e||e.index+e[0].length!==A.length);)(!e||s.index+s[0].length!==e.index+e[0].length)&&(e=s),i.lastIndex=s.index+s[1].length+s[2].length;i.lastIndex=-1}if(e===null)return null;let t=e[2],r=e[3]||"0",a=e[4]||"0",n=j.includePrerelease&&e[5]?`-${e[5]}`:"",o=j.includePrerelease&&e[6]?`+${e[6]}`:"";return Lkj(`${t}.${r}.${a}${n}${o}`,j)};jgA.exports=Nkj});var rgA=OA((JGe,tgA)=>{"use strict";var T9=class{constructor(){this.max=1e3,this.map=new Map}get(j){let e=this.map.get(j);if(e!==void 0)return this.map.delete(j),this.map.set(j,e),e}delete(j){return this.map.delete(j)}set(j,e){if(!this.delete(j)&&e!==void 0){if(this.map.size>=this.max){let r=this.map.keys().next().value;this.delete(r)}this.map.set(j,e)}return this}};tgA.exports=T9});var Hc=OA((UGe,igA)=>{"use strict";var zkj=/\s+/g,K9=class A{constructor(j,e){if(e=Jkj(e),j instanceof A)return j.loose===!!e.loose&&j.includePrerelease===!!e.includePrerelease?j:new A(j.raw,e);if(j instanceof S9)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=j.trim().replace(zkj," "),this.set=this.raw.split("||").map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let t=this.set[0];if(this.set=this.set.filter(r=>!ngA(r[0])),this.set.length===0)this.set=[t];else if(this.set.length>1){for(let r of this.set)if(r.length===1&&Zkj(r[0])){this.set=[r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");let e=this.set[j];for(let t=0;t<e.length;t++)t>0&&(this.formatted+=" "),this.formatted+=e[t].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){let t=((this.options.includePrerelease&&Ykj)|(this.options.loose&&Qkj))+":"+j,r=agA.get(t);if(r)return r;let a=this.options.loose,n=a?Vs[cs.HYPHENRANGELOOSE]:Vs[cs.HYPHENRANGE];j=j.replace(n,suj(this.options.includePrerelease)),x6("hyphen replace",j),j=j.replace(Vs[cs.COMPARATORTRIM],Xkj),x6("comparator trim",j),j=j.replace(Vs[cs.TILDETRIM],Vkj),x6("tilde trim",j),j=j.replace(Vs[cs.CARETTRIM],Wkj),x6("caret trim",j);let o=j.split(" ").map(d=>Auj(d,this.options)).join(" ").split(/\s+/).map(d=>iuj(d,this.options));a&&(o=o.filter(d=>(x6("loose invalid filter",d,this.options),!!d.match(Vs[cs.COMPARATORLOOSE])))),x6("range list",o);let i=new Map,s=o.map(d=>new S9(d,this.options));for(let d of s){if(ngA(d))return[d];i.set(d.value,d)}i.size>1&&i.has("")&&i.delete("");let l=[...i.values()];return agA.set(t,l),l}intersects(j,e){if(!(j instanceof A))throw new TypeError("a Range is required");return this.set.some(t=>ogA(t,e)&&j.set.some(r=>ogA(r,e)&&t.every(a=>r.every(n=>a.intersects(n,e)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new Ukj(j,this.options)}catch{return!1}for(let e=0;e<this.set.length;e++)if(luj(this.set[e],j,this.options))return!0;return!1}};igA.exports=K9;var Rkj=rgA(),agA=new Rkj,Jkj=bO(),S9=D0(),x6=w0(),Ukj=Pi(),{safeRe:Vs,t:cs,comparatorTrimReplace:Xkj,tildeTrimReplace:Vkj,caretTrimReplace:Wkj}=Ux(),{FLAG_INCLUDE_PRERELEASE:Ykj,FLAG_LOOSE:Qkj}=$0(),ngA=A=>A.value==="<0.0.0-0",Zkj=A=>A.value==="",ogA=(A,j)=>{let e=!0,t=A.slice(),r=t.pop();for(;e&&t.length;)e=t.every(a=>r.intersects(a,j)),r=t.pop();return e},Auj=(A,j)=>(x6("comp",A,j),A=tuj(A,j),x6("caret",A),A=juj(A,j),x6("tildes",A),A=auj(A,j),x6("xrange",A),A=ouj(A,j),x6("stars",A),A),ds=A=>!A||A.toLowerCase()==="x"||A==="*",juj=(A,j)=>A.trim().split(/\s+/).map(e=>euj(e,j)).join(" "),euj=(A,j)=>{let e=j.loose?Vs[cs.TILDELOOSE]:Vs[cs.TILDE];return A.replace(e,(t,r,a,n,o)=>{x6("tilde",A,t,r,a,n,o);let i;return ds(r)?i="":ds(a)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:ds(n)?i=`>=${r}.${a}.0 <${r}.${+a+1}.0-0`:o?(x6("replaceTilde pr",o),i=`>=${r}.${a}.${n}-${o} <${r}.${+a+1}.0-0`):i=`>=${r}.${a}.${n} <${r}.${+a+1}.0-0`,x6("tilde return",i),i})},tuj=(A,j)=>A.trim().split(/\s+/).map(e=>ruj(e,j)).join(" "),ruj=(A,j)=>{x6("caret",A,j);let e=j.loose?Vs[cs.CARETLOOSE]:Vs[cs.CARET],t=j.includePrerelease?"-0":"";return A.replace(e,(r,a,n,o,i)=>{x6("caret",A,r,a,n,o,i);let s;return ds(a)?s="":ds(n)?s=`>=${a}.0.0${t} <${+a+1}.0.0-0`:ds(o)?a==="0"?s=`>=${a}.${n}.0${t} <${a}.${+n+1}.0-0`:s=`>=${a}.${n}.0${t} <${+a+1}.0.0-0`:i?(x6("replaceCaret pr",i),a==="0"?n==="0"?s=`>=${a}.${n}.${o}-${i} <${a}.${n}.${+o+1}-0`:s=`>=${a}.${n}.${o}-${i} <${a}.${+n+1}.0-0`:s=`>=${a}.${n}.${o}-${i} <${+a+1}.0.0-0`):(x6("no pr"),a==="0"?n==="0"?s=`>=${a}.${n}.${o}${t} <${a}.${n}.${+o+1}-0`:s=`>=${a}.${n}.${o}${t} <${a}.${+n+1}.0-0`:s=`>=${a}.${n}.${o} <${+a+1}.0.0-0`),x6("caret return",s),s})},auj=(A,j)=>(x6("replaceXRanges",A,j),A.split(/\s+/).map(e=>nuj(e,j)).join(" ")),nuj=(A,j)=>{A=A.trim();let e=j.loose?Vs[cs.XRANGELOOSE]:Vs[cs.XRANGE];return A.replace(e,(t,r,a,n,o,i)=>{x6("xRange",A,t,r,a,n,o,i);let s=ds(a),l=s||ds(n),d=l||ds(o),k=d;return r==="="&&k&&(r=""),i=j.includePrerelease?"-0":"",s?r===">"||r==="<"?t="<0.0.0-0":t="*":r&&k?(l&&(n=0),o=0,r===">"?(r=">=",l?(a=+a+1,n=0,o=0):(n=+n+1,o=0)):r==="<="&&(r="<",l?a=+a+1:n=+n+1),r==="<"&&(i="-0"),t=`${r+a}.${n}.${o}${i}`):l?t=`>=${a}.0.0${i} <${+a+1}.0.0-0`:d&&(t=`>=${a}.${n}.0${i} <${a}.${+n+1}.0-0`),x6("xRange return",t),t})},ouj=(A,j)=>(x6("replaceStars",A,j),A.trim().replace(Vs[cs.STAR],"")),iuj=(A,j)=>(x6("replaceGTE0",A,j),A.trim().replace(Vs[j.includePrerelease?cs.GTE0PRE:cs.GTE0],"")),suj=A=>(j,e,t,r,a,n,o,i,s,l,d,k)=>(ds(t)?e="":ds(r)?e=`>=${t}.0.0${A?"-0":""}`:ds(a)?e=`>=${t}.${r}.0${A?"-0":""}`:n?e=`>=${e}`:e=`>=${e}${A?"-0":""}`,ds(s)?i="":ds(l)?i=`<${+s+1}.0.0-0`:ds(d)?i=`<${s}.${+l+1}.0-0`:k?i=`<=${s}.${l}.${d}-${k}`:A?i=`<${s}.${l}.${+d+1}-0`:i=`<=${i}`,`${e} ${i}`.trim()),luj=(A,j,e)=>{for(let t=0;t<A.length;t++)if(!A[t].test(j))return!1;if(j.prerelease.length&&!e.includePrerelease){for(let t=0;t<A.length;t++)if(x6(A[t].semver),A[t].semver!==S9.ANY&&A[t].semver.prerelease.length>0){let r=A[t].semver;if(r.major===j.major&&r.minor===j.minor&&r.patch===j.patch)return!0}return!1}return!0}});var D0=OA((XGe,ugA)=>{"use strict";var O0=Symbol("SemVer ANY"),L9=class A{static get ANY(){return O0}constructor(j,e){if(e=sgA(e),j instanceof A){if(j.loose===!!e.loose)return j;j=j.value}j=j.trim().split(/\s+/).join(" "),_9("comparator",j,e),this.options=e,this.loose=!!e.loose,this.parse(j),this.semver===O0?this.value="":this.value=this.operator+this.semver.version,_9("comp",this)}parse(j){let e=this.options.loose?lgA[cgA.COMPARATORLOOSE]:lgA[cgA.COMPARATOR],t=j.match(e);if(!t)throw new TypeError(`Invalid comparator: ${j}`);this.operator=t[1]!==void 0?t[1]:"",this.operator==="="&&(this.operator=""),t[2]?this.semver=new dgA(t[2],this.options.loose):this.semver=O0}toString(){return this.value}test(j){if(_9("Comparator.test",j,this.options.loose),this.semver===O0||j===O0)return!0;if(typeof j=="string")try{j=new dgA(j,this.options)}catch{return!1}return M9(j,this.operator,this.semver,this.options)}intersects(j,e){if(!(j instanceof A))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new kgA(j.value,e).test(this.value):j.operator===""?j.value===""?!0:new kgA(this.value,e).test(j.semver):(e=sgA(e),e.includePrerelease&&(this.value==="<0.0.0-0"||j.value==="<0.0.0-0")||!e.includePrerelease&&(this.value.startsWith("<0.0.0")||j.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&j.operator.startsWith(">")||this.operator.startsWith("<")&&j.operator.startsWith("<")||this.semver.version===j.semver.version&&this.operator.includes("=")&&j.operator.includes("=")||M9(this.semver,"<",j.semver,e)&&this.operator.startsWith(">")&&j.operator.startsWith("<")||M9(this.semver,">",j.semver,e)&&this.operator.startsWith("<")&&j.operator.startsWith(">")))}};ugA.exports=L9;var sgA=bO(),{safeRe:lgA,t:cgA}=Ux(),M9=H9(),_9=w0(),dgA=Pi(),kgA=Hc()});var P0=OA((VGe,pgA)=>{"use strict";var cuj=Hc(),duj=(A,j,e)=>{try{j=new cuj(j,e)}catch{return!1}return j.test(A)};pgA.exports=duj});var EgA=OA((WGe,mgA)=>{"use strict";var kuj=Hc(),uuj=(A,j)=>new kuj(A,j).set.map(e=>e.map(t=>t.value).join(" ").trim().split(" "));mgA.exports=uuj});var ggA=OA((YGe,BgA)=>{"use strict";var puj=Pi(),muj=Hc(),Euj=(A,j,e)=>{let t=null,r=null,a=null;try{a=new muj(j,e)}catch{return null}return A.forEach(n=>{a.test(n)&&(!t||r.compare(n)===-1)&&(t=n,r=new puj(t,e))}),t};BgA.exports=Euj});var qgA=OA((QGe,hgA)=>{"use strict";var Buj=Pi(),guj=Hc(),huj=(A,j,e)=>{let t=null,r=null,a=null;try{a=new guj(j,e)}catch{return null}return A.forEach(n=>{a.test(n)&&(!t||r.compare(n)===1)&&(t=n,r=new Buj(t,e))}),t};hgA.exports=huj});var fgA=OA((ZGe,xgA)=>{"use strict";var N9=Pi(),quj=Hc(),vgA=I0(),vuj=(A,j)=>{A=new quj(A,j);let e=new N9("0.0.0");if(A.test(e)||(e=new N9("0.0.0-0"),A.test(e)))return e;e=null;for(let t=0;t<A.set.length;++t){let r=A.set[t],a=null;r.forEach(n=>{let o=new N9(n.semver.version);switch(n.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!a||vgA(o,a))&&(a=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${n.operator}`)}}),a&&(!e||vgA(e,a))&&(e=a)}return e&&A.test(e)?e:null};xgA.exports=vuj});var FgA=OA((AFe,GgA)=>{"use strict";var xuj=Hc(),fuj=(A,j)=>{try{return new xuj(A,j).range||"*"}catch{return null}};GgA.exports=fuj});var KO=OA((jFe,wgA)=>{"use strict";var Guj=Pi(),$gA=D0(),{ANY:Fuj}=$gA,buj=Hc(),yuj=P0(),bgA=I0(),ygA=OO(),$uj=CO(),wuj=PO(),Iuj=(A,j,e,t)=>{A=new Guj(A,t),j=new buj(j,t);let r,a,n,o,i;switch(e){case">":r=bgA,a=$uj,n=ygA,o=">",i=">=";break;case"<":r=ygA,a=wuj,n=bgA,o="<",i="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yuj(A,j,t))return!1;for(let s=0;s<j.set.length;++s){let l=j.set[s],d=null,k=null;if(l.forEach(u=>{u.semver===Fuj&&(u=new $gA(">=0.0.0")),d=d||u,k=k||u,r(u.semver,d.semver,t)?d=u:n(u.semver,k.semver,t)&&(k=u)}),d.operator===o||d.operator===i||(!k.operator||k.operator===o)&&a(A,k.semver))return!1;if(k.operator===i&&n(A,k.semver))return!1}return!0};wgA.exports=Iuj});var DgA=OA((eFe,IgA)=>{"use strict";var Duj=KO(),Ouj=(A,j,e)=>Duj(A,j,">",e);IgA.exports=Ouj});var PgA=OA((tFe,OgA)=>{"use strict";var Puj=KO(),Cuj=(A,j,e)=>Puj(A,j,"<",e);OgA.exports=Cuj});var TgA=OA((rFe,HgA)=>{"use strict";var CgA=Hc(),Huj=(A,j,e)=>(A=new CgA(A,e),j=new CgA(j,e),A.intersects(j,e));HgA.exports=Huj});var SgA=OA((aFe,KgA)=>{"use strict";var Tuj=P0(),Kuj=Cc();KgA.exports=(A,j,e)=>{let t=[],r=null,a=null,n=A.sort((l,d)=>Kuj(l,d,e));for(let l of n)Tuj(l,j,e)?(a=l,r||(r=l)):(a&&t.push([r,a]),a=null,r=null);r&&t.push([r,null]);let o=[];for(let[l,d]of t)l===d?o.push(l):!d&&l===n[0]?o.push("*"):d?l===n[0]?o.push(`<=${d}`):o.push(`${l} - ${d}`):o.push(`>=${l}`);let i=o.join(" || "),s=typeof j.raw=="string"?j.raw:String(j);return i.length<s.length?i:j}});var RgA=OA((nFe,zgA)=>{"use strict";var MgA=Hc(),R9=D0(),{ANY:z9}=R9,C0=P0(),J9=Cc(),Suj=(A,j,e={})=>{if(A===j)return!0;A=new MgA(A,e),j=new MgA(j,e);let t=!1;A:for(let r of A.set){for(let a of j.set){let n=_uj(r,a,e);if(t=t||n!==null,n)continue A}if(t)return!1}return!0},Muj=[new R9(">=0.0.0-0")],_gA=[new R9(">=0.0.0")],_uj=(A,j,e)=>{if(A===j)return!0;if(A.length===1&&A[0].semver===z9){if(j.length===1&&j[0].semver===z9)return!0;e.includePrerelease?A=Muj:A=_gA}if(j.length===1&&j[0].semver===z9){if(e.includePrerelease)return!0;j=_gA}let t=new Set,r,a;for(let u of A)u.operator===">"||u.operator===">="?r=LgA(r,u,e):u.operator==="<"||u.operator==="<="?a=NgA(a,u,e):t.add(u.semver);if(t.size>1)return null;let n;if(r&&a){if(n=J9(r.semver,a.semver,e),n>0)return null;if(n===0&&(r.operator!==">="||a.operator!=="<="))return null}for(let u of t){if(r&&!C0(u,String(r),e)||a&&!C0(u,String(a),e))return null;for(let m of j)if(!C0(u,String(m),e))return!1;return!0}let o,i,s,l,d=a&&!e.includePrerelease&&a.semver.prerelease.length?a.semver:!1,k=r&&!e.includePrerelease&&r.semver.prerelease.length?r.semver:!1;d&&d.prerelease.length===1&&a.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let u of j){if(l=l||u.operator===">"||u.operator===">=",s=s||u.operator==="<"||u.operator==="<=",r){if(k&&u.semver.prerelease&&u.semver.prerelease.length&&u.semver.major===k.major&&u.semver.minor===k.minor&&u.semver.patch===k.patch&&(k=!1),u.operator===">"||u.operator===">="){if(o=LgA(r,u,e),o===u&&o!==r)return!1}else if(r.operator===">="&&!C0(r.semver,String(u),e))return!1}if(a){if(d&&u.semver.prerelease&&u.semver.prerelease.length&&u.semver.major===d.major&&u.semver.minor===d.minor&&u.semver.patch===d.patch&&(d=!1),u.operator==="<"||u.operator==="<="){if(i=NgA(a,u,e),i===u&&i!==a)return!1}else if(a.operator==="<="&&!C0(a.semver,String(u),e))return!1}if(!u.operator&&(a||r)&&n!==0)return!1}return!(r&&s&&!a&&n!==0||a&&l&&!r&&n!==0||k||d)},LgA=(A,j,e)=>{if(!A)return j;let t=J9(A.semver,j.semver,e);return t>0?A:t<0||j.operator===">"&&A.operator===">="?j:A},NgA=(A,j,e)=>{if(!A)return j;let t=J9(A.semver,j.semver,e);return t<0?A:t>0||j.operator==="<"&&A.operator==="<="?j:A};zgA.exports=Suj});var SO=OA((oFe,XgA)=>{"use strict";var U9=Ux(),JgA=$0(),Luj=Pi(),UgA=D9(),Nuj=th(),zuj=gBA(),Ruj=qBA(),Juj=fBA(),Uuj=bBA(),Xuj=$BA(),Vuj=IBA(),Wuj=OBA(),Yuj=CBA(),Quj=Cc(),Zuj=SBA(),A7j=_BA(),j7j=DO(),e7j=RBA(),t7j=UBA(),r7j=I0(),a7j=OO(),n7j=P9(),o7j=C9(),i7j=PO(),s7j=CO(),l7j=H9(),c7j=egA(),d7j=D0(),k7j=Hc(),u7j=P0(),p7j=EgA(),m7j=ggA(),E7j=qgA(),B7j=fgA(),g7j=FgA(),h7j=KO(),q7j=DgA(),v7j=PgA(),x7j=TgA(),f7j=SgA(),G7j=RgA();XgA.exports={parse:Nuj,valid:zuj,clean:Ruj,inc:Juj,diff:Uuj,major:Xuj,minor:Vuj,patch:Wuj,prerelease:Yuj,compare:Quj,rcompare:Zuj,compareLoose:A7j,compareBuild:j7j,sort:e7j,rsort:t7j,gt:r7j,lt:a7j,eq:n7j,neq:o7j,gte:i7j,lte:s7j,cmp:l7j,coerce:c7j,Comparator:d7j,Range:k7j,satisfies:u7j,toComparators:p7j,maxSatisfying:m7j,minSatisfying:E7j,minVersion:B7j,validRange:g7j,outside:h7j,gtr:q7j,ltr:v7j,intersects:x7j,simplifyRange:f7j,subset:G7j,SemVer:Luj,re:U9.re,src:U9.src,tokens:U9.t,SEMVER_SPEC_VERSION:JgA.SEMVER_SPEC_VERSION,RELEASE_TYPES:JgA.RELEASE_TYPES,compareIdentifiers:UgA.compareIdentifiers,rcompareIdentifiers:UgA.rcompareIdentifiers}});var Io=OA((Q9,Wx)=>{(function(A,j){typeof Q9=="object"&&typeof Wx<"u"?Wx.exports=j():typeof define=="function"&&define.amd?define(j):A.moment=j()})(Q9,function(){"use strict";var A;function j(){return A.apply(null,arguments)}function e(c){A=c}function t(c){return c instanceof Array||Object.prototype.toString.call(c)==="[object Array]"}function r(c){return c!=null&&Object.prototype.toString.call(c)==="[object Object]"}function a(c,p){return Object.prototype.hasOwnProperty.call(c,p)}function n(c){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(c).length===0;var p;for(p in c)if(a(c,p))return!1;return!0}function o(c){return c===void 0}function i(c){return typeof c=="number"||Object.prototype.toString.call(c)==="[object Number]"}function s(c){return c instanceof Date||Object.prototype.toString.call(c)==="[object Date]"}function l(c,p){var g=[],x,K=c.length;for(x=0;x<K;++x)g.push(p(c[x],x));return g}function d(c,p){for(var g in p)a(p,g)&&(c[g]=p[g]);return a(p,"toString")&&(c.toString=p.toString),a(p,"valueOf")&&(c.valueOf=p.valueOf),c}function k(c,p,g,x){return RoA(c,p,g,x,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(c){return c._pf==null&&(c._pf=u()),c._pf}var I;Array.prototype.some?I=Array.prototype.some:I=function(c){var p=Object(this),g=p.length>>>0,x;for(x=0;x<g;x++)if(x in p&&c.call(this,p[x],x,p))return!0;return!1};function S(c){var p=null,g=!1,x=c._d&&!isNaN(c._d.getTime());if(x&&(p=m(c),g=I.call(p.parsedDateParts,function(K){return K!=null}),x=p.overflow<0&&!p.empty&&!p.invalidEra&&!p.invalidMonth&&!p.invalidWeekday&&!p.weekdayMismatch&&!p.nullInput&&!p.invalidFormat&&!p.userInvalidated&&(!p.meridiem||p.meridiem&&g),c._strict&&(x=x&&p.charsLeftOver===0&&p.unusedTokens.length===0&&p.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(c))c._isValid=x;else return x;return c._isValid}function f(c){var p=k(NaN);return c!=null?d(m(p),c):m(p).userInvalidated=!0,p}var v=j.momentProperties=[],P=!1;function D(c,p){var g,x,K,iA=v.length;if(o(p._isAMomentObject)||(c._isAMomentObject=p._isAMomentObject),o(p._i)||(c._i=p._i),o(p._f)||(c._f=p._f),o(p._l)||(c._l=p._l),o(p._strict)||(c._strict=p._strict),o(p._tzm)||(c._tzm=p._tzm),o(p._isUTC)||(c._isUTC=p._isUTC),o(p._offset)||(c._offset=p._offset),o(p._pf)||(c._pf=m(p)),o(p._locale)||(c._locale=p._locale),iA>0)for(g=0;g<iA;g++)x=v[g],K=p[x],o(K)||(c[x]=K);return c}function C(c){D(this,c),this._d=new Date(c._d!=null?c._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),P===!1&&(P=!0,j.updateOffset(this),P=!1)}function b(c){return c instanceof C||c!=null&&c._isAMomentObject!=null}function h(c){j.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+c)}function O(c,p){var g=!0;return d(function(){if(j.deprecationHandler!=null&&j.deprecationHandler(null,c),g){var x=[],K,iA,zA,Fe=arguments.length;for(iA=0;iA<Fe;iA++){if(K="",typeof arguments[iA]=="object"){K+=`
[`+iA+"] ";for(zA in arguments[0])a(arguments[0],zA)&&(K+=zA+": "+arguments[0][zA]+", ");K=K.slice(0,-2)}else K=arguments[iA];x.push(K)}h(c+`
Arguments: `+Array.prototype.slice.call(x).join("")+`
`+new Error().stack),g=!1}return p.apply(this,arguments)},p)}var V={};function Y(c,p){j.deprecationHandler!=null&&j.deprecationHandler(c,p),V[c]||(h(p),V[c]=!0)}j.suppressDeprecationWarnings=!1,j.deprecationHandler=null;function rA(c){return typeof Function<"u"&&c instanceof Function||Object.prototype.toString.call(c)==="[object Function]"}function yA(c){var p,g;for(g in c)a(c,g)&&(p=c[g],rA(p)?this[g]=p:this["_"+g]=p);this._config=c,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function VA(c,p){var g=d({},c),x;for(x in p)a(p,x)&&(r(c[x])&&r(p[x])?(g[x]={},d(g[x],c[x]),d(g[x],p[x])):p[x]!=null?g[x]=p[x]:delete g[x]);for(x in c)a(c,x)&&!a(p,x)&&r(c[x])&&(g[x]=d({},g[x]));return g}function dj(c){c!=null&&this.set(c)}var bA;Object.keys?bA=Object.keys:bA=function(c){var p,g=[];for(p in c)a(c,p)&&g.push(p);return g};var Mj={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function mj(c,p,g){var x=this._calendar[c]||this._calendar.sameElse;return rA(x)?x.call(p,g):x}function ae(c,p,g){var x=""+Math.abs(c),K=p-x.length,iA=c>=0;return(iA?g?"+":"":"-")+Math.pow(10,Math.max(0,K)).toString().substr(1)+x}var _j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,cj=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Qj={},Cj={};function kj(c,p,g,x){var K=x;typeof x=="string"&&(K=function(){return this[x]()}),c&&(Cj[c]=K),p&&(Cj[p[0]]=function(){return ae(K.apply(this,arguments),p[1],p[2])}),g&&(Cj[g]=function(){return this.localeData().ordinal(K.apply(this,arguments),c)})}function Bj(c){return c.match(/\[[\s\S]/)?c.replace(/^\[|\]$/g,""):c.replace(/\\/g,"")}function De(c){var p=c.match(_j),g,x;for(g=0,x=p.length;g<x;g++)Cj[p[g]]?p[g]=Cj[p[g]]:p[g]=Bj(p[g]);return function(K){var iA="",zA;for(zA=0;zA<x;zA++)iA+=rA(p[zA])?p[zA].call(K,c):p[zA];return iA}}function wt(c,p){return c.isValid()?(p=wj(p,c.localeData()),Qj[p]=Qj[p]||De(p),Qj[p](c)):c.localeData().invalidDate()}function wj(c,p){var g=5;function x(K){return p.longDateFormat(K)||K}for(cj.lastIndex=0;g>=0&&cj.test(c);)c=c.replace(cj,x),cj.lastIndex=0,g-=1;return c}var Bt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ye(c){var p=this._longDateFormat[c],g=this._longDateFormat[c.toUpperCase()];return p||!g?p:(this._longDateFormat[c]=g.match(_j).map(function(x){return x==="MMMM"||x==="MM"||x==="DD"||x==="dddd"?x.slice(1):x}).join(""),this._longDateFormat[c])}var Ie="Invalid date";function Ee(){return this._invalidDate}var er="%d",Vt=/\d{1,2}/;function yt(c){return this._ordinal.replace("%d",c)}var Sr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Dr(c,p,g,x){var K=this._relativeTime[g];return rA(K)?K(c,p,g,x):K.replace(/%d/i,c)}function yr(c,p){var g=this._relativeTime[c>0?"future":"past"];return rA(g)?g(p):g.replace(/%s/i,p)}var ra={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function at(c){return typeof c=="string"?ra[c]||ra[c.toLowerCase()]:void 0}function st(c){var p={},g,x;for(x in c)a(c,x)&&(g=at(x),g&&(p[g]=c[x]));return p}var kr={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Va(c){var p=[],g;for(g in c)a(c,g)&&p.push({unit:g,priority:kr[g]});return p.sort(function(x,K){return x.priority-K.priority}),p}var je=/\d/,oA=/\d\d/,gA=/\d{3}/,KA=/\d{4}/,xj=/[+-]?\d{6}/,gj=/\d\d?/,ve=/\d\d\d\d?/,uj=/\d\d\d\d\d\d?/,lA=/\d{1,3}/,eA=/\d{1,4}/,FA=/[+-]?\d{1,6}/,Jj=/\d+/,Er=/[+-]?\d+/,cn=/Z|[+-]\d\d:?\d\d/gi,Zo=/Z|[+-]\d\d(?::?\d\d)?/gi,Zr=/[+-]?\d+(\.\d{1,3})?/,$n=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,wn=/^[1-9]\d?/,cp=/^([1-9]\d|\d)/,vd;vd={};function ee(c,p,g){vd[c]=rA(p)?p:function(x,K){return x&&g?g:p}}function Ls(c,p){return a(vd,c)?vd[c](p._strict,p._locale):new RegExp(xc(c))}function xc(c){return Ai(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(p,g,x,K,iA){return g||x||K||iA}))}function Ai(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function In(c){return c<0?Math.ceil(c)||0:Math.floor(c)}function Wt(c){var p=+c,g=0;return p!==0&&isFinite(p)&&(g=In(p)),g}var Vk={};function Ot(c,p){var g,x=p,K;for(typeof c=="string"&&(c=[c]),i(p)&&(x=function(iA,zA){zA[p]=Wt(iA)}),K=c.length,g=0;g<K;g++)Vk[c[g]]=x}function Pl(c,p){Ot(c,function(g,x,K,iA){K._w=K._w||{},p(g,K._w,K,iA)})}function G(c,p,g){p!=null&&a(Vk,c)&&Vk[c](p,g._a,g,c)}function T(c){return c%4===0&&c%100!==0||c%400===0}var H=0,B=1,R=2,uA=3,qA=4,QA=5,fj=6,$=7,L=8;kj("Y",0,0,function(){var c=this.year();return c<=9999?ae(c,4):"+"+c}),kj(0,["YY",2],0,function(){return this.year()%100}),kj(0,["YYYY",4],0,"year"),kj(0,["YYYYY",5],0,"year"),kj(0,["YYYYYY",6,!0],0,"year"),ee("Y",Er),ee("YY",gj,oA),ee("YYYY",eA,KA),ee("YYYYY",FA,xj),ee("YYYYYY",FA,xj),Ot(["YYYYY","YYYYYY"],H),Ot("YYYY",function(c,p){p[H]=c.length===2?j.parseTwoDigitYear(c):Wt(c)}),Ot("YY",function(c,p){p[H]=j.parseTwoDigitYear(c)}),Ot("Y",function(c,p){p[H]=parseInt(c,10)});function Q(c){return T(c)?366:365}j.parseTwoDigitYear=function(c){return Wt(c)+(Wt(c)>68?1900:2e3)};var N=BA("FullYear",!0);function kA(){return T(this.year())}function BA(c,p){return function(g){return g!=null?(EA(this,c,g),j.updateOffset(this,p),this):vA(this,c)}}function vA(c,p){if(!c.isValid())return NaN;var g=c._d,x=c._isUTC;switch(p){case"Milliseconds":return x?g.getUTCMilliseconds():g.getMilliseconds();case"Seconds":return x?g.getUTCSeconds():g.getSeconds();case"Minutes":return x?g.getUTCMinutes():g.getMinutes();case"Hours":return x?g.getUTCHours():g.getHours();case"Date":return x?g.getUTCDate():g.getDate();case"Day":return x?g.getUTCDay():g.getDay();case"Month":return x?g.getUTCMonth():g.getMonth();case"FullYear":return x?g.getUTCFullYear():g.getFullYear();default:return NaN}}function EA(c,p,g){var x,K,iA,zA,Fe;if(!(!c.isValid()||isNaN(g))){switch(x=c._d,K=c._isUTC,p){case"Milliseconds":return void(K?x.setUTCMilliseconds(g):x.setMilliseconds(g));case"Seconds":return void(K?x.setUTCSeconds(g):x.setSeconds(g));case"Minutes":return void(K?x.setUTCMinutes(g):x.setMinutes(g));case"Hours":return void(K?x.setUTCHours(g):x.setHours(g));case"Date":return void(K?x.setUTCDate(g):x.setDate(g));case"FullYear":break;default:return}iA=g,zA=c.month(),Fe=c.date(),Fe=Fe===29&&zA===1&&!T(iA)?28:Fe,K?x.setUTCFullYear(iA,zA,Fe):x.setFullYear(iA,zA,Fe)}}function RA(c){return c=at(c),rA(this[c])?this[c]():this}function Ej(c,p){if(typeof c=="object"){c=st(c);var g=Va(c),x,K=g.length;for(x=0;x<K;x++)this[g[x].unit](c[g[x].unit])}else if(c=at(c),rA(this[c]))return this[c](p);return this}function Vj(c,p){return(c%p+p)%p}var UA;Array.prototype.indexOf?UA=Array.prototype.indexOf:UA=function(c){var p;for(p=0;p<this.length;++p)if(this[p]===c)return p;return-1};function Hj(c,p){if(isNaN(c)||isNaN(p))return NaN;var g=Vj(p,12);return c+=(p-g)/12,g===1?T(c)?29:28:31-g%7%2}kj("M",["MM",2],"Mo",function(){return this.month()+1}),kj("MMM",0,0,function(c){return this.localeData().monthsShort(this,c)}),kj("MMMM",0,0,function(c){return this.localeData().months(this,c)}),ee("M",gj,wn),ee("MM",gj,oA),ee("MMM",function(c,p){return p.monthsShortRegex(c)}),ee("MMMM",function(c,p){return p.monthsRegex(c)}),Ot(["M","MM"],function(c,p){p[B]=Wt(c)-1}),Ot(["MMM","MMMM"],function(c,p,g,x){var K=g._locale.monthsParse(c,x,g._strict);K!=null?p[B]=K:m(g).invalidMonth=c});var Uj="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),te="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zj=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Fj=$n,SA=$n;function MA(c,p){return c?t(this._months)?this._months[c.month()]:this._months[(this._months.isFormat||Zj).test(p)?"format":"standalone"][c.month()]:t(this._months)?this._months:this._months.standalone}function Gj(c,p){return c?t(this._monthsShort)?this._monthsShort[c.month()]:this._monthsShort[Zj.test(p)?"format":"standalone"][c.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function jj(c,p,g){var x,K,iA,zA=c.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],x=0;x<12;++x)iA=k([2e3,x]),this._shortMonthsParse[x]=this.monthsShort(iA,"").toLocaleLowerCase(),this._longMonthsParse[x]=this.months(iA,"").toLocaleLowerCase();return g?p==="MMM"?(K=UA.call(this._shortMonthsParse,zA),K!==-1?K:null):(K=UA.call(this._longMonthsParse,zA),K!==-1?K:null):p==="MMM"?(K=UA.call(this._shortMonthsParse,zA),K!==-1?K:(K=UA.call(this._longMonthsParse,zA),K!==-1?K:null)):(K=UA.call(this._longMonthsParse,zA),K!==-1?K:(K=UA.call(this._shortMonthsParse,zA),K!==-1?K:null))}function WA(c,p,g){var x,K,iA;if(this._monthsParseExact)return jj.call(this,c,p,g);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),x=0;x<12;x++){if(K=k([2e3,x]),g&&!this._longMonthsParse[x]&&(this._longMonthsParse[x]=new RegExp("^"+this.months(K,"").replace(".","")+"$","i"),this._shortMonthsParse[x]=new RegExp("^"+this.monthsShort(K,"").replace(".","")+"$","i")),!g&&!this._monthsParse[x]&&(iA="^"+this.months(K,"")+"|^"+this.monthsShort(K,""),this._monthsParse[x]=new RegExp(iA.replace(".",""),"i")),g&&p==="MMMM"&&this._longMonthsParse[x].test(c))return x;if(g&&p==="MMM"&&this._shortMonthsParse[x].test(c))return x;if(!g&&this._monthsParse[x].test(c))return x}}function aj(c,p){if(!c.isValid())return c;if(typeof p=="string"){if(/^\d+$/.test(p))p=Wt(p);else if(p=c.localeData().monthsParse(p),!i(p))return c}var g=p,x=c.date();return x=x<29?x:Math.min(x,Hj(c.year(),g)),c._isUTC?c._d.setUTCMonth(g,x):c._d.setMonth(g,x),c}function jt(c){return c!=null?(aj(this,c),j.updateOffset(this,!0),this):vA(this,"Month")}function Pt(){return Hj(this.year(),this.month())}function nt(c){return this._monthsParseExact?(a(this,"_monthsRegex")||jA.call(this),c?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Fj),this._monthsShortStrictRegex&&c?this._monthsShortStrictRegex:this._monthsShortRegex)}function Ct(c){return this._monthsParseExact?(a(this,"_monthsRegex")||jA.call(this),c?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=SA),this._monthsStrictRegex&&c?this._monthsStrictRegex:this._monthsRegex)}function jA(){function c(_t,_r){return _r.length-_t.length}var p=[],g=[],x=[],K,iA,zA,Fe;for(K=0;K<12;K++)iA=k([2e3,K]),zA=Ai(this.monthsShort(iA,"")),Fe=Ai(this.months(iA,"")),p.push(zA),g.push(Fe),x.push(Fe),x.push(zA);p.sort(c),g.sort(c),x.sort(c),this._monthsRegex=new RegExp("^("+x.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+p.join("|")+")","i")}function tr(c,p,g,x,K,iA,zA){var Fe;return c<100&&c>=0?(Fe=new Date(c+400,p,g,x,K,iA,zA),isFinite(Fe.getFullYear())&&Fe.setFullYear(c)):Fe=new Date(c,p,g,x,K,iA,zA),Fe}function ur(c){var p,g;return c<100&&c>=0?(g=Array.prototype.slice.call(arguments),g[0]=c+400,p=new Date(Date.UTC.apply(null,g)),isFinite(p.getUTCFullYear())&&p.setUTCFullYear(c)):p=new Date(Date.UTC.apply(null,arguments)),p}function or(c,p,g){var x=7+p-g,K=(7+ur(c,0,x).getUTCDay()-p)%7;return-K+x-1}function Ht(c,p,g,x,K){var iA=(7+g-x)%7,zA=or(c,x,K),Fe=1+7*(p-1)+iA+zA,_t,_r;return Fe<=0?(_t=c-1,_r=Q(_t)+Fe):Fe>Q(c)?(_t=c+1,_r=Fe-Q(c)):(_t=c,_r=Fe),{year:_t,dayOfYear:_r}}function ir(c,p,g){var x=or(c.year(),p,g),K=Math.floor((c.dayOfYear()-x-1)/7)+1,iA,zA;return K<1?(zA=c.year()-1,iA=K+Mt(zA,p,g)):K>Mt(c.year(),p,g)?(iA=K-Mt(c.year(),p,g),zA=c.year()+1):(zA=c.year(),iA=K),{week:iA,year:zA}}function Mt(c,p,g){var x=or(c,p,g),K=or(c+1,p,g);return(Q(c)-x+K)/7}kj("w",["ww",2],"wo","week"),kj("W",["WW",2],"Wo","isoWeek"),ee("w",gj,wn),ee("ww",gj,oA),ee("W",gj,wn),ee("WW",gj,oA),Pl(["w","ww","W","WW"],function(c,p,g,x){p[x.substr(0,1)]=Wt(c)});function g6(c){return ir(c,this._week.dow,this._week.doy).week}var Mr={dow:0,doy:6};function F(){return this._week.dow}function w(){return this._week.doy}function M(c){var p=this.localeData().week(this);return c==null?p:this.add((c-p)*7,"d")}function sA(c){var p=ir(this,1,4).week;return c==null?p:this.add((c-p)*7,"d")}kj("d",0,"do","day"),kj("dd",0,0,function(c){return this.localeData().weekdaysMin(this,c)}),kj("ddd",0,0,function(c){return this.localeData().weekdaysShort(this,c)}),kj("dddd",0,0,function(c){return this.localeData().weekdays(this,c)}),kj("e",0,0,"weekday"),kj("E",0,0,"isoWeekday"),ee("d",gj),ee("e",gj),ee("E",gj),ee("dd",function(c,p){return p.weekdaysMinRegex(c)}),ee("ddd",function(c,p){return p.weekdaysShortRegex(c)}),ee("dddd",function(c,p){return p.weekdaysRegex(c)}),Pl(["dd","ddd","dddd"],function(c,p,g,x){var K=g._locale.weekdaysParse(c,x,g._strict);K!=null?p.d=K:m(g).invalidWeekday=c}),Pl(["d","e","E"],function(c,p,g,x){p[x]=Wt(c)});function XA(c,p){return typeof c!="string"?c:isNaN(c)?(c=p.weekdaysParse(c),typeof c=="number"?c:null):parseInt(c,10)}function nj(c,p){return typeof c=="string"?p.weekdaysParse(c)%7||7:isNaN(c)?null:c}function Tj(c,p){return c.slice(p,7).concat(c.slice(0,p))}var Be="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ka="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Xn="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ns=$n,os=$n,xd=$n;function Jv(c,p){var g=t(this._weekdays)?this._weekdays:this._weekdays[c&&c!==!0&&this._weekdays.isFormat.test(p)?"format":"standalone"];return c===!0?Tj(g,this._week.dow):c?g[c.day()]:g}function Cl(c){return c===!0?Tj(this._weekdaysShort,this._week.dow):c?this._weekdaysShort[c.day()]:this._weekdaysShort}function Hl(c){return c===!0?Tj(this._weekdaysMin,this._week.dow):c?this._weekdaysMin[c.day()]:this._weekdaysMin}function Uv(c,p,g){var x,K,iA,zA=c.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],x=0;x<7;++x)iA=k([2e3,1]).day(x),this._minWeekdaysParse[x]=this.weekdaysMin(iA,"").toLocaleLowerCase(),this._shortWeekdaysParse[x]=this.weekdaysShort(iA,"").toLocaleLowerCase(),this._weekdaysParse[x]=this.weekdays(iA,"").toLocaleLowerCase();return g?p==="dddd"?(K=UA.call(this._weekdaysParse,zA),K!==-1?K:null):p==="ddd"?(K=UA.call(this._shortWeekdaysParse,zA),K!==-1?K:null):(K=UA.call(this._minWeekdaysParse,zA),K!==-1?K:null):p==="dddd"?(K=UA.call(this._weekdaysParse,zA),K!==-1||(K=UA.call(this._shortWeekdaysParse,zA),K!==-1)?K:(K=UA.call(this._minWeekdaysParse,zA),K!==-1?K:null)):p==="ddd"?(K=UA.call(this._shortWeekdaysParse,zA),K!==-1||(K=UA.call(this._weekdaysParse,zA),K!==-1)?K:(K=UA.call(this._minWeekdaysParse,zA),K!==-1?K:null)):(K=UA.call(this._minWeekdaysParse,zA),K!==-1||(K=UA.call(this._weekdaysParse,zA),K!==-1)?K:(K=UA.call(this._shortWeekdaysParse,zA),K!==-1?K:null))}function Wk(c,p,g){var x,K,iA;if(this._weekdaysParseExact)return Uv.call(this,c,p,g);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),x=0;x<7;x++){if(K=k([2e3,1]).day(x),g&&!this._fullWeekdaysParse[x]&&(this._fullWeekdaysParse[x]=new RegExp("^"+this.weekdays(K,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[x]=new RegExp("^"+this.weekdaysShort(K,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[x]=new RegExp("^"+this.weekdaysMin(K,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[x]||(iA="^"+this.weekdays(K,"")+"|^"+this.weekdaysShort(K,"")+"|^"+this.weekdaysMin(K,""),this._weekdaysParse[x]=new RegExp(iA.replace(".",""),"i")),g&&p==="dddd"&&this._fullWeekdaysParse[x].test(c))return x;if(g&&p==="ddd"&&this._shortWeekdaysParse[x].test(c))return x;if(g&&p==="dd"&&this._minWeekdaysParse[x].test(c))return x;if(!g&&this._weekdaysParse[x].test(c))return x}}function Kb(c){if(!this.isValid())return c!=null?this:NaN;var p=vA(this,"Day");return c!=null?(c=XA(c,this.localeData()),this.add(c-p,"d")):p}function FVA(c){if(!this.isValid())return c!=null?this:NaN;var p=(this.day()+7-this.localeData()._week.dow)%7;return c==null?p:this.add(c-p,"d")}function bVA(c){if(!this.isValid())return c!=null?this:NaN;if(c!=null){var p=nj(c,this.localeData());return this.day(this.day()%7?p:p-7)}else return this.day()||7}function yVA(c){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||d_.call(this),c?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Ns),this._weekdaysStrictRegex&&c?this._weekdaysStrictRegex:this._weekdaysRegex)}function $VA(c){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||d_.call(this),c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=os),this._weekdaysShortStrictRegex&&c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function wVA(c){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||d_.call(this),c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xd),this._weekdaysMinStrictRegex&&c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function d_(){function c(is,mp){return mp.length-is.length}var p=[],g=[],x=[],K=[],iA,zA,Fe,_t,_r;for(iA=0;iA<7;iA++)zA=k([2e3,1]).day(iA),Fe=Ai(this.weekdaysMin(zA,"")),_t=Ai(this.weekdaysShort(zA,"")),_r=Ai(this.weekdays(zA,"")),p.push(Fe),g.push(_t),x.push(_r),K.push(Fe),K.push(_t),K.push(_r);p.sort(c),g.sort(c),x.sort(c),K.sort(c),this._weekdaysRegex=new RegExp("^("+K.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+x.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+p.join("|")+")","i")}function k_(){return this.hours()%12||12}function IVA(){return this.hours()||24}kj("H",["HH",2],0,"hour"),kj("h",["hh",2],0,k_),kj("k",["kk",2],0,IVA),kj("hmm",0,0,function(){return""+k_.apply(this)+ae(this.minutes(),2)}),kj("hmmss",0,0,function(){return""+k_.apply(this)+ae(this.minutes(),2)+ae(this.seconds(),2)}),kj("Hmm",0,0,function(){return""+this.hours()+ae(this.minutes(),2)}),kj("Hmmss",0,0,function(){return""+this.hours()+ae(this.minutes(),2)+ae(this.seconds(),2)});function KoA(c,p){kj(c,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),p)})}KoA("a",!0),KoA("A",!1);function SoA(c,p){return p._meridiemParse}ee("a",SoA),ee("A",SoA),ee("H",gj,cp),ee("h",gj,wn),ee("k",gj,wn),ee("HH",gj,oA),ee("hh",gj,oA),ee("kk",gj,oA),ee("hmm",ve),ee("hmmss",uj),ee("Hmm",ve),ee("Hmmss",uj),Ot(["H","HH"],uA),Ot(["k","kk"],function(c,p,g){var x=Wt(c);p[uA]=x===24?0:x}),Ot(["a","A"],function(c,p,g){g._isPm=g._locale.isPM(c),g._meridiem=c}),Ot(["h","hh"],function(c,p,g){p[uA]=Wt(c),m(g).bigHour=!0}),Ot("hmm",function(c,p,g){var x=c.length-2;p[uA]=Wt(c.substr(0,x)),p[qA]=Wt(c.substr(x)),m(g).bigHour=!0}),Ot("hmmss",function(c,p,g){var x=c.length-4,K=c.length-2;p[uA]=Wt(c.substr(0,x)),p[qA]=Wt(c.substr(x,2)),p[QA]=Wt(c.substr(K)),m(g).bigHour=!0}),Ot("Hmm",function(c,p,g){var x=c.length-2;p[uA]=Wt(c.substr(0,x)),p[qA]=Wt(c.substr(x))}),Ot("Hmmss",function(c,p,g){var x=c.length-4,K=c.length-2;p[uA]=Wt(c.substr(0,x)),p[qA]=Wt(c.substr(x,2)),p[QA]=Wt(c.substr(K))});function DVA(c){return(c+"").toLowerCase().charAt(0)==="p"}var OVA=/[ap]\.?m?\.?/i,PVA=BA("Hours",!0);function CVA(c,p,g){return c>11?g?"pm":"PM":g?"am":"AM"}var MoA={calendar:Mj,longDateFormat:Bt,invalidDate:Ie,ordinal:er,dayOfMonthOrdinalParse:Vt,relativeTime:Sr,months:Uj,monthsShort:te,week:Mr,weekdays:Be,weekdaysMin:Xn,weekdaysShort:Ka,meridiemParse:OVA},C6={},Sb={},Mb;function HVA(c,p){var g,x=Math.min(c.length,p.length);for(g=0;g<x;g+=1)if(c[g]!==p[g])return g;return x}function _oA(c){return c&&c.toLowerCase().replace("_","-")}function TVA(c){for(var p=0,g,x,K,iA;p<c.length;){for(iA=_oA(c[p]).split("-"),g=iA.length,x=_oA(c[p+1]),x=x?x.split("-"):null;g>0;){if(K=I8(iA.slice(0,g).join("-")),K)return K;if(x&&x.length>=g&&HVA(iA,x)>=g-1)break;g--}p++}return Mb}function KVA(c){return!!(c&&c.match("^[^/\\\\]*$"))}function I8(c){var p=null,g;if(C6[c]===void 0&&typeof Wx<"u"&&Wx&&Wx.exports&&KVA(c))try{p=Mb._abbr,g=Lb,g("./locale/"+c),mE(p)}catch{C6[c]=null}return C6[c]}function mE(c,p){var g;return c&&(o(p)?g=dp(c):g=u_(c,p),g?Mb=g:typeof console<"u"&&console.warn&&console.warn("Locale "+c+" not found. Did you forget to load it?")),Mb._abbr}function u_(c,p){if(p!==null){var g,x=MoA;if(p.abbr=c,C6[c]!=null)Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),x=C6[c]._config;else if(p.parentLocale!=null)if(C6[p.parentLocale]!=null)x=C6[p.parentLocale]._config;else if(g=I8(p.parentLocale),g!=null)x=g._config;else return Sb[p.parentLocale]||(Sb[p.parentLocale]=[]),Sb[p.parentLocale].push({name:c,config:p}),null;return C6[c]=new dj(VA(x,p)),Sb[c]&&Sb[c].forEach(function(K){u_(K.name,K.config)}),mE(c),C6[c]}else return delete C6[c],null}function SVA(c,p){if(p!=null){var g,x,K=MoA;C6[c]!=null&&C6[c].parentLocale!=null?C6[c].set(VA(C6[c]._config,p)):(x=I8(c),x!=null&&(K=x._config),p=VA(K,p),x==null&&(p.abbr=c),g=new dj(p),g.parentLocale=C6[c],C6[c]=g),mE(c)}else C6[c]!=null&&(C6[c].parentLocale!=null?(C6[c]=C6[c].parentLocale,c===mE()&&mE(c)):C6[c]!=null&&delete C6[c]);return C6[c]}function dp(c){var p;if(c&&c._locale&&c._locale._abbr&&(c=c._locale._abbr),!c)return Mb;if(!t(c)){if(p=I8(c),p)return p;c=[c]}return TVA(c)}function MVA(){return bA(C6)}function p_(c){var p,g=c._a;return g&&m(c).overflow===-2&&(p=g[B]<0||g[B]>11?B:g[R]<1||g[R]>Hj(g[H],g[B])?R:g[uA]<0||g[uA]>24||g[uA]===24&&(g[qA]!==0||g[QA]!==0||g[fj]!==0)?uA:g[qA]<0||g[qA]>59?qA:g[QA]<0||g[QA]>59?QA:g[fj]<0||g[fj]>999?fj:-1,m(c)._overflowDayOfYear&&(p<H||p>R)&&(p=R),m(c)._overflowWeeks&&p===-1&&(p=$),m(c)._overflowWeekday&&p===-1&&(p=L),m(c).overflow=p),c}var _VA=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,LVA=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,NVA=/Z|[+-]\d\d(?::?\d\d)?/,D8=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],m_=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],zVA=/^\/?Date\((-?\d+)/i,RVA=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,JVA={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function LoA(c){var p,g,x=c._i,K=_VA.exec(x)||LVA.exec(x),iA,zA,Fe,_t,_r=D8.length,is=m_.length;if(K){for(m(c).iso=!0,p=0,g=_r;p<g;p++)if(D8[p][1].exec(K[1])){zA=D8[p][0],iA=D8[p][2]!==!1;break}if(zA==null){c._isValid=!1;return}if(K[3]){for(p=0,g=is;p<g;p++)if(m_[p][1].exec(K[3])){Fe=(K[2]||" ")+m_[p][0];break}if(Fe==null){c._isValid=!1;return}}if(!iA&&Fe!=null){c._isValid=!1;return}if(K[4])if(NVA.exec(K[4]))_t="Z";else{c._isValid=!1;return}c._f=zA+(Fe||"")+(_t||""),B_(c)}else c._isValid=!1}function UVA(c,p,g,x,K,iA){var zA=[XVA(c),te.indexOf(p),parseInt(g,10),parseInt(x,10),parseInt(K,10)];return iA&&zA.push(parseInt(iA,10)),zA}function XVA(c){var p=parseInt(c,10);return p<=49?2e3+p:p<=999?1900+p:p}function VVA(c){return c.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function WVA(c,p,g){if(c){var x=Ka.indexOf(c),K=new Date(p[0],p[1],p[2]).getDay();if(x!==K)return m(g).weekdayMismatch=!0,g._isValid=!1,!1}return!0}function YVA(c,p,g){if(c)return JVA[c];if(p)return 0;var x=parseInt(g,10),K=x%100,iA=(x-K)/100;return iA*60+K}function NoA(c){var p=RVA.exec(VVA(c._i)),g;if(p){if(g=UVA(p[4],p[3],p[2],p[5],p[6],p[7]),!WVA(p[1],g,c))return;c._a=g,c._tzm=YVA(p[8],p[9],p[10]),c._d=ur.apply(null,c._a),c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),m(c).rfc2822=!0}else c._isValid=!1}function QVA(c){var p=zVA.exec(c._i);if(p!==null){c._d=new Date(+p[1]);return}if(LoA(c),c._isValid===!1)delete c._isValid;else return;if(NoA(c),c._isValid===!1)delete c._isValid;else return;c._strict?c._isValid=!1:j.createFromInputFallback(c)}j.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(c){c._d=new Date(c._i+(c._useUTC?" UTC":""))});function Xv(c,p,g){return c??p??g}function ZVA(c){var p=new Date(j.now());return c._useUTC?[p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()]:[p.getFullYear(),p.getMonth(),p.getDate()]}function E_(c){var p,g,x=[],K,iA,zA;if(!c._d){for(K=ZVA(c),c._w&&c._a[R]==null&&c._a[B]==null&&AWA(c),c._dayOfYear!=null&&(zA=Xv(c._a[H],K[H]),(c._dayOfYear>Q(zA)||c._dayOfYear===0)&&(m(c)._overflowDayOfYear=!0),g=ur(zA,0,c._dayOfYear),c._a[B]=g.getUTCMonth(),c._a[R]=g.getUTCDate()),p=0;p<3&&c._a[p]==null;++p)c._a[p]=x[p]=K[p];for(;p<7;p++)c._a[p]=x[p]=c._a[p]==null?p===2?1:0:c._a[p];c._a[uA]===24&&c._a[qA]===0&&c._a[QA]===0&&c._a[fj]===0&&(c._nextDay=!0,c._a[uA]=0),c._d=(c._useUTC?ur:tr).apply(null,x),iA=c._useUTC?c._d.getUTCDay():c._d.getDay(),c._tzm!=null&&c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),c._nextDay&&(c._a[uA]=24),c._w&&typeof c._w.d<"u"&&c._w.d!==iA&&(m(c).weekdayMismatch=!0)}}function AWA(c){var p,g,x,K,iA,zA,Fe,_t,_r;p=c._w,p.GG!=null||p.W!=null||p.E!=null?(iA=1,zA=4,g=Xv(p.GG,c._a[H],ir(h6(),1,4).year),x=Xv(p.W,1),K=Xv(p.E,1),(K<1||K>7)&&(_t=!0)):(iA=c._locale._week.dow,zA=c._locale._week.doy,_r=ir(h6(),iA,zA),g=Xv(p.gg,c._a[H],_r.year),x=Xv(p.w,_r.week),p.d!=null?(K=p.d,(K<0||K>6)&&(_t=!0)):p.e!=null?(K=p.e+iA,(p.e<0||p.e>6)&&(_t=!0)):K=iA),x<1||x>Mt(g,iA,zA)?m(c)._overflowWeeks=!0:_t!=null?m(c)._overflowWeekday=!0:(Fe=Ht(g,x,K,iA,zA),c._a[H]=Fe.year,c._dayOfYear=Fe.dayOfYear)}j.ISO_8601=function(){},j.RFC_2822=function(){};function B_(c){if(c._f===j.ISO_8601){LoA(c);return}if(c._f===j.RFC_2822){NoA(c);return}c._a=[],m(c).empty=!0;var p=""+c._i,g,x,K,iA,zA,Fe=p.length,_t=0,_r,is;for(K=wj(c._f,c._locale).match(_j)||[],is=K.length,g=0;g<is;g++)iA=K[g],x=(p.match(Ls(iA,c))||[])[0],x&&(zA=p.substr(0,p.indexOf(x)),zA.length>0&&m(c).unusedInput.push(zA),p=p.slice(p.indexOf(x)+x.length),_t+=x.length),Cj[iA]?(x?m(c).empty=!1:m(c).unusedTokens.push(iA),G(iA,x,c)):c._strict&&!x&&m(c).unusedTokens.push(iA);m(c).charsLeftOver=Fe-_t,p.length>0&&m(c).unusedInput.push(p),c._a[uA]<=12&&m(c).bigHour===!0&&c._a[uA]>0&&(m(c).bigHour=void 0),m(c).parsedDateParts=c._a.slice(0),m(c).meridiem=c._meridiem,c._a[uA]=jWA(c._locale,c._a[uA],c._meridiem),_r=m(c).era,_r!==null&&(c._a[H]=c._locale.erasConvertYear(_r,c._a[H])),E_(c),p_(c)}function jWA(c,p,g){var x;return g==null?p:c.meridiemHour!=null?c.meridiemHour(p,g):(c.isPM!=null&&(x=c.isPM(g),x&&p<12&&(p+=12),!x&&p===12&&(p=0)),p)}function eWA(c){var p,g,x,K,iA,zA,Fe=!1,_t=c._f.length;if(_t===0){m(c).invalidFormat=!0,c._d=new Date(NaN);return}for(K=0;K<_t;K++)iA=0,zA=!1,p=D({},c),c._useUTC!=null&&(p._useUTC=c._useUTC),p._f=c._f[K],B_(p),S(p)&&(zA=!0),iA+=m(p).charsLeftOver,iA+=m(p).unusedTokens.length*10,m(p).score=iA,Fe?iA<x&&(x=iA,g=p):(x==null||iA<x||zA)&&(x=iA,g=p,zA&&(Fe=!0));d(c,g||p)}function tWA(c){if(!c._d){var p=st(c._i),g=p.day===void 0?p.date:p.day;c._a=l([p.year,p.month,g,p.hour,p.minute,p.second,p.millisecond],function(x){return x&&parseInt(x,10)}),E_(c)}}function rWA(c){var p=new C(p_(zoA(c)));return p._nextDay&&(p.add(1,"d"),p._nextDay=void 0),p}function zoA(c){var p=c._i,g=c._f;return c._locale=c._locale||dp(c._l),p===null||g===void 0&&p===""?f({nullInput:!0}):(typeof p=="string"&&(c._i=p=c._locale.preparse(p)),b(p)?new C(p_(p)):(s(p)?c._d=p:t(g)?eWA(c):g?B_(c):aWA(c),S(c)||(c._d=null),c))}function aWA(c){var p=c._i;o(p)?c._d=new Date(j.now()):s(p)?c._d=new Date(p.valueOf()):typeof p=="string"?QVA(c):t(p)?(c._a=l(p.slice(0),function(g){return parseInt(g,10)}),E_(c)):r(p)?tWA(c):i(p)?c._d=new Date(p):j.createFromInputFallback(c)}function RoA(c,p,g,x,K){var iA={};return(p===!0||p===!1)&&(x=p,p=void 0),(g===!0||g===!1)&&(x=g,g=void 0),(r(c)&&n(c)||t(c)&&c.length===0)&&(c=void 0),iA._isAMomentObject=!0,iA._useUTC=iA._isUTC=K,iA._l=g,iA._i=c,iA._f=p,iA._strict=x,rWA(iA)}function h6(c,p,g,x){return RoA(c,p,g,x,!1)}var nWA=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=h6.apply(null,arguments);return this.isValid()&&c.isValid()?c<this?this:c:f()}),oWA=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=h6.apply(null,arguments);return this.isValid()&&c.isValid()?c>this?this:c:f()});function JoA(c,p){var g,x;if(p.length===1&&t(p[0])&&(p=p[0]),!p.length)return h6();for(g=p[0],x=1;x<p.length;++x)(!p[x].isValid()||p[x][c](g))&&(g=p[x]);return g}function iWA(){var c=[].slice.call(arguments,0);return JoA("isBefore",c)}function sWA(){var c=[].slice.call(arguments,0);return JoA("isAfter",c)}var lWA=function(){return Date.now?Date.now():+new Date},_b=["year","quarter","month","week","day","hour","minute","second","millisecond"];function cWA(c){var p,g=!1,x,K=_b.length;for(p in c)if(a(c,p)&&!(UA.call(_b,p)!==-1&&(c[p]==null||!isNaN(c[p]))))return!1;for(x=0;x<K;++x)if(c[_b[x]]){if(g)return!1;parseFloat(c[_b[x]])!==Wt(c[_b[x]])&&(g=!0)}return!0}function dWA(){return this._isValid}function kWA(){return fd(NaN)}function O8(c){var p=st(c),g=p.year||0,x=p.quarter||0,K=p.month||0,iA=p.week||p.isoWeek||0,zA=p.day||0,Fe=p.hour||0,_t=p.minute||0,_r=p.second||0,is=p.millisecond||0;this._isValid=cWA(p),this._milliseconds=+is+_r*1e3+_t*6e4+Fe*1e3*60*60,this._days=+zA+iA*7,this._months=+K+x*3+g*12,this._data={},this._locale=dp(),this._bubble()}function P8(c){return c instanceof O8}function g_(c){return c<0?Math.round(-1*c)*-1:Math.round(c)}function uWA(c,p,g){var x=Math.min(c.length,p.length),K=Math.abs(c.length-p.length),iA=0,zA;for(zA=0;zA<x;zA++)(g&&c[zA]!==p[zA]||!g&&Wt(c[zA])!==Wt(p[zA]))&&iA++;return iA+K}function UoA(c,p){kj(c,0,0,function(){var g=this.utcOffset(),x="+";return g<0&&(g=-g,x="-"),x+ae(~~(g/60),2)+p+ae(~~g%60,2)})}UoA("Z",":"),UoA("ZZ",""),ee("Z",Zo),ee("ZZ",Zo),Ot(["Z","ZZ"],function(c,p,g){g._useUTC=!0,g._tzm=h_(Zo,c)});var pWA=/([\+\-]|\d\d)/gi;function h_(c,p){var g=(p||"").match(c),x,K,iA;return g===null?null:(x=g[g.length-1]||[],K=(x+"").match(pWA)||["-",0,0],iA=+(K[1]*60)+Wt(K[2]),iA===0?0:K[0]==="+"?iA:-iA)}function q_(c,p){var g,x;return p._isUTC?(g=p.clone(),x=(b(c)||s(c)?c.valueOf():h6(c).valueOf())-g.valueOf(),g._d.setTime(g._d.valueOf()+x),j.updateOffset(g,!1),g):h6(c).local()}function v_(c){return-Math.round(c._d.getTimezoneOffset())}j.updateOffset=function(){};function mWA(c,p,g){var x=this._offset||0,K;if(!this.isValid())return c!=null?this:NaN;if(c!=null){if(typeof c=="string"){if(c=h_(Zo,c),c===null)return this}else Math.abs(c)<16&&!g&&(c=c*60);return!this._isUTC&&p&&(K=v_(this)),this._offset=c,this._isUTC=!0,K!=null&&this.add(K,"m"),x!==c&&(!p||this._changeInProgress?YoA(this,fd(c-x,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,j.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?x:v_(this)}function EWA(c,p){return c!=null?(typeof c!="string"&&(c=-c),this.utcOffset(c,p),this):-this.utcOffset()}function BWA(c){return this.utcOffset(0,c)}function gWA(c){return this._isUTC&&(this.utcOffset(0,c),this._isUTC=!1,c&&this.subtract(v_(this),"m")),this}function hWA(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var c=h_(cn,this._i);c!=null?this.utcOffset(c):this.utcOffset(0,!0)}return this}function qWA(c){return this.isValid()?(c=c?h6(c).utcOffset():0,(this.utcOffset()-c)%60===0):!1}function vWA(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xWA(){if(!o(this._isDSTShifted))return this._isDSTShifted;var c={},p;return D(c,this),c=zoA(c),c._a?(p=c._isUTC?k(c._a):h6(c._a),this._isDSTShifted=this.isValid()&&uWA(c._a,p.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function fWA(){return this.isValid()?!this._isUTC:!1}function GWA(){return this.isValid()?this._isUTC:!1}function XoA(){return this.isValid()?this._isUTC&&this._offset===0:!1}var FWA=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,bWA=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function fd(c,p){var g=c,x=null,K,iA,zA;return P8(c)?g={ms:c._milliseconds,d:c._days,M:c._months}:i(c)||!isNaN(+c)?(g={},p?g[p]=+c:g.milliseconds=+c):(x=FWA.exec(c))?(K=x[1]==="-"?-1:1,g={y:0,d:Wt(x[R])*K,h:Wt(x[uA])*K,m:Wt(x[qA])*K,s:Wt(x[QA])*K,ms:Wt(g_(x[fj]*1e3))*K}):(x=bWA.exec(c))?(K=x[1]==="-"?-1:1,g={y:Sg(x[2],K),M:Sg(x[3],K),w:Sg(x[4],K),d:Sg(x[5],K),h:Sg(x[6],K),m:Sg(x[7],K),s:Sg(x[8],K)}):g==null?g={}:typeof g=="object"&&("from"in g||"to"in g)&&(zA=yWA(h6(g.from),h6(g.to)),g={},g.ms=zA.milliseconds,g.M=zA.months),iA=new O8(g),P8(c)&&a(c,"_locale")&&(iA._locale=c._locale),P8(c)&&a(c,"_isValid")&&(iA._isValid=c._isValid),iA}fd.fn=O8.prototype,fd.invalid=kWA;function Sg(c,p){var g=c&&parseFloat(c.replace(",","."));return(isNaN(g)?0:g)*p}function VoA(c,p){var g={};return g.months=p.month()-c.month()+(p.year()-c.year())*12,c.clone().add(g.months,"M").isAfter(p)&&--g.months,g.milliseconds=+p-+c.clone().add(g.months,"M"),g}function yWA(c,p){var g;return c.isValid()&&p.isValid()?(p=q_(p,c),c.isBefore(p)?g=VoA(c,p):(g=VoA(p,c),g.milliseconds=-g.milliseconds,g.months=-g.months),g):{milliseconds:0,months:0}}function WoA(c,p){return function(g,x){var K,iA;return x!==null&&!isNaN(+x)&&(Y(p,"moment()."+p+"(period, number) is deprecated. Please use moment()."+p+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),iA=g,g=x,x=iA),K=fd(g,x),YoA(this,K,c),this}}function YoA(c,p,g,x){var K=p._milliseconds,iA=g_(p._days),zA=g_(p._months);c.isValid()&&(x=x??!0,zA&&aj(c,vA(c,"Month")+zA*g),iA&&EA(c,"Date",vA(c,"Date")+iA*g),K&&c._d.setTime(c._d.valueOf()+K*g),x&&j.updateOffset(c,iA||zA))}var $WA=WoA(1,"add"),wWA=WoA(-1,"subtract");function QoA(c){return typeof c=="string"||c instanceof String}function IWA(c){return b(c)||s(c)||QoA(c)||i(c)||OWA(c)||DWA(c)||c===null||c===void 0}function DWA(c){var p=r(c)&&!n(c),g=!1,x=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],K,iA,zA=x.length;for(K=0;K<zA;K+=1)iA=x[K],g=g||a(c,iA);return p&&g}function OWA(c){var p=t(c),g=!1;return p&&(g=c.filter(function(x){return!i(x)&&QoA(c)}).length===0),p&&g}function PWA(c){var p=r(c)&&!n(c),g=!1,x=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],K,iA;for(K=0;K<x.length;K+=1)iA=x[K],g=g||a(c,iA);return p&&g}function CWA(c,p){var g=c.diff(p,"days",!0);return g<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"}function HWA(c,p){arguments.length===1&&(arguments[0]?IWA(arguments[0])?(c=arguments[0],p=void 0):PWA(arguments[0])&&(p=arguments[0],c=void 0):(c=void 0,p=void 0));var g=c||h6(),x=q_(g,this).startOf("day"),K=j.calendarFormat(this,x)||"sameElse",iA=p&&(rA(p[K])?p[K].call(this,g):p[K]);return this.format(iA||this.localeData().calendar(K,this,h6(g)))}function TWA(){return new C(this)}function KWA(c,p){var g=b(c)?c:h6(c);return this.isValid()&&g.isValid()?(p=at(p)||"millisecond",p==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(p).valueOf()):!1}function SWA(c,p){var g=b(c)?c:h6(c);return this.isValid()&&g.isValid()?(p=at(p)||"millisecond",p==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(p).valueOf()<g.valueOf()):!1}function MWA(c,p,g,x){var K=b(c)?c:h6(c),iA=b(p)?p:h6(p);return this.isValid()&&K.isValid()&&iA.isValid()?(x=x||"()",(x[0]==="("?this.isAfter(K,g):!this.isBefore(K,g))&&(x[1]===")"?this.isBefore(iA,g):!this.isAfter(iA,g))):!1}function _WA(c,p){var g=b(c)?c:h6(c),x;return this.isValid()&&g.isValid()?(p=at(p)||"millisecond",p==="millisecond"?this.valueOf()===g.valueOf():(x=g.valueOf(),this.clone().startOf(p).valueOf()<=x&&x<=this.clone().endOf(p).valueOf())):!1}function LWA(c,p){return this.isSame(c,p)||this.isAfter(c,p)}function NWA(c,p){return this.isSame(c,p)||this.isBefore(c,p)}function zWA(c,p,g){var x,K,iA;if(!this.isValid())return NaN;if(x=q_(c,this),!x.isValid())return NaN;switch(K=(x.utcOffset()-this.utcOffset())*6e4,p=at(p),p){case"year":iA=C8(this,x)/12;break;case"month":iA=C8(this,x);break;case"quarter":iA=C8(this,x)/3;break;case"second":iA=(this-x)/1e3;break;case"minute":iA=(this-x)/6e4;break;case"hour":iA=(this-x)/36e5;break;case"day":iA=(this-x-K)/864e5;break;case"week":iA=(this-x-K)/6048e5;break;default:iA=this-x}return g?iA:In(iA)}function C8(c,p){if(c.date()<p.date())return-C8(p,c);var g=(p.year()-c.year())*12+(p.month()-c.month()),x=c.clone().add(g,"months"),K,iA;return p-x<0?(K=c.clone().add(g-1,"months"),iA=(p-x)/(x-K)):(K=c.clone().add(g+1,"months"),iA=(p-x)/(K-x)),-(g+iA)||0}j.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",j.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function RWA(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function JWA(c){if(!this.isValid())return null;var p=c!==!0,g=p?this.clone().utc():this;return g.year()<0||g.year()>9999?wt(g,p?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):rA(Date.prototype.toISOString)?p?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",wt(g,"Z")):wt(g,p?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function UWA(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var c="moment",p="",g,x,K,iA;return this.isLocal()||(c=this.utcOffset()===0?"moment.utc":"moment.parseZone",p="Z"),g="["+c+'("]',x=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",K="-MM-DD[T]HH:mm:ss.SSS",iA=p+'[")]',this.format(g+x+K+iA)}function XWA(c){c||(c=this.isUtc()?j.defaultFormatUtc:j.defaultFormat);var p=wt(this,c);return this.localeData().postformat(p)}function VWA(c,p){return this.isValid()&&(b(c)&&c.isValid()||h6(c).isValid())?fd({to:this,from:c}).locale(this.locale()).humanize(!p):this.localeData().invalidDate()}function WWA(c){return this.from(h6(),c)}function YWA(c,p){return this.isValid()&&(b(c)&&c.isValid()||h6(c).isValid())?fd({from:this,to:c}).locale(this.locale()).humanize(!p):this.localeData().invalidDate()}function QWA(c){return this.to(h6(),c)}function ZoA(c){var p;return c===void 0?this._locale._abbr:(p=dp(c),p!=null&&(this._locale=p),this)}var AiA=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(c){return c===void 0?this.localeData():this.locale(c)});function jiA(){return this._locale}var H8=1e3,Vv=60*H8,T8=60*Vv,eiA=(365*400+97)*24*T8;function Wv(c,p){return(c%p+p)%p}function tiA(c,p,g){return c<100&&c>=0?new Date(c+400,p,g)-eiA:new Date(c,p,g).valueOf()}function riA(c,p,g){return c<100&&c>=0?Date.UTC(c+400,p,g)-eiA:Date.UTC(c,p,g)}function ZWA(c){var p,g;if(c=at(c),c===void 0||c==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?riA:tiA,c){case"year":p=g(this.year(),0,1);break;case"quarter":p=g(this.year(),this.month()-this.month()%3,1);break;case"month":p=g(this.year(),this.month(),1);break;case"week":p=g(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":p=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":p=g(this.year(),this.month(),this.date());break;case"hour":p=this._d.valueOf(),p-=Wv(p+(this._isUTC?0:this.utcOffset()*Vv),T8);break;case"minute":p=this._d.valueOf(),p-=Wv(p,Vv);break;case"second":p=this._d.valueOf(),p-=Wv(p,H8);break}return this._d.setTime(p),j.updateOffset(this,!0),this}function AYA(c){var p,g;if(c=at(c),c===void 0||c==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?riA:tiA,c){case"year":p=g(this.year()+1,0,1)-1;break;case"quarter":p=g(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":p=g(this.year(),this.month()+1,1)-1;break;case"week":p=g(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":p=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":p=g(this.year(),this.month(),this.date()+1)-1;break;case"hour":p=this._d.valueOf(),p+=T8-Wv(p+(this._isUTC?0:this.utcOffset()*Vv),T8)-1;break;case"minute":p=this._d.valueOf(),p+=Vv-Wv(p,Vv)-1;break;case"second":p=this._d.valueOf(),p+=H8-Wv(p,H8)-1;break}return this._d.setTime(p),j.updateOffset(this,!0),this}function jYA(){return this._d.valueOf()-(this._offset||0)*6e4}function eYA(){return Math.floor(this.valueOf()/1e3)}function tYA(){return new Date(this.valueOf())}function rYA(){var c=this;return[c.year(),c.month(),c.date(),c.hour(),c.minute(),c.second(),c.millisecond()]}function aYA(){var c=this;return{years:c.year(),months:c.month(),date:c.date(),hours:c.hours(),minutes:c.minutes(),seconds:c.seconds(),milliseconds:c.milliseconds()}}function nYA(){return this.isValid()?this.toISOString():null}function oYA(){return S(this)}function iYA(){return d({},m(this))}function sYA(){return m(this).overflow}function lYA(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}kj("N",0,0,"eraAbbr"),kj("NN",0,0,"eraAbbr"),kj("NNN",0,0,"eraAbbr"),kj("NNNN",0,0,"eraName"),kj("NNNNN",0,0,"eraNarrow"),kj("y",["y",1],"yo","eraYear"),kj("y",["yy",2],0,"eraYear"),kj("y",["yyy",3],0,"eraYear"),kj("y",["yyyy",4],0,"eraYear"),ee("N",x_),ee("NN",x_),ee("NNN",x_),ee("NNNN",qYA),ee("NNNNN",vYA),Ot(["N","NN","NNN","NNNN","NNNNN"],function(c,p,g,x){var K=g._locale.erasParse(c,x,g._strict);K?m(g).era=K:m(g).invalidEra=c}),ee("y",Jj),ee("yy",Jj),ee("yyy",Jj),ee("yyyy",Jj),ee("yo",xYA),Ot(["y","yy","yyy","yyyy"],H),Ot(["yo"],function(c,p,g,x){var K;g._locale._eraYearOrdinalRegex&&(K=c.match(g._locale._eraYearOrdinalRegex)),g._locale.eraYearOrdinalParse?p[H]=g._locale.eraYearOrdinalParse(c,K):p[H]=parseInt(c,10)});function cYA(c,p){var g,x,K,iA=this._eras||dp("en")._eras;for(g=0,x=iA.length;g<x;++g){switch(typeof iA[g].since){case"string":K=j(iA[g].since).startOf("day"),iA[g].since=K.valueOf();break}switch(typeof iA[g].until){case"undefined":iA[g].until=1/0;break;case"string":K=j(iA[g].until).startOf("day").valueOf(),iA[g].until=K.valueOf();break}}return iA}function dYA(c,p,g){var x,K,iA=this.eras(),zA,Fe,_t;for(c=c.toUpperCase(),x=0,K=iA.length;x<K;++x)if(zA=iA[x].name.toUpperCase(),Fe=iA[x].abbr.toUpperCase(),_t=iA[x].narrow.toUpperCase(),g)switch(p){case"N":case"NN":case"NNN":if(Fe===c)return iA[x];break;case"NNNN":if(zA===c)return iA[x];break;case"NNNNN":if(_t===c)return iA[x];break}else if([zA,Fe,_t].indexOf(c)>=0)return iA[x]}function kYA(c,p){var g=c.since<=c.until?1:-1;return p===void 0?j(c.since).year():j(c.since).year()+(p-c.offset)*g}function uYA(){var c,p,g,x=this.localeData().eras();for(c=0,p=x.length;c<p;++c)if(g=this.clone().startOf("day").valueOf(),x[c].since<=g&&g<=x[c].until||x[c].until<=g&&g<=x[c].since)return x[c].name;return""}function pYA(){var c,p,g,x=this.localeData().eras();for(c=0,p=x.length;c<p;++c)if(g=this.clone().startOf("day").valueOf(),x[c].since<=g&&g<=x[c].until||x[c].until<=g&&g<=x[c].since)return x[c].narrow;return""}function mYA(){var c,p,g,x=this.localeData().eras();for(c=0,p=x.length;c<p;++c)if(g=this.clone().startOf("day").valueOf(),x[c].since<=g&&g<=x[c].until||x[c].until<=g&&g<=x[c].since)return x[c].abbr;return""}function EYA(){var c,p,g,x,K=this.localeData().eras();for(c=0,p=K.length;c<p;++c)if(g=K[c].since<=K[c].until?1:-1,x=this.clone().startOf("day").valueOf(),K[c].since<=x&&x<=K[c].until||K[c].until<=x&&x<=K[c].since)return(this.year()-j(K[c].since).year())*g+K[c].offset;return this.year()}function BYA(c){return a(this,"_erasNameRegex")||f_.call(this),c?this._erasNameRegex:this._erasRegex}function gYA(c){return a(this,"_erasAbbrRegex")||f_.call(this),c?this._erasAbbrRegex:this._erasRegex}function hYA(c){return a(this,"_erasNarrowRegex")||f_.call(this),c?this._erasNarrowRegex:this._erasRegex}function x_(c,p){return p.erasAbbrRegex(c)}function qYA(c,p){return p.erasNameRegex(c)}function vYA(c,p){return p.erasNarrowRegex(c)}function xYA(c,p){return p._eraYearOrdinalRegex||Jj}function f_(){var c=[],p=[],g=[],x=[],K,iA,zA,Fe,_t,_r=this.eras();for(K=0,iA=_r.length;K<iA;++K)zA=Ai(_r[K].name),Fe=Ai(_r[K].abbr),_t=Ai(_r[K].narrow),p.push(zA),c.push(Fe),g.push(_t),x.push(zA),x.push(Fe),x.push(_t);this._erasRegex=new RegExp("^("+x.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+p.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+g.join("|")+")","i")}kj(0,["gg",2],0,function(){return this.weekYear()%100}),kj(0,["GG",2],0,function(){return this.isoWeekYear()%100});function K8(c,p){kj(0,[c,c.length],0,p)}K8("gggg","weekYear"),K8("ggggg","weekYear"),K8("GGGG","isoWeekYear"),K8("GGGGG","isoWeekYear"),ee("G",Er),ee("g",Er),ee("GG",gj,oA),ee("gg",gj,oA),ee("GGGG",eA,KA),ee("gggg",eA,KA),ee("GGGGG",FA,xj),ee("ggggg",FA,xj),Pl(["gggg","ggggg","GGGG","GGGGG"],function(c,p,g,x){p[x.substr(0,2)]=Wt(c)}),Pl(["gg","GG"],function(c,p,g,x){p[x]=j.parseTwoDigitYear(c)});function fYA(c){return aiA.call(this,c,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function GYA(c){return aiA.call(this,c,this.isoWeek(),this.isoWeekday(),1,4)}function FYA(){return Mt(this.year(),1,4)}function bYA(){return Mt(this.isoWeekYear(),1,4)}function yYA(){var c=this.localeData()._week;return Mt(this.year(),c.dow,c.doy)}function $YA(){var c=this.localeData()._week;return Mt(this.weekYear(),c.dow,c.doy)}function aiA(c,p,g,x,K){var iA;return c==null?ir(this,x,K).year:(iA=Mt(c,x,K),p>iA&&(p=iA),wYA.call(this,c,p,g,x,K))}function wYA(c,p,g,x,K){var iA=Ht(c,p,g,x,K),zA=ur(iA.year,0,iA.dayOfYear);return this.year(zA.getUTCFullYear()),this.month(zA.getUTCMonth()),this.date(zA.getUTCDate()),this}kj("Q",0,"Qo","quarter"),ee("Q",je),Ot("Q",function(c,p){p[B]=(Wt(c)-1)*3});function IYA(c){return c==null?Math.ceil((this.month()+1)/3):this.month((c-1)*3+this.month()%3)}kj("D",["DD",2],"Do","date"),ee("D",gj,wn),ee("DD",gj,oA),ee("Do",function(c,p){return c?p._dayOfMonthOrdinalParse||p._ordinalParse:p._dayOfMonthOrdinalParseLenient}),Ot(["D","DD"],R),Ot("Do",function(c,p){p[R]=Wt(c.match(gj)[0])});var niA=BA("Date",!0);kj("DDD",["DDDD",3],"DDDo","dayOfYear"),ee("DDD",lA),ee("DDDD",gA),Ot(["DDD","DDDD"],function(c,p,g){g._dayOfYear=Wt(c)});function DYA(c){var p=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return c==null?p:this.add(c-p,"d")}kj("m",["mm",2],0,"minute"),ee("m",gj,cp),ee("mm",gj,oA),Ot(["m","mm"],qA);var OYA=BA("Minutes",!1);kj("s",["ss",2],0,"second"),ee("s",gj,cp),ee("ss",gj,oA),Ot(["s","ss"],QA);var PYA=BA("Seconds",!1);kj("S",0,0,function(){return~~(this.millisecond()/100)}),kj(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),kj(0,["SSS",3],0,"millisecond"),kj(0,["SSSS",4],0,function(){return this.millisecond()*10}),kj(0,["SSSSS",5],0,function(){return this.millisecond()*100}),kj(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),kj(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),kj(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),kj(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),ee("S",lA,je),ee("SS",lA,oA),ee("SSS",lA,gA);var EE,oiA;for(EE="SSSS";EE.length<=9;EE+="S")ee(EE,Jj);function CYA(c,p){p[fj]=Wt(("0."+c)*1e3)}for(EE="S";EE.length<=9;EE+="S")Ot(EE,CYA);oiA=BA("Milliseconds",!1),kj("z",0,0,"zoneAbbr"),kj("zz",0,0,"zoneName");function HYA(){return this._isUTC?"UTC":""}function TYA(){return this._isUTC?"Coordinated Universal Time":""}var Lj=C.prototype;Lj.add=$WA,Lj.calendar=HWA,Lj.clone=TWA,Lj.diff=zWA,Lj.endOf=AYA,Lj.format=XWA,Lj.from=VWA,Lj.fromNow=WWA,Lj.to=YWA,Lj.toNow=QWA,Lj.get=RA,Lj.invalidAt=sYA,Lj.isAfter=KWA,Lj.isBefore=SWA,Lj.isBetween=MWA,Lj.isSame=_WA,Lj.isSameOrAfter=LWA,Lj.isSameOrBefore=NWA,Lj.isValid=oYA,Lj.lang=AiA,Lj.locale=ZoA,Lj.localeData=jiA,Lj.max=oWA,Lj.min=nWA,Lj.parsingFlags=iYA,Lj.set=Ej,Lj.startOf=ZWA,Lj.subtract=wWA,Lj.toArray=rYA,Lj.toObject=aYA,Lj.toDate=tYA,Lj.toISOString=JWA,Lj.inspect=UWA,typeof Symbol<"u"&&Symbol.for!=null&&(Lj[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Lj.toJSON=nYA,Lj.toString=RWA,Lj.unix=eYA,Lj.valueOf=jYA,Lj.creationData=lYA,Lj.eraName=uYA,Lj.eraNarrow=pYA,Lj.eraAbbr=mYA,Lj.eraYear=EYA,Lj.year=N,Lj.isLeapYear=kA,Lj.weekYear=fYA,Lj.isoWeekYear=GYA,Lj.quarter=Lj.quarters=IYA,Lj.month=jt,Lj.daysInMonth=Pt,Lj.week=Lj.weeks=M,Lj.isoWeek=Lj.isoWeeks=sA,Lj.weeksInYear=yYA,Lj.weeksInWeekYear=$YA,Lj.isoWeeksInYear=FYA,Lj.isoWeeksInISOWeekYear=bYA,Lj.date=niA,Lj.day=Lj.days=Kb,Lj.weekday=FVA,Lj.isoWeekday=bVA,Lj.dayOfYear=DYA,Lj.hour=Lj.hours=PVA,Lj.minute=Lj.minutes=OYA,Lj.second=Lj.seconds=PYA,Lj.millisecond=Lj.milliseconds=oiA,Lj.utcOffset=mWA,Lj.utc=BWA,Lj.local=gWA,Lj.parseZone=hWA,Lj.hasAlignedHourOffset=qWA,Lj.isDST=vWA,Lj.isLocal=fWA,Lj.isUtcOffset=GWA,Lj.isUtc=XoA,Lj.isUTC=XoA,Lj.zoneAbbr=HYA,Lj.zoneName=TYA,Lj.dates=O("dates accessor is deprecated. Use date instead.",niA),Lj.months=O("months accessor is deprecated. Use month instead",jt),Lj.years=O("years accessor is deprecated. Use year instead",N),Lj.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",EWA),Lj.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xWA);function KYA(c){return h6(c*1e3)}function SYA(){return h6.apply(null,arguments).parseZone()}function iiA(c){return c}var aa=dj.prototype;aa.calendar=mj,aa.longDateFormat=Ye,aa.invalidDate=Ee,aa.ordinal=yt,aa.preparse=iiA,aa.postformat=iiA,aa.relativeTime=Dr,aa.pastFuture=yr,aa.set=yA,aa.eras=cYA,aa.erasParse=dYA,aa.erasConvertYear=kYA,aa.erasAbbrRegex=gYA,aa.erasNameRegex=BYA,aa.erasNarrowRegex=hYA,aa.months=MA,aa.monthsShort=Gj,aa.monthsParse=WA,aa.monthsRegex=Ct,aa.monthsShortRegex=nt,aa.week=g6,aa.firstDayOfYear=w,aa.firstDayOfWeek=F,aa.weekdays=Jv,aa.weekdaysMin=Hl,aa.weekdaysShort=Cl,aa.weekdaysParse=Wk,aa.weekdaysRegex=yVA,aa.weekdaysShortRegex=$VA,aa.weekdaysMinRegex=wVA,aa.isPM=DVA,aa.meridiem=CVA;function S8(c,p,g,x){var K=dp(),iA=k().set(x,p);return K[g](iA,c)}function siA(c,p,g){if(i(c)&&(p=c,c=void 0),c=c||"",p!=null)return S8(c,p,g,"month");var x,K=[];for(x=0;x<12;x++)K[x]=S8(c,x,g,"month");return K}function G_(c,p,g,x){typeof c=="boolean"?(i(p)&&(g=p,p=void 0),p=p||""):(p=c,g=p,c=!1,i(p)&&(g=p,p=void 0),p=p||"");var K=dp(),iA=c?K._week.dow:0,zA,Fe=[];if(g!=null)return S8(p,(g+iA)%7,x,"day");for(zA=0;zA<7;zA++)Fe[zA]=S8(p,(zA+iA)%7,x,"day");return Fe}function MYA(c,p){return siA(c,p,"months")}function _YA(c,p){return siA(c,p,"monthsShort")}function LYA(c,p,g){return G_(c,p,g,"weekdays")}function NYA(c,p,g){return G_(c,p,g,"weekdaysShort")}function zYA(c,p,g){return G_(c,p,g,"weekdaysMin")}mE("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(c){var p=c%10,g=Wt(c%100/10)===1?"th":p===1?"st":p===2?"nd":p===3?"rd":"th";return c+g}}),j.lang=O("moment.lang is deprecated. Use moment.locale instead.",mE),j.langData=O("moment.langData is deprecated. Use moment.localeData instead.",dp);var kp=Math.abs;function RYA(){var c=this._data;return this._milliseconds=kp(this._milliseconds),this._days=kp(this._days),this._months=kp(this._months),c.milliseconds=kp(c.milliseconds),c.seconds=kp(c.seconds),c.minutes=kp(c.minutes),c.hours=kp(c.hours),c.months=kp(c.months),c.years=kp(c.years),this}function liA(c,p,g,x){var K=fd(p,g);return c._milliseconds+=x*K._milliseconds,c._days+=x*K._days,c._months+=x*K._months,c._bubble()}function JYA(c,p){return liA(this,c,p,1)}function UYA(c,p){return liA(this,c,p,-1)}function ciA(c){return c<0?Math.floor(c):Math.ceil(c)}function XYA(){var c=this._milliseconds,p=this._days,g=this._months,x=this._data,K,iA,zA,Fe,_t;return c>=0&&p>=0&&g>=0||c<=0&&p<=0&&g<=0||(c+=ciA(F_(g)+p)*864e5,p=0,g=0),x.milliseconds=c%1e3,K=In(c/1e3),x.seconds=K%60,iA=In(K/60),x.minutes=iA%60,zA=In(iA/60),x.hours=zA%24,p+=In(zA/24),_t=In(diA(p)),g+=_t,p-=ciA(F_(_t)),Fe=In(g/12),g%=12,x.days=p,x.months=g,x.years=Fe,this}function diA(c){return c*4800/146097}function F_(c){return c*146097/4800}function VYA(c){if(!this.isValid())return NaN;var p,g,x=this._milliseconds;if(c=at(c),c==="month"||c==="quarter"||c==="year")switch(p=this._days+x/864e5,g=this._months+diA(p),c){case"month":return g;case"quarter":return g/3;case"year":return g/12}else switch(p=this._days+Math.round(F_(this._months)),c){case"week":return p/7+x/6048e5;case"day":return p+x/864e5;case"hour":return p*24+x/36e5;case"minute":return p*1440+x/6e4;case"second":return p*86400+x/1e3;case"millisecond":return Math.floor(p*864e5)+x;default:throw new Error("Unknown unit "+c)}}function up(c){return function(){return this.as(c)}}var kiA=up("ms"),WYA=up("s"),YYA=up("m"),QYA=up("h"),ZYA=up("d"),AQA=up("w"),jQA=up("M"),eQA=up("Q"),tQA=up("y"),rQA=kiA;function aQA(){return fd(this)}function nQA(c){return c=at(c),this.isValid()?this[c+"s"]():NaN}function Mg(c){return function(){return this.isValid()?this._data[c]:NaN}}var oQA=Mg("milliseconds"),iQA=Mg("seconds"),sQA=Mg("minutes"),lQA=Mg("hours"),cQA=Mg("days"),dQA=Mg("months"),kQA=Mg("years");function uQA(){return In(this.days()/7)}var pp=Math.round,Yv={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function pQA(c,p,g,x,K){return K.relativeTime(p||1,!!g,c,x)}function mQA(c,p,g,x){var K=fd(c).abs(),iA=pp(K.as("s")),zA=pp(K.as("m")),Fe=pp(K.as("h")),_t=pp(K.as("d")),_r=pp(K.as("M")),is=pp(K.as("w")),mp=pp(K.as("y")),BE=iA<=g.ss&&["s",iA]||iA<g.s&&["ss",iA]||zA<=1&&["m"]||zA<g.m&&["mm",zA]||Fe<=1&&["h"]||Fe<g.h&&["hh",Fe]||_t<=1&&["d"]||_t<g.d&&["dd",_t];return g.w!=null&&(BE=BE||is<=1&&["w"]||is<g.w&&["ww",is]),BE=BE||_r<=1&&["M"]||_r<g.M&&["MM",_r]||mp<=1&&["y"]||["yy",mp],BE[2]=p,BE[3]=+c>0,BE[4]=x,pQA.apply(null,BE)}function EQA(c){return c===void 0?pp:typeof c=="function"?(pp=c,!0):!1}function BQA(c,p){return Yv[c]===void 0?!1:p===void 0?Yv[c]:(Yv[c]=p,c==="s"&&(Yv.ss=p-1),!0)}function gQA(c,p){if(!this.isValid())return this.localeData().invalidDate();var g=!1,x=Yv,K,iA;return typeof c=="object"&&(p=c,c=!1),typeof c=="boolean"&&(g=c),typeof p=="object"&&(x=Object.assign({},Yv,p),p.s!=null&&p.ss==null&&(x.ss=p.s-1)),K=this.localeData(),iA=mQA(this,!g,x,K),g&&(iA=K.pastFuture(+this,iA)),K.postformat(iA)}var b_=Math.abs;function Qv(c){return(c>0)-(c<0)||+c}function M8(){if(!this.isValid())return this.localeData().invalidDate();var c=b_(this._milliseconds)/1e3,p=b_(this._days),g=b_(this._months),x,K,iA,zA,Fe=this.asSeconds(),_t,_r,is,mp;return Fe?(x=In(c/60),K=In(x/60),c%=60,x%=60,iA=In(g/12),g%=12,zA=c?c.toFixed(3).replace(/\.?0+$/,""):"",_t=Fe<0?"-":"",_r=Qv(this._months)!==Qv(Fe)?"-":"",is=Qv(this._days)!==Qv(Fe)?"-":"",mp=Qv(this._milliseconds)!==Qv(Fe)?"-":"",_t+"P"+(iA?_r+iA+"Y":"")+(g?_r+g+"M":"")+(p?is+p+"D":"")+(K||x||c?"T":"")+(K?mp+K+"H":"")+(x?mp+x+"M":"")+(c?mp+zA+"S":"")):"P0D"}var Jr=O8.prototype;Jr.isValid=dWA,Jr.abs=RYA,Jr.add=JYA,Jr.subtract=UYA,Jr.as=VYA,Jr.asMilliseconds=kiA,Jr.asSeconds=WYA,Jr.asMinutes=YYA,Jr.asHours=QYA,Jr.asDays=ZYA,Jr.asWeeks=AQA,Jr.asMonths=jQA,Jr.asQuarters=eQA,Jr.asYears=tQA,Jr.valueOf=rQA,Jr._bubble=XYA,Jr.clone=aQA,Jr.get=nQA,Jr.milliseconds=oQA,Jr.seconds=iQA,Jr.minutes=sQA,Jr.hours=lQA,Jr.days=cQA,Jr.weeks=uQA,Jr.months=dQA,Jr.years=kQA,Jr.humanize=gQA,Jr.toISOString=M8,Jr.toString=M8,Jr.toJSON=M8,Jr.locale=ZoA,Jr.localeData=jiA,Jr.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",M8),Jr.lang=AiA,kj("X",0,0,"unix"),kj("x",0,0,"valueOf"),ee("x",Er),ee("X",Zr),Ot("X",function(c,p,g){g._d=new Date(parseFloat(c)*1e3)}),Ot("x",function(c,p,g){g._d=new Date(Wt(c))});return j.version="2.30.1",e(h6),j.fn=Lj,j.min=iWA,j.max=sWA,j.now=lWA,j.utc=k,j.unix=KYA,j.months=MYA,j.isDate=s,j.locale=mE,j.invalid=f,j.duration=fd,j.isMoment=b,j.weekdays=LYA,j.parseZone=SYA,j.localeData=dp,j.isDuration=P8,j.monthsShort=_YA,j.weekdaysMin=zYA,j.defineLocale=u_,j.updateLocale=SVA,j.locales=MVA,j.weekdaysShort=NYA,j.normalizeUnits=at,j.relativeTimeRounding=EQA,j.relativeTimeThreshold=BQA,j.calendarFormat=CWA,j.prototype=Lj,j.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},j})});var so=OA((BFe,Yx)=>{"use strict";var z={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(A){this.toString=function(){return"CORRUPT: "+this.message},this.message=A},invalid:function(A){this.toString=function(){return"INVALID: "+this.message},this.message=A},bug:function(A){this.toString=function(){return"BUG: "+this.message},this.message=A},notReady:function(A){this.toString=function(){return"NOT READY: "+this.message},this.message=A}}};typeof Yx<"u"&&Yx.exports&&(Yx.exports=z);typeof define=="function"&&define([],function(){return z});z.bn=function(A){this.initWith(A)};z.bn.prototype={radix:24,maxMul:8,l:z.bn,copy:function(){return new this.l(this)},initWith:function(A){var j=0,e;switch(typeof A){case"object":this.limbs=A.limbs.slice(0);break;case"number":this.limbs=[A],this.normalize();break;case"string":for(A=A.replace(/^0x/,""),this.limbs=[],e=this.radix/4,j=0;j<A.length;j+=e)this.limbs.push(parseInt(A.substring(Math.max(A.length-j-e,0),A.length-j),16));break;default:this.limbs=[0]}return this},equals:function(A){typeof A=="number"&&(A=new this.l(A));var j=0,e;for(this.fullReduce(),A.fullReduce(),e=0;e<this.limbs.length||e<A.limbs.length;e++)j|=this.getLimb(e)^A.getLimb(e);return j===0},getLimb:function(A){return A>=this.limbs.length?0:this.limbs[A]},greaterEquals:function(A){typeof A=="number"&&(A=new this.l(A));var j=0,e=0,t,r,a;for(t=Math.max(this.limbs.length,A.limbs.length)-1;0<=t;t--)r=this.getLimb(t),a=A.getLimb(t),e|=a-r&~j,j|=r-a&~e;return(e|~j)>>>31},toString:function(){this.fullReduce();var A="",j,e,t=this.limbs;for(j=0;j<this.limbs.length;j++){for(e=t[j].toString(16);j<this.limbs.length-1&&6>e.length;)e="0"+e;A=e+A}return"0x"+A},addM:function(A){typeof A!="object"&&(A=new this.l(A));var j=this.limbs,e=A.limbs;for(A=j.length;A<e.length;A++)j[A]=0;for(A=0;A<e.length;A++)j[A]+=e[A];return this},doubleM:function(){var A,j=0,e,t=this.radix,r=this.radixMask,a=this.limbs;for(A=0;A<a.length;A++)e=a[A],e=e+e+j,a[A]=e&r,j=e>>t;return j&&a.push(j),this},halveM:function(){var A,j=0,e,t=this.radix,r=this.limbs;for(A=r.length-1;0<=A;A--)e=r[A],r[A]=e+j>>1,j=(e&1)<<t;return r[r.length-1]||r.pop(),this},subM:function(A){typeof A!="object"&&(A=new this.l(A));var j=this.limbs,e=A.limbs;for(A=j.length;A<e.length;A++)j[A]=0;for(A=0;A<e.length;A++)j[A]-=e[A];return this},mod:function(A){var j=!this.greaterEquals(new z.bn(0));A=new z.bn(A).normalize();var e=new z.bn(this).normalize(),t=0;for(j&&(e=new z.bn(0).subM(e).normalize());e.greaterEquals(A);t++)A.doubleM();for(j&&(e=A.sub(e).normalize());0<t;t--)A.halveM(),e.greaterEquals(A)&&e.subM(A).normalize();return e.trim()},inverseMod:function(A){var j=new z.bn(1),e=new z.bn(0),t=new z.bn(this),r=new z.bn(A),a,n=1;if(!(A.limbs[0]&1))throw new z.exception.invalid("inverseMod: p must be odd");do for(t.limbs[0]&1&&(t.greaterEquals(r)||(a=t,t=r,r=a,a=j,j=e,e=a),t.subM(r),t.normalize(),j.greaterEquals(e)||j.addM(A),j.subM(e)),t.halveM(),j.limbs[0]&1&&j.addM(A),j.normalize(),j.halveM(),a=n=0;a<t.limbs.length;a++)n|=t.limbs[a];while(n);if(!r.equals(1))throw new z.exception.invalid("inverseMod: p and x must be relatively prime");return e},add:function(A){return this.copy().addM(A)},sub:function(A){return this.copy().subM(A)},mul:function(A){typeof A=="number"&&(A=new this.l(A));var j,e=this.limbs,t=A.limbs,r=e.length,a=t.length,n=new this.l,o=n.limbs,i,s=this.maxMul;for(j=0;j<this.limbs.length+A.limbs.length+1;j++)o[j]=0;for(j=0;j<r;j++){for(i=e[j],A=0;A<a;A++)o[j+A]+=i*t[A];--s||(s=this.maxMul,n.cnormalize())}return n.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(A){A=new z.bn(A).normalize().trim().limbs;var j,e,t=new this.l(1),r=this;for(j=0;j<A.length;j++)for(e=0;e<this.radix&&(A[j]&1<<e&&(t=t.mul(r)),!(j==A.length-1&&A[j]>>e+1==0));e++)r=r.square();return t},mulmod:function(A,j){return this.mod(j).mul(A.mod(j)).mod(j)},powermod:function(A,j){if(A=new z.bn(A),j=new z.bn(j),(j.limbs[0]&1)==1){var e=this.montpowermod(A,j);if(e!=0)return e}for(var t,r=A.normalize().trim().limbs,a=new this.l(1),n=this,e=0;e<r.length;e++)for(t=0;t<this.radix&&(r[e]&1<<t&&(a=a.mulmod(n,j)),!(e==r.length-1&&r[e]>>t+1==0));t++)n=n.mulmod(n,j);return a},montpowermod:function(A,j){function e(I,S){var f=S%I.radix;return(I.limbs[Math.floor(S/I.radix)]&1<<f)>>f}function t(I,S){var f,v,P=(1<<s+1)-1;for(f=I.mul(S),v=f.mul(u),v.limbs=v.limbs.slice(0,i.limbs.length),v.limbs.length==i.limbs.length&&(v.limbs[i.limbs.length-1]&=P),v=v.mul(j),v=f.add(v).normalize().trim(),v.limbs=v.limbs.slice(i.limbs.length-1),f=0;f<v.limbs.length;f++)0<f&&(v.limbs[f-1]|=(v.limbs[f]&P)<<n-s-1),v.limbs[f]>>=s+1;return v.greaterEquals(j)&&v.subM(j),v}A=new z.bn(A).normalize().trim(),j=new z.bn(j);var r,a,n=this.radix,o=new this.l(1);r=this.copy();var i,s,l;for(l=A.bitLength(),i=new z.bn({limbs:j.copy().normalize().trim().limbs.map(function(){return 0})}),s=this.radix;0<s;s--)if((j.limbs[j.limbs.length-1]>>s&1)==1){i.limbs[i.limbs.length-1]=1<<s;break}if(l==0)return this;l=18>l?1:48>l?3:144>l?4:768>l?5:6;var d=i.copy(),k=j.copy();a=new z.bn(1);for(var u=new z.bn(0),m=i.copy();m.greaterEquals(1);)m.halveM(),(a.limbs[0]&1)==0?(a.halveM(),u.halveM()):(a.addM(k),a.halveM(),u.halveM(),u.addM(d));if(a=a.normalize(),u=u.normalize(),d.doubleM(),k=d.mulmod(d,j),!d.mul(a).sub(j.mul(u)).equals(1))return!1;for(r=t(r,k),o=t(o,k),d={},a=(1<<l-1)-1,d[1]=r.copy(),d[2]=t(r,r),r=1;r<=a;r++)d[2*r+1]=t(d[2*r-1],d[2]);for(r=A.bitLength()-1;0<=r;)if(e(A,r)==0)o=t(o,o),--r;else{for(k=r-l+1;e(A,k)==0;)k++;for(m=0,a=k;a<=r;a++)m+=e(A,a)<<a-k,o=t(o,o);o=t(o,d[m]),r=k-1}return t(o,1)},trim:function(){var A=this.limbs,j;do j=A.pop();while(A.length&&j===0);return A.push(j),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var A=0,j,e=this.placeVal,t=this.ipv,r,a=this.limbs,n=a.length,o=this.radixMask;for(j=0;j<n||A!==0&&A!==-1;j++)A=(a[j]||0)+A,r=a[j]=A&o,A=(A-r)*t;return A===-1&&(a[j-1]-=e),this.trim(),this},cnormalize:function(){var A=0,j,e=this.ipv,t,r=this.limbs,a=r.length,n=this.radixMask;for(j=0;j<a-1;j++)A=r[j]+A,t=r[j]=A&n,A=(A-t)*e;return r[j]+=A,this},toBits:function(A){this.fullReduce(),A=A||this.exponent||this.bitLength();var j=Math.floor((A-1)/24),e=z.bitArray,t=[e.partial((A+7&-8)%this.radix||this.radix,this.getLimb(j))];for(j--;0<=j;j--)t=e.concat(t,[e.partial(Math.min(this.radix,A),this.getLimb(j))]),A-=this.radix;return t},bitLength:function(){this.fullReduce();for(var A=this.radix*(this.limbs.length-1),j=this.limbs[this.limbs.length-1];j;j>>>=1)A++;return A+7&-8}};z.bn.fromBits=function(A){var j=new this,e=[],t=z.bitArray,r=this.prototype,a=Math.min(this.bitLength||4294967296,t.bitLength(A)),n=a%r.radix||r.radix;for(e[0]=t.extract(A,0,n);n<a;n+=r.radix)e.unshift(t.extract(A,n,r.radix));return j.limbs=e,j};z.bn.prototype.ipv=1/(z.bn.prototype.placeVal=Math.pow(2,z.bn.prototype.radix));z.bn.prototype.radixMask=(1<<z.bn.prototype.radix)-1;z.bn.pseudoMersennePrime=function(A,j){function e(n){this.initWith(n)}var t=e.prototype=new z.bn,r,a;for(r=t.modOffset=Math.ceil(a=A/t.radix),t.exponent=A,t.offset=[],t.factor=[],t.minOffset=r,t.fullMask=0,t.fullOffset=[],t.fullFactor=[],t.modulus=e.modulus=new z.bn(Math.pow(2,A)),t.fullMask=0|-Math.pow(2,A%t.radix),r=0;r<j.length;r++)t.offset[r]=Math.floor(j[r][0]/t.radix-a),t.fullOffset[r]=Math.ceil(j[r][0]/t.radix-a),t.factor[r]=j[r][1]*Math.pow(.5,A-j[r][0]+t.offset[r]*t.radix),t.fullFactor[r]=j[r][1]*Math.pow(.5,A-j[r][0]+t.fullOffset[r]*t.radix),t.modulus.addM(new z.bn(Math.pow(2,j[r][0])*j[r][1])),t.minOffset=Math.min(t.minOffset,-t.offset[r]);return t.l=e,t.modulus.cnormalize(),t.reduce=function(){var n,o,i,s=this.modOffset,l=this.limbs,d=this.offset,k=this.offset.length,u=this.factor,m;for(n=this.minOffset;l.length>s;){for(i=l.pop(),m=l.length,o=0;o<k;o++)l[m+d[o]]-=u[o]*i;n--,n||(l.push(0),this.cnormalize(),n=this.minOffset)}return this.cnormalize(),this},t.ga=t.fullMask===-1?t.reduce:function(){var n=this.limbs,o=n.length-1,i,s;if(this.reduce(),o===this.modOffset-1){for(s=n[o]&this.fullMask,n[o]-=s,i=0;i<this.fullOffset.length;i++)n[o+this.fullOffset[i]]-=this.fullFactor[i]*s;this.normalize()}},t.fullReduce=function(){var n,o;for(this.ga(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this.ga(),o=this.limbs.length;o<this.modOffset;o++)this.limbs[o]=0;for(n=this.greaterEquals(this.modulus),o=0;o<this.limbs.length;o++)this.limbs[o]-=this.modulus.limbs[o]*n;return this.cnormalize(),this},t.inverse=function(){return this.power(this.modulus.sub(2))},e.fromBits=z.bn.fromBits,e};var uu=z.bn.pseudoMersennePrime;z.bn.prime={p127:uu(127,[[0,-1]]),p25519:uu(255,[[0,-19]]),p192k:uu(192,[[32,-1],[12,-1],[8,-1],[7,-1],[6,-1],[3,-1],[0,-1]]),p224k:uu(224,[[32,-1],[12,-1],[11,-1],[9,-1],[7,-1],[4,-1],[1,-1],[0,-1]]),p256k:uu(256,[[32,-1],[9,-1],[8,-1],[7,-1],[6,-1],[4,-1],[0,-1]]),p192:uu(192,[[0,-1],[64,-1]]),p224:uu(224,[[0,1],[96,-1]]),p256:uu(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:uu(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:uu(521,[[0,-1]])};z.bn.random=function(A,j){typeof A!="object"&&(A=new z.bn(A));for(var e,t,r=A.limbs.length,a=A.limbs[r-1]+1,n=new z.bn;;){do e=z.random.randomWords(r,j),0>e[r-1]&&(e[r-1]+=4294967296);while(Math.floor(e[r-1]/a)===Math.floor(4294967296/a));for(e[r-1]%=a,t=0;t<r-1;t++)e[t]&=A.radixMask;if(n.limbs=e,!n.greaterEquals(A))return n}};z.cipher.aes=function(A){this.I[0][0][0]||this.N();var j,e,t,r,a=this.I[0][4],n=this.I[1];j=A.length;var o=1;if(j!==4&&j!==6&&j!==8)throw new z.exception.invalid("invalid aes key size");for(this.f=[t=A.slice(0),r=[]],A=j;A<4*j+28;A++)e=t[A-1],(A%j===0||j===8&&A%j===4)&&(e=a[e>>>24]<<24^a[e>>16&255]<<16^a[e>>8&255]<<8^a[e&255],A%j===0&&(e=e<<8^e>>>24^o<<24,o=o<<1^283*(o>>7))),t[A]=t[A-j]^e;for(j=0;A;j++,A--)e=t[j&3?A:A-4],r[j]=4>=A||4>j?e:n[0][a[e>>>24]]^n[1][a[e>>16&255]]^n[2][a[e>>8&255]]^n[3][a[e&255]]};z.cipher.aes.prototype={encrypt:function(A){return AhA(this,A,0)},decrypt:function(A){return AhA(this,A,1)},I:[[[],[],[],[],[]],[[],[],[],[],[]]],N:function(){var A=this.I[0],j=this.I[1],e=A[4],t=j[4],r,a,n,o=[],i=[],s,l,d,k;for(r=0;256>r;r++)i[(o[r]=r<<1^283*(r>>7))^r]=r;for(a=n=0;!e[a];a^=s||1,n=i[n]||1)for(d=n^n<<1^n<<2^n<<3^n<<4,d=d>>8^d&255^99,e[a]=d,t[d]=a,l=o[r=o[s=o[a]]],k=16843009*l^65537*r^257*s^16843008*a,l=257*o[d]^16843008*d,r=0;4>r;r++)A[r][a]=l=l<<24^l>>>8,j[r][d]=k=k<<24^k>>>8;for(r=0;5>r;r++)A[r]=A[r].slice(0),j[r]=j[r].slice(0)}};function AhA(A,j,e){if(j.length!==4)throw new z.exception.invalid("invalid aes block size");var t=A.f[e],r=j[0]^t[0],a=j[e?3:1]^t[1],n=j[2]^t[2];j=j[e?1:3]^t[3];var o,i,s,l=t.length/4-2,d,k=4,u=[0,0,0,0];o=A.I[e],A=o[0];var m=o[1],I=o[2],S=o[3],f=o[4];for(d=0;d<l;d++)o=A[r>>>24]^m[a>>16&255]^I[n>>8&255]^S[j&255]^t[k],i=A[a>>>24]^m[n>>16&255]^I[j>>8&255]^S[r&255]^t[k+1],s=A[n>>>24]^m[j>>16&255]^I[r>>8&255]^S[a&255]^t[k+2],j=A[j>>>24]^m[r>>16&255]^I[a>>8&255]^S[n&255]^t[k+3],k+=4,r=o,a=i,n=s;for(d=0;4>d;d++)u[e?3&-d:d]=f[r>>>24]<<24^f[a>>16&255]<<16^f[n>>8&255]<<8^f[j&255]^t[k++],o=r,r=a,a=n,n=j,j=o;return u}z.bitArray={bitSlice:function(A,j,e){return A=z.bitArray.fa(A.slice(j/32),32-(j&31)).slice(1),e===void 0?A:z.bitArray.clamp(A,e-j)},extract:function(A,j,e){var t=Math.floor(-j-e&31);return((j+e-1^j)&-32?A[j/32|0]<<32-t^A[j/32+1|0]>>>t:A[j/32|0]>>>t)&(1<<e)-1},concat:function(A,j){if(A.length===0||j.length===0)return A.concat(j);var e=A[A.length-1],t=z.bitArray.getPartial(e);return t===32?A.concat(j):z.bitArray.fa(j,t,e|0,A.slice(0,A.length-1))},bitLength:function(A){var j=A.length;return j===0?0:32*(j-1)+z.bitArray.getPartial(A[j-1])},clamp:function(A,j){if(32*A.length<j)return A;A=A.slice(0,Math.ceil(j/32));var e=A.length;return j=j&31,0<e&&j&&(A[e-1]=z.bitArray.partial(j,A[e-1]&2147483648>>j-1,1)),A},partial:function(A,j,e){return A===32?j:(e?j|0:j<<32-A)+1099511627776*A},getPartial:function(A){return Math.round(A/1099511627776)||32},equal:function(A,j){if(z.bitArray.bitLength(A)!==z.bitArray.bitLength(j))return!1;var e=0,t;for(t=0;t<A.length;t++)e|=A[t]^j[t];return e===0},fa:function(A,j,e,t){var r;for(r=0,t===void 0&&(t=[]);32<=j;j-=32)t.push(e),e=0;if(j===0)return t.concat(A);for(r=0;r<A.length;r++)t.push(e|A[r]>>>j),e=A[r]<<32-j;return r=A.length?A[A.length-1]:0,A=z.bitArray.getPartial(r),t.push(z.bitArray.partial(j+A&31,32<j+A?e:t.pop(),1)),t},ya:function(A,j){return[A[0]^j[0],A[1]^j[1],A[2]^j[2],A[3]^j[3]]},byteswapM:function(A){var j,e;for(j=0;j<A.length;++j)e=A[j],A[j]=e>>>24|e>>>8&65280|(e&65280)<<8|e<<24;return A}};z.codec.bytes={fromBits:function(A){var j=[],e=z.bitArray.bitLength(A),t,r;for(t=0;t<e/8;t++)(t&3)===0&&(r=A[t/4]),j.push(r>>>24),r<<=8;return j},toBits:function(A){var j=[],e,t=0;for(e=0;e<A.length;e++)t=t<<8|A[e],(e&3)===3&&(j.push(t),t=0);return e&3&&j.push(z.bitArray.partial(8*(e&3),t)),j}};z.codec.utf8String={fromBits:function(A){var j="",e=z.bitArray.bitLength(A),t,r;for(t=0;t<e/8;t++)(t&3)===0&&(r=A[t/4]),j+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(j))},toBits:function(A){A=unescape(encodeURIComponent(A));var j=[],e,t=0;for(e=0;e<A.length;e++)t=t<<8|A.charCodeAt(e),(e&3)===3&&(j.push(t),t=0);return e&3&&j.push(z.bitArray.partial(8*(e&3),t)),j}};z.codec.hex={fromBits:function(A){var j="",e;for(e=0;e<A.length;e++)j+=((A[e]|0)+0xf00000000000).toString(16).substr(4);return j.substr(0,z.bitArray.bitLength(A)/4)},toBits:function(A){var j,e=[],t;for(A=A.replace(/\s|0x/g,""),t=A.length,A=A+"00000000",j=0;j<A.length;j+=8)e.push(parseInt(A.substr(j,8),16)^0);return z.bitArray.clamp(e,4*t)}};z.codec.base32={L:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",ca:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(A,j,e){var t=z.codec.base32.BASE,r=z.codec.base32.REMAINING,a="",n=0,o=z.codec.base32.L,i=0,s=z.bitArray.bitLength(A);for(e&&(o=z.codec.base32.ca),e=0;a.length*t<s;)a+=o.charAt((i^A[e]>>>n)>>>r),n<t?(i=A[e]<<t-n,n+=r,e++):(i<<=t,n-=t);for(;a.length&7&&!j;)a+="=";return a},toBits:function(A,j){A=A.replace(/\s|=/g,"").toUpperCase();var e=z.codec.base32.BITS,t=z.codec.base32.BASE,r=z.codec.base32.REMAINING,a=[],n,o=0,i=z.codec.base32.L,s=0,l,d="base32";for(j&&(i=z.codec.base32.ca,d="base32hex"),n=0;n<A.length;n++){if(l=i.indexOf(A.charAt(n)),0>l){if(!j)try{return z.codec.base32hex.toBits(A)}catch{}throw new z.exception.invalid("this isn't "+d+"!")}o>r?(o-=r,a.push(s^l>>>o),s=l<<e-o):(o+=t,s^=l<<e-o)}return o&56&&a.push(z.bitArray.partial(o&56,s,1)),a}};z.codec.base32hex={fromBits:function(A,j){return z.codec.base32.fromBits(A,j,1)},toBits:function(A){return z.codec.base32.toBits(A,1)}};z.codec.base64={L:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(A,j,e){var t="",r=0,a=z.codec.base64.L,n=0,o=z.bitArray.bitLength(A);for(e&&(a=a.substr(0,62)+"-_"),e=0;6*t.length<o;)t+=a.charAt((n^A[e]>>>r)>>>26),6>r?(n=A[e]<<6-r,r+=26,e++):(n<<=6,r-=6);for(;t.length&3&&!j;)t+="=";return t},toBits:function(A,j){A=A.replace(/\s|=/g,"");var e=[],t,r=0,a=z.codec.base64.L,n=0,o;for(j&&(a=a.substr(0,62)+"-_"),t=0;t<A.length;t++){if(o=a.indexOf(A.charAt(t)),0>o)throw new z.exception.invalid("this isn't base64: '"+A.charAt(t)+"', "+t+" -- "+A.length);26<r?(r-=26,e.push(n^o>>>r),n=o<<32-r):(r+=6,n^=o<<32-r)}return r&56&&e.push(z.bitArray.partial(r&56,n,1)),e}};z.codec.base64url={fromBits:function(A){return z.codec.base64.fromBits(A,1,1)},toBits:function(A){return z.codec.base64.toBits(A,1)}};z.hash.sha256=function(A){this.f[0]||this.N(),A?(this.i=A.i.slice(0),this.g=A.g.slice(0),this.c=A.c):this.reset()};z.hash.sha256.hash=function(A){return new z.hash.sha256().update(A).finalize()};z.hash.sha256.prototype={blockSize:512,reset:function(){return this.i=this.s.slice(0),this.g=[],this.c=0,this},update:function(A){typeof A=="string"&&(A=z.codec.utf8String.toBits(A));var j,e=this.g=z.bitArray.concat(this.g,A);if(j=this.c,A=this.c=j+z.bitArray.bitLength(A),9007199254740991<A)throw new z.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var t=new Uint32Array(e),r=0;for(j=512+j-(512+j&511);j<=A;j+=512)this.j(t.subarray(16*r,16*(r+1))),r+=1;e.splice(0,16*r)}else for(j=512+j-(512+j&511);j<=A;j+=512)this.j(e.splice(0,16));return this},finalize:function(){var A,e=this.g,j=this.i,e=z.bitArray.concat(e,[z.bitArray.partial(1,1)]);for(A=e.length+2;A&15;A++)e.push(0);for(e.push(Math.floor(this.c/4294967296)),e.push(this.c|0);e.length;)this.j(e.splice(0,16));return this.reset(),j},s:[],f:[],N:function(){function A(a){return 4294967296*(a-Math.floor(a))|0}for(var j=0,e=2,t,r;64>j;e++){for(r=!0,t=2;t*t<=e;t++)if(e%t===0){r=!1;break}r&&(8>j&&(this.s[j]=A(Math.pow(e,.5))),this.f[j]=A(Math.pow(e,1/3)),j++)}},j:function(A){var j,e,t,r=this.i,a=this.f,n=r[0],o=r[1],i=r[2],s=r[3],l=r[4],d=r[5],k=r[6],u=r[7];for(j=0;64>j;j++)16>j?e=A[j]:(e=A[j+1&15],t=A[j+14&15],e=A[j&15]=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+A[j&15]+A[j+9&15]|0),e=e+u+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(k^l&(d^k))+a[j],u=k,k=d,d=l,l=s+e|0,s=i,i=o,o=n,n=e+(o&i^s&(o^i))+(o>>>2^o>>>13^o>>>22^o<<30^o<<19^o<<10)|0;r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0,r[5]=r[5]+d|0,r[6]=r[6]+k|0,r[7]=r[7]+u|0}};z.hash.sha1=function(A){A?(this.i=A.i.slice(0),this.g=A.g.slice(0),this.c=A.c):this.reset()};z.hash.sha1.hash=function(A){return new z.hash.sha1().update(A).finalize()};z.hash.sha1.prototype={blockSize:512,reset:function(){return this.i=this.s.slice(0),this.g=[],this.c=0,this},update:function(A){typeof A=="string"&&(A=z.codec.utf8String.toBits(A));var j,e=this.g=z.bitArray.concat(this.g,A);if(j=this.c,A=this.c=j+z.bitArray.bitLength(A),9007199254740991<A)throw new z.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var t=new Uint32Array(e),r=0;for(j=this.blockSize+j-(this.blockSize+j&this.blockSize-1);j<=A;j+=this.blockSize)this.j(t.subarray(16*r,16*(r+1))),r+=1;e.splice(0,16*r)}else for(j=this.blockSize+j-(this.blockSize+j&this.blockSize-1);j<=A;j+=this.blockSize)this.j(e.splice(0,16));return this},finalize:function(){var A,e=this.g,j=this.i,e=z.bitArray.concat(e,[z.bitArray.partial(1,1)]);for(A=e.length+2;A&15;A++)e.push(0);for(e.push(Math.floor(this.c/4294967296)),e.push(this.c|0);e.length;)this.j(e.splice(0,16));return this.reset(),j},s:[1732584193,4023233417,2562383102,271733878,3285377520],f:[1518500249,1859775393,2400959708,3395469782],j:function(A){var j,e,t,r,a,n,o=this.i,i;if(typeof Uint32Array<"u")for(i=Array(80),e=0;16>e;e++)i[e]=A[e];else i=A;for(e=o[0],t=o[1],r=o[2],a=o[3],n=o[4],A=0;79>=A;A++)16<=A&&(j=i[A-3]^i[A-8]^i[A-14]^i[A-16],i[A]=j<<1|j>>>31),j=19>=A?t&r|~t&a:39>=A?t^r^a:59>=A?t&r|t&a|r&a:79>=A?t^r^a:void 0,j=(e<<5|e>>>27)+j+n+i[A]+this.f[Math.floor(A/20)]|0,n=a,a=r,r=t<<30|t>>>2,t=e,e=j;o[0]=o[0]+e|0,o[1]=o[1]+t|0,o[2]=o[2]+r|0,o[3]=o[3]+a|0,o[4]=o[4]+n|0}};z.hash.sha512=function(A){this.f[0]||this.N(),A?(this.i=A.i.slice(0),this.g=A.g.slice(0),this.c=A.c):this.reset()};z.hash.sha512.hash=function(A){return new z.hash.sha512().update(A).finalize()};z.hash.sha512.prototype={blockSize:1024,reset:function(){return this.i=this.s.slice(0),this.g=[],this.c=0,this},update:function(A){typeof A=="string"&&(A=z.codec.utf8String.toBits(A));var j,e=this.g=z.bitArray.concat(this.g,A);if(j=this.c,A=this.c=j+z.bitArray.bitLength(A),9007199254740991<A)throw new z.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var t=new Uint32Array(e),r=0;for(j=1024+j-(1024+j&1023);j<=A;j+=1024)this.j(t.subarray(32*r,32*(r+1))),r+=1;e.splice(0,32*r)}else for(j=1024+j-(1024+j&1023);j<=A;j+=1024)this.j(e.splice(0,32));return this},finalize:function(){var A,e=this.g,j=this.i,e=z.bitArray.concat(e,[z.bitArray.partial(1,1)]);for(A=e.length+4;A&31;A++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this.c/4294967296)),e.push(this.c|0);e.length;)this.j(e.splice(0,32));return this.reset(),j},s:[],ra:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],f:[],ta:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],N:function(){function A(n){return 4294967296*(n-Math.floor(n))|0}function j(n){return 1099511627776*(n-Math.floor(n))&255}for(var e=0,t=2,r,a;80>e;t++){for(a=!0,r=2;r*r<=t;r++)if(t%r===0){a=!1;break}a&&(8>e&&(this.s[2*e]=A(Math.pow(t,.5)),this.s[2*e+1]=j(Math.pow(t,.5))<<24|this.ra[e]),this.f[2*e]=A(Math.pow(t,1/3)),this.f[2*e+1]=j(Math.pow(t,1/3))<<24|this.ta[e],e++)}},j:function(A){var j,e,t=this.i,r=this.f,a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=t[6],k=t[7],u=t[8],m=t[9],I=t[10],S=t[11],f=t[12],v=t[13],P=t[14],D=t[15],C;if(typeof Uint32Array<"u"){C=Array(160);for(var b=0;32>b;b++)C[b]=A[b]}else C=A;var b=a,h=n,O=o,V=i,Y=s,rA=l,yA=d,VA=k,dj=u,bA=m,Mj=I,mj=S,ae=f,_j=v,cj=P,Qj=D;for(A=0;80>A;A++){if(16>A)j=C[2*A],e=C[2*A+1];else{e=C[2*(A-15)];var Ie=C[2*(A-15)+1];j=(Ie<<31|e>>>1)^(Ie<<24|e>>>8)^e>>>7;var Ee=(e<<31|Ie>>>1)^(e<<24|Ie>>>8)^(e<<25|Ie>>>7);e=C[2*(A-2)];var Bj=C[2*(A-2)+1],Ie=(Bj<<13|e>>>19)^(e<<3|Bj>>>29)^e>>>6,Bj=(e<<13|Bj>>>19)^(Bj<<3|e>>>29)^(e<<26|Bj>>>6),Cj=C[2*(A-7)],wt=C[2*(A-16)],wj=C[2*(A-16)+1];e=Ee+C[2*(A-7)+1],j=j+Cj+(e>>>0<Ee>>>0?1:0),e+=Bj,j+=Ie+(e>>>0<Bj>>>0?1:0),e+=wj,j+=wt+(e>>>0<wj>>>0?1:0)}C[2*A]=j|=0,C[2*A+1]=e|=0;var Cj=dj&Mj^~dj&ae,kj=bA&mj^~bA&_j,Bj=b&O^b&Y^O&Y,De=h&V^h&rA^V&rA,wt=(h<<4|b>>>28)^(b<<30|h>>>2)^(b<<25|h>>>7),wj=(b<<4|h>>>28)^(h<<30|b>>>2)^(h<<25|b>>>7),Bt=r[2*A],Ye=r[2*A+1],Ie=Qj+((dj<<18|bA>>>14)^(dj<<14|bA>>>18)^(bA<<23|dj>>>9)),Ee=cj+((bA<<18|dj>>>14)^(bA<<14|dj>>>18)^(dj<<23|bA>>>9))+(Ie>>>0<Qj>>>0?1:0),Ie=Ie+kj,Ee=Ee+(Cj+(Ie>>>0<kj>>>0?1:0)),Ie=Ie+Ye,Ee=Ee+(Bt+(Ie>>>0<Ye>>>0?1:0)),Ie=Ie+e|0,Ee=Ee+(j+(Ie>>>0<e>>>0?1:0));e=wj+De,j=wt+Bj+(e>>>0<wj>>>0?1:0),cj=ae,Qj=_j,ae=Mj,_j=mj,Mj=dj,mj=bA,bA=VA+Ie|0,dj=yA+Ee+(bA>>>0<VA>>>0?1:0)|0,yA=Y,VA=rA,Y=O,rA=V,O=b,V=h,h=Ie+e|0,b=Ee+j+(h>>>0<Ie>>>0?1:0)|0}n=t[1]=n+h|0,t[0]=a+b+(n>>>0<h>>>0?1:0)|0,i=t[3]=i+V|0,t[2]=o+O+(i>>>0<V>>>0?1:0)|0,l=t[5]=l+rA|0,t[4]=s+Y+(l>>>0<rA>>>0?1:0)|0,k=t[7]=k+VA|0,t[6]=d+yA+(k>>>0<VA>>>0?1:0)|0,m=t[9]=m+bA|0,t[8]=u+dj+(m>>>0<bA>>>0?1:0)|0,S=t[11]=S+mj|0,t[10]=I+Mj+(S>>>0<mj>>>0?1:0)|0,v=t[13]=v+_j|0,t[12]=f+ae+(v>>>0<_j>>>0?1:0)|0,D=t[15]=D+Qj|0,t[14]=P+cj+(D>>>0<Qj>>>0?1:0)|0}};z.mode.gcm={name:"gcm",encrypt:function(A,j,e,t,r){var a=j.slice(0);return j=z.bitArray,t=t||[],A=z.mode.gcm.aa(!0,A,a,t,e,r||128),j.concat(A.data,A.tag)},decrypt:function(A,j,e,t,r){var a=j.slice(0),n=z.bitArray,o=n.bitLength(a);if(r=r||128,t=t||[],r<=o?(j=n.bitSlice(a,o-r),a=n.bitSlice(a,0,o-r)):(j=a,a=[]),A=z.mode.gcm.aa(!1,A,a,t,e,r),!n.equal(A.tag,j))throw new z.exception.corrupt("gcm: tag doesn't match");return A.data},qa:function(A,j){var e,t,r,a,n,o=z.bitArray.ya;for(r=[0,0,0,0],a=j.slice(0),e=0;128>e;e++){for((t=(A[Math.floor(e/32)]&1<<31-e%32)!==0)&&(r=o(r,a)),n=(a[3]&1)!==0,t=3;0<t;t--)a[t]=a[t]>>>1|(a[t-1]&1)<<31;a[0]>>>=1,n&&(a[0]^=-520093696)}return r},D:function(A,j,e){var t,r=e.length;for(j=j.slice(0),t=0;t<r;t+=4)j[0]^=4294967295&e[t],j[1]^=4294967295&e[t+1],j[2]^=4294967295&e[t+2],j[3]^=4294967295&e[t+3],j=z.mode.gcm.qa(j,A);return j},aa:function(A,j,e,t,r,a){var n,o,i,s,l,d,k,u,m=z.bitArray;for(d=e.length,k=m.bitLength(e),u=m.bitLength(t),o=m.bitLength(r),n=j.encrypt([0,0,0,0]),o===96?(r=r.slice(0),r=m.concat(r,[1])):(r=z.mode.gcm.D(n,[0,0,0,0],r),r=z.mode.gcm.D(n,r,[0,0,Math.floor(o/4294967296),o&4294967295])),o=z.mode.gcm.D(n,[0,0,0,0],t),l=r.slice(0),t=o.slice(0),A||(t=z.mode.gcm.D(n,o,e)),s=0;s<d;s+=4)l[3]++,i=j.encrypt(l),e[s]^=i[0],e[s+1]^=i[1],e[s+2]^=i[2],e[s+3]^=i[3];return e=m.clamp(e,k),A&&(t=z.mode.gcm.D(n,o,e)),A=[Math.floor(u/4294967296),u&4294967295,Math.floor(k/4294967296),k&4294967295],t=z.mode.gcm.D(n,t,A),i=j.encrypt(r),t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3],{tag:m.bitSlice(t,0,a),data:e}}};z.misc.hmac=function(A,j){this.ba=j=j||z.hash.sha256;var e=[[],[]],t,r=j.prototype.blockSize/32;for(this.K=[new j,new j],A.length>r&&(A=j.hash(A)),t=0;t<r;t++)e[0][t]=A[t]^909522486,e[1][t]=A[t]^1549556828;this.K[0].update(e[0]),this.K[1].update(e[1]),this.Y=new j(this.K[0])};z.misc.hmac.prototype.encrypt=z.misc.hmac.prototype.mac=function(A){if(this.ha)throw new z.exception.invalid("encrypt on already updated hmac called!");return this.update(A),this.digest(A)};z.misc.hmac.prototype.reset=function(){this.Y=new this.ba(this.K[0]),this.ha=!1};z.misc.hmac.prototype.update=function(A){this.ha=!0,this.Y.update(A)};z.misc.hmac.prototype.digest=function(){var A=this.Y.finalize(),A=new this.ba(this.K[1]).update(A).finalize();return this.reset(),A};z.misc.pbkdf2=function(A,j,e,t,r){if(e=e||1e4,0>t||0>e)throw new z.exception.invalid("invalid params to pbkdf2");typeof A=="string"&&(A=z.codec.utf8String.toBits(A)),typeof j=="string"&&(j=z.codec.utf8String.toBits(j)),r=r||z.misc.hmac,A=new r(A);var a,n,o,i,s=[],l=z.bitArray;for(i=1;32*s.length<(t||1);i++){for(r=a=A.encrypt(l.concat(j,[i])),n=1;n<e;n++)for(a=A.encrypt(a),o=0;o<a.length;o++)r[o]^=a[o];s=s.concat(r)}return t&&(s=l.clamp(s,t)),s};z.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},pa:function(A,j,e,t){e=e||{},t=t||{};var r=z.json,a=r.w({iv:z.random.randomWords(4,0)},r.defaults),n;if(r.w(a,e),e=a.adata,typeof a.salt=="string"&&(a.salt=z.codec.base64.toBits(a.salt)),typeof a.iv=="string"&&(a.iv=z.codec.base64.toBits(a.iv)),!z.mode[a.mode]||!z.cipher[a.cipher]||typeof A=="string"&&100>=a.iter||a.ts!==64&&a.ts!==96&&a.ts!==128||a.ks!==128&&a.ks!==192&&a.ks!==256||2>a.iv.length||4<a.iv.length)throw new z.exception.invalid("json encrypt: invalid parameters");return typeof A=="string"?(n=z.misc.cachedPbkdf2(A,a),A=n.key.slice(0,a.ks/32),a.salt=n.salt):z.ecc&&A instanceof z.ecc.elGamal.publicKey&&(n=A.kem(),a.kemtag=n.tag,A=n.key.slice(0,a.ks/32)),typeof j=="string"&&(j=z.codec.utf8String.toBits(j)),typeof e=="string"&&(a.adata=e=z.codec.utf8String.toBits(e)),n=new z.cipher[a.cipher](A),r.w(t,a),t.key=A,a.ct=a.mode==="ccm"&&z.arrayBuffer&&z.arrayBuffer.ccm&&j instanceof ArrayBuffer?z.arrayBuffer.ccm.encrypt(n,j,a.iv,e,a.ts):z.mode[a.mode].encrypt(n,j,a.iv,e,a.ts),a},encrypt:function(A,j,e,t){var r=z.json,a=r.pa.apply(r,arguments);return r.encode(a)},oa:function(A,j,e,t){e=e||{},t=t||{};var r=z.json;j=r.w(r.w(r.w({},r.defaults),j),e,!0);var a,n;if(a=j.adata,typeof j.salt=="string"&&(j.salt=z.codec.base64.toBits(j.salt)),typeof j.iv=="string"&&(j.iv=z.codec.base64.toBits(j.iv)),!z.mode[j.mode]||!z.cipher[j.cipher]||typeof A=="string"&&100>=j.iter||j.ts!==64&&j.ts!==96&&j.ts!==128||j.ks!==128&&j.ks!==192&&j.ks!==256||!j.iv||2>j.iv.length||4<j.iv.length)throw new z.exception.invalid("json decrypt: invalid parameters");return typeof A=="string"?(n=z.misc.cachedPbkdf2(A,j),A=n.key.slice(0,j.ks/32),j.salt=n.salt):z.ecc&&A instanceof z.ecc.elGamal.secretKey&&(A=A.unkem(z.codec.base64.toBits(j.kemtag)).slice(0,j.ks/32)),typeof a=="string"&&(a=z.codec.utf8String.toBits(a)),n=new z.cipher[j.cipher](A),a=j.mode==="ccm"&&z.arrayBuffer&&z.arrayBuffer.ccm&&j.ct instanceof ArrayBuffer?z.arrayBuffer.ccm.decrypt(n,j.ct,j.iv,j.tag,a,j.ts):z.mode[j.mode].decrypt(n,j.ct,j.iv,a,j.ts),r.w(t,j),t.key=A,e.raw===1?a:z.codec.utf8String.fromBits(a)},decrypt:function(A,j,e,t){var r=z.json;return r.oa(A,r.decode(j),e,t)},encode:function(A){var j,e="{",t="";for(j in A)if(A.hasOwnProperty(j)){if(!j.match(/^[a-z0-9]+$/i))throw new z.exception.invalid("json encode: invalid property name");switch(e+=t+'"'+j+'":',t=",",typeof A[j]){case"number":case"boolean":e+=A[j];break;case"string":e+='"'+escape(A[j])+'"';break;case"object":e+='"'+z.codec.base64.fromBits(A[j],0)+'"';break;default:throw new z.exception.bug("json encode: unsupported type")}}return e+"}"},decode:function(A){if(A=A.replace(/\s/g,""),!A.match(/^\{.*\}$/))throw new z.exception.invalid("json decode: this isn't json!");A=A.replace(/^\{|\}$/g,"").split(/,/);var j={},e,t;for(e=0;e<A.length;e++){if(!(t=A[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new z.exception.invalid("json decode: this isn't json!");t[3]!=null?j[t[2]]=parseInt(t[3],10):t[4]!=null?j[t[2]]=t[2].match(/^(ct|adata|salt|iv)$/)?z.codec.base64.toBits(t[4]):unescape(t[4]):t[5]!=null&&(j[t[2]]=t[5]==="true")}return j},w:function(A,j,e){if(A===void 0&&(A={}),j===void 0)return A;for(var t in j)if(j.hasOwnProperty(t)){if(e&&A[t]!==void 0&&A[t]!==j[t])throw new z.exception.invalid("required parameter overridden");A[t]=j[t]}return A},Aa:function(A,j){var e={},t;for(t in A)A.hasOwnProperty(t)&&A[t]!==j[t]&&(e[t]=A[t]);return e},za:function(A,j){var e={},t;for(t=0;t<j.length;t++)A[j[t]]!==void 0&&(e[j[t]]=A[j[t]]);return e}};z.encrypt=z.json.encrypt;z.decrypt=z.json.decrypt;z.misc.wa={};z.misc.cachedPbkdf2=function(A,j){var e=z.misc.wa,t;return j=j||{},t=j.iter||1e3,e=e[A]=e[A]||{},t=e[t]=e[t]||{firstSalt:j.salt&&j.salt.length?j.salt.slice(0):z.random.randomWords(2,0)},e=j.salt===void 0?t.firstSalt:j.salt,t[e]=t[e]||z.misc.pbkdf2(A,e,j.iter),{key:t[e].slice(0),salt:e.slice(0)}};z.ecc={};z.ecc.point=function(A,j,e){j===void 0?this.isIdentity=!0:(j instanceof z.bn&&(j=new A.field(j)),e instanceof z.bn&&(e=new A.field(e)),this.x=j,this.y=e,this.isIdentity=!1),this.curve=A};z.ecc.point.prototype={toJac:function(){return new z.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(A){return this.toJac().mult(A,this).toAffine()},mult2:function(A,j,e){return this.toJac().mult2(A,this,j,e).toAffine()},multiples:function(){var A,j,e;if(this.da===void 0)for(e=this.toJac().doubl(),A=this.da=[new z.ecc.point(this.curve),this,e.toAffine()],j=3;16>j;j++)e=e.add(this),A.push(e.toAffine());return this.da},negate:function(){var A=new this.curve.field(0).sub(this.y).normalize().reduce();return new z.ecc.point(this.curve,this.x,A)},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return z.bitArray.concat(this.x.toBits(),this.y.toBits())}};z.ecc.pointJac=function(A,j,e,t){j===void 0?this.isIdentity=!0:(this.x=j,this.y=e,this.z=t,this.isIdentity=!1),this.curve=A};z.ecc.pointJac.prototype={add:function(A){var j,e,t,r;if(this.curve!==A.curve)throw new z.exception.invalid("sjcl['ecc']['add'](): Points must be on the same curve to add them!");return this.isIdentity?A.toJac():A.isIdentity?this:(j=this.z.square(),e=A.x.mul(j).subM(this.x),e.equals(0)?this.y.equals(A.y.mul(j.mul(this.z)))?this.doubl():new z.ecc.pointJac(this.curve):(j=A.y.mul(j.mul(this.z)).subM(this.y),t=e.square(),A=j.square(),r=e.square().mul(e).addM(this.x.add(this.x).mul(t)),A=A.subM(r),j=this.x.mul(t).subM(A).mul(j),t=this.y.mul(e.square().mul(e)),j=j.subM(t),e=this.z.mul(e),new z.ecc.pointJac(this.curve,A,j,e)))},doubl:function(){if(this.isIdentity)return this;var j=this.y.square(),e=j.mul(this.x.mul(4)),t=j.square().mul(8),j=this.z.square(),A=this.curve.a.toString()==new z.bn(-3).toString()?this.x.sub(j).mul(3).mul(this.x.add(j)):this.x.square().mul(3).add(j.square().mul(this.curve.a)),j=A.square().subM(e).subM(e),e=e.sub(j).mul(A).subM(t),t=this.y.add(this.y).mul(this.z);return new z.ecc.pointJac(this.curve,j,e,t)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new z.ecc.point(this.curve);var A=this.z.inverse(),j=A.square();return new z.ecc.point(this.curve,this.x.mul(j).fullReduce(),this.y.mul(j.mul(A)).fullReduce())},mult:function(A,j){typeof A=="number"?A=[A]:A.limbs!==void 0&&(A=A.normalize().limbs);var e,t,r=new z.ecc.point(this.curve).toJac(),a=j.multiples();for(e=A.length-1;0<=e;e--)for(t=z.bn.prototype.radix-4;0<=t;t-=4)r=r.doubl().doubl().doubl().doubl().add(a[A[e]>>t&15]);return r},mult2:function(A,j,e,t){typeof A=="number"?A=[A]:A.limbs!==void 0&&(A=A.normalize().limbs),typeof e=="number"?e=[e]:e.limbs!==void 0&&(e=e.normalize().limbs);var r,a=new z.ecc.point(this.curve).toJac();j=j.multiples();var n=t.multiples(),o,i;for(t=Math.max(A.length,e.length)-1;0<=t;t--)for(o=A[t]|0,i=e[t]|0,r=z.bn.prototype.radix-4;0<=r;r-=4)a=a.doubl().doubl().doubl().doubl().add(j[o>>r&15]).add(n[i>>r&15]);return a},negate:function(){return this.toAffine().negate().toJac()},isValid:function(){var j=this.z.square(),A=j.square(),j=A.mul(j);return this.y.square().equals(this.curve.b.mul(j).add(this.x.mul(this.curve.a.mul(A).add(this.x.square()))))}};z.ecc.curve=function(A,j,e,t,r,a){this.field=A,this.r=new z.bn(j),this.a=new A(e),this.b=new A(t),this.G=new z.ecc.point(this,new A(r),new A(a))};z.ecc.curve.prototype.fromBits=function(A){var j=z.bitArray,e=this.field.prototype.exponent+7&-8;if(A=new z.ecc.point(this,this.field.fromBits(j.bitSlice(A,0,e)),this.field.fromBits(j.bitSlice(A,e,2*e))),!A.isValid())throw new z.exception.corrupt("not on the curve!");return A};z.ecc.curves={c192:new z.ecc.curve(z.bn.prime.p192,"0xffffffffffffffffffffffff99def836146bc9b1b4d22831",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new z.ecc.curve(z.bn.prime.p224,"0xffffffffffffffffffffffffffff16a2e0b8f03e13dd29455c5c2a3d",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new z.ecc.curve(z.bn.prime.p256,"0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new z.ecc.curve(z.bn.prime.p384,"0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),c521:new z.ecc.curve(z.bn.prime.p521,"0x1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409",-3,"0x051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","0xC6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","0x11839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),k192:new z.ecc.curve(z.bn.prime.p192k,"0xfffffffffffffffffffffffe26f2fc170f69466a74defd8d",0,3,"0xdb4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","0x9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"),k224:new z.ecc.curve(z.bn.prime.p224k,"0x010000000000000000000000000001dce8d2ec6184caf0a971769fb1f7",0,5,"0xa1455b334df099df30fc28a169a467e9e47075a90f7e650eb6b7a45c","0x7e089fed7fba344282cafbd6f7e319f7c0b0bd59e2ca4bdb556d61a5"),k256:new z.ecc.curve(z.bn.prime.p256k,"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};z.ecc.curveName=function(A){for(var j in z.ecc.curves)if(z.ecc.curves.hasOwnProperty(j)&&z.ecc.curves[j]===A)return j;throw new z.exception.invalid("no such curve")};z.ecc.deserialize=function(A){if(!A||!A.curve||!z.ecc.curves[A.curve])throw new z.exception.invalid("invalid serialization");if(["elGamal","ecdsa"].indexOf(A.type)===-1)throw new z.exception.invalid("invalid type");var j=z.ecc.curves[A.curve];if(A.secretKey){if(!A.exponent)throw new z.exception.invalid("invalid exponent");var e=new z.bn(A.exponent);return new z.ecc[A.type].secretKey(j,e)}if(!A.point)throw new z.exception.invalid("invalid point");return e=j.fromBits(z.codec.hex.toBits(A.point)),new z.ecc[A.type].publicKey(j,e)};z.ecc.basicKey={publicKey:function(A,j){this.o=A,this.C=A.r.bitLength(),j instanceof Array?this.B=A.fromBits(j):this.B=j,this.serialize=function(){var e=z.ecc.curveName(A);return{type:this.getType(),secretKey:!1,point:z.codec.hex.fromBits(this.B.toBits()),curve:e}},this.get=function(){var r=this.B.toBits(),e=z.bitArray.bitLength(r),t=z.bitArray.bitSlice(r,0,e/2),r=z.bitArray.bitSlice(r,e/2);return{x:t,y:r}}},secretKey:function(A,j){this.o=A,this.C=A.r.bitLength(),this.M=j,this.serialize=function(){var e=this.get(),t=z.ecc.curveName(A);return{type:this.getType(),secretKey:!0,exponent:z.codec.hex.fromBits(e),curve:t}},this.get=function(){return this.M.toBits()}}};z.ecc.basicKey.generateKeys=function(A){return function(j,e,t){if(j=j||256,typeof j=="number"&&(j=z.ecc.curves["c"+j],j===void 0))throw new z.exception.invalid("no such curve");return t=t||z.bn.random(j.r,e),e=j.G.mult(t),{pub:new z.ecc[A].publicKey(j,e),sec:new z.ecc[A].secretKey(j,t)}}};z.ecc.elGamal={generateKeys:z.ecc.basicKey.generateKeys("elGamal"),publicKey:function(A,j){z.ecc.basicKey.publicKey.apply(this,arguments)},secretKey:function(A,j){z.ecc.basicKey.secretKey.apply(this,arguments)}};z.ecc.elGamal.publicKey.prototype={kem:function(A){A=z.bn.random(this.o.r,A);var j=this.o.G.mult(A).toBits();return{key:z.hash.sha256.hash(this.B.mult(A).toBits()),tag:j}},getType:function(){return"elGamal"}};z.ecc.elGamal.secretKey.prototype={unkem:function(A){return z.hash.sha256.hash(this.o.fromBits(A).mult(this.M).toBits())},dh:function(A){return z.hash.sha256.hash(A.B.mult(this.M).toBits())},dhJavaEc:function(A){return A.B.mult(this.M).x.toBits()},getType:function(){return"elGamal"}};z.ecc.ecdsa={generateKeys:z.ecc.basicKey.generateKeys("ecdsa")};z.ecc.ecdsa.publicKey=function(A,j){z.ecc.basicKey.publicKey.apply(this,arguments)};z.ecc.ecdsa.publicKey.prototype={verify:function(A,j,e){z.bitArray.bitLength(A)>this.C&&(A=z.bitArray.clamp(A,this.C));var a=z.bitArray,t=this.o.r,o=this.C,r=z.bn.fromBits(a.bitSlice(j,0,o)),a=z.bn.fromBits(a.bitSlice(j,o,2*o)),n=e?a:a.inverseMod(t),o=z.bn.fromBits(A).mul(n).mod(t),n=r.mul(n).mod(t),o=this.o.G.mult2(o,n,this.B).x;if(r.equals(0)||a.equals(0)||r.greaterEquals(t)||a.greaterEquals(t)||!o.equals(r)){if(e===void 0)return this.verify(A,j,!0);throw new z.exception.corrupt("signature didn't check out")}return!0},getType:function(){return"ecdsa"}};z.ecc.ecdsa.secretKey=function(A,j){z.ecc.basicKey.secretKey.apply(this,arguments)};z.ecc.ecdsa.secretKey.prototype={sign:function(A,j,e,t){z.bitArray.bitLength(A)>this.C&&(A=z.bitArray.clamp(A,this.C));var r=this.o.r,a=r.bitLength();return t=t||z.bn.random(r.sub(1),j).add(1),j=this.o.G.mult(t).x.mod(r),A=z.bn.fromBits(A).add(j.mul(this.M)),e=e?A.inverseMod(r).mul(t).mod(r):A.mul(t.inverseMod(r)).mod(r),z.bitArray.concat(j.toBits(a),e.toBits(a))},getType:function(){return"ecdsa"}};z.prng=function(A){this.m=[new z.hash.sha256],this.F=[0],this.X=0,this.P={},this.W=0,this.$={},this.ea=this.u=this.H=this.na=0,this.f=[0,0,0,0,0,0,0,0],this.A=[0,0,0,0],this.U=void 0,this.V=A,this.O=!1,this.T={progress:{},seeded:{}},this.J=this.ma=0,this.R=1,this.S=2,this.ja=65536,this.Z=[0,48,64,96,128,192,256,384,512,768,1024],this.ka=3e4,this.ia=80};z.prng.prototype={randomWords:function(A,j){var e=[],t;t=this.isReady(j);var r;if(t===this.J)throw new z.exception.notReady("generator isn't seeded");if(t&this.S){t=!(t&this.R),r=[];var a=0,n;for(this.ea=r[0]=new Date().valueOf()+this.ka,n=0;16>n;n++)r.push(4294967296*Math.random()|0);for(n=0;n<this.m.length&&(r=r.concat(this.m[n].finalize()),a+=this.F[n],this.F[n]=0,t||!(this.X&1<<n));n++);for(this.X>=1<<this.m.length&&(this.m.push(new z.hash.sha256),this.F.push(0)),this.u-=a,a>this.H&&(this.H=a),this.X++,this.f=z.hash.sha256.hash(this.f.concat(r)),this.U=new z.cipher.aes(this.f),t=0;4>t&&(this.A[t]=this.A[t]+1|0,!this.A[t]);t++);}for(t=0;t<A;t+=4)(t+1)%this.ja===0&&ehA(this),r=Z9(this),e.push(r[0],r[1],r[2],r[3]);return ehA(this),e.slice(0,A)},setDefaultParanoia:function(A,j){if(A===0&&j!=="Setting paranoia=0 will ruin your security; use it only for testing")throw new z.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.V=A},addEntropy:function(A,j,e){e=e||"user";var t,r,a=new Date().valueOf(),n=this.P[e],o=this.isReady(),i=0;switch(t=this.$[e],t===void 0&&(t=this.$[e]=this.na++),n===void 0&&(n=this.P[e]=0),this.P[e]=(this.P[e]+1)%this.m.length,typeof A){case"number":j===void 0&&(j=1),this.m[n].update([t,this.W++,1,j,a,1,A|0]);break;case"object":if(e=Object.prototype.toString.call(A),e==="[object Uint32Array]"){for(r=[],e=0;e<A.length;e++)r.push(A[e]);A=r}else for(e!=="[object Array]"&&(i=1),e=0;e<A.length&&!i;e++)typeof A[e]!="number"&&(i=1);if(!i){if(j===void 0)for(e=j=0;e<A.length;e++)for(r=A[e];0<r;)j++,r=r>>>1;this.m[n].update([t,this.W++,2,j,a,A.length].concat(A))}break;case"string":j===void 0&&(j=A.length),this.m[n].update([t,this.W++,3,j,a,A.length]),this.m[n].update(A);break;default:i=1}if(i)throw new z.exception.bug("random: addEntropy only supports number, array of numbers or string");this.F[n]+=j,this.u+=j,o===this.J&&(this.isReady()!==this.J&&jhA("seeded",Math.max(this.H,this.u)),jhA("progress",this.getProgress()))},isReady:function(A){return A=this.Z[A!==void 0?A:this.V],this.H&&this.H>=A?this.F[0]>this.ia&&new Date().valueOf()>this.ea?this.S|this.R:this.R:this.u>=A?this.S|this.J:this.J},getProgress:function(A){return A=this.Z[A||this.V],this.H>=A||this.u>A?1:this.u/A},startCollectors:function(){if(!this.O){if(this.h={loadTimeCollector:K0(this,this.ua),mouseCollector:K0(this,this.va),keyboardCollector:K0(this,this.sa),accelerometerCollector:K0(this,this.la),touchCollector:K0(this,this.xa)},window.addEventListener)window.addEventListener("load",this.h.loadTimeCollector,!1),window.addEventListener("mousemove",this.h.mouseCollector,!1),window.addEventListener("keypress",this.h.keyboardCollector,!1),window.addEventListener("devicemotion",this.h.accelerometerCollector,!1),window.addEventListener("touchmove",this.h.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.h.loadTimeCollector),document.attachEvent("onmousemove",this.h.mouseCollector),document.attachEvent("keypress",this.h.keyboardCollector);else throw new z.exception.bug("can't attach event");this.O=!0}},stopCollectors:function(){this.O&&(window.removeEventListener?(window.removeEventListener("load",this.h.loadTimeCollector,!1),window.removeEventListener("mousemove",this.h.mouseCollector,!1),window.removeEventListener("keypress",this.h.keyboardCollector,!1),window.removeEventListener("devicemotion",this.h.accelerometerCollector,!1),window.removeEventListener("touchmove",this.h.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.h.loadTimeCollector),document.detachEvent("onmousemove",this.h.mouseCollector),document.detachEvent("keypress",this.h.keyboardCollector)),this.O=!1)},addEventListener:function(A,j){this.T[A][this.ma++]=j},removeEventListener:function(A,j){var e,t,r=this.T[A],a=[];for(t in r)r.hasOwnProperty(t)&&r[t]===j&&a.push(t);for(e=0;e<a.length;e++)t=a[e],delete r[t]},sa:function(){T0(this,1)},va:function(A){var j,e;try{j=A.x||A.clientX||A.offsetX||0,e=A.y||A.clientY||A.offsetY||0}catch{e=j=0}j!=0&&e!=0&&this.addEntropy([j,e],2,"mouse"),T0(this,0)},xa:function(A){A=A.touches[0]||A.changedTouches[0],this.addEntropy([A.pageX||A.clientX,A.pageY||A.clientY],1,"touch"),T0(this,0)},ua:function(){T0(this,2)},la:function(A){if(A=A.accelerationIncludingGravity.x||A.accelerationIncludingGravity.y||A.accelerationIncludingGravity.z,window.orientation){var j=window.orientation;typeof j=="number"&&this.addEntropy(j,1,"accelerometer")}A&&this.addEntropy(A,2,"accelerometer"),T0(this,0)}};function jhA(A,j){var e,t=z.random.T[A],r=[];for(e in t)t.hasOwnProperty(e)&&r.push(t[e]);for(e=0;e<r.length;e++)r[e](j)}function T0(A,j){typeof window<"u"&&window.performance&&typeof window.performance.now=="function"?A.addEntropy(window.performance.now(),j,"loadtime"):A.addEntropy(new Date().valueOf(),j,"loadtime")}function ehA(A){A.f=Z9(A).concat(Z9(A)),A.U=new z.cipher.aes(A.f)}function Z9(A){for(var j=0;4>j&&(A.A[j]=A.A[j]+1|0,!A.A[j]);j++);return A.U.encrypt(A.A)}function K0(A,j){return function(){j.apply(A,arguments)}}z.random=new z.prng(6);A:try{if(QO=typeof Yx<"u"&&Yx.exports){try{ZO=Lb("crypto")}catch{ZO=null}QO=YO=ZO}if(QO&&YO.randomBytes)S0=YO.randomBytes(128),S0=new Uint32Array(new Uint8Array(S0).buffer),z.random.addEntropy(S0,1024,"crypto['randomBytes']");else if(typeof window<"u"&&typeof Uint32Array<"u"){if(M0=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(M0);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(M0);else break A;z.random.addEntropy(M0,1024,"crypto['getRandomValues']")}}catch(A){typeof window<"u"&&window.console}var S0,YO,M0,QO,ZO});var gh=OA((Y4,kvA)=>{(function(){var A,j=0xdeadbeefcafe,e=(j&16777215)==15715070;function t(F,w,M){F!=null&&(typeof F=="number"?this.fromNumber(F,w,M):w==null&&typeof F!="string"?this.fromString(F,256):this.fromString(F,w))}function r(){return new t(null)}function a(F,w,M,sA,XA,nj){for(;--nj>=0;){var Tj=w*this[F++]+M[sA]+XA;XA=Math.floor(Tj/67108864),M[sA++]=Tj&67108863}return XA}function n(F,w,M,sA,XA,nj){for(var Tj=w&32767,Be=w>>15;--nj>=0;){var Ka=this[F]&32767,Xn=this[F++]>>15,Ns=Be*Ka+Xn*Tj;Ka=Tj*Ka+((Ns&32767)<<15)+M[sA]+(XA&1073741823),XA=(Ka>>>30)+(Ns>>>15)+Be*Xn+(XA>>>30),M[sA++]=Ka&1073741823}return XA}function o(F,w,M,sA,XA,nj){for(var Tj=w&16383,Be=w>>14;--nj>=0;){var Ka=this[F]&16383,Xn=this[F++]>>14,Ns=Be*Ka+Xn*Tj;Ka=Tj*Ka+((Ns&16383)<<14)+M[sA]+XA,XA=(Ka>>28)+(Ns>>14)+Be*Xn,M[sA++]=Ka&268435455}return XA}var i=typeof navigator<"u";i&&e&&navigator.appName=="Microsoft Internet Explorer"?(t.prototype.am=n,A=30):i&&e&&navigator.appName!="Netscape"?(t.prototype.am=a,A=26):(t.prototype.am=o,A=28),t.prototype.DB=A,t.prototype.DM=(1<<A)-1,t.prototype.DV=1<<A;var s=52;t.prototype.FV=Math.pow(2,s),t.prototype.F1=s-A,t.prototype.F2=2*A-s;var l="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,k,u;for(k=48,u=0;u<=9;++u)d[k++]=u;for(k=97,u=10;u<36;++u)d[k++]=u;for(k=65,u=10;u<36;++u)d[k++]=u;function m(F){return l.charAt(F)}function I(F,w){var M=d[F.charCodeAt(w)];return M??-1}function S(F){for(var w=this.t-1;w>=0;--w)F[w]=this[w];F.t=this.t,F.s=this.s}function f(F){this.t=1,this.s=F<0?-1:0,F>0?this[0]=F:F<-1?this[0]=F+this.DV:this.t=0}function v(F){var w=r();return w.fromInt(F),w}function P(F,w){var M;if(w==16)M=4;else if(w==8)M=3;else if(w==256)M=8;else if(w==2)M=1;else if(w==32)M=5;else if(w==4)M=2;else{this.fromRadix(F,w);return}this.t=0,this.s=0;for(var sA=F.length,XA=!1,nj=0;--sA>=0;){var Tj=M==8?F[sA]&255:I(F,sA);if(Tj<0){F.charAt(sA)=="-"&&(XA=!0);continue}XA=!1,nj==0?this[this.t++]=Tj:nj+M>this.DB?(this[this.t-1]|=(Tj&(1<<this.DB-nj)-1)<<nj,this[this.t++]=Tj>>this.DB-nj):this[this.t-1]|=Tj<<nj,nj+=M,nj>=this.DB&&(nj-=this.DB)}M==8&&(F[0]&128)!=0&&(this.s=-1,nj>0&&(this[this.t-1]|=(1<<this.DB-nj)-1<<nj)),this.clamp(),XA&&t.ZERO.subTo(this,this)}function D(){for(var F=this.s&this.DM;this.t>0&&this[this.t-1]==F;)--this.t}function C(F){if(this.s<0)return"-"+this.negate().toString(F);var w;if(F==16)w=4;else if(F==8)w=3;else if(F==2)w=1;else if(F==32)w=5;else if(F==4)w=2;else return this.toRadix(F);var M=(1<<w)-1,sA,XA=!1,nj="",Tj=this.t,Be=this.DB-Tj*this.DB%w;if(Tj-- >0)for(Be<this.DB&&(sA=this[Tj]>>Be)>0&&(XA=!0,nj=m(sA));Tj>=0;)Be<w?(sA=(this[Tj]&(1<<Be)-1)<<w-Be,sA|=this[--Tj]>>(Be+=this.DB-w)):(sA=this[Tj]>>(Be-=w)&M,Be<=0&&(Be+=this.DB,--Tj)),sA>0&&(XA=!0),XA&&(nj+=m(sA));return XA?nj:"0"}function b(){var F=r();return t.ZERO.subTo(this,F),F}function h(){return this.s<0?this.negate():this}function O(F){var w=this.s-F.s;if(w!=0)return w;var M=this.t;if(w=M-F.t,w!=0)return this.s<0?-w:w;for(;--M>=0;)if((w=this[M]-F[M])!=0)return w;return 0}function V(F){var w=1,M;return(M=F>>>16)!=0&&(F=M,w+=16),(M=F>>8)!=0&&(F=M,w+=8),(M=F>>4)!=0&&(F=M,w+=4),(M=F>>2)!=0&&(F=M,w+=2),(M=F>>1)!=0&&(F=M,w+=1),w}function Y(){return this.t<=0?0:this.DB*(this.t-1)+V(this[this.t-1]^this.s&this.DM)}function rA(F,w){var M;for(M=this.t-1;M>=0;--M)w[M+F]=this[M];for(M=F-1;M>=0;--M)w[M]=0;w.t=this.t+F,w.s=this.s}function yA(F,w){for(var M=F;M<this.t;++M)w[M-F]=this[M];w.t=Math.max(this.t-F,0),w.s=this.s}function VA(F,w){var M=F%this.DB,sA=this.DB-M,XA=(1<<sA)-1,nj=Math.floor(F/this.DB),Tj=this.s<<M&this.DM,Be;for(Be=this.t-1;Be>=0;--Be)w[Be+nj+1]=this[Be]>>sA|Tj,Tj=(this[Be]&XA)<<M;for(Be=nj-1;Be>=0;--Be)w[Be]=0;w[nj]=Tj,w.t=this.t+nj+1,w.s=this.s,w.clamp()}function dj(F,w){w.s=this.s;var M=Math.floor(F/this.DB);if(M>=this.t){w.t=0;return}var sA=F%this.DB,XA=this.DB-sA,nj=(1<<sA)-1;w[0]=this[M]>>sA;for(var Tj=M+1;Tj<this.t;++Tj)w[Tj-M-1]|=(this[Tj]&nj)<<XA,w[Tj-M]=this[Tj]>>sA;sA>0&&(w[this.t-M-1]|=(this.s&nj)<<XA),w.t=this.t-M,w.clamp()}function bA(F,w){for(var M=0,sA=0,XA=Math.min(F.t,this.t);M<XA;)sA+=this[M]-F[M],w[M++]=sA&this.DM,sA>>=this.DB;if(F.t<this.t){for(sA-=F.s;M<this.t;)sA+=this[M],w[M++]=sA&this.DM,sA>>=this.DB;sA+=this.s}else{for(sA+=this.s;M<F.t;)sA-=F[M],w[M++]=sA&this.DM,sA>>=this.DB;sA-=F.s}w.s=sA<0?-1:0,sA<-1?w[M++]=this.DV+sA:sA>0&&(w[M++]=sA),w.t=M,w.clamp()}function Mj(F,w){var M=this.abs(),sA=F.abs(),XA=M.t;for(w.t=XA+sA.t;--XA>=0;)w[XA]=0;for(XA=0;XA<sA.t;++XA)w[XA+M.t]=M.am(0,sA[XA],w,XA,0,M.t);w.s=0,w.clamp(),this.s!=F.s&&t.ZERO.subTo(w,w)}function mj(F){for(var w=this.abs(),M=F.t=2*w.t;--M>=0;)F[M]=0;for(M=0;M<w.t-1;++M){var sA=w.am(M,w[M],F,2*M,0,1);(F[M+w.t]+=w.am(M+1,2*w[M],F,2*M+1,sA,w.t-M-1))>=w.DV&&(F[M+w.t]-=w.DV,F[M+w.t+1]=1)}F.t>0&&(F[F.t-1]+=w.am(M,w[M],F,2*M,0,1)),F.s=0,F.clamp()}function ae(F,w,M){var sA=F.abs();if(!(sA.t<=0)){var XA=this.abs();if(XA.t<sA.t){w?.fromInt(0),M!=null&&this.copyTo(M);return}M==null&&(M=r());var nj=r(),Tj=this.s,Be=F.s,Ka=this.DB-V(sA[sA.t-1]);Ka>0?(sA.lShiftTo(Ka,nj),XA.lShiftTo(Ka,M)):(sA.copyTo(nj),XA.copyTo(M));var Xn=nj.t,Ns=nj[Xn-1];if(Ns!=0){var os=Ns*(1<<this.F1)+(Xn>1?nj[Xn-2]>>this.F2:0),xd=this.FV/os,Jv=(1<<this.F1)/os,Cl=1<<this.F2,Hl=M.t,Uv=Hl-Xn,Wk=w??r();for(nj.dlShiftTo(Uv,Wk),M.compareTo(Wk)>=0&&(M[M.t++]=1,M.subTo(Wk,M)),t.ONE.dlShiftTo(Xn,Wk),Wk.subTo(nj,nj);nj.t<Xn;)nj[nj.t++]=0;for(;--Uv>=0;){var Kb=M[--Hl]==Ns?this.DM:Math.floor(M[Hl]*xd+(M[Hl-1]+Cl)*Jv);if((M[Hl]+=nj.am(0,Kb,M,Uv,0,Xn))<Kb)for(nj.dlShiftTo(Uv,Wk),M.subTo(Wk,M);M[Hl]<--Kb;)M.subTo(Wk,M)}w!=null&&(M.drShiftTo(Xn,w),Tj!=Be&&t.ZERO.subTo(w,w)),M.t=Xn,M.clamp(),Ka>0&&M.rShiftTo(Ka,M),Tj<0&&t.ZERO.subTo(M,M)}}}function _j(F){var w=r();return this.abs().divRemTo(F,null,w),this.s<0&&w.compareTo(t.ZERO)>0&&F.subTo(w,w),w}function cj(F){this.m=F}function Qj(F){return F.s<0||F.compareTo(this.m)>=0?F.mod(this.m):F}function Cj(F){return F}function kj(F){F.divRemTo(this.m,null,F)}function Bj(F,w,M){F.multiplyTo(w,M),this.reduce(M)}function De(F,w){F.squareTo(w),this.reduce(w)}cj.prototype.convert=Qj,cj.prototype.revert=Cj,cj.prototype.reduce=kj,cj.prototype.mulTo=Bj,cj.prototype.sqrTo=De;function wt(){if(this.t<1)return 0;var F=this[0];if((F&1)==0)return 0;var w=F&3;return w=w*(2-(F&15)*w)&15,w=w*(2-(F&255)*w)&255,w=w*(2-((F&65535)*w&65535))&65535,w=w*(2-F*w%this.DV)%this.DV,w>0?this.DV-w:-w}function wj(F){this.m=F,this.mp=F.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<F.DB-15)-1,this.mt2=2*F.t}function Bt(F){var w=r();return F.abs().dlShiftTo(this.m.t,w),w.divRemTo(this.m,null,w),F.s<0&&w.compareTo(t.ZERO)>0&&this.m.subTo(w,w),w}function Ye(F){var w=r();return F.copyTo(w),this.reduce(w),w}function Ie(F){for(;F.t<=this.mt2;)F[F.t++]=0;for(var w=0;w<this.m.t;++w){var M=F[w]&32767,sA=M*this.mpl+((M*this.mph+(F[w]>>15)*this.mpl&this.um)<<15)&F.DM;for(M=w+this.m.t,F[M]+=this.m.am(0,sA,F,w,0,this.m.t);F[M]>=F.DV;)F[M]-=F.DV,F[++M]++}F.clamp(),F.drShiftTo(this.m.t,F),F.compareTo(this.m)>=0&&F.subTo(this.m,F)}function Ee(F,w){F.squareTo(w),this.reduce(w)}function er(F,w,M){F.multiplyTo(w,M),this.reduce(M)}wj.prototype.convert=Bt,wj.prototype.revert=Ye,wj.prototype.reduce=Ie,wj.prototype.mulTo=er,wj.prototype.sqrTo=Ee;function Vt(){return(this.t>0?this[0]&1:this.s)==0}function yt(F,w){if(F>4294967295||F<1)return t.ONE;var M=r(),sA=r(),XA=w.convert(this),nj=V(F)-1;for(XA.copyTo(M);--nj>=0;)if(w.sqrTo(M,sA),(F&1<<nj)>0)w.mulTo(sA,XA,M);else{var Tj=M;M=sA,sA=Tj}return w.revert(M)}function Sr(F,w){var M;return F<256||w.isEven()?M=new cj(w):M=new wj(w),this.exp(F,M)}t.prototype.copyTo=S,t.prototype.fromInt=f,t.prototype.fromString=P,t.prototype.clamp=D,t.prototype.dlShiftTo=rA,t.prototype.drShiftTo=yA,t.prototype.lShiftTo=VA,t.prototype.rShiftTo=dj,t.prototype.subTo=bA,t.prototype.multiplyTo=Mj,t.prototype.squareTo=mj,t.prototype.divRemTo=ae,t.prototype.invDigit=wt,t.prototype.isEven=Vt,t.prototype.exp=yt,t.prototype.toString=C,t.prototype.negate=b,t.prototype.abs=h,t.prototype.compareTo=O,t.prototype.bitLength=Y,t.prototype.mod=_j,t.prototype.modPowInt=Sr,t.ZERO=v(0),t.ONE=v(1);function Dr(){var F=r();return this.copyTo(F),F}function yr(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ra(){return this.t==0?this.s:this[0]<<24>>24}function at(){return this.t==0?this.s:this[0]<<16>>16}function st(F){return Math.floor(Math.LN2*this.DB/Math.log(F))}function kr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Va(F){if(F==null&&(F=10),this.signum()==0||F<2||F>36)return"0";var w=this.chunkSize(F),M=Math.pow(F,w),sA=v(M),XA=r(),nj=r(),Tj="";for(this.divRemTo(sA,XA,nj);XA.signum()>0;)Tj=(M+nj.intValue()).toString(F).substr(1)+Tj,XA.divRemTo(sA,XA,nj);return nj.intValue().toString(F)+Tj}function je(F,w){this.fromInt(0),w==null&&(w=10);for(var M=this.chunkSize(w),sA=Math.pow(w,M),XA=!1,nj=0,Tj=0,Be=0;Be<F.length;++Be){var Ka=I(F,Be);if(Ka<0){F.charAt(Be)=="-"&&this.signum()==0&&(XA=!0);continue}Tj=w*Tj+Ka,++nj>=M&&(this.dMultiply(sA),this.dAddOffset(Tj,0),nj=0,Tj=0)}nj>0&&(this.dMultiply(Math.pow(w,nj)),this.dAddOffset(Tj,0)),XA&&t.ZERO.subTo(this,this)}function oA(F,w,M){if(typeof w=="number")if(F<2)this.fromInt(1);else for(this.fromNumber(F,M),this.testBit(F-1)||this.bitwiseTo(t.ONE.shiftLeft(F-1),eA,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(w);)this.dAddOffset(2,0),this.bitLength()>F&&this.subTo(t.ONE.shiftLeft(F-1),this);else{var sA=new Array,XA=F&7;sA.length=(F>>3)+1,w.nextBytes(sA),XA>0?sA[0]&=(1<<XA)-1:sA[0]=0,this.fromString(sA,256)}}function gA(){var F=this.t,w=new Array;w[0]=this.s;var M=this.DB-F*this.DB%8,sA,XA=0;if(F-- >0)for(M<this.DB&&(sA=this[F]>>M)!=(this.s&this.DM)>>M&&(w[XA++]=sA|this.s<<this.DB-M);F>=0;)M<8?(sA=(this[F]&(1<<M)-1)<<8-M,sA|=this[--F]>>(M+=this.DB-8)):(sA=this[F]>>(M-=8)&255,M<=0&&(M+=this.DB,--F)),(sA&128)!=0&&(sA|=-256),XA==0&&(this.s&128)!=(sA&128)&&++XA,(XA>0||sA!=this.s)&&(w[XA++]=sA);return w}function KA(F){return this.compareTo(F)==0}function xj(F){return this.compareTo(F)<0?this:F}function gj(F){return this.compareTo(F)>0?this:F}function ve(F,w,M){var sA,XA,nj=Math.min(F.t,this.t);for(sA=0;sA<nj;++sA)M[sA]=w(this[sA],F[sA]);if(F.t<this.t){for(XA=F.s&this.DM,sA=nj;sA<this.t;++sA)M[sA]=w(this[sA],XA);M.t=this.t}else{for(XA=this.s&this.DM,sA=nj;sA<F.t;++sA)M[sA]=w(XA,F[sA]);M.t=F.t}M.s=w(this.s,F.s),M.clamp()}function uj(F,w){return F&w}function lA(F){var w=r();return this.bitwiseTo(F,uj,w),w}function eA(F,w){return F|w}function FA(F){var w=r();return this.bitwiseTo(F,eA,w),w}function Jj(F,w){return F^w}function Er(F){var w=r();return this.bitwiseTo(F,Jj,w),w}function cn(F,w){return F&~w}function Zo(F){var w=r();return this.bitwiseTo(F,cn,w),w}function Zr(){for(var F=r(),w=0;w<this.t;++w)F[w]=this.DM&~this[w];return F.t=this.t,F.s=~this.s,F}function $n(F){var w=r();return F<0?this.rShiftTo(-F,w):this.lShiftTo(F,w),w}function wn(F){var w=r();return F<0?this.lShiftTo(-F,w):this.rShiftTo(F,w),w}function cp(F){if(F==0)return-1;var w=0;return(F&65535)==0&&(F>>=16,w+=16),(F&255)==0&&(F>>=8,w+=8),(F&15)==0&&(F>>=4,w+=4),(F&3)==0&&(F>>=2,w+=2),(F&1)==0&&++w,w}function vd(){for(var F=0;F<this.t;++F)if(this[F]!=0)return F*this.DB+cp(this[F]);return this.s<0?this.t*this.DB:-1}function ee(F){for(var w=0;F!=0;)F&=F-1,++w;return w}function Ls(){for(var F=0,w=this.s&this.DM,M=0;M<this.t;++M)F+=ee(this[M]^w);return F}function xc(F){var w=Math.floor(F/this.DB);return w>=this.t?this.s!=0:(this[w]&1<<F%this.DB)!=0}function Ai(F,w){var M=t.ONE.shiftLeft(F);return this.bitwiseTo(M,w,M),M}function In(F){return this.changeBit(F,eA)}function Wt(F){return this.changeBit(F,cn)}function Vk(F){return this.changeBit(F,Jj)}function Ot(F,w){for(var M=0,sA=0,XA=Math.min(F.t,this.t);M<XA;)sA+=this[M]+F[M],w[M++]=sA&this.DM,sA>>=this.DB;if(F.t<this.t){for(sA+=F.s;M<this.t;)sA+=this[M],w[M++]=sA&this.DM,sA>>=this.DB;sA+=this.s}else{for(sA+=this.s;M<F.t;)sA+=F[M],w[M++]=sA&this.DM,sA>>=this.DB;sA+=F.s}w.s=sA<0?-1:0,sA>0?w[M++]=sA:sA<-1&&(w[M++]=this.DV+sA),w.t=M,w.clamp()}function Pl(F){var w=r();return this.addTo(F,w),w}function G(F){var w=r();return this.subTo(F,w),w}function T(F){var w=r();return this.multiplyTo(F,w),w}function H(){var F=r();return this.squareTo(F),F}function B(F){var w=r();return this.divRemTo(F,w,null),w}function R(F){var w=r();return this.divRemTo(F,null,w),w}function uA(F){var w=r(),M=r();return this.divRemTo(F,w,M),new Array(w,M)}function qA(F){this[this.t]=this.am(0,F-1,this,0,0,this.t),++this.t,this.clamp()}function QA(F,w){if(F!=0){for(;this.t<=w;)this[this.t++]=0;for(this[w]+=F;this[w]>=this.DV;)this[w]-=this.DV,++w>=this.t&&(this[this.t++]=0),++this[w]}}function fj(){}function $(F){return F}function L(F,w,M){F.multiplyTo(w,M)}function Q(F,w){F.squareTo(w)}fj.prototype.convert=$,fj.prototype.revert=$,fj.prototype.mulTo=L,fj.prototype.sqrTo=Q;function N(F){return this.exp(F,new fj)}function kA(F,w,M){var sA=Math.min(this.t+F.t,w);for(M.s=0,M.t=sA;sA>0;)M[--sA]=0;var XA;for(XA=M.t-this.t;sA<XA;++sA)M[sA+this.t]=this.am(0,F[sA],M,sA,0,this.t);for(XA=Math.min(F.t,w);sA<XA;++sA)this.am(0,F[sA],M,sA,0,w-sA);M.clamp()}function BA(F,w,M){--w;var sA=M.t=this.t+F.t-w;for(M.s=0;--sA>=0;)M[sA]=0;for(sA=Math.max(w-this.t,0);sA<F.t;++sA)M[this.t+sA-w]=this.am(w-sA,F[sA],M,0,0,this.t+sA-w);M.clamp(),M.drShiftTo(1,M)}function vA(F){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*F.t,this.r2),this.mu=this.r2.divide(F),this.m=F}function EA(F){if(F.s<0||F.t>2*this.m.t)return F.mod(this.m);if(F.compareTo(this.m)<0)return F;var w=r();return F.copyTo(w),this.reduce(w),w}function RA(F){return F}function Ej(F){for(F.drShiftTo(this.m.t-1,this.r2),F.t>this.m.t+1&&(F.t=this.m.t+1,F.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);F.compareTo(this.r2)<0;)F.dAddOffset(1,this.m.t+1);for(F.subTo(this.r2,F);F.compareTo(this.m)>=0;)F.subTo(this.m,F)}function Vj(F,w){F.squareTo(w),this.reduce(w)}function UA(F,w,M){F.multiplyTo(w,M),this.reduce(M)}vA.prototype.convert=EA,vA.prototype.revert=RA,vA.prototype.reduce=Ej,vA.prototype.mulTo=UA,vA.prototype.sqrTo=Vj;function Hj(F,w){var M=F.bitLength(),sA,XA=v(1),nj;if(M<=0)return XA;M<18?sA=1:M<48?sA=3:M<144?sA=4:M<768?sA=5:sA=6,M<8?nj=new cj(w):w.isEven()?nj=new vA(w):nj=new wj(w);var Tj=new Array,Be=3,Ka=sA-1,Xn=(1<<sA)-1;if(Tj[1]=nj.convert(this),sA>1){var Ns=r();for(nj.sqrTo(Tj[1],Ns);Be<=Xn;)Tj[Be]=r(),nj.mulTo(Ns,Tj[Be-2],Tj[Be]),Be+=2}var os=F.t-1,xd,Jv=!0,Cl=r(),Hl;for(M=V(F[os])-1;os>=0;){for(M>=Ka?xd=F[os]>>M-Ka&Xn:(xd=(F[os]&(1<<M+1)-1)<<Ka-M,os>0&&(xd|=F[os-1]>>this.DB+M-Ka)),Be=sA;(xd&1)==0;)xd>>=1,--Be;if((M-=Be)<0&&(M+=this.DB,--os),Jv)Tj[xd].copyTo(XA),Jv=!1;else{for(;Be>1;)nj.sqrTo(XA,Cl),nj.sqrTo(Cl,XA),Be-=2;Be>0?nj.sqrTo(XA,Cl):(Hl=XA,XA=Cl,Cl=Hl),nj.mulTo(Cl,Tj[xd],XA)}for(;os>=0&&(F[os]&1<<M)==0;)nj.sqrTo(XA,Cl),Hl=XA,XA=Cl,Cl=Hl,--M<0&&(M=this.DB-1,--os)}return nj.revert(XA)}function Uj(F){var w=this.s<0?this.negate():this.clone(),M=F.s<0?F.negate():F.clone();if(w.compareTo(M)<0){var sA=w;w=M,M=sA}var XA=w.getLowestSetBit(),nj=M.getLowestSetBit();if(nj<0)return w;for(XA<nj&&(nj=XA),nj>0&&(w.rShiftTo(nj,w),M.rShiftTo(nj,M));w.signum()>0;)(XA=w.getLowestSetBit())>0&&w.rShiftTo(XA,w),(XA=M.getLowestSetBit())>0&&M.rShiftTo(XA,M),w.compareTo(M)>=0?(w.subTo(M,w),w.rShiftTo(1,w)):(M.subTo(w,M),M.rShiftTo(1,M));return nj>0&&M.lShiftTo(nj,M),M}function te(F){if(F<=0)return 0;var w=this.DV%F,M=this.s<0?F-1:0;if(this.t>0)if(w==0)M=this[0]%F;else for(var sA=this.t-1;sA>=0;--sA)M=(w*M+this[sA])%F;return M}function Zj(F){var w=F.isEven();if(this.isEven()&&w||F.signum()==0)return t.ZERO;for(var M=F.clone(),sA=this.clone(),XA=v(1),nj=v(0),Tj=v(0),Be=v(1);M.signum()!=0;){for(;M.isEven();)M.rShiftTo(1,M),w?((!XA.isEven()||!nj.isEven())&&(XA.addTo(this,XA),nj.subTo(F,nj)),XA.rShiftTo(1,XA)):nj.isEven()||nj.subTo(F,nj),nj.rShiftTo(1,nj);for(;sA.isEven();)sA.rShiftTo(1,sA),w?((!Tj.isEven()||!Be.isEven())&&(Tj.addTo(this,Tj),Be.subTo(F,Be)),Tj.rShiftTo(1,Tj)):Be.isEven()||Be.subTo(F,Be),Be.rShiftTo(1,Be);M.compareTo(sA)>=0?(M.subTo(sA,M),w&&XA.subTo(Tj,XA),nj.subTo(Be,nj)):(sA.subTo(M,sA),w&&Tj.subTo(XA,Tj),Be.subTo(nj,Be))}if(sA.compareTo(t.ONE)!=0)return t.ZERO;if(Be.compareTo(F)>=0)return Be.subtract(F);if(Be.signum()<0)Be.addTo(F,Be);else return Be;return Be.signum()<0?Be.add(F):Be}var Fj=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],SA=(1<<26)/Fj[Fj.length-1];function MA(F){var w,M=this.abs();if(M.t==1&&M[0]<=Fj[Fj.length-1]){for(w=0;w<Fj.length;++w)if(M[0]==Fj[w])return!0;return!1}if(M.isEven())return!1;for(w=1;w<Fj.length;){for(var sA=Fj[w],XA=w+1;XA<Fj.length&&sA<SA;)sA*=Fj[XA++];for(sA=M.modInt(sA);w<XA;)if(sA%Fj[w++]==0)return!1}return M.millerRabin(F)}function Gj(F){var w=this.subtract(t.ONE),M=w.getLowestSetBit();if(M<=0)return!1;var sA=w.shiftRight(M);F=F+1>>1,F>Fj.length&&(F=Fj.length);for(var XA=r(),nj=0;nj<F;++nj){XA.fromInt(Fj[Math.floor(Math.random()*Fj.length)]);var Tj=XA.modPow(sA,this);if(Tj.compareTo(t.ONE)!=0&&Tj.compareTo(w)!=0){for(var Be=1;Be++<M&&Tj.compareTo(w)!=0;)if(Tj=Tj.modPowInt(2,this),Tj.compareTo(t.ONE)==0)return!1;if(Tj.compareTo(w)!=0)return!1}}return!0}t.prototype.chunkSize=st,t.prototype.toRadix=Va,t.prototype.fromRadix=je,t.prototype.fromNumber=oA,t.prototype.bitwiseTo=ve,t.prototype.changeBit=Ai,t.prototype.addTo=Ot,t.prototype.dMultiply=qA,t.prototype.dAddOffset=QA,t.prototype.multiplyLowerTo=kA,t.prototype.multiplyUpperTo=BA,t.prototype.modInt=te,t.prototype.millerRabin=Gj,t.prototype.clone=Dr,t.prototype.intValue=yr,t.prototype.byteValue=ra,t.prototype.shortValue=at,t.prototype.signum=kr,t.prototype.toByteArray=gA,t.prototype.equals=KA,t.prototype.min=xj,t.prototype.max=gj,t.prototype.and=lA,t.prototype.or=FA,t.prototype.xor=Er,t.prototype.andNot=Zo,t.prototype.not=Zr,t.prototype.shiftLeft=$n,t.prototype.shiftRight=wn,t.prototype.getLowestSetBit=vd,t.prototype.bitCount=Ls,t.prototype.testBit=xc,t.prototype.setBit=In,t.prototype.clearBit=Wt,t.prototype.flipBit=Vk,t.prototype.add=Pl,t.prototype.subtract=G,t.prototype.multiply=T,t.prototype.divide=B,t.prototype.remainder=R,t.prototype.divideAndRemainder=uA,t.prototype.modPow=Hj,t.prototype.modInverse=Zj,t.prototype.pow=N,t.prototype.gcd=Uj,t.prototype.isProbablePrime=MA,t.prototype.square=H,t.prototype.Barrett=vA;var jj,WA,aj;function jt(F){WA[aj++]^=F&255,WA[aj++]^=F>>8&255,WA[aj++]^=F>>16&255,WA[aj++]^=F>>24&255,aj>=Mr&&(aj-=Mr)}function Pt(){jt(new Date().getTime())}if(WA==null){WA=new Array,aj=0;var nt;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Ct=new Uint8Array(32);for(window.crypto.getRandomValues(Ct),nt=0;nt<32;++nt)WA[aj++]=Ct[nt]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var jA=window.crypto.random(32);for(nt=0;nt<jA.length;++nt)WA[aj++]=jA.charCodeAt(nt)&255}}for(;aj<Mr;)nt=Math.floor(65536*Math.random()),WA[aj++]=nt>>>8,WA[aj++]=nt&255;aj=0,Pt()}function tr(){if(jj==null){for(Pt(),jj=g6(),jj.init(WA),aj=0;aj<WA.length;++aj)WA[aj]=0;aj=0}return jj.next()}function ur(F){var w;for(w=0;w<F.length;++w)F[w]=tr()}function or(){}or.prototype.nextBytes=ur;function Ht(){this.i=0,this.j=0,this.S=new Array}function ir(F){var w,M,sA;for(w=0;w<256;++w)this.S[w]=w;for(M=0,w=0;w<256;++w)M=M+this.S[w]+F[w%F.length]&255,sA=this.S[w],this.S[w]=this.S[M],this.S[M]=sA;this.i=0,this.j=0}function Mt(){var F;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,F=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=F,this.S[F+this.S[this.i]&255]}Ht.prototype.init=ir,Ht.prototype.next=Mt;function g6(){return new Ht}var Mr=256;t.SecureRandom=or,t.BigInteger=t,typeof Y4<"u"?Y4=kvA.exports=t:(this.BigInteger=t,this.SecureRandom=or)}).call(Y4)});var $xA=OA(()=>{});var wxA=OA((kPe,wP)=>{(function(A){"use strict";var j=function(G){var T,H=new Float64Array(16);if(G)for(T=0;T<G.length;T++)H[T]=G[T];return H},e=function(){throw new Error("no PRNG")},t=new Uint8Array(16),r=new Uint8Array(32);r[0]=9;var a=j(),n=j([1]),o=j([56129,1]),i=j([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s=j([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=j([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=j([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),k=j([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(G,T,H,B){G[T]=H>>24&255,G[T+1]=H>>16&255,G[T+2]=H>>8&255,G[T+3]=H&255,G[T+4]=B>>24&255,G[T+5]=B>>16&255,G[T+6]=B>>8&255,G[T+7]=B&255}function m(G,T,H,B,R){var uA,qA=0;for(uA=0;uA<R;uA++)qA|=G[T+uA]^H[B+uA];return(1&qA-1>>>8)-1}function I(G,T,H,B){return m(G,T,H,B,16)}function S(G,T,H,B){return m(G,T,H,B,32)}function f(G,T,H,B){for(var R=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,uA=H[0]&255|(H[1]&255)<<8|(H[2]&255)<<16|(H[3]&255)<<24,qA=H[4]&255|(H[5]&255)<<8|(H[6]&255)<<16|(H[7]&255)<<24,QA=H[8]&255|(H[9]&255)<<8|(H[10]&255)<<16|(H[11]&255)<<24,fj=H[12]&255|(H[13]&255)<<8|(H[14]&255)<<16|(H[15]&255)<<24,$=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,L=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,Q=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,N=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,kA=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,BA=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,vA=H[16]&255|(H[17]&255)<<8|(H[18]&255)<<16|(H[19]&255)<<24,EA=H[20]&255|(H[21]&255)<<8|(H[22]&255)<<16|(H[23]&255)<<24,RA=H[24]&255|(H[25]&255)<<8|(H[26]&255)<<16|(H[27]&255)<<24,Ej=H[28]&255|(H[29]&255)<<8|(H[30]&255)<<16|(H[31]&255)<<24,Vj=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,UA=R,Hj=uA,Uj=qA,te=QA,Zj=fj,Fj=$,SA=L,MA=Q,Gj=N,jj=kA,WA=BA,aj=vA,jt=EA,Pt=RA,nt=Ej,Ct=Vj,jA,tr=0;tr<20;tr+=2)jA=UA+jt|0,Zj^=jA<<7|jA>>>25,jA=Zj+UA|0,Gj^=jA<<9|jA>>>23,jA=Gj+Zj|0,jt^=jA<<13|jA>>>19,jA=jt+Gj|0,UA^=jA<<18|jA>>>14,jA=Fj+Hj|0,jj^=jA<<7|jA>>>25,jA=jj+Fj|0,Pt^=jA<<9|jA>>>23,jA=Pt+jj|0,Hj^=jA<<13|jA>>>19,jA=Hj+Pt|0,Fj^=jA<<18|jA>>>14,jA=WA+SA|0,nt^=jA<<7|jA>>>25,jA=nt+WA|0,Uj^=jA<<9|jA>>>23,jA=Uj+nt|0,SA^=jA<<13|jA>>>19,jA=SA+Uj|0,WA^=jA<<18|jA>>>14,jA=Ct+aj|0,te^=jA<<7|jA>>>25,jA=te+Ct|0,MA^=jA<<9|jA>>>23,jA=MA+te|0,aj^=jA<<13|jA>>>19,jA=aj+MA|0,Ct^=jA<<18|jA>>>14,jA=UA+te|0,Hj^=jA<<7|jA>>>25,jA=Hj+UA|0,Uj^=jA<<9|jA>>>23,jA=Uj+Hj|0,te^=jA<<13|jA>>>19,jA=te+Uj|0,UA^=jA<<18|jA>>>14,jA=Fj+Zj|0,SA^=jA<<7|jA>>>25,jA=SA+Fj|0,MA^=jA<<9|jA>>>23,jA=MA+SA|0,Zj^=jA<<13|jA>>>19,jA=Zj+MA|0,Fj^=jA<<18|jA>>>14,jA=WA+jj|0,aj^=jA<<7|jA>>>25,jA=aj+WA|0,Gj^=jA<<9|jA>>>23,jA=Gj+aj|0,jj^=jA<<13|jA>>>19,jA=jj+Gj|0,WA^=jA<<18|jA>>>14,jA=Ct+nt|0,jt^=jA<<7|jA>>>25,jA=jt+Ct|0,Pt^=jA<<9|jA>>>23,jA=Pt+jt|0,nt^=jA<<13|jA>>>19,jA=nt+Pt|0,Ct^=jA<<18|jA>>>14;UA=UA+R|0,Hj=Hj+uA|0,Uj=Uj+qA|0,te=te+QA|0,Zj=Zj+fj|0,Fj=Fj+$|0,SA=SA+L|0,MA=MA+Q|0,Gj=Gj+N|0,jj=jj+kA|0,WA=WA+BA|0,aj=aj+vA|0,jt=jt+EA|0,Pt=Pt+RA|0,nt=nt+Ej|0,Ct=Ct+Vj|0,G[0]=UA>>>0&255,G[1]=UA>>>8&255,G[2]=UA>>>16&255,G[3]=UA>>>24&255,G[4]=Hj>>>0&255,G[5]=Hj>>>8&255,G[6]=Hj>>>16&255,G[7]=Hj>>>24&255,G[8]=Uj>>>0&255,G[9]=Uj>>>8&255,G[10]=Uj>>>16&255,G[11]=Uj>>>24&255,G[12]=te>>>0&255,G[13]=te>>>8&255,G[14]=te>>>16&255,G[15]=te>>>24&255,G[16]=Zj>>>0&255,G[17]=Zj>>>8&255,G[18]=Zj>>>16&255,G[19]=Zj>>>24&255,G[20]=Fj>>>0&255,G[21]=Fj>>>8&255,G[22]=Fj>>>16&255,G[23]=Fj>>>24&255,G[24]=SA>>>0&255,G[25]=SA>>>8&255,G[26]=SA>>>16&255,G[27]=SA>>>24&255,G[28]=MA>>>0&255,G[29]=MA>>>8&255,G[30]=MA>>>16&255,G[31]=MA>>>24&255,G[32]=Gj>>>0&255,G[33]=Gj>>>8&255,G[34]=Gj>>>16&255,G[35]=Gj>>>24&255,G[36]=jj>>>0&255,G[37]=jj>>>8&255,G[38]=jj>>>16&255,G[39]=jj>>>24&255,G[40]=WA>>>0&255,G[41]=WA>>>8&255,G[42]=WA>>>16&255,G[43]=WA>>>24&255,G[44]=aj>>>0&255,G[45]=aj>>>8&255,G[46]=aj>>>16&255,G[47]=aj>>>24&255,G[48]=jt>>>0&255,G[49]=jt>>>8&255,G[50]=jt>>>16&255,G[51]=jt>>>24&255,G[52]=Pt>>>0&255,G[53]=Pt>>>8&255,G[54]=Pt>>>16&255,G[55]=Pt>>>24&255,G[56]=nt>>>0&255,G[57]=nt>>>8&255,G[58]=nt>>>16&255,G[59]=nt>>>24&255,G[60]=Ct>>>0&255,G[61]=Ct>>>8&255,G[62]=Ct>>>16&255,G[63]=Ct>>>24&255}function v(G,T,H,B){for(var R=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,uA=H[0]&255|(H[1]&255)<<8|(H[2]&255)<<16|(H[3]&255)<<24,qA=H[4]&255|(H[5]&255)<<8|(H[6]&255)<<16|(H[7]&255)<<24,QA=H[8]&255|(H[9]&255)<<8|(H[10]&255)<<16|(H[11]&255)<<24,fj=H[12]&255|(H[13]&255)<<8|(H[14]&255)<<16|(H[15]&255)<<24,$=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,L=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,Q=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,N=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,kA=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,BA=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,vA=H[16]&255|(H[17]&255)<<8|(H[18]&255)<<16|(H[19]&255)<<24,EA=H[20]&255|(H[21]&255)<<8|(H[22]&255)<<16|(H[23]&255)<<24,RA=H[24]&255|(H[25]&255)<<8|(H[26]&255)<<16|(H[27]&255)<<24,Ej=H[28]&255|(H[29]&255)<<8|(H[30]&255)<<16|(H[31]&255)<<24,Vj=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,UA=R,Hj=uA,Uj=qA,te=QA,Zj=fj,Fj=$,SA=L,MA=Q,Gj=N,jj=kA,WA=BA,aj=vA,jt=EA,Pt=RA,nt=Ej,Ct=Vj,jA,tr=0;tr<20;tr+=2)jA=UA+jt|0,Zj^=jA<<7|jA>>>25,jA=Zj+UA|0,Gj^=jA<<9|jA>>>23,jA=Gj+Zj|0,jt^=jA<<13|jA>>>19,jA=jt+Gj|0,UA^=jA<<18|jA>>>14,jA=Fj+Hj|0,jj^=jA<<7|jA>>>25,jA=jj+Fj|0,Pt^=jA<<9|jA>>>23,jA=Pt+jj|0,Hj^=jA<<13|jA>>>19,jA=Hj+Pt|0,Fj^=jA<<18|jA>>>14,jA=WA+SA|0,nt^=jA<<7|jA>>>25,jA=nt+WA|0,Uj^=jA<<9|jA>>>23,jA=Uj+nt|0,SA^=jA<<13|jA>>>19,jA=SA+Uj|0,WA^=jA<<18|jA>>>14,jA=Ct+aj|0,te^=jA<<7|jA>>>25,jA=te+Ct|0,MA^=jA<<9|jA>>>23,jA=MA+te|0,aj^=jA<<13|jA>>>19,jA=aj+MA|0,Ct^=jA<<18|jA>>>14,jA=UA+te|0,Hj^=jA<<7|jA>>>25,jA=Hj+UA|0,Uj^=jA<<9|jA>>>23,jA=Uj+Hj|0,te^=jA<<13|jA>>>19,jA=te+Uj|0,UA^=jA<<18|jA>>>14,jA=Fj+Zj|0,SA^=jA<<7|jA>>>25,jA=SA+Fj|0,MA^=jA<<9|jA>>>23,jA=MA+SA|0,Zj^=jA<<13|jA>>>19,jA=Zj+MA|0,Fj^=jA<<18|jA>>>14,jA=WA+jj|0,aj^=jA<<7|jA>>>25,jA=aj+WA|0,Gj^=jA<<9|jA>>>23,jA=Gj+aj|0,jj^=jA<<13|jA>>>19,jA=jj+Gj|0,WA^=jA<<18|jA>>>14,jA=Ct+nt|0,jt^=jA<<7|jA>>>25,jA=jt+Ct|0,Pt^=jA<<9|jA>>>23,jA=Pt+jt|0,nt^=jA<<13|jA>>>19,jA=nt+Pt|0,Ct^=jA<<18|jA>>>14;G[0]=UA>>>0&255,G[1]=UA>>>8&255,G[2]=UA>>>16&255,G[3]=UA>>>24&255,G[4]=Fj>>>0&255,G[5]=Fj>>>8&255,G[6]=Fj>>>16&255,G[7]=Fj>>>24&255,G[8]=WA>>>0&255,G[9]=WA>>>8&255,G[10]=WA>>>16&255,G[11]=WA>>>24&255,G[12]=Ct>>>0&255,G[13]=Ct>>>8&255,G[14]=Ct>>>16&255,G[15]=Ct>>>24&255,G[16]=SA>>>0&255,G[17]=SA>>>8&255,G[18]=SA>>>16&255,G[19]=SA>>>24&255,G[20]=MA>>>0&255,G[21]=MA>>>8&255,G[22]=MA>>>16&255,G[23]=MA>>>24&255,G[24]=Gj>>>0&255,G[25]=Gj>>>8&255,G[26]=Gj>>>16&255,G[27]=Gj>>>24&255,G[28]=jj>>>0&255,G[29]=jj>>>8&255,G[30]=jj>>>16&255,G[31]=jj>>>24&255}function P(G,T,H,B){f(G,T,H,B)}function D(G,T,H,B){v(G,T,H,B)}var C=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function b(G,T,H,B,R,uA,qA){var QA=new Uint8Array(16),fj=new Uint8Array(64),$,L;for(L=0;L<16;L++)QA[L]=0;for(L=0;L<8;L++)QA[L]=uA[L];for(;R>=64;){for(P(fj,QA,qA,C),L=0;L<64;L++)G[T+L]=H[B+L]^fj[L];for($=1,L=8;L<16;L++)$=$+(QA[L]&255)|0,QA[L]=$&255,$>>>=8;R-=64,T+=64,B+=64}if(R>0)for(P(fj,QA,qA,C),L=0;L<R;L++)G[T+L]=H[B+L]^fj[L];return 0}function h(G,T,H,B,R){var uA=new Uint8Array(16),qA=new Uint8Array(64),QA,fj;for(fj=0;fj<16;fj++)uA[fj]=0;for(fj=0;fj<8;fj++)uA[fj]=B[fj];for(;H>=64;){for(P(qA,uA,R,C),fj=0;fj<64;fj++)G[T+fj]=qA[fj];for(QA=1,fj=8;fj<16;fj++)QA=QA+(uA[fj]&255)|0,uA[fj]=QA&255,QA>>>=8;H-=64,T+=64}if(H>0)for(P(qA,uA,R,C),fj=0;fj<H;fj++)G[T+fj]=qA[fj];return 0}function O(G,T,H,B,R){var uA=new Uint8Array(32);D(uA,B,R,C);for(var qA=new Uint8Array(8),QA=0;QA<8;QA++)qA[QA]=B[QA+16];return h(G,T,H,qA,uA)}function V(G,T,H,B,R,uA,qA){var QA=new Uint8Array(32);D(QA,uA,qA,C);for(var fj=new Uint8Array(8),$=0;$<8;$++)fj[$]=uA[$+16];return b(G,T,H,B,R,fj,QA)}var Y=function(G){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var T,H,B,R,uA,qA,QA,fj;T=G[0]&255|(G[1]&255)<<8,this.r[0]=T&8191,H=G[2]&255|(G[3]&255)<<8,this.r[1]=(T>>>13|H<<3)&8191,B=G[4]&255|(G[5]&255)<<8,this.r[2]=(H>>>10|B<<6)&7939,R=G[6]&255|(G[7]&255)<<8,this.r[3]=(B>>>7|R<<9)&8191,uA=G[8]&255|(G[9]&255)<<8,this.r[4]=(R>>>4|uA<<12)&255,this.r[5]=uA>>>1&8190,qA=G[10]&255|(G[11]&255)<<8,this.r[6]=(uA>>>14|qA<<2)&8191,QA=G[12]&255|(G[13]&255)<<8,this.r[7]=(qA>>>11|QA<<5)&8065,fj=G[14]&255|(G[15]&255)<<8,this.r[8]=(QA>>>8|fj<<8)&8191,this.r[9]=fj>>>5&127,this.pad[0]=G[16]&255|(G[17]&255)<<8,this.pad[1]=G[18]&255|(G[19]&255)<<8,this.pad[2]=G[20]&255|(G[21]&255)<<8,this.pad[3]=G[22]&255|(G[23]&255)<<8,this.pad[4]=G[24]&255|(G[25]&255)<<8,this.pad[5]=G[26]&255|(G[27]&255)<<8,this.pad[6]=G[28]&255|(G[29]&255)<<8,this.pad[7]=G[30]&255|(G[31]&255)<<8};Y.prototype.blocks=function(G,T,H){for(var B=this.fin?0:2048,R,uA,qA,QA,fj,$,L,Q,N,kA,BA,vA,EA,RA,Ej,Vj,UA,Hj,Uj,te=this.h[0],Zj=this.h[1],Fj=this.h[2],SA=this.h[3],MA=this.h[4],Gj=this.h[5],jj=this.h[6],WA=this.h[7],aj=this.h[8],jt=this.h[9],Pt=this.r[0],nt=this.r[1],Ct=this.r[2],jA=this.r[3],tr=this.r[4],ur=this.r[5],or=this.r[6],Ht=this.r[7],ir=this.r[8],Mt=this.r[9];H>=16;)R=G[T+0]&255|(G[T+1]&255)<<8,te+=R&8191,uA=G[T+2]&255|(G[T+3]&255)<<8,Zj+=(R>>>13|uA<<3)&8191,qA=G[T+4]&255|(G[T+5]&255)<<8,Fj+=(uA>>>10|qA<<6)&8191,QA=G[T+6]&255|(G[T+7]&255)<<8,SA+=(qA>>>7|QA<<9)&8191,fj=G[T+8]&255|(G[T+9]&255)<<8,MA+=(QA>>>4|fj<<12)&8191,Gj+=fj>>>1&8191,$=G[T+10]&255|(G[T+11]&255)<<8,jj+=(fj>>>14|$<<2)&8191,L=G[T+12]&255|(G[T+13]&255)<<8,WA+=($>>>11|L<<5)&8191,Q=G[T+14]&255|(G[T+15]&255)<<8,aj+=(L>>>8|Q<<8)&8191,jt+=Q>>>5|B,N=0,kA=N,kA+=te*Pt,kA+=Zj*(5*Mt),kA+=Fj*(5*ir),kA+=SA*(5*Ht),kA+=MA*(5*or),N=kA>>>13,kA&=8191,kA+=Gj*(5*ur),kA+=jj*(5*tr),kA+=WA*(5*jA),kA+=aj*(5*Ct),kA+=jt*(5*nt),N+=kA>>>13,kA&=8191,BA=N,BA+=te*nt,BA+=Zj*Pt,BA+=Fj*(5*Mt),BA+=SA*(5*ir),BA+=MA*(5*Ht),N=BA>>>13,BA&=8191,BA+=Gj*(5*or),BA+=jj*(5*ur),BA+=WA*(5*tr),BA+=aj*(5*jA),BA+=jt*(5*Ct),N+=BA>>>13,BA&=8191,vA=N,vA+=te*Ct,vA+=Zj*nt,vA+=Fj*Pt,vA+=SA*(5*Mt),vA+=MA*(5*ir),N=vA>>>13,vA&=8191,vA+=Gj*(5*Ht),vA+=jj*(5*or),vA+=WA*(5*ur),vA+=aj*(5*tr),vA+=jt*(5*jA),N+=vA>>>13,vA&=8191,EA=N,EA+=te*jA,EA+=Zj*Ct,EA+=Fj*nt,EA+=SA*Pt,EA+=MA*(5*Mt),N=EA>>>13,EA&=8191,EA+=Gj*(5*ir),EA+=jj*(5*Ht),EA+=WA*(5*or),EA+=aj*(5*ur),EA+=jt*(5*tr),N+=EA>>>13,EA&=8191,RA=N,RA+=te*tr,RA+=Zj*jA,RA+=Fj*Ct,RA+=SA*nt,RA+=MA*Pt,N=RA>>>13,RA&=8191,RA+=Gj*(5*Mt),RA+=jj*(5*ir),RA+=WA*(5*Ht),RA+=aj*(5*or),RA+=jt*(5*ur),N+=RA>>>13,RA&=8191,Ej=N,Ej+=te*ur,Ej+=Zj*tr,Ej+=Fj*jA,Ej+=SA*Ct,Ej+=MA*nt,N=Ej>>>13,Ej&=8191,Ej+=Gj*Pt,Ej+=jj*(5*Mt),Ej+=WA*(5*ir),Ej+=aj*(5*Ht),Ej+=jt*(5*or),N+=Ej>>>13,Ej&=8191,Vj=N,Vj+=te*or,Vj+=Zj*ur,Vj+=Fj*tr,Vj+=SA*jA,Vj+=MA*Ct,N=Vj>>>13,Vj&=8191,Vj+=Gj*nt,Vj+=jj*Pt,Vj+=WA*(5*Mt),Vj+=aj*(5*ir),Vj+=jt*(5*Ht),N+=Vj>>>13,Vj&=8191,UA=N,UA+=te*Ht,UA+=Zj*or,UA+=Fj*ur,UA+=SA*tr,UA+=MA*jA,N=UA>>>13,UA&=8191,UA+=Gj*Ct,UA+=jj*nt,UA+=WA*Pt,UA+=aj*(5*Mt),UA+=jt*(5*ir),N+=UA>>>13,UA&=8191,Hj=N,Hj+=te*ir,Hj+=Zj*Ht,Hj+=Fj*or,Hj+=SA*ur,Hj+=MA*tr,N=Hj>>>13,Hj&=8191,Hj+=Gj*jA,Hj+=jj*Ct,Hj+=WA*nt,Hj+=aj*Pt,Hj+=jt*(5*Mt),N+=Hj>>>13,Hj&=8191,Uj=N,Uj+=te*Mt,Uj+=Zj*ir,Uj+=Fj*Ht,Uj+=SA*or,Uj+=MA*ur,N=Uj>>>13,Uj&=8191,Uj+=Gj*tr,Uj+=jj*jA,Uj+=WA*Ct,Uj+=aj*nt,Uj+=jt*Pt,N+=Uj>>>13,Uj&=8191,N=(N<<2)+N|0,N=N+kA|0,kA=N&8191,N=N>>>13,BA+=N,te=kA,Zj=BA,Fj=vA,SA=EA,MA=RA,Gj=Ej,jj=Vj,WA=UA,aj=Hj,jt=Uj,T+=16,H-=16;this.h[0]=te,this.h[1]=Zj,this.h[2]=Fj,this.h[3]=SA,this.h[4]=MA,this.h[5]=Gj,this.h[6]=jj,this.h[7]=WA,this.h[8]=aj,this.h[9]=jt},Y.prototype.finish=function(G,T){var H=new Uint16Array(10),B,R,uA,qA;if(this.leftover){for(qA=this.leftover,this.buffer[qA++]=1;qA<16;qA++)this.buffer[qA]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(B=this.h[1]>>>13,this.h[1]&=8191,qA=2;qA<10;qA++)this.h[qA]+=B,B=this.h[qA]>>>13,this.h[qA]&=8191;for(this.h[0]+=B*5,B=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=B,B=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=B,H[0]=this.h[0]+5,B=H[0]>>>13,H[0]&=8191,qA=1;qA<10;qA++)H[qA]=this.h[qA]+B,B=H[qA]>>>13,H[qA]&=8191;for(H[9]-=8192,R=(B^1)-1,qA=0;qA<10;qA++)H[qA]&=R;for(R=~R,qA=0;qA<10;qA++)this.h[qA]=this.h[qA]&R|H[qA];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,uA=this.h[0]+this.pad[0],this.h[0]=uA&65535,qA=1;qA<8;qA++)uA=(this.h[qA]+this.pad[qA]|0)+(uA>>>16)|0,this.h[qA]=uA&65535;G[T+0]=this.h[0]>>>0&255,G[T+1]=this.h[0]>>>8&255,G[T+2]=this.h[1]>>>0&255,G[T+3]=this.h[1]>>>8&255,G[T+4]=this.h[2]>>>0&255,G[T+5]=this.h[2]>>>8&255,G[T+6]=this.h[3]>>>0&255,G[T+7]=this.h[3]>>>8&255,G[T+8]=this.h[4]>>>0&255,G[T+9]=this.h[4]>>>8&255,G[T+10]=this.h[5]>>>0&255,G[T+11]=this.h[5]>>>8&255,G[T+12]=this.h[6]>>>0&255,G[T+13]=this.h[6]>>>8&255,G[T+14]=this.h[7]>>>0&255,G[T+15]=this.h[7]>>>8&255},Y.prototype.update=function(G,T,H){var B,R;if(this.leftover){for(R=16-this.leftover,R>H&&(R=H),B=0;B<R;B++)this.buffer[this.leftover+B]=G[T+B];if(H-=R,T+=R,this.leftover+=R,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(H>=16&&(R=H-H%16,this.blocks(G,T,R),T+=R,H-=R),H){for(B=0;B<H;B++)this.buffer[this.leftover+B]=G[T+B];this.leftover+=H}};function rA(G,T,H,B,R,uA){var qA=new Y(uA);return qA.update(H,B,R),qA.finish(G,T),0}function yA(G,T,H,B,R,uA){var qA=new Uint8Array(16);return rA(qA,0,H,B,R,uA),I(G,T,qA,0)}function VA(G,T,H,B,R){var uA;if(H<32)return-1;for(V(G,0,T,0,H,B,R),rA(G,16,G,32,H-32,G),uA=0;uA<16;uA++)G[uA]=0;return 0}function dj(G,T,H,B,R){var uA,qA=new Uint8Array(32);if(H<32||(O(qA,0,32,B,R),yA(T,16,T,32,H-32,qA)!==0))return-1;for(V(G,0,T,0,H,B,R),uA=0;uA<32;uA++)G[uA]=0;return 0}function bA(G,T){var H;for(H=0;H<16;H++)G[H]=T[H]|0}function Mj(G){var T,H,B=1;for(T=0;T<16;T++)H=G[T]+B+65535,B=Math.floor(H/65536),G[T]=H-B*65536;G[0]+=B-1+37*(B-1)}function mj(G,T,H){for(var B,R=~(H-1),uA=0;uA<16;uA++)B=R&(G[uA]^T[uA]),G[uA]^=B,T[uA]^=B}function ae(G,T){var H,B,R,uA=j(),qA=j();for(H=0;H<16;H++)qA[H]=T[H];for(Mj(qA),Mj(qA),Mj(qA),B=0;B<2;B++){for(uA[0]=qA[0]-65517,H=1;H<15;H++)uA[H]=qA[H]-65535-(uA[H-1]>>16&1),uA[H-1]&=65535;uA[15]=qA[15]-32767-(uA[14]>>16&1),R=uA[15]>>16&1,uA[14]&=65535,mj(qA,uA,1-R)}for(H=0;H<16;H++)G[2*H]=qA[H]&255,G[2*H+1]=qA[H]>>8}function _j(G,T){var H=new Uint8Array(32),B=new Uint8Array(32);return ae(H,G),ae(B,T),S(H,0,B,0)}function cj(G){var T=new Uint8Array(32);return ae(T,G),T[0]&1}function Qj(G,T){var H;for(H=0;H<16;H++)G[H]=T[2*H]+(T[2*H+1]<<8);G[15]&=32767}function Cj(G,T,H){for(var B=0;B<16;B++)G[B]=T[B]+H[B]}function kj(G,T,H){for(var B=0;B<16;B++)G[B]=T[B]-H[B]}function Bj(G,T,H){var B,R,uA=0,qA=0,QA=0,fj=0,$=0,L=0,Q=0,N=0,kA=0,BA=0,vA=0,EA=0,RA=0,Ej=0,Vj=0,UA=0,Hj=0,Uj=0,te=0,Zj=0,Fj=0,SA=0,MA=0,Gj=0,jj=0,WA=0,aj=0,jt=0,Pt=0,nt=0,Ct=0,jA=H[0],tr=H[1],ur=H[2],or=H[3],Ht=H[4],ir=H[5],Mt=H[6],g6=H[7],Mr=H[8],F=H[9],w=H[10],M=H[11],sA=H[12],XA=H[13],nj=H[14],Tj=H[15];B=T[0],uA+=B*jA,qA+=B*tr,QA+=B*ur,fj+=B*or,$+=B*Ht,L+=B*ir,Q+=B*Mt,N+=B*g6,kA+=B*Mr,BA+=B*F,vA+=B*w,EA+=B*M,RA+=B*sA,Ej+=B*XA,Vj+=B*nj,UA+=B*Tj,B=T[1],qA+=B*jA,QA+=B*tr,fj+=B*ur,$+=B*or,L+=B*Ht,Q+=B*ir,N+=B*Mt,kA+=B*g6,BA+=B*Mr,vA+=B*F,EA+=B*w,RA+=B*M,Ej+=B*sA,Vj+=B*XA,UA+=B*nj,Hj+=B*Tj,B=T[2],QA+=B*jA,fj+=B*tr,$+=B*ur,L+=B*or,Q+=B*Ht,N+=B*ir,kA+=B*Mt,BA+=B*g6,vA+=B*Mr,EA+=B*F,RA+=B*w,Ej+=B*M,Vj+=B*sA,UA+=B*XA,Hj+=B*nj,Uj+=B*Tj,B=T[3],fj+=B*jA,$+=B*tr,L+=B*ur,Q+=B*or,N+=B*Ht,kA+=B*ir,BA+=B*Mt,vA+=B*g6,EA+=B*Mr,RA+=B*F,Ej+=B*w,Vj+=B*M,UA+=B*sA,Hj+=B*XA,Uj+=B*nj,te+=B*Tj,B=T[4],$+=B*jA,L+=B*tr,Q+=B*ur,N+=B*or,kA+=B*Ht,BA+=B*ir,vA+=B*Mt,EA+=B*g6,RA+=B*Mr,Ej+=B*F,Vj+=B*w,UA+=B*M,Hj+=B*sA,Uj+=B*XA,te+=B*nj,Zj+=B*Tj,B=T[5],L+=B*jA,Q+=B*tr,N+=B*ur,kA+=B*or,BA+=B*Ht,vA+=B*ir,EA+=B*Mt,RA+=B*g6,Ej+=B*Mr,Vj+=B*F,UA+=B*w,Hj+=B*M,Uj+=B*sA,te+=B*XA,Zj+=B*nj,Fj+=B*Tj,B=T[6],Q+=B*jA,N+=B*tr,kA+=B*ur,BA+=B*or,vA+=B*Ht,EA+=B*ir,RA+=B*Mt,Ej+=B*g6,Vj+=B*Mr,UA+=B*F,Hj+=B*w,Uj+=B*M,te+=B*sA,Zj+=B*XA,Fj+=B*nj,SA+=B*Tj,B=T[7],N+=B*jA,kA+=B*tr,BA+=B*ur,vA+=B*or,EA+=B*Ht,RA+=B*ir,Ej+=B*Mt,Vj+=B*g6,UA+=B*Mr,Hj+=B*F,Uj+=B*w,te+=B*M,Zj+=B*sA,Fj+=B*XA,SA+=B*nj,MA+=B*Tj,B=T[8],kA+=B*jA,BA+=B*tr,vA+=B*ur,EA+=B*or,RA+=B*Ht,Ej+=B*ir,Vj+=B*Mt,UA+=B*g6,Hj+=B*Mr,Uj+=B*F,te+=B*w,Zj+=B*M,Fj+=B*sA,SA+=B*XA,MA+=B*nj,Gj+=B*Tj,B=T[9],BA+=B*jA,vA+=B*tr,EA+=B*ur,RA+=B*or,Ej+=B*Ht,Vj+=B*ir,UA+=B*Mt,Hj+=B*g6,Uj+=B*Mr,te+=B*F,Zj+=B*w,Fj+=B*M,SA+=B*sA,MA+=B*XA,Gj+=B*nj,jj+=B*Tj,B=T[10],vA+=B*jA,EA+=B*tr,RA+=B*ur,Ej+=B*or,Vj+=B*Ht,UA+=B*ir,Hj+=B*Mt,Uj+=B*g6,te+=B*Mr,Zj+=B*F,Fj+=B*w,SA+=B*M,MA+=B*sA,Gj+=B*XA,jj+=B*nj,WA+=B*Tj,B=T[11],EA+=B*jA,RA+=B*tr,Ej+=B*ur,Vj+=B*or,UA+=B*Ht,Hj+=B*ir,Uj+=B*Mt,te+=B*g6,Zj+=B*Mr,Fj+=B*F,SA+=B*w,MA+=B*M,Gj+=B*sA,jj+=B*XA,WA+=B*nj,aj+=B*Tj,B=T[12],RA+=B*jA,Ej+=B*tr,Vj+=B*ur,UA+=B*or,Hj+=B*Ht,Uj+=B*ir,te+=B*Mt,Zj+=B*g6,Fj+=B*Mr,SA+=B*F,MA+=B*w,Gj+=B*M,jj+=B*sA,WA+=B*XA,aj+=B*nj,jt+=B*Tj,B=T[13],Ej+=B*jA,Vj+=B*tr,UA+=B*ur,Hj+=B*or,Uj+=B*Ht,te+=B*ir,Zj+=B*Mt,Fj+=B*g6,SA+=B*Mr,MA+=B*F,Gj+=B*w,jj+=B*M,WA+=B*sA,aj+=B*XA,jt+=B*nj,Pt+=B*Tj,B=T[14],Vj+=B*jA,UA+=B*tr,Hj+=B*ur,Uj+=B*or,te+=B*Ht,Zj+=B*ir,Fj+=B*Mt,SA+=B*g6,MA+=B*Mr,Gj+=B*F,jj+=B*w,WA+=B*M,aj+=B*sA,jt+=B*XA,Pt+=B*nj,nt+=B*Tj,B=T[15],UA+=B*jA,Hj+=B*tr,Uj+=B*ur,te+=B*or,Zj+=B*Ht,Fj+=B*ir,SA+=B*Mt,MA+=B*g6,Gj+=B*Mr,jj+=B*F,WA+=B*w,aj+=B*M,jt+=B*sA,Pt+=B*XA,nt+=B*nj,Ct+=B*Tj,uA+=38*Hj,qA+=38*Uj,QA+=38*te,fj+=38*Zj,$+=38*Fj,L+=38*SA,Q+=38*MA,N+=38*Gj,kA+=38*jj,BA+=38*WA,vA+=38*aj,EA+=38*jt,RA+=38*Pt,Ej+=38*nt,Vj+=38*Ct,R=1,B=uA+R+65535,R=Math.floor(B/65536),uA=B-R*65536,B=qA+R+65535,R=Math.floor(B/65536),qA=B-R*65536,B=QA+R+65535,R=Math.floor(B/65536),QA=B-R*65536,B=fj+R+65535,R=Math.floor(B/65536),fj=B-R*65536,B=$+R+65535,R=Math.floor(B/65536),$=B-R*65536,B=L+R+65535,R=Math.floor(B/65536),L=B-R*65536,B=Q+R+65535,R=Math.floor(B/65536),Q=B-R*65536,B=N+R+65535,R=Math.floor(B/65536),N=B-R*65536,B=kA+R+65535,R=Math.floor(B/65536),kA=B-R*65536,B=BA+R+65535,R=Math.floor(B/65536),BA=B-R*65536,B=vA+R+65535,R=Math.floor(B/65536),vA=B-R*65536,B=EA+R+65535,R=Math.floor(B/65536),EA=B-R*65536,B=RA+R+65535,R=Math.floor(B/65536),RA=B-R*65536,B=Ej+R+65535,R=Math.floor(B/65536),Ej=B-R*65536,B=Vj+R+65535,R=Math.floor(B/65536),Vj=B-R*65536,B=UA+R+65535,R=Math.floor(B/65536),UA=B-R*65536,uA+=R-1+37*(R-1),R=1,B=uA+R+65535,R=Math.floor(B/65536),uA=B-R*65536,B=qA+R+65535,R=Math.floor(B/65536),qA=B-R*65536,B=QA+R+65535,R=Math.floor(B/65536),QA=B-R*65536,B=fj+R+65535,R=Math.floor(B/65536),fj=B-R*65536,B=$+R+65535,R=Math.floor(B/65536),$=B-R*65536,B=L+R+65535,R=Math.floor(B/65536),L=B-R*65536,B=Q+R+65535,R=Math.floor(B/65536),Q=B-R*65536,B=N+R+65535,R=Math.floor(B/65536),N=B-R*65536,B=kA+R+65535,R=Math.floor(B/65536),kA=B-R*65536,B=BA+R+65535,R=Math.floor(B/65536),BA=B-R*65536,B=vA+R+65535,R=Math.floor(B/65536),vA=B-R*65536,B=EA+R+65535,R=Math.floor(B/65536),EA=B-R*65536,B=RA+R+65535,R=Math.floor(B/65536),RA=B-R*65536,B=Ej+R+65535,R=Math.floor(B/65536),Ej=B-R*65536,B=Vj+R+65535,R=Math.floor(B/65536),Vj=B-R*65536,B=UA+R+65535,R=Math.floor(B/65536),UA=B-R*65536,uA+=R-1+37*(R-1),G[0]=uA,G[1]=qA,G[2]=QA,G[3]=fj,G[4]=$,G[5]=L,G[6]=Q,G[7]=N,G[8]=kA,G[9]=BA,G[10]=vA,G[11]=EA,G[12]=RA,G[13]=Ej,G[14]=Vj,G[15]=UA}function De(G,T){Bj(G,T,T)}function wt(G,T){var H=j(),B;for(B=0;B<16;B++)H[B]=T[B];for(B=253;B>=0;B--)De(H,H),B!==2&&B!==4&&Bj(H,H,T);for(B=0;B<16;B++)G[B]=H[B]}function wj(G,T){var H=j(),B;for(B=0;B<16;B++)H[B]=T[B];for(B=250;B>=0;B--)De(H,H),B!==1&&Bj(H,H,T);for(B=0;B<16;B++)G[B]=H[B]}function Bt(G,T,H){var B=new Uint8Array(32),R=new Float64Array(80),uA,qA,QA=j(),fj=j(),$=j(),L=j(),Q=j(),N=j();for(qA=0;qA<31;qA++)B[qA]=T[qA];for(B[31]=T[31]&127|64,B[0]&=248,Qj(R,H),qA=0;qA<16;qA++)fj[qA]=R[qA],L[qA]=QA[qA]=$[qA]=0;for(QA[0]=L[0]=1,qA=254;qA>=0;--qA)uA=B[qA>>>3]>>>(qA&7)&1,mj(QA,fj,uA),mj($,L,uA),Cj(Q,QA,$),kj(QA,QA,$),Cj($,fj,L),kj(fj,fj,L),De(L,Q),De(N,QA),Bj(QA,$,QA),Bj($,fj,Q),Cj(Q,QA,$),kj(QA,QA,$),De(fj,QA),kj($,L,N),Bj(QA,$,o),Cj(QA,QA,L),Bj($,$,QA),Bj(QA,L,N),Bj(L,fj,R),De(fj,Q),mj(QA,fj,uA),mj($,L,uA);for(qA=0;qA<16;qA++)R[qA+16]=QA[qA],R[qA+32]=$[qA],R[qA+48]=fj[qA],R[qA+64]=L[qA];var kA=R.subarray(32),BA=R.subarray(16);return wt(kA,kA),Bj(BA,BA,kA),ae(G,BA),0}function Ye(G,T){return Bt(G,T,r)}function Ie(G,T){return e(T,32),Ye(G,T)}function Ee(G,T,H){var B=new Uint8Array(32);return Bt(B,H,T),D(G,t,B,C)}var er=VA,Vt=dj;function yt(G,T,H,B,R,uA){var qA=new Uint8Array(32);return Ee(qA,R,uA),er(G,T,H,B,qA)}function Sr(G,T,H,B,R,uA){var qA=new Uint8Array(32);return Ee(qA,R,uA),Vt(G,T,H,B,qA)}var Dr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function yr(G,T,H,B){for(var R=new Int32Array(16),uA=new Int32Array(16),qA,QA,fj,$,L,Q,N,kA,BA,vA,EA,RA,Ej,Vj,UA,Hj,Uj,te,Zj,Fj,SA,MA,Gj,jj,WA,aj,jt=G[0],Pt=G[1],nt=G[2],Ct=G[3],jA=G[4],tr=G[5],ur=G[6],or=G[7],Ht=T[0],ir=T[1],Mt=T[2],g6=T[3],Mr=T[4],F=T[5],w=T[6],M=T[7],sA=0;B>=128;){for(Zj=0;Zj<16;Zj++)Fj=8*Zj+sA,R[Zj]=H[Fj+0]<<24|H[Fj+1]<<16|H[Fj+2]<<8|H[Fj+3],uA[Zj]=H[Fj+4]<<24|H[Fj+5]<<16|H[Fj+6]<<8|H[Fj+7];for(Zj=0;Zj<80;Zj++)if(qA=jt,QA=Pt,fj=nt,$=Ct,L=jA,Q=tr,N=ur,kA=or,BA=Ht,vA=ir,EA=Mt,RA=g6,Ej=Mr,Vj=F,UA=w,Hj=M,SA=or,MA=M,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=(jA>>>14|Mr<<18)^(jA>>>18|Mr<<14)^(Mr>>>9|jA<<23),MA=(Mr>>>14|jA<<18)^(Mr>>>18|jA<<14)^(jA>>>9|Mr<<23),Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,SA=jA&tr^~jA&ur,MA=Mr&F^~Mr&w,Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,SA=Dr[Zj*2],MA=Dr[Zj*2+1],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,SA=R[Zj%16],MA=uA[Zj%16],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,Uj=WA&65535|aj<<16,te=Gj&65535|jj<<16,SA=Uj,MA=te,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=(jt>>>28|Ht<<4)^(Ht>>>2|jt<<30)^(Ht>>>7|jt<<25),MA=(Ht>>>28|jt<<4)^(jt>>>2|Ht<<30)^(jt>>>7|Ht<<25),Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,SA=jt&Pt^jt&nt^Pt&nt,MA=Ht&ir^Ht&Mt^ir&Mt,Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,kA=WA&65535|aj<<16,Hj=Gj&65535|jj<<16,SA=$,MA=RA,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=Uj,MA=te,Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,$=WA&65535|aj<<16,RA=Gj&65535|jj<<16,Pt=qA,nt=QA,Ct=fj,jA=$,tr=L,ur=Q,or=N,jt=kA,ir=BA,Mt=vA,g6=EA,Mr=RA,F=Ej,w=Vj,M=UA,Ht=Hj,Zj%16===15)for(Fj=0;Fj<16;Fj++)SA=R[Fj],MA=uA[Fj],Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=R[(Fj+9)%16],MA=uA[(Fj+9)%16],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,Uj=R[(Fj+1)%16],te=uA[(Fj+1)%16],SA=(Uj>>>1|te<<31)^(Uj>>>8|te<<24)^Uj>>>7,MA=(te>>>1|Uj<<31)^(te>>>8|Uj<<24)^(te>>>7|Uj<<25),Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,Uj=R[(Fj+14)%16],te=uA[(Fj+14)%16],SA=(Uj>>>19|te<<13)^(te>>>29|Uj<<3)^Uj>>>6,MA=(te>>>19|Uj<<13)^(Uj>>>29|te<<3)^(te>>>6|Uj<<26),Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,R[Fj]=WA&65535|aj<<16,uA[Fj]=Gj&65535|jj<<16;SA=jt,MA=Ht,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[0],MA=T[0],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[0]=jt=WA&65535|aj<<16,T[0]=Ht=Gj&65535|jj<<16,SA=Pt,MA=ir,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[1],MA=T[1],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[1]=Pt=WA&65535|aj<<16,T[1]=ir=Gj&65535|jj<<16,SA=nt,MA=Mt,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[2],MA=T[2],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[2]=nt=WA&65535|aj<<16,T[2]=Mt=Gj&65535|jj<<16,SA=Ct,MA=g6,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[3],MA=T[3],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[3]=Ct=WA&65535|aj<<16,T[3]=g6=Gj&65535|jj<<16,SA=jA,MA=Mr,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[4],MA=T[4],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[4]=jA=WA&65535|aj<<16,T[4]=Mr=Gj&65535|jj<<16,SA=tr,MA=F,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[5],MA=T[5],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[5]=tr=WA&65535|aj<<16,T[5]=F=Gj&65535|jj<<16,SA=ur,MA=w,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[6],MA=T[6],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[6]=ur=WA&65535|aj<<16,T[6]=w=Gj&65535|jj<<16,SA=or,MA=M,Gj=MA&65535,jj=MA>>>16,WA=SA&65535,aj=SA>>>16,SA=G[7],MA=T[7],Gj+=MA&65535,jj+=MA>>>16,WA+=SA&65535,aj+=SA>>>16,jj+=Gj>>>16,WA+=jj>>>16,aj+=WA>>>16,G[7]=or=WA&65535|aj<<16,T[7]=M=Gj&65535|jj<<16,sA+=128,B-=128}return B}function ra(G,T,H){var B=new Int32Array(8),R=new Int32Array(8),uA=new Uint8Array(256),qA,QA=H;for(B[0]=1779033703,B[1]=3144134277,B[2]=1013904242,B[3]=2773480762,B[4]=1359893119,B[5]=2600822924,B[6]=528734635,B[7]=1541459225,R[0]=4089235720,R[1]=2227873595,R[2]=4271175723,R[3]=1595750129,R[4]=2917565137,R[5]=725511199,R[6]=4215389547,R[7]=327033209,yr(B,R,T,H),H%=128,qA=0;qA<H;qA++)uA[qA]=T[QA-H+qA];for(uA[H]=128,H=256-128*(H<112?1:0),uA[H-9]=0,u(uA,H-8,QA/536870912|0,QA<<3),yr(B,R,uA,H),qA=0;qA<8;qA++)u(G,8*qA,B[qA],R[qA]);return 0}function at(G,T){var H=j(),B=j(),R=j(),uA=j(),qA=j(),QA=j(),fj=j(),$=j(),L=j();kj(H,G[1],G[0]),kj(L,T[1],T[0]),Bj(H,H,L),Cj(B,G[0],G[1]),Cj(L,T[0],T[1]),Bj(B,B,L),Bj(R,G[3],T[3]),Bj(R,R,s),Bj(uA,G[2],T[2]),Cj(uA,uA,uA),kj(qA,B,H),kj(QA,uA,R),Cj(fj,uA,R),Cj($,B,H),Bj(G[0],qA,QA),Bj(G[1],$,fj),Bj(G[2],fj,QA),Bj(G[3],qA,$)}function st(G,T,H){var B;for(B=0;B<4;B++)mj(G[B],T[B],H)}function kr(G,T){var H=j(),B=j(),R=j();wt(R,T[2]),Bj(H,T[0],R),Bj(B,T[1],R),ae(G,B),G[31]^=cj(H)<<7}function Va(G,T,H){var B,R;for(bA(G[0],a),bA(G[1],n),bA(G[2],n),bA(G[3],a),R=255;R>=0;--R)B=H[R/8|0]>>(R&7)&1,st(G,T,B),at(T,G),at(G,G),st(G,T,B)}function je(G,T){var H=[j(),j(),j(),j()];bA(H[0],l),bA(H[1],d),bA(H[2],n),Bj(H[3],l,d),Va(G,H,T)}function oA(G,T,H){var B=new Uint8Array(64),R=[j(),j(),j(),j()],uA;for(H||e(T,32),ra(B,T,32),B[0]&=248,B[31]&=127,B[31]|=64,je(R,B),kr(G,R),uA=0;uA<32;uA++)T[uA+32]=G[uA];return 0}var gA=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function KA(G,T){var H,B,R,uA;for(B=63;B>=32;--B){for(H=0,R=B-32,uA=B-12;R<uA;++R)T[R]+=H-16*T[B]*gA[R-(B-32)],H=Math.floor((T[R]+128)/256),T[R]-=H*256;T[R]+=H,T[B]=0}for(H=0,R=0;R<32;R++)T[R]+=H-(T[31]>>4)*gA[R],H=T[R]>>8,T[R]&=255;for(R=0;R<32;R++)T[R]-=H*gA[R];for(B=0;B<32;B++)T[B+1]+=T[B]>>8,G[B]=T[B]&255}function xj(G){var T=new Float64Array(64),H;for(H=0;H<64;H++)T[H]=G[H];for(H=0;H<64;H++)G[H]=0;KA(G,T)}function gj(G,T,H,B){var R=new Uint8Array(64),uA=new Uint8Array(64),qA=new Uint8Array(64),QA,fj,$=new Float64Array(64),L=[j(),j(),j(),j()];ra(R,B,32),R[0]&=248,R[31]&=127,R[31]|=64;var Q=H+64;for(QA=0;QA<H;QA++)G[64+QA]=T[QA];for(QA=0;QA<32;QA++)G[32+QA]=R[32+QA];for(ra(qA,G.subarray(32),H+32),xj(qA),je(L,qA),kr(G,L),QA=32;QA<64;QA++)G[QA]=B[QA];for(ra(uA,G,H+64),xj(uA),QA=0;QA<64;QA++)$[QA]=0;for(QA=0;QA<32;QA++)$[QA]=qA[QA];for(QA=0;QA<32;QA++)for(fj=0;fj<32;fj++)$[QA+fj]+=uA[QA]*R[fj];return KA(G.subarray(32),$),Q}function ve(G,T){var H=j(),B=j(),R=j(),uA=j(),qA=j(),QA=j(),fj=j();return bA(G[2],n),Qj(G[1],T),De(R,G[1]),Bj(uA,R,i),kj(R,R,G[2]),Cj(uA,G[2],uA),De(qA,uA),De(QA,qA),Bj(fj,QA,qA),Bj(H,fj,R),Bj(H,H,uA),wj(H,H),Bj(H,H,R),Bj(H,H,uA),Bj(H,H,uA),Bj(G[0],H,uA),De(B,G[0]),Bj(B,B,uA),_j(B,R)&&Bj(G[0],G[0],k),De(B,G[0]),Bj(B,B,uA),_j(B,R)?-1:(cj(G[0])===T[31]>>7&&kj(G[0],a,G[0]),Bj(G[3],G[0],G[1]),0)}function uj(G,T,H,B){var R,uA=new Uint8Array(32),qA=new Uint8Array(64),QA=[j(),j(),j(),j()],fj=[j(),j(),j(),j()];if(H<64||ve(fj,B))return-1;for(R=0;R<H;R++)G[R]=T[R];for(R=0;R<32;R++)G[R+32]=B[R];if(ra(qA,G,H),xj(qA),Va(QA,fj,qA),je(fj,T.subarray(32)),at(QA,fj),kr(uA,QA),H-=64,S(T,0,uA,0)){for(R=0;R<H;R++)G[R]=0;return-1}for(R=0;R<H;R++)G[R]=T[R+64];return H}var lA=32,eA=24,FA=32,Jj=16,Er=32,cn=32,Zo=32,Zr=32,$n=32,wn=eA,cp=FA,vd=Jj,ee=64,Ls=32,xc=64,Ai=32,In=64;A.lowlevel={crypto_core_hsalsa20:D,crypto_stream_xor:V,crypto_stream:O,crypto_stream_salsa20_xor:b,crypto_stream_salsa20:h,crypto_onetimeauth:rA,crypto_onetimeauth_verify:yA,crypto_verify_16:I,crypto_verify_32:S,crypto_secretbox:VA,crypto_secretbox_open:dj,crypto_scalarmult:Bt,crypto_scalarmult_base:Ye,crypto_box_beforenm:Ee,crypto_box_afternm:er,crypto_box:yt,crypto_box_open:Sr,crypto_box_keypair:Ie,crypto_hash:ra,crypto_sign:gj,crypto_sign_keypair:oA,crypto_sign_open:uj,crypto_secretbox_KEYBYTES:lA,crypto_secretbox_NONCEBYTES:eA,crypto_secretbox_ZEROBYTES:FA,crypto_secretbox_BOXZEROBYTES:Jj,crypto_scalarmult_BYTES:Er,crypto_scalarmult_SCALARBYTES:cn,crypto_box_PUBLICKEYBYTES:Zo,crypto_box_SECRETKEYBYTES:Zr,crypto_box_BEFORENMBYTES:$n,crypto_box_NONCEBYTES:wn,crypto_box_ZEROBYTES:cp,crypto_box_BOXZEROBYTES:vd,crypto_sign_BYTES:ee,crypto_sign_PUBLICKEYBYTES:Ls,crypto_sign_SECRETKEYBYTES:xc,crypto_sign_SEEDBYTES:Ai,crypto_hash_BYTES:In,gf:j,D:i,L:gA,pack25519:ae,unpack25519:Qj,M:Bj,A:Cj,S:De,Z:kj,pow2523:wj,add:at,set25519:bA,modL:KA,scalarmult:Va,scalarbase:je};function Wt(G,T){if(G.length!==lA)throw new Error("bad key size");if(T.length!==eA)throw new Error("bad nonce size")}function Vk(G,T){if(G.length!==Zo)throw new Error("bad public key size");if(T.length!==Zr)throw new Error("bad secret key size")}function Ot(){for(var G=0;G<arguments.length;G++)if(!(arguments[G]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Pl(G){for(var T=0;T<G.length;T++)G[T]=0}A.randomBytes=function(G){var T=new Uint8Array(G);return e(T,G),T},A.secretbox=function(G,T,H){Ot(G,T,H),Wt(H,T);for(var B=new Uint8Array(FA+G.length),R=new Uint8Array(B.length),uA=0;uA<G.length;uA++)B[uA+FA]=G[uA];return VA(R,B,B.length,T,H),R.subarray(Jj)},A.secretbox.open=function(G,T,H){Ot(G,T,H),Wt(H,T);for(var B=new Uint8Array(Jj+G.length),R=new Uint8Array(B.length),uA=0;uA<G.length;uA++)B[uA+Jj]=G[uA];return B.length<32||dj(R,B,B.length,T,H)!==0?null:R.subarray(FA)},A.secretbox.keyLength=lA,A.secretbox.nonceLength=eA,A.secretbox.overheadLength=Jj,A.scalarMult=function(G,T){if(Ot(G,T),G.length!==cn)throw new Error("bad n size");if(T.length!==Er)throw new Error("bad p size");var H=new Uint8Array(Er);return Bt(H,G,T),H},A.scalarMult.base=function(G){if(Ot(G),G.length!==cn)throw new Error("bad n size");var T=new Uint8Array(Er);return Ye(T,G),T},A.scalarMult.scalarLength=cn,A.scalarMult.groupElementLength=Er,A.box=function(G,T,H,B){var R=A.box.before(H,B);return A.secretbox(G,T,R)},A.box.before=function(G,T){Ot(G,T),Vk(G,T);var H=new Uint8Array($n);return Ee(H,G,T),H},A.box.after=A.secretbox,A.box.open=function(G,T,H,B){var R=A.box.before(H,B);return A.secretbox.open(G,T,R)},A.box.open.after=A.secretbox.open,A.box.keyPair=function(){var G=new Uint8Array(Zo),T=new Uint8Array(Zr);return Ie(G,T),{publicKey:G,secretKey:T}},A.box.keyPair.fromSecretKey=function(G){if(Ot(G),G.length!==Zr)throw new Error("bad secret key size");var T=new Uint8Array(Zo);return Ye(T,G),{publicKey:T,secretKey:new Uint8Array(G)}},A.box.publicKeyLength=Zo,A.box.secretKeyLength=Zr,A.box.sharedKeyLength=$n,A.box.nonceLength=wn,A.box.overheadLength=A.secretbox.overheadLength,A.sign=function(G,T){if(Ot(G,T),T.length!==xc)throw new Error("bad secret key size");var H=new Uint8Array(ee+G.length);return gj(H,G,G.length,T),H},A.sign.open=function(G,T){if(Ot(G,T),T.length!==Ls)throw new Error("bad public key size");var H=new Uint8Array(G.length),B=uj(H,G,G.length,T);if(B<0)return null;for(var R=new Uint8Array(B),uA=0;uA<R.length;uA++)R[uA]=H[uA];return R},A.sign.detached=function(G,T){for(var H=A.sign(G,T),B=new Uint8Array(ee),R=0;R<B.length;R++)B[R]=H[R];return B},A.sign.detached.verify=function(G,T,H){if(Ot(G,T,H),T.length!==ee)throw new Error("bad signature size");if(H.length!==Ls)throw new Error("bad public key size");var B=new Uint8Array(ee+G.length),R=new Uint8Array(ee+G.length),uA;for(uA=0;uA<ee;uA++)B[uA]=T[uA];for(uA=0;uA<G.length;uA++)B[uA+ee]=G[uA];return uj(R,B,B.length,H)>=0},A.sign.keyPair=function(){var G=new Uint8Array(Ls),T=new Uint8Array(xc);return oA(G,T),{publicKey:G,secretKey:T}},A.sign.keyPair.fromSecretKey=function(G){if(Ot(G),G.length!==xc)throw new Error("bad secret key size");for(var T=new Uint8Array(Ls),H=0;H<T.length;H++)T[H]=G[32+H];return{publicKey:T,secretKey:new Uint8Array(G)}},A.sign.keyPair.fromSeed=function(G){if(Ot(G),G.length!==Ai)throw new Error("bad seed size");for(var T=new Uint8Array(Ls),H=new Uint8Array(xc),B=0;B<32;B++)H[B]=G[B];return oA(T,H,!0),{publicKey:T,secretKey:H}},A.sign.publicKeyLength=Ls,A.sign.secretKeyLength=xc,A.sign.seedLength=Ai,A.sign.signatureLength=ee,A.hash=function(G){Ot(G);var T=new Uint8Array(In);return ra(T,G,G.length),T},A.hash.hashLength=In,A.verify=function(G,T){return Ot(G,T),G.length===0||T.length===0||G.length!==T.length?!1:m(G,0,T,0,G.length)===0},A.setPRNG=function(G){e=G},function(){var G=typeof self<"u"?self.crypto||self.msCrypto:null;if(G&&G.getRandomValues){var T=65536;A.setPRNG(function(H,B){var R,uA=new Uint8Array(B);for(R=0;R<B;R+=T)G.getRandomValues(uA.subarray(R,R+Math.min(B-R,T)));for(R=0;R<B;R++)H[R]=uA[R];Pl(uA)})}else typeof Lb<"u"&&(G=$xA(),G&&G.randomBytes&&A.setPRNG(function(H,B){var R,uA=G.randomBytes(B);for(R=0;R<B;R++)H[R]=uA[R];Pl(uA)}))}()})(typeof wP<"u"&&wP.exports?wP.exports:self.nacl=self.nacl||{})});var afA=OA((ICe,nqj)=>{nqj.exports="/assets/wasm/b5_hpke_bg-57LZZQD2.wasm"});var B0A=OA((H2e,FGj)=>{FGj.exports="/assets/wasm/confidential_computing_bg-QRWMMSG2.wasm"});var FT=OA(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0});GT.ByteSequence=void 0;var iAA=class{constructor(j){this.base64Value=j}toBase64(){return this.base64Value}};GT.ByteSequence=iAA});var Pw=OA(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.isByteSequence=Ad.isInnerList=Ad.isValidKeyStr=Ad.isValidTokenStr=Ad.isAscii=void 0;var Swj=/^[\x20-\x7E]*$/,Mwj=/^[a-zA-Z*][:/!#$%&'*+\-.^_`|~A-Za-z0-9]*$/,_wj=/^[a-z*][*\-_.a-z0-9]*$/;function Lwj(A){return Swj.test(A)}Ad.isAscii=Lwj;function Nwj(A){return Mwj.test(A)}Ad.isValidTokenStr=Nwj;function zwj(A){return _wj.test(A)}Ad.isValidKeyStr=zwj;function Rwj(A){return Array.isArray(A[0])}Ad.isInnerList=Rwj;function Jwj(A){return typeof A=="object"&&"base64Value"in A}Ad.isByteSequence=Jwj});var yT=OA(bT=>{"use strict";Object.defineProperty(bT,"__esModule",{value:!0});bT.Token=void 0;var Uwj=Pw(),sAA=class{constructor(j){if(!(0,Uwj.isValidTokenStr)(j))throw new TypeError("Invalid character in Token string. Tokens must start with *, A-Z and the rest of the string may only contain a-z, A-Z, 0-9, :/!#$%&'*+-.^_`|~");this.value=j}toString(){return this.value}};bT.Token=sAA});var UIA=OA(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.serializeKey=fa.serializeParameters=fa.serializeToken=fa.serializeByteSequence=fa.serializeBoolean=fa.serializeString=fa.serializeDecimal=fa.serializeInteger=fa.serializeBareItem=fa.serializeInnerList=fa.serializeItem=fa.serializeDictionary=fa.serializeList=fa.SerializeError=void 0;var Xwj=FT(),Vwj=yT(),$T=Pw(),_B=class extends Error{};fa.SerializeError=_B;function Wwj(A){return A.map(j=>(0,$T.isInnerList)(j)?lAA(j):wT(j)).join(", ")}fa.serializeList=Wwj;function Ywj(A){return Array.from(A.entries()).map(([j,e])=>{let t=dAA(j);return e[0]===!0?t+=IT(e[1]):(t+="=",(0,$T.isInnerList)(e)?t+=lAA(e):t+=wT(e)),t}).join(", ")}fa.serializeDictionary=Ywj;function wT(A){return cAA(A[0])+IT(A[1])}fa.serializeItem=wT;function lAA(A){return`(${A[0].map(j=>wT(j)).join(" ")})${IT(A[1])}`}fa.serializeInnerList=lAA;function cAA(A){if(typeof A=="number")return Number.isInteger(A)?_IA(A):LIA(A);if(typeof A=="string")return NIA(A);if(A instanceof Vwj.Token)return JIA(A);if(A instanceof Xwj.ByteSequence)return RIA(A);if(typeof A=="boolean")return zIA(A);throw new _B(`Cannot serialize values of type ${typeof A}`)}fa.serializeBareItem=cAA;function _IA(A){if(A<-999999999999999||A>999999999999999)throw new _B("Structured headers can only encode integers in the range range of -999,999,999,999,999 to 999,999,999,999,999 inclusive");return A.toString()}fa.serializeInteger=_IA;function LIA(A){let j=A.toFixed(3).replace(/0+$/,"");if(j.split(".")[0].replace("-","").length>12)throw new _B("Fractional numbers are not allowed to have more than 12 significant digits before the decimal point");return j}fa.serializeDecimal=LIA;function NIA(A){if(!(0,$T.isAscii)(A))throw new _B("Only ASCII strings may be serialized");return`"${A.replace(/("|\\)/g,j=>"\\"+j)}"`}fa.serializeString=NIA;function zIA(A){return A?"?1":"?0"}fa.serializeBoolean=zIA;function RIA(A){return`:${A.toBase64()}:`}fa.serializeByteSequence=RIA;function JIA(A){return A.toString()}fa.serializeToken=JIA;function IT(A){return Array.from(A).map(([j,e])=>{let t=";"+dAA(j);return e!==!0&&(t+="="+cAA(e)),t}).join("")}fa.serializeParameters=IT;function dAA(A){if(!(0,$T.isValidKeyStr)(A))throw new _B("Keys in dictionaries must only contain lowercase letter, numbers, _-*. and must start with a letter or *");return A}fa.serializeKey=dAA});var WIA=OA(dk=>{"use strict";Object.defineProperty(dk,"__esModule",{value:!0});dk.ParseError=dk.parseItem=dk.parseList=dk.parseDictionary=void 0;var Qwj=FT(),XIA=yT(),Zwj=Pw();function AIj(A){return new PG(A).parseDictionary()}dk.parseDictionary=AIj;function jIj(A){return new PG(A).parseList()}dk.parseList=jIj;function eIj(A){return new PG(A).parseItem()}dk.parseItem=eIj;var w6=class extends Error{constructor(j,e){super(`Parse error: ${e} at offset ${j}`)}};dk.ParseError=w6;var PG=class{constructor(j){this.input=j,this.pos=0}parseDictionary(){this.skipWS();let j=new Map;for(;!this.eof();){let e=this.parseKey(),t;if(this.lookChar()==="="?(this.pos++,t=this.parseItemOrInnerList()):t=[!0,this.parseParameters()],j.set(e,t),this.skipOWS(),this.eof())return j;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new w6(this.pos,"Dictionary contained a trailing comma")}return j}parseList(){this.skipWS();let j=[];for(;!this.eof();){if(j.push(this.parseItemOrInnerList()),this.skipOWS(),this.eof())return j;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new w6(this.pos,"A list may not end with a trailing comma")}return j}parseItem(j=!0){j&&this.skipWS();let e=[this.parseBareItem(),this.parseParameters()];return j&&this.checkTrail(),e}parseItemOrInnerList(){return this.lookChar()==="("?this.parseInnerList():this.parseItem(!1)}parseInnerList(){this.expectChar("("),this.pos++;let j=[];for(;!this.eof();){if(this.skipWS(),this.lookChar()===")")return this.pos++,[j,this.parseParameters()];j.push(this.parseItem(!1));let e=this.lookChar();if(e!==" "&&e!==")")throw new w6(this.pos,"Expected a whitespace or ) after every item in an inner list")}throw new w6(this.pos,"Could not find end of inner list")}parseBareItem(){let j=this.lookChar();if(j===void 0)throw new w6(this.pos,"Unexpected end of string");if(j.match(/^[-0-9]/))return this.parseIntegerOrDecimal();if(j==='"')return this.parseString();if(j.match(/^[A-Za-z*]/))return this.parseToken();if(j===":")return this.parseByteSequence();if(j==="?")return this.parseBoolean();throw new w6(this.pos,"Unexpected input")}parseParameters(){let j=new Map;for(;!this.eof()&&this.lookChar()===";";){this.pos++,this.skipWS();let t=this.parseKey(),r=!0;this.lookChar()==="="&&(this.pos++,r=this.parseBareItem()),j.set(t,r)}return j}parseIntegerOrDecimal(){let j="integer",e=1,t="";if(this.lookChar()==="-"&&(e=-1,this.pos++),!VIA(this.lookChar()))throw new w6(this.pos,"Expected a digit (0-9)");for(;!this.eof();){let r=this.getChar();if(VIA(r))t+=r;else if(j==="integer"&&r==="."){if(t.length>12)throw new w6(this.pos,"Exceeded maximum decimal length");t+=".",j="decimal"}else{this.pos--;break}if(j==="integer"&&t.length>15)throw new w6(this.pos,"Exceeded maximum integer length");if(j==="decimal"&&t.length>16)throw new w6(this.pos,"Exceeded maximum decimal length")}if(j==="integer")return parseInt(t,10)*e;if(t.endsWith("."))throw new w6(this.pos,"Decimal cannot end on a period");if(t.split(".")[1].length>3)throw new w6(this.pos,"Number of digits after the decimal point cannot exceed 3");return parseFloat(t)*e}parseString(){let j="";for(this.expectChar('"'),this.pos++;!this.eof();){let e=this.getChar();if(e==="\\"){if(this.eof())throw new w6(this.pos,"Unexpected end of input");let t=this.getChar();if(t!=="\\"&&t!=='"')throw new w6(this.pos,"A backslash must be followed by another backslash or double quote");j+=t}else{if(e==='"')return j;if((0,Zwj.isAscii)(e))j+=e;else throw new w6(this.pos,"Strings must be in the ASCII range")}}throw new w6(this.pos,"Unexpected end of input")}parseToken(){let j="";for(;!this.eof();){let e=this.lookChar();if(e===void 0||!/^[:/!#$%&'*+\-.^_`|~A-Za-z0-9]$/.test(e))return new XIA.Token(j);j+=this.getChar()}return new XIA.Token(j)}parseByteSequence(){this.expectChar(":"),this.pos++;let j=this.input.indexOf(":",this.pos);if(j===-1)throw new w6(this.pos,'Could not find a closing ":" character to mark end of Byte Sequence');let e=this.input.substring(this.pos,j);if(this.pos+=e.length+1,!/^[A-Za-z0-9+/=]*$/.test(e))throw new w6(this.pos,"ByteSequence does not contain a valid base64 string");return new Qwj.ByteSequence(e)}parseBoolean(){this.expectChar("?"),this.pos++;let j=this.getChar();if(j==="1")return!0;if(j==="0")return!1;throw new w6(this.pos,'Unexpected character. Expected a "1" or a "0"')}parseKey(){var j;if(!(!((j=this.lookChar())===null||j===void 0)&&j.match(/^[a-z*]/)))throw new w6(this.pos,"A key must begin with an asterisk or letter (a-z)");let e="";for(;!this.eof();){let t=this.lookChar();if(t===void 0||!/^[a-z0-9_\-.*]$/.test(t))return e;e+=this.getChar()}return e}lookChar(){return this.input[this.pos]}expectChar(j){if(this.lookChar()!==j)throw new w6(this.pos,`Expected ${j}`)}getChar(){return this.input[this.pos++]}eof(){return this.pos>=this.input.length}skipOWS(){for(;;){let j=this.input.substr(this.pos,1);if(j===" "||j==="	")this.pos++;else break}}skipWS(){for(;this.lookChar()===" ";)this.pos++}checkTrail(){if(this.skipWS(),!this.eof())throw new w6(this.pos,"Unexpected characters at end of input")}};dk.default=PG;var tIj=/^[0-9]$/;function VIA(A){return A===void 0?!1:tIj.test(A)}});var YIA=OA(jd=>{"use strict";var rIj=jd&&jd.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),DT=jd&&jd.__exportStar||function(A,j){for(var e in A)e!=="default"&&!Object.prototype.hasOwnProperty.call(j,e)&&rIj(j,A,e)};Object.defineProperty(jd,"__esModule",{value:!0});jd.Token=void 0;DT(UIA(),jd);DT(WIA(),jd);DT(FT(),jd);DT(Pw(),jd);var aIj=yT();Object.defineProperty(jd,"Token",{enumerable:!0,get:function(){return aIj.Token}})});var uDA=OA((xYe,DIj)=>{DIj.exports="/assets/wasm/b5_trustlog_bg-REYBW7PZ.wasm"});var XjA=OA((JjA,UjA)=>{(function(A,j){typeof define=="function"&&define.amd?define([],j):typeof UjA=="object"&&typeof JjA<"u"?UjA.exports=j():A.Papa=j()})(JjA,function A(){"use strict";var j=typeof self<"u"?self:typeof window<"u"?window:j!==void 0?j:{},e=!j.document&&!!j.postMessage,t=j.IS_PAPA_WORKER||!1,r={},a=0,n={parse:function(b,h){var O=(h=h||{}).dynamicTyping||!1;if(C(O)&&(h.dynamicTypingFunction=O,O={}),h.dynamicTyping=O,h.transform=!!C(h.transform)&&h.transform,h.worker&&n.WORKERS_SUPPORTED){var V=function(){if(!n.WORKERS_SUPPORTED)return!1;var rA=(VA=j.URL||j.webkitURL||null,dj=A.toString(),n.BLOB_URL||(n.BLOB_URL=VA.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",dj,")();"],{type:"text/javascript"})))),yA=new j.Worker(rA),VA,dj;return yA.onmessage=S,yA.id=a++,r[yA.id]=yA}();return V.userStep=h.step,V.userChunk=h.chunk,V.userComplete=h.complete,V.userError=h.error,h.step=C(h.step),h.chunk=C(h.chunk),h.complete=C(h.complete),h.error=C(h.error),delete h.worker,void V.postMessage({input:b,config:h,workerId:V.id})}var Y=null;return n.NODE_STREAM_INPUT,typeof b=="string"?(b=function(rA){return rA.charCodeAt(0)===65279?rA.slice(1):rA}(b),Y=h.download?new s(h):new d(h)):b.readable===!0&&C(b.read)&&C(b.on)?Y=new k(h):(j.File&&b instanceof File||b instanceof Object)&&(Y=new l(h)),Y.stream(b)},unparse:function(b,h){var O=!1,V=!0,Y=",",rA=`\r
`,yA='"',VA=yA+yA,dj=!1,bA=null,Mj=!1;(function(){if(typeof h=="object"){if(typeof h.delimiter!="string"||n.BAD_DELIMITERS.filter(function(cj){return h.delimiter.indexOf(cj)!==-1}).length||(Y=h.delimiter),(typeof h.quotes=="boolean"||typeof h.quotes=="function"||Array.isArray(h.quotes))&&(O=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(dj=h.skipEmptyLines),typeof h.newline=="string"&&(rA=h.newline),typeof h.quoteChar=="string"&&(yA=h.quoteChar),typeof h.header=="boolean"&&(V=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");bA=h.columns}h.escapeChar!==void 0&&(VA=h.escapeChar+yA),(typeof h.escapeFormulae=="boolean"||h.escapeFormulae instanceof RegExp)&&(Mj=h.escapeFormulae instanceof RegExp?h.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var mj=new RegExp(m(yA),"g");if(typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){if(!b.length||Array.isArray(b[0]))return ae(null,b,dj);if(typeof b[0]=="object")return ae(bA||Object.keys(b[0]),b,dj)}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields||bA),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:typeof b.data[0]=="object"?Object.keys(b.data[0]):[]),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),ae(b.fields||[],b.data||[],dj);throw new Error("Unable to serialize unrecognized input");function ae(cj,Qj,Cj){var kj="";typeof cj=="string"&&(cj=JSON.parse(cj)),typeof Qj=="string"&&(Qj=JSON.parse(Qj));var Bj=Array.isArray(cj)&&0<cj.length,De=!Array.isArray(Qj[0]);if(Bj&&V){for(var wt=0;wt<cj.length;wt++)0<wt&&(kj+=Y),kj+=_j(cj[wt],wt);0<Qj.length&&(kj+=rA)}for(var wj=0;wj<Qj.length;wj++){var Bt=Bj?cj.length:Qj[wj].length,Ye=!1,Ie=Bj?Object.keys(Qj[wj]).length===0:Qj[wj].length===0;if(Cj&&!Bj&&(Ye=Cj==="greedy"?Qj[wj].join("").trim()==="":Qj[wj].length===1&&Qj[wj][0].length===0),Cj==="greedy"&&Bj){for(var Ee=[],er=0;er<Bt;er++){var Vt=De?cj[er]:er;Ee.push(Qj[wj][Vt])}Ye=Ee.join("").trim()===""}if(!Ye){for(var yt=0;yt<Bt;yt++){0<yt&&!Ie&&(kj+=Y);var Sr=Bj&&De?cj[yt]:yt;kj+=_j(Qj[wj][Sr],yt)}wj<Qj.length-1&&(!Cj||0<Bt&&!Ie)&&(kj+=rA)}}return kj}function _j(cj,Qj){if(cj==null)return"";if(cj.constructor===Date)return JSON.stringify(cj).slice(1,25);var Cj=!1;Mj&&typeof cj=="string"&&Mj.test(cj)&&(cj="'"+cj,Cj=!0);var kj=cj.toString().replace(mj,VA);return(Cj=Cj||O===!0||typeof O=="function"&&O(cj,Qj)||Array.isArray(O)&&O[Qj]||function(Bj,De){for(var wt=0;wt<De.length;wt++)if(-1<Bj.indexOf(De[wt]))return!0;return!1}(kj,n.BAD_DELIMITERS)||-1<kj.indexOf(Y)||kj.charAt(0)===" "||kj.charAt(kj.length-1)===" ")?yA+kj+yA:kj}}};if(n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!e&&!!j.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=I,n.ParserHandle=u,n.NetworkStreamer=s,n.FileStreamer=l,n.StringStreamer=d,n.ReadableStreamStreamer=k,j.jQuery){var o=j.jQuery;o.fn.parse=function(b){var h=b.config||{},O=[];return this.each(function(rA){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&j.FileReader)||!this.files||this.files.length===0)return!0;for(var yA=0;yA<this.files.length;yA++)O.push({file:this.files[yA],inputElem:this,instanceConfig:o.extend({},h)})}),V(),this;function V(){if(O.length!==0){var rA,yA,VA,dj,bA=O[0];if(C(b.before)){var Mj=b.before(bA.file,bA.inputElem);if(typeof Mj=="object"){if(Mj.action==="abort")return rA="AbortError",yA=bA.file,VA=bA.inputElem,dj=Mj.reason,void(C(b.error)&&b.error({name:rA},yA,VA,dj));if(Mj.action==="skip")return void Y();typeof Mj.config=="object"&&(bA.instanceConfig=o.extend(bA.instanceConfig,Mj.config))}else if(Mj==="skip")return void Y()}var mj=bA.instanceConfig.complete;bA.instanceConfig.complete=function(ae){C(mj)&&mj(ae,bA.file,bA.inputElem),Y()},n.parse(bA.file,bA.instanceConfig)}else C(b.complete)&&b.complete()}function Y(){O.splice(0,1),V()}}}function i(b){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(h){var O=P(h);O.chunkSize=parseInt(O.chunkSize),h.step||h.chunk||(O.chunkSize=null),this._handle=new u(O),(this._handle.streamer=this)._config=O}.call(this,b),this.parseChunk=function(h,O){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var V=this._config.beforeFirstChunk(h);V!==void 0&&(h=V)}this.isFirstChunk=!1,this._halted=!1;var Y=this._partialLine+h;this._partialLine="";var rA=this._handle.parse(Y,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var yA=rA.meta.cursor;this._finished||(this._partialLine=Y.substring(yA-this._baseIndex),this._baseIndex=yA),rA&&rA.data&&(this._rowCount+=rA.data.length);var VA=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(t)j.postMessage({results:rA,workerId:n.WORKER_ID,finished:VA});else if(C(this._config.chunk)&&!O){if(this._config.chunk(rA,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);rA=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(rA.data),this._completeResults.errors=this._completeResults.errors.concat(rA.errors),this._completeResults.meta=rA.meta),this._completed||!VA||!C(this._config.complete)||rA&&rA.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),VA||rA&&rA.meta.paused||this._nextChunk(),rA}this._halted=!0},this._sendError=function(h){C(this._config.error)?this._config.error(h):t&&this._config.error&&j.postMessage({workerId:n.WORKER_ID,error:h,finished:!1})}}function s(b){var h;(b=b||{}).chunkSize||(b.chunkSize=n.RemoteChunkSize),i.call(this,b),this._nextChunk=e?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),e||(h.onload=D(this._chunkLoaded,this),h.onerror=D(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!e),this._config.downloadRequestHeaders){var O=this._config.downloadRequestHeaders;for(var V in O)h.setRequestHeader(V,O[V])}if(this._config.chunkSize){var Y=this._start+this._config.chunkSize-1;h.setRequestHeader("Range","bytes="+this._start+"-"+Y)}try{h.send(this._config.downloadRequestBody)}catch(rA){this._chunkError(rA.message)}e&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:h.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(O){var V=O.getResponseHeader("Content-Range");return V===null?-1:parseInt(V.substring(V.lastIndexOf("/")+1))}(h),this.parseChunk(h.responseText)))},this._chunkError=function(O){var V=h.statusText||O;this._sendError(new Error(V))}}function l(b){var h,O;(b=b||{}).chunkSize||(b.chunkSize=n.LocalChunkSize),i.call(this,b);var V=typeof FileReader<"u";this.stream=function(Y){this._input=Y,O=Y.slice||Y.webkitSlice||Y.mozSlice,V?((h=new FileReader).onload=D(this._chunkLoaded,this),h.onerror=D(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Y=this._input;if(this._config.chunkSize){var rA=Math.min(this._start+this._config.chunkSize,this._input.size);Y=O.call(Y,this._start,rA)}var yA=h.readAsText(Y,this._config.encoding);V||this._chunkLoaded({target:{result:yA}})},this._chunkLoaded=function(Y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Y.target.result)},this._chunkError=function(){this._sendError(h.error)}}function d(b){var h;i.call(this,b=b||{}),this.stream=function(O){return h=O,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var O,V=this._config.chunkSize;return V?(O=h.substring(0,V),h=h.substring(V)):(O=h,h=""),this._finished=!h,this.parseChunk(O)}}}function k(b){i.call(this,b=b||{});var h=[],O=!0,V=!1;this.pause=function(){i.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){i.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Y){this._input=Y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){V&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):O=!0},this._streamData=D(function(Y){try{h.push(typeof Y=="string"?Y:Y.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(rA){this._streamError(rA)}},this),this._streamError=D(function(Y){this._streamCleanUp(),this._sendError(Y)},this),this._streamEnd=D(function(){this._streamCleanUp(),V=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function u(b){var h,O,V,Y=Math.pow(2,53),rA=-Y,yA=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,VA=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,dj=this,bA=0,Mj=0,mj=!1,ae=!1,_j=[],cj={data:[],errors:[],meta:{}};if(C(b.step)){var Qj=b.step;b.step=function(wj){if(cj=wj,Bj())kj();else{if(kj(),cj.data.length===0)return;bA+=wj.data.length,b.preview&&bA>b.preview?O.abort():(cj.data=cj.data[0],Qj(cj,dj))}}}function Cj(wj){return b.skipEmptyLines==="greedy"?wj.join("").trim()==="":wj.length===1&&wj[0].length===0}function kj(){return cj&&V&&(wt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),V=!1),b.skipEmptyLines&&(cj.data=cj.data.filter(function(wj){return!Cj(wj)})),Bj()&&function(){if(!cj)return;function wj(Ye,Ie){C(b.transformHeader)&&(Ye=b.transformHeader(Ye,Ie)),_j.push(Ye)}if(Array.isArray(cj.data[0])){for(var Bt=0;Bj()&&Bt<cj.data.length;Bt++)cj.data[Bt].forEach(wj);cj.data.splice(0,1)}else cj.data.forEach(wj)}(),function(){if(!cj||!b.header&&!b.dynamicTyping&&!b.transform)return cj;function wj(Ye,Ie){var Ee,er=b.header?{}:[];for(Ee=0;Ee<Ye.length;Ee++){var Vt=Ee,yt=Ye[Ee];b.header&&(Vt=Ee>=_j.length?"__parsed_extra":_j[Ee]),b.transform&&(yt=b.transform(yt,Vt)),yt=De(Vt,yt),Vt==="__parsed_extra"?(er[Vt]=er[Vt]||[],er[Vt].push(yt)):er[Vt]=yt}return b.header&&(Ee>_j.length?wt("FieldMismatch","TooManyFields","Too many fields: expected "+_j.length+" fields but parsed "+Ee,Mj+Ie):Ee<_j.length&&wt("FieldMismatch","TooFewFields","Too few fields: expected "+_j.length+" fields but parsed "+Ee,Mj+Ie)),er}var Bt=1;return!cj.data.length||Array.isArray(cj.data[0])?(cj.data=cj.data.map(wj),Bt=cj.data.length):cj.data=wj(cj.data,0),b.header&&cj.meta&&(cj.meta.fields=_j),Mj+=Bt,cj}()}function Bj(){return b.header&&_j.length===0}function De(wj,Bt){return Ye=wj,b.dynamicTypingFunction&&b.dynamicTyping[Ye]===void 0&&(b.dynamicTyping[Ye]=b.dynamicTypingFunction(Ye)),(b.dynamicTyping[Ye]||b.dynamicTyping)===!0?Bt==="true"||Bt==="TRUE"||Bt!=="false"&&Bt!=="FALSE"&&(function(Ie){if(yA.test(Ie)){var Ee=parseFloat(Ie);if(rA<Ee&&Ee<Y)return!0}return!1}(Bt)?parseFloat(Bt):VA.test(Bt)?new Date(Bt):Bt===""?null:Bt):Bt;var Ye}function wt(wj,Bt,Ye,Ie){var Ee={type:wj,code:Bt,message:Ye};Ie!==void 0&&(Ee.row=Ie),cj.errors.push(Ee)}this.parse=function(wj,Bt,Ye){var Ie=b.quoteChar||'"';if(b.newline||(b.newline=function(Vt,yt){Vt=Vt.substring(0,1048576);var Sr=new RegExp(m(yt)+"([^]*?)"+m(yt),"gm"),Dr=(Vt=Vt.replace(Sr,"")).split("\r"),yr=Vt.split(`
`),ra=1<yr.length&&yr[0].length<Dr[0].length;if(Dr.length===1||ra)return`
`;for(var at=0,st=0;st<Dr.length;st++)Dr[st][0]===`
`&&at++;return at>=Dr.length/2?`\r
`:"\r"}(wj,Ie)),V=!1,b.delimiter)C(b.delimiter)&&(b.delimiter=b.delimiter(wj),cj.meta.delimiter=b.delimiter);else{var Ee=function(Vt,yt,Sr,Dr,yr){var ra,at,st,kr;yr=yr||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var Va=0;Va<yr.length;Va++){var je=yr[Va],oA=0,gA=0,KA=0;st=void 0;for(var xj=new I({comments:Dr,delimiter:je,newline:yt,preview:10}).parse(Vt),gj=0;gj<xj.data.length;gj++)if(Sr&&Cj(xj.data[gj]))KA++;else{var ve=xj.data[gj].length;gA+=ve,st!==void 0?0<ve&&(oA+=Math.abs(ve-st),st=ve):st=ve}0<xj.data.length&&(gA/=xj.data.length-KA),(at===void 0||oA<=at)&&(kr===void 0||kr<gA)&&1.99<gA&&(at=oA,ra=je,kr=gA)}return{successful:!!(b.delimiter=ra),bestDelimiter:ra}}(wj,b.newline,b.skipEmptyLines,b.comments,b.delimitersToGuess);Ee.successful?b.delimiter=Ee.bestDelimiter:(V=!0,b.delimiter=n.DefaultDelimiter),cj.meta.delimiter=b.delimiter}var er=P(b);return b.preview&&b.header&&er.preview++,h=wj,O=new I(er),cj=O.parse(h,Bt,Ye),kj(),mj?{meta:{paused:!0}}:cj||{meta:{paused:!1}}},this.paused=function(){return mj},this.pause=function(){mj=!0,O.abort(),h=C(b.chunk)?"":h.substring(O.getCharIndex())},this.resume=function(){dj.streamer._halted?(mj=!1,dj.streamer.parseChunk(h,!0)):setTimeout(dj.resume,3)},this.aborted=function(){return ae},this.abort=function(){ae=!0,O.abort(),cj.meta.aborted=!0,C(b.complete)&&b.complete(cj),h=""}}function m(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(b){var h,O=(b=b||{}).delimiter,V=b.newline,Y=b.comments,rA=b.step,yA=b.preview,VA=b.fastMode,dj=h=b.quoteChar===void 0||b.quoteChar===null?'"':b.quoteChar;if(b.escapeChar!==void 0&&(dj=b.escapeChar),(typeof O!="string"||-1<n.BAD_DELIMITERS.indexOf(O))&&(O=","),Y===O)throw new Error("Comment character same as delimiter");Y===!0?Y="#":(typeof Y!="string"||-1<n.BAD_DELIMITERS.indexOf(Y))&&(Y=!1),V!==`
`&&V!=="\r"&&V!==`\r
`&&(V=`
`);var bA=0,Mj=!1;this.parse=function(mj,ae,_j){if(typeof mj!="string")throw new Error("Input must be a string");var cj=mj.length,Qj=O.length,Cj=V.length,kj=Y.length,Bj=C(rA),De=[],wt=[],wj=[],Bt=bA=0;if(!mj)return uj();if(b.header&&!ae){var Ye=mj.split(V)[0].split(O),Ie=[],Ee={},er=!1;for(var Vt in Ye){var yt=Ye[Vt];C(b.transformHeader)&&(yt=b.transformHeader(yt,Vt));var Sr=yt,Dr=Ee[yt]||0;for(0<Dr&&(er=!0,Sr=yt+"_"+Dr),Ee[yt]=Dr+1;Ie.includes(Sr);)Sr=Sr+"_"+Dr;Ie.push(Sr)}if(er){var yr=mj.split(V);yr[0]=Ie.join(O),mj=yr.join(V)}}if(VA||VA!==!1&&mj.indexOf(h)===-1){for(var ra=mj.split(V),at=0;at<ra.length;at++){if(wj=ra[at],bA+=wj.length,at!==ra.length-1)bA+=V.length;else if(_j)return uj();if(!Y||wj.substring(0,kj)!==Y){if(Bj){if(De=[],KA(wj.split(O)),lA(),Mj)return uj()}else KA(wj.split(O));if(yA&&yA<=at)return De=De.slice(0,yA),uj(!0)}}return uj()}for(var st=mj.indexOf(O,bA),kr=mj.indexOf(V,bA),Va=new RegExp(m(dj)+m(h),"g"),je=mj.indexOf(h,bA);;)if(mj[bA]!==h)if(Y&&wj.length===0&&mj.substring(bA,bA+kj)===Y){if(kr===-1)return uj();bA=kr+Cj,kr=mj.indexOf(V,bA),st=mj.indexOf(O,bA)}else if(st!==-1&&(st<kr||kr===-1))wj.push(mj.substring(bA,st)),bA=st+Qj,st=mj.indexOf(O,bA);else{if(kr===-1)break;if(wj.push(mj.substring(bA,kr)),ve(kr+Cj),Bj&&(lA(),Mj))return uj();if(yA&&De.length>=yA)return uj(!0)}else for(je=bA,bA++;;){if((je=mj.indexOf(h,je+1))===-1)return _j||wt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:De.length,index:bA}),gj();if(je===cj-1)return gj(mj.substring(bA,je).replace(Va,h));if(h!==dj||mj[je+1]!==dj){if(h===dj||je===0||mj[je-1]!==dj){st!==-1&&st<je+1&&(st=mj.indexOf(O,je+1)),kr!==-1&&kr<je+1&&(kr=mj.indexOf(V,je+1));var oA=xj(kr===-1?st:Math.min(st,kr));if(mj.substr(je+1+oA,Qj)===O){wj.push(mj.substring(bA,je).replace(Va,h)),mj[bA=je+1+oA+Qj]!==h&&(je=mj.indexOf(h,bA)),st=mj.indexOf(O,bA),kr=mj.indexOf(V,bA);break}var gA=xj(kr);if(mj.substring(je+1+gA,je+1+gA+Cj)===V){if(wj.push(mj.substring(bA,je).replace(Va,h)),ve(je+1+gA+Cj),st=mj.indexOf(O,bA),je=mj.indexOf(h,bA),Bj&&(lA(),Mj))return uj();if(yA&&De.length>=yA)return uj(!0);break}wt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:De.length,index:bA}),je++}}else je++}return gj();function KA(eA){De.push(eA),Bt=bA}function xj(eA){var FA=0;if(eA!==-1){var Jj=mj.substring(je+1,eA);Jj&&Jj.trim()===""&&(FA=Jj.length)}return FA}function gj(eA){return _j||(eA===void 0&&(eA=mj.substring(bA)),wj.push(eA),bA=cj,KA(wj),Bj&&lA()),uj()}function ve(eA){bA=eA,KA(wj),wj=[],kr=mj.indexOf(V,bA)}function uj(eA){return{data:De,errors:wt,meta:{delimiter:O,linebreak:V,aborted:Mj,truncated:!!eA,cursor:Bt+(ae||0)}}}function lA(){rA(uj()),De=[],wt=[]}},this.abort=function(){Mj=!0},this.getCharIndex=function(){return bA}}function S(b){var h=b.data,O=r[h.workerId],V=!1;if(h.error)O.userError(h.error,h.file);else if(h.results&&h.results.data){var Y={abort:function(){V=!0,f(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(C(O.userStep)){for(var rA=0;rA<h.results.data.length&&(O.userStep({data:h.results.data[rA],errors:h.results.errors,meta:h.results.meta},Y),!V);rA++);delete h.results}else C(O.userChunk)&&(O.userChunk(h.results,Y,h.file),delete h.results)}h.finished&&!V&&f(h.workerId,h.results)}function f(b,h){var O=r[b];C(O.userComplete)&&O.userComplete(h),O.terminate(),delete r[b]}function v(){throw new Error("Not implemented.")}function P(b){if(typeof b!="object"||b===null)return b;var h=Array.isArray(b)?[]:{};for(var O in b)h[O]=P(b[O]);return h}function D(b,h){return function(){b.apply(h,arguments)}}function C(b){return typeof b=="function"}return t&&(j.onmessage=function(b){var h=b.data;if(n.WORKER_ID===void 0&&h&&(n.WORKER_ID=h.workerId),typeof h.input=="string")j.postMessage({workerId:n.WORKER_ID,results:n.parse(h.input,h.config),finished:!0});else if(j.File&&h.input instanceof File||h.input instanceof Object){var O=n.parse(h.input,h.config);O&&j.postMessage({workerId:n.WORKER_ID,results:O,finished:!0})}}),(s.prototype=Object.create(i.prototype)).constructor=s,(l.prototype=Object.create(i.prototype)).constructor=l,(d.prototype=Object.create(d.prototype)).constructor=d,(k.prototype=Object.create(i.prototype)).constructor=k,n})});var uK=OA(hm=>{"use strict";var A1A=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",CHj=A1A+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",j1A="["+A1A+"]["+CHj+"]*",HHj=new RegExp("^"+j1A+"$"),THj=function(A,j){let e=[],t=j.exec(A);for(;t;){let r=[];r.startIndex=j.lastIndex-t[0].length;let a=t.length;for(let n=0;n<a;n++)r.push(t[n]);e.push(r),t=j.exec(A)}return e},KHj=function(A){let j=HHj.exec(A);return!(j===null||typeof j>"u")};hm.isExist=function(A){return typeof A<"u"};hm.isEmptyObject=function(A){return Object.keys(A).length===0};hm.merge=function(A,j,e){if(j){let t=Object.keys(j),r=t.length;for(let a=0;a<r;a++)e==="strict"?A[t[a]]=[j[t[a]]]:A[t[a]]=j[t[a]]}};hm.getValue=function(A){return hm.isExist(A)?A:""};hm.isName=KHj;hm.getAllMatches=THj;hm.nameRegexp=j1A});var AeA=OA(n1A=>{"use strict";var ZjA=uK(),SHj={allowBooleanAttributes:!1,unpairedTags:[]};n1A.validate=function(A,j){j=Object.assign({},SHj,j);let e=[],t=!1,r=!1;A[0]==="\uFEFF"&&(A=A.substr(1));for(let a=0;a<A.length;a++)if(A[a]==="<"&&A[a+1]==="?"){if(a+=2,a=t1A(A,a),a.err)return a}else if(A[a]==="<"){let n=a;if(a++,A[a]==="!"){a=r1A(A,a);continue}else{let o=!1;A[a]==="/"&&(o=!0,a++);let i="";for(;a<A.length&&A[a]!==">"&&A[a]!==" "&&A[a]!=="	"&&A[a]!==`
`&&A[a]!=="\r";a++)i+=A[a];if(i=i.trim(),i[i.length-1]==="/"&&(i=i.substring(0,i.length-1),a--),!UHj(i)){let d;return i.trim().length===0?d="Invalid space after '<'.":d="Tag '"+i+"' is an invalid name.",zn("InvalidTag",d,Ds(A,a))}let s=LHj(A,a);if(s===!1)return zn("InvalidAttr","Attributes for '"+i+"' have open quote.",Ds(A,a));let l=s.value;if(a=s.index,l[l.length-1]==="/"){let d=a-l.length;l=l.substring(0,l.length-1);let k=a1A(l,j);if(k===!0)t=!0;else return zn(k.err.code,k.err.msg,Ds(A,d+k.err.line))}else if(o)if(s.tagClosed){if(l.trim().length>0)return zn("InvalidTag","Closing tag '"+i+"' can't have attributes or invalid starting.",Ds(A,n));if(e.length===0)return zn("InvalidTag","Closing tag '"+i+"' has not been opened.",Ds(A,n));{let d=e.pop();if(i!==d.tagName){let k=Ds(A,d.tagStartPos);return zn("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+k.line+", col "+k.col+") instead of closing tag '"+i+"'.",Ds(A,n))}e.length==0&&(r=!0)}}else return zn("InvalidTag","Closing tag '"+i+"' doesn't have proper closing.",Ds(A,a));else{let d=a1A(l,j);if(d!==!0)return zn(d.err.code,d.err.msg,Ds(A,a-l.length+d.err.line));if(r===!0)return zn("InvalidXml","Multiple possible root nodes found.",Ds(A,a));j.unpairedTags.indexOf(i)!==-1||e.push({tagName:i,tagStartPos:n}),t=!0}for(a++;a<A.length;a++)if(A[a]==="<")if(A[a+1]==="!"){a++,a=r1A(A,a);continue}else if(A[a+1]==="?"){if(a=t1A(A,++a),a.err)return a}else break;else if(A[a]==="&"){let d=RHj(A,a);if(d==-1)return zn("InvalidChar","char '&' is not expected.",Ds(A,a));a=d}else if(r===!0&&!e1A(A[a]))return zn("InvalidXml","Extra text at the end",Ds(A,a));A[a]==="<"&&a--}}else{if(e1A(A[a]))continue;return zn("InvalidChar","char '"+A[a]+"' is not expected.",Ds(A,a))}if(t){if(e.length==1)return zn("InvalidTag","Unclosed tag '"+e[0].tagName+"'.",Ds(A,e[0].tagStartPos));if(e.length>0)return zn("InvalidXml","Invalid '"+JSON.stringify(e.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return zn("InvalidXml","Start tag expected.",1);return!0};function e1A(A){return A===" "||A==="	"||A===`
`||A==="\r"}function t1A(A,j){let e=j;for(;j<A.length;j++)if(A[j]=="?"||A[j]==" "){let t=A.substr(e,j-e);if(j>5&&t==="xml")return zn("InvalidXml","XML declaration allowed only at the start of the document.",Ds(A,j));if(A[j]=="?"&&A[j+1]==">"){j++;break}else continue}return j}function r1A(A,j){if(A.length>j+5&&A[j+1]==="-"&&A[j+2]==="-"){for(j+=3;j<A.length;j++)if(A[j]==="-"&&A[j+1]==="-"&&A[j+2]===">"){j+=2;break}}else if(A.length>j+8&&A[j+1]==="D"&&A[j+2]==="O"&&A[j+3]==="C"&&A[j+4]==="T"&&A[j+5]==="Y"&&A[j+6]==="P"&&A[j+7]==="E"){let e=1;for(j+=8;j<A.length;j++)if(A[j]==="<")e++;else if(A[j]===">"&&(e--,e===0))break}else if(A.length>j+9&&A[j+1]==="["&&A[j+2]==="C"&&A[j+3]==="D"&&A[j+4]==="A"&&A[j+5]==="T"&&A[j+6]==="A"&&A[j+7]==="["){for(j+=8;j<A.length;j++)if(A[j]==="]"&&A[j+1]==="]"&&A[j+2]===">"){j+=2;break}}return j}var MHj='"',_Hj="'";function LHj(A,j){let e="",t="",r=!1;for(;j<A.length;j++){if(A[j]===MHj||A[j]===_Hj)t===""?t=A[j]:t!==A[j]||(t="");else if(A[j]===">"&&t===""){r=!0;break}e+=A[j]}return t!==""?!1:{value:e,index:j,tagClosed:r}}var NHj=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function a1A(A,j){let e=ZjA.getAllMatches(A,NHj),t={};for(let r=0;r<e.length;r++){if(e[r][1].length===0)return zn("InvalidAttr","Attribute '"+e[r][2]+"' has no space in starting.",kI(e[r]));if(e[r][3]!==void 0&&e[r][4]===void 0)return zn("InvalidAttr","Attribute '"+e[r][2]+"' is without value.",kI(e[r]));if(e[r][3]===void 0&&!j.allowBooleanAttributes)return zn("InvalidAttr","boolean attribute '"+e[r][2]+"' is not allowed.",kI(e[r]));let a=e[r][2];if(!JHj(a))return zn("InvalidAttr","Attribute '"+a+"' is an invalid name.",kI(e[r]));if(!t.hasOwnProperty(a))t[a]=1;else return zn("InvalidAttr","Attribute '"+a+"' is repeated.",kI(e[r]))}return!0}function zHj(A,j){let e=/\d/;for(A[j]==="x"&&(j++,e=/[\da-fA-F]/);j<A.length;j++){if(A[j]===";")return j;if(!A[j].match(e))break}return-1}function RHj(A,j){if(j++,A[j]===";")return-1;if(A[j]==="#")return j++,zHj(A,j);let e=0;for(;j<A.length;j++,e++)if(!(A[j].match(/\w/)&&e<20)){if(A[j]===";")break;return-1}return j}function zn(A,j,e){return{err:{code:A,msg:j,line:e.line||e,col:e.col}}}function JHj(A){return ZjA.isName(A)}function UHj(A){return ZjA.isName(A)}function Ds(A,j){let e=A.substring(0,j).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function kI(A){return A.startIndex+A[1].length}});var i1A=OA(jeA=>{var o1A={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(A,j){return j},attributeValueProcessor:function(A,j){return j},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(A,j,e){return A}},XHj=function(A){return Object.assign({},o1A,A)};jeA.buildOptions=XHj;jeA.defaultOptions=o1A});var l1A=OA((Ttt,s1A)=>{"use strict";var eeA=class{constructor(j){this.tagname=j,this.child=[],this[":@"]={}}add(j,e){j==="__proto__"&&(j="#__proto__"),this.child.push({[j]:e})}addChild(j){j.tagname==="__proto__"&&(j.tagname="#__proto__"),j[":@"]&&Object.keys(j[":@"]).length>0?this.child.push({[j.tagname]:j.child,":@":j[":@"]}):this.child.push({[j.tagname]:j.child})}};s1A.exports=eeA});var d1A=OA((Ktt,c1A)=>{var VHj=uK();function WHj(A,j){let e={};if(A[j+3]==="O"&&A[j+4]==="C"&&A[j+5]==="T"&&A[j+6]==="Y"&&A[j+7]==="P"&&A[j+8]==="E"){j=j+9;let t=1,r=!1,a=!1,n="";for(;j<A.length;j++)if(A[j]==="<"&&!a){if(r&&ZHj(A,j))j+=7,[entityName,val,j]=YHj(A,j+1),val.indexOf("&")===-1&&(e[tTj(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(r&&ATj(A,j))j+=8;else if(r&&jTj(A,j))j+=8;else if(r&&eTj(A,j))j+=9;else if(QHj)a=!0;else throw new Error("Invalid DOCTYPE");t++,n=""}else if(A[j]===">"){if(a?A[j-1]==="-"&&A[j-2]==="-"&&(a=!1,t--):t--,t===0)break}else A[j]==="["?r=!0:n+=A[j];if(t!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:e,i:j}}function YHj(A,j){let e="";for(;j<A.length&&A[j]!=="'"&&A[j]!=='"';j++)e+=A[j];if(e=e.trim(),e.indexOf(" ")!==-1)throw new Error("External entites are not supported");let t=A[j++],r="";for(;j<A.length&&A[j]!==t;j++)r+=A[j];return[e,r,j]}function QHj(A,j){return A[j+1]==="!"&&A[j+2]==="-"&&A[j+3]==="-"}function ZHj(A,j){return A[j+1]==="!"&&A[j+2]==="E"&&A[j+3]==="N"&&A[j+4]==="T"&&A[j+5]==="I"&&A[j+6]==="T"&&A[j+7]==="Y"}function ATj(A,j){return A[j+1]==="!"&&A[j+2]==="E"&&A[j+3]==="L"&&A[j+4]==="E"&&A[j+5]==="M"&&A[j+6]==="E"&&A[j+7]==="N"&&A[j+8]==="T"}function jTj(A,j){return A[j+1]==="!"&&A[j+2]==="A"&&A[j+3]==="T"&&A[j+4]==="T"&&A[j+5]==="L"&&A[j+6]==="I"&&A[j+7]==="S"&&A[j+8]==="T"}function eTj(A,j){return A[j+1]==="!"&&A[j+2]==="N"&&A[j+3]==="O"&&A[j+4]==="T"&&A[j+5]==="A"&&A[j+6]==="T"&&A[j+7]==="I"&&A[j+8]==="O"&&A[j+9]==="N"}function tTj(A){if(VHj.isName(A))return A;throw new Error(`Invalid entity name ${A}`)}c1A.exports=WHj});var u1A=OA((Stt,k1A)=>{var rTj=/^[-+]?0x[a-fA-F0-9]+$/,aTj=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var nTj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function oTj(A,j={}){if(j=Object.assign({},nTj,j),!A||typeof A!="string")return A;let e=A.trim();if(j.skipLike!==void 0&&j.skipLike.test(e))return A;if(j.hex&&rTj.test(e))return Number.parseInt(e,16);{let t=aTj.exec(e);if(t){let r=t[1],a=t[2],n=iTj(t[3]),o=t[4]||t[6];if(!j.leadingZeros&&a.length>0&&r&&e[2]!==".")return A;if(!j.leadingZeros&&a.length>0&&!r&&e[1]!==".")return A;{let i=Number(e),s=""+i;return s.search(/[eE]/)!==-1||o?j.eNotation?i:A:e.indexOf(".")!==-1?s==="0"&&n===""||s===n||r&&s==="-"+n?i:A:a?n===s||r+n===s?i:A:e===s||e===r+s?i:A}}else return A}}function iTj(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}k1A.exports=oTj});var teA=OA((Mtt,p1A)=>{function sTj(A){return typeof A=="function"?A:Array.isArray(A)?j=>{for(let e of A)if(typeof e=="string"&&j===e||e instanceof RegExp&&e.test(j))return!0}:()=>!1}p1A.exports=sTj});var B1A=OA((_tt,E1A)=>{"use strict";var m1A=uK(),uI=l1A(),lTj=d1A(),cTj=u1A(),dTj=teA(),reA=class{constructor(j){this.options=j,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=kTj,this.parseXml=BTj,this.parseTextData=uTj,this.resolveNameSpace=pTj,this.buildAttributesMap=ETj,this.isItStopNode=vTj,this.replaceEntitiesValue=hTj,this.readStopNodeData=fTj,this.saveTextToParentTag=qTj,this.addChild=gTj,this.ignoreAttributesFn=dTj(this.options.ignoreAttributes)}};function kTj(A){let j=Object.keys(A);for(let e=0;e<j.length;e++){let t=j[e];this.lastEntities[t]={regex:new RegExp("&"+t+";","g"),val:A[t]}}}function uTj(A,j,e,t,r,a,n){if(A!==void 0&&(this.options.trimValues&&!t&&(A=A.trim()),A.length>0)){n||(A=this.replaceEntitiesValue(A));let o=this.options.tagValueProcessor(j,A,e,r,a);return o==null?A:typeof o!=typeof A||o!==A?o:this.options.trimValues?neA(A,this.options.parseTagValue,this.options.numberParseOptions):A.trim()===A?neA(A,this.options.parseTagValue,this.options.numberParseOptions):A}}function pTj(A){if(this.options.removeNSPrefix){let j=A.split(":"),e=A.charAt(0)==="/"?"/":"";if(j[0]==="xmlns")return"";j.length===2&&(A=e+j[1])}return A}var mTj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ETj(A,j,e){if(this.options.ignoreAttributes!==!0&&typeof A=="string"){let t=m1A.getAllMatches(A,mTj),r=t.length,a={};for(let n=0;n<r;n++){let o=this.resolveNameSpace(t[n][1]);if(this.ignoreAttributesFn(o,j))continue;let i=t[n][4],s=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(s=this.options.transformAttributeName(s)),s==="__proto__"&&(s="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let l=this.options.attributeValueProcessor(o,i,j);l==null?a[s]=i:typeof l!=typeof i||l!==i?a[s]=l:a[s]=neA(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[s]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let n={};return n[this.options.attributesGroupName]=a,n}return a}}var BTj=function(A){A=A.replace(/\r\n?/g,`
`);let j=new uI("!xml"),e=j,t="",r="";for(let a=0;a<A.length;a++)if(A[a]==="<")if(A[a+1]==="/"){let o=Gq(A,">",a,"Closing Tag is not closed."),i=A.substring(a+2,o).trim();if(this.options.removeNSPrefix){let d=i.indexOf(":");d!==-1&&(i=i.substr(d+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),e&&(t=this.saveTextToParentTag(t,e,r));let s=r.substring(r.lastIndexOf(".")+1);if(i&&this.options.unpairedTags.indexOf(i)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let l=0;s&&this.options.unpairedTags.indexOf(s)!==-1?(l=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=r.lastIndexOf("."),r=r.substring(0,l),e=this.tagsNodeStack.pop(),t="",a=o}else if(A[a+1]==="?"){let o=aeA(A,a,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(t=this.saveTextToParentTag(t,e,r),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){let i=new uI(o.tagName);i.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(i[":@"]=this.buildAttributesMap(o.tagExp,r,o.tagName)),this.addChild(e,i,r)}a=o.closeIndex+1}else if(A.substr(a+1,3)==="!--"){let o=Gq(A,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let i=A.substring(a+4,o-2);t=this.saveTextToParentTag(t,e,r),e.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}a=o}else if(A.substr(a+1,2)==="!D"){let o=lTj(A,a);this.docTypeEntities=o.entities,a=o.i}else if(A.substr(a+1,2)==="!["){let o=Gq(A,"]]>",a,"CDATA is not closed.")-2,i=A.substring(a+9,o);t=this.saveTextToParentTag(t,e,r);let s=this.parseTextData(i,e.tagname,r,!0,!1,!0,!0);s==null&&(s=""),this.options.cdataPropName?e.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):e.add(this.options.textNodeName,s),a=o+2}else{let o=aeA(A,a,this.options.removeNSPrefix),i=o.tagName,s=o.rawTagName,l=o.tagExp,d=o.attrExpPresent,k=o.closeIndex;this.options.transformTagName&&(i=this.options.transformTagName(i)),e&&t&&e.tagname!=="!xml"&&(t=this.saveTextToParentTag(t,e,r,!1));let u=e;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(e=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),i!==j.tagname&&(r+=r?"."+i:i),this.isItStopNode(this.options.stopNodes,r,i)){let m="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)i[i.length-1]==="/"?(i=i.substr(0,i.length-1),r=r.substr(0,r.length-1),l=i):l=l.substr(0,l.length-1),a=o.closeIndex;else if(this.options.unpairedTags.indexOf(i)!==-1)a=o.closeIndex;else{let S=this.readStopNodeData(A,s,k+1);if(!S)throw new Error(`Unexpected end of ${s}`);a=S.i,m=S.tagContent}let I=new uI(i);i!==l&&d&&(I[":@"]=this.buildAttributesMap(l,r,i)),m&&(m=this.parseTextData(m,i,r,!0,d,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),I.add(this.options.textNodeName,m),this.addChild(e,I,r)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){i[i.length-1]==="/"?(i=i.substr(0,i.length-1),r=r.substr(0,r.length-1),l=i):l=l.substr(0,l.length-1),this.options.transformTagName&&(i=this.options.transformTagName(i));let m=new uI(i);i!==l&&d&&(m[":@"]=this.buildAttributesMap(l,r,i)),this.addChild(e,m,r),r=r.substr(0,r.lastIndexOf("."))}else{let m=new uI(i);this.tagsNodeStack.push(e),i!==l&&d&&(m[":@"]=this.buildAttributesMap(l,r,i)),this.addChild(e,m,r),e=m}t="",a=k}}else t+=A[a];return j.child};function gTj(A,j,e){let t=this.options.updateTag(j.tagname,e,j[":@"]);t===!1||(typeof t=="string"&&(j.tagname=t),A.addChild(j))}var hTj=function(A){if(this.options.processEntities){for(let j in this.docTypeEntities){let e=this.docTypeEntities[j];A=A.replace(e.regx,e.val)}for(let j in this.lastEntities){let e=this.lastEntities[j];A=A.replace(e.regex,e.val)}if(this.options.htmlEntities)for(let j in this.htmlEntities){let e=this.htmlEntities[j];A=A.replace(e.regex,e.val)}A=A.replace(this.ampEntity.regex,this.ampEntity.val)}return A};function qTj(A,j,e,t){return A&&(t===void 0&&(t=Object.keys(j.child).length===0),A=this.parseTextData(A,j.tagname,e,!1,j[":@"]?Object.keys(j[":@"]).length!==0:!1,t),A!==void 0&&A!==""&&j.add(this.options.textNodeName,A),A=""),A}function vTj(A,j,e){let t="*."+e;for(let r in A){let a=A[r];if(t===a||j===a)return!0}return!1}function xTj(A,j,e=">"){let t,r="";for(let a=j;a<A.length;a++){let n=A[a];if(t)n===t&&(t="");else if(n==='"'||n==="'")t=n;else if(n===e[0])if(e[1]){if(A[a+1]===e[1])return{data:r,index:a}}else return{data:r,index:a};else n==="	"&&(n=" ");r+=n}}function Gq(A,j,e,t){let r=A.indexOf(j,e);if(r===-1)throw new Error(t);return r+j.length-1}function aeA(A,j,e,t=">"){let r=xTj(A,j+1,t);if(!r)return;let a=r.data,n=r.index,o=a.search(/\s/),i=a,s=!0;o!==-1&&(i=a.substring(0,o),a=a.substring(o+1).trimStart());let l=i;if(e){let d=i.indexOf(":");d!==-1&&(i=i.substr(d+1),s=i!==r.data.substr(d+1))}return{tagName:i,tagExp:a,closeIndex:n,attrExpPresent:s,rawTagName:l}}function fTj(A,j,e){let t=e,r=1;for(;e<A.length;e++)if(A[e]==="<")if(A[e+1]==="/"){let a=Gq(A,">",e,`${j} is not closed`);if(A.substring(e+2,a).trim()===j&&(r--,r===0))return{tagContent:A.substring(t,e),i:a};e=a}else if(A[e+1]==="?")e=Gq(A,"?>",e+1,"StopNode is not closed.");else if(A.substr(e+1,3)==="!--")e=Gq(A,"-->",e+3,"StopNode is not closed.");else if(A.substr(e+1,2)==="![")e=Gq(A,"]]>",e,"StopNode is not closed.")-2;else{let a=aeA(A,e,">");a&&((a&&a.tagName)===j&&a.tagExp[a.tagExp.length-1]!=="/"&&r++,e=a.closeIndex)}}function neA(A,j,e){if(j&&typeof A=="string"){let t=A.trim();return t==="true"?!0:t==="false"?!1:cTj(A,e)}else return m1A.isExist(A)?A:""}E1A.exports=reA});var q1A=OA(h1A=>{"use strict";function GTj(A,j){return g1A(A,j)}function g1A(A,j,e){let t,r={};for(let a=0;a<A.length;a++){let n=A[a],o=FTj(n),i="";if(e===void 0?i=o:i=e+"."+o,o===j.textNodeName)t===void 0?t=n[o]:t+=""+n[o];else{if(o===void 0)continue;if(n[o]){let s=g1A(n[o],j,i),l=yTj(s,j);n[":@"]?bTj(s,n[":@"],i,j):Object.keys(s).length===1&&s[j.textNodeName]!==void 0&&!j.alwaysCreateTextNode?s=s[j.textNodeName]:Object.keys(s).length===0&&(j.alwaysCreateTextNode?s[j.textNodeName]="":s=""),r[o]!==void 0&&r.hasOwnProperty(o)?(Array.isArray(r[o])||(r[o]=[r[o]]),r[o].push(s)):j.isArray(o,i,l)?r[o]=[s]:r[o]=s}}}return typeof t=="string"?t.length>0&&(r[j.textNodeName]=t):t!==void 0&&(r[j.textNodeName]=t),r}function FTj(A){let j=Object.keys(A);for(let e=0;e<j.length;e++){let t=j[e];if(t!==":@")return t}}function bTj(A,j,e,t){if(j){let r=Object.keys(j),a=r.length;for(let n=0;n<a;n++){let o=r[n];t.isArray(o,e+"."+o,!0,!0)?A[o]=[j[o]]:A[o]=j[o]}}}function yTj(A,j){let{textNodeName:e}=j,t=Object.keys(A).length;return!!(t===0||t===1&&(A[e]||typeof A[e]=="boolean"||A[e]===0))}h1A.prettify=GTj});var x1A=OA((Ntt,v1A)=>{var{buildOptions:$Tj}=i1A(),wTj=B1A(),{prettify:ITj}=q1A(),DTj=AeA(),oeA=class{constructor(j){this.externalEntities={},this.options=$Tj(j)}parse(j,e){if(typeof j!="string")if(j.toString)j=j.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});let a=DTj.validate(j,e);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}let t=new wTj(this.options);t.addExternalEntities(this.externalEntities);let r=t.parseXml(j);return this.options.preserveOrder||r===void 0?r:ITj(r,this.options)}addEntity(j,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(j.indexOf("&")!==-1||j.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[j]=e}};v1A.exports=oeA});var y1A=OA((ztt,b1A)=>{var OTj=`
`;function PTj(A,j){let e="";return j.format&&j.indentBy.length>0&&(e=OTj),G1A(A,j,"",e)}function G1A(A,j,e,t){let r="",a=!1;for(let n=0;n<A.length;n++){let o=A[n],i=CTj(o);if(i===void 0)continue;let s="";if(e.length===0?s=i:s=`${e}.${i}`,i===j.textNodeName){let m=o[i];HTj(s,j)||(m=j.tagValueProcessor(i,m),m=F1A(m,j)),a&&(r+=t),r+=m,a=!1;continue}else if(i===j.cdataPropName){a&&(r+=t),r+=`<![CDATA[${o[i][0][j.textNodeName]}]]>`,a=!1;continue}else if(i===j.commentPropName){r+=t+`<!--${o[i][0][j.textNodeName]}-->`,a=!0;continue}else if(i[0]==="?"){let m=f1A(o[":@"],j),I=i==="?xml"?"":t,S=o[i][0][j.textNodeName];S=S.length!==0?" "+S:"",r+=I+`<${i}${S}${m}?>`,a=!0;continue}let l=t;l!==""&&(l+=j.indentBy);let d=f1A(o[":@"],j),k=t+`<${i}${d}`,u=G1A(o[i],j,s,l);j.unpairedTags.indexOf(i)!==-1?j.suppressUnpairedNode?r+=k+">":r+=k+"/>":(!u||u.length===0)&&j.suppressEmptyNode?r+=k+"/>":u&&u.endsWith(">")?r+=k+`>${u}${t}</${i}>`:(r+=k+">",u&&t!==""&&(u.includes("/>")||u.includes("</"))?r+=t+j.indentBy+u+t:r+=u,r+=`</${i}>`),a=!0}return r}function CTj(A){let j=Object.keys(A);for(let e=0;e<j.length;e++){let t=j[e];if(A.hasOwnProperty(t)&&t!==":@")return t}}function f1A(A,j){let e="";if(A&&!j.ignoreAttributes)for(let t in A){if(!A.hasOwnProperty(t))continue;let r=j.attributeValueProcessor(t,A[t]);r=F1A(r,j),r===!0&&j.suppressBooleanAttributes?e+=` ${t.substr(j.attributeNamePrefix.length)}`:e+=` ${t.substr(j.attributeNamePrefix.length)}="${r}"`}return e}function HTj(A,j){A=A.substr(0,A.length-j.textNodeName.length-1);let e=A.substr(A.lastIndexOf(".")+1);for(let t in j.stopNodes)if(j.stopNodes[t]===A||j.stopNodes[t]==="*."+e)return!0;return!1}function F1A(A,j){if(A&&A.length>0&&j.processEntities)for(let e=0;e<j.entities.length;e++){let t=j.entities[e];A=A.replace(t.regex,t.val)}return A}b1A.exports=PTj});var w1A=OA((Rtt,$1A)=>{"use strict";var TTj=y1A(),KTj=teA(),STj={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(A,j){return j},attributeValueProcessor:function(A,j){return j},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function XB(A){this.options=Object.assign({},STj,A),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=KTj(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=LTj),this.processTextOrObjNode=MTj,this.options.format?(this.indentate=_Tj,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}XB.prototype.build=function(A){return this.options.preserveOrder?TTj(A,this.options):(Array.isArray(A)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(A={[this.options.arrayNodeName]:A}),this.j2x(A,0,[]).val)};XB.prototype.j2x=function(A,j,e){let t="",r="",a=e.join(".");for(let n in A)if(Object.prototype.hasOwnProperty.call(A,n))if(typeof A[n]>"u")this.isAttribute(n)&&(r+="");else if(A[n]===null)this.isAttribute(n)?r+="":n[0]==="?"?r+=this.indentate(j)+"<"+n+"?"+this.tagEndChar:r+=this.indentate(j)+"<"+n+"/"+this.tagEndChar;else if(A[n]instanceof Date)r+=this.buildTextValNode(A[n],n,"",j);else if(typeof A[n]!="object"){let o=this.isAttribute(n);if(o&&!this.ignoreAttributesFn(o,a))t+=this.buildAttrPairStr(o,""+A[n]);else if(!o)if(n===this.options.textNodeName){let i=this.options.tagValueProcessor(n,""+A[n]);r+=this.replaceEntitiesValue(i)}else r+=this.buildTextValNode(A[n],n,"",j)}else if(Array.isArray(A[n])){let o=A[n].length,i="",s="";for(let l=0;l<o;l++){let d=A[n][l];if(!(typeof d>"u"))if(d===null)n[0]==="?"?r+=this.indentate(j)+"<"+n+"?"+this.tagEndChar:r+=this.indentate(j)+"<"+n+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){let k=this.j2x(d,j+1,e.concat(n));i+=k.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(s+=k.attrStr)}else i+=this.processTextOrObjNode(d,n,j,e);else if(this.options.oneListGroup){let k=this.options.tagValueProcessor(n,d);k=this.replaceEntitiesValue(k),i+=k}else i+=this.buildTextValNode(d,n,"",j)}this.options.oneListGroup&&(i=this.buildObjectNode(i,n,s,j)),r+=i}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){let o=Object.keys(A[n]),i=o.length;for(let s=0;s<i;s++)t+=this.buildAttrPairStr(o[s],""+A[n][o[s]])}else r+=this.processTextOrObjNode(A[n],n,j,e);return{attrStr:t,val:r}};XB.prototype.buildAttrPairStr=function(A,j){return j=this.options.attributeValueProcessor(A,""+j),j=this.replaceEntitiesValue(j),this.options.suppressBooleanAttributes&&j==="true"?" "+A:" "+A+'="'+j+'"'};function MTj(A,j,e,t){let r=this.j2x(A,e+1,t.concat(j));return A[this.options.textNodeName]!==void 0&&Object.keys(A).length===1?this.buildTextValNode(A[this.options.textNodeName],j,r.attrStr,e):this.buildObjectNode(r.val,j,r.attrStr,e)}XB.prototype.buildObjectNode=function(A,j,e,t){if(A==="")return j[0]==="?"?this.indentate(t)+"<"+j+e+"?"+this.tagEndChar:this.indentate(t)+"<"+j+e+this.closeTag(j)+this.tagEndChar;{let r="</"+j+this.tagEndChar,a="";return j[0]==="?"&&(a="?",r=""),(e||e==="")&&A.indexOf("<")===-1?this.indentate(t)+"<"+j+e+a+">"+A+r:this.options.commentPropName!==!1&&j===this.options.commentPropName&&a.length===0?this.indentate(t)+`<!--${A}-->`+this.newLine:this.indentate(t)+"<"+j+e+a+this.tagEndChar+A+this.indentate(t)+r}};XB.prototype.closeTag=function(A){let j="";return this.options.unpairedTags.indexOf(A)!==-1?this.options.suppressUnpairedNode||(j="/"):this.options.suppressEmptyNode?j="/":j=`></${A}`,j};XB.prototype.buildTextValNode=function(A,j,e,t){if(this.options.cdataPropName!==!1&&j===this.options.cdataPropName)return this.indentate(t)+`<![CDATA[${A}]]>`+this.newLine;if(this.options.commentPropName!==!1&&j===this.options.commentPropName)return this.indentate(t)+`<!--${A}-->`+this.newLine;if(j[0]==="?")return this.indentate(t)+"<"+j+e+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(j,A);return r=this.replaceEntitiesValue(r),r===""?this.indentate(t)+"<"+j+e+this.closeTag(j)+this.tagEndChar:this.indentate(t)+"<"+j+e+">"+r+"</"+j+this.tagEndChar}};XB.prototype.replaceEntitiesValue=function(A){if(A&&A.length>0&&this.options.processEntities)for(let j=0;j<this.options.entities.length;j++){let e=this.options.entities[j];A=A.replace(e.regex,e.val)}return A};function _Tj(A){return this.options.indentBy.repeat(A)}function LTj(A){return A.startsWith(this.options.attributeNamePrefix)&&A!==this.options.textNodeName?A.substr(this.attrPrefixLen):!1}$1A.exports=XB});var ieA=OA((Jtt,I1A)=>{"use strict";var NTj=AeA(),zTj=x1A(),RTj=w1A();I1A.exports={XMLParser:zTj,XMLValidator:NTj,XMLBuilder:RTj}});var MOA=OA((vI,vK)=>{(function(A,j){"use strict";var e="1.0.37",t="",r="?",a="function",n="undefined",o="object",i="string",s="major",l="model",d="name",k="type",u="vendor",m="version",I="architecture",S="console",f="mobile",v="tablet",P="smarttv",D="wearable",C="embedded",b=500,h="Amazon",O="Apple",V="ASUS",Y="BlackBerry",rA="Browser",yA="Chrome",VA="Edge",dj="Firefox",bA="Google",Mj="Huawei",mj="LG",ae="Microsoft",_j="Motorola",cj="Opera",Qj="Samsung",Cj="Sharp",kj="Sony",Bj="Xiaomi",De="Zebra",wt="Facebook",wj="Chromium OS",Bt="Mac OS",Ye=function(je,oA){var gA={};for(var KA in je)oA[KA]&&oA[KA].length%2===0?gA[KA]=oA[KA].concat(je[KA]):gA[KA]=je[KA];return gA},Ie=function(je){for(var oA={},gA=0;gA<je.length;gA++)oA[je[gA].toUpperCase()]=je[gA];return oA},Ee=function(je,oA){return typeof je===i?er(oA).indexOf(er(je))!==-1:!1},er=function(je){return je.toLowerCase()},Vt=function(je){return typeof je===i?je.replace(/[^\d\.]/g,t).split(".")[0]:j},yt=function(je,oA){if(typeof je===i)return je=je.replace(/^\s\s*/,t),typeof oA===n?je:je.substring(0,b)},Sr=function(je,oA){for(var gA=0,KA,xj,gj,ve,uj,lA;gA<oA.length&&!uj;){var eA=oA[gA],FA=oA[gA+1];for(KA=xj=0;KA<eA.length&&!uj&&eA[KA];)if(uj=eA[KA++].exec(je),uj)for(gj=0;gj<FA.length;gj++)lA=uj[++xj],ve=FA[gj],typeof ve===o&&ve.length>0?ve.length===2?typeof ve[1]==a?this[ve[0]]=ve[1].call(this,lA):this[ve[0]]=ve[1]:ve.length===3?typeof ve[1]===a&&!(ve[1].exec&&ve[1].test)?this[ve[0]]=lA?ve[1].call(this,lA,ve[2]):j:this[ve[0]]=lA?lA.replace(ve[1],ve[2]):j:ve.length===4&&(this[ve[0]]=lA?ve[3].call(this,lA.replace(ve[1],ve[2])):j):this[ve]=lA||j;gA+=2}},Dr=function(je,oA){for(var gA in oA)if(typeof oA[gA]===o&&oA[gA].length>0){for(var KA=0;KA<oA[gA].length;KA++)if(Ee(oA[gA][KA],je))return gA===r?j:gA}else if(Ee(oA[gA],je))return gA===r?j:gA;return je},yr={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ra={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},at={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,m],[/opios[\/ ]+([\w\.]+)/i],[m,[d,cj+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[d,cj]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[d,"UC"+rA]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[d,"Smart Lenovo "+rA]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+rA],m],[/\bfocus\/([\w\.]+)/i],[m,[d,dj+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[d,cj+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[d,cj+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[d,"MIUI "+rA]],[/fxios\/([-\w\.]+)/i],[m,[d,dj]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+rA]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+rA],m],[/samsungbrowser\/([\w\.]+)/i],[m,[d,Qj+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,wt],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[d,yA+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,yA+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[d,"Android "+rA]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[m,Dr,yr]],[/(webkit|khtml)\/([\w\.]+)/i],[d,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[d,dj+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,m],[/(cobalt)\/([\w\.]+)/i],[d,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[I,"amd64"]],[/(ia32(?=;))/i],[[I,er]],[/((?:i[346]|x)86)[;\)]/i],[[I,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[I,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[I,"armhf"]],[/windows (ce|mobile); ppc;/i],[[I,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[I,/ower/,t,er]],[/(sun4\w)[;\)]/i],[[I,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[I,er]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[u,Qj],[k,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[u,Qj],[k,f]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[u,O],[k,f]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[u,O],[k,v]],[/(macintosh);/i],[l,[u,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[u,Cj],[k,f]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[u,Mj],[k,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[u,Mj],[k,f]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[u,Bj],[k,f]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[u,Bj],[k,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[u,"OPPO"],[k,f]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[u,"Vivo"],[k,f]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[u,"Realme"],[k,f]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[u,_j],[k,f]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[u,_j],[k,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[u,mj],[k,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[u,mj],[k,f]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[u,"Lenovo"],[k,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[u,"Nokia"],[k,f]],[/(pixel c)\b/i],[l,[u,bA],[k,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[u,bA],[k,f]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[u,kj],[k,f]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[u,kj],[k,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[u,"OnePlus"],[k,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[u,h],[k,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[u,h],[k,f]],[/(playbook);[-\w\),; ]+(rim)/i],[l,u,[k,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[u,Y],[k,f]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[u,V],[k,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[u,V],[k,f]],[/(nexus 9)/i],[l,[u,"HTC"],[k,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[l,/_/g," "],[k,f]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[u,"Acer"],[k,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[u,"Meizu"],[k,f]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[u,"Ulefone"],[k,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,l,[k,f]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,l,[k,v]],[/(surface duo)/i],[l,[u,ae],[k,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[u,"Fairphone"],[k,f]],[/(u304aa)/i],[l,[u,"AT&T"],[k,f]],[/\bsie-(\w*)/i],[l,[u,"Siemens"],[k,f]],[/\b(rct\w+) b/i],[l,[u,"RCA"],[k,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[u,"Dell"],[k,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[u,"Verizon"],[k,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[u,"Barnes & Noble"],[k,v]],[/\b(tm\d{3}\w+) b/i],[l,[u,"NuVision"],[k,v]],[/\b(k88) b/i],[l,[u,"ZTE"],[k,v]],[/\b(nx\d{3}j) b/i],[l,[u,"ZTE"],[k,f]],[/\b(gen\d{3}) b.+49h/i],[l,[u,"Swiss"],[k,f]],[/\b(zur\d{3}) b/i],[l,[u,"Swiss"],[k,v]],[/\b((zeki)?tb.*\b) b/i],[l,[u,"Zeki"],[k,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],l,[k,v]],[/\b(ns-?\w{0,9}) b/i],[l,[u,"Insignia"],[k,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[u,"NextBook"],[k,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],l,[k,f]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],l,[k,f]],[/\b(ph-1) /i],[l,[u,"Essential"],[k,f]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[u,"Envizen"],[k,v]],[/\b(trio[-\w\. ]+) b/i],[l,[u,"MachSpeed"],[k,v]],[/\btu_(1491) b/i],[l,[u,"Rotor"],[k,v]],[/(shield[\w ]+) b/i],[l,[u,"Nvidia"],[k,v]],[/(sprint) (\w+)/i],[u,l,[k,f]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[u,ae],[k,f]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[u,De],[k,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[u,De],[k,f]],[/smart-tv.+(samsung)/i],[u,[k,P]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[u,Qj],[k,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,mj],[k,P]],[/(apple) ?tv/i],[u,[l,O+" TV"],[k,P]],[/crkey/i],[[l,yA+"cast"],[u,bA],[k,P]],[/droid.+aft(\w+)( bui|\))/i],[l,[u,h],[k,P]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[u,Cj],[k,P]],[/(bravia[\w ]+)( bui|\))/i],[l,[u,kj],[k,P]],[/(mitv-\w{5}) bui/i],[l,[u,Bj],[k,P]],[/Hbbtv.*(technisat) (.*);/i],[u,l,[k,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,yt],[l,yt],[k,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[k,P]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,l,[k,S]],[/droid.+; (shield) bui/i],[l,[u,"Nvidia"],[k,S]],[/(playstation [345portablevi]+)/i],[l,[u,kj],[k,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[u,ae],[k,S]],[/((pebble))app/i],[u,l,[k,D]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[u,O],[k,D]],[/droid.+; (glass) \d/i],[l,[u,bA],[k,D]],[/droid.+; (wt63?0{2,3})\)/i],[l,[u,De],[k,D]],[/(quest( 2| pro)?)/i],[l,[u,wt],[k,D]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[k,C]],[/(aeobc)\b/i],[l,[u,h],[k,C]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[k,f]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[k,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[k,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[k,f]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[d,VA+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[m,Dr,ra]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Dr,ra],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,Bt],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,m],[/\(bb(10);/i],[m,[d,Y]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[d,dj+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[d,yA+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,wj],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,m],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,m]]},st=function(je,oA){if(typeof je===o&&(oA=je,je=j),!(this instanceof st))return new st(je,oA).getResult();var gA=typeof A!==n&&A.navigator?A.navigator:j,KA=je||(gA&&gA.userAgent?gA.userAgent:t),xj=gA&&gA.userAgentData?gA.userAgentData:j,gj=oA?Ye(at,oA):at,ve=gA&&gA.userAgent==KA;return this.getBrowser=function(){var uj={};return uj[d]=j,uj[m]=j,Sr.call(uj,KA,gj.browser),uj[s]=Vt(uj[m]),ve&&gA&&gA.brave&&typeof gA.brave.isBrave==a&&(uj[d]="Brave"),uj},this.getCPU=function(){var uj={};return uj[I]=j,Sr.call(uj,KA,gj.cpu),uj},this.getDevice=function(){var uj={};return uj[u]=j,uj[l]=j,uj[k]=j,Sr.call(uj,KA,gj.device),ve&&!uj[k]&&xj&&xj.mobile&&(uj[k]=f),ve&&uj[l]=="Macintosh"&&gA&&typeof gA.standalone!==n&&gA.maxTouchPoints&&gA.maxTouchPoints>2&&(uj[l]="iPad",uj[k]=v),uj},this.getEngine=function(){var uj={};return uj[d]=j,uj[m]=j,Sr.call(uj,KA,gj.engine),uj},this.getOS=function(){var uj={};return uj[d]=j,uj[m]=j,Sr.call(uj,KA,gj.os),ve&&!uj[d]&&xj&&xj.platform!="Unknown"&&(uj[d]=xj.platform.replace(/chrome os/i,wj).replace(/macos/i,Bt)),uj},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return KA},this.setUA=function(uj){return KA=typeof uj===i&&uj.length>b?yt(uj,b):uj,this},this.setUA(KA),this};st.VERSION=e,st.BROWSER=Ie([d,m,s]),st.CPU=Ie([I]),st.DEVICE=Ie([l,u,k,S,f,P,v,D,C]),st.ENGINE=st.OS=Ie([d,m]),typeof vI!==n?(typeof vK!==n&&vK.exports&&(vI=vK.exports=st),vI.UAParser=st):typeof define===a&&define.amd?define(function(){return st}):typeof A!==n&&(A.UAParser=st);var kr=typeof A!==n&&(A.jQuery||A.Zepto);if(kr&&!kr.ua){var Va=new st;kr.ua=Va.getResult(),kr.ua.get=function(){return Va.getUA()},kr.ua.set=function(je){Va.setUA(je);var oA=Va.getResult();for(var gA in oA)kr.ua[gA]=oA[gA]}}})(typeof window=="object"?window:vI)});var mPA=OA((Fdt,WK)=>{var W4A,Y4A,Q4A,Z4A,APA,jPA,ePA,tPA,rPA,VK,BtA,aPA,nPA,uF,oPA,iPA,sPA,lPA,cPA,dPA,kPA,uPA,pPA;(function(A){var j=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(t){A(e(j,e(t)))}):typeof WK=="object"&&typeof WK.exports=="object"?A(e(j,e(WK.exports))):A(e(j));function e(t,r){return t!==j&&(typeof Object.create=="function"?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(a,n){return t[a]=r?r(a,n):n}}})(function(A){var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};W4A=function(e,t){j(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},Y4A=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Q4A=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},Z4A=function(e,t,r,a){var n=arguments.length,o=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,r):a,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},APA=function(e,t){return function(r,a){t(r,a,e)}},jPA=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},ePA=function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(k){try{d(a.next(k))}catch(u){i(u)}}function l(k){try{d(a.throw(k))}catch(u){i(u)}}function d(k){k.done?o(k.value):n(k.value).then(s,l)}d((a=a.apply(e,t||[])).next())})},tPA=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(d){return function(k){return l([d,k])}}function l(d){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=d[0]&2?n.return:d[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,d[1])).done)return o;switch(n=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(k){d=[6,k],n=0}finally{a=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},pPA=function(e,t,r,a){a===void 0&&(a=r),e[a]=t[r]},rPA=function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])},VK=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BtA=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),n,o=[],i;try{for(;(t===void 0||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},aPA=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(BtA(arguments[t]));return e},nPA=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,n++)a[n]=o[i];return a},uF=function(e){return this instanceof uF?(this.v=e,this):new uF(e)},oPA=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(e,t||[]),n,o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(m){a[m]&&(n[m]=function(I){return new Promise(function(S,f){o.push([m,I,S,f])>1||s(m,I)})})}function s(m,I){try{l(a[m](I))}catch(S){u(o[0][3],S)}}function l(m){m.value instanceof uF?Promise.resolve(m.value.v).then(d,k):u(o[0][2],m)}function d(m){s("next",m)}function k(m){s("throw",m)}function u(m,I){m(I),o.shift(),o.length&&s(o[0][0],o[0][1])}},iPA=function(e){var t,r;return t={},a("next"),a("throw",function(n){throw n}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(n,o){t[n]=e[n]?function(i){return(r=!r)?{value:uF(e[n](i)),done:n==="return"}:o?o(i):i}:o}},sPA=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof VK=="function"?VK(e):e[Symbol.iterator](),r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r);function a(o){r[o]=e[o]&&function(i){return new Promise(function(s,l){i=e[o](i),n(s,l,i.done,i.value)})}}function n(o,i,s,l){Promise.resolve(l).then(function(d){o({value:d,done:s})},i)}},lPA=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},cPA=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},dPA=function(e){return e&&e.__esModule?e:{default:e}},kPA=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},uPA=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},A("__extends",W4A),A("__assign",Y4A),A("__rest",Q4A),A("__decorate",Z4A),A("__param",APA),A("__metadata",jPA),A("__awaiter",ePA),A("__generator",tPA),A("__exportStar",rPA),A("__createBinding",pPA),A("__values",VK),A("__read",BtA),A("__spread",aPA),A("__spreadArrays",nPA),A("__await",uF),A("__asyncGenerator",oPA),A("__asyncDelegator",iPA),A("__asyncValues",sPA),A("__makeTemplateObject",lPA),A("__importStar",cPA),A("__importDefault",dPA),A("__classPrivateFieldGet",kPA),A("__classPrivateFieldSet",uPA)})});var NPA=OA(n5=>{"use strict";Object.defineProperty(n5,"__esModule",{value:!0});n5.AccountType=void 0;var LPA;(function(A){A.Individual="I",A.Family="F",A.Team="B",A.Unsupported="Unsupported"})(LPA||(n5.AccountType=LPA={}))});var RPA=OA(o5=>{"use strict";Object.defineProperty(o5,"__esModule",{value:!0});o5.BillingStatus=void 0;var zPA;(function(A){A.Active="A",A.Pending="P",A.CancelAtEnd="C",A.Frozen="F",A.Lapsed="L",A.Trialing="T",A.Unsupported="Unsupported"})(zPA||(o5.BillingStatus=zPA={}))});var ba=OA(fn=>{"use strict";var JPA=fn&&fn.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),V9j=fn&&fn.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),W9j=fn&&fn.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&JPA(j,A,e);return V9j(j,A),j},UPA=fn&&fn.__exportStar||function(A,j){for(var e in A)e!=="default"&&!Object.prototype.hasOwnProperty.call(j,e)&&JPA(j,A,e)},XPA;Object.defineProperty(fn,"__esModule",{value:!0});fn.TelemetryStringC=fn.TS=fn.TelemetryString=fn.exactPartial=fn.exactType=void 0;var Rq=W9j(aA()),Y9j=(A,j)=>Rq.exact(Rq.type(A),j);fn.exactType=Y9j;var Q9j=(A,j)=>Rq.exact(Rq.partial(A),j);fn.exactPartial=Q9j;var Z9j=Symbol("string"),eg=class{constructor(j){this[XPA]=0,this.str=j}telemetryString(){return this}};fn.TelemetryString=eg;XPA=Z9j;eg.assertSafeForTelemetry=A=>new eg(A);var i5=eg.assertSafeForTelemetry,A3j=(A,j)=>i5(A.map(e=>e.telemetryString().str).join(j?.telemetryString().str)),j3j=(A,...j)=>A3j(A.flatMap((e,t)=>{let r=j[t];return r!==void 0?[i5(e),r.telemetryString()]:[i5(e)]}),i5(""));fn.TS=j3j;fn.TelemetryStringC=new Rq.Type("TelemetryString",A=>A instanceof eg,(A,j)=>A instanceof eg?Rq.success(A.str):Rq.failure(A,j,"cannot decode unknown value to TelemetryString"),A=>JSON.stringify(A.str));UPA(NPA(),fn);UPA(RPA(),fn)});var WPA=OA(r7=>{"use strict";var e3j=r7&&r7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),t3j=r7&&r7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),r3j=r7&&r7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&e3j(j,A,e);return t3j(j,A),j};Object.defineProperty(r7,"__esModule",{value:!0});r7.AccountContext=void 0;var zo=r3j(aA()),VPA=ba();r7.AccountContext=zo.exact(zo.type({schema:zo.literal("iglu:com.1password.core/account_context/jsonschema/1-0-0"),data:zo.exact(zo.intersection([zo.type({user_uuid:VPA.TelemetryStringC,account_uuid:VPA.TelemetryStringC,account_type:zo.union([zo.literal("I"),zo.literal("F"),zo.literal("B")])}),zo.partial({billing_status:zo.union([zo.literal("A"),zo.literal("P"),zo.literal("C"),zo.literal("F"),zo.literal("L"),zo.literal("T")])})]))}))});var YPA=OA(a7=>{"use strict";var a3j=a7&&a7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),n3j=a7&&a7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),o3j=a7&&a7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&a3j(j,A,e);return n3j(j,A),j};Object.defineProperty(a7,"__esModule",{value:!0});a7.AppContext=void 0;var Jq=o3j(aA()),s5=ba();a7.AppContext=Jq.exact(Jq.type({schema:Jq.literal("iglu:com.1password.core/app_context/jsonschema/2-1-0"),data:Jq.exact(Jq.intersection([Jq.type({name:s5.TelemetryStringC,version:s5.TelemetryStringC}),Jq.partial({app_used_locale:s5.TelemetryStringC,app_default_locale:s5.TelemetryStringC})]))}))});var QPA=OA(n7=>{"use strict";var i3j=n7&&n7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),s3j=n7&&n7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),l3j=n7&&n7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&i3j(j,A,e);return s3j(j,A),j};Object.defineProperty(n7,"__esModule",{value:!0});n7.DeviceContext=void 0;var Uq=l3j(aA()),l5=ba();n7.DeviceContext=Uq.exact(Uq.type({schema:Uq.literal("iglu:com.1password.core/device_context/jsonschema/1-1-1"),data:Uq.exact(Uq.intersection([Uq.type({device_uuid:l5.TelemetryStringC}),Uq.partial({os_name:l5.TelemetryStringC,os_version:l5.TelemetryStringC,os_locale:l5.TelemetryStringC})]))}))});var ZPA=OA(o7=>{"use strict";var c3j=o7&&o7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),d3j=o7&&o7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),k3j=o7&&o7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&c3j(j,A,e);return d3j(j,A),j};Object.defineProperty(o7,"__esModule",{value:!0});o7.ExperimentationContext=void 0;var hF=k3j(aA()),u3j=ba();o7.ExperimentationContext=hF.exact(hF.type({schema:hF.literal("iglu:com.1password.core/experimentation_context/jsonschema/1-0-0"),data:hF.exact(hF.type({assigned_experiments:hF.array(u3j.TelemetryStringC)}))}))});var ACA=OA(i7=>{"use strict";var p3j=i7&&i7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),m3j=i7&&i7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),E3j=i7&&i7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&p3j(j,A,e);return m3j(j,A),j};Object.defineProperty(i7,"__esModule",{value:!0});i7.FeatureFlagContext=void 0;var qF=E3j(aA()),B3j=ba();i7.FeatureFlagContext=qF.exact(qF.type({schema:qF.literal("iglu:com.1password.core/feature_flag_context/jsonschema/1-0-1"),data:qF.exact(qF.type({assigned_flags:qF.array(B3j.TelemetryStringC)}))}))});var jCA=OA(s7=>{"use strict";var g3j=s7&&s7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),h3j=s7&&s7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),q3j=s7&&s7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&g3j(j,A,e);return h3j(j,A),j};Object.defineProperty(s7,"__esModule",{value:!0});s7.SessionContext=void 0;var NI=q3j(aA()),v3j=ba();s7.SessionContext=NI.exact(NI.type({schema:NI.literal("iglu:com.1password.core/session_context/jsonschema/1-0-0"),data:NI.exact(NI.type({session_uuid:v3j.TelemetryStringC}))}))});var eCA=OA(c5=>{"use strict";Object.defineProperty(c5,"__esModule",{value:!0});c5.AllContexts=void 0;var x3j=WPA(),f3j=YPA(),G3j=QPA(),F3j=ZPA(),b3j=ACA(),y3j=jCA();c5.AllContexts={AccountContext:x3j.AccountContext,AppContext:f3j.AppContext,DeviceContext:G3j.DeviceContext,ExperimentationContext:F3j.ExperimentationContext,FeatureFlagContext:b3j.FeatureFlagContext,SessionContext:y3j.SessionContext}});var tCA=OA(l7=>{"use strict";var $3j=l7&&l7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),w3j=l7&&l7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),I3j=l7&&l7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&$3j(j,A,e);return w3j(j,A),j};Object.defineProperty(l7,"__esModule",{value:!0});l7.AppLock=void 0;var Im=I3j(aA()),D3j=ba();l7.AppLock=Im.exact(Im.type({schema:Im.literal("iglu:com.1password.app/app_lock/jsonschema/1-0-2"),data:Im.exact(Im.intersection([Im.type({lock_reason:D3j.TelemetryStringC,autolock_duration_setting:Im.Int}),Im.partial({idle_duration_seconds:Im.Int})]))}))});var rCA=OA(c7=>{"use strict";var O3j=c7&&c7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),P3j=c7&&c7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),C3j=c7&&c7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&O3j(j,A,e);return P3j(j,A),j};Object.defineProperty(c7,"__esModule",{value:!0});c7.AppUnlock=void 0;var Gn=C3j(aA());c7.AppUnlock=Gn.exact(Gn.type({schema:Gn.literal("iglu:com.1password.app/app_unlock/jsonschema/1-1-0"),data:Gn.exact(Gn.intersection([Gn.type({unlock_method:Gn.union([Gn.literal("BIOMETRIC"),Gn.literal("PASSWORD"),Gn.literal("PIN"),Gn.literal("SSO"),Gn.literal("PASSKEY"),Gn.literal("B5WEB"),Gn.literal("SLS"),Gn.literal("DEVICE_UNLOCK")]),status:Gn.union([Gn.literal("SUCCESS"),Gn.literal("FAIL"),Gn.literal("REQUEST")])}),Gn.partial({count_locked:Gn.Int,count_unlocked:Gn.Int})]))}))});var aCA=OA(d7=>{"use strict";var H3j=d7&&d7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),T3j=d7&&d7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),K3j=d7&&d7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&H3j(j,A,e);return T3j(j,A),j};Object.defineProperty(d7,"__esModule",{value:!0});d7.AutolockDurationSettingUpdate=void 0;var wk=K3j(aA());d7.AutolockDurationSettingUpdate=wk.exact(wk.type({schema:wk.literal("iglu:com.1password.app/autolock-duration-setting_update/jsonschema/1-0-0"),data:wk.exact(wk.type({autolock_duration_setting_status:wk.union([wk.literal("SUCCESSFUL"),wk.literal("FAILED"),wk.literal("REQUESTED")]),autolock_duration_before:wk.Int,autolock_duration_after:wk.Int}))}))});var oCA=OA(k7=>{"use strict";var S3j=k7&&k7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),M3j=k7&&k7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),_3j=k7&&k7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&S3j(j,A,e);return M3j(j,A),j};Object.defineProperty(k7,"__esModule",{value:!0});k7.BackgroundAction=void 0;var Xq=_3j(aA()),nCA=ba();k7.BackgroundAction=Xq.exact(Xq.type({schema:Xq.literal("iglu:com.1password.app/background_action/jsonschema/1-0-1"),data:Xq.exact(Xq.intersection([Xq.type({name:nCA.TelemetryStringC}),Xq.partial({category:nCA.TelemetryStringC})]))}))});var sCA=OA(u7=>{"use strict";var L3j=u7&&u7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),N3j=u7&&u7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),z3j=u7&&u7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&L3j(j,A,e);return N3j(j,A),j};Object.defineProperty(u7,"__esModule",{value:!0});u7.CliRequest=void 0;var Vq=z3j(aA()),iCA=ba();u7.CliRequest=Vq.exact(Vq.type({schema:Vq.literal("iglu:com.1password.app/cli_request/jsonschema/1-0-0"),data:Vq.exact(Vq.intersection([Vq.type({command:iCA.TelemetryStringC}),Vq.partial({command_alias:iCA.TelemetryStringC})]))}))});var lCA=OA(p7=>{"use strict";var R3j=p7&&p7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),J3j=p7&&p7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),U3j=p7&&p7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&R3j(j,A,e);return J3j(j,A),j};Object.defineProperty(p7,"__esModule",{value:!0});p7.Click=void 0;var Wq=U3j(aA()),d5=ba();p7.Click=Wq.exact(Wq.type({schema:Wq.literal("iglu:com.1password.app/click/jsonschema/1-0-0"),data:Wq.exact(Wq.intersection([Wq.type({component_type:d5.TelemetryStringC,component_name:d5.TelemetryStringC}),Wq.partial({source:d5.TelemetryStringC,category:d5.TelemetryStringC})]))}))});var cCA=OA(m7=>{"use strict";var X3j=m7&&m7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),V3j=m7&&m7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),W3j=m7&&m7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&X3j(j,A,e);return V3j(j,A),j};Object.defineProperty(m7,"__esModule",{value:!0});m7.DeveloperEnvironmentVariablesUpdate=void 0;var vF=W3j(aA());m7.DeveloperEnvironmentVariablesUpdate=vF.exact(vF.type({schema:vF.literal("iglu:com.1password.app/developer-environment-variables_update/jsonschema/1-0-0"),data:vF.exact(vF.type({active_variables_count:vF.Int}))}))});var dCA=OA(E7=>{"use strict";var Y3j=E7&&E7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),Q3j=E7&&E7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),Z3j=E7&&E7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&Y3j(j,A,e);return Q3j(j,A),j};Object.defineProperty(E7,"__esModule",{value:!0});E7.ExportDiagnosticsReport=void 0;var Gl=Z3j(aA());E7.ExportDiagnosticsReport=Gl.exact(Gl.type({schema:Gl.literal("iglu:com.1password.app/export_diagnostics_report/jsonschema/1-0-0"),data:Gl.exact(Gl.intersection([Gl.type({report_source:Gl.union([Gl.literal("B5X"),Gl.literal("DESKTOP")])}),Gl.partial({export_status:Gl.union([Gl.literal("SUCCESSFUL"),Gl.literal("FAILED")]),browser_console_logs_included:Gl.Int})]))}))});var kCA=OA(B7=>{"use strict";var ALj=B7&&B7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),jLj=B7&&B7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),eLj=B7&&B7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&ALj(j,A,e);return jLj(j,A),j};Object.defineProperty(B7,"__esModule",{value:!0});B7.FilterBusinessWatchtowerReport=void 0;var zI=eLj(aA()),tLj=ba();B7.FilterBusinessWatchtowerReport=zI.exact(zI.type({schema:zI.literal("iglu:com.1password.app/filter_business_watchtower_report/jsonschema/1-0-0"),data:zI.exact(zI.type({filter_selection:tLj.TelemetryStringC}))}))});var uCA=OA(g7=>{"use strict";var rLj=g7&&g7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),aLj=g7&&g7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),nLj=g7&&g7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&rLj(j,A,e);return aLj(j,A),j};Object.defineProperty(g7,"__esModule",{value:!0});g7.InlineMenuRender=void 0;var t6=nLj(aA());g7.InlineMenuRender=t6.exact(t6.type({schema:t6.literal("iglu:com.1password.app/inline_menu_render/jsonschema/1-0-0"),data:t6.exact(t6.intersection([t6.type({overall_status:t6.union([t6.literal("NOT_STARTED"),t6.literal("INCOMPLETE"),t6.literal("COMPLETED")]),dom_scan_status:t6.union([t6.literal("NOT_STARTED"),t6.literal("INCOMPLETE"),t6.literal("COMPLETED")]),analyze_frame_status:t6.union([t6.literal("NOT_STARTED"),t6.literal("INCOMPLETE"),t6.literal("COMPLETED")]),render_menu_status:t6.union([t6.literal("NOT_STARTED"),t6.literal("INCOMPLETE"),t6.literal("COMPLETED")])}),t6.partial({overall_duration_ms:t6.Int,dom_scan_duration_ms:t6.Int,analyze_frame_duration_ms:t6.Int,render_menu_duration_ms:t6.Int})]))}))});var pCA=OA(h7=>{"use strict";var oLj=h7&&h7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),iLj=h7&&h7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),sLj=h7&&h7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&oLj(j,A,e);return iLj(j,A),j};Object.defineProperty(h7,"__esModule",{value:!0});h7.Input=void 0;var Yq=sLj(aA()),k5=ba();h7.Input=Yq.exact(Yq.type({schema:Yq.literal("iglu:com.1password.app/input/jsonschema/1-0-0"),data:Yq.exact(Yq.intersection([Yq.type({component_type:k5.TelemetryStringC,component_name:k5.TelemetryStringC}),Yq.partial({source:k5.TelemetryStringC,category:k5.TelemetryStringC})]))}))});var mCA=OA(q7=>{"use strict";var lLj=q7&&q7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),cLj=q7&&q7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),dLj=q7&&q7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&lLj(j,A,e);return cLj(j,A),j};Object.defineProperty(q7,"__esModule",{value:!0});q7.InviteUser=void 0;var Os=dLj(aA());q7.InviteUser=Os.exact(Os.type({schema:Os.literal("iglu:com.1password.app/invite_user/jsonschema/2-0-0"),data:Os.exact(Os.type({member_type:Os.union([Os.literal("REGULAR"),Os.literal("GUEST")]),invites_count:Os.Int,source:Os.union([Os.literal("GUIDED_SETUP"),Os.literal("INVITE_MODAL")]),status:Os.union([Os.literal("SUCCESS"),Os.literal("FAIL")])}))}))});var ECA=OA(v7=>{"use strict";var kLj=v7&&v7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),uLj=v7&&v7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),pLj=v7&&v7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&kLj(j,A,e);return uLj(j,A),j};Object.defineProperty(v7,"__esModule",{value:!0});v7.ItemAutofill=void 0;var Pj=pLj(aA()),mLj=ba();v7.ItemAutofill=Pj.exact(Pj.type({schema:Pj.literal("iglu:com.1password.app/item_autofill/jsonschema/1-1-0"),data:Pj.exact(Pj.intersection([Pj.type({template_uuid:mLj.TelemetryStringC,status:Pj.union([Pj.literal("SUCCESS"),Pj.literal("FAIL"),Pj.literal("REQUEST")])}),Pj.partial({fill_method:Pj.union([Pj.literal("OPEN_AND_FILL"),Pj.literal("QUICK_ACCESS"),Pj.literal("INLINE"),Pj.literal("POPUP"),Pj.literal("UNIVERSAL_AUTOFILL"),Pj.literal("USO_PROMPT"),Pj.literal("KEYBOARD_SHORTCUT"),Pj.literal("SYSTEM_PROMPT"),Pj.literal("ITEM_LIST"),Pj.literal("SAVE_AND_FILL")]),social_login_type:Pj.union([Pj.literal("amazon"),Pj.literal("apple"),Pj.literal("discord"),Pj.literal("facebook"),Pj.literal("github"),Pj.literal("google"),Pj.literal("microsoft"),Pj.literal("okta"),Pj.literal("slack"),Pj.literal("twitter")]),fields_filled:Pj.array(Pj.union([Pj.literal("ssh-key-title"),Pj.literal("ssh-key"),Pj.literal("name"),Pj.literal("honorific-prefix"),Pj.literal("given-name"),Pj.literal("additional-name"),Pj.literal("family-name"),Pj.literal("honorific-suffix"),Pj.literal("nickname"),Pj.literal("organization-title"),Pj.literal("username"),Pj.literal("new-password"),Pj.literal("current-password"),Pj.literal("one-time-code"),Pj.literal("organization"),Pj.literal("street-address"),Pj.literal("address-line1"),Pj.literal("address-line2"),Pj.literal("address-line3"),Pj.literal("address-level1"),Pj.literal("address-level2"),Pj.literal("address-level3"),Pj.literal("address-level4"),Pj.literal("country"),Pj.literal("country-name"),Pj.literal("postal-code"),Pj.literal("cc-name"),Pj.literal("cc-given-name"),Pj.literal("cc-additional-name"),Pj.literal("cc-family-name"),Pj.literal("cc-number"),Pj.literal("cc-exp"),Pj.literal("cc-exp-month"),Pj.literal("cc-exp-year"),Pj.literal("cc-csc"),Pj.literal("cc-type"),Pj.literal("transaction-currency"),Pj.literal("transaction-amount"),Pj.literal("language"),Pj.literal("bday"),Pj.literal("bday-day"),Pj.literal("bday-month"),Pj.literal("bday-year"),Pj.literal("sex"),Pj.literal("url"),Pj.literal("photo"),Pj.literal("tel"),Pj.literal("tel-country-code"),Pj.literal("tel-national"),Pj.literal("tel-area-code"),Pj.literal("tel-local"),Pj.literal("tel-local-prefix"),Pj.literal("tel-local-suffix"),Pj.literal("tel-extension"),Pj.literal("email"),Pj.literal("impp"),Pj.literal("crypto-address"),Pj.literal("crypto-recovery-seed"),Pj.literal("recovery-code")])),is_default:Pj.boolean,passkey_filled:Pj.boolean})]))}))});var BCA=OA(x7=>{"use strict";var ELj=x7&&x7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),BLj=x7&&x7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),gLj=x7&&x7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&ELj(j,A,e);return BLj(j,A),j};Object.defineProperty(x7,"__esModule",{value:!0});x7.ItemCreate=void 0;var p6=gLj(aA()),hLj=ba();x7.ItemCreate=p6.exact(p6.type({schema:p6.literal("iglu:com.1password.app/item_create/jsonschema/1-0-3"),data:p6.exact(p6.intersection([p6.type({template_uuid:hLj.TelemetryStringC,status:p6.union([p6.literal("SUCCESS"),p6.literal("FAIL"),p6.literal("REQUEST")])}),p6.partial({create_method:p6.union([p6.literal("SAVE_DIALOG"),p6.literal("AUTOSAVE"),p6.literal("PASSKEY"),p6.literal("MANUAL")]),tags_added_count:p6.Int,vault_type:p6.union([p6.literal("PERSONAL"),p6.literal("EVERYONE"),p6.literal("TRANSFER"),p6.literal("USER_CREATED"),p6.literal("SYSTEM"),p6.literal("GENERATED_PASSWORDS"),p6.literal("MANAGED_APPLICATIONS")]),passkey_added:p6.boolean})]))}))});var gCA=OA(f7=>{"use strict";var qLj=f7&&f7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),vLj=f7&&f7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),xLj=f7&&f7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&qLj(j,A,e);return vLj(j,A),j};Object.defineProperty(f7,"__esModule",{value:!0});f7.ItemImport=void 0;var Sj=xLj(aA());f7.ItemImport=Sj.exact(Sj.type({schema:Sj.literal("iglu:com.1password.app/item_import/jsonschema/1-1-0"),data:Sj.exact(Sj.intersection([Sj.type({import_source:Sj.union([Sj.literal("CHROME"),Sj.literal("SAFARI"),Sj.literal("FIREFOX"),Sj.literal("EDGE"),Sj.literal("BRAVE"),Sj.literal("DIFFERENT_BROWSER"),Sj.literal("LASTPASS"),Sj.literal("ICLOUD_KEYCHAIN"),Sj.literal("DASHLANE"),Sj.literal("KEYPASS"),Sj.literal("KEYPASSXC"),Sj.literal("ROBOFORM"),Sj.literal("DELINEA_SECRET_SERVER"),Sj.literal("1PASSWORD"),Sj.literal("DIFFERENT_PASSWORD_MANAGER"),Sj.literal("MEMORIZED_PASSWORDS"),Sj.literal("PEN_AND_PAPER"),Sj.literal("SPREADSHEET"),Sj.literal("CSV"),Sj.literal("BITWARDEN"),Sj.literal("KEEPER"),Sj.literal("I_DONT_SEE_MY_OPTION")]),item_imported_count:Sj.Int,login_imported_count:Sj.Int}),Sj.partial({import_source_category:Sj.union([Sj.literal("MY_BROWSER"),Sj.literal("A_PASSWORD_MANAGER"),Sj.literal("SOMEWHERE_ELSE")]),item_type_edited_count:Sj.Int,item_label_added_count:Sj.Int,import_error_stage:Sj.union([Sj.literal("START"),Sj.literal("LOG_IN"),Sj.literal("ADMIN_OPTIONS"),Sj.literal("IMPORT"),Sj.literal("FINALIZE")]),import_status:Sj.union([Sj.literal("SUCCESS"),Sj.literal("FAIL"),Sj.literal("REQUEST")]),import_error:Sj.union([Sj.literal("COULDNT_OPEN_FILE"),Sj.literal("BAD_INPUT_FILE_TYPE"),Sj.literal("NO_ACCOUNTS"),Sj.literal("NO_VAULTS"),Sj.literal("FAILED_DECRYPT_BYTES"),Sj.literal("NO_ASSOCIATED_KEY_ID"),Sj.literal("DOCUMENT_BAD_INTEGRITY_HASH"),Sj.literal("DESERIALIZE_ERROR"),Sj.literal("MALFORMED_ZIP"),Sj.literal("ZIP_ERROR"),Sj.literal("CSV"),Sj.literal("IO_ERROR"),Sj.literal("SERIALIZE_ERROR"),Sj.literal("UNSUPPORTED_EXPORT_FORMAT"),Sj.literal("UNBALANCED_QUOTE"),Sj.literal("CRYPTO_ERROR"),Sj.literal("DECRYPTED_FILE_ERROR"),Sj.literal("CSV_FIELD_COUNT_MISMATCH"),Sj.literal("IMPORT_CANCELLED"),Sj.literal("NETWORK"),Sj.literal("FAILED_TO_CREATE_VAULT"),Sj.literal("BINARY_NOT_FOUND"),Sj.literal("BINARY_FAILED_TO_START"),Sj.literal("FAILED_TO_CONVERT_JSON"),Sj.literal("FAILED_TO_COMMUNICATE"),Sj.literal("MISSING_PRIVATE_VAULT"),Sj.literal("MODEL"),Sj.literal("OBJECT"),Sj.literal("TEMPLATE_NOT_FOUND"),Sj.literal("LP_APPLICATION"),Sj.literal("LP_HTTP"),Sj.literal("LP_LOGIN"),Sj.literal("LP_USERNAME"),Sj.literal("LP_PASSWORD"),Sj.literal("LP_WRONG_OTP"),Sj.literal("LP_LASTPASS_API_CHANGED"),Sj.literal("LP_MALFORMED_FILE"),Sj.literal("LP_SERVER"),Sj.literal("LP_TOO_MANY_REQUESTS"),Sj.literal("LP_IDP_NOT_SUPPORTED"),Sj.literal("LP_PASSWORD_RESET_REQUESTED"),Sj.literal("LP_SHARED_FOLDERS"),Sj.literal("LP_OIDC"),Sj.literal("LP_DUO_MFA"),Sj.literal("LP_UNIFIED_LOGIN"),Sj.literal("OTHER")])})]))}))});var hCA=OA(G7=>{"use strict";var fLj=G7&&G7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),GLj=G7&&G7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),FLj=G7&&G7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&fLj(j,A,e);return GLj(j,A),j};Object.defineProperty(G7,"__esModule",{value:!0});G7.ItemLocationUpdate=void 0;var Dm=FLj(aA()),bLj=ba();G7.ItemLocationUpdate=Dm.exact(Dm.type({schema:Dm.literal("iglu:com.1password.app/item_location_update/jsonschema/1-0-0"),data:Dm.exact(Dm.type({template_uuid:bLj.TelemetryStringC,update:Dm.union([Dm.literal("SET_VIA_MAP"),Dm.literal("SET_VIA_TEXT"),Dm.literal("REMOVED")])}))}))});var qCA=OA(F7=>{"use strict";var yLj=F7&&F7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),$Lj=F7&&F7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),wLj=F7&&F7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&yLj(j,A,e);return $Lj(j,A),j};Object.defineProperty(F7,"__esModule",{value:!0});F7.ItemShare=void 0;var _6=wLj(aA());F7.ItemShare=_6.exact(_6.type({schema:_6.literal("iglu:com.1password.app/item_share/jsonschema/1-0-0"),data:_6.exact(_6.intersection([_6.type({link_expire:_6.union([_6.literal("1_HOUR"),_6.literal("1_DAY"),_6.literal("7_DAYS"),_6.literal("14_DAYS"),_6.literal("30_DAYS")]),available_to:_6.union([_6.literal("ANYONE_WITH_LINK"),_6.literal("ONLY_SOME_PEOPLE")]),only_view_one_time:_6.boolean,status:_6.union([_6.literal("SUCCESS"),_6.literal("FAIL")])}),_6.partial({share_method:_6.union([_6.literal("COPY_LINK"),_6.literal("SHARE_LINK")]),email_added_count:_6.Int})]))}))});var vCA=OA(b7=>{"use strict";var ILj=b7&&b7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),DLj=b7&&b7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),OLj=b7&&b7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&ILj(j,A,e);return DLj(j,A),j};Object.defineProperty(b7,"__esModule",{value:!0});b7.ItemUpdate=void 0;var vo=OLj(aA()),PLj=ba();b7.ItemUpdate=vo.exact(vo.type({schema:vo.literal("iglu:com.1password.app/item_update/jsonschema/1-2-0"),data:vo.exact(vo.intersection([vo.type({template_uuid:PLj.TelemetryStringC,status:vo.union([vo.literal("SUCCESS"),vo.literal("FAIL"),vo.literal("REQUEST")])}),vo.partial({update_method:vo.union([vo.literal("MANUAL"),vo.literal("SAVE_DIALOG"),vo.literal("AUTOSAVE"),vo.literal("PASSKEY"),vo.literal("ONE_TIME_CODE")]),passkey_added:vo.boolean,one_time_password_added:vo.boolean})]))}))});var xCA=OA(y7=>{"use strict";var CLj=y7&&y7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),HLj=y7&&y7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),TLj=y7&&y7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&CLj(j,A,e);return HLj(j,A),j};Object.defineProperty(y7,"__esModule",{value:!0});y7.PageView=void 0;var vi=TLj(aA());y7.PageView=vi.exact(vi.type({schema:vi.literal("iglu:com.1password.app/page_view/jsonschema/1-0-1"),data:vi.exact(vi.type({page_name:vi.union([vi.literal("PROFILE"),vi.literal("ALL_ITEMS"),vi.literal("FAVORITES"),vi.literal("WATCHTOWER"),vi.literal("VAULT"),vi.literal("TAG"),vi.literal("ARCHIVE"),vi.literal("RECENTLY_DELETED"),vi.literal("CATEGORIES"),vi.literal("LABS_HOMEPAGE"),vi.literal("LABS_NEARBY_ITEMS")])}))}))});var fCA=OA($7=>{"use strict";var KLj=$7&&$7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),SLj=$7&&$7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),MLj=$7&&$7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&KLj(j,A,e);return SLj(j,A),j};Object.defineProperty($7,"__esModule",{value:!0});$7.ProfileDefaultUpdate=void 0;var xF=MLj(aA()),_Lj=ba();$7.ProfileDefaultUpdate=xF.exact(xF.type({schema:xF.literal("iglu:com.1password.app/profile-default_update/jsonschema/1-0-0"),data:xF.exact(xF.type({template_uuid:_Lj.TelemetryStringC,set:xF.boolean}))}))});var GCA=OA(w7=>{"use strict";var LLj=w7&&w7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),NLj=w7&&w7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),zLj=w7&&w7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&LLj(j,A,e);return NLj(j,A),j};Object.defineProperty(w7,"__esModule",{value:!0});w7.SettingReset=void 0;var fF=zLj(aA()),RLj=ba();w7.SettingReset=fF.exact(fF.type({schema:fF.literal("iglu:com.1password.app/setting_reset/jsonschema/1-0-0"),data:fF.exact(fF.type({setting_path:RLj.TelemetryStringC,json_version:fF.Int}))}))});var FCA=OA(I7=>{"use strict";var JLj=I7&&I7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),ULj=I7&&I7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),XLj=I7&&I7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&JLj(j,A,e);return ULj(j,A),j};Object.defineProperty(I7,"__esModule",{value:!0});I7.SignIn=void 0;var m6=XLj(aA());I7.SignIn=m6.exact(m6.type({schema:m6.literal("iglu:com.1password.app/sign_in/jsonschema/2-0-0"),data:m6.exact(m6.intersection([m6.type({unlock_method:m6.union([m6.literal("PASSWORD"),m6.literal("SSO"),m6.literal("PASSKEY"),m6.literal("EXTENSION_DELEGATED")]),sign_in_flow:m6.union([m6.literal("MYCELIUM_QR_CODE"),m6.literal("REDIRECT_FROM_BROWSER"),m6.literal("MANUAL_ENTRY"),m6.literal("SCAN_SETUP_CODE"),m6.literal("FOUND_ACCOUNTS"),m6.literal("MYCELIUM_QR_CODE_REVERSE")]),reauthentication:m6.boolean}),m6.partial({time_to_complete_sec:m6.Int,accessed_find_emergency_kit_link:m6.boolean,invalid_secret_key_error_count:m6.Int,invalid_email_address_error_count:m6.Int,invalid_sign_in_address_count:m6.Int,unable_to_sign_in_error_count:m6.Int})]))}))});var bCA=OA(D7=>{"use strict";var VLj=D7&&D7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),WLj=D7&&D7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),YLj=D7&&D7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&VLj(j,A,e);return WLj(j,A),j};Object.defineProperty(D7,"__esModule",{value:!0});D7.SortBusinessWatchtowerReport=void 0;var RI=YLj(aA()),QLj=ba();D7.SortBusinessWatchtowerReport=RI.exact(RI.type({schema:RI.literal("iglu:com.1password.app/sort_business_watchtower_report/jsonschema/1-0-0"),data:RI.exact(RI.type({sort_selection:QLj.TelemetryStringC}))}))});var yCA=OA(O7=>{"use strict";var ZLj=O7&&O7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),ANj=O7&&O7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),jNj=O7&&O7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&ZLj(j,A,e);return ANj(j,A),j};Object.defineProperty(O7,"__esModule",{value:!0});O7.SshAgentSignRequest=void 0;var Fn=jNj(aA());O7.SshAgentSignRequest=Fn.exact(Fn.type({schema:Fn.literal("iglu:com.1password.app/ssh-agent_sign-request/jsonschema/1-1-0"),data:Fn.exact(Fn.intersection([Fn.type({key_type:Fn.union([Fn.literal("Ed25519"),Fn.literal("Rsa")])}),Fn.partial({is_host_bookmarked:Fn.boolean,is_bookmarks_config_file_enabled:Fn.boolean,is_agent_config_file_enabled:Fn.boolean,workflow_git:Fn.boolean,workflow_signing:Fn.boolean,workflow_sftp:Fn.boolean,workflow_docker:Fn.boolean,workflow_wsl:Fn.boolean,workflow_terminal:Fn.boolean,workflow_agent_forwarding:Fn.boolean,workflow_background:Fn.boolean,workflow_openssh:Fn.boolean})]))}))});var $CA=OA(P7=>{"use strict";var eNj=P7&&P7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),tNj=P7&&P7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),rNj=P7&&P7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&eNj(j,A,e);return tNj(j,A),j};Object.defineProperty(P7,"__esModule",{value:!0});P7.SshAuthPromptApprove=void 0;var no=rNj(aA());P7.SshAuthPromptApprove=no.exact(no.type({schema:no.literal("iglu:com.1password.app/ssh-auth-prompt_approve/jsonschema/1-0-0"),data:no.exact(no.intersection([no.type({approval_method:no.union([no.literal("APPROVE_BUTTON"),no.literal("ACCOUNT_PASSWORD"),no.literal("SSO"),no.literal("SYSTEM_AUTH_EMBEDDED_TOUCH_ID"),no.literal("SYSTEM_AUTH_EMBEDDED_APPLE_WATCH"),no.literal("SYSTEM_AUTH_POPUP_TOUCH_ID"),no.literal("SYSTEM_AUTH_POPUP_APPLE_WATCH"),no.literal("SYSTEM_AUTH_POPUP_LINUX"),no.literal("SYSTEM_AUTH_POPUP_WINDOWS_HELLO"),no.literal("PASSKEY")]),for_all_applications:no.boolean}),no.partial({rich_auth_prompt:no.boolean})]))}))});var wCA=OA(C7=>{"use strict";var aNj=C7&&C7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),nNj=C7&&C7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),oNj=C7&&C7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&aNj(j,A,e);return nNj(j,A),j};Object.defineProperty(C7,"__esModule",{value:!0});C7.SshKeyExport=void 0;var Ro=oNj(aA());C7.SshKeyExport=Ro.exact(Ro.type({schema:Ro.literal("iglu:com.1password.app/ssh-key_export/jsonschema/1-0-0"),data:Ro.exact(Ro.intersection([Ro.type({export_format:Ro.union([Ro.literal("PKCS8"),Ro.literal("PKCS1"),Ro.literal("OPENSSH")]),is_encrypted:Ro.boolean,export_method:Ro.union([Ro.literal("COPY"),Ro.literal("DOWNLOAD")])}),Ro.partial({key_type:Ro.union([Ro.literal("RSA"),Ro.literal("ED25519")])})]))}))});var ICA=OA(H7=>{"use strict";var iNj=H7&&H7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),sNj=H7&&H7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),lNj=H7&&H7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&iNj(j,A,e);return sNj(j,A),j};Object.defineProperty(H7,"__esModule",{value:!0});H7.SubscriptionCancel=void 0;var JI=lNj(aA()),cNj=ba();H7.SubscriptionCancel=JI.exact(JI.type({schema:JI.literal("iglu:com.1password.app/subscription_cancel/jsonschema/1-0-0"),data:JI.exact(JI.type({cancelled_subscription_tier:cNj.TelemetryStringC}))}))});var DCA=OA(T7=>{"use strict";var dNj=T7&&T7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),kNj=T7&&T7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),uNj=T7&&T7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&dNj(j,A,e);return kNj(j,A),j};Object.defineProperty(T7,"__esModule",{value:!0});T7.SubscriptionStart=void 0;var Jo=uNj(aA()),pNj=ba();T7.SubscriptionStart=Jo.exact(Jo.type({schema:Jo.literal("iglu:com.1password.app/subscription_start/jsonschema/1-0-0"),data:Jo.exact(Jo.type({subscription_tier:pNj.TelemetryStringC,pre_subscription_billing_status:Jo.union([Jo.literal("TRIAL"),Jo.literal("FROZEN"),Jo.literal("OTHER")]),subscription_payment_method:Jo.array(Jo.union([Jo.literal("CREDIT_CARD"),Jo.literal("GIFT_CARD"),Jo.literal("OTHER")])),subscription_payment_frequency:Jo.union([Jo.literal("MONTHLY"),Jo.literal("ANNUAL"),Jo.literal("OTHER")])}))}))});var PCA=OA(K7=>{"use strict";var mNj=K7&&K7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),ENj=K7&&K7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),BNj=K7&&K7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&mNj(j,A,e);return ENj(j,A),j};Object.defineProperty(K7,"__esModule",{value:!0});K7.SubscriptionUpdate=void 0;var tg=BNj(aA()),OCA=ba();K7.SubscriptionUpdate=tg.exact(tg.type({schema:tg.literal("iglu:com.1password.app/subscription_update/jsonschema/1-0-0"),data:tg.exact(tg.type({subscription_update_type:tg.union([tg.literal("TIER"),tg.literal("PAYMENT_FREQUENCY")]),subscription_updated_from:OCA.TelemetryStringC,subscription_updated_to:OCA.TelemetryStringC}))}))});var CCA=OA(S7=>{"use strict";var gNj=S7&&S7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),hNj=S7&&S7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),qNj=S7&&S7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&gNj(j,A,e);return hNj(j,A),j};Object.defineProperty(S7,"__esModule",{value:!0});S7.SwitchChange=void 0;var Om=qNj(aA());S7.SwitchChange=Om.exact(Om.type({schema:Om.literal("iglu:com.1password.app/switch_change/jsonschema/1-0-0"),data:Om.exact(Om.type({switch_name:Om.union([Om.literal("LABS_EXPERIMENT_NEARBY_ITEMS"),Om.literal("USE_MAPS")]),enabled:Om.boolean}))}))});var HCA=OA(M7=>{"use strict";var vNj=M7&&M7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),xNj=M7&&M7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),fNj=M7&&M7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&vNj(j,A,e);return xNj(j,A),j};Object.defineProperty(M7,"__esModule",{value:!0});M7.View=void 0;var Qq=fNj(aA()),u5=ba();M7.View=Qq.exact(Qq.type({schema:Qq.literal("iglu:com.1password.app/view/jsonschema/1-0-0"),data:Qq.exact(Qq.intersection([Qq.type({component_type:u5.TelemetryStringC,component_name:u5.TelemetryStringC}),Qq.partial({source:u5.TelemetryStringC,category:u5.TelemetryStringC})]))}))});var KCA=OA(_7=>{"use strict";var GNj=_7&&_7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),FNj=_7&&_7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),bNj=_7&&_7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&GNj(j,A,e);return FNj(j,A),j};Object.defineProperty(_7,"__esModule",{value:!0});_7.AmplitudeExposure=void 0;var Zq=bNj(aA()),TCA=ba();_7.AmplitudeExposure=Zq.exact(Zq.type({schema:Zq.literal("iglu:com.1password.preauth/amplitude_exposure/jsonschema/1-0-0"),data:Zq.exact(Zq.intersection([Zq.type({flag_key:TCA.TelemetryStringC}),Zq.partial({variant:TCA.TelemetryStringC})]))}))});var MCA=OA(L7=>{"use strict";var yNj=L7&&L7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),$Nj=L7&&L7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),wNj=L7&&L7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&yNj(j,A,e);return $Nj(j,A),j};Object.defineProperty(L7,"__esModule",{value:!0});L7.BackgroundActionPreauth=void 0;var Av=wNj(aA()),SCA=ba();L7.BackgroundActionPreauth=Av.exact(Av.type({schema:Av.literal("iglu:com.1password.preauth/background_action_preauth/jsonschema/1-0-0"),data:Av.exact(Av.intersection([Av.type({name:SCA.TelemetryStringC}),Av.partial({category:SCA.TelemetryStringC})]))}))});var _CA=OA(N7=>{"use strict";var INj=N7&&N7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),DNj=N7&&N7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),ONj=N7&&N7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&INj(j,A,e);return DNj(j,A),j};Object.defineProperty(N7,"__esModule",{value:!0});N7.ClickPreauth=void 0;var jv=ONj(aA()),p5=ba();N7.ClickPreauth=jv.exact(jv.type({schema:jv.literal("iglu:com.1password.preauth/click_preauth/jsonschema/1-0-0"),data:jv.exact(jv.intersection([jv.type({component_type:p5.TelemetryStringC,component_name:p5.TelemetryStringC}),jv.partial({source:p5.TelemetryStringC,category:p5.TelemetryStringC})]))}))});var LCA=OA(z7=>{"use strict";var PNj=z7&&z7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),CNj=z7&&z7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),HNj=z7&&z7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&PNj(j,A,e);return CNj(j,A),j};Object.defineProperty(z7,"__esModule",{value:!0});z7.InputPreauth=void 0;var ev=HNj(aA()),m5=ba();z7.InputPreauth=ev.exact(ev.type({schema:ev.literal("iglu:com.1password.preauth/input_preauth/jsonschema/1-0-0"),data:ev.exact(ev.intersection([ev.type({component_type:m5.TelemetryStringC,component_name:m5.TelemetryStringC}),ev.partial({source:m5.TelemetryStringC,category:m5.TelemetryStringC})]))}))});var NCA=OA(J7=>{"use strict";var TNj=J7&&J7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),KNj=J7&&J7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),SNj=J7&&J7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&TNj(j,A,e);return KNj(j,A),j};Object.defineProperty(J7,"__esModule",{value:!0});J7.SignupCookiePresencePreauth=void 0;var R7=SNj(aA());J7.SignupCookiePresencePreauth=R7.exact(R7.type({schema:R7.literal("iglu:com.1password.preauth/signup_cookie_presence_preauth/jsonschema/1-0-0"),data:R7.exact(R7.type({referrer_present:R7.boolean,cjevent_present:R7.boolean,infr_present:R7.boolean,gspk_present:R7.boolean,affiliate_present:R7.boolean}))}))});var zCA=OA(U7=>{"use strict";var MNj=U7&&U7.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),_Nj=U7&&U7.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),LNj=U7&&U7.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&MNj(j,A,e);return _Nj(j,A),j};Object.defineProperty(U7,"__esModule",{value:!0});U7.ViewPreauth=void 0;var tv=LNj(aA()),E5=ba();U7.ViewPreauth=tv.exact(tv.type({schema:tv.literal("iglu:com.1password.preauth/view_preauth/jsonschema/1-0-0"),data:tv.exact(tv.intersection([tv.type({component_type:E5.TelemetryStringC,component_name:E5.TelemetryStringC}),tv.partial({source:E5.TelemetryStringC,category:E5.TelemetryStringC})]))}))});var YCA=OA(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.PreAuthEvents=rg.isHighVolumeEventType=rg.AllEvents=void 0;var NNj=tCA(),zNj=rCA(),RNj=aCA(),JNj=oCA(),UNj=sCA(),XNj=lCA(),VNj=cCA(),WNj=dCA(),YNj=kCA(),QNj=uCA(),ZNj=pCA(),Azj=mCA(),jzj=ECA(),ezj=BCA(),tzj=gCA(),rzj=hCA(),azj=qCA(),nzj=vCA(),ozj=xCA(),izj=fCA(),szj=GCA(),lzj=FCA(),czj=bCA(),dzj=yCA(),kzj=$CA(),uzj=wCA(),pzj=ICA(),mzj=DCA(),Ezj=PCA(),Bzj=CCA(),gzj=HCA(),RCA=KCA(),JCA=MCA(),UCA=_CA(),XCA=LCA(),VCA=NCA(),WCA=zCA();rg.AllEvents={AppLock:NNj.AppLock,AppUnlock:zNj.AppUnlock,AutolockDurationSettingUpdate:RNj.AutolockDurationSettingUpdate,BackgroundAction:JNj.BackgroundAction,CliRequest:UNj.CliRequest,Click:XNj.Click,DeveloperEnvironmentVariablesUpdate:VNj.DeveloperEnvironmentVariablesUpdate,ExportDiagnosticsReport:WNj.ExportDiagnosticsReport,FilterBusinessWatchtowerReport:YNj.FilterBusinessWatchtowerReport,InlineMenuRender:QNj.InlineMenuRender,Input:ZNj.Input,InviteUser:Azj.InviteUser,ItemAutofill:jzj.ItemAutofill,ItemCreate:ezj.ItemCreate,ItemImport:tzj.ItemImport,ItemLocationUpdate:rzj.ItemLocationUpdate,ItemShare:azj.ItemShare,ItemUpdate:nzj.ItemUpdate,PageView:ozj.PageView,ProfileDefaultUpdate:izj.ProfileDefaultUpdate,SettingReset:szj.SettingReset,SignIn:lzj.SignIn,SortBusinessWatchtowerReport:czj.SortBusinessWatchtowerReport,SshAgentSignRequest:dzj.SshAgentSignRequest,SshAuthPromptApprove:kzj.SshAuthPromptApprove,SshKeyExport:uzj.SshKeyExport,SubscriptionCancel:pzj.SubscriptionCancel,SubscriptionStart:mzj.SubscriptionStart,SubscriptionUpdate:Ezj.SubscriptionUpdate,SwitchChange:Bzj.SwitchChange,View:gzj.View,AmplitudeExposure:RCA.AmplitudeExposure,BackgroundActionPreauth:JCA.BackgroundActionPreauth,ClickPreauth:UCA.ClickPreauth,InputPreauth:XCA.InputPreauth,SignupCookiePresencePreauth:VCA.SignupCookiePresencePreauth,ViewPreauth:WCA.ViewPreauth};var hzj=new Set(["AppUnlock","ItemAutofill"]),qzj=A=>hzj.has(A);rg.isHighVolumeEventType=qzj;rg.PreAuthEvents={AmplitudeExposure:RCA.AmplitudeExposure,BackgroundActionPreauth:JCA.BackgroundActionPreauth,ClickPreauth:UCA.ClickPreauth,InputPreauth:XCA.InputPreauth,SignupCookiePresencePreauth:VCA.SignupCookiePresencePreauth,ViewPreauth:WCA.ViewPreauth}});var Ik=OA(Ps=>{"use strict";var vzj=Ps&&Ps.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),xzj=Ps&&Ps.__exportStar||function(A,j){for(var e in A)e!=="default"&&!Object.prototype.hasOwnProperty.call(j,e)&&vzj(j,A,e)};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.isHighVolumeEventType=Ps.PreAuthEvents=Ps.AllEvents=Ps.AllContexts=void 0;var fzj=eCA();Object.defineProperty(Ps,"AllContexts",{enumerable:!0,get:function(){return fzj.AllContexts}});var OtA=YCA();Object.defineProperty(Ps,"AllEvents",{enumerable:!0,get:function(){return OtA.AllEvents}});Object.defineProperty(Ps,"PreAuthEvents",{enumerable:!0,get:function(){return OtA.PreAuthEvents}});Object.defineProperty(Ps,"isHighVolumeEventType",{enumerable:!0,get:function(){return OtA.isHighVolumeEventType}});xzj(ba(),Ps)});var ArA=OA((XI,FF)=>{var wzj=200,vHA="__lodash_hash_undefined__",xHA=9007199254740991,UtA="[object Arguments]",Izj="[object Array]",fHA="[object Boolean]",GHA="[object Date]",Dzj="[object Error]",XtA="[object Function]",FHA="[object GeneratorFunction]",x5="[object Map]",bHA="[object Number]",VtA="[object Object]",cHA="[object Promise]",yHA="[object RegExp]",f5="[object Set]",$HA="[object String]",wHA="[object Symbol]",_tA="[object WeakMap]",IHA="[object ArrayBuffer]",G5="[object DataView]",DHA="[object Float32Array]",OHA="[object Float64Array]",PHA="[object Int8Array]",CHA="[object Int16Array]",HHA="[object Int32Array]",THA="[object Uint8Array]",KHA="[object Uint8ClampedArray]",SHA="[object Uint16Array]",MHA="[object Uint32Array]",Ozj=/[\\^$.*+?()[\]{}|]/g,Pzj=/\w*$/,Czj=/^\[object .+?Constructor\]$/,Hzj=/^(?:0|[1-9]\d*)$/,E6={};E6[UtA]=E6[Izj]=E6[IHA]=E6[G5]=E6[fHA]=E6[GHA]=E6[DHA]=E6[OHA]=E6[PHA]=E6[CHA]=E6[HHA]=E6[x5]=E6[bHA]=E6[VtA]=E6[yHA]=E6[f5]=E6[$HA]=E6[wHA]=E6[THA]=E6[KHA]=E6[SHA]=E6[MHA]=!0;E6[Dzj]=E6[XtA]=E6[_tA]=!1;var Tzj=typeof global=="object"&&global&&global.Object===Object&&global,Kzj=typeof self=="object"&&self&&self.Object===Object&&self,Pm=Tzj||Kzj||Function("return this")(),_HA=typeof XI=="object"&&XI&&!XI.nodeType&&XI,dHA=_HA&&typeof FF=="object"&&FF&&!FF.nodeType&&FF,Szj=dHA&&dHA.exports===_HA;function Mzj(A,j){return A.set(j[0],j[1]),A}function _zj(A,j){return A.add(j),A}function Lzj(A,j){for(var e=-1,t=A?A.length:0;++e<t&&j(A[e],e,A)!==!1;);return A}function Nzj(A,j){for(var e=-1,t=j.length,r=A.length;++e<t;)A[r+e]=j[e];return A}function LHA(A,j,e,t){var r=-1,a=A?A.length:0;for(t&&a&&(e=A[++r]);++r<a;)e=j(e,A[r],r,A);return e}function zzj(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function Rzj(A,j){return A?.[j]}function NHA(A){var j=!1;if(A!=null&&typeof A.toString!="function")try{j=!!(A+"")}catch{}return j}function kHA(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}function WtA(A,j){return function(e){return A(j(e))}}function uHA(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var Jzj=Array.prototype,Uzj=Function.prototype,F5=Object.prototype,MtA=Pm["__core-js_shared__"],pHA=function(){var A=/[^.]+$/.exec(MtA&&MtA.keys&&MtA.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),zHA=Uzj.toString,ag=F5.hasOwnProperty,b5=F5.toString,Xzj=RegExp("^"+zHA.call(ag).replace(Ozj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mHA=Szj?Pm.Buffer:void 0,EHA=Pm.Symbol,BHA=Pm.Uint8Array,Vzj=WtA(Object.getPrototypeOf,Object),Wzj=Object.create,Yzj=F5.propertyIsEnumerable,Qzj=Jzj.splice,gHA=Object.getOwnPropertySymbols,Zzj=mHA?mHA.isBuffer:void 0,ARj=WtA(Object.keys,Object),LtA=$F(Pm,"DataView"),VI=$F(Pm,"Map"),NtA=$F(Pm,"Promise"),ztA=$F(Pm,"Set"),RtA=$F(Pm,"WeakMap"),WI=$F(Object,"create"),jRj=nv(LtA),eRj=nv(VI),tRj=nv(NtA),rRj=nv(ztA),aRj=nv(RtA),hHA=EHA?EHA.prototype:void 0,qHA=hHA?hHA.valueOf:void 0;function av(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function nRj(){this.__data__=WI?WI(null):{}}function oRj(A){return this.has(A)&&delete this.__data__[A]}function iRj(A){var j=this.__data__;if(WI){var e=j[A];return e===vHA?void 0:e}return ag.call(j,A)?j[A]:void 0}function sRj(A){var j=this.__data__;return WI?j[A]!==void 0:ag.call(j,A)}function lRj(A,j){var e=this.__data__;return e[A]=WI&&j===void 0?vHA:j,this}av.prototype.clear=nRj;av.prototype.delete=oRj;av.prototype.get=iRj;av.prototype.has=sRj;av.prototype.set=lRj;function Cm(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function cRj(){this.__data__=[]}function dRj(A){var j=this.__data__,e=y5(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():Qzj.call(j,e,1),!0}function kRj(A){var j=this.__data__,e=y5(j,A);return e<0?void 0:j[e][1]}function uRj(A){return y5(this.__data__,A)>-1}function pRj(A,j){var e=this.__data__,t=y5(e,A);return t<0?e.push([A,j]):e[t][1]=j,this}Cm.prototype.clear=cRj;Cm.prototype.delete=dRj;Cm.prototype.get=kRj;Cm.prototype.has=uRj;Cm.prototype.set=pRj;function bF(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function mRj(){this.__data__={hash:new av,map:new(VI||Cm),string:new av}}function ERj(A){return $5(this,A).delete(A)}function BRj(A){return $5(this,A).get(A)}function gRj(A){return $5(this,A).has(A)}function hRj(A,j){return $5(this,A).set(A,j),this}bF.prototype.clear=mRj;bF.prototype.delete=ERj;bF.prototype.get=BRj;bF.prototype.has=gRj;bF.prototype.set=hRj;function yF(A){this.__data__=new Cm(A)}function qRj(){this.__data__=new Cm}function vRj(A){return this.__data__.delete(A)}function xRj(A){return this.__data__.get(A)}function fRj(A){return this.__data__.has(A)}function GRj(A,j){var e=this.__data__;if(e instanceof Cm){var t=e.__data__;if(!VI||t.length<wzj-1)return t.push([A,j]),this;e=this.__data__=new bF(t)}return e.set(A,j),this}yF.prototype.clear=qRj;yF.prototype.delete=vRj;yF.prototype.get=xRj;yF.prototype.has=fRj;yF.prototype.set=GRj;function FRj(A,j){var e=QtA(A)||WRj(A)?zzj(A.length,String):[],t=e.length,r=!!t;for(var a in A)(j||ag.call(A,a))&&!(r&&(a=="length"||JRj(a,t)))&&e.push(a);return e}function RHA(A,j,e){var t=A[j];(!(ag.call(A,j)&&VHA(t,e))||e===void 0&&!(j in A))&&(A[j]=e)}function y5(A,j){for(var e=A.length;e--;)if(VHA(A[e][0],j))return e;return-1}function bRj(A,j){return A&&JHA(j,ZtA(j),A)}function JtA(A,j,e,t,r,a,n){var o;if(t&&(o=a?t(A,r,a,n):t(A)),o!==void 0)return o;if(!w5(A))return A;var i=QtA(A);if(i){if(o=NRj(A),!j)return MRj(A,o)}else{var s=rv(A),l=s==XtA||s==FHA;if(QRj(A))return ORj(A,j);if(s==VtA||s==UtA||l&&!a){if(NHA(A))return a?A:{};if(o=zRj(l?{}:A),!j)return _Rj(A,bRj(o,A))}else{if(!E6[s])return a?A:{};o=RRj(A,s,JtA,j)}}n||(n=new yF);var d=n.get(A);if(d)return d;if(n.set(A,o),!i)var k=e?LRj(A):ZtA(A);return Lzj(k||A,function(u,m){k&&(m=u,u=A[m]),RHA(o,m,JtA(u,j,e,t,m,A,n))}),o}function yRj(A){return w5(A)?Wzj(A):{}}function $Rj(A,j,e){var t=j(A);return QtA(A)?t:Nzj(t,e(A))}function wRj(A){return b5.call(A)}function IRj(A){if(!w5(A)||XRj(A))return!1;var j=YHA(A)||NHA(A)?Xzj:Czj;return j.test(nv(A))}function DRj(A){if(!XHA(A))return ARj(A);var j=[];for(var e in Object(A))ag.call(A,e)&&e!="constructor"&&j.push(e);return j}function ORj(A,j){if(j)return A.slice();var e=new A.constructor(A.length);return A.copy(e),e}function YtA(A){var j=new A.constructor(A.byteLength);return new BHA(j).set(new BHA(A)),j}function PRj(A,j){var e=j?YtA(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.byteLength)}function CRj(A,j,e){var t=j?e(kHA(A),!0):kHA(A);return LHA(t,Mzj,new A.constructor)}function HRj(A){var j=new A.constructor(A.source,Pzj.exec(A));return j.lastIndex=A.lastIndex,j}function TRj(A,j,e){var t=j?e(uHA(A),!0):uHA(A);return LHA(t,_zj,new A.constructor)}function KRj(A){return qHA?Object(qHA.call(A)):{}}function SRj(A,j){var e=j?YtA(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.length)}function MRj(A,j){var e=-1,t=A.length;for(j||(j=Array(t));++e<t;)j[e]=A[e];return j}function JHA(A,j,e,t){e||(e={});for(var r=-1,a=j.length;++r<a;){var n=j[r],o=t?t(e[n],A[n],n,e,A):void 0;RHA(e,n,o===void 0?A[n]:o)}return e}function _Rj(A,j){return JHA(A,UHA(A),j)}function LRj(A){return $Rj(A,ZtA,UHA)}function $5(A,j){var e=A.__data__;return URj(j)?e[typeof j=="string"?"string":"hash"]:e.map}function $F(A,j){var e=Rzj(A,j);return IRj(e)?e:void 0}var UHA=gHA?WtA(gHA,Object):jJj,rv=wRj;(LtA&&rv(new LtA(new ArrayBuffer(1)))!=G5||VI&&rv(new VI)!=x5||NtA&&rv(NtA.resolve())!=cHA||ztA&&rv(new ztA)!=f5||RtA&&rv(new RtA)!=_tA)&&(rv=function(A){var j=b5.call(A),e=j==VtA?A.constructor:void 0,t=e?nv(e):void 0;if(t)switch(t){case jRj:return G5;case eRj:return x5;case tRj:return cHA;case rRj:return f5;case aRj:return _tA}return j});function NRj(A){var j=A.length,e=A.constructor(j);return j&&typeof A[0]=="string"&&ag.call(A,"index")&&(e.index=A.index,e.input=A.input),e}function zRj(A){return typeof A.constructor=="function"&&!XHA(A)?yRj(Vzj(A)):{}}function RRj(A,j,e,t){var r=A.constructor;switch(j){case IHA:return YtA(A);case fHA:case GHA:return new r(+A);case G5:return PRj(A,t);case DHA:case OHA:case PHA:case CHA:case HHA:case THA:case KHA:case SHA:case MHA:return SRj(A,t);case x5:return CRj(A,t,e);case bHA:case $HA:return new r(A);case yHA:return HRj(A);case f5:return TRj(A,t,e);case wHA:return KRj(A)}}function JRj(A,j){return j=j??xHA,!!j&&(typeof A=="number"||Hzj.test(A))&&A>-1&&A%1==0&&A<j}function URj(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function XRj(A){return!!pHA&&pHA in A}function XHA(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||F5;return A===e}function nv(A){if(A!=null){try{return zHA.call(A)}catch{}try{return A+""}catch{}}return""}function VRj(A){return JtA(A,!0,!0)}function VHA(A,j){return A===j||A!==A&&j!==j}function WRj(A){return YRj(A)&&ag.call(A,"callee")&&(!Yzj.call(A,"callee")||b5.call(A)==UtA)}var QtA=Array.isArray;function WHA(A){return A!=null&&ZRj(A.length)&&!YHA(A)}function YRj(A){return AJj(A)&&WHA(A)}var QRj=Zzj||eJj;function YHA(A){var j=w5(A)?b5.call(A):"";return j==XtA||j==FHA}function ZRj(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=xHA}function w5(A){var j=typeof A;return!!A&&(j=="object"||j=="function")}function AJj(A){return!!A&&typeof A=="object"}function ZtA(A){return WHA(A)?FRj(A):DRj(A)}function jJj(){return[]}function eJj(){return!1}FF.exports=VRj});var iM=OA((GD,Ab)=>{var kVj=200,WaA="__lodash_hash_undefined__",rM=1,vMA=2,xMA=9007199254740991,YS="[object Arguments]",NaA="[object Array]",uVj="[object AsyncFunction]",fMA="[object Boolean]",GMA="[object Date]",FMA="[object Error]",bMA="[object Function]",pVj="[object GeneratorFunction]",QS="[object Map]",yMA="[object Number]",mVj="[object Null]",ZF="[object Object]",cMA="[object Promise]",EVj="[object Proxy]",$MA="[object RegExp]",ZS="[object Set]",wMA="[object String]",BVj="[object Symbol]",gVj="[object Undefined]",zaA="[object WeakMap]",IMA="[object ArrayBuffer]",AM="[object DataView]",hVj="[object Float32Array]",qVj="[object Float64Array]",vVj="[object Int8Array]",xVj="[object Int16Array]",fVj="[object Int32Array]",GVj="[object Uint8Array]",FVj="[object Uint8ClampedArray]",bVj="[object Uint16Array]",yVj="[object Uint32Array]",$Vj=/[\\^$.*+?()[\]{}|]/g,wVj=/^\[object .+?Constructor\]$/,IVj=/^(?:0|[1-9]\d*)$/,I6={};I6[hVj]=I6[qVj]=I6[vVj]=I6[xVj]=I6[fVj]=I6[GVj]=I6[FVj]=I6[bVj]=I6[yVj]=!0;I6[YS]=I6[NaA]=I6[IMA]=I6[fMA]=I6[AM]=I6[GMA]=I6[FMA]=I6[bMA]=I6[QS]=I6[yMA]=I6[ZF]=I6[$MA]=I6[ZS]=I6[wMA]=I6[zaA]=!1;var DMA=typeof global=="object"&&global&&global.Object===Object&&global,DVj=typeof self=="object"&&self&&self.Object===Object&&self,Vm=DMA||DVj||Function("return this")(),OMA=typeof GD=="object"&&GD&&!GD.nodeType&&GD,dMA=OMA&&typeof Ab=="object"&&Ab&&!Ab.nodeType&&Ab,PMA=dMA&&dMA.exports===OMA,MaA=PMA&&DMA.process,kMA=function(){try{return MaA&&MaA.binding&&MaA.binding("util")}catch{}}(),uMA=kMA&&kMA.isTypedArray;function OVj(A,j){for(var e=-1,t=A==null?0:A.length,r=0,a=[];++e<t;){var n=A[e];j(n,e,A)&&(a[r++]=n)}return a}function PVj(A,j){for(var e=-1,t=j.length,r=A.length;++e<t;)A[r+e]=j[e];return A}function CVj(A,j){for(var e=-1,t=A==null?0:A.length;++e<t;)if(j(A[e],e,A))return!0;return!1}function HVj(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function TVj(A){return function(j){return A(j)}}function KVj(A,j){return A.has(j)}function SVj(A,j){return A?.[j]}function MVj(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}function _Vj(A,j){return function(e){return A(j(e))}}function LVj(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var NVj=Array.prototype,zVj=Function.prototype,aM=Object.prototype,_aA=Vm["__core-js_shared__"],CMA=zVj.toString,op=aM.hasOwnProperty,pMA=function(){var A=/[^.]+$/.exec(_aA&&_aA.keys&&_aA.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),HMA=aM.toString,RVj=RegExp("^"+CMA.call(op).replace($Vj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mMA=PMA?Vm.Buffer:void 0,jM=Vm.Symbol,EMA=Vm.Uint8Array,TMA=aM.propertyIsEnumerable,JVj=NVj.splice,xv=jM?jM.toStringTag:void 0,BMA=Object.getOwnPropertySymbols,UVj=mMA?mMA.isBuffer:void 0,XVj=_Vj(Object.keys,Object),RaA=jb(Vm,"DataView"),FD=jb(Vm,"Map"),JaA=jb(Vm,"Promise"),UaA=jb(Vm,"Set"),XaA=jb(Vm,"WeakMap"),bD=jb(Object,"create"),VVj=Fv(RaA),WVj=Fv(FD),YVj=Fv(JaA),QVj=Fv(UaA),ZVj=Fv(XaA),gMA=jM?jM.prototype:void 0,LaA=gMA?gMA.valueOf:void 0;function fv(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function AWj(){this.__data__=bD?bD(null):{},this.size=0}function jWj(A){var j=this.has(A)&&delete this.__data__[A];return this.size-=j?1:0,j}function eWj(A){var j=this.__data__;if(bD){var e=j[A];return e===WaA?void 0:e}return op.call(j,A)?j[A]:void 0}function tWj(A){var j=this.__data__;return bD?j[A]!==void 0:op.call(j,A)}function rWj(A,j){var e=this.__data__;return this.size+=this.has(A)?0:1,e[A]=bD&&j===void 0?WaA:j,this}fv.prototype.clear=AWj;fv.prototype.delete=jWj;fv.prototype.get=eWj;fv.prototype.has=tWj;fv.prototype.set=rWj;function Wm(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function aWj(){this.__data__=[],this.size=0}function nWj(A){var j=this.__data__,e=nM(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():JVj.call(j,e,1),--this.size,!0}function oWj(A){var j=this.__data__,e=nM(j,A);return e<0?void 0:j[e][1]}function iWj(A){return nM(this.__data__,A)>-1}function sWj(A,j){var e=this.__data__,t=nM(e,A);return t<0?(++this.size,e.push([A,j])):e[t][1]=j,this}Wm.prototype.clear=aWj;Wm.prototype.delete=nWj;Wm.prototype.get=oWj;Wm.prototype.has=iWj;Wm.prototype.set=sWj;function Gv(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function lWj(){this.size=0,this.__data__={hash:new fv,map:new(FD||Wm),string:new fv}}function cWj(A){var j=oM(this,A).delete(A);return this.size-=j?1:0,j}function dWj(A){return oM(this,A).get(A)}function kWj(A){return oM(this,A).has(A)}function uWj(A,j){var e=oM(this,A),t=e.size;return e.set(A,j),this.size+=e.size==t?0:1,this}Gv.prototype.clear=lWj;Gv.prototype.delete=cWj;Gv.prototype.get=dWj;Gv.prototype.has=kWj;Gv.prototype.set=uWj;function eM(A){var j=-1,e=A==null?0:A.length;for(this.__data__=new Gv;++j<e;)this.add(A[j])}function pWj(A){return this.__data__.set(A,WaA),this}function mWj(A){return this.__data__.has(A)}eM.prototype.add=eM.prototype.push=pWj;eM.prototype.has=mWj;function Gg(A){var j=this.__data__=new Wm(A);this.size=j.size}function EWj(){this.__data__=new Wm,this.size=0}function BWj(A){var j=this.__data__,e=j.delete(A);return this.size=j.size,e}function gWj(A){return this.__data__.get(A)}function hWj(A){return this.__data__.has(A)}function qWj(A,j){var e=this.__data__;if(e instanceof Wm){var t=e.__data__;if(!FD||t.length<kVj-1)return t.push([A,j]),this.size=++e.size,this;e=this.__data__=new Gv(t)}return e.set(A,j),this.size=e.size,this}Gg.prototype.clear=EWj;Gg.prototype.delete=BWj;Gg.prototype.get=gWj;Gg.prototype.has=hWj;Gg.prototype.set=qWj;function vWj(A,j){var e=tM(A),t=!e&&TWj(A),r=!e&&!t&&VaA(A),a=!e&&!t&&!r&&zMA(A),n=e||t||r||a,o=n?HVj(A.length,String):[],i=o.length;for(var s in A)(j||op.call(A,s))&&!(n&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||DWj(s,i)))&&o.push(s);return o}function nM(A,j){for(var e=A.length;e--;)if(MMA(A[e][0],j))return e;return-1}function xWj(A,j,e){var t=j(A);return tM(A)?t:PVj(t,e(A))}function $D(A){return A==null?A===void 0?gVj:mVj:xv&&xv in Object(A)?wWj(A):HWj(A)}function hMA(A){return yD(A)&&$D(A)==YS}function KMA(A,j,e,t,r){return A===j?!0:A==null||j==null||!yD(A)&&!yD(j)?A!==A&&j!==j:fWj(A,j,e,t,KMA,r)}function fWj(A,j,e,t,r,a){var n=tM(A),o=tM(j),i=n?NaA:fg(A),s=o?NaA:fg(j);i=i==YS?ZF:i,s=s==YS?ZF:s;var l=i==ZF,d=s==ZF,k=i==s;if(k&&VaA(A)){if(!VaA(j))return!1;n=!0,l=!1}if(k&&!l)return a||(a=new Gg),n||zMA(A)?SMA(A,j,e,t,r,a):yWj(A,j,i,e,t,r,a);if(!(e&rM)){var u=l&&op.call(A,"__wrapped__"),m=d&&op.call(j,"__wrapped__");if(u||m){var I=u?A.value():A,S=m?j.value():j;return a||(a=new Gg),r(I,S,e,t,a)}}return k?(a||(a=new Gg),$Wj(A,j,e,t,r,a)):!1}function GWj(A){if(!NMA(A)||PWj(A))return!1;var j=_MA(A)?RVj:wVj;return j.test(Fv(A))}function FWj(A){return yD(A)&&LMA(A.length)&&!!I6[$D(A)]}function bWj(A){if(!CWj(A))return XVj(A);var j=[];for(var e in Object(A))op.call(A,e)&&e!="constructor"&&j.push(e);return j}function SMA(A,j,e,t,r,a){var n=e&rM,o=A.length,i=j.length;if(o!=i&&!(n&&i>o))return!1;var s=a.get(A);if(s&&a.get(j))return s==j;var l=-1,d=!0,k=e&vMA?new eM:void 0;for(a.set(A,j),a.set(j,A);++l<o;){var u=A[l],m=j[l];if(t)var I=n?t(m,u,l,j,A,a):t(u,m,l,A,j,a);if(I!==void 0){if(I)continue;d=!1;break}if(k){if(!CVj(j,function(S,f){if(!KVj(k,f)&&(u===S||r(u,S,e,t,a)))return k.push(f)})){d=!1;break}}else if(!(u===m||r(u,m,e,t,a))){d=!1;break}}return a.delete(A),a.delete(j),d}function yWj(A,j,e,t,r,a,n){switch(e){case AM:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case IMA:return!(A.byteLength!=j.byteLength||!a(new EMA(A),new EMA(j)));case fMA:case GMA:case yMA:return MMA(+A,+j);case FMA:return A.name==j.name&&A.message==j.message;case $MA:case wMA:return A==j+"";case QS:var o=MVj;case ZS:var i=t&rM;if(o||(o=LVj),A.size!=j.size&&!i)return!1;var s=n.get(A);if(s)return s==j;t|=vMA,n.set(A,j);var l=SMA(o(A),o(j),t,r,a,n);return n.delete(A),l;case BVj:if(LaA)return LaA.call(A)==LaA.call(j)}return!1}function $Wj(A,j,e,t,r,a){var n=e&rM,o=qMA(A),i=o.length,s=qMA(j),l=s.length;if(i!=l&&!n)return!1;for(var d=i;d--;){var k=o[d];if(!(n?k in j:op.call(j,k)))return!1}var u=a.get(A);if(u&&a.get(j))return u==j;var m=!0;a.set(A,j),a.set(j,A);for(var I=n;++d<i;){k=o[d];var S=A[k],f=j[k];if(t)var v=n?t(f,S,k,j,A,a):t(S,f,k,A,j,a);if(!(v===void 0?S===f||r(S,f,e,t,a):v)){m=!1;break}I||(I=k=="constructor")}if(m&&!I){var P=A.constructor,D=j.constructor;P!=D&&"constructor"in A&&"constructor"in j&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(m=!1)}return a.delete(A),a.delete(j),m}function qMA(A){return xWj(A,MWj,IWj)}function oM(A,j){var e=A.__data__;return OWj(j)?e[typeof j=="string"?"string":"hash"]:e.map}function jb(A,j){var e=SVj(A,j);return GWj(e)?e:void 0}function wWj(A){var j=op.call(A,xv),e=A[xv];try{A[xv]=void 0;var t=!0}catch{}var r=HMA.call(A);return t&&(j?A[xv]=e:delete A[xv]),r}var IWj=BMA?function(A){return A==null?[]:(A=Object(A),OVj(BMA(A),function(j){return TMA.call(A,j)}))}:_Wj,fg=$D;(RaA&&fg(new RaA(new ArrayBuffer(1)))!=AM||FD&&fg(new FD)!=QS||JaA&&fg(JaA.resolve())!=cMA||UaA&&fg(new UaA)!=ZS||XaA&&fg(new XaA)!=zaA)&&(fg=function(A){var j=$D(A),e=j==ZF?A.constructor:void 0,t=e?Fv(e):"";if(t)switch(t){case VVj:return AM;case WVj:return QS;case YVj:return cMA;case QVj:return ZS;case ZVj:return zaA}return j});function DWj(A,j){return j=j??xMA,!!j&&(typeof A=="number"||IVj.test(A))&&A>-1&&A%1==0&&A<j}function OWj(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function PWj(A){return!!pMA&&pMA in A}function CWj(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||aM;return A===e}function HWj(A){return HMA.call(A)}function Fv(A){if(A!=null){try{return CMA.call(A)}catch{}try{return A+""}catch{}}return""}function MMA(A,j){return A===j||A!==A&&j!==j}var TWj=hMA(function(){return arguments}())?hMA:function(A){return yD(A)&&op.call(A,"callee")&&!TMA.call(A,"callee")},tM=Array.isArray;function KWj(A){return A!=null&&LMA(A.length)&&!_MA(A)}var VaA=UVj||LWj;function SWj(A,j){return KMA(A,j)}function _MA(A){if(!NMA(A))return!1;var j=$D(A);return j==bMA||j==pVj||j==uVj||j==EVj}function LMA(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=xMA}function NMA(A){var j=typeof A;return A!=null&&(j=="object"||j=="function")}function yD(A){return A!=null&&typeof A=="object"}var zMA=uMA?TVj(uMA):FWj;function MWj(A){return KWj(A)?vWj(A):bWj(A)}function _Wj(){return[]}function LWj(){return!1}Ab.exports=SWj});var LLA=OA((t8,qb)=>{var BLA=200,ZZj="Expected a function",inA="__lodash_hash_undefined__",c2=1,xb=2,snA=1/0,gLA=9007199254740991,n2="[object Arguments]",jnA="[object Array]",hLA="[object Boolean]",qLA="[object Date]",vLA="[object Error]",xLA="[object Function]",AAe="[object GeneratorFunction]",o2="[object Map]",fLA="[object Number]",hb="[object Object]",sLA="[object Promise]",GLA="[object RegExp]",i2="[object Set]",FLA="[object String]",bLA="[object Symbol]",enA="[object WeakMap]",yLA="[object ArrayBuffer]",s2="[object DataView]",jAe="[object Float32Array]",eAe="[object Float64Array]",tAe="[object Int8Array]",rAe="[object Int16Array]",aAe="[object Int32Array]",nAe="[object Uint8Array]",oAe="[object Uint8ClampedArray]",iAe="[object Uint16Array]",sAe="[object Uint32Array]",lAe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cAe=/^\w*$/,dAe=/^\./,kAe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uAe=/[\\^$.*+?()[\]{}|]/g,pAe=/\\(\\)?/g,mAe=/^\[object .+?Constructor\]$/,EAe=/^(?:0|[1-9]\d*)$/,O6={};O6[jAe]=O6[eAe]=O6[tAe]=O6[rAe]=O6[aAe]=O6[nAe]=O6[oAe]=O6[iAe]=O6[sAe]=!0;O6[n2]=O6[jnA]=O6[yLA]=O6[hLA]=O6[s2]=O6[qLA]=O6[vLA]=O6[xLA]=O6[o2]=O6[fLA]=O6[hb]=O6[GLA]=O6[i2]=O6[FLA]=O6[enA]=!1;var $LA=typeof global=="object"&&global&&global.Object===Object&&global,BAe=typeof self=="object"&&self&&self.Object===Object&&self,Pg=$LA||BAe||Function("return this")(),wLA=typeof t8=="object"&&t8&&!t8.nodeType&&t8,lLA=wLA&&typeof qb=="object"&&qb&&!qb.nodeType&&qb,gAe=lLA&&lLA.exports===wLA,cLA=gAe&&$LA.process,dLA=function(){try{return cLA&&cLA.binding("util")}catch{}}(),kLA=dLA&&dLA.isTypedArray;function hAe(A,j){var e=A?A.length:0;return!!e&&fAe(A,j,0)>-1}function qAe(A,j,e){for(var t=-1,r=A?A.length:0;++t<r;)if(e(j,A[t]))return!0;return!1}function vAe(A,j){for(var e=-1,t=A?A.length:0;++e<t;)if(j(A[e],e,A))return!0;return!1}function xAe(A,j,e,t){for(var r=A.length,a=e+(t?1:-1);t?a--:++a<r;)if(j(A[a],a,A))return a;return-1}function fAe(A,j,e){if(j!==j)return xAe(A,GAe,e);for(var t=e-1,r=A.length;++t<r;)if(A[t]===j)return t;return-1}function GAe(A){return A!==A}function FAe(A){return function(j){return j?.[A]}}function bAe(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function yAe(A){return function(j){return A(j)}}function $Ae(A,j){return A.has(j)}function wAe(A,j){return A?.[j]}function tnA(A){var j=!1;if(A!=null&&typeof A.toString!="function")try{j=!!(A+"")}catch{}return j}function IAe(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}function DAe(A,j){return function(e){return A(j(e))}}function lnA(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var OAe=Array.prototype,PAe=Function.prototype,d2=Object.prototype,Z6A=Pg["__core-js_shared__"],uLA=function(){var A=/[^.]+$/.exec(Z6A&&Z6A.keys&&Z6A.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),ILA=PAe.toString,aE=d2.hasOwnProperty,fb=d2.toString,CAe=RegExp("^"+ILA.call(aE).replace(uAe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pLA=Pg.Symbol,mLA=Pg.Uint8Array,HAe=d2.propertyIsEnumerable,TAe=OAe.splice,KAe=DAe(Object.keys,Object),rnA=Gb(Pg,"DataView"),r8=Gb(Pg,"Map"),anA=Gb(Pg,"Promise"),vb=Gb(Pg,"Set"),nnA=Gb(Pg,"WeakMap"),a8=Gb(Object,"create"),SAe=Hv(rnA),MAe=Hv(r8),_Ae=Hv(anA),LAe=Hv(vb),NAe=Hv(nnA),l2=pLA?pLA.prototype:void 0,AnA=l2?l2.valueOf:void 0,ELA=l2?l2.toString:void 0;function Pv(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function zAe(){this.__data__=a8?a8(null):{}}function RAe(A){return this.has(A)&&delete this.__data__[A]}function JAe(A){var j=this.__data__;if(a8){var e=j[A];return e===inA?void 0:e}return aE.call(j,A)?j[A]:void 0}function UAe(A){var j=this.__data__;return a8?j[A]!==void 0:aE.call(j,A)}function XAe(A,j){var e=this.__data__;return e[A]=a8&&j===void 0?inA:j,this}Pv.prototype.clear=zAe;Pv.prototype.delete=RAe;Pv.prototype.get=JAe;Pv.prototype.has=UAe;Pv.prototype.set=XAe;function nE(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function VAe(){this.__data__=[]}function WAe(A){var j=this.__data__,e=k2(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():TAe.call(j,e,1),!0}function YAe(A){var j=this.__data__,e=k2(j,A);return e<0?void 0:j[e][1]}function QAe(A){return k2(this.__data__,A)>-1}function ZAe(A,j){var e=this.__data__,t=k2(e,A);return t<0?e.push([A,j]):e[t][1]=j,this}nE.prototype.clear=VAe;nE.prototype.delete=WAe;nE.prototype.get=YAe;nE.prototype.has=QAe;nE.prototype.set=ZAe;function oE(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function Aje(){this.__data__={hash:new Pv,map:new(r8||nE),string:new Pv}}function jje(A){return u2(this,A).delete(A)}function eje(A){return u2(this,A).get(A)}function tje(A){return u2(this,A).has(A)}function rje(A,j){return u2(this,A).set(A,j),this}oE.prototype.clear=Aje;oE.prototype.delete=jje;oE.prototype.get=eje;oE.prototype.has=tje;oE.prototype.set=rje;function n8(A){var j=-1,e=A?A.length:0;for(this.__data__=new oE;++j<e;)this.add(A[j])}function aje(A){return this.__data__.set(A,inA),this}function nje(A){return this.__data__.has(A)}n8.prototype.add=n8.prototype.push=aje;n8.prototype.has=nje;function rE(A){this.__data__=new nE(A)}function oje(){this.__data__=new nE}function ije(A){return this.__data__.delete(A)}function sje(A){return this.__data__.get(A)}function lje(A){return this.__data__.has(A)}function cje(A,j){var e=this.__data__;if(e instanceof nE){var t=e.__data__;if(!r8||t.length<BLA-1)return t.push([A,j]),this;e=this.__data__=new oE(t)}return e.set(A,j),this}rE.prototype.clear=oje;rE.prototype.delete=ije;rE.prototype.get=sje;rE.prototype.has=lje;rE.prototype.set=cje;function dje(A,j){var e=Cv(A)||SLA(A)?bAe(A.length,String):[],t=e.length,r=!!t;for(var a in A)(j||aE.call(A,a))&&!(r&&(a=="length"||CLA(a,t)))&&e.push(a);return e}function k2(A,j){for(var e=A.length;e--;)if(KLA(A[e][0],j))return e;return-1}function DLA(A,j){j=p2(j,A)?[j]:OLA(j);for(var e=0,t=j.length;A!=null&&e<t;)A=A[m2(j[e++])];return e&&e==t?A:void 0}function kje(A){return fb.call(A)}function uje(A,j){return A!=null&&j in Object(A)}function cnA(A,j,e,t,r){return A===j?!0:A==null||j==null||!E2(A)&&!B2(j)?A!==A&&j!==j:pje(A,j,cnA,e,t,r)}function pje(A,j,e,t,r,a){var n=Cv(A),o=Cv(j),i=jnA,s=jnA;n||(i=Og(A),i=i==n2?hb:i),o||(s=Og(j),s=s==n2?hb:s);var l=i==hb&&!tnA(A),d=s==hb&&!tnA(j),k=i==s;if(k&&!l)return a||(a=new rE),n||Tje(A)?PLA(A,j,e,t,r,a):bje(A,j,i,e,t,r,a);if(!(r&xb)){var u=l&&aE.call(A,"__wrapped__"),m=d&&aE.call(j,"__wrapped__");if(u||m){var I=u?A.value():A,S=m?j.value():j;return a||(a=new rE),e(I,S,t,r,a)}}return k?(a||(a=new rE),yje(A,j,e,t,r,a)):!1}function mje(A,j,e,t){var r=e.length,a=r,n=!t;if(A==null)return!a;for(A=Object(A);r--;){var o=e[r];if(n&&o[2]?o[1]!==A[o[0]]:!(o[0]in A))return!1}for(;++r<a;){o=e[r];var i=o[0],s=A[i],l=o[1];if(n&&o[2]){if(s===void 0&&!(i in A))return!1}else{var d=new rE;if(t)var k=t(s,l,i,A,j,d);if(!(k===void 0?cnA(l,s,t,c2|xb,d):k))return!1}}return!0}function Eje(A){if(!E2(A)||Dje(A))return!1;var j=_LA(A)||tnA(A)?CAe:mAe;return j.test(Hv(A))}function Bje(A){return B2(A)&&knA(A.length)&&!!O6[fb.call(A)]}function gje(A){return typeof A=="function"?A:A==null?_je:typeof A=="object"?Cv(A)?vje(A[0],A[1]):qje(A):Nje(A)}function hje(A){if(!Oje(A))return KAe(A);var j=[];for(var e in Object(A))aE.call(A,e)&&e!="constructor"&&j.push(e);return j}function qje(A){var j=$je(A);return j.length==1&&j[0][2]?TLA(j[0][0],j[0][1]):function(e){return e===A||mje(e,A,j)}}function vje(A,j){return p2(A)&&HLA(j)?TLA(m2(A),j):function(e){var t=Sje(e,A);return t===void 0&&t===j?Mje(e,A):cnA(j,t,void 0,c2|xb)}}function xje(A){return function(j){return DLA(j,A)}}function fje(A){if(typeof A=="string")return A;if(unA(A))return ELA?ELA.call(A):"";var j=A+"";return j=="0"&&1/A==-snA?"-0":j}function Gje(A,j,e){var t=-1,r=hAe,a=A.length,n=!0,o=[],i=o;if(e)n=!1,r=qAe;else if(a>=BLA){var s=j?null:Fje(A);if(s)return lnA(s);n=!1,r=$Ae,i=new n8}else i=j?[]:o;A:for(;++t<a;){var l=A[t],d=j?j(l):l;if(l=e||l!==0?l:0,n&&d===d){for(var k=i.length;k--;)if(i[k]===d)continue A;j&&i.push(d),o.push(l)}else r(i,d,e)||(i!==o&&i.push(d),o.push(l))}return o}function OLA(A){return Cv(A)?A:Pje(A)}var Fje=vb&&1/lnA(new vb([,-0]))[1]==snA?function(A){return new vb(A)}:Lje;function PLA(A,j,e,t,r,a){var n=r&xb,o=A.length,i=j.length;if(o!=i&&!(n&&i>o))return!1;var s=a.get(A);if(s&&a.get(j))return s==j;var l=-1,d=!0,k=r&c2?new n8:void 0;for(a.set(A,j),a.set(j,A);++l<o;){var u=A[l],m=j[l];if(t)var I=n?t(m,u,l,j,A,a):t(u,m,l,A,j,a);if(I!==void 0){if(I)continue;d=!1;break}if(k){if(!vAe(j,function(S,f){if(!k.has(f)&&(u===S||e(u,S,t,r,a)))return k.add(f)})){d=!1;break}}else if(!(u===m||e(u,m,t,r,a))){d=!1;break}}return a.delete(A),a.delete(j),d}function bje(A,j,e,t,r,a,n){switch(e){case s2:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case yLA:return!(A.byteLength!=j.byteLength||!t(new mLA(A),new mLA(j)));case hLA:case qLA:case fLA:return KLA(+A,+j);case vLA:return A.name==j.name&&A.message==j.message;case GLA:case FLA:return A==j+"";case o2:var o=IAe;case i2:var i=a&xb;if(o||(o=lnA),A.size!=j.size&&!i)return!1;var s=n.get(A);if(s)return s==j;a|=c2,n.set(A,j);var l=PLA(o(A),o(j),t,r,a,n);return n.delete(A),l;case bLA:if(AnA)return AnA.call(A)==AnA.call(j)}return!1}function yje(A,j,e,t,r,a){var n=r&xb,o=onA(A),i=o.length,s=onA(j),l=s.length;if(i!=l&&!n)return!1;for(var d=i;d--;){var k=o[d];if(!(n?k in j:aE.call(j,k)))return!1}var u=a.get(A);if(u&&a.get(j))return u==j;var m=!0;a.set(A,j),a.set(j,A);for(var I=n;++d<i;){k=o[d];var S=A[k],f=j[k];if(t)var v=n?t(f,S,k,j,A,a):t(S,f,k,A,j,a);if(!(v===void 0?S===f||e(S,f,t,r,a):v)){m=!1;break}I||(I=k=="constructor")}if(m&&!I){var P=A.constructor,D=j.constructor;P!=D&&"constructor"in A&&"constructor"in j&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(m=!1)}return a.delete(A),a.delete(j),m}function u2(A,j){var e=A.__data__;return Ije(j)?e[typeof j=="string"?"string":"hash"]:e.map}function $je(A){for(var j=onA(A),e=j.length;e--;){var t=j[e],r=A[t];j[e]=[t,r,HLA(r)]}return j}function Gb(A,j){var e=wAe(A,j);return Eje(e)?e:void 0}var Og=kje;(rnA&&Og(new rnA(new ArrayBuffer(1)))!=s2||r8&&Og(new r8)!=o2||anA&&Og(anA.resolve())!=sLA||vb&&Og(new vb)!=i2||nnA&&Og(new nnA)!=enA)&&(Og=function(A){var j=fb.call(A),e=j==hb?A.constructor:void 0,t=e?Hv(e):void 0;if(t)switch(t){case SAe:return s2;case MAe:return o2;case _Ae:return sLA;case LAe:return i2;case NAe:return enA}return j});function wje(A,j,e){j=p2(j,A)?[j]:OLA(j);for(var t,r=-1,n=j.length;++r<n;){var a=m2(j[r]);if(!(t=A!=null&&e(A,a)))break;A=A[a]}if(t)return t;var n=A?A.length:0;return!!n&&knA(n)&&CLA(a,n)&&(Cv(A)||SLA(A))}function CLA(A,j){return j=j??gLA,!!j&&(typeof A=="number"||EAe.test(A))&&A>-1&&A%1==0&&A<j}function p2(A,j){if(Cv(A))return!1;var e=typeof A;return e=="number"||e=="symbol"||e=="boolean"||A==null||unA(A)?!0:cAe.test(A)||!lAe.test(A)||j!=null&&A in Object(j)}function Ije(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function Dje(A){return!!uLA&&uLA in A}function Oje(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||d2;return A===e}function HLA(A){return A===A&&!E2(A)}function TLA(A,j){return function(e){return e==null?!1:e[A]===j&&(j!==void 0||A in Object(e))}}var Pje=dnA(function(A){A=Kje(A);var j=[];return dAe.test(A)&&j.push(""),A.replace(kAe,function(e,t,r,a){j.push(r?a.replace(pAe,"$1"):t||e)}),j});function m2(A){if(typeof A=="string"||unA(A))return A;var j=A+"";return j=="0"&&1/A==-snA?"-0":j}function Hv(A){if(A!=null){try{return ILA.call(A)}catch{}try{return A+""}catch{}}return""}function Cje(A,j){return A&&A.length?Gje(A,gje(j,2)):[]}function dnA(A,j){if(typeof A!="function"||j&&typeof j!="function")throw new TypeError(ZZj);var e=function(){var t=arguments,r=j?j.apply(this,t):t[0],a=e.cache;if(a.has(r))return a.get(r);var n=A.apply(this,t);return e.cache=a.set(r,n),n};return e.cache=new(dnA.Cache||oE),e}dnA.Cache=oE;function KLA(A,j){return A===j||A!==A&&j!==j}function SLA(A){return Hje(A)&&aE.call(A,"callee")&&(!HAe.call(A,"callee")||fb.call(A)==n2)}var Cv=Array.isArray;function MLA(A){return A!=null&&knA(A.length)&&!_LA(A)}function Hje(A){return B2(A)&&MLA(A)}function _LA(A){var j=E2(A)?fb.call(A):"";return j==xLA||j==AAe}function knA(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=gLA}function E2(A){var j=typeof A;return!!A&&(j=="object"||j=="function")}function B2(A){return!!A&&typeof A=="object"}function unA(A){return typeof A=="symbol"||B2(A)&&fb.call(A)==bLA}var Tje=kLA?yAe(kLA):Bje;function Kje(A){return A==null?"":fje(A)}function Sje(A,j,e){var t=A==null?void 0:DLA(A,j);return t===void 0?e:t}function Mje(A,j){return A!=null&&wje(A,j,uje)}function onA(A){return MLA(A)?dje(A):hje(A)}function _je(A){return A}function Lje(){}function Nje(A){return p2(A)?FAe(m2(A)):xje(A)}qb.exports=Cje});var ZNA=OA((p8,InA)=>{(function(j,e){typeof p8=="object"&&typeof InA=="object"?InA.exports=e():typeof define=="function"&&define.amd?define([],e):typeof p8=="object"?p8.jsQR=e():j.jsQR=e()})(typeof self<"u"?self:p8,function(){return function(A){var j={};function e(t){if(j[t])return j[t].exports;var r=j[t]={i:t,l:!1,exports:{}};return A[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=A,e.c=j,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=3)}([function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=function(){function r(a,n){this.width=n,this.height=a.length/n,this.data=a}return r.createEmpty=function(a,n){return new r(new Uint8ClampedArray(a*n),a)},r.prototype.get=function(a,n){return a<0||a>=this.width||n<0||n>=this.height?!1:!!this.data[n*this.width+a]},r.prototype.set=function(a,n,o){this.data[n*this.width+a]=o?1:0},r.prototype.setRegion=function(a,n,o,i,s){for(var l=n;l<n+i;l++)for(var d=a;d<a+o;d++)this.set(d,l,!!s)},r}();j.BitMatrix=t},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(2);function r(n,o){return n^o}j.addOrSubtractGF=r;var a=function(){function n(o,i,s){this.primitive=o,this.size=i,this.generatorBase=s,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var l=1,d=0;d<this.size;d++)this.expTable[d]=l,l=l*2,l>=this.size&&(l=(l^this.primitive)&this.size-1);for(var d=0;d<this.size-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new t.default(this,Uint8ClampedArray.from([0])),this.one=new t.default(this,Uint8ClampedArray.from([1]))}return n.prototype.multiply=function(o,i){return o===0||i===0?0:this.expTable[(this.logTable[o]+this.logTable[i])%(this.size-1)]},n.prototype.inverse=function(o){if(o===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[o]-1]},n.prototype.buildMonomial=function(o,i){if(o<0)throw new Error("Invalid monomial degree less than 0");if(i===0)return this.zero;var s=new Uint8ClampedArray(o+1);return s[0]=i,new t.default(this,s)},n.prototype.log=function(o){if(o===0)throw new Error("Can't take log(0)");return this.logTable[o]},n.prototype.exp=function(o){return this.expTable[o]},n}();j.default=a},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(1),r=function(){function a(n,o){if(o.length===0)throw new Error("No coefficients.");this.field=n;var i=o.length;if(i>1&&o[0]===0){for(var s=1;s<i&&o[s]===0;)s++;if(s===i)this.coefficients=n.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(i-s);for(var l=0;l<this.coefficients.length;l++)this.coefficients[l]=o[s+l]}}else this.coefficients=o}return a.prototype.degree=function(){return this.coefficients.length-1},a.prototype.isZero=function(){return this.coefficients[0]===0},a.prototype.getCoefficient=function(n){return this.coefficients[this.coefficients.length-1-n]},a.prototype.addOrSubtract=function(n){var o;if(this.isZero())return n;if(n.isZero())return this;var i=this.coefficients,s=n.coefficients;i.length>s.length&&(o=[s,i],i=o[0],s=o[1]);for(var l=new Uint8ClampedArray(s.length),d=s.length-i.length,k=0;k<d;k++)l[k]=s[k];for(var k=d;k<s.length;k++)l[k]=t.addOrSubtractGF(i[k-d],s[k]);return new a(this.field,l)},a.prototype.multiply=function(n){if(n===0)return this.field.zero;if(n===1)return this;for(var o=this.coefficients.length,i=new Uint8ClampedArray(o),s=0;s<o;s++)i[s]=this.field.multiply(this.coefficients[s],n);return new a(this.field,i)},a.prototype.multiplyPoly=function(n){if(this.isZero()||n.isZero())return this.field.zero;for(var o=this.coefficients,i=o.length,s=n.coefficients,l=s.length,d=new Uint8ClampedArray(i+l-1),k=0;k<i;k++)for(var u=o[k],m=0;m<l;m++)d[k+m]=t.addOrSubtractGF(d[k+m],this.field.multiply(u,s[m]));return new a(this.field,d)},a.prototype.multiplyByMonomial=function(n,o){if(n<0)throw new Error("Invalid degree less than 0");if(o===0)return this.field.zero;for(var i=this.coefficients.length,s=new Uint8ClampedArray(i+n),l=0;l<i;l++)s[l]=this.field.multiply(this.coefficients[l],o);return new a(this.field,s)},a.prototype.evaluateAt=function(n){var o=0;if(n===0)return this.getCoefficient(0);var i=this.coefficients.length;if(n===1)return this.coefficients.forEach(function(l){o=t.addOrSubtractGF(o,l)}),o;o=this.coefficients[0];for(var s=1;s<i;s++)o=t.addOrSubtractGF(this.field.multiply(n,o),this.coefficients[s]);return o},a}();j.default=r},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(4),r=e(5),a=e(11),n=e(12);function o(l){var d=n.locate(l);if(!d)return null;for(var k=0,u=d;k<u.length;k++){var m=u[k],I=a.extract(l,m),S=r.decode(I.matrix);if(S)return{binaryData:S.bytes,data:S.text,chunks:S.chunks,version:S.version,location:{topRightCorner:I.mappingFunction(m.dimension,0),topLeftCorner:I.mappingFunction(0,0),bottomRightCorner:I.mappingFunction(m.dimension,m.dimension),bottomLeftCorner:I.mappingFunction(0,m.dimension),topRightFinderPattern:m.topRight,topLeftFinderPattern:m.topLeft,bottomLeftFinderPattern:m.bottomLeft,bottomRightAlignmentPattern:m.alignmentPattern}}}return null}var i={inversionAttempts:"attemptBoth"};function s(l,d,k,u){u===void 0&&(u={});var m=i;Object.keys(m||{}).forEach(function(C){m[C]=u[C]||m[C]});var I=m.inversionAttempts==="attemptBoth"||m.inversionAttempts==="invertFirst",S=m.inversionAttempts==="onlyInvert"||m.inversionAttempts==="invertFirst",f=t.binarize(l,d,k,I),v=f.binarized,P=f.inverted,D=o(S?P:v);return!D&&(m.inversionAttempts==="attemptBoth"||m.inversionAttempts==="invertFirst")&&(D=o(S?v:P)),D}s.default=s,j.default=s},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(0),r=8,a=24;function n(s,l,d){return s<l?l:s>d?d:s}var o=function(){function s(l,d){this.width=l,this.data=new Uint8ClampedArray(l*d)}return s.prototype.get=function(l,d){return this.data[d*this.width+l]},s.prototype.set=function(l,d,k){this.data[d*this.width+l]=k},s}();function i(s,l,d,k){if(s.length!==l*d*4)throw new Error("Malformed data passed to binarizer.");for(var u=new o(l,d),m=0;m<l;m++)for(var I=0;I<d;I++){var S=s[(I*l+m)*4+0],f=s[(I*l+m)*4+1],v=s[(I*l+m)*4+2];u.set(m,I,.2126*S+.7152*f+.0722*v)}for(var P=Math.ceil(l/r),D=Math.ceil(d/r),C=new o(P,D),b=0;b<D;b++)for(var h=0;h<P;h++){for(var O=0,V=1/0,Y=0,I=0;I<r;I++)for(var m=0;m<r;m++){var rA=u.get(h*r+m,b*r+I);O+=rA,V=Math.min(V,rA),Y=Math.max(Y,rA)}var yA=O/Math.pow(r,2);if(Y-V<=a&&(yA=V/2,b>0&&h>0)){var VA=(C.get(h,b-1)+2*C.get(h-1,b)+C.get(h-1,b-1))/4;V<VA&&(yA=VA)}C.set(h,b,yA)}var dj=t.BitMatrix.createEmpty(l,d),bA=null;k&&(bA=t.BitMatrix.createEmpty(l,d));for(var b=0;b<D;b++)for(var h=0;h<P;h++){for(var Mj=n(h,2,P-3),mj=n(b,2,D-3),O=0,ae=-2;ae<=2;ae++)for(var _j=-2;_j<=2;_j++)O+=C.get(Mj+ae,mj+_j);for(var cj=O/25,ae=0;ae<r;ae++)for(var _j=0;_j<r;_j++){var m=h*r+ae,I=b*r+_j,Qj=u.get(m,I);dj.set(m,I,Qj<=cj),k&&bA.set(m,I,!(Qj<=cj))}}return k?{binarized:dj,inverted:bA}:{binarized:dj}}j.binarize=i},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(0),r=e(6),a=e(9),n=e(10);function o(v,P){for(var D=v^P,C=0;D;)C++,D&=D-1;return C}function i(v,P){return P<<1|v}var s=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],l=[function(v){return(v.y+v.x)%2===0},function(v){return v.y%2===0},function(v){return v.x%3===0},function(v){return(v.y+v.x)%3===0},function(v){return(Math.floor(v.y/2)+Math.floor(v.x/3))%2===0},function(v){return v.x*v.y%2+v.x*v.y%3===0},function(v){return(v.y*v.x%2+v.y*v.x%3)%2===0},function(v){return((v.y+v.x)%2+v.y*v.x%3)%2===0}];function d(v){var P=17+4*v.versionNumber,D=t.BitMatrix.createEmpty(P,P);D.setRegion(0,0,9,9,!0),D.setRegion(P-8,0,8,9,!0),D.setRegion(0,P-8,9,8,!0);for(var C=0,b=v.alignmentPatternCenters;C<b.length;C++)for(var h=b[C],O=0,V=v.alignmentPatternCenters;O<V.length;O++){var Y=V[O];h===6&&Y===6||h===6&&Y===P-7||h===P-7&&Y===6||D.setRegion(h-2,Y-2,5,5,!0)}return D.setRegion(6,9,1,P-17,!0),D.setRegion(9,6,P-17,1,!0),v.versionNumber>6&&(D.setRegion(P-11,0,3,6,!0),D.setRegion(0,P-11,6,3,!0)),D}function k(v,P,D){for(var C=l[D.dataMask],b=v.height,h=d(P),O=[],V=0,Y=0,rA=!0,yA=b-1;yA>0;yA-=2){yA===6&&yA--;for(var VA=0;VA<b;VA++)for(var dj=rA?b-1-VA:VA,bA=0;bA<2;bA++){var Mj=yA-bA;if(!h.get(Mj,dj)){Y++;var mj=v.get(Mj,dj);C({y:dj,x:Mj})&&(mj=!mj),V=i(mj,V),Y===8&&(O.push(V),Y=0,V=0)}}rA=!rA}return O}function u(v){var P=v.height,D=Math.floor((P-17)/4);if(D<=6)return n.VERSIONS[D-1];for(var C=0,b=5;b>=0;b--)for(var h=P-9;h>=P-11;h--)C=i(v.get(h,b),C);for(var O=0,h=5;h>=0;h--)for(var b=P-9;b>=P-11;b--)O=i(v.get(h,b),O);for(var V=1/0,Y,rA=0,yA=n.VERSIONS;rA<yA.length;rA++){var VA=yA[rA];if(VA.infoBits===C||VA.infoBits===O)return VA;var dj=o(C,VA.infoBits);dj<V&&(Y=VA,V=dj),dj=o(O,VA.infoBits),dj<V&&(Y=VA,V=dj)}if(V<=3)return Y}function m(v){for(var P=0,D=0;D<=8;D++)D!==6&&(P=i(v.get(D,8),P));for(var C=7;C>=0;C--)C!==6&&(P=i(v.get(8,C),P));for(var b=v.height,h=0,C=b-1;C>=b-7;C--)h=i(v.get(8,C),h);for(var D=b-8;D<b;D++)h=i(v.get(D,8),h);for(var O=1/0,V=null,Y=0,rA=s;Y<rA.length;Y++){var yA=rA[Y],VA=yA.bits,dj=yA.formatInfo;if(VA===P||VA===h)return dj;var bA=o(P,VA);bA<O&&(V=dj,O=bA),P!==h&&(bA=o(h,VA),bA<O&&(V=dj,O=bA))}return O<=3?V:null}function I(v,P,D){var C=P.errorCorrectionLevels[D],b=[],h=0;if(C.ecBlocks.forEach(function(mj){for(var ae=0;ae<mj.numBlocks;ae++)b.push({numDataCodewords:mj.dataCodewordsPerBlock,codewords:[]}),h+=mj.dataCodewordsPerBlock+C.ecCodewordsPerBlock}),v.length<h)return null;v=v.slice(0,h);for(var O=C.ecBlocks[0].dataCodewordsPerBlock,V=0;V<O;V++)for(var Y=0,rA=b;Y<rA.length;Y++){var yA=rA[Y];yA.codewords.push(v.shift())}if(C.ecBlocks.length>1)for(var VA=C.ecBlocks[0].numBlocks,dj=C.ecBlocks[1].numBlocks,V=0;V<dj;V++)b[VA+V].codewords.push(v.shift());for(;v.length>0;)for(var bA=0,Mj=b;bA<Mj.length;bA++){var yA=Mj[bA];yA.codewords.push(v.shift())}return b}function S(v){var P=u(v);if(!P)return null;var D=m(v);if(!D)return null;var C=k(v,P,D),b=I(C,P,D.errorCorrectionLevel);if(!b)return null;for(var h=b.reduce(function(bA,Mj){return bA+Mj.numDataCodewords},0),O=new Uint8ClampedArray(h),V=0,Y=0,rA=b;Y<rA.length;Y++){var yA=rA[Y],VA=a.decode(yA.codewords,yA.codewords.length-yA.numDataCodewords);if(!VA)return null;for(var dj=0;dj<yA.numDataCodewords;dj++)O[V++]=VA[dj]}try{return r.decode(O,P.versionNumber)}catch{return null}}function f(v){if(v==null)return null;var P=S(v);if(P)return P;for(var D=0;D<v.width;D++)for(var C=D+1;C<v.height;C++)v.get(D,C)!==v.get(C,D)&&(v.set(D,C,!v.get(D,C)),v.set(C,D,!v.get(C,D)));return S(v)}j.decode=f},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(7),r=e(8),a;(function(u){u.Numeric="numeric",u.Alphanumeric="alphanumeric",u.Byte="byte",u.Kanji="kanji",u.ECI="eci"})(a=j.Mode||(j.Mode={}));var n;(function(u){u[u.Terminator=0]="Terminator",u[u.Numeric=1]="Numeric",u[u.Alphanumeric=2]="Alphanumeric",u[u.Byte=4]="Byte",u[u.Kanji=8]="Kanji",u[u.ECI=7]="ECI"})(n||(n={}));function o(u,m){for(var I=[],S="",f=[10,12,14][m],v=u.readBits(f);v>=3;){var P=u.readBits(10);if(P>=1e3)throw new Error("Invalid numeric value above 999");var D=Math.floor(P/100),C=Math.floor(P/10)%10,b=P%10;I.push(48+D,48+C,48+b),S+=D.toString()+C.toString()+b.toString(),v-=3}if(v===2){var P=u.readBits(7);if(P>=100)throw new Error("Invalid numeric value above 99");var D=Math.floor(P/10),C=P%10;I.push(48+D,48+C),S+=D.toString()+C.toString()}else if(v===1){var P=u.readBits(4);if(P>=10)throw new Error("Invalid numeric value above 9");I.push(48+P),S+=P.toString()}return{bytes:I,text:S}}var i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(u,m){for(var I=[],S="",f=[9,11,13][m],v=u.readBits(f);v>=2;){var P=u.readBits(11),D=Math.floor(P/45),C=P%45;I.push(i[D].charCodeAt(0),i[C].charCodeAt(0)),S+=i[D]+i[C],v-=2}if(v===1){var D=u.readBits(6);I.push(i[D].charCodeAt(0)),S+=i[D]}return{bytes:I,text:S}}function l(u,m){for(var I=[],S="",f=[8,16,16][m],v=u.readBits(f),P=0;P<v;P++){var D=u.readBits(8);I.push(D)}try{S+=decodeURIComponent(I.map(function(C){return"%"+("0"+C.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:I,text:S}}function d(u,m){for(var I=[],S="",f=[8,10,12][m],v=u.readBits(f),P=0;P<v;P++){var D=u.readBits(13),C=Math.floor(D/192)<<8|D%192;C<7936?C+=33088:C+=49472,I.push(C>>8,C&255),S+=String.fromCharCode(r.shiftJISTable[C])}return{bytes:I,text:S}}function k(u,m){for(var I,S,f,v,P=new t.BitStream(u),D=m<=9?0:m<=26?1:2,C={text:"",bytes:[],chunks:[],version:m};P.available()>=4;){var b=P.readBits(4);if(b===n.Terminator)return C;if(b===n.ECI)P.readBits(1)===0?C.chunks.push({type:a.ECI,assignmentNumber:P.readBits(7)}):P.readBits(1)===0?C.chunks.push({type:a.ECI,assignmentNumber:P.readBits(14)}):P.readBits(1)===0?C.chunks.push({type:a.ECI,assignmentNumber:P.readBits(21)}):C.chunks.push({type:a.ECI,assignmentNumber:-1});else if(b===n.Numeric){var h=o(P,D);C.text+=h.text,(I=C.bytes).push.apply(I,h.bytes),C.chunks.push({type:a.Numeric,text:h.text})}else if(b===n.Alphanumeric){var O=s(P,D);C.text+=O.text,(S=C.bytes).push.apply(S,O.bytes),C.chunks.push({type:a.Alphanumeric,text:O.text})}else if(b===n.Byte){var V=l(P,D);C.text+=V.text,(f=C.bytes).push.apply(f,V.bytes),C.chunks.push({type:a.Byte,bytes:V.bytes,text:V.text})}else if(b===n.Kanji){var Y=d(P,D);C.text+=Y.text,(v=C.bytes).push.apply(v,Y.bytes),C.chunks.push({type:a.Kanji,bytes:Y.bytes,text:Y.text})}}if(P.available()===0||P.readBits(P.available())===0)return C}j.decode=k},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=function(){function r(a){this.byteOffset=0,this.bitOffset=0,this.bytes=a}return r.prototype.readBits=function(a){if(a<1||a>32||a>this.available())throw new Error("Cannot read "+a.toString()+" bits");var n=0;if(this.bitOffset>0){var o=8-this.bitOffset,i=a<o?a:o,s=o-i,l=255>>8-i<<s;n=(this.bytes[this.byteOffset]&l)>>s,a-=i,this.bitOffset+=i,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(a>0){for(;a>=8;)n=n<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,a-=8;if(a>0){var s=8-a,l=255>>s<<s;n=n<<a|(this.bytes[this.byteOffset]&l)>>s,this.bitOffset+=a}}return n},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}();j.BitStream=t},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(1),r=e(2);function a(s,l,d,k){var u;l.degree()<d.degree()&&(u=[d,l],l=u[0],d=u[1]);for(var m=l,I=d,S=s.zero,f=s.one;I.degree()>=k/2;){var v=m,P=S;if(m=I,S=f,m.isZero())return null;I=v;for(var D=s.zero,C=m.getCoefficient(m.degree()),b=s.inverse(C);I.degree()>=m.degree()&&!I.isZero();){var h=I.degree()-m.degree(),O=s.multiply(I.getCoefficient(I.degree()),b);D=D.addOrSubtract(s.buildMonomial(h,O)),I=I.addOrSubtract(m.multiplyByMonomial(h,O))}if(f=D.multiplyPoly(S).addOrSubtract(P),I.degree()>=m.degree())return null}var V=f.getCoefficient(0);if(V===0)return null;var Y=s.inverse(V);return[f.multiply(Y),I.multiply(Y)]}function n(s,l){var d=l.degree();if(d===1)return[l.getCoefficient(1)];for(var k=new Array(d),u=0,m=1;m<s.size&&u<d;m++)l.evaluateAt(m)===0&&(k[u]=s.inverse(m),u++);return u!==d?null:k}function o(s,l,d){for(var k=d.length,u=new Array(k),m=0;m<k;m++){for(var I=s.inverse(d[m]),S=1,f=0;f<k;f++)m!==f&&(S=s.multiply(S,t.addOrSubtractGF(1,s.multiply(d[f],I))));u[m]=s.multiply(l.evaluateAt(I),s.inverse(S)),s.generatorBase!==0&&(u[m]=s.multiply(u[m],I))}return u}function i(s,l){var d=new Uint8ClampedArray(s.length);d.set(s);for(var k=new t.default(285,256,0),u=new r.default(k,d),m=new Uint8ClampedArray(l),I=!1,S=0;S<l;S++){var f=u.evaluateAt(k.exp(S+k.generatorBase));m[m.length-1-S]=f,f!==0&&(I=!0)}if(!I)return d;var v=new r.default(k,m),P=a(k,k.buildMonomial(l,1),v,l);if(P===null)return null;var D=n(k,P[0]);if(D==null)return null;for(var C=o(k,P[1],D),b=0;b<D.length;b++){var h=d.length-1-k.log(D[b]);if(h<0)return null;d[h]=t.addOrSubtractGF(d[h],C[b])}return d}j.decode=i},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(0);function r(i,s,l,d){var k=i.x-s.x+l.x-d.x,u=i.y-s.y+l.y-d.y;if(k===0&&u===0)return{a11:s.x-i.x,a12:s.y-i.y,a13:0,a21:l.x-s.x,a22:l.y-s.y,a23:0,a31:i.x,a32:i.y,a33:1};var m=s.x-l.x,I=d.x-l.x,S=s.y-l.y,f=d.y-l.y,v=m*f-I*S,P=(k*f-I*u)/v,D=(m*u-k*S)/v;return{a11:s.x-i.x+P*s.x,a12:s.y-i.y+P*s.y,a13:P,a21:d.x-i.x+D*d.x,a22:d.y-i.y+D*d.y,a23:D,a31:i.x,a32:i.y,a33:1}}function a(i,s,l,d){var k=r(i,s,l,d);return{a11:k.a22*k.a33-k.a23*k.a32,a12:k.a13*k.a32-k.a12*k.a33,a13:k.a12*k.a23-k.a13*k.a22,a21:k.a23*k.a31-k.a21*k.a33,a22:k.a11*k.a33-k.a13*k.a31,a23:k.a13*k.a21-k.a11*k.a23,a31:k.a21*k.a32-k.a22*k.a31,a32:k.a12*k.a31-k.a11*k.a32,a33:k.a11*k.a22-k.a12*k.a21}}function n(i,s){return{a11:i.a11*s.a11+i.a21*s.a12+i.a31*s.a13,a12:i.a12*s.a11+i.a22*s.a12+i.a32*s.a13,a13:i.a13*s.a11+i.a23*s.a12+i.a33*s.a13,a21:i.a11*s.a21+i.a21*s.a22+i.a31*s.a23,a22:i.a12*s.a21+i.a22*s.a22+i.a32*s.a23,a23:i.a13*s.a21+i.a23*s.a22+i.a33*s.a23,a31:i.a11*s.a31+i.a21*s.a32+i.a31*s.a33,a32:i.a12*s.a31+i.a22*s.a32+i.a32*s.a33,a33:i.a13*s.a31+i.a23*s.a32+i.a33*s.a33}}function o(i,s){for(var l=a({x:3.5,y:3.5},{x:s.dimension-3.5,y:3.5},{x:s.dimension-6.5,y:s.dimension-6.5},{x:3.5,y:s.dimension-3.5}),d=r(s.topLeft,s.topRight,s.alignmentPattern,s.bottomLeft),k=n(d,l),u=t.BitMatrix.createEmpty(s.dimension,s.dimension),m=function(D,C){var b=k.a13*D+k.a23*C+k.a33;return{x:(k.a11*D+k.a21*C+k.a31)/b,y:(k.a12*D+k.a22*C+k.a32)/b}},I=0;I<s.dimension;I++)for(var S=0;S<s.dimension;S++){var f=S+.5,v=I+.5,P=m(f,v);u.set(S,I,i.get(Math.floor(P.x),Math.floor(P.y)))}return{matrix:u,mappingFunction:m}}j.extract=o},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=4,r=.5,a=1.5,n=function(f,v){return Math.sqrt(Math.pow(v.x-f.x,2)+Math.pow(v.y-f.y,2))};function o(f){return f.reduce(function(v,P){return v+P})}function i(f,v,P){var D,C,b,h,O=n(f,v),V=n(v,P),Y=n(f,P),rA,yA,VA;return V>=O&&V>=Y?(D=[v,f,P],rA=D[0],yA=D[1],VA=D[2]):Y>=V&&Y>=O?(C=[f,v,P],rA=C[0],yA=C[1],VA=C[2]):(b=[f,P,v],rA=b[0],yA=b[1],VA=b[2]),(VA.x-yA.x)*(rA.y-yA.y)-(VA.y-yA.y)*(rA.x-yA.x)<0&&(h=[VA,rA],rA=h[0],VA=h[1]),{bottomLeft:rA,topLeft:yA,topRight:VA}}function s(f,v,P,D){var C=(o(d(f,P,D,5))/7+o(d(f,v,D,5))/7+o(d(P,f,D,5))/7+o(d(v,f,D,5))/7)/4;if(C<1)throw new Error("Invalid module size");var b=Math.round(n(f,v)/C),h=Math.round(n(f,P)/C),O=Math.floor((b+h)/2)+7;switch(O%4){case 0:O++;break;case 2:O--;break}return{dimension:O,moduleSize:C}}function l(f,v,P,D){var C=[{x:Math.floor(f.x),y:Math.floor(f.y)}],b=Math.abs(v.y-f.y)>Math.abs(v.x-f.x),h,O,V,Y;b?(h=Math.floor(f.y),O=Math.floor(f.x),V=Math.floor(v.y),Y=Math.floor(v.x)):(h=Math.floor(f.x),O=Math.floor(f.y),V=Math.floor(v.x),Y=Math.floor(v.y));for(var rA=Math.abs(V-h),yA=Math.abs(Y-O),VA=Math.floor(-rA/2),dj=h<V?1:-1,bA=O<Y?1:-1,Mj=!0,mj=h,ae=O;mj!==V+dj;mj+=dj){var _j=b?ae:mj,cj=b?mj:ae;if(P.get(_j,cj)!==Mj&&(Mj=!Mj,C.push({x:_j,y:cj}),C.length===D+1))break;if(VA+=yA,VA>0){if(ae===Y)break;ae+=bA,VA-=rA}}for(var Qj=[],Cj=0;Cj<D;Cj++)C[Cj]&&C[Cj+1]?Qj.push(n(C[Cj],C[Cj+1])):Qj.push(0);return Qj}function d(f,v,P,D){var C,b=v.y-f.y,h=v.x-f.x,O=l(f,v,P,Math.ceil(D/2)),V=l(f,{x:f.x-h,y:f.y-b},P,Math.ceil(D/2)),Y=O.shift()+V.shift()-1;return(C=V.concat(Y)).concat.apply(C,O)}function k(f,v){var P=o(f)/o(v),D=0;return v.forEach(function(C,b){D+=Math.pow(f[b]-C*P,2)}),{averageSize:P,error:D}}function u(f,v,P){try{var D=d(f,{x:-1,y:f.y},P,v.length),C=d(f,{x:f.x,y:-1},P,v.length),b={x:Math.max(0,f.x-f.y)-1,y:Math.max(0,f.y-f.x)-1},h=d(f,b,P,v.length),O={x:Math.min(P.width,f.x+f.y)+1,y:Math.min(P.height,f.y+f.x)+1},V=d(f,O,P,v.length),Y=k(D,v),rA=k(C,v),yA=k(h,v),VA=k(V,v),dj=Math.sqrt(Y.error*Y.error+rA.error*rA.error+yA.error*yA.error+VA.error*VA.error),bA=(Y.averageSize+rA.averageSize+yA.averageSize+VA.averageSize)/4,Mj=(Math.pow(Y.averageSize-bA,2)+Math.pow(rA.averageSize-bA,2)+Math.pow(yA.averageSize-bA,2)+Math.pow(VA.averageSize-bA,2))/bA;return dj+Mj}catch{return 1/0}}function m(f,v){for(var P=Math.round(v.x);f.get(P,Math.round(v.y));)P--;for(var D=Math.round(v.x);f.get(D,Math.round(v.y));)D++;for(var C=(P+D)/2,b=Math.round(v.y);f.get(Math.round(C),b);)b--;for(var h=Math.round(v.y);f.get(Math.round(C),h);)h++;var O=(b+h)/2;return{x:C,y:O}}function I(f){for(var v=[],P=[],D=[],C=[],b=function(_j){for(var cj=0,Qj=!1,Cj=[0,0,0,0,0],kj=function(De){var wt=f.get(De,_j);if(wt===Qj)cj++;else{Cj=[Cj[1],Cj[2],Cj[3],Cj[4],cj],cj=1,Qj=wt;var wj=o(Cj)/7,Bt=Math.abs(Cj[0]-wj)<wj&&Math.abs(Cj[1]-wj)<wj&&Math.abs(Cj[2]-3*wj)<3*wj&&Math.abs(Cj[3]-wj)<wj&&Math.abs(Cj[4]-wj)<wj&&!wt,Ye=o(Cj.slice(-3))/3,Ie=Math.abs(Cj[2]-Ye)<Ye&&Math.abs(Cj[3]-Ye)<Ye&&Math.abs(Cj[4]-Ye)<Ye&&wt;if(Bt){var Ee=De-Cj[3]-Cj[4],er=Ee-Cj[2],Vt={startX:er,endX:Ee,y:_j},yt=P.filter(function(yr){return er>=yr.bottom.startX&&er<=yr.bottom.endX||Ee>=yr.bottom.startX&&er<=yr.bottom.endX||er<=yr.bottom.startX&&Ee>=yr.bottom.endX&&Cj[2]/(yr.bottom.endX-yr.bottom.startX)<a&&Cj[2]/(yr.bottom.endX-yr.bottom.startX)>r});yt.length>0?yt[0].bottom=Vt:P.push({top:Vt,bottom:Vt})}if(Ie){var Sr=De-Cj[4],Dr=Sr-Cj[3],Vt={startX:Dr,y:_j,endX:Sr},yt=C.filter(function(at){return Dr>=at.bottom.startX&&Dr<=at.bottom.endX||Sr>=at.bottom.startX&&Dr<=at.bottom.endX||Dr<=at.bottom.startX&&Sr>=at.bottom.endX&&Cj[2]/(at.bottom.endX-at.bottom.startX)<a&&Cj[2]/(at.bottom.endX-at.bottom.startX)>r});yt.length>0?yt[0].bottom=Vt:C.push({top:Vt,bottom:Vt})}}},Bj=-1;Bj<=f.width;Bj++)kj(Bj);v.push.apply(v,P.filter(function(De){return De.bottom.y!==_j&&De.bottom.y-De.top.y>=2})),P=P.filter(function(De){return De.bottom.y===_j}),D.push.apply(D,C.filter(function(De){return De.bottom.y!==_j})),C=C.filter(function(De){return De.bottom.y===_j})},h=0;h<=f.height;h++)b(h);v.push.apply(v,P.filter(function(_j){return _j.bottom.y-_j.top.y>=2})),D.push.apply(D,C);var O=v.filter(function(_j){return _j.bottom.y-_j.top.y>=2}).map(function(_j){var cj=(_j.top.startX+_j.top.endX+_j.bottom.startX+_j.bottom.endX)/4,Qj=(_j.top.y+_j.bottom.y+1)/2;if(f.get(Math.round(cj),Math.round(Qj))){var Cj=[_j.top.endX-_j.top.startX,_j.bottom.endX-_j.bottom.startX,_j.bottom.y-_j.top.y+1],kj=o(Cj)/Cj.length,Bj=u({x:Math.round(cj),y:Math.round(Qj)},[1,1,3,1,1],f);return{score:Bj,x:cj,y:Qj,size:kj}}}).filter(function(_j){return!!_j}).sort(function(_j,cj){return _j.score-cj.score}).map(function(_j,cj,Qj){if(cj>t)return null;var Cj=Qj.filter(function(Bj,De){return cj!==De}).map(function(Bj){return{x:Bj.x,y:Bj.y,score:Bj.score+Math.pow(Bj.size-_j.size,2)/_j.size,size:Bj.size}}).sort(function(Bj,De){return Bj.score-De.score});if(Cj.length<2)return null;var kj=_j.score+Cj[0].score+Cj[1].score;return{points:[_j].concat(Cj.slice(0,2)),score:kj}}).filter(function(_j){return!!_j}).sort(function(_j,cj){return _j.score-cj.score});if(O.length===0)return null;var V=i(O[0].points[0],O[0].points[1],O[0].points[2]),Y=V.topRight,rA=V.topLeft,yA=V.bottomLeft,VA=S(f,D,Y,rA,yA),dj=[];VA&&dj.push({alignmentPattern:{x:VA.alignmentPattern.x,y:VA.alignmentPattern.y},bottomLeft:{x:yA.x,y:yA.y},dimension:VA.dimension,topLeft:{x:rA.x,y:rA.y},topRight:{x:Y.x,y:Y.y}});var bA=m(f,Y),Mj=m(f,rA),mj=m(f,yA),ae=S(f,D,bA,Mj,mj);return ae&&dj.push({alignmentPattern:{x:ae.alignmentPattern.x,y:ae.alignmentPattern.y},bottomLeft:{x:mj.x,y:mj.y},topLeft:{x:Mj.x,y:Mj.y},topRight:{x:bA.x,y:bA.y},dimension:ae.dimension}),dj.length===0?null:dj}j.locate=I;function S(f,v,P,D,C){var b,h,O;try{b=s(D,P,C,f),h=b.dimension,O=b.moduleSize}catch{return null}var V={x:P.x-D.x+C.x,y:P.y-D.y+C.y},Y=(n(D,C)+n(D,P))/2/O,rA=1-3/Y,yA={x:D.x+rA*(V.x-D.x),y:D.y+rA*(V.y-D.y)},VA=v.map(function(bA){var Mj=(bA.top.startX+bA.top.endX+bA.bottom.startX+bA.bottom.endX)/4,mj=(bA.top.y+bA.bottom.y+1)/2;if(f.get(Math.floor(Mj),Math.floor(mj))){var ae=[bA.top.endX-bA.top.startX,bA.bottom.endX-bA.bottom.startX,bA.bottom.y-bA.top.y+1],_j=o(ae)/ae.length,cj=u({x:Math.floor(Mj),y:Math.floor(mj)},[1,1,1],f),Qj=cj+n({x:Mj,y:mj},yA);return{x:Mj,y:mj,score:Qj}}}).filter(function(bA){return!!bA}).sort(function(bA,Mj){return bA.score-Mj.score}),dj=Y>=15&&VA.length?VA[0]:yA;return{alignmentPattern:dj,dimension:h}}}]).default})});var lRA=OA((v8,Db)=>{var ete=200,RzA="__lodash_hash_undefined__",tte=800,rte=16,JzA=9007199254740991,UzA="[object Arguments]",ate="[object Array]",nte="[object AsyncFunction]",ote="[object Boolean]",ite="[object Date]",ste="[object Error]",XzA="[object Function]",lte="[object GeneratorFunction]",cte="[object Map]",dte="[object Number]",kte="[object Null]",VzA="[object Object]",ute="[object Proxy]",pte="[object RegExp]",mte="[object Set]",Ete="[object String]",Bte="[object Undefined]",gte="[object WeakMap]",hte="[object ArrayBuffer]",qte="[object DataView]",vte="[object Float32Array]",xte="[object Float64Array]",fte="[object Int8Array]",Gte="[object Int16Array]",Fte="[object Int32Array]",bte="[object Uint8Array]",yte="[object Uint8ClampedArray]",$te="[object Uint16Array]",wte="[object Uint32Array]",Ite=/[\\^$.*+?()[\]{}|]/g,Dte=/^\[object .+?Constructor\]$/,Ote=/^(?:0|[1-9]\d*)$/,P6={};P6[vte]=P6[xte]=P6[fte]=P6[Gte]=P6[Fte]=P6[bte]=P6[yte]=P6[$te]=P6[wte]=!0;P6[UzA]=P6[ate]=P6[hte]=P6[ote]=P6[qte]=P6[ite]=P6[ste]=P6[XzA]=P6[cte]=P6[dte]=P6[VzA]=P6[pte]=P6[mte]=P6[Ete]=P6[gte]=!1;var WzA=typeof global=="object"&&global&&global.Object===Object&&global,Pte=typeof self=="object"&&self&&self.Object===Object&&self,G8=WzA||Pte||Function("return this")(),YzA=typeof v8=="object"&&v8&&!v8.nodeType&&v8,x8=YzA&&typeof Db=="object"&&Db&&!Db.nodeType&&Db,QzA=x8&&x8.exports===YzA,eoA=QzA&&WzA.process,HzA=function(){try{var A=x8&&x8.require&&x8.require("util").types;return A||eoA&&eoA.binding&&eoA.binding("util")}catch{}}(),TzA=HzA&&HzA.isTypedArray;function Cte(A,j,e){switch(e.length){case 0:return A.call(j);case 1:return A.call(j,e[0]);case 2:return A.call(j,e[0],e[1]);case 3:return A.call(j,e[0],e[1],e[2])}return A.apply(j,e)}function Hte(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function Tte(A){return function(j){return A(j)}}function Kte(A,j){return A?.[j]}function Ste(A,j){return function(e){return A(j(e))}}var Mte=Array.prototype,_te=Function.prototype,N2=Object.prototype,toA=G8["__core-js_shared__"],z2=_te.toString,cE=N2.hasOwnProperty,KzA=function(){var A=/[^.]+$/.exec(toA&&toA.keys&&toA.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),ZzA=N2.toString,Lte=z2.call(Object),Nte=RegExp("^"+z2.call(cE).replace(Ite,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_2=QzA?G8.Buffer:void 0,SzA=G8.Symbol,MzA=G8.Uint8Array,_zA=_2?_2.allocUnsafe:void 0,ARA=Ste(Object.getPrototypeOf,Object),LzA=Object.create,zte=N2.propertyIsEnumerable,Rte=Mte.splice,Mv=SzA?SzA.toStringTag:void 0,L2=function(){try{var A=soA(Object,"defineProperty");return A({},"",{}),A}catch{}}(),Jte=_2?_2.isBuffer:void 0,NzA=Math.max,Ute=Date.now,jRA=soA(G8,"Map"),f8=soA(Object,"create"),Xte=function(){function A(){}return function(j){if(!Lv(j))return{};if(LzA)return LzA(j);A.prototype=j;var e=new A;return A.prototype=void 0,e}}();function _v(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function Vte(){this.__data__=f8?f8(null):{},this.size=0}function Wte(A){var j=this.has(A)&&delete this.__data__[A];return this.size-=j?1:0,j}function Yte(A){var j=this.__data__;if(f8){var e=j[A];return e===RzA?void 0:e}return cE.call(j,A)?j[A]:void 0}function Qte(A){var j=this.__data__;return f8?j[A]!==void 0:cE.call(j,A)}function Zte(A,j){var e=this.__data__;return this.size+=this.has(A)?0:1,e[A]=f8&&j===void 0?RzA:j,this}_v.prototype.clear=Vte;_v.prototype.delete=Wte;_v.prototype.get=Yte;_v.prototype.has=Qte;_v.prototype.set=Zte;function dE(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function Are(){this.__data__=[],this.size=0}function jre(A){var j=this.__data__,e=R2(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():Rte.call(j,e,1),--this.size,!0}function ere(A){var j=this.__data__,e=R2(j,A);return e<0?void 0:j[e][1]}function tre(A){return R2(this.__data__,A)>-1}function rre(A,j){var e=this.__data__,t=R2(e,A);return t<0?(++this.size,e.push([A,j])):e[t][1]=j,this}dE.prototype.clear=Are;dE.prototype.delete=jre;dE.prototype.get=ere;dE.prototype.has=tre;dE.prototype.set=rre;function Ob(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function are(){this.size=0,this.__data__={hash:new _v,map:new(jRA||dE),string:new _v}}function nre(A){var j=U2(this,A).delete(A);return this.size-=j?1:0,j}function ore(A){return U2(this,A).get(A)}function ire(A){return U2(this,A).has(A)}function sre(A,j){var e=U2(this,A),t=e.size;return e.set(A,j),this.size+=e.size==t?0:1,this}Ob.prototype.clear=are;Ob.prototype.delete=nre;Ob.prototype.get=ore;Ob.prototype.has=ire;Ob.prototype.set=sre;function Pb(A){var j=this.__data__=new dE(A);this.size=j.size}function lre(){this.__data__=new dE,this.size=0}function cre(A){var j=this.__data__,e=j.delete(A);return this.size=j.size,e}function dre(A){return this.__data__.get(A)}function kre(A){return this.__data__.has(A)}function ure(A,j){var e=this.__data__;if(e instanceof dE){var t=e.__data__;if(!jRA||t.length<ete-1)return t.push([A,j]),this.size=++e.size,this;e=this.__data__=new Ob(t)}return e.set(A,j),this.size=e.size,this}Pb.prototype.clear=lre;Pb.prototype.delete=cre;Pb.prototype.get=dre;Pb.prototype.has=kre;Pb.prototype.set=ure;function pre(A,j){var e=ooA(A),t=!e&&noA(A),r=!e&&!t&&aRA(A),a=!e&&!t&&!r&&oRA(A),n=e||t||r||a,o=n?Hte(A.length,String):[],i=o.length;for(var s in A)(j||cE.call(A,s))&&!(n&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||tRA(s,i)))&&o.push(s);return o}function roA(A,j,e){(e!==void 0&&!X2(A[j],e)||e===void 0&&!(j in A))&&ioA(A,j,e)}function mre(A,j,e){var t=A[j];(!(cE.call(A,j)&&X2(t,e))||e===void 0&&!(j in A))&&ioA(A,j,e)}function R2(A,j){for(var e=A.length;e--;)if(X2(A[e][0],j))return e;return-1}function ioA(A,j,e){j=="__proto__"&&L2?L2(A,j,{configurable:!0,enumerable:!0,value:e,writable:!0}):A[j]=e}var Ere=wre();function J2(A){return A==null?A===void 0?Bte:kte:Mv&&Mv in Object(A)?Ire(A):Tre(A)}function zzA(A){return F8(A)&&J2(A)==UzA}function Bre(A){if(!Lv(A)||Cre(A))return!1;var j=coA(A)?Nte:Dte;return j.test(_re(A))}function gre(A){return F8(A)&&nRA(A.length)&&!!P6[J2(A)]}function hre(A){if(!Lv(A))return Hre(A);var j=rRA(A),e=[];for(var t in A)t=="constructor"&&(j||!cE.call(A,t))||e.push(t);return e}function eRA(A,j,e,t,r){A!==j&&Ere(j,function(a,n){if(r||(r=new Pb),Lv(a))qre(A,j,n,e,eRA,t,r);else{var o=t?t(aoA(A,n),a,n+"",A,j,r):void 0;o===void 0&&(o=a),roA(A,n,o)}},iRA)}function qre(A,j,e,t,r,a,n){var o=aoA(A,e),i=aoA(j,e),s=n.get(i);if(s){roA(A,e,s);return}var l=a?a(o,i,e+"",A,j,n):void 0,d=l===void 0;if(d){var k=ooA(i),u=!k&&aRA(i),m=!k&&!u&&oRA(i);l=i,k||u||m?ooA(o)?l=o:Lre(o)?l=bre(o):u?(d=!1,l=fre(i,!0)):m?(d=!1,l=Fre(i,!0)):l=[]:Nre(i)||noA(i)?(l=o,noA(o)?l=zre(o):(!Lv(o)||coA(o))&&(l=Dre(i))):d=!1}d&&(n.set(i,l),r(l,i,t,a,n),n.delete(i)),roA(A,e,l)}function vre(A,j){return Sre(Kre(A,j,sRA),A+"")}var xre=L2?function(A,j){return L2(A,"toString",{configurable:!0,enumerable:!1,value:Jre(j),writable:!0})}:sRA;function fre(A,j){if(j)return A.slice();var e=A.length,t=_zA?_zA(e):new A.constructor(e);return A.copy(t),t}function Gre(A){var j=new A.constructor(A.byteLength);return new MzA(j).set(new MzA(A)),j}function Fre(A,j){var e=j?Gre(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.length)}function bre(A,j){var e=-1,t=A.length;for(j||(j=Array(t));++e<t;)j[e]=A[e];return j}function yre(A,j,e,t){var r=!e;e||(e={});for(var a=-1,n=j.length;++a<n;){var o=j[a],i=t?t(e[o],A[o],o,e,A):void 0;i===void 0&&(i=A[o]),r?ioA(e,o,i):mre(e,o,i)}return e}function $re(A){return vre(function(j,e){var t=-1,r=e.length,a=r>1?e[r-1]:void 0,n=r>2?e[2]:void 0;for(a=A.length>3&&typeof a=="function"?(r--,a):void 0,n&&Ore(e[0],e[1],n)&&(a=r<3?void 0:a,r=1),j=Object(j);++t<r;){var o=e[t];o&&A(j,o,t,a)}return j})}function wre(A){return function(j,e,t){for(var r=-1,a=Object(j),n=t(j),o=n.length;o--;){var i=n[A?o:++r];if(e(a[i],i,a)===!1)break}return j}}function U2(A,j){var e=A.__data__;return Pre(j)?e[typeof j=="string"?"string":"hash"]:e.map}function soA(A,j){var e=Kte(A,j);return Bre(e)?e:void 0}function Ire(A){var j=cE.call(A,Mv),e=A[Mv];try{A[Mv]=void 0;var t=!0}catch{}var r=ZzA.call(A);return t&&(j?A[Mv]=e:delete A[Mv]),r}function Dre(A){return typeof A.constructor=="function"&&!rRA(A)?Xte(ARA(A)):{}}function tRA(A,j){var e=typeof A;return j=j??JzA,!!j&&(e=="number"||e!="symbol"&&Ote.test(A))&&A>-1&&A%1==0&&A<j}function Ore(A,j,e){if(!Lv(e))return!1;var t=typeof j;return(t=="number"?loA(e)&&tRA(j,e.length):t=="string"&&j in e)?X2(e[j],A):!1}function Pre(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function Cre(A){return!!KzA&&KzA in A}function rRA(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||N2;return A===e}function Hre(A){var j=[];if(A!=null)for(var e in Object(A))j.push(e);return j}function Tre(A){return ZzA.call(A)}function Kre(A,j,e){return j=NzA(j===void 0?A.length-1:j,0),function(){for(var t=arguments,r=-1,a=NzA(t.length-j,0),n=Array(a);++r<a;)n[r]=t[j+r];r=-1;for(var o=Array(j+1);++r<j;)o[r]=t[r];return o[j]=e(n),Cte(A,this,o)}}function aoA(A,j){if(!(j==="constructor"&&typeof A[j]=="function")&&j!="__proto__")return A[j]}var Sre=Mre(xre);function Mre(A){var j=0,e=0;return function(){var t=Ute(),r=rte-(t-e);if(e=t,r>0){if(++j>=tte)return arguments[0]}else j=0;return A.apply(void 0,arguments)}}function _re(A){if(A!=null){try{return z2.call(A)}catch{}try{return A+""}catch{}}return""}function X2(A,j){return A===j||A!==A&&j!==j}var noA=zzA(function(){return arguments}())?zzA:function(A){return F8(A)&&cE.call(A,"callee")&&!zte.call(A,"callee")},ooA=Array.isArray;function loA(A){return A!=null&&nRA(A.length)&&!coA(A)}function Lre(A){return F8(A)&&loA(A)}var aRA=Jte||Ure;function coA(A){if(!Lv(A))return!1;var j=J2(A);return j==XzA||j==lte||j==nte||j==ute}function nRA(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=JzA}function Lv(A){var j=typeof A;return A!=null&&(j=="object"||j=="function")}function F8(A){return A!=null&&typeof A=="object"}function Nre(A){if(!F8(A)||J2(A)!=VzA)return!1;var j=ARA(A);if(j===null)return!0;var e=cE.call(j,"constructor")&&j.constructor;return typeof e=="function"&&e instanceof e&&z2.call(e)==Lte}var oRA=TzA?Tte(TzA):gre;function zre(A){return yre(A,iRA(A))}function iRA(A){return loA(A)?pre(A,!0):hre(A)}var Rre=$re(function(A,j,e){eRA(A,j,e)});function Jre(A){return function(){return A}}function sRA(A){return A}function Ure(){return!1}Db.exports=Rre});var mRA=OA(Y2=>{"use strict";Object.defineProperty(Y2,"__esModule",{value:!0});Y2.GenericEntity=void 0;var W2=aA();Y2.GenericEntity=W2.exact(W2.type({schema:W2.string,data:W2.UnknownRecord}))});var ERA=OA(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.SnowplowDataJsonKeys=Qo.SnowplowEvent=Qo.SnowplowEventData=Qo.SnowplowUrl=Qo.Platform=Qo.EventType=void 0;var Wre=mRA(),Xa=aA(),hoA;(function(A){A.SelfDescribingEvent="ue",A.Unknown=""})(hoA=Qo.EventType||(Qo.EventType={}));var kE;(function(A){A.Web="web",A.Mobile="mob",A.Desktop="pc",A.ServerSide="srv",A.App="app",A.Tv="tv",A.GameConsole="cnsl",A.Thing="iot"})(kE=Qo.Platform||(Qo.Platform={}));var Q2;(function(A){A.UnstructuredEvent="iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",A.Context="iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",A.PayloadData="iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4"})(Q2=Qo.SnowplowUrl||(Qo.SnowplowUrl={}));var Yre=Xa.exact(Xa.type({schema:Xa.literal(Q2.UnstructuredEvent),data:Xa.record(Xa.string,Xa.any)})),Qre=Xa.exact(Xa.type({schema:Xa.literal(Q2.Context),data:Xa.array(Wre.GenericEntity)}));Qo.SnowplowEventData=Xa.exact(Xa.intersection([Xa.type({eventType:Xa.union([Xa.literal(hoA.SelfDescribingEvent),Xa.literal(hoA.Unknown)]),payload:Yre,platform:Xa.keyof({[kE.App]:void 0,[kE.Desktop]:void 0,[kE.GameConsole]:void 0,[kE.Mobile]:void 0,[kE.ServerSide]:void 0,[kE.Thing]:void 0,[kE.Tv]:void 0,[kE.Web]:void 0}),appId:Xa.string,trackerId:Xa.string,namespace:Xa.string,createdTimestamp:Xa.number}),Xa.partial({context:Qre,eventUuid:Xa.string,sentTimestamp:Xa.number})]));Qo.SnowplowEvent=Xa.exact(Xa.type({schema:Xa.literal(Q2.PayloadData),data:Xa.array(Qo.SnowplowEventData)}));Qo.SnowplowDataJsonKeys={eventType:"e",payload:"ue_pr",context:"co",platform:"p",appId:"aid",trackerId:"tv",namespace:"tna",eventUuid:"eid",createdTimestamp:"dtm",sentTimestamp:"stm"}});var BRA=OA(Hb=>{"use strict";Object.defineProperty(Hb,"__esModule",{value:!0});Hb.produceSnowplowJson=Hb.buildSnowplowEvent=void 0;var Cb=ERA();function Zre(A,j,e,t,r,a=Date.now(),n){let o={schema:Cb.SnowplowUrl.PayloadData,data:[{eventType:Cb.EventType.SelfDescribingEvent,payload:{schema:Cb.SnowplowUrl.UnstructuredEvent,data:t},context:r&&r.length>0?{schema:Cb.SnowplowUrl.Context,data:r}:null,platform:Cb.Platform.Web,appId:A,trackerId:j,namespace:e,eventUuid:n,createdTimestamp:a,sentTimestamp:Date.now()}]};return Object.freeze(o)}Hb.buildSnowplowEvent=Zre;function Aae(A){let j=jae(Cb.SnowplowDataJsonKeys,A.data[0]);return JSON.stringify({schema:A.schema,data:[j]})}Hb.produceSnowplowJson=Aae;var jae=(A,j)=>Object.keys(j).filter(e=>j[e]).reduce((e,t)=>({...e,[A[t]||t]:typeof j[t]=="string"?j[t]:JSON.stringify(j[t])}),{})});var hRA=OA(Tb=>{"use strict";Object.defineProperty(Tb,"__esModule",{value:!0});Tb.validateContexts=Tb.validateEvent=void 0;var gRA=Dn();function eae(A,j,e){let t=A[j],a={schema:t.type.props.schema.value,data:e},n=t.decode(a);if(gRA.isRight(n))return n.right;throw Error("Failed to validate event")}Tb.validateEvent=eae;function tae(A,j){let e=[];if(!(!j||j.length==0))return j.forEach(t=>{let r=A[t.contextType],n={schema:r.type.props.schema.value,data:t.data},o=r.decode(n);if(gRA.isRight(o))e.push(o.right);else throw Error(`Failed to validate context for ${String(t.contextType)}`)}),e}Tb.validateContexts=tae});var xRA=OA(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});Z2.SnowplowTracker=void 0;var qRA=BRA(),vRA=hRA(),qoA=class{constructor(j,e,t){this.config=j,this.allEvents=e,this.allContexts=t,this.config=j,this.allEvents=e,this.allContexts=t}async record(j,e,t){try{let r=(0,vRA.validateEvent)(this.allEvents,j,e),a=(0,vRA.validateContexts)(this.allContexts,t),n=(0,qRA.buildSnowplowEvent)(this.config.appId,this.config.trackerId,this.config.namespace,r,a),o=(0,qRA.produceSnowplowJson)(n);await this.sendToSnowplow(o)}catch(r){throw new Error(`{An error occurred during event recording. The event may not have been sent. Error Output: ${r}}`)}}async sendToSnowplow(j){await fetch(this.config.collectorUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:j})}};Z2.SnowplowTracker=qoA});var fRA=OA(A_=>{"use strict";Object.defineProperty(A_,"__esModule",{value:!0});A_.SnowplowTracker=void 0;var rae=xRA();Object.defineProperty(A_,"SnowplowTracker",{enumerable:!0,get:function(){return rae.SnowplowTracker}})});var piA;(function(A){(function(j){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),t=r(A);typeof e.Reflect>"u"?e.Reflect=A:t=r(e.Reflect,t),j(t);function r(a,n){return function(o,i){typeof a[o]!="function"&&Object.defineProperty(a,o,{configurable:!0,writable:!0,value:i}),n&&n(o,i)}}})(function(j){var e=Object.prototype.hasOwnProperty,t=typeof Symbol=="function",r=t&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=t&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",n=typeof Object.create=="function",o={__proto__:[]}instanceof Array,i=!n&&!o,s={create:n?function(){return je(Object.create(null))}:o?function(){return je({__proto__:null})}:function(){return je({})},has:i?function(oA,gA){return e.call(oA,gA)}:function(oA,gA){return gA in oA},get:i?function(oA,gA){return e.call(oA,gA)?oA[gA]:void 0}:function(oA,gA){return oA[gA]}},l=Object.getPrototypeOf(Function),d=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",k=!d&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:st(),u=!d&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:kr(),m=!d&&typeof WeakMap=="function"?WeakMap:Va(),I=new m;function S(oA,gA,KA,xj){if(Qj(KA)){if(!Ie(oA))throw new TypeError;if(!er(gA))throw new TypeError;return Y(oA,gA)}else{if(!Ie(oA))throw new TypeError;if(!Bj(gA))throw new TypeError;if(!Bj(xj)&&!Qj(xj)&&!Cj(xj))throw new TypeError;return Cj(xj)&&(xj=void 0),KA=Ye(KA),rA(oA,gA,KA,xj)}}j("decorate",S);function f(oA,gA){function KA(xj,gj){if(!Bj(xj))throw new TypeError;if(!Qj(gj)&&!Vt(gj))throw new TypeError;mj(oA,gA,xj,gj)}return KA}j("metadata",f);function v(oA,gA,KA,xj){if(!Bj(KA))throw new TypeError;return Qj(xj)||(xj=Ye(xj)),mj(oA,gA,KA,xj)}j("defineMetadata",v);function P(oA,gA,KA){if(!Bj(gA))throw new TypeError;return Qj(KA)||(KA=Ye(KA)),VA(oA,gA,KA)}j("hasMetadata",P);function D(oA,gA,KA){if(!Bj(gA))throw new TypeError;return Qj(KA)||(KA=Ye(KA)),dj(oA,gA,KA)}j("hasOwnMetadata",D);function C(oA,gA,KA){if(!Bj(gA))throw new TypeError;return Qj(KA)||(KA=Ye(KA)),bA(oA,gA,KA)}j("getMetadata",C);function b(oA,gA,KA){if(!Bj(gA))throw new TypeError;return Qj(KA)||(KA=Ye(KA)),Mj(oA,gA,KA)}j("getOwnMetadata",b);function h(oA,gA){if(!Bj(oA))throw new TypeError;return Qj(gA)||(gA=Ye(gA)),ae(oA,gA)}j("getMetadataKeys",h);function O(oA,gA){if(!Bj(oA))throw new TypeError;return Qj(gA)||(gA=Ye(gA)),_j(oA,gA)}j("getOwnMetadataKeys",O);function V(oA,gA,KA){if(!Bj(gA))throw new TypeError;Qj(KA)||(KA=Ye(KA));var xj=yA(gA,KA,!1);if(Qj(xj)||!xj.delete(oA))return!1;if(xj.size>0)return!0;var gj=I.get(gA);return gj.delete(KA),gj.size>0||I.delete(gA),!0}j("deleteMetadata",V);function Y(oA,gA){for(var KA=oA.length-1;KA>=0;--KA){var xj=oA[KA],gj=xj(gA);if(!Qj(gj)&&!Cj(gj)){if(!er(gj))throw new TypeError;gA=gj}}return gA}function rA(oA,gA,KA,xj){for(var gj=oA.length-1;gj>=0;--gj){var ve=oA[gj],uj=ve(gA,KA,xj);if(!Qj(uj)&&!Cj(uj)){if(!Bj(uj))throw new TypeError;xj=uj}}return xj}function yA(oA,gA,KA){var xj=I.get(oA);if(Qj(xj)){if(!KA)return;xj=new k,I.set(oA,xj)}var gj=xj.get(gA);if(Qj(gj)){if(!KA)return;gj=new k,xj.set(gA,gj)}return gj}function VA(oA,gA,KA){var xj=dj(oA,gA,KA);if(xj)return!0;var gj=at(gA);return Cj(gj)?!1:VA(oA,gj,KA)}function dj(oA,gA,KA){var xj=yA(gA,KA,!1);return Qj(xj)?!1:wj(xj.has(oA))}function bA(oA,gA,KA){var xj=dj(oA,gA,KA);if(xj)return Mj(oA,gA,KA);var gj=at(gA);if(!Cj(gj))return bA(oA,gj,KA)}function Mj(oA,gA,KA){var xj=yA(gA,KA,!1);if(!Qj(xj))return xj.get(oA)}function mj(oA,gA,KA,xj){var gj=yA(KA,xj,!0);gj.set(oA,gA)}function ae(oA,gA){var KA=_j(oA,gA),xj=at(oA);if(xj===null)return KA;var gj=ae(xj,gA);if(gj.length<=0)return KA;if(KA.length<=0)return gj;for(var ve=new u,uj=[],lA=0,eA=KA;lA<eA.length;lA++){var FA=eA[lA],Jj=ve.has(FA);Jj||(ve.add(FA),uj.push(FA))}for(var Er=0,cn=gj;Er<cn.length;Er++){var FA=cn[Er],Jj=ve.has(FA);Jj||(ve.add(FA),uj.push(FA))}return uj}function _j(oA,gA){var KA=[],xj=yA(oA,gA,!1);if(Qj(xj))return KA;for(var gj=xj.keys(),ve=Sr(gj),uj=0;;){var lA=yr(ve);if(!lA)return KA.length=uj,KA;var eA=Dr(lA);try{KA[uj]=eA}catch(FA){try{ra(ve)}finally{throw FA}}uj++}}function cj(oA){if(oA===null)return 1;switch(typeof oA){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return oA===null?1:6;default:return 6}}function Qj(oA){return oA===void 0}function Cj(oA){return oA===null}function kj(oA){return typeof oA=="symbol"}function Bj(oA){return typeof oA=="object"?oA!==null:typeof oA=="function"}function De(oA,gA){switch(cj(oA)){case 0:return oA;case 1:return oA;case 2:return oA;case 3:return oA;case 4:return oA;case 5:return oA}var KA=gA===3?"string":gA===5?"number":"default",xj=yt(oA,r);if(xj!==void 0){var gj=xj.call(oA,KA);if(Bj(gj))throw new TypeError;return gj}return wt(oA,KA==="default"?"number":KA)}function wt(oA,gA){if(gA==="string"){var KA=oA.toString;if(Ee(KA)){var xj=KA.call(oA);if(!Bj(xj))return xj}var gj=oA.valueOf;if(Ee(gj)){var xj=gj.call(oA);if(!Bj(xj))return xj}}else{var gj=oA.valueOf;if(Ee(gj)){var xj=gj.call(oA);if(!Bj(xj))return xj}var ve=oA.toString;if(Ee(ve)){var xj=ve.call(oA);if(!Bj(xj))return xj}}throw new TypeError}function wj(oA){return!!oA}function Bt(oA){return""+oA}function Ye(oA){var gA=De(oA,3);return kj(gA)?gA:Bt(gA)}function Ie(oA){return Array.isArray?Array.isArray(oA):oA instanceof Object?oA instanceof Array:Object.prototype.toString.call(oA)==="[object Array]"}function Ee(oA){return typeof oA=="function"}function er(oA){return typeof oA=="function"}function Vt(oA){switch(cj(oA)){case 3:return!0;case 4:return!0;default:return!1}}function yt(oA,gA){var KA=oA[gA];if(KA!=null){if(!Ee(KA))throw new TypeError;return KA}}function Sr(oA){var gA=yt(oA,a);if(!Ee(gA))throw new TypeError;var KA=gA.call(oA);if(!Bj(KA))throw new TypeError;return KA}function Dr(oA){return oA.value}function yr(oA){var gA=oA.next();return gA.done?!1:gA}function ra(oA){var gA=oA.return;gA&&gA.call(oA)}function at(oA){var gA=Object.getPrototypeOf(oA);if(typeof oA!="function"||oA===l||gA!==l)return gA;var KA=oA.prototype,xj=KA&&Object.getPrototypeOf(KA);if(xj==null||xj===Object.prototype)return gA;var gj=xj.constructor;return typeof gj!="function"||gj===oA?gA:gj}function st(){var oA={},gA=[],KA=function(){function uj(lA,eA,FA){this._index=0,this._keys=lA,this._values=eA,this._selector=FA}return uj.prototype["@@iterator"]=function(){return this},uj.prototype[a]=function(){return this},uj.prototype.next=function(){var lA=this._index;if(lA>=0&&lA<this._keys.length){var eA=this._selector(this._keys[lA],this._values[lA]);return lA+1>=this._keys.length?(this._index=-1,this._keys=gA,this._values=gA):this._index++,{value:eA,done:!1}}return{value:void 0,done:!0}},uj.prototype.throw=function(lA){throw this._index>=0&&(this._index=-1,this._keys=gA,this._values=gA),lA},uj.prototype.return=function(lA){return this._index>=0&&(this._index=-1,this._keys=gA,this._values=gA),{value:lA,done:!0}},uj}();return function(){function uj(){this._keys=[],this._values=[],this._cacheKey=oA,this._cacheIndex=-2}return Object.defineProperty(uj.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),uj.prototype.has=function(lA){return this._find(lA,!1)>=0},uj.prototype.get=function(lA){var eA=this._find(lA,!1);return eA>=0?this._values[eA]:void 0},uj.prototype.set=function(lA,eA){var FA=this._find(lA,!0);return this._values[FA]=eA,this},uj.prototype.delete=function(lA){var eA=this._find(lA,!1);if(eA>=0){for(var FA=this._keys.length,Jj=eA+1;Jj<FA;Jj++)this._keys[Jj-1]=this._keys[Jj],this._values[Jj-1]=this._values[Jj];return this._keys.length--,this._values.length--,lA===this._cacheKey&&(this._cacheKey=oA,this._cacheIndex=-2),!0}return!1},uj.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=oA,this._cacheIndex=-2},uj.prototype.keys=function(){return new KA(this._keys,this._values,xj)},uj.prototype.values=function(){return new KA(this._keys,this._values,gj)},uj.prototype.entries=function(){return new KA(this._keys,this._values,ve)},uj.prototype["@@iterator"]=function(){return this.entries()},uj.prototype[a]=function(){return this.entries()},uj.prototype._find=function(lA,eA){return this._cacheKey!==lA&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=lA)),this._cacheIndex<0&&eA&&(this._cacheIndex=this._keys.length,this._keys.push(lA),this._values.push(void 0)),this._cacheIndex},uj}();function xj(uj,lA){return uj}function gj(uj,lA){return lA}function ve(uj,lA){return[uj,lA]}}function kr(){return function(){function oA(){this._map=new k}return Object.defineProperty(oA.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),oA.prototype.has=function(gA){return this._map.has(gA)},oA.prototype.add=function(gA){return this._map.set(gA,gA),this},oA.prototype.delete=function(gA){return this._map.delete(gA)},oA.prototype.clear=function(){this._map.clear()},oA.prototype.keys=function(){return this._map.keys()},oA.prototype.values=function(){return this._map.values()},oA.prototype.entries=function(){return this._map.entries()},oA.prototype["@@iterator"]=function(){return this.keys()},oA.prototype[a]=function(){return this.keys()},oA}()}function Va(){var oA=16,gA=s.create(),KA=xj();return function(){function eA(){this._key=xj()}return eA.prototype.has=function(FA){var Jj=gj(FA,!1);return Jj!==void 0?s.has(Jj,this._key):!1},eA.prototype.get=function(FA){var Jj=gj(FA,!1);return Jj!==void 0?s.get(Jj,this._key):void 0},eA.prototype.set=function(FA,Jj){var Er=gj(FA,!0);return Er[this._key]=Jj,this},eA.prototype.delete=function(FA){var Jj=gj(FA,!1);return Jj!==void 0?delete Jj[this._key]:!1},eA.prototype.clear=function(){this._key=xj()},eA}();function xj(){var eA;do eA="@@WeakMap@@"+lA();while(s.has(gA,eA));return gA[eA]=!0,eA}function gj(eA,FA){if(!e.call(eA,KA)){if(!FA)return;Object.defineProperty(eA,KA,{value:s.create()})}return eA[KA]}function ve(eA,FA){for(var Jj=0;Jj<FA;++Jj)eA[Jj]=Math.random()*255|0;return eA}function uj(eA){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(eA)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(eA)):ve(new Uint8Array(eA),eA):ve(new Array(eA),eA)}function lA(){var eA=uj(oA);eA[6]=eA[6]&79|64,eA[8]=eA[8]&191|128;for(var FA="",Jj=0;Jj<oA;++Jj){var Er=eA[Jj];(Jj===4||Jj===6||Jj===8)&&(FA+="-"),Er<16&&(FA+="0"),FA+=Er.toString(16).toLowerCase()}return FA}}function je(oA){return oA.__=void 0,delete oA.__,oA}})})(piA||(piA={}));self.browser||(self.browser=$_());var w_="contentScriptMetadata";var DA=W(aA()),wjj=DA.union([DA.literal("none"),DA.literal("name"),DA.literal("honorific-prefix"),DA.literal("given-name"),DA.literal("additional-name"),DA.literal("family-name"),DA.literal("honorific-suffix"),DA.literal("nickname"),DA.literal("organization-title"),DA.literal("username"),DA.literal("new-password"),DA.literal("current-password"),DA.literal("one-time-code"),DA.literal("organization"),DA.literal("street-address"),DA.literal("address-line1"),DA.literal("address-line2"),DA.literal("address-line3"),DA.literal("address-level1"),DA.literal("address-level2"),DA.literal("address-level3"),DA.literal("address-level4"),DA.literal("country"),DA.literal("country-name"),DA.literal("postal-code"),DA.literal("cc-name"),DA.literal("cc-given-name"),DA.literal("cc-additional-name"),DA.literal("cc-family-name"),DA.literal("cc-number"),DA.literal("cc-exp"),DA.literal("cc-exp-month"),DA.literal("cc-exp-year"),DA.literal("cc-csc"),DA.literal("cc-type"),DA.literal("transaction-currency"),DA.literal("transaction-amount"),DA.literal("language"),DA.literal("bday"),DA.literal("bday-day"),DA.literal("bday-month"),DA.literal("bday-year"),DA.literal("sex"),DA.literal("url"),DA.literal("photo"),DA.literal("tel"),DA.literal("tel-country-code"),DA.literal("tel-national"),DA.literal("tel-area-code"),DA.literal("tel-local"),DA.literal("tel-local-prefix"),DA.literal("tel-local-suffix"),DA.literal("tel-extension"),DA.literal("email"),DA.literal("impp"),DA.literal("crypto-address"),DA.literal("crypto-recovery-seed")]),Ijj=DA.union([DA.literal("001"),DA.literal("002"),DA.literal("003"),DA.literal("004"),DA.literal("005"),DA.literal("006"),DA.literal("100"),DA.literal("101"),DA.literal("102"),DA.literal("103"),DA.literal("104"),DA.literal("105"),DA.literal("106"),DA.literal("107"),DA.literal("108"),DA.literal("109"),DA.literal("110"),DA.literal("111"),DA.literal("112"),DA.literal("113"),DA.literal("114"),DA.literal("115")]),qne=DA.union([DA.literal("login"),DA.literal("credit-card"),DA.literal("secure-note"),DA.literal("identity"),DA.literal("password"),DA.literal("document"),DA.literal("software-license"),DA.literal("bank-account"),DA.literal("database"),DA.literal("driver-license"),DA.literal("outdoor-license"),DA.literal("membership"),DA.literal("passport"),DA.literal("reward-program"),DA.literal("ssn"),DA.literal("wireless-router"),DA.literal("server"),DA.literal("email"),DA.literal("api-credential"),DA.literal("medical-record"),DA.literal("ssh"),DA.literal("crypto-wallet")]),Djj=DA.readonly(DA.strict({title:DA.string,fields:DA.array(DA.strict({autocomplete:wjj,value:DA.union([DA.string,DA.array(DA.readonly(DA.number)),DA.undefined])})),notes:DA.union([DA.string,DA.undefined])})),Ojj=DA.readonly(DA.strict({type:Ijj,saveRequest:Djj})),bsA=DA.union([DA.readonly(DA.strict({name:DA.literal("hello")})),DA.readonly(DA.strict({name:DA.literal("create-item"),data:Ojj}))]),Pjj=DA.readonly(DA.strict({buildNumber:DA.number})),Cjj=DA.readonly(DA.strict({saved:DA.boolean})),vne=DA.union([DA.readonly(DA.strict({name:DA.literal("hello"),data:Pjj})),DA.readonly(DA.strict({name:DA.literal("create-item"),data:Cjj}))]);function ysA(A){return!!(A&&typeof A=="object"&&["Success","Error"].includes(A.type))}var zg="OPShouldLockNotification",Rs="OPDidLockNotification",Or="OPDidUnlockNotification",On="OPFeatureFlagsUpdatedNotification",Rg="AccountHandlerDidLockNotification",gp="AccountHandlerAccountDestroyedNotification",Qk="UpdateAccounts",Fd="AccountRemoved",wi="AccountAdded",Jg="OPDidConnectToDesktop",Zk="NotificationsExpired",hp="SignInWithButtonsUpdated",bd="SignInWithDetected",tx="SignInWithFlowStarted",X8="SignInWithProviderClick",rx="SignInWithUnexpectedNavigation",qE="PageChange",Je="001",Ur="002",$sA="003",q6="004",Js="005",V8="006",wsA="099",Qb="100",IsA="101",DsA="102",W8="103",OsA="104",PsA="105",Y8="106",CsA="0$$",HsA="107",Q8="108",TsA="109",KsA="110",SsA="111",Tl="112",MsA="113",Ii="114",ax="115",_sA="116";var LsA="912";var Q_="P",Z_="E",nx="B",ox="F",Z8="I";var A1="_execute_action",j1="_execute_browser_action",e1="lock";function Tjj(A){return browser.runtime.getManifest().manifest_version===A}function na(){return Tjj(3)}var NsA=[{browserName:"Chromium",channelName:"local",extensionId:"hjlinigoblmkhjejkmbegnoaljkphmgo"},{browserName:"Chromium",channelName:"internalNightly",extensionId:"bkpbhnjcbehoklfkljkkbbmipaphipgl"},{browserName:"Chromium",channelName:"nightly",extensionId:"gejiddohjgogedgjnonbofjigllpkmbf"},{browserName:"Chromium",channelName:"beta",extensionId:"khgocmkkpikpnmmkgmdnfckapcdkgfaf"},{browserName:"Chromium",channelName:"stable",extensionId:"aeblfdkhhhdcdjpifhhbdiojplfjncoa"}];var Nj;(function(A){A.SshKeyTitle="ssh-key-title",A.SshKey="ssh-key",A.None="none",A.Name="name",A.HonorificPrefix="honorific-prefix",A.GivenName="given-name",A.AdditionalName="additional-name",A.FamilyName="family-name",A.HonorificSuffix="honorific-suffix",A.Nickname="nickname",A.OrganizationTitle="organization-title",A.Username="username",A.NewPassword="new-password",A.CurrentPassword="current-password",A.OneTimeCode="one-time-code",A.Organization="organization",A.StreetAddress="street-address",A.AddressLine1="address-line1",A.AddressLine2="address-line2",A.AddressLine3="address-line3",A.AddressLevel1="address-level1",A.AddressLevel2="address-level2",A.AddressLevel3="address-level3",A.AddressLevel4="address-level4",A.Country="country",A.CountryName="country-name",A.PostalCode="postal-code",A.CcName="cc-name",A.CcGivenName="cc-given-name",A.CcAdditionalName="cc-additional-name",A.CcFamilyName="cc-family-name",A.CcNumber="cc-number",A.CcExp="cc-exp",A.CcExpMonth="cc-exp-month",A.CcExpYear="cc-exp-year",A.CcCsc="cc-csc",A.CcType="cc-type",A.TransactionCurrency="transaction-currency",A.TransactionAmount="transaction-amount",A.Language="language",A.Bday="bday",A.BdayDay="bday-day",A.BdayMonth="bday-month",A.BdayYear="bday-year",A.Sex="sex",A.Url="url",A.Photo="photo",A.Tel="tel",A.TelCountryCode="tel-country-code",A.TelNational="tel-national",A.TelAreaCode="tel-area-code",A.TelLocal="tel-local",A.TelLocalPrefix="tel-local-prefix",A.TelLocalSuffix="tel-local-suffix",A.TelExtension="tel-extension",A.Email="email",A.Impp="impp",A.CryptoAddress="crypto-address",A.CryptoRecoverySeed="crypto-recovery-seed",A.RecoveryCode="recovery-code"})(Nj||(Nj={}));var t1;(function(A){A.ClickOpid="clickOpid",A.ClickQuerySelector="clickQuerySelector",A.FillOpid="fillOpid",A.FillQuerySelector="fillQuerySelector",A.FocusOpid="focusOpid",A.Submit="submit"})(t1||(t1={}));var r1;(function(A){A.Favorite="favorite",A.Lock="lock",A.Chevron="chevron",A.ChevronPressed="chevronPressed",A.Key="key"})(r1||(r1={}));var Kl;(function(A){A.Circle="circle",A.RoundedRect="roundedRect",A.Rect="rect"})(Kl||(Kl={}));var zsA;(function(A){A.SecretKey="secretKey",A.Sso="sso",A.WebAuthn="webAuthn"})(zsA||(zsA={}));var RsA;(function(A){A.Vault="vault",A.Archive="archive",A.Favorites="favorites",A.Categories="categories",A.WatchtowerCompromised="watchtowerCompromised",A.WatchtowerVulnerable="watchtowerVulnerable",A.WatchtowerReused="watchtowerReused",A.WatchtowerWeak="watchtowerWeak",A.WatchtowerUnsecured="watchtowerUnsecured",A.WatchtowerInactiveMfa="watchtowerInactiveMfa",A.WatchtowerInWrongAccount="watchtowerInWrongAccount",A.WatchtowerPasskeyAvailable="watchtowerPasskeyAvailable",A.WatchtowerExpiring="watchtowerExpiring"})(RsA||(RsA={}));var JsA;(function(A){A.FeatureFlags="feature_flags",A.LegacySearchResult="legacy_search_result",A.SmartSearchResult="smart_search_result",A.SmartSearchFilterVault="smart_search_filter_vault",A.LegacySearchFilterVault="legacy_search_filter_vault",A.SmartSearchFilterFavorite="smart_search_filter_favorite",A.LegacySearchFilterFavorite="legacy_search_filter_favorite",A.SmartSearchFilterCategory="smart_search_filter_category",A.LegacySearchFilterCategory="legacy_search_filter_category",A.SmartSearchFilterTag="smart_search_filter_tag",A.LegacySearchFilterTag="legacy_search_filter_tag",A.SmartSearchFilterUntag="smart_search_filter_untag",A.LegacySearchFilterUntag="legacy_search_filter_untag",A.SetUpAnotherDevice="set_up_another_device",A.CopyLink="copy_link",A.ShareLink="share_link",A.SetUpAnotherDeviceSetupCode="set_up_another_device_setup_code",A.RemoveCard="remove_card",A.SafariExtensionCard="safari_extension_card",A.ProfileCard="profile_card",A.LabsCard="labs_card",A.AppleWatchCard="apple_watch_card",A.CustomizeHomeCard="customize_home_card",A.PinnedFieldsCard="pinned_fields_card",A.AutofillCard="autofill_card",A.Profile="profile_view",A.Watchtower="watchtower",A.WatchtowerPasswordStrengthBar="password_strength_bar",A.WatchtowerCompromisedWebsites="compromised_websites",A.WatchtowerVulnerablePasswords="vulnerable_passwords",A.WatchtowerPasskeysAvailable="passkeys_available",A.WatchtowerWrongAccount="items_wrong_account",A.WatchtowerReusedPasswords="reused_passwords",A.WatchtowerWeakPasswords="weak_passwords",A.WatchtowerUnsecuredWebsites="unsecured_websites",A.Watchtower2FA="2FA",A.WatchtowerExpiringItems="expiring_items",A.WatchtowerDuplicateItems="duplicate_items",A.WatchtowerConflictingShortcuts="conflicting_shortcuts",A.WatchtowerDeveloperCredentials="dev_credentials_learn_more",A.WatchtowerRecoveryCodes="setup_recovery_code",A.WatchtowerDataInvolvedInBreach="data_involved_in_breach",A.WatchtowerIgnoredAlerts="ignored_alerts",A.StartHere="start_here",A.AddToBrowser="add_to_browser",A.SetUpAutofill="set_up_autofill",A.OpenTutorial="open_tutorial",A.ImportNext="import_next",A.InviteNext="invite_next",A.InviteSkip="invite_skip",A.DevicesNext="devices_next",A.ImportAddFirstItems="add_first_items",A.ImportMoreToAdd="have_more_to_add",A.ImportAddItemsChooseMethod="add_items_choose_method",A.MigrateDataToOnePassword="migrate_data_to_1p",A.ImportDoNotAskAboutMigrationsAgain="dont_ask_migrations_again",A.ImportCreateSingleItem="create_one_new_item",A.Cancel="cancel",A.DismissMigrateDataTo1P="dismiss_migrate_data_to_1p",A.ItemImport="item_import",A.Safari="safari",A.Firefox="firefox",A.Chrome="chrome",A.Edge="edge",A.Bitwarden="bitwarden",A.Brave="brave",A.DifferentBrowser="different_browser",A.LastPass="lastpass",A.ICloudKeychain="icloud_keychain",A.Dashlane="dashlane",A.Keepass="keepass",A.KeepassXc="keepass_xc",A.Roboform="roboform",A.DeliniaSecretServer="delinea_secret_server",A.OnePassword="1password",A.DifferentPasswordManager="different_password_manager",A.MemorizedPasswords="memorized_passwords",A.PenAndPaper="pen_and_paper",A.Spreadsheet="spreadsheet",A.Csv="csv",A.DoNotSeeMyOption="i_dont_see_my_option",A.AddNewItemScreenGettingStarted="getting_started",A.AddNewItemScreenDeveloperTools="developer_tools",A.AddNewItemScreenMostPopularLogins="popular_logins",A.AddNewItemScreenCryptoBasics="crypto_basics",A.AddNewItemScreenTravelEssentials="travel_essentials",A.PinExtension="pin_extension",A.Done="done",A.Skip="skip",A.GetExtension="get_extension",A.ClickOpenBrowser="click_open_browser",A.GoToAutofillSettings="go_to_autofill_settings",A.UseAutofill="use_autofill",A.AutofillIsOn="autofill_is_on",A.AutofillIsReady="autofill_is_ready",A.AutofillEnrollmentFailed="autofill_enrollment_failed",A.AutofillStepOne="autofill_step_1",A.AutofillStepTwo="autofill_step_2",A.AutofillStepThree="autofill_step_3",A.AutofillStepFour="autofill_step_4",A.ClickPasswordField="click_password_field",A.UseSuggestedPassword="use_suggested_password",A.PracticeSaveAndFill="practice_save_and_fill",A.SaveItem="save_item",A.SavedInOnePassword="saved_in_1password",A.SelectUsernameField="select_username_field",A.FillWithOneClick="fill_with_one_click",A.YouAreDone="youre_done",A.ManageAccount="manage_account",A.People="people",A.InvitePeople="invite_people",A.Invite="invite",A.Accounts="accounts",A.AccountPage="account_page",A.FindInList="find_in_list",A.GlobalSearchField="global_search_field",A.PullToSearch="pull_to_search",A.ItemTemplate="item_template",A.ItemSharing="item_sharing",A.ExportData="export_data",A.GitCommitSigning="git_commit_signing",A.EditAutomatically="edit_automatically",A.CopySnippet="copy_snippet",A.Close="close",A.SettingsDeveloper="settings_developer",A.DeveloperExperienceOnboarding="developer_experience_onboarding",A.DeveloperExperienceEnable="developer_experience_enable",A.DeveloperExperienceDismiss="developer_experience_dismiss",A.DeveloperExperienceSetting="developer_experience_setting",A.DeveloperWatchtowerSetting="developer_watchtower_setting",A.DeveloperExperienceHome="developer_experience_home",A.DeveloperExperienceSsh="developer_experience_ssh",A.DeveloperExperienceCli="developer_experience_cli",A.DeveloperExperienceWatchtower="developer_experience_watchtower",A.DeveloperExperienceEnvironments="developer_experience_environments",A.DeveloperExperienceActivity="developer_experience_activity",A.SshBookmarksCreate="ssh_bookmarks_create",A.SshBookmarksDelete="ssh_bookmarks_delete",A.SshBookmarksConnect="ssh_bookmarks_connect",A.SshBookmarksConfigSetting="ssh_bookmarks_config_setting",A.CopySecretReference="copy_secret_reference",A.MobileHome="mobile_home",A.ChromeAutofillPromptScreen="chrome_autofill_prompt_screen",A.BraveAutofillPromptScreen="brave_autofill_prompt_screen",A.GetStarted="get_started",A.AutofillOnChrome="autofill_on_chrome",A.DefaultTerminalSetting="default_terminal_setting",A.SshAgentSetting="ssh_agent_setting",A.AntiPeekModeToggleOn="anti_peek_mode_toggle_on",A.AntiPeekModeToggleOff="anti_peek_mode_toggle_off",A.AntiPeekModeShareBlocked="anti_peek_mode_share_blocked",A.MobileHomeScreeenCustomize="mobile_home_screen_customize",A.NearbyOnboardingSetLocation="nearby_onboarding_set_location",A.UseMaps="use_maps",A.HelpMenu="help_menu",A.SupportCenterLink="support_center_link",A.TutorialVideosLinks="tutorial_videos_link",A.CommunityForumLink="community_forum_link",A.ContactSupportLink="contact_support_link",A.LatestReleasesLink="latest_releases_link",A.ReportXamIssue="report_xam_issue",A.SendDiagnosticsReport="send_diagnostics_report",A.GettingStartedPlatform="getting_started_platform",A.SecurityReview="security_review",A.PreviewChanges="preview_changes",A.ApplyNewSettings="apply_new_settings",A.KeepExistingSettings="keep_existing_settings",A.CustomizeInSettings="customize_in_settings",A.CloseSecurityReviewIcon="close_security_review_icon",A.UnlockBiometrics="unlock_biometrics",A.UnlockDevicePasscode="unlock_device_passcode",A.UnlockMacPassword="unlock_mac_password",A.UnlockWindowsTpm="unlock_windows_tpm",A.AutomaticWindowsHelloPrompt="automatic_windows_hello_prompt",A.RequireAccountPasswordTime="require_account_password_time",A.SetUpRecoveryCode="set_up_recovery_code",A.DeclineRecoveryCode="decline_recovery_code",A.RecoveryCode="recovery_code",A.UnlockWhenDeviceUnlocks="unlock_when_device_unlocks",A.AskToUnlockAgainTime="ask_to_unlock_again_time",A.LockWhenDeviceLocks="lock_when_device_locks",A.LockAfterExitTime="lock_after_exit_time",A.LockAfterIdleTime="lock_after_idle_time",A.UserFeedback="user_feedback",A.SubmitUserFeedback="submit_user_feedback",A.LabsHomepage="labs_homepage",A.VerifierHomepage="verifier_homepage",A.VerifierBillboards="verifier_billboards",A.VerifierSearch="verifier_search",A.VerifierRecentAction="verifier_recent_action",A.VerifierComposeScreen="verifier_compose_screen",A.VerifierComposeNoteField="verifier_compose_note_field",A.SendVerificationRequest="send_verification_request",A.VerifierChallengeReceived="verifier_challenge_received",A.VerifierRequesterRow="verifier_requester_row",A.VerifierConfirmChallenge="verifier_confirm_challenge",A.VerifierRejectChallenge="verifier_reject_challenge",A.VerifierResponseReceived="verifier_response_received",A.StopInteractingDisclosure="stop_interacting_disclosure",A.Variables="variables",A.Destinations="destinations",A.DeleteIcon="delete_icon",A.ValueConcealRevealToggleIcon="value_conceal_reveal_toggle_icon",A.DeleteLocalFileMount="delete_local_file_mount",A.DeleteDestination="delete_destination",A.ManageAccess="manage_access",A.CopyIcon="copy_icon",A.InstallExtensionWarning="install_extension_warning",A.InstallExtensionBlocked="install_extension_block",A.InstallExtension="install_extension",A.EnableExtension="enable_extension",A.Recheck="recheck",A.Snooze="snooze",A.LearnMoreLink="learn_more_data_safety_link",A.InstallExtensionBanner="install_extension_banner",A.InstallExtensionBannerDismiss="install_extension_banner_dismiss",A.EnableExtensionWarning="enable_extension_warning",A.EnableExtensionBlocked="enable_extension_blocking",A.EssentialSetupTelemetryModalRemindMeLater="essential_setup_telemetry_modal_remind_me_later",A.AutofillNotEnabled="autofill_not_enabled",A.AutofillSnackbarFixButton="autofill_snackbar_fix_button",A.AutofillSnackbarDismissButton="autofill_snackbar_dismiss_button"})(JsA||(JsA={}));var UsA;(function(A){A.Archive="archive",A.None="none"})(UsA||(UsA={}));var Zb;(function(A){A.Enabled="enabled",A.Disabled="disabled"})(Zb||(Zb={}));var A0;(function(A){A.Default="default",A.Destructive="destructive",A.DestructiveAlt="destructiveAlt",A.Primary="primary",A.PrimaryAlt="primaryAlt",A.PrimaryWhite="primaryWhite",A.Transparent="transparent",A.TransparentBlue="transparentBlue"})(A0||(A0={}));var XsA;(function(A){A.Subtle="subtle",A.Warning="warning",A.Info="info",A.SolidBlue="solidBlue",A.SolidPurple="solidPurple",A.SolidGreen="solidGreen",A.SolidRed="solidRed"})(XsA||(XsA={}));var Au;(function(A){A.Individual="I",A.Family="F",A.Team="B",A.Unsupported="Unsupported"})(Au||(Au={}));var ju;(function(A){A.Registered="R",A.Active="A",A.Suspended="S",A.Deleted="D",A.Purging="X",A.Purged="Z",A.Unsupported="Unsupported"})(ju||(ju={}));var j0;(function(A){A.Active="A",A.Pending="P",A.CancelAtEnd="C",A.Frozen="F",A.Lapsed="L",A.Trialing="T",A.Unsupported="Unsupported"})(j0||(j0={}));var Gc;(function(A){A.Personal="P",A.Everyone="E",A.Transfer="T",A.UserCreated="U",A.System="S",A.GeneratedPasswords="G",A.ManagedApplications="M",A.DeveloperEnvironment="D",A.Unsupported="Unsupported"})(Gc||(Gc={}));var Fc;(function(A){A.PendingActivation="P",A.Active="A",A.Suspended="S",A.Deleted="D",A.MustMigrateAuth="M",A.RecoveryStarted="1",A.RecoveryAccepted="2",A.Registered="R",A.EmailVerifiedIncomplete="V",A.ProvisionPending="T",A.ProvisionStarted="3",A.ProvisionAccepted="4",A.ProvisionSuspended="5",A.Purging="X",A.Purged="Z",A.Unsupported="Unsupported"})(Fc||(Fc={}));var VsA;(function(A){A.Primary="primary",A.PrimaryOutline="primaryOutline",A.DangerOutline="dangerOutline",A.Grey="grey",A.Invisible="invisible"})(VsA||(VsA={}));var WsA;(function(A){A.GuidedSignInExperience="guidedSignInExperience"})(WsA||(WsA={}));var YsA;(function(A){A.Active="active",A.Frozen="frozen",A.Guest="guest",A.Locked="locked"})(YsA||(YsA={}));var ix;(function(A){A.DownloadExtension="download-extension",A.SetUpAutofill="set-up-autofill",A.MigrateData="migrate-data",A.Practice="practice",A.AccessPasswords="access-passwords",A.InviteFamilyMembers="invite-family-members",A.PinExtension="pin-extension"})(ix||(ix={}));var QsA;(function(A){A.PhoneOrTablet="phoneOrTablet",A.Computer="computer"})(QsA||(QsA={}));var ZsA;(function(A){A.AddDesktopApp="addDesktopApp",A.AddMobileApp="addMobileApp",A.AddExtension="addExtension"})(ZsA||(ZsA={}));var e0;(function(A){A.Navigation="Navigation",A.Interaction="Interaction",A.WithProvider="WithProvider"})(e0||(e0={}));var Sl;(function(A){A.OnePassword="OnePassword",A.Bitwarden="Bitwarden",A.Chrome="Chrome",A.Edge="Edge",A.Dashlane="Dashlane",A.LastPass="LastPass",A.Keeper="Keeper",A.Okta="Okta",A.Unknown="Unknown"})(Sl||(Sl={}));var Ug;(function(A){A.Google="Google",A.Microsoft="Microsoft"})(Ug||(Ug={}));var AlA;(function(A){A.SshKeyUsage="SshKeyUsage",A.CliAccountAccess="CliAccountAccess"})(AlA||(AlA={}));var jlA;(function(A){A.Street="Street",A.City="City",A.Country="Country",A.Zip="Zip",A.State="State"})(jlA||(jlA={}));var elA;(function(A){A.Us="us",A.Browser="browser"})(elA||(elA={}));var Xg;(function(A){A.Unknown="unknown",A.Button="button",A.Checkbox="checkbox",A.Color="color",A.Date="date",A.DatetimeLocal="datetime-local",A.Email="email",A.File="file",A.Hidden="hidden",A.Image="image",A.Month="month",A.Number="number",A.Password="password",A.Radio="radio",A.Range="range",A.Reset="reset",A.Search="search",A.Submit="submit",A.Tel="tel",A.Text="text",A.Time="time",A.Url="url",A.Week="week",A.SelectOne="select-one",A.SelectMultiple="select-multiple",A.Textarea="textarea"})(Xg||(Xg={}));var t0;(function(A){A.ActiveFieldOnly="activeFieldOnly",A.AllFields="allFields",A.UserEdited="userEdited"})(t0||(t0={}));var yd;(function(A){A.Brex="Brex",A.Privacy="Privacy"})(yd||(yd={}));var a1;(function(A){A.None="none",A.Login="login",A.Registration="registration",A.ChangePassword="change-password",A.OneTimeCode="one-time-code",A.ChangeEmail="change-email",A.SshKey="ssh-key",A.Payment="payment"})(a1||(a1={}));var tlA;(function(A){A.Home="home",A.Work="work",A.Mobile="mobile",A.Fax="fax",A.Pager="pager"})(tlA||(tlA={}));var rlA;(function(A){A.SystemPrompt="systemPrompt",A.ItemList="itemList",A.SaveAndFill="saveAndFill"})(rlA||(rlA={}));var alA;(function(A){A.SshAgent="SshAgent",A.Activity="Activity"})(alA||(alA={}));var n1;(function(A){A.SecuritySettingsFlexible="securitySettingsFlexible",A.SecuritySettingsBalanced="securitySettingsBalanced",A.SecuritySettingsStrict="securitySettingsStrict"})(n1||(n1={}));var nlA;(function(A){A.Include="include",A.Exclude="exclude"})(nlA||(nlA={}));var olA;(function(A){A.Online="Online",A.Offline="Offline",A.Unknown="Unknown"})(olA||(olA={}));var ilA;(function(A){A.Ascending="ascending",A.Descending="descending"})(ilA||(ilA={}));var slA;(function(A){A.Name="name",A.LockState="lockState",A.SignedIn="signedIn"})(slA||(slA={}));var llA;(function(A){A.Good="good",A.WillBlock="will_block",A.Blocked="blocked",A.Notify="notify"})(llA||(llA={}));var clA;(function(A){A.Active="A",A.Deleted="D",A.Unsupported="Unsupported"})(clA||(clA={}));var dlA;(function(A){A.Owners="O",A.Administrators="A",A.Recovery="R",A.ExternalAccountManagers="E",A.TeamMembers="M",A.UserDefined="U",A.Unsupported="Unsupported"})(dlA||(dlA={}));var klA;(function(A){A.CopyItemJson="copyItemJson"})(klA||(klA={}));var ulA;(function(A){A.Regular="R",A.Service="S",A.Guest="G",A.Unsupported="Unsupported"})(ulA||(ulA={}));var plA;(function(A){A.Name="name",A.Email="email"})(plA||(plA={}));var mlA;(function(A){A.CacheFirst="cacheFirst",A.NetworkOnly="networkOnly"})(mlA||(mlA={}));var ElA;(function(A){A.Complete="complete",A.Dismissed="dismissed",A.Incomplete="incomplete"})(ElA||(ElA={}));var BlA;(function(A){A.Add="add",A.Remove="remove"})(BlA||(BlA={}));var glA;(function(A){A.Locked="locked",A.Unlocked="unlocked"})(glA||(glA={}));var hlA;(function(A){A.Day="day",A.Week="week",A.Month="month",A.Year="year"})(hlA||(hlA={}));var qlA;(function(A){A.PayAsYouGo="payAsYouGo",A.PayUpFront="payUpFront",A.FreeTrial="freeTrial"})(qlA||(qlA={}));var vlA;(function(A){A.Individual="individual",A.Family="family",A.TeamStarterPack="teamStarterPack"})(vlA||(vlA={}));var xlA;(function(A){A.Password="password",A.OneTimePassword="oneTimePassword"})(xlA||(xlA={}));var flA;(function(A){A.Png="png",A.Svg="svg",A.OnesAndZeros="onesAndZeros"})(flA||(flA={}));var GlA;(function(A){A.DateCreated="dateCreated",A.DateModified="dateModified",A.Title="title",A.RecentlyUsed="recentlyUsed",A.FrequentlyUsed="frequentlyUsed",A.PasswordStrength="passwordStrength",A.MostRelevant="mostRelevant"})(GlA||(GlA={}));var FlA;(function(A){A.Ascending="ascending",A.Descending="descending"})(FlA||(FlA={}));var blA;(function(A){A.Active="Active",A.Archived="Archived",A.Deleted="Deleted"})(blA||(blA={}));var ylA;(function(A){A.FrozenAccount="frozenAccount",A.SsoMigration="ssoMigration",A.RecentlyDeleted="recentlyDeleted"})(ylA||(ylA={}));var $lA;(function(A){A.Dismiss="dismiss",A.Cancel="cancel"})($lA||($lA={}));var $d;(function(A){A.Default="Default",A.Host="Host",A.Never="Never"})($d||($d={}));var vE;(function(A){A.Info="info",A.Warn="warn",A.Error="error",A.Exception="exception"})(vE||(vE={}));var wlA;(function(A){A.None="none",A.Single="single",A.Double="double"})(wlA||(wlA={}));var IlA;(function(A){A.Title="title",A.Primary="primary",A.Secondary="secondary",A.Tags="tags",A.CallToAction="callToAction",A.ItemLocation="itemLocation"})(IlA||(IlA={}));var DlA;(function(A){A.RetainOriginal="RetainOriginal",A.TrashOriginal="TrashOriginal"})(DlA||(DlA={}));var r0;(function(A){A.BiometricsOnly="BiometricsOnly",A.BiometricsOrWatch="BiometricsOrWatch",A.WatchOnly="WatchOnly",A.NoneAvailable="NoneAvailable"})(r0||(r0={}));var o1;(function(A){A.Unknown="Unknown",A.NoneAvailable="NoneAvailable",A.TouchId="TouchId",A.FaceId="FaceId"})(o1||(o1={}));var bo;(function(A){A.Available="Available",A.NotAvailable="NotAvailable",A.SensorUnavailable="SensorUnavailable",A.NotEnrolled="NotEnrolled",A.Lockout="Lockout",A.NotInteractive="NotInteractive",A.WatchNotAvailable="WatchNotAvailable",A.EnrollmentChanged="EnrollmentChanged",A.Disconnected="Disconnected",A.NotPaired="NotPaired",A.Unknown="Unknown"})(bo||(bo={}));var i1;(function(A){A.Active="ACTIVE",A.Shipped="SHIPPED",A.Expired="EXPIRED",A.Locked="LOCKED",A.Terminated="TERMINATED"})(i1||(i1={}));var OlA;(function(A){A.Virtual="VIRTUAL",A.Physical="PHYSICAL"})(OlA||(OlA={}));var PlA;(function(A){A.Card="CARD",A.User="USER"})(PlA||(PlA={}));var ClA;(function(A){A.AED="AED",A.AFN="AFN",A.ALL="ALL",A.AMD="AMD",A.XCG="XCG",A.AOA="AOA",A.ARS="ARS",A.AUD="AUD",A.AWG="AWG",A.AZN="AZN",A.BAM="BAM",A.BBD="BBD",A.BDT="BDT",A.BGN="BGN",A.BHD="BHD",A.BIF="BIF",A.BMD="BMD",A.BND="BND",A.BOB="BOB",A.BOV="BOV",A.BRL="BRL",A.BSD="BSD",A.BTN="BTN",A.BWP="BWP",A.BYN="BYN",A.BZD="BZD",A.CAD="CAD",A.CDF="CDF",A.CHE="CHE",A.CHF="CHF",A.CHW="CHW",A.CLF="CLF",A.CLP="CLP",A.CNY="CNY",A.COP="COP",A.COU="COU",A.CRC="CRC",A.CUC="CUC",A.CUP="CUP",A.CVE="CVE",A.CZK="CZK",A.DJF="DJF",A.DKK="DKK",A.DOP="DOP",A.DZD="DZD",A.EGP="EGP",A.ERN="ERN",A.ETB="ETB",A.EUR="EUR",A.FJD="FJD",A.FKP="FKP",A.GBP="GBP",A.GEL="GEL",A.GHS="GHS",A.GIP="GIP",A.GMD="GMD",A.GNF="GNF",A.GTQ="GTQ",A.GYD="GYD",A.HKD="HKD",A.HNL="HNL",A.HRK="HRK",A.HTG="HTG",A.HUF="HUF",A.IDR="IDR",A.ILS="ILS",A.INR="INR",A.IQD="IQD",A.IRR="IRR",A.ISK="ISK",A.JMD="JMD",A.JOD="JOD",A.JPY="JPY",A.KES="KES",A.KGS="KGS",A.KHR="KHR",A.KMF="KMF",A.KPW="KPW",A.KRW="KRW",A.KWD="KWD",A.KYD="KYD",A.KZT="KZT",A.LAK="LAK",A.LBP="LBP",A.LKR="LKR",A.LRD="LRD",A.LSL="LSL",A.LYD="LYD",A.MAD="MAD",A.MDL="MDL",A.MGA="MGA",A.MKD="MKD",A.MMK="MMK",A.MNT="MNT",A.MOP="MOP",A.MRU="MRU",A.MUR="MUR",A.MVR="MVR",A.MWK="MWK",A.MXN="MXN",A.MXV="MXV",A.MYR="MYR",A.MZN="MZN",A.NAD="NAD",A.NGN="NGN",A.NIO="NIO",A.NOK="NOK",A.NPR="NPR",A.NZD="NZD",A.OMR="OMR",A.PAB="PAB",A.PEN="PEN",A.PGK="PGK",A.PHP="PHP",A.PKR="PKR",A.PLN="PLN",A.PYG="PYG",A.QAR="QAR",A.RON="RON",A.RSD="RSD",A.RUB="RUB",A.RWF="RWF",A.SAR="SAR",A.SBD="SBD",A.SCR="SCR",A.SDG="SDG",A.SEK="SEK",A.SGD="SGD",A.SHP="SHP",A.SLE="SLE",A.SLL="SLL",A.SOS="SOS",A.SRD="SRD",A.SSP="SSP",A.STN="STN",A.SVC="SVC",A.SYP="SYP",A.SZL="SZL",A.THB="THB",A.TJS="TJS",A.TMT="TMT",A.TND="TND",A.TOP="TOP",A.TRY="TRY",A.TTD="TTD",A.TWD="TWD",A.TZS="TZS",A.UAH="UAH",A.UGX="UGX",A.USD="USD",A.USN="USN",A.UYI="UYI",A.UYU="UYU",A.UYW="UYW",A.UZS="UZS",A.VED="VED",A.VES="VES",A.VND="VND",A.VUV="VUV",A.WST="WST",A.XAF="XAF",A.XAG="XAG",A.XAU="XAU",A.XBA="XBA",A.XBB="XBB",A.XBC="XBC",A.XBD="XBD",A.XCD="XCD",A.XDR="XDR",A.XOF="XOF",A.XPD="XPD",A.XPF="XPF",A.XPT="XPT",A.XSU="XSU",A.XTS="XTS",A.XUA="XUA",A.XXX="XXX",A.YER="YER",A.ZAR="ZAR",A.ZMW="ZMW",A.ZWL="ZWL",A.ZWG="ZWG"})(ClA||(ClA={}));var HlA;(function(A){A.Monthly="MONTHLY",A.Quarterly="QUARTERLY",A.Yearly="YEARLY",A.OneTime="ONE_TIME"})(HlA||(HlA={}));var a0;(function(A){A.Production="Production",A.Staging="Staging"})(a0||(a0={}));var TlA;(function(A){A.Invited="INVITED",A.Active="ACTIVE",A.Closed="CLOSED",A.Disabled="DISABLED",A.Deleted="DELETED",A.PendingActivation="PENDING_ACTIVATION"})(TlA||(TlA={}));var s1;(function(A){A.Granted="GRANTED",A.Denied="DENIED",A.Unknown="UNKNOWN"})(s1||(s1={}));var KlA;(function(A){A.SignOut="signOut",A.Lock="lock"})(KlA||(KlA={}));var SlA;(function(A){A.Set="Set",A.Clear="Clear",A.Mixed="Mixed"})(SlA||(SlA={}));var MlA;(function(A){A.Dark="dark",A.Light="light",A.System="system"})(MlA||(MlA={}));var _lA;(function(A){A.AndroidBiometricUnlock="AndroidBiometricUnlock",A.AndroidDevicePinUnlock="AndroidDevicePinUnlock",A.AndroidBiometricOrDevicePinUnlock="AndroidBiometricOrDevicePinUnlock",A.NoneAvailable="NoneAvailable"})(_lA||(_lA={}));var LlA;(function(A){A.Option="option",A.CtrlAlt="ctrlAlt",A.None="none"})(LlA||(LlA={}));var NlA;(function(A){A.MainWindow="mainWindow",A.QuickAccess="quickAccess",A.Menu="menu"})(NlA||(NlA={}));var R6;(function(A){A.Autofill="autofill",A.Download="download",A.Go="go",A.OpenURL="openURL",A.Move="move",A.Copy="copy",A.Archive="archive",A.Restore="restore",A.Export="export",A.Tag="tag",A.Share="share",A.CreatePrivacyCard="createPrivacyCard",A.CreateBrexVendorCard="createBrexVendorCard",A.CatalogAppLaunch="catalogAppLaunch"})(R6||(R6={}));var zlA;(function(A){A.Transparent="transparent",A.Primary="primary"})(zlA||(zlA={}));var RlA;(function(A){A.MerchantLocked="MERCHANT_LOCKED",A.SingleUse="SINGLE_USE"})(RlA||(RlA={}));var JlA;(function(A){A.Transaction="TRANSACTION",A.Monthly="MONTHLY",A.Annually="ANNUALLY",A.Forever="FOREVER"})(JlA||(JlA={}));var UlA;(function(A){A.RevealSecretKey="revealSecretKey",A.ConcealSecretKey="concealSecretKey",A.CopySignInAddress="copySignInAddress",A.CopyEmail="copyEmail",A.CopySecretKey="copySecretKey",A.CopyLink="copyLink",A.CopySsoProvider="copySsoProvider",A.LargeTypeSignInAddress="largeTypeSignInAddress",A.LargeTypeEmail="largeTypeEmail",A.LargeTypeSecretKey="largeTypeSecretKey",A.LargeTypeSsoProvider="largeTypeSsoProvider",A.ChangeEmail="changeEmail",A.ChangeSecretKey="changeSecretKey"})(UlA||(UlA={}));var XlA;(function(A){A.SetUpAnotherDevice="setUpAnotherDevice",A.ManageAccount="manageAccount",A.CreateVault="createVault"})(XlA||(XlA={}));var VlA;(function(A){A.Packed="packed",A.Tpm="tpm",A.AndroidKey="android-key",A.AndroidSafetynet="android-safetynet",A.FidoU2f="fido-u2f",A.Apple="apple",A.None="none"})(VlA||(VlA={}));var WlA;(function(A){A.Dashlane="dashlane"})(WlA||(WlA={}));var YlA;(function(A){A.Bitwarden="bitwarden",A.Safari="safari",A.ICloud="iCloud",A.OnePux="onePux",A.Chrome="chrome"})(YlA||(YlA={}));var QlA;(function(A){A.AttentionSevere="attentionSevere",A.Attention="attention",A.Recommendation="recommendation"})(QlA||(QlA={}));var rr;(function(A){A.AccountFamily="accountFamily",A.AccountIndividual="accountIndividual",A.AccountTeam="accountTeam",A.AllCategories="allCategories",A.AllItems="allItems",A.ApiCredentials="apiCredentials",A.Archive="archive",A.AutoFill1Password="autoFill1Password",A.AutoFillKey="autoFillKey",A.AutoFillKeyboard="autoFillKeyboard",A.AutoFillSettings="autoFillSettings",A.AutoFillToggle="autoFillToggle",A.BankAccount="bankAccount",A.BrexCorporate="brexCorporate",A.BrexVault="brexVault",A.BrexVendor="brexVendor",A.CreditCard="creditCard",A.CreditCardAmex="creditCardAmex",A.CreditCardDiscover="creditCardDiscover",A.CreditCardMastercard="creditCardMastercard",A.CreditCardVisa="creditCardVisa",A.CryptoWallet="cryptoWallet",A.Database="database",A.Developer="developer",A.DeveloperActivity="developerActivity",A.DeveloperBiometrics="developerBiometrics",A.DeveloperCli="developerCli",A.DeveloperEnvironments="developerEnvironments",A.DeveloperEnvironmentFileMount="developerEnvironmentFileMount",A.DeveloperSsh="developerSsh",A.DeveloperSshBookmark="developerSshBookmark",A.DeveloperWatchtower="developerWatchtower",A.DeviceListAndroidPhone="deviceListAndroidPhone",A.DeviceListAndroidTablet="deviceListAndroidTablet",A.DeviceListBrave="deviceListBrave",A.DeviceListChrome="deviceListChrome",A.DeviceListCLI="deviceListCLI",A.DeviceListEdge="deviceListEdge",A.DeviceListFirefox="deviceListFirefox",A.DeviceListGeneric="deviceListGeneric",A.DeviceListIMac="deviceListIMac",A.DeviceListIPad="deviceListIPad",A.DeviceListIPhone="deviceListIPhone",A.DeviceListMacbookPro="deviceListMacbookPro",A.DeviceListOpera="deviceListOpera",A.DeviceListPC="deviceListPC",A.DeviceListPCLaptop="deviceListPCLaptop",A.DeviceListBraveExtension="deviceListBraveExtension",A.DeviceListChromeExtension="deviceListChromeExtension",A.DeviceListOperaExtension="deviceListOperaExtension",A.DeviceListFirefoxExtension="deviceListFirefoxExtension",A.DeviceListEdgeExtension="deviceListEdgeExtension",A.DeviceListSafariExtension="deviceListSafariExtension",A.DeviceListSafari="deviceListSafari",A.DeviceVerified="deviceVerified",A.Document="document",A.DocumentImage="documentImage",A.DocumentSpreadsheet="documentSpreadsheet",A.DocumentText="documentText",A.DocumentZip="documentZip",A.DriverLicense="driverLicense",A.Email="email",A.EmptyAllItems="emptyAllItems",A.EmptyArchive="emptyArchive",A.EmptyFavorites="emptyFavorites",A.EmptyNoVaults="emptyNoVaults",A.EmptyRecentlyDeleted="emptyRecentlyDeleted",A.EmptyWatchtowerCompromisedWebsites="emptyWatchtowerCompromisedWebsites",A.EmptyWatchtowerDashboard="emptyWatchtowerDashboard",A.EmptyWatchtowerExpiring="emptyWatchtowerExpiring",A.EmptyWatchtowerInactiveMfa="emptyWatchtowerInactiveMfa",A.EmptyWatchtowerInWrongAccount="emptyWatchtowerInWrongAccount",A.EmptyWatchtowerPasskeyAvailable="emptyWatchtowerPasskeyAvailable",A.EmptyWatchtowerPasswordStrength="emptyWatchtowerPasswordStrength",A.EmptyWatchtowerDuplicateItem="emptyWatchtowerDuplicateItem",A.EmptyWatchtowerReusedPasswords="emptyWatchtowerReusedPasswords",A.EmptyWatchtowerUnsecuredWebsites="emptyWatchtowerUnsecuredWebsites",A.EmptyWatchtowerVulnerablePasswords="emptyWatchtowerVulnerablePasswords",A.EmptyWatchtowerWeakPasswords="emptyWatchtowerWeakPasswords",A.Everything="everything",A.Fastmail="fastmail",A.Favorites="favorites",A.Git="git",A.HighlightsBrowserExtension="highlightsBrowserExtension",A.HighlightsDevices="highlightsDevices",A.HighlightsFaceID="highlightsFaceID",A.HighlightsFamily="highlightsFamily",A.HighlightsHandUp="highlightsHandUp",A.HighlightsItemCatalog="highlightsItemCatalog",A.HighlightsItemSharing="highlightsItemSharing",A.HighlightsKey="highlightsKey",A.HighlightsManaging="highlightsManaging",A.HighlightsPasswordlessAuthentication="highlightsPasswordlessAuthentication",A.HighlightsPerformance="highlightsPerformance",A.HighlightsPlatforms="highlightsPlatforms",A.HighlightsQuickAccess="highlightsQuickAccess",A.HighlightsRedesign="highlightsRedesign",A.HighlightsSecurity="highlightsSecurity",A.HighlightsStrongPasswords="highlightsStrongPasswords",A.HighlightsSupport="highlightsSupport",A.HighlightsTeam="highlightsTeam",A.HighlightsWatchtower="highlightsWatchtower",A.HighlightsWebsite="highlightsWebsite",A.HomeAllItems="homeAllItems",A.HomeArchived="homeArchived",A.HomeCategories="homeCategories",A.HomeFavorites="homeFavorites",A.HomeFrequentlyUsed="homeFrequentlyUsed",A.HomeNearby="homeNearby",A.HomePinned="homePinned",A.HomeRecentlyAdded="homeRecentlyAdded",A.HomeRecentlyCreated="homeRecentlyCreated",A.HomeRecentlyDeleted="homeRecentlyDeleted",A.HomeRecentlyModified="homeRecentlyModified",A.HomeRecentlyUsed="homeRecentlyUsed",A.HomeScreenBillboardAppleWatchTransparent="homeScreenBillboardAppleWatchTransparent",A.HomeScreenBillboardCustomizeHomeTransparent="homeScreenBillboardCustomizeHomeTransparent",A.HomeScreenBillboardIllustrationAppleWatch="homeScreenBillboardIllustrationAppleWatch",A.HomeScreenBillboardIllustrationAutoFill="homeScreenBillboardIllustrationAutoFill",A.HomeScreenBillboardIllustrationCustomizeHome="homeScreenBillboardIllustrationCustomizeHome",A.HomeScreenBillboardIllustrationPinnedFields="homeScreenBillboardIllustrationPinnedFields",A.HomeScreenBillboardIllustrationSafariExtension="homeScreenBillboardIllustrationSafariExtension",A.HomeScreenBillboardPinnedFieldsTransparent="homeScreenBillboardPinnedFieldsTransparent",A.HomeScreenBillboardProfileTransparent="homeScreenBillboardProfileTransparent",A.HomeScreenBillboardSafariTransparent="homeScreenBillboardSafariTransparent",A.HomeScreenBillboardTipsTransparent="homeScreenBillboardTipsTransparent",A.HomeScreenBillboardWarningTransparent="homeScreenBillboardWarningTransparent",A.HomeScreenInterstitialAppleWatch="homeScreenInterstitialAppleWatch",A.HomeScreenInterstitialEmptyHome="homeScreenInterstitialEmptyHome",A.HomeScreenInterstitialPinnedFields="homeScreenInterstitialPinnedFields",A.HomeTags="homeTags",A.HomeTips="homeTips",A.HomeVaults="homeVaults",A.HomeWatchtower="homeWatchtower",A.Identity="identity",A.ImportGuideBitwarden="importGuideBitwarden",A.ImportGuideCsv="importGuideCsv",A.ImportGuideDashlane="importGuideDashlane",A.ImportGuideDelinea="importGuideDelinea",A.ImportGuideKeypass="importGuideKeypass",A.ImportGuideKeypassXc="importGuideKeypassXc",A.ImportGuideLastPass="importGuideLastPass",A.ImportGuideMemorized="importGuideMemorized",A.ImportGuideOnePassword="importGuideOnePassword",A.ImportGuidePen="importGuidePen",A.ImportGuideRoboForm="importGuideRoboForm",A.ImportGuideSpreadsheet="importGuideSpreadsheet",A.ItemSharing="itemSharing",A.KeyEmpty="keyEmpty",A.KeyError="keyError",A.KeyFilled="keyFilled",A.LabsHero="labsHero",A.Login="login",A.ManageAccountBusiness="manageAccountBusiness",A.ManageAccountData="manageAccountData",A.ManageAccountDevices="manageAccountDevices",A.ManageAccountFamily="manageAccountFamily",A.ManageAccountIndividual="manageAccountIndividual",A.ManageAccountPeople="manageAccountPeople",A.ManageAccountSubscription="manageAccountSubscription",A.ManageAccountVaults="manageAccountVaults",A.ManageAccountTeam="manageAccountTeam",A.MedicalRecord="medicalRecord",A.Membership="membership",A.OnePasswordVerified="onePasswordVerified",A.OperatingSystemAndroid="operatingSystemAndroid",A.OperatingSystemIos="operatingSystemIos",A.OperatingSystemLinux="operatingSystemLinux",A.OperatingSystemMac="operatingSystemMac",A.OperatingSystemOther="operatingSystemOther",A.OperatingSystemWindows="operatingSystemWindows",A.OutdoorLicense="outdoorLicense",A.Passkey="passkey",A.Passport="passport",A.Password="password",A.PersonVerified="personVerified",A.PinUnlockSettings="pinUnlockSettings",A.PinUnlockWarning="pinUnlockWarning",A.Placeholder="placeholder",A.PrivacyCom="privacyCom",A.Profile="profile",A.RecentlyCreated="recentlyCreated",A.RecentlyDeleted="recentlyDeleted",A.Rewards="rewards",A.Router="router",A.Search="search",A.SecureNote="secureNote",A.Server="server",A.SettingsAbout="settingsAbout",A.SettingsAccounts="settingsAccounts",A.SettingsAdvanced="settingsAdvanced",A.SettingsAppearance="settingsAppearance",A.SettingsAutoFill="settingsAutoFill",A.SettingsBrowser="settingsBrowser",A.SettingsCollections="settingsCollections",A.SettingsDeveloper="settingsDeveloper",A.SettingsGeneral="settingsGeneral",A.SettingsHelp="settingsHelp",A.SettingsLabs="settingsLabs",A.SettingsLabsExperimentFeatureFlags="settingsLabsExperimentFeatureFlags",A.SettingsLabsExperimentPrivacyMode="settingsLabsExperimentPrivacyMode",A.SettingsNotifications="settingsNotifications",A.SettingsPrivacy="settingsPrivacy",A.SettingsReview="settingsReview",A.SettingsSafariExtension="settingsSafariExtension",A.SettingsSecurity="settingsSecurity",A.SignIn1Password="signIn1Password",A.SignInAndRecovery="signInAndRecovery",A.SignInBannerIllustration="signInBannerIllustration",A.SignInEmergencyKit="signInEmergencyKit",A.SignInGoogle="signInGoogle",A.SignInManual="signInManual",A.SignInOkta="signInOkta",A.SignInPasskey="signInPasskey",A.SignInScanQR="signInScanQR",A.SignInSSO="signInSSO",A.Snippet="snippet",A.SocialSecurityNumber="socialSecurityNumber",A.SoftwareLicense="softwareLicense",A.Ssh="ssh",A.SsoDeviceIcon="ssoDeviceIcon",A.SsoLoginAmazon="ssoLoginAmazon",A.SsoLoginAmazonAttachment="ssoLoginAmazonAttachment",A.SsoLoginApple="ssoLoginApple",A.SsoLoginAppleAttachment="ssoLoginAppleAttachment",A.SsoLoginFacebook="ssoLoginFacebook",A.SsoLoginFacebookAttachment="ssoLoginFacebookAttachment",A.SsoLoginGitHub="ssoLoginGitHub",A.SsoLoginGitHubAttachment="ssoLoginGitHubAttachment",A.SsoLoginGoogle="ssoLoginGoogle",A.SsoLoginGoogleAttachment="ssoLoginGoogleAttachment",A.SsoLoginMicrosoft="ssoLoginMicrosoft",A.SsoLoginMicrosoftAttachment="ssoLoginMicrosoftAttachment",A.SsoLoginTwitter="ssoLoginTwitter",A.SsoLoginTwitterAttachment="ssoLoginTwitterAttachment",A.SsoLoginOkta="ssoLoginOkta",A.SsoLoginOktaAttachment="ssoLoginOktaAttachment",A.SsoLoginSlack="ssoLoginSlack",A.SsoLoginSlackAttachment="ssoLoginSlackAttachment",A.SsoLoginDiscord="ssoLoginDiscord",A.SsoLoginDiscordAttachment="ssoLoginDiscordAttachment",A.Suggestions="suggestions",A.Tag="tag",A.Tombstone="tombstone",A.TutorialGlobe="tutorialGlobe",A.UnknownCategory="unknownCategory",A.Vault="vault",A.VaultPlaceholder="vaultPlaceholder",A.VaultGuarded="vaultGuarded",A.Watchtower="watchtower",A.Verifier="verifier"})(rr||(rr={}));var ZlA;(function(A){A.Syncing="syncing",A.NotSyncedYet="notSyncedYet",A.OutOfSync="outOfSync",A.InSync="inSync",A.Unknown="unknown"})(ZlA||(ZlA={}));var AcA;(function(A){A.Accepted="Accepted",A.UserFallBack="UserFallBack",A.Cancelled="Cancelled",A.Denied="Denied",A.NotEnabled="NotEnabled"})(AcA||(AcA={}));var jcA;(function(A){A.ChooseFile="chooseFile",A.ChoosePhoto="choosePhoto",A.CapturePhoto="capturePhoto",A.ScanDocument="scanDocument"})(jcA||(jcA={}));var ecA;(function(A){A.DayMonthYear="dayMonthYear",A.MonthYear="monthYear"})(ecA||(ecA={}));var tcA;(function(A){A.WrongAccount="wrongAccount",A.WrongAccountByPolicy="wrongAccountByPolicy"})(tcA||(tcA={}));var rcA;(function(A){A.ShareWithFamily="ShareWithFamily",A.ShareWithTeam="ShareWithTeam"})(rcA||(rcA={}));var acA;(function(A){A.Enabled="enabled",A.DisabledByUser="disabledByUser",A.DisabledByAdmin="disabledByAdmin",A.NoMapNoReason="noMapNoReason"})(acA||(acA={}));var ncA;(function(A){A.DefaultKeyboard="DefaultKeyboard",A.NumberPad="NumberPad",A.NamePhonePad="NamePhonePad",A.NumbersAndPunctuation="NumbersAndPunctuation",A.EmailAddress="EmailAddress",A.Url="Url"})(ncA||(ncA={}));var ocA;(function(A){A.None="None",A.Words="Words",A.Sentences="Sentences",A.AllCharacters="AllCharacters"})(ocA||(ocA={}));var icA;(function(A){A.ChooseFile="chooseFile",A.ChoosePhoto="choosePhoto",A.RemoveIcon="removeIcon"})(icA||(icA={}));var scA;(function(A){A.Text="text",A.Url="url",A.Email="email",A.Address="address",A.DayMonthYear="dayMonthYear",A.MonthYear="monthYear",A.OneTimePassword="oneTimePassword",A.Password="password",A.Phone="phone",A.SecurityQuestion="securityQuestion",A.File="file",A.SshKey="sshKey",A.SsoLogin="ssoLogin"})(scA||(scA={}));var lcA;(function(A){A.ItemCreated="itemCreated",A.ItemSaved="itemSaved",A.ItemConvertedToLogin="itemConvertedToLogin"})(lcA||(lcA={}));var ccA;(function(A){A.Top="Top",A.Middle="Middle",A.Bottom="Bottom",A.TopAndBottom="TopAndBottom"})(ccA||(ccA={}));var dcA;(function(A){A.Informational="informational",A.Success="success",A.Warning="warning",A.Critical="critical"})(dcA||(dcA={}));var kcA;(function(A){A.Full="full",A.Long="long",A.Medium="medium",A.Short="short"})(kcA||(kcA={}));var ucA;(function(A){A.Single="single",A.Double="double"})(ucA||(ucA={}));var pcA;(function(A){A.Edit="edit",A.Autofill="autofill",A.OpenAndFill="openAndFill",A.OpenUrl="openUrl"})(pcA||(pcA={}));var mcA;(function(A){A.Normal="Normal",A.Warning="Warning"})(mcA||(mcA={}));var EcA;(function(A){A.BaseApp="baseApp",A.AutoFillItemSelect="autoFillItemSelect",A.AutoFillFieldSelect="autoFillFieldSelect"})(EcA||(EcA={}));var BcA;(function(A){A.Default="default",A.Destructive="destructive",A.Primary="primary",A.Transparent="transparent"})(BcA||(BcA={}));var gcA;(function(A){A.Success="success"})(gcA||(gcA={}));var hcA;(function(A){A.AutoFill="autoFill",A.Biometrics="biometrics",A.BiometricsFace="biometricsFace",A.SystemTray="systemTray",A.BrowserExtension="browserExtension",A.Telemetry="telemetry"})(hcA||(hcA={}));var qcA;(function(A){A.AutoFill="AutoFill",A.Biometrics="Biometrics",A.SystemTray="SystemTray",A.MigrateDataFromOpSeven="MigrateDataFromOpSeven",A.Telemetry="Telemetry"})(qcA||(qcA={}));var vcA;(function(A){A.Strong="strong",A.Moderate="moderate"})(vcA||(vcA={}));var xcA;(function(A){A.Csv="Csv",A.OnePif2="OnePif2",A.OnePux="OnePux"})(xcA||(xcA={}));var fcA;(function(A){A.Critical="critical",A.Warning="warning"})(fcA||(fcA={}));var GcA;(function(A){A.OpenSsh="OpenSSH",A.Pkcs8="PKCS#8",A.Pkcs1="PKCS#1"})(GcA||(GcA={}));var FcA;(function(A){A.Finished="Finished",A.Running="Running",A.Failed="Failed"})(FcA||(FcA={}));var bcA;(function(A){A.Enabled="ENABLED",A.Pending="PENDING"})(bcA||(bcA={}));var n0;(function(A){A.Uploading="Uploading",A.Available="Available",A.Missing="Missing"})(n0||(n0={}));var sx;(function(A){A.Characters="Characters",A.Words="Words",A.Pin="Pin",A.PasswordRules="PasswordRules"})(sx||(sx={}));var eu;(function(A){A.Digits="Digits",A.DigitsAndSymbols="DigitsAndSymbols",A.Spaces="Spaces",A.Hyphens="Hyphens",A.Underscores="Underscores",A.Periods="Periods",A.Commas="Commas"})(eu||(eu={}));var o0;(function(A){A.FullWords="FullWords",A.Syllables="Syllables",A.ThreeLetters="ThreeLetters"})(o0||(o0={}));var Vg;(function(A){A.Enabled="enabled",A.Disabled="disabled",A.Deleted="deleted"})(Vg||(Vg={}));var l1;(function(A){A.Chrome="chrome",A.Firefox="firefox",A.SafariMacos="safari-macos",A.SafariIos="safari-ios"})(l1||(l1={}));var c1;(function(A){A.Brex="Brex"})(c1||(c1={}));var ycA;(function(A){A.Zero="zero",A.One="one"})(ycA||(ycA={}));var $cA;(function(A){A.Twelve="twelve",A.TwentyFour="twentyFour"})($cA||($cA={}));var wcA;(function(A){A.Raw="raw",A.Padded="padded"})(wcA||(wcA={}));var IcA;(function(A){A.Csv="csv",A.Json="json",A.OnePux="onePux"})(IcA||(IcA={}));var DcA;(function(A){A.Button="Button",A.Link="Link"})(DcA||(DcA={}));var OcA;(function(A){A.Green="green",A.Grey="grey",A.Red="red",A.Purple="purple"})(OcA||(OcA={}));var J6;(function(A){A.Amazon="amazon",A.Apple="apple",A.Discord="discord",A.Facebook="facebook",A.GitHub="github",A.Google="google",A.Microsoft="microsoft",A.Okta="okta",A.Slack="slack",A.Twitter="twitter"})(J6||(J6={}));var PcA;(function(A){A.Active="active",A.Deleted="deleted",A.Archived="archived"})(PcA||(PcA={}));var CcA;(function(A){A.Large="large",A.Medium="medium"})(CcA||(CcA={}));var HcA;(function(A){A.RSAOAEP="RSA-OAEP",A.RSAOAEP256="RSA-OAEP-256",A.A256GCM="A256GCM",A.ECDHES="ECDH-ES",A.ES256="ES256"})(HcA||(HcA={}));var TcA;(function(A){A.RSA="RSA",A.Oct="oct",A.EC="EC",A.OKP="OKP"})(TcA||(TcA={}));var KcA;(function(A){A.Sign="sign",A.Verify="verify",A.Encrypt="encrypt",A.Decrypt="decrypt",A.WrapKey="wrapKey",A.UnwrapKey="unwrapKey",A.DeriveKey="deriveKey",A.DeriveBits="deriveBits"})(KcA||(KcA={}));var ScA;(function(A){A.WhenUnlocked="WhenUnlocked",A.AfterFirstUnlock="AfterFirstUnlock",A.WhenPasscodeSetThisDeviceOnly="WhenPasscodeSetThisDeviceOnly",A.WhenUnlockedThisDeviceOnly="WhenUnlockedThisDeviceOnly",A.AfterFirstUnlockThisDeviceOnly="AfterFirstUnlockThisDeviceOnly"})(ScA||(ScA={}));var McA;(function(A){A.AccountOverview="accountOverview",A.YourDetails="yourDetails",A.People="people",A.TrustedDevices="trustedDevices",A.Telemetry="telemetry",A.SetUpAnotherDevice="setUpAnotherDevice",A.Subscription="subscription",A.EmergencyKit="emergencyKit",A.Vaults="vaults",A.SignInAndRecovery="signInAndRecovery"})(McA||(McA={}));var _cA;(function(A){A.Text="text",A.Numeric="numeric",A.Password="password"})(_cA||(_cA={}));var LcA;(function(A){A.GreyscaleWhite="greyscaleWhite",A.GreyscaleBlack="greyscaleBlack",A.ShadingHeavy="shadingHeavy",A.ShadingExtraFaint="shadingExtraFaint",A.ReadableGreen="readableGreen",A.ReadablePurple="readablePurple",A.ReadableBlue="readableBlue",A.ReadableRed="readableRed",A.TintGreen="tintGreen",A.TintPurple="tintPurple",A.TintBlue="tintBlue",A.TintRed="tintRed"})(LcA||(LcA={}));var NcA;(function(A){A.CategoryBackground="categoryBackground",A.Invite="invite"})(NcA||(NcA={}));var zcA;(function(A){A.TelemetryOptOut="TelemetryOptOut"})(zcA||(zcA={}));var RcA;(function(A){A.Address="Address",A.Email="Email",A.SecretKey="SecretKey",A.Password="Password"})(RcA||(RcA={}));var JcA;(function(A){A.Leftward="leftward",A.Rightward="rightward"})(JcA||(JcA={}));var UcA;(function(A){A.SignIn="signIn",A.CheckAccount="checkAccount"})(UcA||(UcA={}));var XcA;(function(A){A.Web="web",A.Email="email"})(XcA||(XcA={}));var VcA;(function(A){A.ToggleFullScreen="toggleFullScreen",A.Services="services",A.Hide="hide",A.HideOthers="hideOthers",A.Unhide="unhide",A.ToggleDevTools="toggleDevTools",A.Undo="undo",A.Redo="redo",A.Cut="cut",A.Copy="copy",A.SelectAll="selectAll",A.Close="close",A.Minimize="minimize",A.Zoom="zoom",A.Front="front",A.Paste="paste",A.Reload="reload",A.StartSpeaking="startSpeaking",A.StopSpeaking="stopSpeaking",A.Help="help",A.Window="window",A.EditMenu="editMenu"})(VcA||(VcA={}));var WcA;(function(A){A.None="none",A.Info="info",A.Error="error",A.Question="question",A.Warning="warning"})(WcA||(WcA={}));var YcA;(function(A){A.Home="home",A.Items="items",A.Sidebar="sidebar"})(YcA||(YcA={}));var QcA;(function(A){A.Vaults="vaults",A.Favorites="favorites",A.RecentlyCreated="recentlyCreated",A.RecentlyModified="recentlyModified",A.RecentlyUsed="recentlyUsed",A.FrequentlyUsed="frequentlyUsed",A.Tags="tags",A.AllItems="allItems",A.Archived="archived",A.RecentlyDeleted="recentlyDeleted",A.Categories="categories",A.ItemFieldGroup="itemFieldGroup",A.BillboardGroup="billboardGroup",A.Profile="profile",A.Nearby="nearby",A.ActivationHub="activationHub",A.SecuritySetup="securitySetup"})(QcA||(QcA={}));var ZcA;(function(A){A.NearbyItems="nearbyItems"})(ZcA||(ZcA={}));var AdA;(function(A){A.Home="Home",A.Items="Items",A.Watchtower="Watchtower",A.Verifier="Verifier"})(AdA||(AdA={}));var jdA;(function(A){A.Member="member",A.Organizer="organizer",A.Guest="guest"})(jdA||(jdA={}));var edA;(function(A){A.AuthorizedDriven="authorizedDriven",A.UnauthorizedDriven="unauthorizedDriven"})(edA||(edA={}));var qp;(function(A){A.Locked="Locked",A.Unlocked="Unlocked"})(qp||(qp={}));var tdA;(function(A){A.General="general",A.Appearance="appearance",A.Security="security",A.Privacy="privacy",A.Browser="browser",A.SafariExtension="safariExtension",A.Notifications="notifications",A.AutoFill="autoFill",A.Advanced="advanced",A.Help="help",A.About1Password="about1Password",A.Review="review",A.Developers="developers",A.ManageAccounts="manageAccounts",A.ManageCollections="manageCollections",A.Labs="labs",A.TestUserPreferences="testUserPreferences"})(tdA||(tdA={}));var i0;(function(A){A.Unlock="unlock",A.AuthPrompt="authPrompt",A.Reauthentication="reauthentication"})(i0||(i0={}));var rdA;(function(A){A.InvalidRequest="InvalidRequest",A.UnAuthorizedClient="UnAuthorizedClient",A.AccessDenied="AccessDenied",A.UnSupportedResponseType="UnSupportedResponseType",A.InvalidScope="InvalidScope",A.ServerError="ServerError",A.TemporarilyUnavailable="TemporarilyUnavailable",A.Unknown="Unknown"})(rdA||(rdA={}));var adA;(function(A){A.InvalidRequest="invalid_request",A.InvalidClient="invalid_client",A.InvalidGrant="invalid_grant",A.InvalidScope="invalid_scope",A.UnauthorizedClient="unauthorized_client",A.UnsupportedGrantType="unsupported_grant_type",A.Unknown="unknown"})(adA||(adA={}));var ndA;(function(A){A.SyncAll="syncAll"})(ndA||(ndA={}));var odA;(function(A){A.AccountSignout="AccountSignout",A.Deletion="Deletion",A.Deauthorization="Deauthorization",A.SsoAccountSignout="SsoAccountSignout"})(odA||(odA={}));var idA;(function(A){A.Primary="primary",A.ItemDetails="itemDetails",A.Settings="settings",A.QuickAccess="quickAccess",A.AuthPrompt="authPrompt",A.PasskeyPrompt="passkeyPrompt",A.LargeType="largeType",A.KeyboardShortcutsQX="keyboardShortcutsQX",A.AutofillAccessibility="autofillAccessibility",A.LargeQrCode="largeQrCode",A.None="none"})(idA||(idA={}));var sdA;(function(A){A.Account="account",A.LockedAccount="lockedAccount",A.VaultCollection="vaultCollection"})(sdA||(sdA={}));var ldA;(function(A){A.StandardSearch="standardSearch",A.SmartSearch="smartSearch",A.Meta="meta"})(ldA||(ldA={}));var cdA;(function(A){A.ForceStatusUpdate="forceStatusUpdate",A.ResetAllFlags="resetAllFlags"})(cdA||(cdA={}));var ddA;(function(A){A.Light="light",A.Dark="dark",A.System="system"})(ddA||(ddA={}));var kdA;(function(A){A.Save="save",A.Generate="generate",A.Done="done"})(kdA||(kdA={}));var udA;(function(A){A.Bitwarden="bitwarden",A.Brave="brave",A.Chrome="chrome",A.Csv="csv",A.Dashlane="dashlane",A.Delinea="delinea",A.Edge="edge",A.Firefox="firefox",A.ICloud="iCloud",A.Keepass="keepass",A.KeePassXc="keePassXc",A.LastPass="lastPass",A.OnePux="onePux",A.RoboForm="roboForm",A.Safari="safari",A.Standalone="standalone"})(udA||(udA={}));var d1;(function(A){A.Name="name",A.MainCategory="mainCategory",A.FrequentlyUsed="frequentlyUsed",A.RecentlyUsed="recentlyUsed"})(d1||(d1={}));var pdA;(function(A){A.Light="light",A.Dark="dark",A.System="system"})(pdA||(pdA={}));var mdA;(function(A){A.Error="Error",A.Warn="Warn",A.Info="Info",A.Debug="Debug",A.Trace="Trace"})(mdA||(mdA={}));var lx;(function(A){A.Url="Url",A.Email="Email",A.Phone="Phone",A.MapApple="MapApple",A.MapGoogle="MapGoogle",A.MapDuckDuckGo="MapDuckDuckGo"})(lx||(lx={}));var EdA;(function(A){A.Once="Once",A.Transaction="Transaction",A.Monthly="Monthly",A.Annually="Annually",A.Forever="Forever"})(EdA||(EdA={}));var BdA;(function(A){A.Primary="Primary",A.Secondary="Secondary",A.Tertiary="Tertiary"})(BdA||(BdA={}));var gdA;(function(A){A.AutofillRequestAccessibilityPermissions="AutofillRequestAccessibilityPermissions"})(gdA||(gdA={}));var hdA;(function(A){A.AutofillShortcut="autofillShortcut",A.QuickAccessShortcut="quickAccessShortcut"})(hdA||(hdA={}));var qdA;(function(A){A.ItemList="itemList",A.Item="item",A.Watchtower="watchtower",A.Unknown="unknown"})(qdA||(qdA={}));var vdA;(function(A){A.Clipboard="clipboard",A.Desktop="desktop"})(vdA||(vdA={}));var xdA;(function(A){A.PlainText="plainText",A.Html="html"})(xdA||(xdA={}));var fdA;(function(A){A.Production="Production",A.Beta="Beta",A.Nightly="Nightly"})(fdA||(fdA={}));var Us;(function(A){A.FaceID="faceID",A.TouchID="touchID",A.Passcode="passcode",A.None="none"})(Us||(Us={}));var xE;(function(A){A.SecretKey="secretKey",A.Sso="sso",A.WebAuthn="webAuthn"})(xE||(xE={}));var cx;(function(A){A.Ramp="ramp"})(cx||(cx={}));var fE;(function(A){A.Login="login",A.CreditCard="credit-card",A.ApiKey="api-key",A.CryptoWallet="crypto-wallet"})(fE||(fE={}));var GdA;(function(A){A.LockApp="lockApp"})(GdA||(GdA={}));var FdA;(function(A){A.CreateCollection="CreateCollection",A.ManageCollections="ManageCollections",A.SetUpAnotherDevice="SetUpAnotherDevice",A.AccountsManagement="AccountsManagement",A.AdminDashboard="AdminDashboard",A.Settings="Settings",A.ScanQrCode="ScanQrCode",A.MobileHelpMenu="MobileHelpMenu"})(FdA||(FdA={}));var bdA;(function(A){A.Attention="attention",A.Critical="critical",A.Neutral="neutral",A.Informational="informational",A.Success="success"})(bdA||(bdA={}));var ydA;(function(A){A.InterfaceDensityCompact="interfaceDensityCompact",A.InterfaceDensityComfortable="interfaceDensityComfortable",A.AppIconLight="appIconLight",A.AppIconDark="appIconDark"})(ydA||(ydA={}));var $dA;(function(A){A.Leading="leading",A.Centered="centered",A.Trailing="trailing"})($dA||($dA={}));var wdA;(function(A){A.AnyoneWithTheLink="AnyoneWithTheLink",A.OnlySomePeople="OnlySomePeople"})(wdA||(wdA={}));var IdA;(function(A){A.Modal="Modal",A.ErrorStrip="ErrorStrip"})(IdA||(IdA={}));var DdA;(function(A){A.OneHour="OneHour",A.OneDay="OneDay",A.SevenDays="SevenDays",A.FourteenDays="FourteenDays",A.ThirtyDays="ThirtyDays"})(DdA||(DdA={}));var OdA;(function(A){A.Invisible="Invisible",A.VisibleChecked="VisibleChecked",A.VisibleUnchecked="VisibleUnchecked"})(OdA||(OdA={}));var PdA;(function(A){A.CopyLink="CopyLink",A.ShareLink="ShareLink"})(PdA||(PdA={}));var CdA;(function(A){A.SecretKey="secretKey",A.Sso="sso",A.Passkey="passkey"})(CdA||(CdA={}));var HdA;(function(A){A.Header="header",A.List="list",A.ListFlexible="listFlexible"})(HdA||(HdA={}));var TdA;(function(A){A.QuickAccess="quickAccess",A.Autofill="autofill"})(TdA||(TdA={}));var KdA;(function(A){A.Increment="increment",A.Decrement="decrement",A.Reset="reset"})(KdA||(KdA={}));var dx;(function(A){A.AllItems="allItems",A.AppleWatchAdd="appleWatchAdd",A.AppleWatchRemove="appleWatchRemove",A.Archive="archive",A.ArchiveLarge="archiveLarge",A.BiometricUnlockAppleFaceId="biometricUnlockAppleFaceId",A.BiometricUnlockAppleTouchId="biometricUnlockAppleTouchId",A.BiometricUnlockAppleWatch="biometricUnlockAppleWatch",A.BiometricUnlock="biometricUnlock",A.BiometricUnlockFingerprint="biometricUnlockFingerprint",A.BiometricUnlockWindowsHello="biometricUnlockWindowsHello",A.Cancel="cancel",A.CancelOutline="cancelOutline",A.Checkmark="checkmark",A.CheckmarkCircle="checkmarkCircle",A.CheckmarkFilled="checkmarkFilled",A.ChevronDown="chevronDown",A.ChevronLeft="chevronLeft",A.ChevronRight="chevronRight",A.ChevronUp="chevronUp",A.Circle="circle",A.Close="close",A.CollapsedMenu="collapsedMenu",A.Copy="copy",A.CreditCard="creditCard",A.CustomizeHome="customizeHome",A.Delete="delete",A.DeleteRow="deleteRow",A.Disclosure="disclosure",A.Document="document",A.DocumentEmpty="documentEmpty",A.Download="download",A.DragHandle="dragHandle",A.Dropdown="dropdown",A.Edit="edit",A.Email="email",A.EmergencyKit="emergencyKit",A.ExternalLink="externalLink",A.FavoriteOff="favoriteOff",A.FavoriteOn="favoriteOn",A.Filter="filter",A.Find="find",A.Folder="folder",A.Frozen="frozen",A.Git="git",A.Help="help",A.HelpBubble="helpBubble",A.Hide="hide",A.Import="import",A.Information="information",A.InsertText="insertText",A.Integration="integration",A.ItemHistory="itemHistory",A.ItemSharing="itemSharing",A.Ladybug="ladybug",A.LargeType="largeType",A.Link="link",A.Lock="lock",A.Minus="minus",A.Missing="missing",A.ModeDark="modeDark",A.ModeLight="modeLight",A.ModeSystem="modeSystem",A.Move="move",A.NavigateBack="navigateBack",A.NavigateForward="navigateForward",A.NewWindow="newWindow",A.NoConnection="noConnection",A.NoConnectionLarge="noConnectionLarge",A.NoResults="noResults",A.Notifications="notifications",A.OnePassword="onePassword",A.OnePasswordLocked="onePasswordLocked",A.OpenInBrowser="openInBrowser",A.Overflow="overflow",A.OverflowApple="overflowApple",A.OverflowHorizontal="overflowHorizontal",A.Passkey="passkey",A.Password="password",A.Paste="paste",A.PersonLocation="personLocation",A.Pin="pin",A.PinUnlock="pinUnlock",A.Plus="plus",A.PlusSmall="plusSmall",A.PreviousSize="previousSize",A.Print="print",A.Unpin="unpin",A.QrCodeScan="qrCodeScan",A.RecentlyDeleted="recentlyDeleted",A.RecentlyDeletedLarge="recentlyDeletedLarge",A.Refresh="refresh",A.Report="report",A.Restore="restore",A.Review="review",A.Search="search",A.Select="select",A.Settings="settings",A.SettingsAdvanced="settingsAdvanced",A.Share="share",A.ShareHistory="shareHistory",A.Show="show",A.Sidebar="sidebar",A.SignIn="signIn",A.Sort="sort",A.Suggestions="suggestions",A.TabBarHome="tabBarHome",A.TabBarItems="tabBarItems",A.TabBarSearch="tabBarSearch",A.TabBarSettings="tabBarSettings",A.TabBarVerifier="tabBarVerifier",A.TabBarWatchtower="tabBarWatchtower",A.Tags="tags",A.Terminal="terminal",A.Trash="trash",A.TrashLarge="trashLarge",A.TravelMode="travelMode",A.Twitter="twitter",A.Unlock="unlock",A.UnlockSettingBiometric="unlockSettingBiometric",A.UnlockSettingBiometricDisabled="unlockSettingBiometricDisabled",A.UnlockSettingBiometricAppleFaceId="unlockSettingBiometricAppleFaceId",A.UnlockSettingBiometricAppleFaceIdDisabled="unlockSettingBiometricAppleFaceIdDisabled",A.UnlockSettingBiometricAppleTouchId="unlockSettingBiometricAppleTouchId",A.UnlockSettingBiometricAppleTouchIdDisabled="unlockSettingBiometricAppleTouchIdDisabled",A.UnlockSettingBiometricAppleWatch="unlockSettingBiometricAppleWatch",A.UnlockSettingPassword="unlockSettingPassword",A.UnlockSettingPinUnlock="unlockSettingPinUnlock",A.UnlockSettingPinUnlockDisabled="unlockSettingPinUnlockDisabled",A.Upload="upload",A.User="user",A.Users="users",A.UserSmall="userSmall",A.UsersSmall="usersSmall",A.VerifierAccepted="verifierAccepted",A.VerifierPending="verifierPending",A.VerifierRejected="verifierRejected",A.VerifierShield="verifierShield",A.Warning="warning",A.WarningLarge="warningLarge",A.Watchtower="watchtower",A.WatchtowerCompromisedDomain="watchtowerCompromisedDomain",A.WatchtowerExpiring="watchtowerExpiring",A.WatchtowerReusedPassword="watchtowerReusedPassword",A.WatchtowerTwoFactorAvailable="watchtowerTwoFactorAvailable",A.WatchtowerUnsecuredWebsite="watchtowerUnsecuredWebsite",A.WatchtowerVulnerablePassword="watchtowerVulnerablePassword",A.WatchtowerWeakPassword="watchtowerWeakPassword",A.WatchtowerDuplicateItem="watchtowerDuplicateItem",A.WatchtowerWrongAccount="watchtowerWrongAccount",A.WhatsApp="whatsApp"})(dx||(dx={}));var fr;(function(A){A.ImportantEphemeral="importantEphemeral",A.Persistent="persistent",A.Ephemeral="ephemeral"})(fr||(fr={}));var tu;(function(A){A.AppleOtpAuth="apple-otpauth",A.OtpAuth="otpauth",A.Yjotp="yjotp"})(tu||(tu={}));var SdA;(function(A){A.New="New",A.Existing="Existing"})(SdA||(SdA={}));var MdA;(function(A){A.View="view",A.Edit="edit",A.Manage="manage"})(MdA||(MdA={}));var _dA;(function(A){A.NoViewersRemainingAndUserCanManageVaults="noViewersRemainingAndUserCanManageVaults",A.NoViewersRemainingAndUserCannotManageVaults="noViewersRemainingAndUserCannotManageVaults",A.YouCannotViewAndUserCanManageVaults="youCannotViewAndUserCanManageVaults",A.YouCannotViewAndUserCannotManageVaults="youCannotViewAndUserCannotManageVaults"})(_dA||(_dA={}));var LdA;(function(A){A.View="view",A.ViewAndEdit="viewAndEdit",A.Manage="manage",A.ManageAndView="manageAndView",A.FullAccess="fullAccess",A.Custom="custom"})(LdA||(LdA={}));var NdA;(function(A){A.CompromisedLogins="compromisedLogins",A.VulnerablePasswords="vulnerablePasswords",A.WeakPasswords="weakPasswords",A.UnsecuredUrl="unsecuredUrl",A.DuplicatePassword="duplicatePassword",A.TwoFactorAvailable="twoFactorAvailable",A.PasskeyAvailable="passkeyAvailable",A.Expiring="expiring",A.LastpassImpacted="lastpassImpacted",A.WrongAccount="wrongAccount",A.DuplicateItem="duplicateItem",A.ConflictingShortcut="conflictingShortcut",A.DeveloperWatchtower="developerWatchtower",A.RecoveryCodes="recoveryCodes"})(NdA||(NdA={}));var zdA;(function(A){A.SlideOne="SlideOne",A.SlideTwo="SlideTwo",A.SlideThree="SlideThree",A.SlideFour="SlideFour",A.SlideFive="SlideFive"})(zdA||(zdA={}));var RdA;(function(A){A.Basic="basic",A.Extended="extended"})(RdA||(RdA={}));var JdA;(function(A){A.Required="required",A.Optional="optional",A.Excluded="excluded"})(JdA||(JdA={}));var UdA;(function(A){A.Group="group",A.User="user"})(UdA||(UdA={}));var XdA;(function(A){A.All="All",A.Locked="Locked",A.Unlocked="Unlocked"})(XdA||(XdA={}));var VdA;(function(A){A.ExampleAction="example_action",A.ClipboardCleared="clipboard_cleared",A.SearchHistoryCleared="search_history_cleared",A.ExportSucceeded="export_succeeded",A.SecurityPresetAppliedEasyAndSecure="security_preset_applied_easy_and_secure",A.SecurityPresetAppliedWorkdaySecurity="security_preset_applied_workday_security",A.SecurityPresetAppliedStrictestSecurity="security_preset_applied_strictest_security",A.SecurityPresetAppliedCustom="security_preset_applied_custom",A.UserFeedbackSuccessful="user_feedback_successful",A.UserFeedbackUnsuccessful="user_feedback_unsuccessful",A.VerifierSendingChallenge="verifier_sent_challenge",A.VerifierSendingConfirmation="verifier_sending_confirmation",A.VerifierSendingRejection="verifier_sending_rejection",A.CreateEnvironment="create_environment",A.DeleteEnvironment="delete_environment",A.RenameEnvironment="rename_environment",A.CreateAwsIntegration="create_aws_integration",A.CreateLocalFileMount="create_local_file_mount",A.PinExtension="pin_extension",A.TelemetryModalOptIn="telemetry_modal_opt_in",A.TelemetryModalOptOut="telemetry_modal_opt_out",A.ManageAccountDataUsageOptIn="manage_account_data_usage_opt_in",A.ManageAccountDataUsageOptOut="manage_account_data_usage_opt_out"})(VdA||(VdA={}));var WdA;(function(A){A.Success="success",A.Failed="failed"})(WdA||(WdA={}));var YdA;(function(A){A.Shipping="shipping",A.Billing="billing"})(YdA||(YdA={}));var kx;(function(A){A.UnverifiedUser="UnverifiedUser",A.AddressInUse="AddressInUse",A.RateLimit="RateLimit",A.OverQuota="OverQuota",A.RequestError="RequestError",A.InternalError="InternalError"})(kx||(kx={}));var QdA;(function(A){A.RegionMatchesAnAccount="regionMatchesAnAccount",A.RegionWillChange="regionWillChange",A.InvalidMyceliumData="invalidMyceliumData"})(QdA||(QdA={}));var ZdA;(function(A){A.Interrupted="Interrupted",A.NoCredential="NoCredential",A.UserCanceled="UserCanceled",A.Unknown="Unknown",A.UnexpectedCredentialType="UnexpectedCredentialType",A.ApplicationError="ApplicationError"})(ZdA||(ZdA={}));var AkA;(function(A){A.Error="Error",A.Success="Success"})(AkA||(AkA={}));var jkA;(function(A){A.Created="created",A.Error="error"})(jkA||(jkA={}));var ekA;(function(A){A.Deleted="deleted",A.Error="error"})(ekA||(ekA={}));var tkA;(function(A){A.Removed="removed",A.NotFound="notFound",A.NotConfirmed="notConfirmed"})(tkA||(tkA={}));var rkA;(function(A){A.Deleted="Deleted",A.Error="Error"})(rkA||(rkA={}));var akA;(function(A){A.AccountNotFound="accountNotFound",A.AccountLocked="accountLocked"})(akA||(akA={}));var nkA;(function(A){A.InvalidEmail="invalidEmail",A.InvalidSignInAddress="invalidSignInAddress",A.ServerRequestFailed="serverRequestFailed"})(nkA||(nkA={}));var okA;(function(A){A.Generic="generic"})(okA||(okA={}));var ikA;(function(A){A.FailedToGetAccount="failedToGetAccount",A.FailedToCheckDeviceHealth="failedToCheckDeviceHealth"})(ikA||(ikA={}));var skA;(function(A){A.ConnectionFailed="connectionFailed",A.AccountNotFound="accountNotFound",A.AccountLocked="accountLocked",A.UserGuest="userGuest",A.UserSuspended="userSuspended",A.FilterVaultNotFound="filterVaultNotFound",A.ServerRequestFailed="serverRequestFailed",A.Internal="internal"})(skA||(skA={}));var lkA;(function(A){A.NoItemsFound="noItemsFound"})(lkA||(lkA={}));var ckA;(function(A){A.Internal="internal"})(ckA||(ckA={}));var dkA;(function(A){A.NetworkConnectionFailed="networkConnectionFailed",A.AuthorizationAccountNotFound="authorizationAccountNotFound",A.AuthorizationAccountLocked="authorizationAccountLocked",A.AuthorizationUserGuest="authorizationUserGuest",A.AuthorizationUserSuspended="authorizationUserSuspended",A.SpecialFilterVaultNotFound="specialFilterVaultNotFound",A.SpecialFilterVaultCannotManageAccess="specialFilterVaultCannotManageAccess"})(dkA||(dkA={}));var kkA;(function(A){A.ClientError="clientError",A.ItemEntityIdParseError="itemEntityIdParseError",A.ItemNotFound="itemNotFound",A.CouldNotLoadPreviousItemVersion="couldNotLoadPreviousItemVersion",A.CouldNotRestorePreviousItemVersion="couldNotRestorePreviousItemVersion"})(kkA||(kkA={}));var ukA;(function(A){A.Success="success",A.Failed="failed",A.Error="error"})(ukA||(ukA={}));var pkA;(function(A){A.Success="success",A.Error="error"})(pkA||(pkA={}));var mkA;(function(A){A.ConnectionFailed="connectionFailed",A.AccountNotFound="accountNotFound",A.AccountLocked="accountLocked",A.AccountFrozen="accountFrozen",A.AccountNotFamily="accountNotFamily",A.UserGuest="userGuest",A.UserSuspended="userSuspended",A.VaultNotFound="vaultNotFound",A.VaultAccessCannotBeManaged="vaultAccessCannotBeManaged",A.PermissionMissingManage="permissionMissingManage",A.Internal="internal"})(mkA||(mkA={}));var EkA;(function(A){A.Error="Error",A.Success="Success"})(EkA||(EkA={}));var BkA;(function(A){A.Renamed="renamed",A.Error="error"})(BkA||(BkA={}));var gkA;(function(A){A.Android="Android",A.Apple="Apple",A.Mac="Mac",A.MacSystemPassword="MacSystemPassword"})(gkA||(gkA={}));var hkA;(function(A){A.Updated="updated",A.Error="error"})(hkA||(hkA={}));var qkA;(function(A){A.Invalid="invalid"})(qkA||(qkA={}));var vkA;(function(A){A.BadLength="badLength",A.BadVersion="badVersion"})(vkA||(vkA={}));var xkA;(function(A){A.Empty="empty",A.MissingEnterpriseSubdomain="missingEnterpriseSubdomain",A.BadDomain="badDomain",A.MissingDomain="missingDomain",A.LooksLikeEmail="looksLikeEmail",A.ParseError="parseError"})(xkA||(xkA={}));var fkA;(function(A){A.CannotRemoveReadWithoutManage="cannotRemoveReadWithoutManage"})(fkA||(fkA={}));var GkA;(function(A){A.NoAppStoreProvided="noAppStoreProvided",A.CannotMakePayment="cannotMakePayment",A.PurchaseFailed="purchaseFailed",A.ProductNotFound="productNotFound",A.CannotDecodeProductIdentifier="cannotDecodeProductIdentifier",A.NoAppStoreResult="noAppStoreResult",A.FailedToDeserializeResponse="failedToDeserializeResponse",A.ExistingPurchaseInProgress="existingPurchaseInProgress",A.UnsupportedPlatform="unsupportedPlatform"})(GkA||(GkA={}));var FkA;(function(A){A.Check="Check",A.MarkAsShown="MarkAsShown"})(FkA||(FkA={}));var bkA;(function(A){A.Granted="granted",A.NotGranted="notGranted"})(bkA||(bkA={}));var ykA;(function(A){A.NotDetermined="notDetermined",A.Denied="denied",A.Authorized="authorized",A.Provisional="provisional",A.Ephemeral="ephemeral",A.Unknown="unknown"})(ykA||(ykA={}));var $kA;(function(A){A.Cli="Cli",A.Ssh="Ssh",A.DeveloperEnvironment="DeveloperEnvironment"})($kA||($kA={}));var wkA;(function(A){A.CredentialsSentSuccessfully="credentialsSentSuccessfully",A.IncorrectCodeChosen="incorrectCodeChosen",A.PromptTimeout="promptTimeout",A.PromptDenied="promptDenied",A.NetworkError="networkError",A.ChannelClosed="channelClosed",A.FeatureDisabled="featureDisabled"})(wkA||(wkA={}));var IkA;(function(A){A.DeviceUnlocked="DeviceUnlocked",A.DeviceWoke="DeviceWoke"})(IkA||(IkA={}));var DkA;(function(A){A.Chrome="chrome",A.Firefox="firefox",A.SafariMacos="safari-macos",A.SafariIos="safari-ios"})(DkA||(DkA={}));var OkA;(function(A){A.UrlParseFailed="UrlParseFailed",A.TemplateParseFailed="TemplateParseFailed",A.FailedToFindValueForFieldIdentifier="FailedToFindValueForFieldIdentifier",A.FailedToGenerateLargeType="FailedToGenerateLargeType",A.FailedToGenerateWatchtowerReport="FailedToGenerateWatchtowerReport",A.SshKeyParseFailed="SshKeyParseFailed",A.FailedToFindTemplateField="FailedToFindTemplateField",A.InvalidTemplateType="InvalidTemplateType"})(OkA||(OkA={}));var PkA;(function(A){A.AuthenticationSuccessful="AuthenticationSuccessful",A.AuthenticationFailed="AuthenticationFailed",A.UserCancel="UserCancel",A.UserFallBack="UserFallBack",A.SystemCancel="SystemCancel",A.PasscodeNotSet="PasscodeNotSet",A.BiometryNotAvailable="BiometryNotAvailable",A.BiometryNotEnrolled="BiometryNotEnrolled",A.BiometryLockout="BiometryLockout",A.AppCancel="AppCancel",A.InvalidContext="InvalidContext",A.NotInteractive="NotInteractive",A.WatchNotAvailable="WatchNotAvailable",A.LocalizedStringsFailure="LocalizedStringsFailure",A.FailureReasonUnknown="FailureReasonUnknown",A.Timeout="Timeout",A.BiometryAlreadyInProgress="BiometryAlreadyInProgress"})(PkA||(PkA={}));var CkA;(function(A){A.None="None",A.Biometry="Biometry",A.DeviceCredential="DeviceCredential",A.BiometryOrDeviceCredential="BiometryOrDeviceCredential"})(CkA||(CkA={}));var HkA;(function(A){A.MainAppNotRunning="MainAppNotRunning"})(HkA||(HkA={}));var ux;(function(A){A.MainAppNotRunning="MainAppNotRunning",A.MainAppOpenTimeout="MainAppOpenTimeout",A.CannotOpenMainApp="CannotOpenMainApp",A.UnknownInvocation="UnknownInvocation",A.BrowserHelperNotRegistered="BrowserHelperNotRegistered"})(ux||(ux={}));var k1;(function(A){A.BrowserSignatureInvalid="BrowserSignatureInvalid",A.UnknownBrowser="UnknownBrowser"})(k1||(k1={}));var TkA;(function(A){A.Success="success",A.Failed="failed"})(TkA||(TkA={}));var Ml;(function(A){A.Visa="Visa",A.Mastercard="Mastercard",A.AmericanExpress="AmericanExpress",A.Discover="Discover",A.Jcb="Jcb",A.Maestro="Maestro",A.VisaElectron="VisaElectron",A.UnionPay="UnionPay"})(Ml||(Ml={}));var KkA;(function(A){A.Create="webauthn.create",A.Get="webauthn.get",A.PaymentGet="payment.get"})(KkA||(KkA={}));var SkA;(function(A){A.InvalidBrowserSignature="InvalidBrowserSignature",A.UnsupportedBrowser="UnsupportedBrowser",A.DoesNotMatchTeam="DoesNotMatchTeam",A.NotSigned="NotSigned",A.MissingRequirementInfo="MissingRequirementInfo"})(SkA||(SkA={}));var MkA;(function(A){A.FeatureFlagsLabsScreen="feature_flags_labs_screen",A.SetUpAnotherDeviceModal="set_up_another_device_modal",A.SetUpAnotherDeviceScreen="set_up_another_device_screen",A.HomepageScreen="homepage_screen",A.WatchtowerScreen="watchtower_screen",A.StartHereModal="start_here_modal",A.StartHereScreen="start_here_screen",A.AllItemsScreen="all_items_screen",A.AddItemsChooseMethodScreen="add_items_choose_method_screen",A.MigrateYourDataScreen="migrate_your_data_screen",A.PinExtensionScreen="pin_extension_screen",A.GetExtensionScreen="get_extension_screen",A.SetUpAutofillScreen="set_up_autofill_screen",A.PracticeSaveAndFillScreen="practice_save_and_fill_screen",A.AddNewItemScreen="add_new_item_screen",A.ProfileMenu="profile_menu",A.InvitePeopleModal="invite_people_modal",A.InvitePeopleScreen="invite_people_screen",A.ItemTemplateScreen="item_template_screen",A.ItemDetailsScreen="item_details_screen",A.ExportDataModal="export_data_modal",A.GitCommitSigningModal="git_commit_signing_modal",A.DeveloperExperienceHomeScreen="developer_experience_home_screen",A.DeveloperExperienceOnboardingCallout="developer_experience_onboarding_callout",A.SettingsDeveloperScreen="settings_developer_screen",A.DeveloperExperienceSshScreen="developer_experience_ssh_screen",A.DeveloperExperienceActivityScreen="developer_experience_activity_screen",A.CopyItemMenu="copy_item_menu",A.ChromeAutofillPromptScreen="chrome_autofill_prompt_screen",A.BraveAutofillPromptScreen="brave_autofill_prompt_screen",A.AutofillSettingsScreen="autofill_settings_screen",A.SettingsLabsScreen="settings_labs_screen",A.QuickAccessSearchFieldResult="quick_access_search_field_result",A.HelpMenu="help_menu",A.SecurityReviewModal="security_review_modal",A.SecuritySettingsScreen="security_settings_screen",A.RecoveryCodeModal="recovery_code_modal",A.AutofillScreen="autofill_screen",A.UserFeedbackScreen="user_feedback_screen",A.VerifierView="verifier_view",A.VerifierComposeScreen="verifier_compose_screen",A.VerifierChallengeReceivedScreen="verifier_challenge_received_screen",A.VerifierResponseReceivedScreen="verifier_response_received_screen",A.DeveloperEnvironmentScreen="developer_environment_screen",A.DeveloperEnvironmentVariablesTab="developer_environment_variables_tab",A.DeveloperEnvironmentDestinationsTab="developer_environment_destinations_tab",A.InstallExtensionWarningModal="install_extension_warning_modal",A.InstallExtensionBlockingModal="install_extension_block_modal",A.InstallExtensionBanner="install_extension_banner",A.EnableExtensionWarningModal="enable_extension_warning_modal",A.EnableExtensionBlockingModal="enable_extension_block_modal",A.AutofillNotEnabledSnackbar="autofill_not_enabled_snackbar"})(MkA||(MkA={}));var _kA;(function(A){A.Button="button",A.TextLink="text_link",A.Modal="modal",A.Screen="screen",A.MediaCard="mediacard",A.Switch="switch",A.SwitchOn="switch_on",A.SwitchOff="switch_off",A.CheckboxOn="checkbox_on",A.CheckboxOff="checkbox_off",A.ToolTip="tooltip",A.Callout="callout",A.Select="select",A.SearchField="search_field",A.Radio="radio",A.Disclosure="disclosure",A.Menu="menu",A.Link="link",A.Banner="banner",A.Billboard="billboard",A.TextField="text_field",A.ListRow="list_row",A.Snackbar="snackbar"})(_kA||(_kA={}));var LkA;(function(A){A.Success="success",A.Failed="failed"})(LkA||(LkA={}));var NkA;(function(A){A.Success="success",A.NotFound="notFound"})(NkA||(NkA={}));var zkA;(function(A){A.Success="success",A.Failure="failure"})(zkA||(zkA={}));var RkA;(function(A){A.Metric="metric",A.USImperial="uSImperial"})(RkA||(RkA={}));var JkA;(function(A){A.Fastmail="fastmail"})(JkA||(JkA={}));var UkA;(function(A){A.FailedMfaPrompt="FailedMfaPrompt",A.InvalidMfaPromptResponse="InvalidMfaPromptResponse",A.NoMfaOptions="NoMfaOptions",A.MfaTimedOut="MfaTimedOut"})(UkA||(UkA={}));var XkA;(function(A){A.UnableToFindDevice="UnableToFindDevice",A.NoStoredDSecret="NoStoredDSecret"})(XkA||(XkA={}));var VkA;(function(A){A.Pages="pages",A.Signin="signin",A.Unlock="unlock"})(VkA||(VkA={}));var WkA;(function(A){A.FeatureFlags="featureFlags",A.AutoType="autoType",A.Snippets="snippets",A.PrivacyMode="privacyMode"})(WkA||(WkA={}));var YkA;(function(A){A.DeniedByUser="deniedByUser",A.PromptError="promptError",A.AppError="appError"})(YkA||(YkA={}));var Wg;(function(A){A.SignUp="signUp",A.LinkExisting="linkExisting"})(Wg||(Wg={}));var QkA;(function(A){A.NotFound="NotFound",A.NetworkError="NetworkError"})(QkA||(QkA={}));var ZkA;(function(A){A.Challenge="C",A.Verification="V",A.Rejection="R"})(ZkA||(ZkA={}));var AuA;(function(A){A.Unavailable="unavailable",A.RequesterAccountNotAvailable="requesterAccountNotAvailable",A.UserLookupError="userLookupError",A.InternalError="internalError"})(AuA||(AuA={}));var juA;(function(A){A.Desktop="Desktop",A.Phone="Phone",A.Tablet="Tablet",A.Browser="Browser"})(juA||(juA={}));var euA;(function(A){A.GuidedSetup="GuidedSetup",A.InviteModal="InviteModal"})(euA||(euA={}));var tuA;(function(A){A.Light="Light",A.Dark="Dark"})(tuA||(tuA={}));var ruA;(function(A){A.InputJsonDeserializationFailed="InputJsonDeserializationFailed",A.MissingTemplateUuid="MissingTemplateUuid",A.MissingItemUrl="MissingItemUrl",A.BadVersionInt="BadVersionInt"})(ruA||(ruA={}));var auA;(function(A){A.AccountNotFound="accountNotFound",A.FeatureDisabled="featureDisabled",A.AccountTypeNotSupported="accountTypeNotSupported"})(auA||(auA={}));var nuA;(function(A){A.Member="member",A.Admin="admin",A.Owner="owner"})(nuA||(nuA={}));var ouA;(function(A){A.NetworkError="networkError",A.PermissionDenied="permissionDenied"})(ouA||(ouA={}));var iuA;(function(A){A.Failed="failed"})(iuA||(iuA={}));var suA;(function(A){A.Code="Code",A.Yubikey="Yubikey"})(suA||(suA={}));var luA;(function(A){A.Decimal="decimal",A.PaddedDecimal="paddedDecimal",A.Abbreviated="abbreviated",A.Full="full",A.Narrow="narrow"})(luA||(luA={}));var cuA;(function(A){A.Ok="ok",A.Dismissed="dismissed",A.Timeout="timeout",A.AccountLocked="accountLocked",A.AccountNotFound="accountNotFound",A.UnsupportedClientType="unsupportedClientType",A.PasswordUnlockRequired="passwordUnlockRequired",A.AppMustBeLockedToContinue="appMustBeLockedToContinue",A.SystemAuthDisabled="systemAuthDisabled",A.NotAvailable="notAvailable",A.ClientOutOfDate="clientOutOfDate",A.PromptError="promptError"})(cuA||(cuA={}));var s0;(function(A){A.InvalidRequest="InvalidRequest",A.JsonSerializeError="JsonSerializeError",A.DeviceKeyNotFound="DeviceKeyNotFound",A.EncryptCredentialBundleError="EncryptCredentialBundleError",A.DecryptCredentialBundleError="DecryptCredentialBundleError",A.StoreError="StoreError",A.DecryptDeviceKeyError="DecryptDeviceKeyError",A.DeviceKeyGenerationError="DeviceKeyGenerationError",A.WriteDeviceKeyToStorageError="WriteDeviceKeyToStorageError",A.EncryptDeviceKeyError="EncryptDeviceKeyError",A.Unknown="Unknown"})(s0||(s0={}));var duA;(function(A){A.Initializing="initializing",A.Connected="connected",A.PermissionErrors="permissionErrors",A.ValidationErrors="validationErrors",A.SynchronizationErrors="synchronizationErrors",A.IncompatibleSandbox="incompatibleSandbox",A.UnableToConnect="unableToConnect"})(duA||(duA={}));var Yg;(function(A){A.UserSuspended="userSuspended",A.Other="other"})(Yg||(Yg={}));var kuA;(function(A){A.Decimal="decimal",A.PaddedDecimal="paddedDecimal"})(kuA||(kuA={}));var uuA;(function(A){A.Install="Install",A.Uninstall="Uninstall"})(uuA||(uuA={}));var puA;(function(A){A.SessionNotFound="sessionNotFound"})(puA||(puA={}));var muA;(function(A){A.Username="username",A.Password="password",A.Totp="totp",A.Sso="sso"})(muA||(muA={}));var EuA;(function(A){A.SessionNotFound="sessionNotFound",A.NoDataSource="noDataSource",A.UnexpectedError="unexpectedError"})(EuA||(EuA={}));var BuA;(function(A){A.SessionNotFound="sessionNotFound",A.AlreadyExists="alreadyExists",A.Unsupported="unsupported",A.Io="io"})(BuA||(BuA={}));var guA;(function(A){A.FailedToGenerateRandom="failedToGenerateRandom"})(guA||(guA={}));var huA;(function(A){A.SessionNotFound="sessionNotFound",A.NoDataSource="noDataSource",A.Io="io",A.FailedToCreateFileSupport="failedToCreateFileSupport",A.Offline="offline",A.Cancelled="cancelled",A.Other="other",A.MalformedZip="malformedZip",A.MalformedFile="malformedFile",A.MalformedCsv="malformedCsv"})(huA||(huA={}));var quA;(function(A){A.Start="start",A.ProcessingExportedAccount="processingExportedAccount",A.Saving="saving"})(quA||(quA={}));var vuA;(function(A){A.Bearer="Bearer"})(vuA||(vuA={}));var xuA;(function(A){A.Online="Online",A.Offline="Offline",A.SessionExpired="SessionExpired",A.Locked="Locked"})(xuA||(xuA={}));var fuA;(function(A){A.AccountLocked="AccountLocked",A.Ok="Ok"})(fuA||(fuA={}));var GuA;(function(A){A.Ok="Ok",A.NoUnlockedAccounts="NoUnlockedAccounts"})(GuA||(GuA={}));var l0;(function(A){A.Ok="Ok",A.FailedToSync="FailedToSync",A.AccountNotFound="AccountNotFound"})(l0||(l0={}));var ru;(function(A){A.InvalidRequest="InvalidRequest",A.MissingAccountInformation="MissingAccountInformation",A.MissingUnlockInformationInKeychain="MissingUnlockInformationInKeychain",A.MissingDSecret="MissingDSecret",A.CannotUnlockAccounts="CannotUnlockAccounts",A.CannotEncodeResponse="CannotEncodeResponse",A.Unknown="Unknown",A.CannotEncryptCredentialBundle="CannotEncryptCredentialBundle",A.CannotDecryptCredentialBundle="CannotDecryptCredentialBundle",A.UserDefaultsError="UserDefaultsError"})(ru||(ru={}));var FuA;(function(A){A.Uppercase="uppercase",A.Lowercase="lowercase"})(FuA||(FuA={}));var buA;(function(A){A.Success="success",A.Failure="failure"})(buA||(buA={}));var yuA;(function(A){A.Success="success",A.Failure="failure"})(yuA||(yuA={}));var $uA;(function(A){A.Success="success",A.NotFound="notFound"})($uA||($uA={}));var wuA;(function(A){A.Success="success",A.Failed="failed"})(wuA||(wuA={}));var IuA;(function(A){A.InvalidSession="InvalidSession",A.SessionLocked="SessionLocked",A.SessionNotConfigured="SessionNotConfigured",A.NakedDomainFailed="NakedDomainFailed",A.InvalidItemTemplate="InvalidItemTemplate",A.BrainSaveObject="BrainSaveObject",A.InvalidSaveRequest="InvalidSaveRequest"})(IuA||(IuA={}));var DuA;(function(A){A.EnvironmentSizeLimitExceeded="environmentSizeLimitExceeded",A.AppError="appError"})(DuA||(DuA={}));var OuA;(function(A){A.Unavailable="unavailable",A.UnableToLoadSettings="unableToLoadSettings",A.UnableToSaveSettings="unableToSaveSettings"})(OuA||(OuA={}));var PuA;(function(A){A.Terrible="Terrible",A.Weak="Weak",A.Fair="Fair",A.Good="Good",A.VeryGood="VeryGood",A.Excellent="Excellent",A.Fantastic="Fantastic",A.NotSpecified="NotSpecified"})(PuA||(PuA={}));var CuA;(function(A){A.Default="default",A.Privacy="privacy",A.Ramp="ramp",A.Stripe="stripe"})(CuA||(CuA={}));var HuA;(function(A){A.Success="success"})(HuA||(HuA={}));var TuA;(function(A){A.Warning="warning",A.Info="info"})(TuA||(TuA={}));var KuA;(function(A){A.ItemCreated="itemCreated",A.Cancelled="cancelled"})(KuA||(KuA={}));var SuA;(function(A){A.Accepted="Accepted",A.Denied="Denied"})(SuA||(SuA={}));var MuA;(function(A){A.GenerateDeviceUuidError="GenerateDeviceUuidError",A.SetDeviceUuidError="SetDeviceUuidError",A.EncryptCredentialBundleError="EncryptCredentialBundleError",A.DecryptCredentialBundleError="DecryptCredentialBundleError",A.DeleteDeviceKeyError="DeleteDeviceKeyError"})(MuA||(MuA={}));var _uA;(function(A){A.FeatureFlags="feature_flags",A.ItemSearch="item_search",A.SetUpAnotherDevice="set_up_another_device",A.Homepage="homepage",A.Watchtower="watchtower",A.ActivationHub="activation_hub",A.ManualItemCreate="manual_item_create",A.ItemImport="item_import",A.ExtensionSetup="extension_setup",A.SetUpAutofill="set_up_autofill",A.MobileAutofillTutorial="mobile_autofill_tutorial",A.ExtensionSaveFillTutorial="extension_save_fill_tutorial",A.ManageAccount="manage_account",A.Accounts="accounts",A.InviteMembers="invite_members",A.ItemSharing="item_sharing",A.ExportItems="export_items",A.GitCommitSigning="git_commit_signing",A.DeveloperExperience="developer_experience",A.SshBookmarks="ssh_bookmarks",A.Item="item",A.PasskeySave="passkey_save",A.ChromeAutofillPrompt="chrome_autofill_prompt",A.BraveAutofillPrompt="brave_autofill_prompt",A.DeveloperSettings="developer_settings",A.AntiPeekMode="anti_peek_mode",A.PrivacySettings="privacy_settings",A.HelpMenu="help_menu",A.SecurityReview="security_review",A.Feedback="feedback",A.Verifier="verifier",A.VerifierSendingRequest="verifier_sending_request",A.VerifierReceivingRequest="verifier_receiving_request",A.VerifierReceivingResponse="verifier_receiving_response",A.DeveloperEnvironments="developer_environments",A.ExtensionInstall="extension_install",A.EssentialSetupTelemetryModal="essential_setup_telemetry_modal"})(_uA||(_uA={}));var LuA;(function(A){A.New="New",A.InReview="InReview",A.Managed="Managed",A.Accepted="Accepted",A.Ignored="Ignored",A.PlanToClose="PlanToClose",A.Closed="Closed"})(LuA||(LuA={}));var NuA;(function(A){A.Allow="allow",A.Deny="deny",A.Dismiss="dismiss"})(NuA||(NuA={}));var zuA;(function(A){A.Success="success",A.Failure="failure"})(zuA||(zuA={}));var RuA;(function(A){A.Initialization="initialization",A.Create="create",A.Edit="edit",A.Delete="delete"})(RuA||(RuA={}));var JuA;(function(A){A.Private="Private",A.Others="Others",A.Everyone="Everyone"})(JuA||(JuA={}));var UuA;(function(A){A.CannotRemoveReadWithoutManage="cannotRemoveReadWithoutManage"})(UuA||(UuA={}));var XuA;(function(A){A.Simplified="simplified"})(XuA||(XuA={}));var VuA;(function(A){A.Success="success",A.Error="error"})(VuA||(VuA={}));var WuA;(function(A){A.Failed="failed"})(WuA||(WuA={}));var YuA;(function(A){A.QuickAccess="quickAccess",A.SsoAuthPrompt="ssoAuthPrompt"})(YuA||(YuA={}));var QuA;(function(A){A.AppCatalog="AppCatalog",A.SearchItems="SearchItems",A.SearchApps="SearchApps"})(QuA||(QuA={}));var ZuA;(function(A){A.CleanUp="CleanUp",A.ConnectionInterrupted="ConnectionInterrupted",A.ConnectionInvalidated="ConnectionInvalidated",A.ConnectionTimeout="ConnectionTimeout",A.ContextDropped="ContextDropped",A.ServerInvalid="ServerInvalid"})(ZuA||(ZuA={}));var A7A={ar:"ar-arab-eg","az-arab":"az-arab-ir","az-ir":"az-arab-ir",be:"be-cyrl-by",da:"da-latn-dk",el:"el-grek-gr",en:"en-latn-us",fa:"fa-arab-ir",ja:"ja-jpan-jp",ko:"ko-kore-kr",pt:"pt-latn-br",sr:"sr-cyrl-rs","sr-ru":"sr-latn-ru",sv:"sv-latn-se",ta:"ta-taml-in",uk:"uk-cyrl-ua",zh:"zh-hans-cn","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-gb":"zh-hant-gb","zh-us":"zh-hant-us"},Sjj=["az","bg","cs","de","es","fi","fr","hu","it","lt","lv","nl","pl","ro","ru"];function j7A(A){if(A7A.hasOwnProperty(A))return new au(A7A[A]);let j=new au(A);return Sjj.includes(j.language)?(j.region=j.language.toUpperCase(),j):null}var Mjj="([a-z]{2,3}|\\*)",_jj="(?:-([a-z]{4}|\\*))",Ljj="(?:-([a-z]{2}|\\*))",Njj="(?:-([a-z]{3}|\\*))",zjj=new RegExp(`^${Mjj}${_jj}?${Ljj}?${Njj}?$`,"i"),u1=["language","script","region","variant"],au=class{constructor(j){let e=zjj.exec(j.replace(/_/g,"-"));if(!e){this.isWellFormed=!1;return}let[,t,r,a,n]=e;t&&(this.language=t.toLowerCase()),r&&(this.script=r[0].toUpperCase()+r.slice(1)),a&&(this.region=a.toUpperCase()),this.variant=n,this.isWellFormed=!0}isEqual(j){return u1.every(e=>this[e]===j[e])}matches(j,e=!1,t=!1){return u1.every(r=>e&&this[r]===void 0||t&&j[r]===void 0||this[r]===j[r])}toString(){return u1.map(j=>this[j]).filter(j=>j!==void 0).join("-")}clearVariants(){this.variant=void 0}clearRegion(){this.region=void 0}addLikelySubtags(){let j=j7A(this.toString().toLowerCase());return j?(u1.forEach(e=>this[e]=j[e]),!0):!1}};function A9(A,j,e){let t=new Set,r=new Map;for(let a of j)new au(a).isWellFormed&&r.set(a,new au(a));A:for(let a of A){let n=a.toLowerCase(),o=new au(n);if(o.language!==void 0){for(let i of r.keys())if(n===i.toLowerCase()){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}for(let[i,s]of r.entries())if(s.matches(o,!0,!1)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}if(o.addLikelySubtags()){for(let[i,s]of r.entries())if(s.matches(o,!0,!1)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}}o.clearVariants();for(let[i,s]of r.entries())if(s.matches(o,!0,!0)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}if(o.clearRegion(),o.addLikelySubtags()){for(let[i,s]of r.entries())if(s.matches(o,!0,!1)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}}o.clearRegion();for(let[i,s]of r.entries())if(s.matches(o,!0,!0)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}}}return Array.from(t)}function e7A(A,j,e,t,r){let a=A[j];if(a!==void 0){if(e==="boolean"?a=new Boolean(a):e==="string"&&(a=String(a)),t!==void 0&&t.indexOf(a)===-1)throw new Error("Invalid option value");return a}return r}function p1(A,j,e={}){let t=e7A(e,"defaultLocale","string"),r=e7A(e,"strategy","string",["filtering","matching","lookup"],"filtering");if(r==="lookup"&&!t)throw new Error("defaultLocale cannot be undefined for strategy `lookup`");let a=Array.from(Object(A)).map(i=>String(i)),n=Array.from(Object(j)).map(i=>String(i)),o=A9(a,n,r);return r==="lookup"?o.length===0&&o.push(t):t&&!o.includes(t)&&o.push(t),o}var $9={};Yt($9,{Browser:()=>Xr,OperatingSystem:()=>Da,getBrowserInfo:()=>_E,getHighEntropyBrowserInfo:()=>rBA,getLimitedBrowserInfo:()=>nBA,getWindowsVersionFromClientHint:()=>aBA});var Rjj=typeof global=="object"&&global&&global.Object===Object&&global,m1=Rjj;var Jjj=typeof self=="object"&&self&&self.Object===Object&&self,Ujj=m1||Jjj||Function("return this")(),oa=Ujj;var Xjj=oa.Symbol,yo=Xjj;var t7A=Object.prototype,Vjj=t7A.hasOwnProperty,Wjj=t7A.toString,c0=yo?yo.toStringTag:void 0;function Yjj(A){var j=Vjj.call(A,c0),e=A[c0];try{A[c0]=void 0;var t=!0}catch{}var r=Wjj.call(A);return t&&(j?A[c0]=e:delete A[c0]),r}var r7A=Yjj;var Qjj=Object.prototype,Zjj=Qjj.toString;function Aej(A){return Zjj.call(A)}var a7A=Aej;var jej="[object Null]",eej="[object Undefined]",n7A=yo?yo.toStringTag:void 0;function tej(A){return A==null?A===void 0?eej:jej:n7A&&n7A in Object(A)?r7A(A):a7A(A)}var io=tej;function rej(A){return A!=null&&typeof A=="object"}var Wa=rej;var aej="[object Symbol]";function nej(A){return typeof A=="symbol"||Wa(A)&&io(A)==aej}var wd=nej;function oej(A,j){for(var e=-1,t=A==null?0:A.length,r=Array(t);++e<t;)r[e]=j(A[e],e,A);return r}var $o=oej;var iej=Array.isArray,Qt=iej;var sej=1/0,o7A=yo?yo.prototype:void 0,i7A=o7A?o7A.toString:void 0;function s7A(A){if(typeof A=="string")return A;if(Qt(A))return $o(A,s7A)+"";if(wd(A))return i7A?i7A.call(A):"";var j=A+"";return j=="0"&&1/A==-sej?"-0":j}var bc=s7A;var lej=/\s/;function cej(A){for(var j=A.length;j--&&lej.test(A.charAt(j)););return j}var l7A=cej;var dej=/^\s+/;function kej(A){return A&&A.slice(0,l7A(A)+1).replace(dej,"")}var E1=kej;function uej(A){var j=typeof A;return A!=null&&(j=="object"||j=="function")}var Ea=uej;var c7A=NaN,pej=/^[-+]0x[0-9a-f]+$/i,mej=/^0b[01]+$/i,Eej=/^0o[0-7]+$/i,Bej=parseInt;function gej(A){if(typeof A=="number")return A;if(wd(A))return c7A;if(Ea(A)){var j=typeof A.valueOf=="function"?A.valueOf():A;A=Ea(j)?j+"":j}if(typeof A!="string")return A===0?A:+A;A=E1(A);var e=mej.test(A);return e||Eej.test(A)?Bej(A.slice(2),e?2:8):pej.test(A)?c7A:+A}var Id=gej;var d7A=1/0,hej=17976931348623157e292;function qej(A){if(!A)return A===0?A:0;if(A=Id(A),A===d7A||A===-d7A){var j=A<0?-1:1;return j*hej}return A===A?A:0}var k7A=qej;function vej(A){var j=k7A(A),e=j%1;return j===j?e?j-e:j:0}var ji=vej;function xej(A){return A}var ss=xej;var fej="[object AsyncFunction]",Gej="[object Function]",Fej="[object GeneratorFunction]",bej="[object Proxy]";function yej(A){if(!Ea(A))return!1;var j=io(A);return j==Gej||j==Fej||j==fej||j==bej}var px=yej;var $ej=oa["__core-js_shared__"],B1=$ej;var u7A=function(){var A=/[^.]+$/.exec(B1&&B1.keys&&B1.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}();function wej(A){return!!u7A&&u7A in A}var p7A=wej;var Iej=Function.prototype,Dej=Iej.toString;function Oej(A){if(A!=null){try{return Dej.call(A)}catch{}try{return A+""}catch{}}return""}var vp=Oej;var Pej=/[\\^$.*+?()[\]{}|]/g,Cej=/^\[object .+?Constructor\]$/,Hej=Function.prototype,Tej=Object.prototype,Kej=Hej.toString,Sej=Tej.hasOwnProperty,Mej=RegExp("^"+Kej.call(Sej).replace(Pej,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _ej(A){if(!Ea(A)||p7A(A))return!1;var j=px(A)?Mej:Cej;return j.test(vp(A))}var m7A=_ej;function Lej(A,j){return A?.[j]}var E7A=Lej;function Nej(A,j){var e=E7A(A,j);return m7A(e)?e:void 0}var Xs=Nej;var zej=Xs(oa,"WeakMap"),Qg=zej;var Rej=Qg&&new Qg,mx=Rej;var Jej=mx?function(A,j){return mx.set(A,j),A}:ss,g1=Jej;var B7A=Object.create,Uej=function(){function A(){}return function(j){if(!Ea(j))return{};if(B7A)return B7A(j);A.prototype=j;var e=new A;return A.prototype=void 0,e}}(),GE=Uej;function Xej(A){return function(){var j=arguments;switch(j.length){case 0:return new A;case 1:return new A(j[0]);case 2:return new A(j[0],j[1]);case 3:return new A(j[0],j[1],j[2]);case 4:return new A(j[0],j[1],j[2],j[3]);case 5:return new A(j[0],j[1],j[2],j[3],j[4]);case 6:return new A(j[0],j[1],j[2],j[3],j[4],j[5]);case 7:return new A(j[0],j[1],j[2],j[3],j[4],j[5],j[6])}var e=GE(A.prototype),t=A.apply(e,j);return Ea(t)?t:e}}var xp=Xej;var Vej=1;function Wej(A,j,e){var t=j&Vej,r=xp(A);function a(){var n=this&&this!==oa&&this instanceof a?r:A;return n.apply(t?e:this,arguments)}return a}var g7A=Wej;function Yej(A,j,e){switch(e.length){case 0:return A.call(j);case 1:return A.call(j,e[0]);case 2:return A.call(j,e[0],e[1]);case 3:return A.call(j,e[0],e[1],e[2])}return A.apply(j,e)}var FE=Yej;var Qej=Math.max;function Zej(A,j,e,t){for(var r=-1,a=A.length,n=e.length,o=-1,i=j.length,s=Qej(a-n,0),l=Array(i+s),d=!t;++o<i;)l[o]=j[o];for(;++r<n;)(d||r<a)&&(l[e[r]]=A[r]);for(;s--;)l[o++]=A[r++];return l}var h1=Zej;var Atj=Math.max;function jtj(A,j,e,t){for(var r=-1,a=A.length,n=-1,o=e.length,i=-1,s=j.length,l=Atj(a-o,0),d=Array(l+s),k=!t;++r<l;)d[r]=A[r];for(var u=r;++i<s;)d[u+i]=j[i];for(;++n<o;)(k||r<a)&&(d[u+e[n]]=A[r++]);return d}var q1=jtj;function etj(A,j){for(var e=A.length,t=0;e--;)A[e]===j&&++t;return t}var h7A=etj;function ttj(){}var Ex=ttj;var rtj=4294967295;function v1(A){this.__wrapped__=A,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rtj,this.__views__=[]}v1.prototype=GE(Ex.prototype);v1.prototype.constructor=v1;var Bx=v1;function atj(){}var x1=atj;var ntj=mx?function(A){return mx.get(A)}:x1,f1=ntj;var otj={},j9=otj;var itj=Object.prototype,stj=itj.hasOwnProperty;function ltj(A){for(var j=A.name+"",e=j9[j],t=stj.call(j9,j)?e.length:0;t--;){var r=e[t],a=r.func;if(a==null||a==A)return r.name}return j}var q7A=ltj;function G1(A,j){this.__wrapped__=A,this.__actions__=[],this.__chain__=!!j,this.__index__=0,this.__values__=void 0}G1.prototype=GE(Ex.prototype);G1.prototype.constructor=G1;var d0=G1;function ctj(A,j){var e=-1,t=A.length;for(j||(j=Array(t));++e<t;)j[e]=A[e];return j}var bE=ctj;function dtj(A){if(A instanceof Bx)return A.clone();var j=new d0(A.__wrapped__,A.__chain__);return j.__actions__=bE(A.__actions__),j.__index__=A.__index__,j.__values__=A.__values__,j}var v7A=dtj;var ktj=Object.prototype,utj=ktj.hasOwnProperty;function F1(A){if(Wa(A)&&!Qt(A)&&!(A instanceof Bx)){if(A instanceof d0)return A;if(utj.call(A,"__wrapped__"))return v7A(A)}return new d0(A)}F1.prototype=Ex.prototype;F1.prototype.constructor=F1;var x7A=F1;function ptj(A){var j=q7A(A),e=x7A[j];if(typeof e!="function"||!(j in Bx.prototype))return!1;if(A===e)return!0;var t=f1(e);return!!t&&A===t[0]}var f7A=ptj;var mtj=800,Etj=16,Btj=Date.now;function gtj(A){var j=0,e=0;return function(){var t=Btj(),r=Etj-(t-e);if(e=t,r>0){if(++j>=mtj)return arguments[0]}else j=0;return A.apply(void 0,arguments)}}var b1=gtj;var htj=b1(g1),y1=htj;var qtj=/\{\n\/\* \[wrapped with (.+)\] \*/,vtj=/,? & /;function xtj(A){var j=A.match(qtj);return j?j[1].split(vtj):[]}var G7A=xtj;var ftj=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Gtj(A,j){var e=j.length;if(!e)return A;var t=e-1;return j[t]=(e>1?"& ":"")+j[t],j=j.join(e>2?", ":" "),A.replace(ftj,`{
/* [wrapped with `+j+`] */
`)}var F7A=Gtj;function Ftj(A){return function(){return A}}var b7A=Ftj;var btj=function(){try{var A=Xs(Object,"defineProperty");return A({},"",{}),A}catch{}}(),gx=btj;var ytj=gx?function(A,j){return gx(A,"toString",{configurable:!0,enumerable:!1,value:b7A(j),writable:!0})}:ss,y7A=ytj;var $tj=b1(y7A),hx=$tj;function wtj(A,j){for(var e=-1,t=A==null?0:A.length;++e<t&&j(A[e],e,A)!==!1;);return A}var $1=wtj;function Itj(A,j,e,t){for(var r=A.length,a=e+(t?1:-1);t?a--:++a<r;)if(j(A[a],a,A))return a;return-1}var w1=Itj;function Dtj(A){return A!==A}var $7A=Dtj;function Otj(A,j,e){for(var t=e-1,r=A.length;++t<r;)if(A[t]===j)return t;return-1}var w7A=Otj;function Ptj(A,j,e){return j===j?w7A(A,j,e):w1(A,$7A,e)}var yE=Ptj;function Ctj(A,j){var e=A==null?0:A.length;return!!e&&yE(A,j,0)>-1}var I1=Ctj;var Htj=1,Ttj=2,Ktj=8,Stj=16,Mtj=32,_tj=64,Ltj=128,Ntj=256,ztj=512,Rtj=[["ary",Ltj],["bind",Htj],["bindKey",Ttj],["curry",Ktj],["curryRight",Stj],["flip",ztj],["partial",Mtj],["partialRight",_tj],["rearg",Ntj]];function Jtj(A,j){return $1(Rtj,function(e){var t="_."+e[0];j&e[1]&&!I1(A,t)&&A.push(t)}),A.sort()}var I7A=Jtj;function Utj(A,j,e){var t=j+"";return hx(A,F7A(t,I7A(G7A(t),e)))}var D1=Utj;var Xtj=1,Vtj=2,Wtj=4,Ytj=8,D7A=32,O7A=64;function Qtj(A,j,e,t,r,a,n,o,i,s){var l=j&Ytj,d=l?n:void 0,k=l?void 0:n,u=l?a:void 0,m=l?void 0:a;j|=l?D7A:O7A,j&=~(l?O7A:D7A),j&Wtj||(j&=~(Xtj|Vtj));var I=[A,j,r,u,d,m,k,o,i,s],S=e.apply(void 0,I);return f7A(A)&&y1(S,I),S.placeholder=t,D1(S,A,j)}var O1=Qtj;function Ztj(A){var j=A;return j.placeholder}var P1=Ztj;var Arj=9007199254740991,jrj=/^(?:0|[1-9]\d*)$/;function erj(A,j){var e=typeof A;return j=j??Arj,!!j&&(e=="number"||e!="symbol"&&jrj.test(A))&&A>-1&&A%1==0&&A<j}var nu=erj;var trj=Math.min;function rrj(A,j){for(var e=A.length,t=trj(j.length,e),r=bE(A);t--;){var a=j[t];A[t]=nu(a,e)?r[a]:void 0}return A}var P7A=rrj;var C7A="__lodash_placeholder__";function arj(A,j){for(var e=-1,t=A.length,r=0,a=[];++e<t;){var n=A[e];(n===j||n===C7A)&&(A[e]=C7A,a[r++]=e)}return a}var Zg=arj;var nrj=1,orj=2,irj=8,srj=16,lrj=128,crj=512;function H7A(A,j,e,t,r,a,n,o,i,s){var l=j&lrj,d=j&nrj,k=j&orj,u=j&(irj|srj),m=j&crj,I=k?void 0:xp(A);function S(){for(var f=arguments.length,v=Array(f),P=f;P--;)v[P]=arguments[P];if(u)var D=P1(S),C=h7A(v,D);if(t&&(v=h1(v,t,r,u)),a&&(v=q1(v,a,n,u)),f-=C,u&&f<s){var b=Zg(v,D);return O1(A,j,H7A,S.placeholder,e,v,b,o,i,s-f)}var h=d?e:this,O=k?h[A]:A;return f=v.length,o?v=P7A(v,o):m&&f>1&&v.reverse(),l&&i<f&&(v.length=i),this&&this!==oa&&this instanceof S&&(O=I||xp(O)),O.apply(h,v)}return S}var C1=H7A;function drj(A,j,e){var t=xp(A);function r(){for(var a=arguments.length,n=Array(a),o=a,i=P1(r);o--;)n[o]=arguments[o];var s=a<3&&n[0]!==i&&n[a-1]!==i?[]:Zg(n,i);if(a-=s.length,a<e)return O1(A,j,C1,r.placeholder,void 0,n,s,void 0,void 0,e-a);var l=this&&this!==oa&&this instanceof r?t:A;return FE(l,this,n)}return r}var T7A=drj;var krj=1;function urj(A,j,e,t){var r=j&krj,a=xp(A);function n(){for(var o=-1,i=arguments.length,s=-1,l=t.length,d=Array(l+i),k=this&&this!==oa&&this instanceof n?a:A;++s<l;)d[s]=t[s];for(;i--;)d[s++]=arguments[++o];return FE(k,r?e:this,d)}return n}var K7A=urj;var S7A="__lodash_placeholder__",e9=1,prj=2,mrj=4,M7A=8,k0=128,_7A=256,Erj=Math.min;function Brj(A,j){var e=A[1],t=j[1],r=e|t,a=r<(e9|prj|k0),n=t==k0&&e==M7A||t==k0&&e==_7A&&A[7].length<=j[8]||t==(k0|_7A)&&j[7].length<=j[8]&&e==M7A;if(!(a||n))return A;t&e9&&(A[2]=j[2],r|=e&e9?0:mrj);var o=j[3];if(o){var i=A[3];A[3]=i?h1(i,o,j[4]):o,A[4]=i?Zg(A[3],S7A):j[4]}return o=j[5],o&&(i=A[5],A[5]=i?q1(i,o,j[6]):o,A[6]=i?Zg(A[5],S7A):j[6]),o=j[7],o&&(A[7]=o),t&k0&&(A[8]=A[8]==null?j[8]:Erj(A[8],j[8])),A[9]==null&&(A[9]=j[9]),A[0]=j[0],A[1]=r,A}var L7A=Brj;var grj="Expected a function",N7A=1,hrj=2,t9=8,r9=16,a9=32,z7A=64,R7A=Math.max;function qrj(A,j,e,t,r,a,n,o){var i=j&hrj;if(!i&&typeof A!="function")throw new TypeError(grj);var s=t?t.length:0;if(s||(j&=~(a9|z7A),t=r=void 0),n=n===void 0?n:R7A(ji(n),0),o=o===void 0?o:ji(o),s-=r?r.length:0,j&z7A){var l=t,d=r;t=r=void 0}var k=i?void 0:f1(A),u=[A,j,e,t,r,l,d,a,n,o];if(k&&L7A(u,k),A=u[0],j=u[1],e=u[2],t=u[3],r=u[4],o=u[9]=u[9]===void 0?i?0:A.length:R7A(u[9]-s,0),!o&&j&(t9|r9)&&(j&=~(t9|r9)),!j||j==N7A)var m=g7A(A,j,e);else j==t9||j==r9?m=T7A(A,j,o):(j==a9||j==(N7A|a9))&&!r.length?m=K7A(A,j,e,t):m=C1.apply(void 0,u);var I=k?g1:y1;return D1(I(m,u),A,j)}var J7A=qrj;function vrj(A,j,e){j=="__proto__"&&gx?gx(A,j,{configurable:!0,enumerable:!0,value:e,writable:!0}):A[j]=e}var Di=vrj;function xrj(A,j){return A===j||A!==A&&j!==j}var yc=xrj;var frj=Object.prototype,Grj=frj.hasOwnProperty;function Frj(A,j,e){var t=A[j];(!(Grj.call(A,j)&&yc(t,e))||e===void 0&&!(j in A))&&Di(A,j,e)}var $E=Frj;function brj(A,j,e,t){var r=!e;e||(e={});for(var a=-1,n=j.length;++a<n;){var o=j[a],i=t?t(e[o],A[o],o,e,A):void 0;i===void 0&&(i=A[o]),r?Di(e,o,i):$E(e,o,i)}return e}var Oi=brj;var U7A=Math.max;function yrj(A,j,e){return j=U7A(j===void 0?A.length-1:j,0),function(){for(var t=arguments,r=-1,a=U7A(t.length-j,0),n=Array(a);++r<a;)n[r]=t[j+r];r=-1;for(var o=Array(j+1);++r<j;)o[r]=t[r];return o[j]=e(n),FE(A,this,o)}}var H1=yrj;function $rj(A,j){return hx(H1(A,j,ss),A+"")}var ou=$rj;var wrj=9007199254740991;function Irj(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=wrj}var qx=Irj;function Drj(A){return A!=null&&qx(A.length)&&!px(A)}var un=Drj;function Orj(A,j,e){if(!Ea(e))return!1;var t=typeof j;return(t=="number"?un(e)&&nu(j,e.length):t=="string"&&j in e)?yc(e[j],A):!1}var _l=Orj;function Prj(A){return ou(function(j,e){var t=-1,r=e.length,a=r>1?e[r-1]:void 0,n=r>2?e[2]:void 0;for(a=A.length>3&&typeof a=="function"?(r--,a):void 0,n&&_l(e[0],e[1],n)&&(a=r<3?void 0:a,r=1),j=Object(j);++t<r;){var o=e[t];o&&A(j,o,t,a)}return j})}var vx=Prj;var Crj=Object.prototype;function Hrj(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||Crj;return A===e}var iu=Hrj;function Trj(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}var xx=Trj;var Krj="[object Arguments]";function Srj(A){return Wa(A)&&io(A)==Krj}var n9=Srj;var X7A=Object.prototype,Mrj=X7A.hasOwnProperty,_rj=X7A.propertyIsEnumerable,Lrj=n9(function(){return arguments}())?n9:function(A){return Wa(A)&&Mrj.call(A,"callee")&&!_rj.call(A,"callee")},Dd=Lrj;function Nrj(){return!1}var V7A=Nrj;var Q7A=typeof exports=="object"&&exports&&!exports.nodeType&&exports,W7A=Q7A&&typeof module=="object"&&module&&!module.nodeType&&module,zrj=W7A&&W7A.exports===Q7A,Y7A=zrj?oa.Buffer:void 0,Rrj=Y7A?Y7A.isBuffer:void 0,Jrj=Rrj||V7A,Od=Jrj;var Urj="[object Arguments]",Xrj="[object Array]",Vrj="[object Boolean]",Wrj="[object Date]",Yrj="[object Error]",Qrj="[object Function]",Zrj="[object Map]",Aaj="[object Number]",jaj="[object Object]",eaj="[object RegExp]",taj="[object Set]",raj="[object String]",aaj="[object WeakMap]",naj="[object ArrayBuffer]",oaj="[object DataView]",iaj="[object Float32Array]",saj="[object Float64Array]",laj="[object Int8Array]",caj="[object Int16Array]",daj="[object Int32Array]",kaj="[object Uint8Array]",uaj="[object Uint8ClampedArray]",paj="[object Uint16Array]",maj="[object Uint32Array]",v6={};v6[iaj]=v6[saj]=v6[laj]=v6[caj]=v6[daj]=v6[kaj]=v6[uaj]=v6[paj]=v6[maj]=!0;v6[Urj]=v6[Xrj]=v6[naj]=v6[Vrj]=v6[oaj]=v6[Wrj]=v6[Yrj]=v6[Qrj]=v6[Zrj]=v6[Aaj]=v6[jaj]=v6[eaj]=v6[taj]=v6[raj]=v6[aaj]=!1;function Eaj(A){return Wa(A)&&qx(A.length)&&!!v6[io(A)]}var Z7A=Eaj;function Baj(A){return function(j){return A(j)}}var $c=Baj;var ApA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,u0=ApA&&typeof module=="object"&&module&&!module.nodeType&&module,gaj=u0&&u0.exports===ApA,o9=gaj&&m1.process,haj=function(){try{var A=u0&&u0.require&&u0.require("util").types;return A||o9&&o9.binding&&o9.binding("util")}catch{}}(),ls=haj;var jpA=ls&&ls.isTypedArray,qaj=jpA?$c(jpA):Z7A,wE=qaj;var vaj=Object.prototype,xaj=vaj.hasOwnProperty;function faj(A,j){var e=Qt(A),t=!e&&Dd(A),r=!e&&!t&&Od(A),a=!e&&!t&&!r&&wE(A),n=e||t||r||a,o=n?xx(A.length,String):[],i=o.length;for(var s in A)(j||xaj.call(A,s))&&!(n&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||nu(s,i)))&&o.push(s);return o}var T1=faj;function Gaj(A,j){return function(e){return A(j(e))}}var K1=Gaj;var Faj=K1(Object.keys,Object),epA=Faj;var baj=Object.prototype,yaj=baj.hasOwnProperty;function $aj(A){if(!iu(A))return epA(A);var j=[];for(var e in Object(A))yaj.call(A,e)&&e!="constructor"&&j.push(e);return j}var fx=$aj;function waj(A){return un(A)?T1(A):fx(A)}var Sa=waj;var Iaj=Object.prototype,Daj=Iaj.hasOwnProperty,Oaj=vx(function(A,j){if(iu(j)||un(j)){Oi(j,Sa(j),A);return}for(var e in j)Daj.call(j,e)&&$E(A,e,j[e])}),p0=Oaj;function Paj(A){var j=[];if(A!=null)for(var e in Object(A))j.push(e);return j}var tpA=Paj;var Caj=Object.prototype,Haj=Caj.hasOwnProperty;function Taj(A){if(!Ea(A))return tpA(A);var j=iu(A),e=[];for(var t in A)t=="constructor"&&(j||!Haj.call(A,t))||e.push(t);return e}var rpA=Taj;function Kaj(A){return un(A)?T1(A,!0):rpA(A)}var wc=Kaj;var Saj=vx(function(A,j,e,t){Oi(j,Sa(j),A,t)}),i9=Saj;var Maj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_aj=/^\w*$/;function Laj(A,j){if(Qt(A))return!1;var e=typeof A;return e=="number"||e=="symbol"||e=="boolean"||A==null||wd(A)?!0:_aj.test(A)||!Maj.test(A)||j!=null&&A in Object(j)}var Gx=Laj;var Naj=Xs(Object,"create"),fp=Naj;function zaj(){this.__data__=fp?fp(null):{},this.size=0}var apA=zaj;function Raj(A){var j=this.has(A)&&delete this.__data__[A];return this.size-=j?1:0,j}var npA=Raj;var Jaj="__lodash_hash_undefined__",Uaj=Object.prototype,Xaj=Uaj.hasOwnProperty;function Vaj(A){var j=this.__data__;if(fp){var e=j[A];return e===Jaj?void 0:e}return Xaj.call(j,A)?j[A]:void 0}var opA=Vaj;var Waj=Object.prototype,Yaj=Waj.hasOwnProperty;function Qaj(A){var j=this.__data__;return fp?j[A]!==void 0:Yaj.call(j,A)}var ipA=Qaj;var Zaj="__lodash_hash_undefined__";function A6j(A,j){var e=this.__data__;return this.size+=this.has(A)?0:1,e[A]=fp&&j===void 0?Zaj:j,this}var spA=A6j;function Fx(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}Fx.prototype.clear=apA;Fx.prototype.delete=npA;Fx.prototype.get=opA;Fx.prototype.has=ipA;Fx.prototype.set=spA;var s9=Fx;function j6j(){this.__data__=[],this.size=0}var lpA=j6j;function e6j(A,j){for(var e=A.length;e--;)if(yc(A[e][0],j))return e;return-1}var IE=e6j;var t6j=Array.prototype,r6j=t6j.splice;function a6j(A){var j=this.__data__,e=IE(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():r6j.call(j,e,1),--this.size,!0}var cpA=a6j;function n6j(A){var j=this.__data__,e=IE(j,A);return e<0?void 0:j[e][1]}var dpA=n6j;function o6j(A){return IE(this.__data__,A)>-1}var kpA=o6j;function i6j(A,j){var e=this.__data__,t=IE(e,A);return t<0?(++this.size,e.push([A,j])):e[t][1]=j,this}var upA=i6j;function bx(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}bx.prototype.clear=lpA;bx.prototype.delete=cpA;bx.prototype.get=dpA;bx.prototype.has=kpA;bx.prototype.set=upA;var DE=bx;var s6j=Xs(oa,"Map"),OE=s6j;function l6j(){this.size=0,this.__data__={hash:new s9,map:new(OE||DE),string:new s9}}var ppA=l6j;function c6j(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}var mpA=c6j;function d6j(A,j){var e=A.__data__;return mpA(j)?e[typeof j=="string"?"string":"hash"]:e.map}var PE=d6j;function k6j(A){var j=PE(this,A).delete(A);return this.size-=j?1:0,j}var EpA=k6j;function u6j(A){return PE(this,A).get(A)}var BpA=u6j;function p6j(A){return PE(this,A).has(A)}var gpA=p6j;function m6j(A,j){var e=PE(this,A),t=e.size;return e.set(A,j),this.size+=e.size==t?0:1,this}var hpA=m6j;function yx(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}yx.prototype.clear=ppA;yx.prototype.delete=EpA;yx.prototype.get=BpA;yx.prototype.has=gpA;yx.prototype.set=hpA;var Ah=yx;var E6j="Expected a function";function l9(A,j){if(typeof A!="function"||j!=null&&typeof j!="function")throw new TypeError(E6j);var e=function(){var t=arguments,r=j?j.apply(this,t):t[0],a=e.cache;if(a.has(r))return a.get(r);var n=A.apply(this,t);return e.cache=a.set(r,n)||a,n};return e.cache=new(l9.Cache||Ah),e}l9.Cache=Ah;var qpA=l9;var B6j=500;function g6j(A){var j=qpA(A,function(t){return e.size===B6j&&e.clear(),t}),e=j.cache;return j}var vpA=g6j;var h6j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q6j=/\\(\\)?/g,v6j=vpA(function(A){var j=[];return A.charCodeAt(0)===46&&j.push(""),A.replace(h6j,function(e,t,r,a){j.push(r?a.replace(q6j,"$1"):t||e)}),j}),xpA=v6j;function x6j(A){return A==null?"":bc(A)}var U6=x6j;function f6j(A,j){return Qt(A)?A:Gx(A,j)?[A]:xpA(U6(A))}var Ic=f6j;var G6j=1/0;function F6j(A){if(typeof A=="string"||wd(A))return A;var j=A+"";return j=="0"&&1/A==-G6j?"-0":j}var Dc=F6j;function b6j(A,j){j=Ic(j,A);for(var e=0,t=j.length;A!=null&&e<t;)A=A[Dc(j[e++])];return e&&e==t?A:void 0}var su=b6j;function y6j(A,j,e){var t=A==null?void 0:su(A,j);return t===void 0?e:t}var m0=y6j;function $6j(A,j){for(var e=-1,t=j.length,r=A.length;++e<t;)A[r+e]=j[e];return A}var $x=$6j;var fpA=yo?yo.isConcatSpreadable:void 0;function w6j(A){return Qt(A)||Dd(A)||!!(fpA&&A&&A[fpA])}var GpA=w6j;function FpA(A,j,e,t,r){var a=-1,n=A.length;for(e||(e=GpA),r||(r=[]);++a<n;){var o=A[a];j>0&&e(o)?j>1?FpA(o,j-1,e,t,r):$x(r,o):t||(r[r.length]=o)}return r}var CE=FpA;function I6j(A){var j=A==null?0:A.length;return j?CE(A,1):[]}var Pd=I6j;function D6j(A){return hx(H1(A,void 0,Pd),A+"")}var S1=D6j;var O6j=K1(Object.getPrototypeOf,Object),wx=O6j;var P6j="[object Object]",C6j=Function.prototype,H6j=Object.prototype,bpA=C6j.toString,T6j=H6j.hasOwnProperty,K6j=bpA.call(Object);function S6j(A){if(!Wa(A)||io(A)!=P6j)return!1;var j=wx(A);if(j===null)return!0;var e=T6j.call(j,"constructor")&&j.constructor;return typeof e=="function"&&e instanceof e&&bpA.call(e)==K6j}var M1=S6j;function M6j(A,j,e){var t=-1,r=A.length;j<0&&(j=-j>r?0:r+j),e=e>r?r:e,e<0&&(e+=r),r=j>e?0:e-j>>>0,j>>>=0;for(var a=Array(r);++t<r;)a[t]=A[t+j];return a}var Ix=M6j;function _6j(A,j,e){var t=A.length;return e=e===void 0?t:e,!j&&e>=t?A:Ix(A,j,e)}var Dx=_6j;var L6j="\\ud800-\\udfff",N6j="\\u0300-\\u036f",z6j="\\ufe20-\\ufe2f",R6j="\\u20d0-\\u20ff",J6j=N6j+z6j+R6j,U6j="\\ufe0e\\ufe0f",X6j="\\u200d",V6j=RegExp("["+X6j+L6j+J6j+U6j+"]");function W6j(A){return V6j.test(A)}var Ox=W6j;function Y6j(A){return A.split("")}var ypA=Y6j;var $pA="\\ud800-\\udfff",Q6j="\\u0300-\\u036f",Z6j="\\ufe20-\\ufe2f",Anj="\\u20d0-\\u20ff",jnj=Q6j+Z6j+Anj,enj="\\ufe0e\\ufe0f",tnj="["+$pA+"]",c9="["+jnj+"]",d9="\\ud83c[\\udffb-\\udfff]",rnj="(?:"+c9+"|"+d9+")",wpA="[^"+$pA+"]",IpA="(?:\\ud83c[\\udde6-\\uddff]){2}",DpA="[\\ud800-\\udbff][\\udc00-\\udfff]",anj="\\u200d",OpA=rnj+"?",PpA="["+enj+"]?",nnj="(?:"+anj+"(?:"+[wpA,IpA,DpA].join("|")+")"+PpA+OpA+")*",onj=PpA+OpA+nnj,inj="(?:"+[wpA+c9+"?",c9,IpA,DpA,tnj].join("|")+")",snj=RegExp(d9+"(?="+d9+")|"+inj+onj,"g");function lnj(A){return A.match(snj)||[]}var CpA=lnj;function cnj(A){return Ox(A)?CpA(A):ypA(A)}var HE=cnj;function dnj(A,j,e,t){var r=-1,a=A==null?0:A.length;for(t&&a&&(e=A[++r]);++r<a;)e=j(e,A[r],r,A);return e}var _1=dnj;function knj(A){return function(j){return A?.[j]}}var L1=knj;var unj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},pnj=L1(unj),HpA=pnj;var mnj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Enj="\\u0300-\\u036f",Bnj="\\ufe20-\\ufe2f",gnj="\\u20d0-\\u20ff",hnj=Enj+Bnj+gnj,qnj="["+hnj+"]",vnj=RegExp(qnj,"g");function xnj(A){return A=U6(A),A&&A.replace(mnj,HpA).replace(vnj,"")}var TpA=xnj;var fnj=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Gnj(A){return A.match(fnj)||[]}var KpA=Gnj;var Fnj=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function bnj(A){return Fnj.test(A)}var SpA=bnj;var zpA="\\ud800-\\udfff",ynj="\\u0300-\\u036f",$nj="\\ufe20-\\ufe2f",wnj="\\u20d0-\\u20ff",Inj=ynj+$nj+wnj,RpA="\\u2700-\\u27bf",JpA="a-z\\xdf-\\xf6\\xf8-\\xff",Dnj="\\xac\\xb1\\xd7\\xf7",Onj="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pnj="\\u2000-\\u206f",Cnj=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",UpA="A-Z\\xc0-\\xd6\\xd8-\\xde",Hnj="\\ufe0e\\ufe0f",XpA=Dnj+Onj+Pnj+Cnj,VpA="['\u2019]",MpA="["+XpA+"]",Tnj="["+Inj+"]",WpA="\\d+",Knj="["+RpA+"]",YpA="["+JpA+"]",QpA="[^"+zpA+XpA+WpA+RpA+JpA+UpA+"]",Snj="\\ud83c[\\udffb-\\udfff]",Mnj="(?:"+Tnj+"|"+Snj+")",_nj="[^"+zpA+"]",ZpA="(?:\\ud83c[\\udde6-\\uddff]){2}",AmA="[\\ud800-\\udbff][\\udc00-\\udfff]",Px="["+UpA+"]",Lnj="\\u200d",_pA="(?:"+YpA+"|"+QpA+")",Nnj="(?:"+Px+"|"+QpA+")",LpA="(?:"+VpA+"(?:d|ll|m|re|s|t|ve))?",NpA="(?:"+VpA+"(?:D|LL|M|RE|S|T|VE))?",jmA=Mnj+"?",emA="["+Hnj+"]?",znj="(?:"+Lnj+"(?:"+[_nj,ZpA,AmA].join("|")+")"+emA+jmA+")*",Rnj="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jnj="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Unj=emA+jmA+znj,Xnj="(?:"+[Knj,ZpA,AmA].join("|")+")"+Unj,Vnj=RegExp([Px+"?"+YpA+"+"+LpA+"(?="+[MpA,Px,"$"].join("|")+")",Nnj+"+"+NpA+"(?="+[MpA,Px+_pA,"$"].join("|")+")",Px+"?"+_pA+"+"+LpA,Px+"+"+NpA,Jnj,Rnj,WpA,Xnj].join("|"),"g");function Wnj(A){return A.match(Vnj)||[]}var tmA=Wnj;function Ynj(A,j,e){return A=U6(A),j=e?void 0:j,j===void 0?SpA(A)?tmA(A):KpA(A):A.match(j)||[]}var rmA=Ynj;var Qnj="['\u2019]",Znj=RegExp(Qnj,"g");function Aoj(A){return function(j){return _1(rmA(TpA(j).replace(Znj,"")),A,"")}}var amA=Aoj;var joj=oa.isFinite,eoj=Math.min;function toj(A){var j=Math[A];return function(e,t){if(e=Id(e),t=t==null?0:eoj(ji(t),292),t&&joj(e)){var r=(U6(e)+"e").split("e"),a=j(r[0]+"e"+(+r[1]+t));return r=(U6(a)+"e").split("e"),+(r[0]+"e"+(+r[1]-t))}return j(e)}}var nmA=toj;var roj=Math.ceil,aoj=Math.max;function noj(A,j,e){(e?_l(A,j,e):j===void 0)?j=1:j=aoj(ji(j),0);var t=A==null?0:A.length;if(!t||j<1)return[];for(var r=0,a=0,n=Array(roj(t/j));r<t;)n[a++]=Ix(A,r,r+=j);return n}var wo=noj;function ooj(A,j,e){return A===A&&(e!==void 0&&(A=A<=e?A:e),j!==void 0&&(A=A>=j?A:j)),A}var Cx=ooj;function ioj(A,j,e){return e===void 0&&(e=j,j=void 0),e!==void 0&&(e=Id(e),e=e===e?e:0),j!==void 0&&(j=Id(j),j=j===j?j:0),Cx(Id(A),j,e)}var k9=ioj;function soj(){this.__data__=new DE,this.size=0}var omA=soj;function loj(A){var j=this.__data__,e=j.delete(A);return this.size=j.size,e}var imA=loj;function coj(A){return this.__data__.get(A)}var smA=coj;function doj(A){return this.__data__.has(A)}var lmA=doj;var koj=200;function uoj(A,j){var e=this.__data__;if(e instanceof DE){var t=e.__data__;if(!OE||t.length<koj-1)return t.push([A,j]),this.size=++e.size,this;e=this.__data__=new Ah(t)}return e.set(A,j),this.size=e.size,this}var cmA=uoj;function Hx(A){var j=this.__data__=new DE(A);this.size=j.size}Hx.prototype.clear=omA;Hx.prototype.delete=imA;Hx.prototype.get=smA;Hx.prototype.has=lmA;Hx.prototype.set=cmA;var lu=Hx;function poj(A,j){return A&&Oi(j,Sa(j),A)}var dmA=poj;function moj(A,j){return A&&Oi(j,wc(j),A)}var kmA=moj;var EmA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,umA=EmA&&typeof module=="object"&&module&&!module.nodeType&&module,Eoj=umA&&umA.exports===EmA,pmA=Eoj?oa.Buffer:void 0,mmA=pmA?pmA.allocUnsafe:void 0;function Boj(A,j){if(j)return A.slice();var e=A.length,t=mmA?mmA(e):new A.constructor(e);return A.copy(t),t}var N1=Boj;function goj(A,j){for(var e=-1,t=A==null?0:A.length,r=0,a=[];++e<t;){var n=A[e];j(n,e,A)&&(a[r++]=n)}return a}var Tx=goj;function hoj(){return[]}var z1=hoj;var qoj=Object.prototype,voj=qoj.propertyIsEnumerable,BmA=Object.getOwnPropertySymbols,xoj=BmA?function(A){return A==null?[]:(A=Object(A),Tx(BmA(A),function(j){return voj.call(A,j)}))}:z1,Kx=xoj;function foj(A,j){return Oi(A,Kx(A),j)}var gmA=foj;var Goj=Object.getOwnPropertySymbols,Foj=Goj?function(A){for(var j=[];A;)$x(j,Kx(A)),A=wx(A);return j}:z1,R1=Foj;function boj(A,j){return Oi(A,R1(A),j)}var hmA=boj;function yoj(A,j,e){var t=j(A);return Qt(A)?t:$x(t,e(A))}var J1=yoj;function $oj(A){return J1(A,Sa,Kx)}var E0=$oj;function woj(A){return J1(A,wc,R1)}var Sx=woj;var Ioj=Xs(oa,"DataView"),U1=Ioj;var Doj=Xs(oa,"Promise"),X1=Doj;var Ooj=Xs(oa,"Set"),TE=Ooj;var qmA="[object Map]",Poj="[object Object]",vmA="[object Promise]",xmA="[object Set]",fmA="[object WeakMap]",GmA="[object DataView]",Coj=vp(U1),Hoj=vp(OE),Toj=vp(X1),Koj=vp(TE),Soj=vp(Qg),jh=io;(U1&&jh(new U1(new ArrayBuffer(1)))!=GmA||OE&&jh(new OE)!=qmA||X1&&jh(X1.resolve())!=vmA||TE&&jh(new TE)!=xmA||Qg&&jh(new Qg)!=fmA)&&(jh=function(A){var j=io(A),e=j==Poj?A.constructor:void 0,t=e?vp(e):"";if(t)switch(t){case Coj:return GmA;case Hoj:return qmA;case Toj:return vmA;case Koj:return xmA;case Soj:return fmA}return j});var Ll=jh;var Moj=Object.prototype,_oj=Moj.hasOwnProperty;function Loj(A){var j=A.length,e=new A.constructor(j);return j&&typeof A[0]=="string"&&_oj.call(A,"index")&&(e.index=A.index,e.input=A.input),e}var FmA=Loj;var Noj=oa.Uint8Array,Mx=Noj;function zoj(A){var j=new A.constructor(A.byteLength);return new Mx(j).set(new Mx(A)),j}var _x=zoj;function Roj(A,j){var e=j?_x(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.byteLength)}var bmA=Roj;var Joj=/\w*$/;function Uoj(A){var j=new A.constructor(A.source,Joj.exec(A));return j.lastIndex=A.lastIndex,j}var ymA=Uoj;var $mA=yo?yo.prototype:void 0,wmA=$mA?$mA.valueOf:void 0;function Xoj(A){return wmA?Object(wmA.call(A)):{}}var ImA=Xoj;function Voj(A,j){var e=j?_x(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.length)}var V1=Voj;var Woj="[object Boolean]",Yoj="[object Date]",Qoj="[object Map]",Zoj="[object Number]",Aij="[object RegExp]",jij="[object Set]",eij="[object String]",tij="[object Symbol]",rij="[object ArrayBuffer]",aij="[object DataView]",nij="[object Float32Array]",oij="[object Float64Array]",iij="[object Int8Array]",sij="[object Int16Array]",lij="[object Int32Array]",cij="[object Uint8Array]",dij="[object Uint8ClampedArray]",kij="[object Uint16Array]",uij="[object Uint32Array]";function pij(A,j,e){var t=A.constructor;switch(j){case rij:return _x(A);case Woj:case Yoj:return new t(+A);case aij:return bmA(A,e);case nij:case oij:case iij:case sij:case lij:case cij:case dij:case kij:case uij:return V1(A,e);case Qoj:return new t;case Zoj:case eij:return new t(A);case Aij:return ymA(A);case jij:return new t;case tij:return ImA(A)}}var DmA=pij;function mij(A){return typeof A.constructor=="function"&&!iu(A)?GE(wx(A)):{}}var W1=mij;var Eij="[object Map]";function Bij(A){return Wa(A)&&Ll(A)==Eij}var OmA=Bij;var PmA=ls&&ls.isMap,gij=PmA?$c(PmA):OmA,CmA=gij;var hij="[object Set]";function qij(A){return Wa(A)&&Ll(A)==hij}var HmA=qij;var TmA=ls&&ls.isSet,vij=TmA?$c(TmA):HmA,KmA=vij;var xij=1,fij=2,Gij=4,SmA="[object Arguments]",Fij="[object Array]",bij="[object Boolean]",yij="[object Date]",$ij="[object Error]",MmA="[object Function]",wij="[object GeneratorFunction]",Iij="[object Map]",Dij="[object Number]",_mA="[object Object]",Oij="[object RegExp]",Pij="[object Set]",Cij="[object String]",Hij="[object Symbol]",Tij="[object WeakMap]",Kij="[object ArrayBuffer]",Sij="[object DataView]",Mij="[object Float32Array]",_ij="[object Float64Array]",Lij="[object Int8Array]",Nij="[object Int16Array]",zij="[object Int32Array]",Rij="[object Uint8Array]",Jij="[object Uint8ClampedArray]",Uij="[object Uint16Array]",Xij="[object Uint32Array]",i6={};i6[SmA]=i6[Fij]=i6[Kij]=i6[Sij]=i6[bij]=i6[yij]=i6[Mij]=i6[_ij]=i6[Lij]=i6[Nij]=i6[zij]=i6[Iij]=i6[Dij]=i6[_mA]=i6[Oij]=i6[Pij]=i6[Cij]=i6[Hij]=i6[Rij]=i6[Jij]=i6[Uij]=i6[Xij]=!0;i6[$ij]=i6[MmA]=i6[Tij]=!1;function Y1(A,j,e,t,r,a){var n,o=j&xij,i=j&fij,s=j&Gij;if(e&&(n=r?e(A,t,r,a):e(A)),n!==void 0)return n;if(!Ea(A))return A;var l=Qt(A);if(l){if(n=FmA(A),!o)return bE(A,n)}else{var d=Ll(A),k=d==MmA||d==wij;if(Od(A))return N1(A,o);if(d==_mA||d==SmA||k&&!r){if(n=i||k?{}:W1(A),!o)return i?hmA(A,kmA(n,A)):gmA(A,dmA(n,A))}else{if(!i6[d])return r?A:{};n=DmA(A,d,o)}}a||(a=new lu);var u=a.get(A);if(u)return u;a.set(A,n),KmA(A)?A.forEach(function(S){n.add(Y1(S,j,e,S,A,a))}):CmA(A)&&A.forEach(function(S,f){n.set(f,Y1(S,j,e,f,A,a))});var m=s?i?Sx:E0:i?wc:Sa,I=l?void 0:m(A);return $1(I||A,function(S,f){I&&(f=S,S=A[f]),$E(n,f,Y1(S,j,e,f,A,a))}),n}var Lx=Y1;var Vij=4;function Wij(A){return Lx(A,Vij)}var Nl=Wij;var Yij=1,Qij=4;function Zij(A){return Lx(A,Yij|Qij)}var B0=Zij;function Asj(A){for(var j=-1,e=A==null?0:A.length,t=0,r=[];++j<e;){var a=A[j];a&&(r[t++]=a)}return r}var Lr=Asj;var jsj="__lodash_hash_undefined__";function esj(A){return this.__data__.set(A,jsj),this}var LmA=esj;function tsj(A){return this.__data__.has(A)}var NmA=tsj;function Q1(A){var j=-1,e=A==null?0:A.length;for(this.__data__=new Ah;++j<e;)this.add(A[j])}Q1.prototype.add=Q1.prototype.push=LmA;Q1.prototype.has=NmA;var Z1=Q1;function rsj(A,j){for(var e=-1,t=A==null?0:A.length;++e<t;)if(j(A[e],e,A))return!0;return!1}var AO=rsj;function asj(A,j){return A.has(j)}var jO=asj;var nsj=1,osj=2;function isj(A,j,e,t,r,a){var n=e&nsj,o=A.length,i=j.length;if(o!=i&&!(n&&i>o))return!1;var s=a.get(A),l=a.get(j);if(s&&l)return s==j&&l==A;var d=-1,k=!0,u=e&osj?new Z1:void 0;for(a.set(A,j),a.set(j,A);++d<o;){var m=A[d],I=j[d];if(t)var S=n?t(I,m,d,j,A,a):t(m,I,d,A,j,a);if(S!==void 0){if(S)continue;k=!1;break}if(u){if(!AO(j,function(f,v){if(!jO(u,v)&&(m===f||r(m,f,e,t,a)))return u.push(v)})){k=!1;break}}else if(!(m===I||r(m,I,e,t,a))){k=!1;break}}return a.delete(A),a.delete(j),k}var eO=isj;function ssj(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}var zmA=ssj;function lsj(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var Nx=lsj;var csj=1,dsj=2,ksj="[object Boolean]",usj="[object Date]",psj="[object Error]",msj="[object Map]",Esj="[object Number]",Bsj="[object RegExp]",gsj="[object Set]",hsj="[object String]",qsj="[object Symbol]",vsj="[object ArrayBuffer]",xsj="[object DataView]",RmA=yo?yo.prototype:void 0,u9=RmA?RmA.valueOf:void 0;function fsj(A,j,e,t,r,a,n){switch(e){case xsj:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case vsj:return!(A.byteLength!=j.byteLength||!a(new Mx(A),new Mx(j)));case ksj:case usj:case Esj:return yc(+A,+j);case psj:return A.name==j.name&&A.message==j.message;case Bsj:case hsj:return A==j+"";case msj:var o=zmA;case gsj:var i=t&csj;if(o||(o=Nx),A.size!=j.size&&!i)return!1;var s=n.get(A);if(s)return s==j;t|=dsj,n.set(A,j);var l=eO(o(A),o(j),t,r,a,n);return n.delete(A),l;case qsj:if(u9)return u9.call(A)==u9.call(j)}return!1}var JmA=fsj;var Gsj=1,Fsj=Object.prototype,bsj=Fsj.hasOwnProperty;function ysj(A,j,e,t,r,a){var n=e&Gsj,o=E0(A),i=o.length,s=E0(j),l=s.length;if(i!=l&&!n)return!1;for(var d=i;d--;){var k=o[d];if(!(n?k in j:bsj.call(j,k)))return!1}var u=a.get(A),m=a.get(j);if(u&&m)return u==j&&m==A;var I=!0;a.set(A,j),a.set(j,A);for(var S=n;++d<i;){k=o[d];var f=A[k],v=j[k];if(t)var P=n?t(v,f,k,j,A,a):t(f,v,k,A,j,a);if(!(P===void 0?f===v||r(f,v,e,t,a):P)){I=!1;break}S||(S=k=="constructor")}if(I&&!S){var D=A.constructor,C=j.constructor;D!=C&&"constructor"in A&&"constructor"in j&&!(typeof D=="function"&&D instanceof D&&typeof C=="function"&&C instanceof C)&&(I=!1)}return a.delete(A),a.delete(j),I}var UmA=ysj;var $sj=1,XmA="[object Arguments]",VmA="[object Array]",tO="[object Object]",wsj=Object.prototype,WmA=wsj.hasOwnProperty;function Isj(A,j,e,t,r,a){var n=Qt(A),o=Qt(j),i=n?VmA:Ll(A),s=o?VmA:Ll(j);i=i==XmA?tO:i,s=s==XmA?tO:s;var l=i==tO,d=s==tO,k=i==s;if(k&&Od(A)){if(!Od(j))return!1;n=!0,l=!1}if(k&&!l)return a||(a=new lu),n||wE(A)?eO(A,j,e,t,r,a):JmA(A,j,i,e,t,r,a);if(!(e&$sj)){var u=l&&WmA.call(A,"__wrapped__"),m=d&&WmA.call(j,"__wrapped__");if(u||m){var I=u?A.value():A,S=m?j.value():j;return a||(a=new lu),r(I,S,e,t,a)}}return k?(a||(a=new lu),UmA(A,j,e,t,r,a)):!1}var YmA=Isj;function QmA(A,j,e,t,r){return A===j?!0:A==null||j==null||!Wa(A)&&!Wa(j)?A!==A&&j!==j:YmA(A,j,e,t,QmA,r)}var rO=QmA;var Dsj=1,Osj=2;function Psj(A,j,e,t){var r=e.length,a=r,n=!t;if(A==null)return!a;for(A=Object(A);r--;){var o=e[r];if(n&&o[2]?o[1]!==A[o[0]]:!(o[0]in A))return!1}for(;++r<a;){o=e[r];var i=o[0],s=A[i],l=o[1];if(n&&o[2]){if(s===void 0&&!(i in A))return!1}else{var d=new lu;if(t)var k=t(s,l,i,A,j,d);if(!(k===void 0?rO(l,s,Dsj|Osj,t,d):k))return!1}}return!0}var ZmA=Psj;function Csj(A){return A===A&&!Ea(A)}var aO=Csj;function Hsj(A){for(var j=Sa(A),e=j.length;e--;){var t=j[e],r=A[t];j[e]=[t,r,aO(r)]}return j}var AEA=Hsj;function Tsj(A,j){return function(e){return e==null?!1:e[A]===j&&(j!==void 0||A in Object(e))}}var nO=Tsj;function Ksj(A){var j=AEA(A);return j.length==1&&j[0][2]?nO(j[0][0],j[0][1]):function(e){return e===A||ZmA(e,A,j)}}var jEA=Ksj;function Ssj(A,j){return A!=null&&j in Object(A)}var eEA=Ssj;function Msj(A,j,e){j=Ic(j,A);for(var t=-1,r=j.length,a=!1;++t<r;){var n=Dc(j[t]);if(!(a=A!=null&&e(A,n)))break;A=A[n]}return a||++t!=r?a:(r=A==null?0:A.length,!!r&&qx(r)&&nu(n,r)&&(Qt(A)||Dd(A)))}var tEA=Msj;function _sj(A,j){return A!=null&&tEA(A,j,eEA)}var oO=_sj;var Lsj=1,Nsj=2;function zsj(A,j){return Gx(A)&&aO(j)?nO(Dc(A),j):function(e){var t=m0(e,A);return t===void 0&&t===j?oO(e,A):rO(j,t,Lsj|Nsj)}}var rEA=zsj;function Rsj(A){return function(j){return j?.[A]}}var zx=Rsj;function Jsj(A){return function(j){return su(j,A)}}var aEA=Jsj;function Usj(A){return Gx(A)?zx(Dc(A)):aEA(A)}var nEA=Usj;function Xsj(A){return typeof A=="function"?A:A==null?ss:typeof A=="object"?Qt(A)?rEA(A[0],A[1]):jEA(A):nEA(A)}var s6=Xsj;function Vsj(A,j,e,t){for(var r=-1,a=A==null?0:A.length;++r<a;){var n=A[r];j(t,n,e(n),A)}return t}var oEA=Vsj;function Wsj(A){return function(j,e,t){for(var r=-1,a=Object(j),n=t(j),o=n.length;o--;){var i=n[A?o:++r];if(e(a[i],i,a)===!1)break}return j}}var iO=Wsj;var Ysj=iO(),sO=Ysj;function Qsj(A,j){return A&&sO(A,j,Sa)}var KE=Qsj;function Zsj(A,j){return function(e,t){if(e==null)return e;if(!un(e))return A(e,t);for(var r=e.length,a=j?r:-1,n=Object(e);(j?a--:++a<r)&&t(n[a],a,n)!==!1;);return e}}var lO=Zsj;var Alj=lO(KE),cu=Alj;function jlj(A,j,e,t){return cu(A,function(r,a,n){j(t,r,e(r),n)}),t}var iEA=jlj;function elj(A,j){return function(e,t){var r=Qt(e)?oEA:iEA,a=j?j():{};return r(e,A,s6(t,2),a)}}var SE=elj;var tlj=Object.prototype,rlj=tlj.hasOwnProperty,alj=SE(function(A,j,e){rlj.call(A,e)?++A[e]:Di(A,e,1)}),p9=alj;var nlj=8;function m9(A,j,e){j=e?void 0:j;var t=J7A(A,nlj,void 0,void 0,void 0,void 0,void 0,j);return t.placeholder=m9.placeholder,t}m9.placeholder={};var E9=m9;var olj=function(){return oa.Date.now()},cO=olj;var ilj="Expected a function",slj=Math.max,llj=Math.min;function clj(A,j,e){var t,r,a,n,o,i,s=0,l=!1,d=!1,k=!0;if(typeof A!="function")throw new TypeError(ilj);j=Id(j)||0,Ea(e)&&(l=!!e.leading,d="maxWait"in e,a=d?slj(Id(e.maxWait)||0,j):a,k="trailing"in e?!!e.trailing:k);function u(b){var h=t,O=r;return t=r=void 0,s=b,n=A.apply(O,h),n}function m(b){return s=b,o=setTimeout(f,j),l?u(b):n}function I(b){var h=b-i,O=b-s,V=j-h;return d?llj(V,a-O):V}function S(b){var h=b-i,O=b-s;return i===void 0||h>=j||h<0||d&&O>=a}function f(){var b=cO();if(S(b))return v(b);o=setTimeout(f,I(b))}function v(b){return o=void 0,k&&t?u(b):(t=r=void 0,n)}function P(){o!==void 0&&clearTimeout(o),s=0,t=i=r=o=void 0}function D(){return o===void 0?n:v(cO())}function C(){var b=cO(),h=S(b);if(t=arguments,r=this,i=b,h){if(o===void 0)return m(i);if(d)return clearTimeout(o),o=setTimeout(f,j),u(i)}return o===void 0&&(o=setTimeout(f,j)),n}return C.cancel=P,C.flush=D,C}var sEA=clj;var lEA=Object.prototype,dlj=lEA.hasOwnProperty,klj=ou(function(A,j){A=Object(A);var e=-1,t=j.length,r=t>2?j[2]:void 0;for(r&&_l(j[0],j[1],r)&&(t=1);++e<t;)for(var a=j[e],n=wc(a),o=-1,i=n.length;++o<i;){var s=n[o],l=A[s];(l===void 0||yc(l,lEA[s])&&!dlj.call(A,s))&&(A[s]=a[s])}return A}),g0=klj;function ulj(A,j,e){(e!==void 0&&!yc(A[j],e)||e===void 0&&!(j in A))&&Di(A,j,e)}var h0=ulj;function plj(A){return Wa(A)&&un(A)}var Rx=plj;function mlj(A,j){if(!(j==="constructor"&&typeof A[j]=="function")&&j!="__proto__")return A[j]}var q0=mlj;function Elj(A){return Oi(A,wc(A))}var cEA=Elj;function Blj(A,j,e,t,r,a,n){var o=q0(A,e),i=q0(j,e),s=n.get(i);if(s){h0(A,e,s);return}var l=a?a(o,i,e+"",A,j,n):void 0,d=l===void 0;if(d){var k=Qt(i),u=!k&&Od(i),m=!k&&!u&&wE(i);l=i,k||u||m?Qt(o)?l=o:Rx(o)?l=bE(o):u?(d=!1,l=N1(i,!0)):m?(d=!1,l=V1(i,!0)):l=[]:M1(i)||Dd(i)?(l=o,Dd(o)?l=cEA(o):(!Ea(o)||px(o))&&(l=W1(i))):d=!1}d&&(n.set(i,l),r(l,i,t,a,n),n.delete(i)),h0(A,e,l)}var dEA=Blj;function kEA(A,j,e,t,r){A!==j&&sO(j,function(a,n){if(r||(r=new lu),Ea(a))dEA(A,j,n,e,kEA,t,r);else{var o=t?t(q0(A,n),a,n+"",A,j,r):void 0;o===void 0&&(o=a),h0(A,n,o)}},wc)}var uEA=kEA;function glj(A,j,e){for(var t=-1,r=A==null?0:A.length;++t<r;)if(e(j,A[t]))return!0;return!1}var pEA=glj;function hlj(A){var j=A==null?0:A.length;return j?A[j-1]:void 0}var ME=hlj;function qlj(A){return typeof A=="function"?A:ss}var mEA=qlj;var vlj=iO(!0),EEA=vlj;function xlj(A,j){return A&&EEA(A,j,Sa)}var BEA=xlj;var flj=lO(BEA,!0),gEA=flj;function Glj(A,j,e){A=U6(A),j=bc(j);var t=A.length;e=e===void 0?t:Cx(ji(e),0,t);var r=e;return e-=j.length,e>=0&&A.slice(e,r)==j}var dO=Glj;var hEA=/[\\^$.*+?()[\]{}|]/g,Flj=RegExp(hEA.source);function blj(A){return A=U6(A),A&&Flj.test(A)?A.replace(hEA,"\\$&"):A}var B9=blj;function ylj(A,j){var e=[];return cu(A,function(t,r,a){j(t,r,a)&&e.push(t)}),e}var qEA=ylj;function $lj(A,j){var e=Qt(A)?Tx:qEA;return e(A,s6(j,3))}var du=$lj;function wlj(A){return function(j,e,t){var r=Object(j);if(!un(j)){var a=s6(e,3);j=Sa(j),e=function(o){return a(r[o],o,r)}}var n=A(j,e,t);return n>-1?r[a?j[n]:n]:void 0}}var vEA=wlj;var Ilj=Math.max;function Dlj(A,j,e){var t=A==null?0:A.length;if(!t)return-1;var r=e==null?0:ji(e);return r<0&&(r=Ilj(t+r,0)),w1(A,s6(j,3),r)}var v0=Dlj;var Olj=vEA(v0),X6=Olj;function Plj(A,j,e){var t;return e(A,function(r,a,n){if(j(r,a,n))return t=a,!1}),t}var xEA=Plj;function Clj(A,j){return xEA(A,s6(j,3),KE)}var g9=Clj;function Hlj(A){return A&&A.length?A[0]:void 0}var kO=Hlj;function Tlj(A,j){var e=-1,t=un(A)?Array(A.length):[];return cu(A,function(r,a,n){t[++e]=j(r,a,n)}),t}var uO=Tlj;function Klj(A,j){var e=Qt(A)?$o:uO;return e(A,s6(j,3))}var pn=Klj;function Slj(A,j){return CE(pn(A,j),1)}var Oc=Slj;var Mlj=Object.prototype,_lj=Mlj.hasOwnProperty,Llj=SE(function(A,j,e){_lj.call(A,e)?A[e].push(j):Di(A,e,[j])}),Gp=Llj;var Nlj="[object String]";function zlj(A){return typeof A=="string"||!Qt(A)&&Wa(A)&&io(A)==Nlj}var pO=zlj;function Rlj(A,j){return $o(j,function(e){return A[e]})}var fEA=Rlj;function Jlj(A){return A==null?[]:fEA(A,Sa(A))}var l6=Jlj;var Ulj=Math.max;function Xlj(A,j,e,t){A=un(A)?A:l6(A),e=e&&!t?ji(e):0;var r=A.length;return e<0&&(e=Ulj(r+e,0)),pO(A)?e<=r&&A.indexOf(j,e)>-1:!!r&&yE(A,j,e)>-1}var Br=Xlj;function Vlj(A,j){return j.length<2?A:su(A,Ix(j,0,-1))}var GEA=Vlj;var Wlj="[object Date]";function Ylj(A){return Wa(A)&&io(A)==Wlj}var FEA=Ylj;var bEA=ls&&ls.isDate,Qlj=bEA?$c(bEA):FEA,x0=Qlj;var Zlj="[object Map]",Acj="[object Set]",jcj=Object.prototype,ecj=jcj.hasOwnProperty;function tcj(A){if(A==null)return!0;if(un(A)&&(Qt(A)||typeof A=="string"||typeof A.splice=="function"||Od(A)||wE(A)||Dd(A)))return!A.length;var j=Ll(A);if(j==Zlj||j==Acj)return!A.size;if(iu(A))return!fx(A).length;for(var e in A)if(ecj.call(A,e))return!1;return!0}var f0=tcj;function rcj(A){return A==null}var h9=rcj;var acj="[object RegExp]";function ncj(A){return Wa(A)&&io(A)==acj}var yEA=ncj;var $EA=ls&&ls.isRegExp,ocj=$EA?$c($EA):yEA,wEA=ocj;var icj=amA(function(A,j,e){return A+(e?"-":"")+j.toLowerCase()}),mO=icj;var scj=SE(function(A,j,e){Di(A,e,j)}),Ia=scj;function lcj(A,j){var e={};return j=s6(j,3),KE(A,function(t,r,a){Di(e,j(t,r,a),t)}),e}var EO=lcj;function ccj(A,j){var e={};return j=s6(j,3),KE(A,function(t,r,a){Di(e,r,j(t,r,a))}),e}var zl=ccj;var dcj=vx(function(A,j,e){uEA(A,j,e)}),Cd=dcj;function kcj(A,j){return j=Ic(j,A),A=GEA(A,j),A==null||delete A[Dc(ME(j))]}var IEA=kcj;function ucj(A){return M1(A)?void 0:A}var DEA=ucj;var pcj=1,mcj=2,Ecj=4,Bcj=S1(function(A,j){var e={};if(A==null)return e;var t=!1;j=$o(j,function(a){return a=Ic(a,A),t||(t=a.length>1),a}),Oi(A,Sx(A),e),t&&(e=Lx(e,pcj|mcj|Ecj,DEA));for(var r=j.length;r--;)IEA(e,j[r]);return e}),ei=Bcj;function gcj(A,j,e,t){if(!Ea(A))return A;j=Ic(j,A);for(var r=-1,a=j.length,n=a-1,o=A;o!=null&&++r<a;){var i=Dc(j[r]),s=e;if(i==="__proto__"||i==="constructor"||i==="prototype")return A;if(r!=n){var l=o[i];s=t?t(l,i,o):void 0,s===void 0&&(s=Ea(l)?l:nu(j[r+1])?[]:{})}$E(o,i,s),o=o[i]}return A}var OEA=gcj;function hcj(A,j,e){for(var t=-1,r=j.length,a={};++t<r;){var n=j[t],o=su(A,n);e(o,n)&&OEA(a,Ic(n,A),o)}return a}var BO=hcj;function qcj(A,j){if(A==null)return{};var e=$o(Sx(A),function(t){return[t]});return j=s6(j),BO(A,e,function(t,r){return j(t,r[0])})}var G0=qcj;function vcj(A,j){var e=A.length;for(A.sort(j);e--;)A[e]=A[e].value;return A}var PEA=vcj;function xcj(A,j){if(A!==j){var e=A!==void 0,t=A===null,r=A===A,a=wd(A),n=j!==void 0,o=j===null,i=j===j,s=wd(j);if(!o&&!s&&!a&&A>j||a&&n&&i&&!o&&!s||t&&n&&i||!e&&i||!r)return 1;if(!t&&!a&&!s&&A<j||s&&e&&r&&!t&&!a||o&&e&&r||!n&&r||!i)return-1}return 0}var CEA=xcj;function fcj(A,j,e){for(var t=-1,r=A.criteria,a=j.criteria,n=r.length,o=e.length;++t<n;){var i=CEA(r[t],a[t]);if(i){if(t>=o)return i;var s=e[t];return i*(s=="desc"?-1:1)}}return A.index-j.index}var HEA=fcj;function Gcj(A,j,e){j.length?j=$o(j,function(a){return Qt(a)?function(n){return su(n,a.length===1?a[0]:a)}:a}):j=[ss];var t=-1;j=$o(j,$c(s6));var r=uO(A,function(a,n,o){var i=$o(j,function(s){return s(a)});return{criteria:i,index:++t,value:a}});return PEA(r,function(a,n){return HEA(a,n,e)})}var TEA=Gcj;var Fcj=zx("length"),KEA=Fcj;var MEA="\\ud800-\\udfff",bcj="\\u0300-\\u036f",ycj="\\ufe20-\\ufe2f",$cj="\\u20d0-\\u20ff",wcj=bcj+ycj+$cj,Icj="\\ufe0e\\ufe0f",Dcj="["+MEA+"]",q9="["+wcj+"]",v9="\\ud83c[\\udffb-\\udfff]",Ocj="(?:"+q9+"|"+v9+")",_EA="[^"+MEA+"]",LEA="(?:\\ud83c[\\udde6-\\uddff]){2}",NEA="[\\ud800-\\udbff][\\udc00-\\udfff]",Pcj="\\u200d",zEA=Ocj+"?",REA="["+Icj+"]?",Ccj="(?:"+Pcj+"(?:"+[_EA,LEA,NEA].join("|")+")"+REA+zEA+")*",Hcj=REA+zEA+Ccj,Tcj="(?:"+[_EA+q9+"?",q9,LEA,NEA,Dcj].join("|")+")",SEA=RegExp(v9+"(?="+v9+")|"+Tcj+Hcj,"g");function Kcj(A){for(var j=SEA.lastIndex=0;SEA.test(A);)++j;return j}var JEA=Kcj;function Scj(A){return Ox(A)?JEA(A):KEA(A)}var UEA=Scj;var Mcj=SE(function(A,j,e){A[e?0:1].push(j)},function(){return[[],[]]}),F0=Mcj;function _cj(A,j){return BO(A,j,function(e,t){return oO(A,t)})}var XEA=_cj;var Lcj=S1(function(A,j){return A==null?{}:XEA(A,j)}),gO=Lcj;function Ncj(A,j,e,t,r){return r(A,function(a,n,o){e=t?(t=!1,a):j(e,a,n,o)}),e}var hO=Ncj;function zcj(A,j,e){var t=Qt(A)?_1:hO,r=arguments.length<3;return t(A,s6(j,4),e,r,cu)}var ti=zcj;function Rcj(A,j,e,t){var r=A==null?0:A.length;for(t&&r&&(e=A[--r]);r--;)e=j(e,A[r],r,A);return e}var VEA=Rcj;function Jcj(A,j,e){var t=Qt(A)?VEA:hO,r=arguments.length<3;return t(A,s6(j,4),e,r,gEA)}var x9=Jcj;var Ucj=nmA("round"),qO=Ucj;var Xcj="[object Map]",Vcj="[object Set]";function Wcj(A){if(A==null)return 0;if(un(A))return pO(A)?UEA(A):A.length;var j=Ll(A);return j==Xcj||j==Vcj?A.size:fx(A).length}var Pc=Wcj;function Ycj(A,j){var e;return cu(A,function(t,r,a){return e=j(t,r,a),!e}),!!e}var WEA=Ycj;function Qcj(A,j,e){var t=Qt(A)?AO:WEA;return e&&_l(A,j,e)&&(j=void 0),t(A,s6(j,3))}var b0=Qcj;var Zcj=ou(function(A,j){if(A==null)return[];var e=j.length;return e>1&&_l(A,j[0],j[1])?j=[]:e>2&&_l(j[0],j[1],j[2])&&(j=[j[0]]),TEA(A,CE(j,1),[])}),vO=Zcj;var Adj=4294967295;function jdj(A,j,e){return e&&typeof e!="number"&&_l(A,j,e)&&(j=e=void 0),e=e===void 0?Adj:e>>>0,e?(A=U6(A),A&&(typeof j=="string"||j!=null&&!wEA(j))&&(j=bc(j),!j&&Ox(A))?Dx(HE(A),0,e):A.split(j,e)):[]}var f9=jdj;function edj(A,j,e){return A=U6(A),e=e==null?0:Cx(ji(e),0,A.length),j=bc(j),A.slice(e,e+j.length)==j}var Fp=edj;var tdj="Expected a function";function rdj(A,j,e){var t=!0,r=!0;if(typeof A!="function")throw new TypeError(tdj);return Ea(e)&&(t="leading"in e?!!e.leading:t,r="trailing"in e?!!e.trailing:r),sEA(A,j,{leading:t,maxWait:j,trailing:r})}var G9=rdj;var adj=9007199254740991,F9=4294967295,ndj=Math.min;function odj(A,j){if(A=ji(A),A<1||A>adj)return[];var e=F9,t=ndj(A,F9);j=mEA(j),A-=F9;for(var r=xx(t,j);++e<A;)j(e);return r}var eh=odj;function idj(A,j){for(var e=A.length;e--&&yE(j,A[e],0)>-1;);return e}var YEA=idj;function sdj(A,j){for(var e=-1,t=A.length;++e<t&&yE(j,A[e],0)>-1;);return e}var xO=sdj;function ldj(A,j,e){if(A=U6(A),A&&(e||j===void 0))return E1(A);if(!A||!(j=bc(j)))return A;var t=HE(A),r=HE(j),a=xO(t,r),n=YEA(t,r)+1;return Dx(t,a,n).join("")}var b9=ldj;var cdj=/^\s+/;function ddj(A,j,e){if(A=U6(A),A&&(e||j===void 0))return A.replace(cdj,"");if(!A||!(j=bc(j)))return A;var t=HE(A),r=xO(t,HE(j));return Dx(t,r).join("")}var Jx=ddj;var kdj={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},udj=L1(kdj),QEA=udj;var ZEA=/&(?:amp|lt|gt|quot|#39);/g,pdj=RegExp(ZEA.source);function mdj(A){return A=U6(A),A&&pdj.test(A)?A.replace(ZEA,QEA):A}var ABA=mdj;var Edj=1/0,Bdj=TE&&1/Nx(new TE([,-0]))[1]==Edj?function(A){return new TE(A)}:x1,jBA=Bdj;var gdj=200;function hdj(A,j,e){var t=-1,r=I1,a=A.length,n=!0,o=[],i=o;if(e)n=!1,r=pEA;else if(a>=gdj){var s=j?null:jBA(A);if(s)return Nx(s);n=!1,r=jO,i=new Z1}else i=j?[]:o;A:for(;++t<a;){var l=A[t],d=j?j(l):l;if(l=e||l!==0?l:0,n&&d===d){for(var k=i.length;k--;)if(i[k]===d)continue A;j&&i.push(d),o.push(l)}else r(i,d,e)||(i!==o&&i.push(d),o.push(l))}return o}var fO=hdj;var qdj=ou(function(A){return fO(CE(A,1,Rx,!0))}),GO=qdj;function vdj(A){return A&&A.length?fO(A):[]}var y0=vdj;var xdj=Math.max;function fdj(A){if(!(A&&A.length))return[];var j=0;return A=Tx(A,function(e){if(Rx(e))return j=xdj(e.length,j),!0}),xx(j,function(e){return $o(A,zx(e))})}var eBA=fdj;function Gdj(A,j){if(!(A&&A.length))return[];var e=eBA(A);return j==null?e:$o(e,function(t){return FE(j,void 0,t)})}var tBA=Gdj;var Fdj=ou(function(A){var j=A.length,e=j>1?A[j-1]:void 0;return e=typeof e=="function"?(A.pop(),e):void 0,tBA(A,e)}),FO=Fdj;var Xr;(function(A){A.Brave="Brave",A.Chrome="Chrome",A.Firefox="Firefox",A.Safari="Safari",A.Edge="Microsoft Edge",A.Opera="Opera",A.IE="Internet Explorer",A.AndroidBrowser="Android Browser",A.WebKit="WebKit",A.Other="Browser"})(Xr||(Xr={}));var Da;(function(A){A.macOS="MacOSX",A.iOS="iOS",A.Windows="Windows",A.Android="Android",A.Linux="Linux",A.ChromeOS="ChromeOS",A.Other=""})(Da||(Da={}));var _E=async A=>{let j=await rBA(A);return j===void 0?nBA(A):j},bdj=new Map([["Brave",Xr.Brave],["Google Chrome",Xr.Chrome],["Microsoft Edge",Xr.Edge],["Opera",Xr.Opera],["Chromium",Xr.Chrome]]),ydj=new Map([["Android",Da.Android],["Chrome OS",Da.ChromeOS],["Fuchsia",Da.Other],["iOS",Da.iOS],["Linux",Da.Linux],["macOS",Da.macOS],["Windows",Da.Windows],["Unknown",Da.Other]]),rBA=async A=>{if(!navigator.userAgentData?.getHighEntropyValues)return;let j;try{j=await navigator.userAgentData.getHighEntropyValues(["fullVersionList","platformVersion"])}catch{return}if(!j.fullVersionList||!j.platform||!j.platformVersion)return;let{fullVersionList:e,platform:t,platformVersion:r}=j,a={name:Xr.Other,version:"0",osName:Da.Other,osVersion:r};for(let[n,o]of bdj){if(a.version!=="0")break;for(let i of e)if(n===i.brand){a.name=o,a.version=i.version;break}}if(a.name===Xr.Opera){let n=y9(A,/OPR\/([\d.]+)/);if(n==="")return;a.version=n}if(a.version!=="0")return a.osName=ydj.get(t)??Da.Other,a.osName===Da.Windows&&(a.osVersion=aBA(a.osVersion)),a},aBA=A=>{let j=A.split(".");if(!j[0])return A;let e=Number.parseInt(j[0],10);if(Number.isNaN(e)||e<0)return A;if(e>0&&e<13)return"10.0";if(e>=13)return"11.0";if(!j[1])return A;switch(Number.parseInt(j[1],10)){case 1:return"7.0";case 2:return"8.0";case 3:return"8.1";default:return A}},nBA=A=>{A=A.toLowerCase();let j=X6($dj,o=>Br(A,o.term)),e=j?j.name:Xr.Other;e===Xr.Chrome&&"brave"in navigator&&(e=Xr.Brave);let t=j?y9(A,j.versionRegex):"",r=X6(wdj,o=>Br(A,o.term)),a=r?r.name:Da.Other,n=r?y9(A,r.versionRegex):"";return a===Da.macOS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(a=Da.iOS,n=""),{name:e,version:t,osName:a,osVersion:n}},y9=(A,j)=>{if(!j)return"";let t=j.exec(A)?.[1];return t!==void 0?t.replace(/_/g,"."):""},$dj=[{term:"msie",name:Xr.IE,versionRegex:/msie ([\d.]+)/},{term:"trident",name:Xr.IE,versionRegex:/rv:([\d.]+)/},{term:"edge",name:Xr.Edge,versionRegex:/edge\/([\d.]+)/},{term:"edg",name:Xr.Edge,versionRegex:/edg\/([\d.]+)/},{term:"opr",name:Xr.Opera,versionRegex:/opr\/([\d.]+)/},{term:"opera mobi",name:Xr.Opera,versionRegex:/version\/([\d.]+)/},{term:"opios",name:Xr.Opera,versionRegex:/opios\/([\d.]+)/},{term:"firefox",name:Xr.Firefox,versionRegex:/firefox\/([\d.]+)/},{term:"fxios",name:Xr.Firefox,versionRegex:/fxios\/([\d.]+)/},{term:"chrome",name:Xr.Chrome,versionRegex:/chrome\/([\d.]+)/},{term:"crios",name:Xr.Chrome,versionRegex:/crios\/([\d.]+)/},{term:"android",name:Xr.AndroidBrowser},{term:"safari",name:Xr.Safari,versionRegex:/version\/([\d.]+)/},{term:"applewebkit",name:Xr.WebKit,versionRegex:/applewebkit\/([\d.]+)/}],wdj=[{term:"iphone",name:Da.iOS,versionRegex:/os ([\d._]+)/},{term:"ipad",name:Da.iOS,versionRegex:/os ([\d._]+)/},{term:"ipod",name:Da.iOS,versionRegex:/os ([\d._]+)/},{term:"mac os x",name:Da.macOS,versionRegex:/os x ([\d._]+)/},{term:"android;",name:Da.Android,versionRegex:/android; ([\d.]+)/},{term:"android",name:Da.Android,versionRegex:/android ([\d.]+)/},{term:"linux",name:Da.Linux},{term:"cros",name:Da.ChromeOS},{term:"windows",name:Da.Windows,versionRegex:/windows nt ([\d.]+)/}];var MO=W(SO());var sFe=[{name:Xr.Brave,minVersion:"109.0.0",displayVersion:"1.47.0"},{name:Xr.Chrome,minVersion:"109.0.0",displayVersion:"109"},{name:Xr.Edge,minVersion:"109.0.0",displayVersion:"109"},{name:Xr.Firefox,minVersion:"109.0.0",displayVersion:"109"},{name:Xr.Opera,minVersion:"95.0.0",displayVersion:"95"},{name:Xr.Safari,minVersion:"16.0.0",displayVersion:"16"}];async function bp(){return _E(navigator.userAgent)}function VgA(A){if(A!==void 0)return F7j()?A.replace("MacCtrl","Ctrl"):A}function F7j(){return navigator.platform?.indexOf("Mac")>-1||navigator?.userAgentData?.platform==="macOS"}var ri=()=>!0,It=()=>!1,f6=()=>!1,ut=()=>!1,Oe=()=>f6()||ut();function _O(){try{return WebAssembly&&typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"}catch{return!1}}async function LO(){try{let{version:A}=await bp(),j=parseInt(A,10);if(Oe()&&!Number.isNaN(j)&&j<16)return!1}catch{console.error("Failed to check for Safari 15 in the context of passkeys")}return ut(),!0}async function NO(){if(!(chrome.action?.getUserSettings!==void 0||browser.browserAction?.getUserSettings!==void 0))return!1;let j;return chrome.action?.getUserSettings!==void 0?j=await chrome.action.getUserSettings():j=await browser.browserAction.getUserSettings(),j.isOnToolbar??!1}function zO(){return{passwordType:"smart",length:4}}function RO(){return{passwordType:"characters",length:20,requireDigits:!0,requireSymbols:!0}}function WgA(){return{passwordType:"words",length:4,separatorType:"hyphens",capitalize:!1,fullWords:!0}}function JO(){return{passwordType:"pin",length:4}}function UO(){return{passwordType:"words",fullWords:!1,length:5,separatorType:"hyphens",capitalize:!1}}function XO(){return{passwordType:"ed25519",length:0}}function VO(){return{passwordType:"rsa",length:4096}}var $7j=["de","en","es","fr","it","ja","nl","ko","pt","ru","zh-CN","zh-TW"];var w7j=()=>"production";var I7j=20160,D7j=10,YgA=60,ks=-1,WO=1,X9=I7j,V9="",W9="config",Hd={autoLockEnabled:!0,autoLockMinutes:D7j,appLauncherLaunchAppsInNewTab:!1,appLauncherShowBookmarksBar:!0,appLauncherUseBackgroundImage:!0,autoLockOnDeviceSleep:!0,securityPreset:n1.SecuritySettingsStrict,autoSaveExceptions:[],ignoreAccounts:[],inlineEnabled:!0,inlineSaveEnabled:!0,socialLoginsEnabled:!Oe(),inlineShowAutomatically:!0,saveNewItemsIn:V9,showNotifications:!0,generator:[zO(),RO(),WgA(),JO(),UO(),XO(),VO()],defaultPassGenType:"smart",syllables:!1,newHibpEnabled:!1,language:O7j(),languageChanged:!1,defaultPasswordManager:!1,showTags:!0,defaultItemList:"suggestions",watchtowerNotifications:!1,showChangelogPopupOnInteraction:!1,useSharedLockState:!0,slsChannel:w7j(),showRichIcons:!It(),firefoxDataCollection:!1,appTheme:"system",appWidth:"double-pane",authenticatePasskeys:!ut(),shouldCachePasskeyIds:!0,devtoolsEnabled:!1,autoSaveEnabled:!0,autoSaveCreditCardsEnabled:!0,autoSaveIdentitiesEnabled:!0,autoSaveTotpEnabled:!0,autoSubmitLogins:!0,accountsEnabledForBiometry:[],showLockedStateNotifications:!0,requireFillSensitivePrompt:!1,requireFillCreditCardPrompt:!0,requireFillLoginPrompt:!1};function O7j(){return typeof navigator>"u"?"en":p1(navigator.languages,$7j,{defaultLocale:"en",strategy:"lookup"})[0]}var Y9={};Yt(Y9,{L:()=>E,LoggableString:()=>oj,LoggableStringC:()=>ZgA,assertLogSafe:()=>Z,assertLogSafeNum:()=>yp,joinLogsafe:()=>H0});var Vx=W(aA()),QgA,P7j=Symbol(),oj=class{constructor(j){this[QgA]=0,this.toString=()=>this.str,this.toJSON=()=>this.str,this.loggableString=()=>this,this.replace=(e,t)=>Z(this.str.replace(e,t.str)),this.concat=e=>Z(this.str+e.str),this.str=j}};QgA=P7j;oj.assertLogSafe=A=>new oj(A);var H0=(A,j)=>Z(A.map(e=>e.str).join(j?.str)),Z=oj.assertLogSafe,E=(A,...j)=>H0(A.flatMap((e,t)=>{let r=j[t];return r!==void 0?[Z(e),r]:[Z(e)]}),Z("")),yp=A=>Z(A.toString(10)),ZgA=new Vx.Type("LoggableString",A=>A instanceof oj,(A,j)=>A instanceof oj?Vx.success(A):Vx.failure(A,j,"cannot decode unknown value to LoggableString"),A=>A.str);function ue(A){throw new Error("Unexpected value, should have never reached this point.")}function Ws(A,j,e){if(e){console.error(`${e.str}: Unexpected value of variable: "${j.str}"`);return}console.error(`Unexpected value of variable: "${j.str}"`)}var j4A=W(Io()),z_j=W(so());var LA={};Yt(LA,{AccountAttrs:()=>Dt,BeginDomainVerificationResponse:()=>HH,BoundCellType:()=>vm,CCHeader:()=>M6,CanOnlyPerformOidcAuth:()=>PMj,CanOnlyPerformPasswordAuth:()=>CMj,CanPerformOidcAuth:()=>gI,CanPerformPasswordAuth:()=>qK,CellAttr:()=>WB,CodeResponse:()=>FC,Context:()=>nq,ContextInitialization:()=>N4j,DEFAULT_PAGE_LIMIT:()=>IOA,DateFilterDirection:()=>Oh,DefaultByCreationParams:()=>B$,DsecretProxyResponse:()=>qC,DsecretResponse:()=>hC,DuoResponse:()=>xC,EMAIL_KEY_HANDLE:()=>oR,EMAIL_VERIFICATION_LENGTH:()=>d_j,EmailVerificationError:()=>LG,FeatureFlagManager:()=>RjA,FirewallRule:()=>CC,FirewallRuleAction:()=>Mh,FirewallRuleAnonymousType:()=>_h,FirewallRuleScopeType:()=>Su,FirewallRuleType:()=>Sh,FirewallRules:()=>HC,GetAccountReportCsvResponse:()=>uH,GetVerifiedDomainsResponse:()=>SH,GroupSortAttrs:()=>yeA,HIBPDataClass:()=>XAA,HeaderType:()=>mI,HibpUser:()=>CH,INITIAL_EXTRA_DATA_STATE:()=>eMj,INITIAL_PAGINATION_STATE:()=>jMj,ImportFormat:()=>xl,ItemKind:()=>od,ItemShareAvailableTo:()=>Lu,ItemShareLinkExpiration:()=>xm,ItemShareRejectedRecipientsError:()=>gK,LoginHeader:()=>nd,MAX_CODE_ATTEMPTS_ALLOWED:()=>N2j,MEMBERSHIPS_BATCH_SIZE:()=>Kw,MfaResponse:()=>bC,MfaType:()=>di,MigratingUserEmails:()=>JOA,MigratingUserState:()=>jw,ModernAppVersion:()=>wC,MustEnableResponse:()=>GC,PendingVerifiedDomain:()=>KH,RecoveryAttemptPostCompletion:()=>bK,RecoveryCodeAttemptIdentityVerified:()=>GI,RecoveryCodeAuthenticationError:()=>yq,RecoveryCodeEmailResendError:()=>FI,RecoveryCodeEmailVerification:()=>FK,RecoveryCodeEmailVerificationError:()=>rF,RecoveryCodeSelectVerification:()=>GK,SecureNoteHeader:()=>VB,SignupSource:()=>bu,SortDir:()=>beA,TOKEN_PREFIX:()=>xDA,TOKEN_VERSION:()=>fDA,TOTP_KEY_HANDLE:()=>nR,TotpResponse:()=>vC,TrustLog:()=>mm,USER_MIGRATION_BATCH_SIZE:()=>GDA,UserSignupType:()=>eF,UsoTelemetryActions:()=>Qi,VaultsReportAttributes:()=>V$,VaultsReportTypes:()=>X$,VerifiedDomain:()=>TH,VerifiedDomainType:()=>Z$,WebAuthnResponse:()=>fC,_checkPwnedPasswords:()=>CDA,acceptBanner:()=>rPj,acceptLinkRequest:()=>w1j,acceptProvisionWithSSOIdentity:()=>yMj,acknowledgeNotification:()=>ySj,activateStripeBilling:()=>CPj,addAccessorToVaults:()=>sCj,addAccessorsToVault:()=>MjA,addAclsToObjectData:()=>d8j,addAdminToProvisioningGroup:()=>lMj,addCard:()=>qPj,addCredentialBundle:()=>_Mj,addMigratingUsers:()=>K2j,addObjectDataToGroup:()=>c8j,addOrUpdateAddress:()=>PPj,addRecoveryKeysetToGroup:()=>JG,assignGroupsToApplication:()=>x_j,attachAsChildAccount:()=>rCj,batchGetWatchtowerReports:()=>XDA,beginAccountRegistration:()=>POA,beginChangeEmail:()=>V4j,beginDomainVerification:()=>x2j,beginPasskeyAccountRegistration:()=>COA,beginProvisionedUserSignup:()=>wMj,beginUserRecovery:()=>mDj,beginUserSignup:()=>$Mj,bootstrapObjectDataAccess:()=>TAA,brex:()=>XPj,browserSupportsWebAuthn:()=>q0j,calculatePercentageCompleted:()=>h1j,canAccessXamPql:()=>w_j,canOnlyPerformWebauthnAuth:()=>HMj,canPerformTrustedDeviceBasedAuth:()=>KOA,canPerformWebauthnAuth:()=>hI,cancelChangeEmail:()=>Y4j,cancelDeviceEnrollment:()=>c2j,cancelMspAccountLinkRequest:()=>FOj,cancelStripeSubscription:()=>wPj,cancelUserRecovery:()=>XT,changeAccountTier:()=>pCj,changeDefaultCard:()=>OjA,changeDefaultPaymentMethod:()=>y8A,changeDomain:()=>cOj,changeMasterPassword:()=>X4j,changeServiceAccountAvatar:()=>i4j,changeServiceAccountName:()=>o4j,changeTemplatesState:()=>rHj,changeUserAvatar:()=>gDj,changeUserName:()=>hDj,changed:()=>to,checkChildAccountCode:()=>eCj,checkDomainAvailability:()=>iOj,checkGiftCard:()=>QCj,checkProvisioningEmailVerification:()=>DDj,checkPwnedPasswords:()=>zAA,clearAllCaches:()=>pjA,clearAllCachesForContext:()=>mjA,clearContextCache:()=>KZ,clearPartialUserCache:()=>njA,clearPartialUserCacheForContext:()=>ojA,clearServiceAccountCache:()=>kjA,clearServiceAccountCacheForContext:()=>ujA,clearUserCache:()=>fAA,clearUserCacheForContext:()=>GAA,clearVaultCache:()=>hAA,clearVaultCacheForContext:()=>qAA,clearVaultWithPreviewsCache:()=>vAA,clearVaultWithPreviewsCacheForContext:()=>xAA,completeAccountRegistration:()=>HOA,completeActivationHubTask:()=>MOj,completeChangeEmailForPasswordUser:()=>Q4j,completeChangeEmailForSsoUser:()=>Z4j,completeDomainVerification:()=>f2j,completeMFASignInWithDSecret:()=>T4j,completeMFASignInWithDSecretProxy:()=>C4j,completeMFASignInWithDuo:()=>K4j,completeMFASignInWithEnable:()=>S4j,completeMFASignInWithTOTP:()=>P4j,completeMFASignInWithWebAuthn:()=>H4j,completePasskeyAccountRegistration:()=>TOA,completeProvisionedUserSignup:()=>wDj,completeReplyToConfirmation:()=>S5j,completeUserProvision:()=>CDj,completeUserRecovery:()=>EDj,completeUserSignup:()=>IMj,confirmUsers:()=>nDj,convertAccountV3:()=>uCj,convertToBusiness:()=>kCj,convertToFamily:()=>dCj,convertToIndividual:()=>cCj,createAccountGatedFeatureTrial:()=>F_j,createAccountMspLinkRequest:()=>GOj,createAccountMspLinkRequestPreflight:()=>IOj,createAccountTemplateConfig:()=>OOj,createAccountTransferVaultPreflight:()=>BAA,createAdminWatchtowerKeyset:()=>c8A,createAppleSubscription:()=>OPj,createChildAccountRelationship:()=>ACj,createConnectToken:()=>QOj,createDataStreamingToken:()=>ZOj,createDetailedVaultReportingKeysetV2:()=>Q2j,createEamGroup:()=>yOj,createGeneratedPasswordsVault:()=>Mw,createGroup:()=>CAA,createGroupMembership:()=>zB,createHealthMonitoringCheck:()=>OOA,createItemShare:()=>J5j,createManagedAccount:()=>v1j,createManagedCredentials:()=>uSj,createManagedVault:()=>RIj,createMonitoringCheck:()=>GSj,createNewContext:()=>v8A,createObjectData:()=>KAA,createObjectDataAccess:()=>Uw,createPersonalVault:()=>mq,createPlayStoreSubscription:()=>DPj,createPolicyTemplate:()=>K_j,createProvisionManager:()=>oMj,createProvisionManagersGroup:()=>nMj,createProvisionUser:()=>$AA,createProvisioningProgressStep:()=>C2j,createProvisioningServiceAccount:()=>DOA,createRecoveryCodeAndPolicy:()=>o_j,createServiceAccountPreflight:()=>ijA,createServiceAccountV3:()=>ljA,createSetupIntent:()=>wSj,createSharedVault:()=>eK,createSignedSupportRequest:()=>pMj,createSsoApplication:()=>B_j,createSsoSettings:()=>RMj,createSystemVault:()=>uq,createUserManagedServiceAccountObjectData:()=>o8j,createVault:()=>UIj,createVaultForAccountTransfer:()=>gAA,createVaultItems:()=>nOA,createWatchtowerPubkey:()=>YAA,createWebauthnCredentials:()=>ROA,credentialBundleFromAuthResponse:()=>zMj,csvToVaultItems:()=>heA,declineLinkRequest:()=>I1j,declineMspAccountLinkRequest:()=>bOj,decryptItemShare:()=>V5j,decryptKeysets:()=>sk,decryptObjectData:()=>HAA,delegateSession:()=>U4j,deleteAccessorFromVault:()=>H8A,deleteAccount:()=>dOj,deleteAccountCookie:()=>u4j,deleteCard:()=>xPj,deleteCompanyLogo:()=>HOj,deleteDevice:()=>APj,deleteGroup:()=>QDj,deleteInactiveDevices:()=>jPj,deleteInviteVault:()=>$5j,deleteItemShare:()=>eSj,deleteObjectData:()=>$DA,deleteObjectDataAccess:()=>l8j,deletePendingPaymentMethod:()=>fPj,deleteRecoveryKey:()=>i_j,deleteSsoApplication:()=>g_j,deleteUserCookie:()=>p4j,deleteUsers:()=>yAA,deleteVault:()=>YIj,deleteVaultItemHistory:()=>R1j,deleteVaultPreflight:()=>WIj,deleteVerifiedDomain:()=>b2j,deleteWebauthnCredentialForUser:()=>O2j,derivePartsFromShareSecret:()=>W5j,detachChildAccount:()=>tCj,detailsToUser:()=>h8A,disableMFA:()=>u0j,disableServiceAccountAccess:()=>eDj,disableTravelSafe:()=>ADj,dismissBanner:()=>aPj,enableMFA:()=>k0j,enableServiceAccountAccess:()=>jDj,enableTravelSafe:()=>ZIj,encryptVaultForAPI:()=>_w,endTrialPeriod:()=>IPj,fetchAccountHandoffCertificate:()=>G_j,fetchAppCatalogApplications:()=>p_j,fetchCommonTemplates:()=>sI,fetchIdentityAccessToken:()=>m_j,fetchUserApplications:()=>E_j,fetchVerificationActionSummary:()=>C_j,finalizeMspAccountLinkRequest:()=>wOj,finalizeMspAccountLinkRequestPreflight:()=>$Oj,findCachedUser:()=>Lw,findDecryptedKeyset:()=>u6,findLongestRowLength:()=>dK,findProvisionedUserState:()=>ODj,findSsoSettings:()=>XMj,finishConfirmation:()=>$Dj,finishConfirmationSsoUser:()=>NDj,generateCredentialsFileAndBearerToken:()=>oCj,generateDSecretHmac:()=>RH,generateDemoVaultItems:()=>fCj,generateEmailTemplatePreview:()=>_Cj,generateEmployeeVault:()=>RT,generateNewKeysetForGroup:()=>hk,generateReplyToConfirmation:()=>K5j,generateSessionFile:()=>dMj,generateSessionFileWithServiceAccount:()=>kMj,generateShareSecret:()=>xOA,generateWatchtowerReportForItem:()=>RDA,generateWatchtowerReportForItems:()=>WAA,getAccountFeatures:()=>tI,getAccountMspLinkRequest:()=>fOj,getAccountOverview:()=>bw,getAccountReport:()=>USj,getAccountReportCSV:()=>WSj,getAccountShareSettings:()=>rSj,getAccountSsoApplications:()=>q_j,getAccountTemplateConfig:()=>DOj,getAccountTransfersDetails:()=>H2j,getAccountUserCounts:()=>xOj,getAccountWithAttrs:()=>ao,getActivationHubTasks:()=>SOj,getActiveKeysetForGroup:()=>Vu,getActivityFeed:()=>zOj,getAdministratorsGroup:()=>QT,getAllCreditCardItems:()=>U1j,getAllIntegrations:()=>f5j,getAllObjectDataRecordsWithDataSpec1:()=>k8j,getAllPoliciesForCurrentAccount:()=>z8j,getAllTemplates:()=>Vi,getAllowAccountCreationPolicy:()=>g8j,getAllowMapsPolicy:()=>w8j,getAppLauncherAllowedPolicy:()=>C8j,getAppLauncherAllowedPolicyLocked:()=>T8j,getApplicationDetails:()=>v_j,getAutoDeleteSuspendedUsersPolicies:()=>F8j,getAutoLockPolicy:()=>p8j,getAutoLockPolicyDefaultDefinition:()=>MAA,getAutomatedQuest:()=>r_j,getAvailableTiers:()=>PjA,getAvailableTiersV3:()=>FPj,getB5xSupportsSharingSrpx:()=>v4j,getBanners:()=>tPj,getBillingStats:()=>HPj,getBrexClientInfo:()=>WPj,getCard:()=>GPj,getCentralAccountHubToken:()=>O_j,getChildAccountRelationship:()=>jCj,getCliIntegrationPolicy:()=>M8j,getCombinedObjectAccessors:()=>n8j,getContextCache:()=>yw,getCreateVaultPreflight:()=>zT,getCustomIconForItem:()=>S1j,getDashboardReport:()=>MSj,getDateForVaultsFilter:()=>E$,getDefaultIdentityTemplate:()=>jHj,getDefaultPolicyDefinition:()=>N8j,getDefaultTemplate:()=>eHj,getDefaultTiers:()=>yPj,getDefaultVaultPermissions:()=>W2j,getDeletedItemsForVault:()=>L1j,getDeveloperReport:()=>FCj,getDeveloperServiceAccountsReport:()=>ICj,getDeveloperServiceAccountsReportCsv:()=>DCj,getDeveloperSharedVaultsReport:()=>$Cj,getDeveloperSharedVaultsReportCsv:()=>wCj,getDeveloperUsersReport:()=>bCj,getDeveloperUsersReportCsv:()=>yCj,getDeviceEnrollmentStatus:()=>o2j,getDeviceTrustAccessToken:()=>P_j,getDistributor:()=>CCj,getDistributorEntitlementFromCode:()=>PCj,getDocument:()=>r8A,getDocumentBlob:()=>H1j,getDomain:()=>hq,getEmailAccountConfig:()=>KOj,getEmailSubscriptions:()=>TCj,getEmailTemplateByUuid:()=>MCj,getEmailTemplates:()=>SCj,getEncryptedCredentialBundle:()=>LMj,getEncryptedManagedAccountKey:()=>AI,getEncryptedManagedAccountKeyForGroup:()=>ZAA,getEncryptedManagedAccountKeyForGroupWithKeyset:()=>D1j,getEnrollment:()=>l2j,getEntireAccount:()=>VG,getEveryoneVault:()=>Em,getExtensionAdoptionOverview:()=>rMj,getExtensionAdoptionReport:()=>tMj,getExtensionAdoptionReportCsv:()=>aMj,getExtensionAllowedPolicy:()=>D8j,getExtensionAllowedPolicyLocked:()=>P8j,getFeatures:()=>QG,getFile:()=>n8A,getFilteredActivityLogReports:()=>_Oj,getFilteredActivityLogTotalReports:()=>NOj,getFirewallRules:()=>UCj,getGeneratedPasswordsVault:()=>NT,getGiftCards:()=>WCj,getGridSlackChannels:()=>m5j,getGridSlackGroups:()=>p5j,getGridSlackTeams:()=>B5j,getGridSlackUsers:()=>E5j,getGroup:()=>Na,getGroupDeadline:()=>YMj,getGroupMembersCsv:()=>e8j,getGroupMspPermissions:()=>F1j,getGroupPubKeys:()=>EAA,getGroupUsersWithPermissions:()=>jI,getGroups:()=>UDj,getHasDetailedVaultReportingKeyset:()=>Z2j,getHibpDomainReport:()=>j1j,getHibpDomainReportCSV:()=>e1j,getHibpReport:()=>VAA,getHostedProvisioningIntegration:()=>IAA,getHostedProvisioningIntegrationState:()=>zDj,getHostedProvisioningManagedGroupUUIDs:()=>FDA,getHostedProvisioningServiceAccount:()=>WT,getIcons:()=>e5j,getIncomingPackages:()=>AOj,getInitializationExport:()=>q8A,getInitializationExportFromNewContext:()=>J4j,getInsightsTeamReport:()=>r5j,getInsightsTeamReportCsv:()=>a5j,getInsightsTeamReportOverview:()=>t5j,getIntegrations:()=>cjA,getInviteVaults:()=>b5j,getInvoiceDetails:()=>lPj,getInvoicePDF:()=>cPj,getInvoices:()=>sPj,getIsValidPurchaseOrderToken:()=>BPj,getIsValidStripePurchaseOrderToken:()=>gPj,getItemPasswordPolicy:()=>y8j,getItemShareSettings:()=>L5j,getLastViewedReports:()=>AMj,getLaunchSessionData:()=>f1j,getLinkRequests:()=>$1j,getMFA:()=>m0j,getMFAConfig:()=>E0j,getManagableGroups:()=>PAA,getManagedAccountAccessDetails:()=>iSj,getManagedAccountBaseUri:()=>QDA,getManagedAccountDetails:()=>oSj,getManagedAccountUri:()=>G1j,getManagedAccounts:()=>aSj,getManagedAccountsNetSeats:()=>dSj,getManagedCredentialPolicies:()=>BSj,getManagedCredentials:()=>kSj,getModernAppVersions:()=>aCj,getMonitoringStatus:()=>FSj,getMoreIncomingPackages:()=>jOj,getMspDistributorLinkPreview:()=>kPj,getMspLastInvoiceData:()=>uPj,getMspLinkRequest:()=>y1j,getMspNfrSeats:()=>dPj,getMspProjectedInvoiceData:()=>pPj,getMukSrpXCredentials:()=>IjA,getNotifiableTaxJurisdiction:()=>SPj,getNotifications:()=>bSj,getObjectData:()=>XG,getObjectDataAccessPreflight:()=>DDA,getObjectDataAccessorsForObjectType:()=>IDA,getOidcAuthMethod:()=>SOA,getOidcProviderName:()=>MMj,getOidcWellKnownConfig:()=>QMj,getOldDevicesReport:()=>VSj,getOpxSupportsDelegatedSessionSignInEvent:()=>f4j,getOpxSupportsSignInEvent:()=>B4j,getOpxSupportsSingleSignInEvent:()=>h4j,getOverviewReport:()=>XSj,getOwnersGroup:()=>ZT,getPackagesForVaultItem:()=>Q1j,getPartialUsers:()=>ajA,getPartialUsersCount:()=>XOj,getPartialUsersV2:()=>UOj,getPasskeySitesList:()=>UAA,getPaymentMethod:()=>DSj,getPendingDeviceEnrollments:()=>s2j,getPendingInvitation:()=>HSj,getPendingInvitations:()=>F5j,getPerson:()=>Qu,getPersonalVault:()=>Bm,getPersonalVaultOnlyIfCached:()=>zIj,getPolicyList:()=>R8j,getPolicyTemplateChildAccounts:()=>__j,getPolicyTemplatePolicies:()=>T_j,getPolicyTemplates:()=>H_j,getPreAuthFeatures:()=>EjA,getPreAuthFeaturesFromService:()=>BjA,getPreRegistrationFeature:()=>nK,getPreRegistrationFeatures:()=>aK,getPreviousVersionOfItem:()=>J1j,getProvisionDetailsV2:()=>bDj,getProvisionManager:()=>sMj,getProvisionManagersGroup:()=>zw,getProvisionManagersV2:()=>iMj,getReceivingVault:()=>s8A,getRecoveryAttempts:()=>c_j,getRecoveryDetails:()=>qDj,getRecoveryGroup:()=>ro,getRecoveryKeyDetails:()=>XOA,getRecoveryKeyset:()=>RG,getRecoveryPolicy:()=>UOA,getRecoveryPolicyAndKeyDetails:()=>l_j,getRecoveryPolicyUuids:()=>s_j,getRegisterURL:()=>EMj,getReleaseChannelsPolicy:()=>E8j,getReleaseChannelsPolicyDefaultDefinition:()=>_AA,getRemainingAmount:()=>KPj,getReportingPolicy:()=>ODA,getReportingPolicyWrapper:()=>LAA,getResendDetails:()=>KDj,getRestrictFailedLoginAttemptsPolicy:()=>x8j,getSecurityGroup:()=>WDj,getServiceAccount:()=>r4j,getServiceAccountGroupMemberships:()=>djA,getServiceAccountTypeSlug:()=>n5j,getServiceAccountVaultAccesses:()=>e4j,getServiceAccounts:()=>j4j,getShareAuditDetails:()=>Y5j,getShareHistoryForItem:()=>M5j,getShareSeviceAuthToken:()=>jSj,getSidebarNavPolicies:()=>q8j,getSignInMethods:()=>OMj,getSignupDetails:()=>qMj,getSlackApp:()=>feA,getSlackChannels:()=>u5j,getSlackGroups:()=>g5j,getSlackUsers:()=>q5j,getSpecialVault:()=>Sw,getSshBookmarksPolicy:()=>K8j,getSsoMigrationExpiredReport:()=>r2j,getSsoMigrationPendingReport:()=>t2j,getSsoMigrationReportGroups:()=>j2j,getSsoMigrationReportOverview:()=>A2j,getSsoMigrationSuccessfulReport:()=>a2j,getSsoSettings:()=>UMj,getSubscription:()=>Is,getSupportAccountsList:()=>m2j,getSystemVault:()=>Ek,getTaxAdvice:()=>CjA,getTeamMembersGroup:()=>gk,getTemplates:()=>z8A,getTrustpilotReviewData:()=>q2j,getTwoFactorSitesList:()=>JAA,getUpdateGroupManagedCompanyPermissionsRequest:()=>P1j,getUpdateSingleMspLimitedAccessPermissionRequest:()=>O1j,getUpgradeTiers:()=>bPj,getUsageReportsWithCursors:()=>NSj,getUsageReportsWithFilters:()=>LSj,getUserCombinedObjectDataAccess:()=>Eq,getUserCombinedObjectDataAccesses:()=>a8j,getUserCombinedObjectDataAccessesForObjectTypes:()=>yDA,getUserCookies:()=>k4j,getUserMspPermissions:()=>YDA,getUserPubKeys:()=>ac,getUserReport:()=>_Sj,getUserUsageReportOverview:()=>zSj,getValidPromotionFromCode:()=>EPj,getVault:()=>Yu,getVaultItemHistory:()=>z1j,getVaultItemWithUuid:()=>j8A,getVaultItems:()=>td,getVaultItemsOverviews:()=>e8A,getVaultManagers:()=>v2j,getVaultReport:()=>RSj,getVaultReportingSync:()=>A_j,getVaults:()=>RB,getVaultsByCreation:()=>_Ij,getVaultsForAccountTransfer:()=>NIj,getVaultsReport:()=>JSj,getVaultsV2:()=>MIj,getVerifiedDomains:()=>G2j,getWatchtowerData:()=>RAA,getWatchtowerPubkey:()=>E1j,getWatchtowerReportCounts:()=>UDA,getWatchtowerReports:()=>B1j,getWatchtowerStats:()=>g1j,getWebAuthnAssertion:()=>h0j,getWebauthnAuthMethod:()=>SMj,getWebauthnCredentialsForUser:()=>D2j,grantGroupAccessToWatchtowerKeyset:()=>EOj,handleDelegatedSessionRequest:()=>M4j,handleDelegatedSessionSignInSuccess:()=>$jA,handleLegacySignInSuccess:()=>g8A,handleObjectDataMigration:()=>u8j,handleSignInSuccess:()=>gm,handleTrustedDeviceUpgradeRequest:()=>u_j,hasAutoDeleteSuspendedUsersUnleashFlag:()=>G8j,hostedProvisioningIntegrationExists:()=>RDj,importPasskeySitesList:()=>Q8j,importTwoFactorSitesList:()=>Y8j,importVaultItems:()=>oOA,importWatchtowerData:()=>W8j,importer:()=>xeA,initialize:()=>z4j,invalidateCache:()=>cr,inviteUsersViaEmail:()=>w5j,inviteViaSlack:()=>I5j,isEncryptedOd:()=>SAA,isItemShareRejectedRecipientsError:()=>R5j,isOwnerOrEamGroupFromContext:()=>y_j,isOwnerOrSecurityOrEamGroupFromContext:()=>$_j,isSignedInAccountLoaded:()=>xIj,kickoffDeviceEnrollment:()=>n2j,legacySignUpAccount:()=>gMj,linkAccountToPartner:()=>TPj,linkDistributorByEntitlementCode:()=>HCj,loadAllWatchtowerDataLists:()=>Qw,loadCommonPasswordsList:()=>X8j,loadHibpReport:()=>t1j,loadPasskeySitesList:()=>MDA,loadPassphraseWordList:()=>J8j,loadTwoFactorSitesList:()=>KDA,loadUniverse:()=>l8A,loadWatchtowerData:()=>HDA,lockedOutDeleteAccount:()=>uOj,lookUpInvitation:()=>O5j,lookUpTeamInvitation:()=>P5j,makeWebAuthnCredential:()=>g0j,markAwayForTravel:()=>uDj,markBackFromTravel:()=>pDj,markGroupReadyForPurging:()=>ZDj,markPackageAsRead:()=>eOj,markSignatureInvalid:()=>k2j,mergeInPubKeys:()=>MG,migrateUsersToHostedProvisioning:()=>JDj,migrateVaults:()=>gSj,oAuthRefreshToken:()=>YPj,parse:()=>oc,parseMigratingUsersCsv:()=>S2j,patchSsoApplication:()=>h_j,patchVaultItems:()=>gl,performOperationWithTrustLogUpdate:()=>Xu,performSignInAccountChecks:()=>tjA,personalVaultName:()=>YT,postBrexRefreshToken:()=>P8A,postBrexVerifier:()=>VPj,postFastmailRefreshToken:()=>zCj,postFastmailVerifier:()=>NCj,postFirewallRules:()=>JCj,postHibpDomainReportNotify:()=>A1j,postImage:()=>rjA,postSlackAccessToken:()=>x5j,postSlackNonce:()=>v5j,postTemplate:()=>tHj,postUniqueUserCountForGroups:()=>t8j,postUpdatedCredentials:()=>f8A,prepProvisionUser:()=>Nw,prepServiceAccount:()=>sjA,prepareSSOUserForRegistration:()=>IeA,privacycom:()=>SSj,processIncomingPackages:()=>ejA,promptConfirmChangeEmail:()=>W4j,publishCompanyLogo:()=>TOj,purgeDeletedVaultItemForVault:()=>N1j,putGroupApplicationAssignment:()=>r8j,putVaultReportingSnapshotsV2:()=>_eA,reEncryptRequiredData:()=>wDA,reactivateUsers:()=>BDj,receiveMsgA:()=>R2j,receiveMsgB:()=>TeA,receiveSharedCredentials:()=>V2j,receiveTagA:()=>U2j,receiveTagB:()=>SeA,recoverUserWithSSOIdentity:()=>bMj,recoveryVerifyEmailAuth:()=>fDj,recoveryVerifyEmailResend:()=>xDj,recoveryVerifyEmailStart:()=>vDj,recreateProvisionManager:()=>uMj,redeemGiftCard:()=>YCj,refreshKeysets:()=>ET,refreshKeysetsIfNecessary:()=>$w,regenerateSignUpLink:()=>H5j,registerAccount:()=>fMj,registerHostedProvisioningIntegration:()=>SDj,registerPasskeyAccount:()=>GMj,registerPasskeyForUser:()=>I2j,registerServiceAccountTokenRequest:()=>eI,registerUserWithSSOIdentity:()=>FMj,registerWebauthnCredential:()=>NOA,reloadUniverse:()=>aOj,removeEmptyColumns:()=>VjA,removePackage:()=>tOj,removePackages:()=>Y1j,removeSCIMSetupAdministrator:()=>cMj,renameServiceAccountToken:()=>WOj,reportAuditEvent:()=>LOj,reportOutdatedBrowser:()=>CSj,reportUsoAction:()=>L2j,requestAccountDeletion:()=>E2j,requestBrexAccessToken:()=>QPj,requestInvoiceEmail:()=>hPj,requestSupportEmail:()=>p2j,require2FAOnNextSignIn:()=>ePj,resendAllUserProvision:()=>TDj,resendInvitations:()=>D5j,resendProvisioningEmailVerification:()=>PDj,resendUserProvision:()=>HDj,resendVerificationEmail:()=>DMj,resetContext:()=>pT,retryOnTrustLogConflict:()=>MT,revokeAllServiceAccountTokensForAccount:()=>YOj,revokeInvitations:()=>T5j,revokeServiceAccountToken:()=>VOj,revokeVaultAccess:()=>LjA,runBackgroundMigrations:()=>N_j,runBlockingMigrations:()=>L_j,saveDecryptedKeysets:()=>mT,saveNotificationSettings:()=>$Sj,scrubClientSecret:()=>qI,searchGroupsCount:()=>XDj,sendFeedback:()=>XCj,sendGroup:()=>Zu,sendItemSnapshotToServer:()=>t_j,sendMFACode:()=>p0j,sendMsgA:()=>HeA,sendMsgB:()=>J2j,sendNoSigninPastMonthEmail:()=>ZSj,sendPackage:()=>Z1j,sendPackages:()=>V1j,sendPerformanceTraces:()=>I_j,sendPreAuthPerformanceTraces:()=>D_j,sendProvisionStartedConfirmation:()=>yDj,sendProvisionedConfirmation:()=>IDj,sendSsoMigrationReminderEmail:()=>e2j,sendTagA:()=>KeA,sendTagB:()=>X2j,sendTestEmailWithOverrides:()=>LCj,sendUnredeemedFamilyAccountEmail:()=>QSj,sendUnusedPrivateVaultEmail:()=>YSj,sendVault:()=>pq,setActiveUser:()=>FAA,setB5xSupportsSharingSrpx:()=>x4j,setCachedUsers:()=>rDj,setOpxSupportsDelegatedSessionSignInEvent:()=>G4j,setOpxSupportsSignInEvent:()=>g4j,setOpxSupportsSingleSignInEvent:()=>q4j,setUserCookie:()=>hjA,setupCredentialBundle:()=>NMj,setupMsp:()=>QAA,shareCredentials:()=>MeA,shouldReportWithSnapshots:()=>fI,signIn:()=>qq,signInWithCredentialBundle:()=>GjA,signInWithEmailAndPasswordGetUniverse:()=>$4j,signInWithFederatedSession:()=>F4j,signInWithPasskeyAuth:()=>b4j,signInWithProvisioningCredentialBundleAuth:()=>y4j,signInWithRecoveryCodePasskeys:()=>w4j,signInWithRecoveryCodePwSk:()=>I4j,signOut:()=>L4j,signUpAccount:()=>hMj,signUpAndGetInfo:()=>BMj,ssoValidateEnd:()=>WMj,ssoValidateStart:()=>VMj,startOidcAuth:()=>OSj,startRecoveryWithRecoveryCode:()=>k_j,startUserProvision:()=>wAA,submitDepartureSurvey:()=>h2j,subscribeWithStripe:()=>$Pj,suspendMigratedUser:()=>_2j,suspendUserProvision:()=>FDj,suspendUsers:()=>qDA,teamInvitePerson:()=>C5j,toWatchtowerReportForApi:()=>s1j,transformRecipientsToApiFormat:()=>jF,trimItemForSharing:()=>qOA,unlinkManagedAccount:()=>nSj,unloadAllWatchtowerDataLists:()=>Zw,unloadCommonPasswordsList:()=>V8j,unloadPasskeySitesList:()=>_DA,unloadPassphraseWordList:()=>U8j,unloadTwoFactorSitesList:()=>SDA,unloadWatchtowerData:()=>TDA,unsafeCancelDeviceEnrollment:()=>d2j,unsafeGetDeviceEnrollmentStatus:()=>i2j,updateAccount:()=>sOj,updateAccountGatedFeatureTrial:()=>b_j,updateAccountShareSettings:()=>tSj,updateAccountTemplateConfig:()=>POj,updateAllowAccountCreationPolicy:()=>h8j,updateAllowMapsPolicy:()=>I8j,updateAppLauncherAllowedPolicy:()=>H8j,updateApplicationDeviceCheckStatus:()=>f_j,updateApplicationDeviceCheckStatuses:()=>VOA,updateAutoDeleteSuspendedUsersPolicies:()=>b8j,updateAutoLockPolicy:()=>m8j,updateBillingSettings:()=>lOj,updateBulkGroupVaultAccessPermissions:()=>_jA,updateCard:()=>vPj,updateCliIntegrationPolicy:()=>_8j,updateDefaultVaultPermissions:()=>Y2j,updateEmailSubscriptions:()=>KCj,updateExtensionAllowedPolicy:()=>O8j,updateGroup:()=>A8j,updateGroupMembershipRole:()=>TIj,updateGroupMemberships:()=>cq,updateGroupMspPermissions:()=>b1j,updateGroupPermissions:()=>j8j,updateHostedProvisioningEmailDomains:()=>LDj,updateHostedProvisioningNotificationEmails:()=>_Dj,updateHostedProvisioningState:()=>MDj,updateInviteVault:()=>y5j,updateItemPasswordPolicy:()=>$8j,updateLocalCredentials:()=>x8A,updateManagedAccount:()=>x1j,updateManagedCompanyMspPermissions:()=>sSj,updateManagedCredential:()=>pSj,updateMigratingUserState:()=>M2j,updatePaymentMethod:()=>ISj,updatePolicyTemplateName:()=>S_j,updatePolicyTemplatePolicies:()=>M_j,updateReleaseChannelsPolicy:()=>B8j,updateReportingPolicy:()=>L8j,updateRestrictFailedLoginAttemptsPolicy:()=>f8j,updateServerSignup:()=>vMj,updateServerSignupAccountType:()=>xMj,updateServiceAccount:()=>s4j,updateSidebarNavPolicies:()=>v8j,updateSlackApp:()=>h5j,updateSshBookmarksPolicy:()=>S8j,updateSsoSettings:()=>JMj,updateSubscription:()=>mPj,updateUser:()=>tDj,updateUserMemberships:()=>LT,updateVault:()=>UT,updateVaultAccessPermissions:()=>lCj,updateVaultClientAccess:()=>QIj,updateVerifiedDomain:()=>F2j,updateWebauthnCredentialForUser:()=>P2j,upgradeGuestToMember:()=>sDj,uploadCompanyLogo:()=>COj,uploadDocument:()=>T1j,uploadFile:()=>K1j,uploadVaultItemSnapshots:()=>e_j,uploadWatchtowerReports:()=>m1j,verifyLockedOutAccountDeletion:()=>kOj,verifyMasterPassword:()=>DjA,verifyOidc:()=>PSj,verifyPasskey:()=>w2j,verifyTotp:()=>B0j,verifyWebauthnCredentialAttestation:()=>zOA});var cA={};Yt(cA,{ACTIVITIES_BATCH_SIZE:()=>Jvj,AbortSignal:()=>TFA,AcceptedLinkRequestsResponse:()=>ubA,AccessorPreview:()=>hbA,AccessorPubKey:()=>NfA,Account:()=>kGA,AccountAttrs:()=>q$,AccountFlags:()=>eGA,AccountInfo:()=>e$A,AccountMeta:()=>nC,AccountMspLinkRequest:()=>BGA,AccountRegistrationResponse:()=>t$A,AccountSettings:()=>kC,AccountSupportInfo:()=>u$A,AccountTemplatesResponse:()=>KfA,AccountTransferDetails:()=>F$A,AccountUserCounts:()=>mGA,Action:()=>kIA,ActionSummary:()=>uIA,ActionType:()=>dT,Activity:()=>tJ,ActivityFeedType:()=>eJ,ActivityLogTotalReports:()=>IGA,ActivityWithCursor:()=>wGA,AddRecoverableMaterialRequest:()=>u$j,AddRecoverableMaterialResponse:()=>VwA,AdminIdentityVerificationResponse:()=>pIA,AffectedUserCountsResponse:()=>CfA,AllPoliciesResponse:()=>p0A,AllowAccountCreationLastUpdatedByUser:()=>LbA,AllowAccountCreationPolicyDefinition:()=>_bA,AllowAccountCreationPolicyResponse:()=>NbA,AllowMapsPolicyDefinition:()=>UbA,AllowMapsPolicyResponse:()=>XbA,AllowedWatchtowerDomainsSettings:()=>yvj,AppCatalogConfiguration:()=>aIA,AppLauncherAllowedPolicyDefinition:()=>uGj,AssignedGroup:()=>ebA,AttestationConveyancePreference:()=>$FA,Auth:()=>iJ,AuthMethod:()=>_u,AuthParams:()=>Uf,AuthStates:()=>f$,AuthenticationExtensionsClientInputs:()=>CFA,AuthenticatorAssertionResponse:()=>SFA,AuthenticatorAttachment:()=>IFA,AuthenticatorAttestationResponse:()=>KFA,AuthenticatorSelectionCriteria:()=>OFA,AuthenticatorTransport:()=>wFA,AutoDeleteSuspendedUsersPolicyRequest:()=>cGA,AutoDeleteSuspendedUsersPolicyResponse:()=>ER,AutoDeleteSuspendedUsersSettings:()=>$vj,AutoLockLastUpdatedByUser:()=>ObA,AutoLockPolicyDefinition:()=>UX,AutoLockPolicyResponse:()=>PbA,BannerClosedStatus:()=>Xf,BannerGroupTimeouts:()=>JGA,BannerInstance:()=>RGA,BannerInstances:()=>EJ,BaseCreateManagedCredential:()=>CP,BaseEncryptedData:()=>OP,BaseManagedCredential:()=>PP,BasePerson:()=>QC,BaseUpdatedManagedCredential:()=>HP,BeginDomainVerificationResponse:()=>HH,BillingInfo:()=>nGA,BillingSettings:()=>aGA,BillingSupportInfo:()=>k$A,BleAuthenticatorTransport:()=>pFA,BrexClientInfoResponse:()=>D$A,BrexRefreshToken:()=>I$A,BrexRequestAccessTokenResponse:()=>O$A,BrexVerifier:()=>w$A,CheckDomainAvailabilityResponse:()=>uGA,CheckDomainRequest:()=>wvj,CliIntegrationPolicyDefinition:()=>s0A,CliIntegrationPolicyResponse:()=>l0A,ClientRestrictionSettings:()=>sGA,CodeResponse:()=>FC,CombinedObjectAccessor:()=>qbA,CompanyRole:()=>gH,CompleteAuthResponse:()=>yC,CompleteRecoveryRequest:()=>kbj,ConfirmKeyResponse:()=>PGA,CreateManagedCredential:()=>WxA,CreateRecoveryKeyRequest:()=>o$j,CreateRecoveryPolicyRequest:()=>d$j,CreateRecoveryPolicyResponse:()=>XwA,CreateServiceAccountPreflightResponse:()=>XyA,CredentialAssertionResponse:()=>Afj,CredentialBundleAuthResponse:()=>Wf,CredentialCreationOptions:()=>KC,CredentialCreationResponse:()=>Zxj,DEFAULT_RELEASE_CHANNEL:()=>eH,DataType:()=>qn,DecryptedMyceliumSecret:()=>ixj,DefaultByCreationParams:()=>B$,DelegateSessionResponse:()=>CGA,DeleteGroupRequest:()=>xvj,DeleteUsersRequest:()=>oGj,DepartureReason:()=>IY,DepartureType:()=>wY,DeviceEnrollment:()=>s$A,DeviceEnrollmentRequest:()=>Pbj,DeviceEnrollmentResponse:()=>i$A,DeviceEnrollmentState:()=>wH,DeviceEnrollmentStateCodec:()=>IH,DeviceEnrollmentStatusResponse:()=>EY,DiscouragedUserVerificationRequirement:()=>qFA,DsecretProxyResponse:()=>qC,DsecretResponse:()=>hC,DuoResponse:()=>xC,DuoSettings:()=>iC,Durations:()=>pbj,EMAIL_KEY_HANDLE:()=>oR,EmailDomains:()=>Y0A,EnableMfaResponse:()=>QfA,EnableTrustLogRequest:()=>I$j,EncryptedCredentialBundle:()=>Am,EncryptedDeviceCredentials:()=>zxj,EntityCounts:()=>uC,Event:()=>Vvj,ExpiresIn:()=>qX,ExtendedPartialUser:()=>jJ,ExtensionAdoptionExtraData:()=>KyA,ExtensionAdoptionPaginationReport:()=>TyA,ExtensionAdoptionReport:()=>SyA,ExtensionAdoptionReportCsv:()=>MyA,ExtensionAllowedPolicyDefinition:()=>lGj,FastmailAccountId:()=>$$A,FastmailVerifier:()=>y$A,Feature:()=>T$A,FeaturesList:()=>NH,Feedback:()=>_xj,File:()=>KJ,FileReference:()=>oyA,FinalizeMspAccountLinkRequestPreflight:()=>gGA,FindSsoGroupDeadlineResponse:()=>PfA,FinishUserConfirmationResponse:()=>AyA,FirewallRule:()=>CC,FirewallRuleScope:()=>iFA,FirewallRules:()=>HC,GatedFeatureTrial:()=>dGA,GenerateEmailTemplatePreviewRequestIo:()=>Kxj,GenericAccountPolicy:()=>vB,GetAccountHandoffCertificateResponse:()=>sIA,GetAccountReportCsvResponse:()=>uH,GetActivationHubTasksResponse:()=>vGA,GetAppCatalogApplicationsResponse:()=>nIA,GetCombinedObjectAccessorsResponse:()=>xbA,GetEmailTemplateResponse:()=>rFA,GetEmailTemplatesResponse:()=>tFA,GetGroupMembersCsvResponse:()=>zfA,GetGroupsResponse:()=>vvj,GetIdentityAccessTokenResponse:()=>oIA,GetIntegrationsResponse:()=>UyA,GetPendingInvitationResponseIo:()=>wbA,GetPolicyListResponseIo:()=>E0A,GetServiceAccountsResponse:()=>RyA,GetSignInAttemptRequest:()=>Gbj,GetSignInAttemptsResponse:()=>YyA,GetSignInAttemptsResponseV2:()=>QyA,GetSlackChannelsResponse:()=>rY,GetSuggestedDomainResponse:()=>pGA,GetUserApplicationsResponse:()=>iIA,GetUserCredentialsResponse:()=>MFA,GetVerifiedDomainsResponse:()=>SH,GetWebAuthnChallengeResponse:()=>ZfA,GetXamAccessTokenResponse:()=>wZ,Group:()=>Rf,GroupApplicationAssignmentRequest:()=>Gvj,GroupMembership:()=>sr,HibpBreach:()=>RY,HibpDomainReport:()=>v$A,HibpDomainReportCsv:()=>x$A,HibpUser:()=>CH,HostedProvisioningAttrs:()=>z$,HostedProvisioningIntegration:()=>V0A,HostedProvisioningIntegrationResponse:()=>W0A,HostedProvisioningIntegrationState:()=>sG,HybridAliasAuthenticatorTransport:()=>EFA,HybridAuthenticatorTransport:()=>mFA,IconSet:()=>Nf,IdentityProviders:()=>fs,IncomingPackage:()=>WC,IncomingPackageOverviewV2:()=>FX,IncomingPackageV2:()=>$bA,InsightsBreachesSortAttrs:()=>zJ,InsightsPaginationQueryParams:()=>I$,InsightsReportsSortAttrs:()=>RJ,InsightsSortingQueryParams:()=>Zp,InsightsTeamReport:()=>cFA,InsightsTeamReportCsv:()=>dFA,InsightsTeamReportOverview:()=>sFA,InsightsTeamReportUser:()=>lFA,InsightsTeamUsageIssueType:()=>UJ,InsightsTeamUsageSortAttrs:()=>JJ,Integration:()=>JyA,InternalAuthenticatorTransport:()=>BFA,InviteSettings:()=>rGA,ItemDetailResponse:()=>iyA,ItemHistoryMetadata:()=>syA,ItemHistoryResponse:()=>lyA,ItemPasswordPolicyDefinition:()=>YbA,ItemPasswordPolicyResponse:()=>QbA,ItemShareAvailableTo:()=>Lu,ItemShareRecipientType:()=>Qd,ItemShareState:()=>LC,ItemUsageAction:()=>C$,ItemsResponse:()=>dW,KolideApp:()=>XFA,LastAuthDeviceForEnrollment:()=>o$A,LastAuthDeviceType:()=>$H,LastAuthDeviceTypeCodec:()=>n$A,LastViewedReport:()=>PyA,LastViewedReports:()=>CyA,LimitedVaultsResponse:()=>_fA,LinkRequestItem:()=>kbA,LinkedChildAccount:()=>e0A,LocationMeta:()=>MGA,MAX_ALLOWED_FAILED_LOGIN_ATTEMPTS:()=>iGj,MAX_EMAIL_BATCH_SIZE:()=>W$,MINIMUM_CHARACTER_COUNT:()=>WbA,MIN_ALLOWED_FAILED_LOGIN_ATTEMPTS:()=>AH,MIN_LOCKOUT_PERIOD:()=>jH,ManagedAccount:()=>Qf,ManagedAccountAccessDetailsResponse:()=>abA,ManagedAccountGroup:()=>rbA,ManagedAccountKey:()=>EB,ManagedAccountNetSeats:()=>nbA,ManagedAccountState:()=>So,ManagedAccountUser:()=>tbA,ManagedCompanyAccess:()=>sbA,ManagedCompanyMspGroupPermission:()=>XU,ManagedCompanyMspGroupPermissionsRequest:()=>Nfj,ManagedCredentialAccessor:()=>VxA,ManagedCredentialPolicy:()=>DP,ManagedCredentialSource:()=>TN,MasterPasswordPolicySettings:()=>cC,MasterPasswordPolicyType:()=>Ch,MfaCodeParams:()=>JfA,MfaConfig:()=>YfA,MfaParams:()=>VfA,MfaResponse:()=>bC,MfaTotpParams:()=>UfA,MfaType:()=>di,MfaWebAuthnParams:()=>XfA,MigrateUsersData:()=>lbj,MigrateUsersResponse:()=>jyA,MigratingUserState:()=>jw,ModernAppVersion:()=>wC,MonitoringStatus:()=>ibA,MsgA:()=>UGA,MsgB:()=>XGA,MspGroupPermissionsRequest:()=>Lfj,MspGroupPermissionsResponse:()=>cbA,MspInfo:()=>tGA,MspLinkRequestResponse:()=>dbA,MspUserPermissionsResponse:()=>lbA,MustEnableResponse:()=>GC,MyceliumChannelHelloResponse:()=>TGA,MyceliumChannelJoinResponse:()=>KGA,MyceliumChannelMsgTwoResponse:()=>_GA,MyceliumChannelMsgnResponse:()=>mJ,MyceliumChannelReplyResponse:()=>SGA,MyceliumChannelStartResponse:()=>pJ,MyceliumChannelSwitchSourceErrResponse:()=>Zvj,MyceliumDelegatedSession:()=>LGA,MyceliumLocationMeta:()=>HGA,MyceliumRefreshTokenDetails:()=>NGA,NativeOidcState:()=>Wxj,NfcAuthenticatorTransport:()=>gFA,NotificationType:()=>rX,ObjectData:()=>K$,ObjectDataAccess:()=>BB,ObjectDataAccessAcl:()=>_o,ObjectDataAccessAclCodec:()=>mbA,ObjectDataAccessAclScopeCodec:()=>EbA,ObjectDataAccessPreflightResponse:()=>GbA,ObjectDataAccessScope:()=>ui,ObjectDataAccessScopeCodec:()=>JC,ObjectDataAccessState:()=>AG,ObjectDataAccessStateCodec:()=>BbA,ObjectDataAccessorType:()=>sl,ObjectDataAccessorTypeCodec:()=>sX,ObjectDataAccessorsForObjectTypeResponse:()=>XC,ObjectDataAcl:()=>RC,ObjectDataAclCodec:()=>Vfj,ObjectDataPreflightResponse:()=>fbA,ObjectDataValue:()=>gbA,ObjectDataWithSpec1Response:()=>FbA,ObjectType:()=>Li,OidcAuth:()=>D$,OidcAuthMethod:()=>LFA,OptionalVaultReportingSyncResponse:()=>S$A,Package:()=>bbA,PackageOverviews:()=>bX,PartialUser:()=>Ao,PasswordAuth:()=>_C,PasswordAuthMethod:()=>_FA,PatchVaultItemsResponse:()=>cyA,PendingVerifiedDomain:()=>KH,PerfTrace:()=>b$j,Person:()=>gB,PolicyContextMap:()=>hV,PolicyContexts:()=>Ze,PolicyListItem:()=>m0A,PolicyNames:()=>Se,PolicyTemplate:()=>aG,PolicyTemplateChildAccountsResponse:()=>t0A,PolicyTemplatePoliciesResponse:()=>r0A,PolicyTemplatePolicy:()=>ZbA,PolicyTemplatesPagination:()=>A0A,PolicyTemplatesResponse:()=>j0A,PostRecoveryKeyUserRegistrationRequest:()=>G$j,PostRecoveryKeyUserRegistrationResponse:()=>rIA,PreferredUserVerificationRequirement:()=>vFA,PreviewGroup:()=>SfA,PreviewUser:()=>MfA,ProvisionCredentialBundle:()=>Z0A,ProvisionedGroupKeyset:()=>R0A,ProvisionedKeys:()=>J0A,ProvisionedVaultKey:()=>z0A,ProvisioningRegistrationData:()=>sbj,ProvisioningServiceIdp:()=>R$,ProvisioningSettings:()=>lC,PsaPlaintextKeyset:()=>U0A,PublicKeyCredentialCreationOptions:()=>HFA,PublicKeyCredentialDescriptor:()=>PFA,PublicKeyCredentialParameters:()=>FFA,PublicKeyCredentialRpEntity:()=>bFA,PublicKeyCredentialType:()=>TC,PublicKeyCredentialUserEntity:()=>yFA,ReadOnlyAuth:()=>zFA,RecoverableGroupKeyset:()=>tyA,RecoverableKeys:()=>sW,RecoverableKeysForPeople:()=>ayA,RecoverablePackageKey:()=>ryA,RecoverableVaultKey:()=>eyA,RecoveryAttempt:()=>QwA,RecoveryAttemptIdentityVerificationCompleteAux:()=>AIA,RecoveryAttemptsResponse:()=>ZwA,RecoveryGetAttemptStatusResponse:()=>jIA,RecoveryGetMaterialResponse:()=>tIA,RecoveryKeyResponse:()=>UwA,RecoveryKeyStartRequest:()=>j$j,RecoveryKeyState:()=>kZ,RecoveryPolicyResponse:()=>YwA,RecoveryPolicyUuidsResponse:()=>WwA,RecoverySrpARequest:()=>t$j,RecoverySrpBResponse:()=>RwA,RecoverySrpConfirmKeyRequest:()=>a$j,RecoverySrpConfirmKeyResponse:()=>JwA,RegisterDetailedVaultReportingKeyRequest:()=>s0j,RegisterDetailedVaultReportingKeyResponse:()=>K$A,RegisterProvisioningResponse:()=>X0A,ReleaseChannelsPolicyDefinition:()=>nV,ReleaseChannelsPolicyResponse:()=>RbA,ReplyToEmailSettings:()=>oGA,ReportAccount:()=>FyA,ReportAccountUser:()=>fyA,ReportCursors:()=>EyA,ReportDashboardOverview:()=>nyA,ReportItem:()=>xW,ReportItemUsage:()=>ByA,ReportOldDevice:()=>DyA,ReportOldDeviceDevice:()=>IyA,ReportOldDevices:()=>OyA,ReportOldDevicesOverview:()=>wyA,ReportOldDevicesOverviewClient:()=>$yA,ReportOverview:()=>yyA,ReportSectionAccountOverview:()=>GyA,ReportSectionExtendedAccountOverview:()=>byA,ReportSectionUserItemUsage:()=>uyA,ReportSectionUserOverview:()=>dyA,ReportSectionVaultItemUsage:()=>qyA,ReportSectionVaultOverview:()=>gyA,ReportSections:()=>U$,ReportUser:()=>pyA,ReportUserItemUsage:()=>kyA,ReportUserItemUsageOverview:()=>myA,ReportVault:()=>vyA,ReportVaultItemUsage:()=>hyA,ReportVaults:()=>xyA,ReportingPolicyDefinition:()=>d0A,ReportingPolicyResponse:()=>k0A,RequestError:()=>kT,RequesterLocation:()=>OZ,RequiredUserVerificationRequirement:()=>xFA,ResidentKeyRequirement:()=>jU,RestrictFailedLoginAttemptsPolicyDefinition:()=>KbA,RestrictFailedLoginAttemptsPolicyResponse:()=>SbA,SendMfaCodeResponse:()=>WfA,SendMsgbRequest:()=>lxj,SendTagbRequest:()=>cxj,Sender:()=>ybA,ServiceAccount:()=>NyA,ServiceAccountBillables:()=>RW,ServiceAccountToken:()=>EH,ServiceAccountType:()=>gt,ServiceAccountUser:()=>zyA,ServiceAccountVaultAccess:()=>zW,ServiceAccountsPartialUser:()=>G$,SessionKeyRestoreResponse:()=>P$A,SessionKeySaveResponse:()=>uQ,SetUpCredentialBundleRequest:()=>ofj,SetUpCredentialBundleResponse:()=>RFA,SharedCredentialBundle:()=>YGA,SidebarNavPolicy:()=>HbA,SidebarNavigationPoliciesSettings:()=>dC,SignDeviceTrustPublicKeyResponse:()=>AFA,SignInAttemptReasons:()=>nm,SignInAuxInfoTypes:()=>yB,SignInTokenDetails:()=>Mu,Signup:()=>Q$,SignupFeatureCreditCardForm:()=>ZyA,SignupFeatureUnlockWithPasskey:()=>A$A,SignupFeatures:()=>j$A,SlackApp:()=>xH,SlackAppState:()=>jk,SlackChannel:()=>FH,SlackGroup:()=>yH,SlackNonce:()=>fH,SlackSettings:()=>oC,SlackTeam:()=>bH,SlackUser:()=>GH,SlackUsers:()=>tY,SrpResponse:()=>OGA,SshBookmarksPolicyDefinition:()=>n0A,SshBookmarksPolicyResponse:()=>o0A,SsoApplication:()=>HB,SsoAuthResponse:()=>uFA,SsoAuthenticationPolicy:()=>XP,SsoFederationSettings:()=>DfA,SsoGroup:()=>az,SsoMigrationGracePeriod:()=>p$,SsoMigrationReportExpiredRecord:()=>c$A,SsoMigrationReportPendingRecord:()=>l$A,SsoMigrationReportSucccessfulRecord:()=>d$A,SsoOidcIdentity:()=>$bj,SsoOidcState:()=>Yxj,SsoOidcWellKnownSettingsRequest:()=>kvj,SsoSettings:()=>WP,SsoSignInOptions:()=>nfj,SsoState:()=>VP,SsoValidateResponse:()=>OfA,StandardMfaParams:()=>tC,StartAuthResponse:()=>DGA,StartEmailVerificationRequest:()=>h$j,StartEmailVerificationResponse:()=>eIA,StartRecoveryResponse:()=>zwA,SubmitEmailVerificationRequest:()=>v$j,SupportGetAccounts:()=>E$A,SupportInfo:()=>m$A,SupportSettings:()=>sC,TOTP_KEY_HANDLE:()=>nR,TagA:()=>VGA,TagB:()=>WGA,Task:()=>qGA,TeamMemberPoliciesSettings:()=>lGA,TimePeriod:()=>Zc,TotpResponse:()=>vC,TraceSubmissionResult:()=>bZ,TrustedDeviceUpgradeEventRequest:()=>Rxj,TrustpilotData:()=>h$A,TwoFactorSettings:()=>iGA,UnacceptedMspLinkRequest:()=>DR,UniqueUserCountForGroupsRequest:()=>fvj,UniqueUserCountResponse:()=>RfA,UpdateGroupMembershipsResponse:()=>Qz,UpdateHostedProvisioningIntegration:()=>Q0A,UpdateObjectDataRequest:()=>Wfj,UpdateSignupRequest:()=>ybj,UpdatedManagedCredential:()=>Jhj,UsbAuthenticatorTransport:()=>hFA,User:()=>h$,UserCombinedObjectDataAccess:()=>UC,UserCombinedObjectDataAccessResponse:()=>vbA,UserCookie:()=>q$A,UserExtensionInstallReport:()=>HyA,UserFilterType:()=>cG,UserFlags:()=>jGA,UserKeysets:()=>UFA,UserMeta:()=>wbj,UserPubKey:()=>DbA,UserSupportInfo:()=>p$A,UserVerificationRequirement:()=>DFA,UserWebauthnCredential:()=>SC,ValidatedMspLinkRequest:()=>EGA,VariantPayload:()=>H$A,Vault:()=>ci,VaultAccess:()=>Wd,VaultClaim:()=>mH,VaultItem:()=>am,VaultItemTemplate:()=>zf,VaultItemTemplateAttrs:()=>TfA,VaultItemTemplateIcons:()=>HfA,VaultManagers:()=>f$A,VaultsReportAttributes:()=>V$,VaultsReportTypes:()=>X$,VerificationEvent:()=>$$j,VerifiedDomain:()=>TH,VerifiedDomainType:()=>Z$,VerifyMfaResponse:()=>Jf,WatchtowerReportItem:()=>fGA,WatchtowerReportVaultData:()=>xGA,WatchtowerReports:()=>GGA,WatchtowerStats:()=>FGA,WebAuthnResponse:()=>fC,WebauthnAssertion:()=>AU,WebauthnAuth:()=>O$,WebauthnAuthMethod:()=>NFA,WebauthnCredentialDescriptor:()=>fFA,WebauthnPublicKeyRequest:()=>GFA,WellKnownUrlRequest:()=>uvj,WellKnownUrlResponse:()=>IfA,acceptLinkRequest:()=>eX,acceptProvision:()=>sH,acknowledgeNotification:()=>oX,activateAccount:()=>gR,activateRecoveryKey:()=>c$j,addCredentialBundle:()=>sU,addDevice:()=>$$,addObjectData:()=>S$,addRecoverableMaterial:()=>p$j,addRecoveryKeysetToGroup:()=>eR,addVaultAccess:()=>jC,beginChangeEmail:()=>uR,beginDomainVerification:()=>YY,beginRecovery:()=>oW,billing:()=>Ve,cancelChangeEmail:()=>pR,cancelDeviceEnrollment:()=>qY,cancelMspAccountLinkRequest:()=>PR,cancelRecovery:()=>iW,changeAccountType:()=>v$,changeAccountTypeV3:()=>wR,changeDomain:()=>yR,changeTemplatesState:()=>Ez,changeUserAvatar:()=>_$,changeUserName:()=>M$,checkDomainAvailability:()=>FR,checkProvisioningEmailVerification:()=>JV,completeActivationHubTask:()=>WR,completeAuth:()=>cJ,completeChangeEmail:()=>aC,completeDomainVerification:()=>QY,completeProvisionedUserSignup:()=>jW,completeRecovery:()=>cH,completeReplyToConfirmation:()=>qU,completeUserProvision:()=>WV,confirmKeyAuth:()=>lJ,confirmUsersWithMemberships:()=>TX,confirmUsersWithMembershipsAndVaultAccessList:()=>SX,confirmUsersWithVaultAccessList:()=>KX,continueRecovery:()=>lH,convertPwnedApiResponseToHashes:()=>g$A,createAccountGatedFeatureTrialAction:()=>GZ,createAccountMspLinkRequest:()=>HR,createAccountMspLinkRequestPreflight:()=>CR,createAccountTemplateConfig:()=>NR,createAccountTransferVaultPreflight:()=>wz,createGroup:()=>Vz,createItemShare:()=>$U,createLaunchSession:()=>NU,createManagedAccount:()=>MU,createManagedCredentials:()=>SN,createMonitoringCheck:()=>T$,createObjectData:()=>uX,createObjectDataAccess:()=>cX,createPolicyTemplate:()=>hGj,createProvisionUser:()=>CV,createProvisioningProgressStep:()=>eQ,createRecoveryKey:()=>i$j,createRecoveryPolicy:()=>k$j,createServiceAccountPreflight:()=>XW,createServiceAccountV3:()=>JW,createSsoApp:()=>EZ,createSsoSettings:()=>nz,createVault:()=>Iz,createVaultForAccountTransfer:()=>Dz,createWatchtowerPubkey:()=>AJ,declineLinkRequest:()=>tX,declineMspAccountLinkRequest:()=>TR,delegateSession:()=>y$,deleteAccessorFromVault:()=>Cz,deleteAccount:()=>xR,deleteAccountCookie:()=>NY,deleteAllDevices:()=>Oxj,deleteCompanyLogo:()=>JR,deleteDevice:()=>bJ,deleteGroup:()=>Wz,deleteInactiveDevices:()=>yJ,deleteInviteVault:()=>GU,deleteItemShare:()=>OU,deleteObjectData:()=>EX,deleteObjectDataAccess:()=>dX,deleteRecoveryKey:()=>l$j,deleteSsoApp:()=>BZ,deleteUserCookie:()=>zY,deleteUserCredential:()=>nU,deleteUsers:()=>HX,deleteVault:()=>Pz,deleteVaultItemHistory:()=>qW,deleteVaultPreflight:()=>Oz,deleteVerifiedDomain:()=>jQ,destroySessionRestorationKey:()=>n0j,disableMfa:()=>sR,disableServiceAccountAccess:()=>Lz,disableTravelSafe:()=>Mz,distributors:()=>jq,enableMfa:()=>iR,enableMfaWithAuth:()=>kJ,enableServiceAccountAccess:()=>_z,enableTravelSafe:()=>Sz,enableTrustLog:()=>HZ,endpointForFile:()=>AA,extendSession:()=>F$,externalUserActorType:()=>Xvj,finalizeMspAccountLinkRequest:()=>SR,finalizeMspAccountLinkRequestPreflight:()=>KR,findFirstDateOfDuration:()=>mbj,findOldestUsageDate:()=>Ebj,findProvisionedUserState:()=>UV,findRecoveryDetails:()=>tW,findVaults:()=>Bz,finishConfirmationSsoUser:()=>XV,finishUserConfirmation:()=>AW,generateEmailTemplatePreview:()=>HJ,generateReplyToConfirmation:()=>hU,getAccountApplications:()=>hZ,getAccountHandoffCertificate:()=>fZ,getAccountMspLinkRequest:()=>OR,getAccountOverview:()=>MR,getAccountReport:()=>wW,getAccountReportCsv:()=>OW,getAccountShareSettings:()=>CU,getAccountTemplateConfig:()=>LR,getAccountTemplates:()=>pz,getAccountTransfersDetails:()=>tQ,getAccountUserCounts:()=>IR,getAccountWithAttrs:()=>BR,getActivationHubTasks:()=>VR,getActivityFeed:()=>oJ,getActivityLogDefaultStartTime:()=>gC,getAffectedUserCounts:()=>mvj,getAllObjectDataWithDataSpec1:()=>gX,getAllPoliciesForCurrentAccount:()=>qV,getAllowAcocuntCreationPolicy:()=>jV,getAllowMapsPolicy:()=>lV,getAppCatalogApplications:()=>uZ,getAppDetails:()=>qZ,getAppLauncherAllowedPolicy:()=>pGj,getAppLauncherAllowedPolicyLocked:()=>EGj,getAuthMethods:()=>iU,getAutoDeleteSuspendedUsersPolicies:()=>tV,getAutoLockPolicy:()=>VX,getAutoLockPolicyDefaultDefinition:()=>XX,getAutomatedQuest:()=>dZ,getBannersForSession:()=>BJ,getBrexClientInfo:()=>cQ,getCentralAccountHubToken:()=>DZ,getCliIntegrationPolicy:()=>BV,getCombinedObjectAccessors:()=>mX,getCommonPasswordsList:()=>HY,getCreateVaultPreflight:()=>$z,getDashboardReport:()=>cW,getDateForVaultsFilter:()=>E$,getDefaultTemplate:()=>ZP,getDefaultVaultPermissions:()=>pQ,getDeletedVaultItems:()=>gW,getDetailedVaultReportingPubkeyV2:()=>qQ,getDeveloperReport:()=>hJ,getDeveloperServiceAccountsReport:()=>GJ,getDeveloperServiceAccountsReportCsv:()=>FJ,getDeveloperSharedVaultsReport:()=>xJ,getDeveloperSharedVaultsReportCsv:()=>fJ,getDeveloperUsersReport:()=>qJ,getDeveloperUsersReportCsv:()=>vJ,getDeviceEnrollmentStatus:()=>BY,getDeviceTrustAccessToken:()=>IZ,getEmailAccountConfig:()=>XR,getEmailNotificationSettings:()=>C$j,getEmailSubscriptions:()=>IJ,getEmailTemplateByUuid:()=>PJ,getEmailTemplates:()=>OJ,getEncryptedCredentialBundle:()=>cU,getEnrollment:()=>xY,getEveryoneVault:()=>Gz,getExtensionAdoptionOverview:()=>SW,getExtensionAdoptionReport:()=>KW,getExtensionAdoptionReportCsv:()=>MW,getExtensionAllowedPolicy:()=>cGj,getExtensionAllowedPolicyLocked:()=>kGj,getFeatures:()=>BQ,getFile:()=>DC,getFileIdsFromItemUuid:()=>MJ,getFileKey:()=>OC,getFileV2:()=>SJ,getFileWithRedirect:()=>_J,getFilteredActivityLogReports:()=>rJ,getFilteredActivityLogTotalReports:()=>aJ,getFirewallRules:()=>NJ,getGeneratedPasswordsVault:()=>Fz,getGridSlackChannels:()=>oY,getGridSlackGroups:()=>iY,getGridSlackTeams:()=>lY,getGridSlackUsers:()=>sY,getGroup:()=>Rz,getGroupDeadline:()=>lz,getGroupMembersCsv:()=>tR,getGroupMspPermissions:()=>QU,getGroupPubKeys:()=>Jz,getGroups:()=>eC,getHasDetailedVaultReportingKeyset:()=>vQ,getHibpDomainReport:()=>UY,getHibpDomainReportCsv:()=>XY,getHibpReport:()=>JY,getHostedProvisioningIntegration:()=>ZV,getIcons:()=>uz,getIdentityAccessToken:()=>pZ,getIncomingPackage:()=>fX,getIncomingPackageV2:()=>tGj,getIncomingPackages:()=>xX,getIncomingPackagesV2:()=>jGj,getInsightsTeamReport:()=>WJ,getInsightsTeamReportCsv:()=>YJ,getInsightsTeamReportOverview:()=>VJ,getIntegrations:()=>UW,getInviteVaults:()=>xU,getItemPasswordPolicy:()=>dV,getItemReportWithCursors:()=>GW,getItemReportWithFilters:()=>FW,getItemShareAuditDetails:()=>IU,getItemSharePreflight:()=>yU,getKeysets:()=>HU,getKolideAgentEnrollmentToken:()=>Hxj,getKolideApps:()=>Pfj,getLastViewedReports:()=>TW,getLinkRequests:()=>VU,getManagedAccountAccessDetails:()=>RU,getManagedAccountDetails:()=>zU,getManagedAccounts:()=>SU,getManagedAccountsNetSeats:()=>JU,getManagedCredentialPolicies:()=>CN,getManagedCredentials:()=>KN,getManagedVault:()=>xz,getMfa:()=>cR,getMfaConfig:()=>dR,getModernAppVersions:()=>gJ,getMonitoringStatus:()=>UU,getMoreIncomingPackages:()=>eGj,getMspLinkRequest:()=>jX,getNotifications:()=>nX,getNotifierUrl:()=>pbA,getObjectDataAccess:()=>kX,getObjectDataAccessForUserAndType:()=>Qfj,getObjectDataAccessPreflight:()=>eG,getObjectDataAccessorsForObjectType:()=>pX,getObjectDataPreflight:()=>VC,getOldDevicesReport:()=>DW,getOverviewReport:()=>IW,getPackagesForVaultItem:()=>GX,getPartialUsers:()=>uB,getPartialUsersCount:()=>EC,getPasskeySitesList:()=>SY,getPassphraseWordList:()=>CY,getPendingDeviceEnrollments:()=>hY,getPendingInvitation:()=>wX,getPendingInvitations:()=>uU,getPersonalVault:()=>fz,getPolicyList:()=>vV,getPolicyTemplateChildAccounts:()=>xGj,getPolicyTemplatePolicies:()=>gGj,getPolicyTemplates:()=>BGj,getPreAuthFeatures:()=>gQ,getPreAuthFeaturesFromService:()=>hQ,getPreviousVersionOfItem:()=>BW,getProvisionDetailsV2:()=>LV,getProvisionedPersonalVault:()=>VV,getProvisioningIntegrationExists:()=>_V,getPwnedHashList:()=>PY,getRecoverableKeysForPeople:()=>lW,getRecoveryAttempts:()=>B$j,getRecoveryKey:()=>s$j,getRecoveryPolicies:()=>m$j,getRecoveryPolicy:()=>E$j,getReleaseChannelsPolicy:()=>iV,getReleaseChannelsPolicyDefaultDefinition:()=>oV,getReportingPolicy:()=>fGj,getResendDetails:()=>MV,getRestrictFailedLoginAttemptsPolicy:()=>ZX,getServiceAccount:()=>VW,getServiceAccounts:()=>Y$,getShareHistoryForItem:()=>bU,getShareSeviceAuthToken:()=>DU,getSidebarNavPolicies:()=>YX,getSignInAttempts:()=>Fbj,getSignInAttemptsV2:()=>bbj,getSignupDetails:()=>qH,getSlackApp:()=>dY,getSlackChannels:()=>nY,getSlackGroups:()=>cY,getSlackUsers:()=>aY,getSshBookmarksPolicy:()=>mV,getSsoMigrationExpiredReport:()=>Jbj,getSsoMigrationPendingReport:()=>zbj,getSsoMigrationReportGroups:()=>_bj,getSsoMigrationReportOverview:()=>Kbj,getSsoMigrationSuccessfulReport:()=>Xbj,getSsoSettings:()=>YP,getSuggestedDomain:()=>bR,getSupportAccountsList:()=>yY,getSystemVault:()=>vz,getTrustpilotReviewData:()=>MY,getTwoFactorSitesList:()=>KY,getUser:()=>PX,getUserApplications:()=>mZ,getUserCombinedObjectDataAccess:()=>lX,getUserCookies:()=>_Y,getUserCredentials:()=>aU,getUserItemUsageOverview:()=>bW,getUserMspPermissions:()=>YU,getUserProvisionedKeys:()=>YV,getUserPubKeys:()=>CX,getUserReport:()=>fW,getVault:()=>qz,getVaultItemDetails:()=>pW,getVaultItemHistory:()=>EW,getVaultItemVersion:()=>mW,getVaultItems:()=>uW,getVaultItemsOverviews:()=>kW,getVaultManagers:()=>WY,getVaultReport:()=>yW,getVaultReportingSync:()=>fQ,getVaults:()=>AC,getVaultsByCreation:()=>hz,getVaultsForAccountTransfer:()=>gz,getVaultsReport:()=>$W,getVerificationActionSummary:()=>PZ,getVerifiedDomains:()=>ZY,getWatchtowerData:()=>TY,getWatchtowerPubkey:()=>mC,getWatchtowerReport:()=>QR,getWatchtowerStats:()=>ZR,getWebAuthnChallenge:()=>bvj,inviteUsersViaEmail:()=>mU,inviteViaSlack:()=>pU,isValidReportParams:()=>kH,joinAccount:()=>hR,kickoffDeviceEnrollment:()=>mY,legacySignUpAccount:()=>YW,lockedOutDeleteAccount:()=>GR,lookUpInvitation:()=>dU,lookUpTeamInvitation:()=>kU,markAwayForTravel:()=>_X,markBackFromTravel:()=>LX,markGroupReadyForPurging:()=>Yz,markPackageAsRead:()=>yX,markSignatureInvalid:()=>fY,migrateUsersToHostedProvisioning:()=>eW,myceliumChannelAuthenticatedStart:()=>Yvj,myceliumChannelSendMsgN:()=>rxj,myceliumChannelSendMsgNv:()=>oxj,myceliumChannelSendReplyAndJoin:()=>jxj,myceliumChannelStart:()=>Wvj,myceliumChannelSwitchRegion:()=>Qvj,myceliumGetHello:()=>Axj,myceliumGetMsgN:()=>txj,myceliumGetMsgNv:()=>nxj,myceliumGetMsgTwoV:()=>axj,myceliumGetReply:()=>exj,parseUrlSearchParamsFromObject:()=>IbA,patchApplicationDeviceCheckStatus:()=>xZ,patchGroupMemberships:()=>AR,patchMigratingUserState:()=>aQ,patchSsoApp:()=>gZ,patchUserMemberships:()=>jR,patchVaultItems:()=>vW,performBannerAction:()=>$C,postAccount:()=>vH,postAuth:()=>sJ,postBrexRefreshToken:()=>lQ,postBrexVerifier:()=>sQ,postFastmailRefreshToken:()=>iQ,postFastmailVerifier:()=>oQ,postFirewallRules:()=>LJ,postHibpDomainReportNotify:()=>VY,postImage:()=>$R,postMigratingUsers:()=>rQ,postOidcWellKnownUrl:()=>cz,postPurgeDeletedVaultItems:()=>hW,postSlackAccessToken:()=>pY,postSlackNonce:()=>uY,postTemplate:()=>mz,postUniqueUserCountForGroups:()=>rR,promptConfirmChangeEmail:()=>mR,publishCompanyLogo:()=>UR,putApplicationGroupAssignments:()=>vZ,putGroupApplicationAssignment:()=>aR,putVaultReportingSnapshotsV2:()=>GQ,reactivateUsers:()=>NX,reauthorizeDevice:()=>$J,receiveMsgA:()=>kxj,receiveMsgB:()=>pxj,receiveSharedCredentialBundle:()=>hxj,receiveTagA:()=>Exj,receiveTagB:()=>gxj,recoveryKeyAuthV1Begin:()=>r$j,recoveryKeyAuthV1ConfirmKey:()=>n$j,recoveryKeyBeginAttempt:()=>e$j,recoveryKeyGetAttemptStatus:()=>g$j,recoveryKeyGetMaterial:()=>f$j,recoveryKeyPostRegistration:()=>F$j,recoveryKeyStartEmailVerification:()=>q$j,recoveryKeySubmitEmailVerification:()=>x$j,recoveryVerifyEmailAuth:()=>nW,recoveryVerifyEmailResend:()=>aW,recoveryVerifyEmailStart:()=>rW,regenerateSignUpLink:()=>vU,registerDetailedVaultReportingKey:()=>xQ,registerProvisioningIntegration:()=>QV,registerServiceAccountToken:()=>BH,registerWebauthnCredential:()=>tU,regularUserActorType:()=>Uvj,removePackageV2:()=>$X,removePackages:()=>YC,renameServiceAccountToken:()=>_W,reportAuditEvent:()=>nJ,reportItemUsage:()=>ufj,reportOutdatedBrowser:()=>hX,reportUsoAction:()=>kQ,requestAccountDeletion:()=>$Y,requestBrexAccessToken:()=>dQ,requestSupportEmail:()=>bY,require2FAOnNextSignIn:()=>wJ,resendAllUsersProvision:()=>SV,resendInvitations:()=>BU,resendProvisioningEmailVerification:()=>RV,resendUserProvision:()=>KV,resendVerificationEmail:()=>eY,restoreSessionRestorationKey:()=>a0j,revokeAllServiceAccountTokensForAccount:()=>NW,revokeInvitations:()=>gU,revokeServiceAccountToken:()=>LW,saveNotificationSettings:()=>iX,saveSessionRestorationKey:()=>t0j,saveSessionRestorationKeyU:()=>r0j,searchGroupsCount:()=>zz,sendFeedback:()=>TJ,sendMfaCode:()=>lR,sendMsgA:()=>dxj,sendMsgB:()=>uxj,sendNoSigninPastMonthEmail:()=>HW,sendPackageV2:()=>AGj,sendPackages:()=>vX,sendPerformanceTraces:()=>yZ,sendPreAuthPerformanceTraces:()=>$Z,sendProvisionStartedConfirmation:()=>NV,sendProvisionedConfirmation:()=>zV,sendSsoMigrationReminderEmail:()=>Lbj,sendTagA:()=>mxj,sendTagB:()=>Bxj,sendTestEmailWithOverrides:()=>CJ,sendUnredeemedFamilyAccountEmail:()=>CW,sendUnusedPrivateVaultEmail:()=>PW,setUserCookie:()=>LY,setupCredentialBundle:()=>lU,setupMsp:()=>WU,shareCredentialBundle:()=>qxj,signDeviceTrustPublicKey:()=>Pxj,signOut:()=>b$,signUpAccount:()=>QW,signUpAndGetInfo:()=>jY,signUpUser:()=>hH,ssoValidateEnd:()=>sz,ssoValidateStart:()=>iz,startAuth:()=>Tu,startOidcAuth:()=>QJ,startUserProvision:()=>HV,submitDepartureSurvey:()=>DY,submitNewUserAuth:()=>uJ,suspendMigratedUser:()=>nQ,suspendUserProvision:()=>TV,suspendUsers:()=>MX,teamInvitePerson:()=>EU,timePeriodToDate:()=>dH,trustlogRequestCallback:()=>CZ,unlinkManagedAccount:()=>LU,unsafeCancelDeviceEnrollment:()=>vY,unsafeGetDeviceEnrollmentStatus:()=>gY,updateAccount:()=>qR,updateAccountGatedFeatureTrialAction:()=>FZ,updateAccountShareSettings:()=>PU,updateAccountTemplateConfig:()=>zR,updateAllowAccountCreationPolicy:()=>eV,updateAllowMapsPolicy:()=>cV,updateAppLauncherAllowedPolicy:()=>mGj,updateAutoDeleteSuspendedUsersPolicies:()=>rV,updateAutoLockPolicy:()=>WX,updateBillingSettings:()=>vR,updateBulkGroupVaultAccessPermissions:()=>Kz,updateCliIntegrationPolicy:()=>gV,updateDefaultVaultPermissions:()=>mQ,updateEmailSubscriptions:()=>DJ,updateExtensionAllowedPolicy:()=>dGj,updateGroup:()=>Uz,updateGroupMembershipRole:()=>Zz,updateGroupMspPermissions:()=>AX,updateGroupPermissions:()=>Xz,updateGroupVaultAccessPermissions:()=>Tz,updateHostedProvisioningIntegration:()=>J$,updateInviteVault:()=>fU,updateItemPasswordPolicy:()=>kV,updateManagedAccount:()=>_U,updateManagedCompanyMspPermissions:()=>ZU,updateManagedCredential:()=>MN,updateObjectData:()=>BX,updatePersonVaultAccessPermissions:()=>Hz,updatePolicyTemplateName:()=>qGj,updateReleaseChannelsPolicy:()=>sV,updateReportingPolicy:()=>GGj,updateRestrictFailedLoginAttemptsPolicy:()=>AV,updateServiceAccount:()=>WW,updateSidebarNavPolicies:()=>QX,updateSignup:()=>ZW,updateSignupAccountType:()=>AY,updateSlackApp:()=>kY,updateSshBookmarksPolicy:()=>EV,updateSsoSettings:()=>oz,updateTemplatePolicyDefinition:()=>vGj,updateUser:()=>zX,updateUserCredential:()=>oU,updateVault:()=>bz,updateVaultClientAccess:()=>yz,updateVerifiedDomain:()=>AQ,upgradeGuestToMember:()=>RX,uploadCompanyLogo:()=>RR,uploadFile:()=>PC,uploadWatchtowerReport:()=>YR,userFilterTypeOptions:()=>gbj,validateItemShareRecipients:()=>wU,verifyLockedOutAccountDeletion:()=>fR,verifyMfa:()=>dJ,verifyOidc:()=>ZJ,verifyPasskey:()=>eU,verifyTotp:()=>kR,verifyWebauthnCredentialAttestation:()=>rU});var mA=W(aA());var Ya={};Yt(Ya,{Auk:()=>Zt,CredentialBundle:()=>ii,CryptoVersion:()=>al,CurrentItemSnapshotPayloadVersion:()=>Sf,DEFAULT_SRP_METHOD:()=>mP,DeviceKey:()=>vs,EncryptedVaultItemSnapshot:()=>l$,EncryptedVaultItemSnapshotWithServerData:()=>cfA,Envelope:()=>qs,EnvelopeC:()=>bh,InputRecoveryKey:()=>wh,JwkX25519PriKey:()=>zP,JwkX25519PubKey:()=>Kf,KeyDerivationInfo:()=>kP,ManagedAccountKey:()=>hs,ManagedAccountLinkAuthKey:()=>Xd,ManagedAccountPublicKeyMac:()=>qP,ManagedCredentialKey:()=>Tf,ManagedCredentialPolicyKey:()=>aB,PAPER_KEY_PREFIX:()=>$h,RECOVERY_CODE_LENGTH:()=>_xA,RecoveryKey:()=>zc,SecretKey:()=>Ba,SecretKeyFormat:()=>Hn,ServiceAccountThrottleKeypair:()=>Of,SnapshotWatchtowerReport:()=>YN,SrpMethod:()=>oi,SrpMethodPrefix:()=>Iu,SrpStarter:()=>QE,SrpV:()=>ZE,SrpX:()=>Ho,TagRouteKey:()=>Cf,UrlAutofillParentKey:()=>Pf,UrlAutofillSessionKey:()=>yh,VaultItemSnapshot:()=>s$,VaultItemSnapshotEnvelope:()=>Rp,VaultItemSnapshotServerData:()=>RP,VaultItemSnapshotWithAdditionalAndServerData:()=>dfA,VaultReportingPrivateKey:()=>Wp,VaultReportingPublicKey:()=>Pu,VaultSnapshotAdditionalData:()=>Vy,exactPartial:()=>fhj,exactType:()=>hP,password_key_derivation_consts:()=>Yp,unsafePrimitives:()=>Q6});var AB=W(aA());var q={};Yt(q,{ACCOUNT_NAME_MAX_LENGTH:()=>svA,ClientInfo:()=>rN,ClientShortCode:()=>vf,ClientShortCodeCodec:()=>PvA,CountryCode:()=>mh,CountryRequiresProvince:()=>$Bj,DEBUG:()=>nBj,DEVICE_ENROLLMENT_CODE_LENGTH:()=>MvA,DOMAIN_INVALID_CHARS:()=>tBj,DOMAIN_MAX_LENGTH:()=>$L,DOMAIN_MIN_LENGTH:()=>jBj,ExceptionType:()=>mn,IsoStringDate:()=>Yn,LoggableError:()=>Pe,MULTIPLE_FORWARD_SLASH_REGEX:()=>cvA,MasterPasswordPolicyMinLength:()=>nP,NEVER:()=>Gh,OpUserAgentConfig:()=>hgj,OptionalIsoStringDate:()=>r4,PASS_CHAR_SET:()=>$u,PROMO_CODE_MAX_LENGTH:()=>kBj,RfcNumericDate:()=>X0,SERVICE_ACCOUNT_NAME_MAX_LENGTH:()=>QEj,SERVICE_ACCOUNT_TOKEN_NAME_MAX_LENGTH:()=>ZEj,SHORT_DOMAIN_MIN_LENGTH:()=>eBj,UNSANITARY_CHARACTERS_REGEX:()=>lvA,URL_MAX_LENGTH:()=>ABj,UUID_LENGTH:()=>qvA,VAULT_AND_GROUP_DESC_MAX_LENGTH:()=>aBj,VAULT_AND_GROUP_NAME_MAX_LENGTH:()=>rBj,ab2str:()=>V6,addMinimumWait:()=>BBj,addProtocolToUrlIfNeeded:()=>Tp,arrayBuffer:()=>U0,arrayEquals:()=>YL,asValidAccountName:()=>FBj,asValidDomain:()=>GBj,base32ToBytes:()=>t3,base64ToBase64url:()=>e4,base64byteLength:()=>r3,base64urlToBytes:()=>ZA,batchChain:()=>K6,batchPromiseAll:()=>X4,bitsAsClientUuid:()=>xvA,blobToBase64DataURI:()=>Eh,browserInfo:()=>$9,bytesAsBase64Url:()=>rhA,bytesAsClientUuid:()=>VE,bytesToBase32:()=>J0,bytesToBase64url:()=>tj,bytesToBits:()=>ia,bytesToHex:()=>Pn,calculatePasswordStrength:()=>ff,canUseTrustedDeviceAuth:()=>$gj,chainPromises:()=>gBj,clean:()=>qBj,combineComparators:()=>Ky,commaSeparatedListToArray:()=>V4,compact:()=>UE,compactFilter:()=>iBj,compare:()=>ni,compareDates:()=>iN,compareStrings:()=>Ty,composeComparator:()=>Rd,concatUint8Arrays:()=>Co,config:()=>Gr,count:()=>cgj,crypto:()=>$A,dateFromGolang:()=>H6,dateToGolang:()=>$p,decode:()=>sj,deriveHmacSha256:()=>tN,ep:()=>lBj,errors:()=>CA,events:()=>Fh,filterCharacters:()=>bBj,flipCoin:()=>JL,formatCommaSeparatedList:()=>hBj,fromStringEnum:()=>pe,fromStringUnion:()=>t4,generateDeviceEnrollmentCode:()=>wgj,generatePassphrase:()=>aN,generatePassword:()=>Lp,generateRandomID:()=>Dy,generateUUID:()=>fe,generateUUIDStyleHash:()=>jgj,getCallbackPromise:()=>U4,getCountryCodeFromDomain:()=>W4,getFileExtension:()=>xBj,getHostnameFromUrl:()=>Dgj,getModifierKey:()=>vBj,getOpUserAgentString:()=>xf,getOrderedComparator:()=>bgj,getRandomNumberWithByteLength:()=>FvA,getRandomValueFromRange:()=>F6,getSanitizedName:()=>dvA,getServerDomainFromAccountDomain:()=>ai,getTime:()=>Sy,getUuidModulo:()=>egj,getValidGroupUuid:()=>zd,getValidUserUuid:()=>ko,getValidVaultUuid:()=>Iy,hasCommonPasswordsList:()=>vgj,hasDetailedVaultReportingFeature:()=>Igj,hasExtensionInstalled:()=>ugj,hexToBytes:()=>wp,hmacSha256Hex:()=>pgj,hmacWithSecretAndData:()=>Mp,ignore:()=>J,inBetween:()=>OL,initOnceBuilder:()=>My,isBusinessRelated:()=>lN,isDebugMode:()=>ps,isItemInWrongAccount:()=>dN,isNonWebSignupSource:()=>mBj,isPaymentMethod:()=>Cy,isValidAccessorUuid:()=>zL,isValidAccountUuid:()=>YBj,isValidDistributorEntitlementCodeFormat:()=>R4,isValidDomain:()=>qy,isValidEmail:()=>Bh,isValidGroupUuid:()=>NL,isValidIPAddressOrCIDR:()=>ggj,isValidInvitationUuid:()=>QBj,isValidInviteDomain:()=>cBj,isValidItemUuid:()=>wy,isValidMspLinkRequestUuid:()=>ZBj,isValidNumber:()=>hy,isValidPromoCodeFormat:()=>DL,isValidPurchaseOrderTokenFormat:()=>J4,isValidServerToken:()=>dBj,isValidSignupSource:()=>pBj,isValidSignupVerificationCode:()=>EBj,isValidTemplateUuid:()=>Agj,isValidUserUuid:()=>$y,isValidVaultUuid:()=>qh,joinPath:()=>z4,json:()=>Oo,json2ab:()=>lt,jsonAsBase64Url:()=>LE,jsonBytes:()=>Ue,logsafe:()=>Y9,mapObject:()=>wL,maskString:()=>ygj,moveArrayItem:()=>sBj,normalizeAndFilterUniqueUrls:()=>cN,normalizeToUrl:()=>LvA,normalizeUTF8:()=>IL,notification:()=>Lt,numToUint8Array:()=>e3,obfuscateCardWithBrand:()=>kgj,passwordIsInDictionary:()=>Ggj,prehash:()=>nN,readFile:()=>fBj,readonlyArrayOmitNullish:()=>nh,reportError:()=>Nr,reportErrors:()=>Oy,reportInvalid:()=>Bs,rsa:()=>xy,secureDecodeReporter:()=>n3,selectRandomElement:()=>agj,sentry:()=>WL,setCommonPasswordsList:()=>sP,setDebugMode:()=>N7j,setPassphraseWordList:()=>iP,shouldReportForPrivateVaults:()=>sN,str2ab:()=>Dj,stringify:()=>oBj,totp:()=>uN,unsafeDecodeAs:()=>sgj,usTerritories:()=>wBj,utf8:()=>thA,wait:()=>Qn,withDefault:()=>GA,withDefaultUndefined:()=>ij,withEncoding:()=>L7j,withFallback:()=>Do});var mn;(function(A){A.ContextError=E`ContextError`,A.RequestError=E`RequestError`,A.ValidationError=E`ValidationError`})(mn||(mn={}));var Pe=class extends Error{get loggableMessage(){return this._message}set loggableMessage(j){this._message=j}get loggableName(){return this._name}set loggableName(j){this._name=j}get message(){return this._message.str}set message(j){this._message=j}get name(){return this._name.str}set name(j){this._name=j}constructor(j){super(),this._message=E``,this._name=E`Error`,j.message&&(this.message=j.message),j.stackOverrideError instanceof Error&&(this.stack=j.stackOverrideError.stack),this.metaData=j.metaData,this.name=j.errorClass,this.severityLevel=j.severityLevel,this.tags=j.tags,this.userUuid=j.userUuid,this.sampleRate=j.sampleRate}};var Qx=W(Dn()),ge=W(aA());var H6=A=>typeof A!="string"||A.indexOf("0001")===0?void 0:new Date(A),$p=A=>A?A.toISOString():"";var CA={};Yt(CA,{ClientError:()=>mu,ClientErrorCode:()=>Tc,HTTPStatusCode:()=>Rl,ItemStatusCode:()=>A3,LegacyServerError:()=>A4,SecretKeyIdOrFormatMismatchedError:()=>L0,SecretKeyMissingError:()=>_0,ServerError:()=>pu,ServerErrorCode:()=>rh,ServerErrorReason:()=>Ci,getError:()=>N0,getErrorMessage:()=>G6,getErrorString:()=>z0,isClientError:()=>Eu,isErrorLike:()=>Td,isLegacyServerError:()=>R0,isNewServerError:()=>Kc,isNewServerErrorWithStatus:()=>j3,isOldKeyError:()=>H7j,isSecretKeyIdOrFormatMismatchedError:()=>K7j,isSecretKeyMissingError:()=>T7j,isSecretKeyPrefixInvalidError:()=>S7j,isServerError:()=>ah});var Ci;(function(A){A.deprecated="deprecated",A.cannotHandleRequest="cannot_handle_request",A.firewallRule="firewall_rule",A.provisioningEnabled="provisioning_enabled",A.billingBadCardCVV="bad_cc_cvv",A.billingCardDeclined="cc_declined",A.billingCardProcessingError="cc_processing_error",A.billingBadCardNumber="bad_cc_number",A.billingBadCardExpiry="bad_cc_expiry",A.billingCardExpired="cc_expired",A.billingBadCardZIP="bad_cc_zip",A.billingCardMissing="cc_missing",A.billingRateLimiting="too_many_billing_requests",A.billingBadProvider="billing_provider_incorrect",A.billingInsufficientCredit="insufficient_credit",A.billingGiftCardAcceptedInsufficientCredit="gift_card_accepted_insufficient_credit",A.billingStripeDown="stripe_down",A.billingSubscriptionIncomplete="subscription_incomplete",A.billingFrozen="billing_is_frozen",A.billingAccountPaidWithCredit="account_paid_with_credit",A.slackUserLimitReached="slack_users_limit_reached",A.slackInvitesZeroSent="slack_invites_zero_sent",A.slackTimeout="slack_timeout",A.userSuspended="user_suspended",A.userDeleted="user_deleted",A.userIsGuest="user_is_guest",A.recoveryAccepted="recovery_accepted",A.transferAccepted="transfer_accepted",A.notEnrolled="not_enrolled",A.provisionSuspended="provision_suspended",A.dnsRecordNotFound="dns_record_not_found",A.maxAttemptExceeded="max_attempt_exceeded",A.accountTierMismatchOnSubscribe="account_tier_mismatch_subscribe",A.tooManyVaultAccessCreditsInUseToChangeAccountType="too_many_vault_access_credits_in_use_to_change_account_type",A.maxVaultAccessCredits="maximum_vault_access_credits",A.pendingProvisioningUsers="pending_provisioning_users",A.incorrectSetupIntentStatus="incorrect_setup_intent_status",A.membershipUpdateRequiresRecovery="membership_update_requires_recovery",A.provisioningNotManager="not_provision_manager",A.invalidSkPrefixFormat="invalid_sk_prefix_format",A.activeManagedAccountsExist="active_managed_accounts_exist",A.alreadyUsed="already_used",A.accountTypeMismatch="account_type_mismatch",A.partnershipAccountTypeMismatch="partnership_account_type_mismatch",A.partnershipAlreadyUsed="partnership_api_activation_code_already_used",A.missingEntitlementCode="no_entitlement_code",A.distributorLinkAccountNotMsp="distributor_link_account_not_msp",A.emailAlreadyInUse="email_already_in_use",A.invitesLimitReached="invites_limit_reached",A.invitesRateLimitReached="invites_rate_limit_reached",A.invitesBatchLimitReached="invites_batch_limit_reached",A.invitesLimitReachedIAP="invites_limit_reached_iap",A.confirmationLimitReached="confirmation_limit_reached",A.accountMaxGuestsExceeded="account_max_guests_exceeded",A.accountMaxMembersExceeded="account_max_members_exceeded",A.passwordAuthNotAllowed="password_auth_not_allowed",A.oidcUserDoesNotMatch="oidc_user_does_not_match",A.oidcGenericDomainNotAllowed="oidc_generic_domain_not_allowed",A.ownersGroupCannotSso="owners_group_sso_not_allowed",A.idpConfigurationNotAllowed="identity_provider_config_permission_not_allowed",A.privateAppWithoutSecret="private_app_without_secret",A.publicAppWithSecret="public_app_with_secret",A.missingOidcClientSecret="missing_oidc_client_secret",A.oidcUserPendingProvision="oidc_user_pending_provision_started",A.accountAlreadyExists="account_already_exists",A.accountCreationForbidden="account_creation_forbidden",A.accountCreationForbiddenInvitePending="account_creation_forbidden_invite_pending",A.accountCreationForbiddenInviteExpired="account_creation_forbidden_invite_expired",A.addressIncomplete="address_incomplete",A.addressIncorrect="address_incorrect",A.avataxAPI="avatax_api",A.taxAdviceInvalidRequest="taxadvice_invalid_request",A.unsupported="unsupported",A.accountPolicy="account_policy",A.mustEnrollInitialTrustedDevice="must_enroll_initial_device",A.deviceNotEnrolled="device_not_enrolled",A.ssoMigrationDeadlinePassed="sso_migration_deadline_passed",A.maximumAttemptsReached="maximum_attempts_reached",A.incorrectValue="incorrect_value",A.expired="expired",A.recentRecoveryAborted="recent_recovery_aborted",A.recentLogin="recent_login",A.crossPhysicalDeviceDelegationNotAllowed="cross_physical_device_delegation_not_allowed",A.noOwnerExists="no_owner_exists",A.domainNotAvailable="domain_not_available",A.mfaRequired="mfa_required",A.reauthenticationRequired="reauthentication_required",A.mspInvalidSigninAddress="invalid_signin_address",A.mspLinkRequestNotFound="msp_link_request_not_found",A.mspLinkRequestAlreadyAccepted="msp_link_request_already_accepted",A.failedLoginAttemptLockout="failed_login_attempt_lockout",A.provisionedUserWithDisallowedDomainExists="provisioned_user_not_included_in_allowed_email_domains_list_exists",A.atLeastOneDomainRequiredForHostedProvisioning="at_least_one_domain_required_for_hosted_provisioning",A.hostedProvisioningCannotBeDeletedWithInvitedUsers="hosted_provisioning_integration_cannot_be_deleted_with_invited_users",A.trustLogConflict="trust_log_conflict"})(Ci||(Ci={}));var pu=class extends Error{constructor(j,e){super(),this.code=j,this.reason=e,this.name="ServerError",this.message=this.code+(this.reason?` (${this.reason})`:"")}},rh;(function(A){A[A.badRequest=100]="badRequest",A[A.operationNotPermitted=101]="operationNotPermitted",A[A.authenticationRequired=102]="authenticationRequired",A[A.internalServerError=103]="internalServerError",A[A.incorrectVersionValue=104]="incorrectVersionValue",A[A.unknownImageFormat=105]="unknownImageFormat",A[A.registrationFailed=106]="registrationFailed",A[A.suspendedLoginFailed=107]="suspendedLoginFailed",A[A.oneMustRemain=108]="oneMustRemain",A[A.deletedLoginFailed=109]="deletedLoginFailed",A[A.cannotHandleRequest=110]="cannotHandleRequest",A[A.domainNotAvailable=112]="domainNotAvailable",A[A.recoveryAcceptedLoginFailed=113]="recoveryAcceptedLoginFailed",A[A.resourceAlreadyUsed=115]="resourceAlreadyUsed",A[A.cannotRemoveYourselfFromGroup=116]="cannotRemoveYourselfFromGroup",A[A.resourceNotFound=117]="resourceNotFound",A[A.requestTooLarge=118]="requestTooLarge",A[A.resourceInvalid=119]="resourceInvalid",A[A.blockedEmailDomain=122]="blockedEmailDomain",A[A.deprecatedClient=125]="deprecatedClient",A[A.invalidPromotionCoupon=126]="invalidPromotionCoupon",A[A.incorrectAttrVersion=127]="incorrectAttrVersion",A[A.emailDomainIsRestricted=129]="emailDomainIsRestricted",A[A.cardBadCVV=200]="cardBadCVV",A[A.cardDeclined=201]="cardDeclined",A[A.cardProcessingError=202]="cardProcessingError",A[A.cardBadNum=203]="cardBadNum",A[A.cardBadExpiry=204]="cardBadExpiry",A[A.cardExpired=205]="cardExpired",A[A.cardBadZip=206]="cardBadZip",A[A.cardMissing=207]="cardMissing",A[A.stripeRateLimit=208]="stripeRateLimit",A[A.badProvider=481]="badProvider",A[A.insufficientCredit=482]="insufficientCredit",A[A.addressIncomplete=483]="addressIncomplete",A[A.resourceExpired=410]="resourceExpired",A[A.resourceLocked=423]="resourceLocked",A[A.reauthenticationRequired=450]="reauthenticationRequired",A[A.mfaRequired=451]="mfaRequired",A[A.memberConfirmationLimitReached=484]="memberConfirmationLimitReached",A[A.guestConfirmationLimitReached=485]="guestConfirmationLimitReached",A[A.memberReactivationLimitReached=486]="memberReactivationLimitReached",A[A.guestReactivationLimitReached=487]="guestReactivationLimitReached",A[A.unknownError=900]="unknownError"})(rh||(rh={}));var Rl;(function(A){A[A.badRequest=400]="badRequest",A[A.unauthorized=401]="unauthorized",A[A.forbidden=403]="forbidden",A[A.notFound=404]="notFound",A[A.conflict=409]="conflict",A[A.preconditionFailed=412]="preconditionFailed",A[A.locked=423]="locked",A[A.tooManyRequests=429]="tooManyRequests",A[A.registrationFailed=432]="registrationFailed",A[A.userOrDeviceNotAllowed=433]="userOrDeviceNotAllowed",A[A.applicationError=434]="applicationError",A[A.suspendedUserError=435]="suspendedUserError",A[A.deletedUserError=436]="deletedUserError",A[A.resourceInvalid=441]="resourceInvalid",A[A.deprecatedClient=445]="deprecatedClient",A[A.internalServerError=500]="internalServerError"})(Rl||(Rl={}));var A3;(function(A){A[A.ok=0]="ok",A[A.expired=1]="expired",A[A.validationError=100]="validationError",A[A.permissionError=101]="permissionError",A[A.serverError=103]="serverError",A[A.incorrectItemVersion=104]="incorrectItemVersion"})(A3||(A3={}));var A4=class extends Error{constructor(j,e){super(),this.code=j,this.message=e?`${e} (${j})`:j.toString(),this.name="LegacyServerError"}},Tc;(function(A){A[A.incorrectMasterPassword=102]="incorrectMasterPassword",A[A.invalidEmailOrPassword=103]="invalidEmailOrPassword",A[A.mustVerifyEmail=104]="mustVerifyEmail",A[A.serverRequestTimedOut=105]="serverRequestTimedOut",A[A.deviceDeleted=106]="deviceDeleted",A[A.sequenceNumberTooLarge=107]="sequenceNumberTooLarge",A[A.invalidImage=108]="invalidImage",A[A.invalidMFA=110]="invalidMFA",A[A.noRsaOaep256Support=111]="noRsaOaep256Support",A[A.invalidSigningKeyPair=112]="invalidSigningKeyPair",A[A.invalidFileType=113]="invalidFileType",A[A.signatureVerificationFailed=114]="signatureVerificationFailed",A[A.restrictedCountry=115]="restrictedCountry",A[A.fileTooLarge=116]="fileTooLarge",A[A.unexpectedFetchError=117]="unexpectedFetchError",A[A.corruptedFile=118]="corruptedFile",A[A.unsupportedMFA=119]="unsupportedMFA",A[A.emailAlreadyInUseByGuest=120]="emailAlreadyInUseByGuest",A[A.emailAlreadyInUseByMember=121]="emailAlreadyInUseByMember",A[A.missingFileId=122]="missingFileId",A[A.popupFailed=123]="popupFailed",A[A.popupBlocked=124]="popupBlocked",A[A.unknownError=900]="unknownError"})(Tc||(Tc={}));var mu=class extends Error{constructor(j,e){super(),this.code=j,this.loggableMessage=e?Z(`${e.str} (${j})`):Z(j.toString()),this.message=this.loggableMessage.str,this.name="ClientError"}},N0=(A,j)=>{if(Eu(A)){let r=j?Z(`${j.str} ${A.loggableMessage.str}`):A.loggableMessage;return new mu(A.code,r)}let e=G6(A),t=j?`${j.str} ${e}`:e;return R0(A)?new A4(A.code,t):Kc(A)?A:new Error(t)},Td=A=>typeof A=="object"&&A!==null&&"name"in A&&typeof A.name=="string"&&"message"in A&&typeof A.message=="string",C7j=A=>"StringifiedError: "+JSON.stringify(A),z0=A=>{try{if(typeof A=="object"){let j=A?.toString?.();if(j&&j!=="[object Object]"&&j!=="[object Error]")return j}return C7j(A)}catch(j){return z0(j)}},G6=A=>Td(A)?A.message:"An unexpected error occurred",Eu=(A,j)=>Td(A)&&A.name==="ClientError"&&(!j||j===A.code||Array.isArray(j)&&Br(j,A.code)),ah=(A,j,e)=>Kc(A,j,e)||R0(A,j),Kc=(A,j,e)=>{if(!Td(A))return!1;let t=!j||j===A.reason||Array.isArray(j)&&Br(j,A.reason),r=e!==void 0&&e===A.code;return A.name==="ServerError"&&(t||r)},j3=(A,j)=>Td(A)&&A.name==="ServerError"&&j===A.code,R0=(A,j)=>Td(A)&&A.name==="LegacyServerError"&&(!j||j===A.code||Array.isArray(j)&&Br(j,A.code)),H7j=A=>Td(A)&&A.message==="Unsupported JWK algorithm RSA-OAEP-256",_0=class A extends Error{constructor(j){super(),this.message="Secret Key ("+j+") not found",this.name=A.ERROR_NAME}};_0.ERROR_NAME="SecretKeyMissingError";var T7j=A=>Td(A)&&A.name===_0.ERROR_NAME,L0=class A extends Error{constructor(j,e,t,r){super(),this.message=`User's Secret Key ID (${e}) or format (${r}) doesn't match either response's Secret Key ID (${j}) or format (${t})`,this.name=A.ERROR_NAME}};L0.ERROR_NAME="SecretKeyIdOrFormatIsWrong";var K7j=A=>Td(A)&&A.name===L0.ERROR_NAME,S7j=A=>Kc(A,Ci.invalidSkPrefixFormat);var us=W(so()),M7j=()=>{if(typeof TextDecoder>"u")return A=>{if(typeof A!="object"||A===null||!("byteLength"in A))throw new TypeError("Failed to decode bytes: The provided value is not of type '(ArrayBuffer or ArrayBufferView)'.");return us.codec.utf8String.fromBits(us.codec.bytes.toBits(new Uint8Array(A)))};{let A=new TextDecoder;return A.decode.bind(A)}},_7j=()=>{if(typeof TextEncoder>"u")return A=>new Uint8Array(us.codec.bytes.fromBits(us.codec.utf8String.toBits(A)));{let A=new TextEncoder;return A.encode.bind(A)}},V6=M7j(),Dj=_7j(),lt=A=>Dj(JSON.stringify(A)),e3=(A,j)=>{if(!Number.isInteger(A)||!Number.isInteger(j)||Number.isNaN(A)||Number.isNaN(j))throw new TypeError("A parameter to numToUint8Array wasn't an integer.");if(A<0)throw new Error("numToUint8Array doesn't allow negative numbers.");if(A>Math.pow(2,j*8)-1)throw new Error("Number requires a byte array greater than specified output length.");let e=new Uint8Array(j);for(let t=0;t<j;t++)e[t]=A%256,A=A>>>8;return e},ia=us.codec.bytes.toBits.bind(us.codec.bytes),tj=A=>{let j="";for(let t,r=A.length,a=0,n=0;n<r;n++)t=n%3,a|=A[n]<<(16>>>t&24),(t===2||r-n===1)&&(j+=String.fromCharCode(j4(a>>>18&63),j4(a>>>12&63),j4(a>>>6&63),j4(a&63)),a=0);let e=(3-A.length%3)%3;return e===0?j:j.slice(0,-e)},j4=A=>A<26?A+65:A<52?A+71:A<62?A-4:A===62?45:95,t3=A=>new Uint8Array(us.codec.bytes.fromBits(us.codec.base32.toBits(A))),J0=A=>us.codec.base32.fromBits(ia(A),!0),ZA=A=>(A=e4(A),new Uint8Array(us.codec.bytes.fromBits(us.codec.base64url.toBits(A)))),e4=A=>A.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),r3=A=>{let j=A.length;return A[j-1]==="="&&(j-=1,A[j-1]==="="&&(j-=1)),Math.floor(3*j/4)},Pn=A=>us.codec.hex.fromBits(ia(A)),wp=A=>{let j=A.length%2===1?"0"+A:A;return new Uint8Array(us.codec.bytes.fromBits(us.codec.hex.toBits(j)))};var GA=(A,j)=>new ge.Type(`withDefault(${A.name}, ${JSON.stringify(j)})`,A.is,(e,t)=>A.validate(e??B0(j),t),A.encode),ij=A=>{let j=ge.union([A,ge.undefined]);return new ge.Type(`withDefaultUndefined(${A.name})`,j.is,(e,t)=>ge.undefined.is(e??void 0)?ge.success(void 0):A.validate(e,t),j.encode)},Do=(A,j)=>new ge.Type(`withFallback(${A.name})`,A.is,(e,t)=>{let r=A.validate(e,t);try{return(0,Qx.isLeft)(r)?ge.success(j(e)):r}catch(a){return ge.failure(e,t,G6(a))}},A.encode),L7j=(A,j,e=j.name)=>new ge.Type(e,j.is,j.validate,A),pe=(A,j)=>{let e=t=>typeof t=="string"&&l6(A).includes(t);return new ge.Type(j,e,(t,r)=>e(t)?ge.success(t):ge.failure(t,r),ge.identity)},t4=A=>{let j=e=>typeof e=="string";return new ge.Type(A,j,(e,t)=>j(e)?ge.success(e):ge.failure(e,t),ge.identity)},nh=A=>{let j=t=>t!==null&&typeof t<"u",e=ge.readonlyArray(ge.union([A,ge.null,ge.undefined]));return new ge.Type(`readonlyArrayOmitNullish(${A.name})`,t=>e.is(t)&&t.every(j),(t,r)=>{let a=e.validate(t,r);return a._tag==="Left"?a:ge.success(a.right.filter(j))},ge.identity)},J=new ge.Type("ignore",ge.void.is,()=>ge.success(void 0),ge.void.encode),thA=new ge.Type("utf8",ge.string.is,(A,j)=>{try{return ge.success(V6(A))}catch(e){return ge.failure(A,j,G6(e))}},Dj),Oo=new ge.Type("json",ge.unknown.is,(A,j)=>{let e=ge.string.validate(A,j);if((0,Qx.isLeft)(e))return e;try{let t=JSON.parse(e.right);return ge.success(t)}catch(t){return ge.failure(A,j,G6(t))}},JSON.stringify),Ue=thA.pipe(Oo,"jsonBytes"),rhA=new ge.Type("bytesAsBase64Url",A=>A instanceof Uint8Array,(A,j)=>{let e=ge.string.validate(A,j);if((0,Qx.isLeft)(e))return e;try{return ge.success(ZA(e.right))}catch(t){return ge.failure(A,j,G6(t))}},tj),LE=rhA.pipe(Ue,"jsonAsBase64Url"),U0=new ge.Type("arrayBuffer",A=>A instanceof ArrayBuffer,(A,j)=>A instanceof ArrayBuffer?ge.success(A):ge.failure(A,j),ge.identity),X0=new ge.Type("RfcNumericDate",A=>x0(A),(A,j)=>{let e=ge.number.validate(A,j);if((0,Qx.isLeft)(e))return e;try{let t=new Date(e.right*1e3);if(Number.isNaN(t.getTime()))throw new TypeError("Invalid Date input");return ge.success(t)}catch(t){return ge.failure(A,j,G6(t))}},A=>{let j=A.getTime();if(Number.isNaN(j))throw new TypeError("Invalid Date object");return Math.floor(j/1e3)}),Yn=new ge.Type("IsoStringDate",A=>x0(A),(A,j)=>{let e=ge.string.validate(A,j);if((0,Qx.isLeft)(e))return e;try{let t=H6(e.right);if(!t)throw new TypeError("Invalid Date input");if(Number.isNaN(t.getTime()))throw new TypeError("Invalid Date input");return ge.success(t)}catch(t){return ge.failure(A,j,G6(t))}},A=>{let j=A.getTime();if(Number.isNaN(j))throw new TypeError("Invalid Date object");return A.toISOString()}),r4=new ge.Type("OptionalIsoStringDate",A=>typeof A>"u"||x0(A),(A,j)=>{if(typeof A!="string"||A.indexOf("0001")===0)return ge.success(void 0);try{let e=new Date(A);if(Number.isNaN(e.getTime()))throw new TypeError("Invalid Date input");return ge.success(e)}catch(e){return ge.failure(A,j,G6(e))}},A=>{let j=A?.getTime();if(Number.isNaN(j))throw new TypeError("Invalid Date object");return A?.toISOString()});var $vA=W(Dn());var a3=!1,N7j=A=>{a3!==A&&(a3=A)},ps=()=>a3;var ahA=W(Dn()),a4=class{get message(){return this.msg.str}constructor(j){this.name="LoggableTypeError",this.toString=()=>this.name+": "+this.message,this.msg=j}},nhA=(A,j)=>(0,ahA.isLeft)(A)?Jl(A.left,j):Bu(A.right),Bu=A=>({type:"ok",value:A,unwrap:()=>A}),Jl=(A,j)=>({type:"err",value:A,unwrap:()=>{throw j?j(A):A}});var n3={};Yt(n3,{SecurePathReporter:()=>V0,stringify:()=>shA});var ihA=W(Dn());var shA=A=>typeof A=="function"?A.displayName||A.name||`<function ${A.length}>`:typeof A=="number"&&!Number.isFinite(A)?Number.isNaN(A)?"NaN":A>0?"Infinity":"-Infinity":A===null?"null":typeof A>"u"?"undefined":typeof A=="object"&&Array.isArray(A)?"(type: array)":`(type: ${typeof A})`,z7j=A=>A.map(({key:j,type:e})=>j+": "+e.name).join("/"),R7j=A=>E`Invalid value ${Z(shA(A.value))} supplied to ${Z(z7j(A.context))}`,ohA=A=>A.map(R7j),J7j=()=>[E`No errors!`],V0={report:(0,ihA.fold)(ohA,J7j),reportFailure:ohA};var WL={};Yt(WL,{ExceptionType:()=>UL,assertLogSafeAndNormalizeDevice:()=>yvA,init:()=>ogj,isInitialized:()=>igj,reportError:()=>Nr,reportErrors:()=>Oy});var lhA=Object.prototype.toString;function W0(A){switch(lhA.call(A)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return hu(A,Error)}}function Zx(A,j){return lhA.call(A)===`[object ${j}]`}function Af(A){return Zx(A,"ErrorEvent")}function n4(A){return Zx(A,"DOMError")}function o3(A){return Zx(A,"DOMException")}function Ys(A){return Zx(A,"String")}function jf(A){return typeof A=="object"&&A!==null&&"__sentry_template_string__"in A&&"__sentry_template_values__"in A}function oh(A){return A===null||jf(A)||typeof A!="object"&&typeof A!="function"}function Kd(A){return Zx(A,"Object")}function ih(A){return typeof Event<"u"&&hu(A,Event)}function i3(A){return typeof Element<"u"&&hu(A,Element)}function s3(A){return Zx(A,"RegExp")}function gu(A){return!!(A&&A.then&&typeof A.then=="function")}function l3(A){return Kd(A)&&"nativeEvent"in A&&"preventDefault"in A&&"stopPropagation"in A}function c3(A){return typeof A=="number"&&A!==A}function hu(A,j){try{return A instanceof j}catch{return!1}}function Y0(A){return!!(typeof A=="object"&&A!==null&&(A.__isVue||A._isVue))}function qu(A,j=0){return typeof A!="string"||j===0||A.length<=j?A:`${A.slice(0,j)}...`}function o4(A,j){if(!Array.isArray(A))return"";let e=[];for(let t=0;t<A.length;t++){let r=A[t];try{Y0(r)?e.push("[VueViewModel]"):e.push(String(r))}catch{e.push("[value cannot be serialized]")}}return e.join(j)}function chA(A,j,e=!1){return Ys(A)?s3(j)?j.test(A):Ys(j)?e?A===j:A.includes(j):!1:!1}function ef(A,j=[],e=!1){return j.some(t=>chA(A,t,e))}function Q0(A,j,e=250,t,r,a,n){if(!a.exception||!a.exception.values||!n||!hu(n.originalException,Error))return;let o=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;o&&(a.exception.values=U7j(d3(A,j,r,n.originalException,t,a.exception.values,o,0),e))}function d3(A,j,e,t,r,a,n,o){if(a.length>=e+1)return a;let i=[...a];if(hu(t[r],Error)){dhA(n,o);let s=A(j,t[r]),l=i.length;khA(s,r,l,o),i=d3(A,j,e,t[r],r,[s,...i],s,l)}return Array.isArray(t.errors)&&t.errors.forEach((s,l)=>{if(hu(s,Error)){dhA(n,o);let d=A(j,s),k=i.length;khA(d,`errors[${l}]`,k,o),i=d3(A,j,e,s,r,[d,...i],d,k)}}),i}function dhA(A,j){A.mechanism=A.mechanism||{type:"generic",handled:!0},A.mechanism={...A.mechanism,...A.type==="AggregateError"&&{is_exception_group:!0},exception_id:j}}function khA(A,j,e,t){A.mechanism=A.mechanism||{type:"generic",handled:!0},A.mechanism={...A.mechanism,type:"chained",source:j,exception_id:e,parent_id:t}}function U7j(A,j){return A.map(e=>(e.value&&(e.value=qu(e.value,j)),e))}function i4(A){return A&&A.Math==Math?A:void 0}var Jt=typeof globalThis=="object"&&i4(globalThis)||typeof window=="object"&&i4(window)||typeof self=="object"&&i4(self)||typeof global=="object"&&i4(global)||function(){return this}()||{};function sh(){return Jt}function Z0(A,j,e){let t=e||Jt,r=t.__SENTRY__=t.__SENTRY__||{};return r[A]||(r[A]=j())}var k3=sh(),X7j=80;function Ay(A,j={}){if(!A)return"<unknown>";try{let e=A,t=5,r=[],a=0,n=0,o=" > ",i=o.length,s,l=Array.isArray(j)?j:j.keyAttrs,d=!Array.isArray(j)&&j.maxStringLength||X7j;for(;e&&a++<t&&(s=V7j(e,l),!(s==="html"||a>1&&n+r.length*i+s.length>=d));)r.push(s),n+=s.length,e=e.parentNode;return r.reverse().join(o)}catch{return"<unknown>"}}function V7j(A,j){let e=A,t=[],r,a,n,o,i;if(!e||!e.tagName)return"";if(k3.HTMLElement&&e instanceof HTMLElement&&e.dataset&&e.dataset.sentryComponent)return e.dataset.sentryComponent;t.push(e.tagName.toLowerCase());let s=j&&j.length?j.filter(d=>e.getAttribute(d)).map(d=>[d,e.getAttribute(d)]):null;if(s&&s.length)s.forEach(d=>{t.push(`[${d[0]}="${d[1]}"]`)});else if(e.id&&t.push(`#${e.id}`),r=e.className,r&&Ys(r))for(a=r.split(/\s+/),i=0;i<a.length;i++)t.push(`.${a[i]}`);let l=["aria-label","type","name","title","alt"];for(i=0;i<l.length;i++)n=l[i],o=e.getAttribute(n),o&&t.push(`[${n}="${o}"]`);return t.join("")}function u3(){try{return k3.document.location.href}catch{return""}}function p3(A){if(!k3.HTMLElement)return null;let j=A,e=5;for(let t=0;t<e;t++){if(!j)return null;if(j instanceof HTMLElement&&j.dataset.sentryComponent)return j.dataset.sentryComponent;j=j.parentNode}return null}var vu=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var W7j="Sentry Logger ",jy=["debug","info","warn","error","log","assert","trace"],tf={};function NE(A){if(!("console"in Jt))return A();let j=Jt.console,e={},t=Object.keys(tf);t.forEach(r=>{let a=tf[r];e[r]=j[r],j[r]=a});try{return A()}finally{t.forEach(r=>{j[r]=e[r]})}}function Y7j(){let A=!1,j={enable:()=>{A=!0},disable:()=>{A=!1},isEnabled:()=>A};return vu?jy.forEach(e=>{j[e]=(...t)=>{A&&NE(()=>{Jt.console[e](`${W7j}[${e}]:`,...t)})}}):jy.forEach(e=>{j[e]=()=>{}}),j}var xe=Y7j();var Q7j=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Z7j(A){return A==="http"||A==="https"}function Sc(A,j=!1){let{host:e,path:t,pass:r,port:a,projectId:n,protocol:o,publicKey:i}=A;return`${o}://${i}${j&&r?`:${r}`:""}@${e}${a?`:${a}`:""}/${t&&`${t}/`}${n}`}function uhA(A){let j=Q7j.exec(A);if(!j){NE(()=>{console.error(`Invalid Sentry Dsn: ${A}`)});return}let[e,t,r="",a,n="",o]=j.slice(1),i="",s=o,l=s.split("/");if(l.length>1&&(i=l.slice(0,-1).join("/"),s=l.pop()),s){let d=s.match(/^\d+/);d&&(s=d[0])}return phA({host:a,pass:r,path:i,projectId:s,port:n,protocol:e,publicKey:t})}function phA(A){return{protocol:A.protocol,publicKey:A.publicKey||"",pass:A.pass||"",host:A.host,port:A.port||"",path:A.path||"",projectId:A.projectId}}function Apj(A){if(!vu)return!0;let{port:j,projectId:e,protocol:t}=A;return["protocol","publicKey","host","projectId"].find(n=>A[n]?!1:(xe.error(`Invalid Sentry Dsn: ${n} missing`),!0))?!1:e.match(/^\d+$/)?Z7j(t)?j&&isNaN(parseInt(j,10))?(xe.error(`Invalid Sentry Dsn: Invalid port ${j}`),!1):!0:(xe.error(`Invalid Sentry Dsn: Invalid protocol ${t}`),!1):(xe.error(`Invalid Sentry Dsn: Invalid projectId ${e}`),!1)}function s4(A){let j=typeof A=="string"?uhA(A):phA(A);if(!(!j||!Apj(j)))return j}var Hi=class extends Error{constructor(j,e="warn"){super(j),this.message=j,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}};function T6(A,j,e){if(!(j in A))return;let t=A[j],r=e(t);typeof r=="function"&&l4(r,t),A[j]=r}function Ip(A,j,e){try{Object.defineProperty(A,j,{value:e,writable:!0,configurable:!0})}catch{vu&&xe.log(`Failed to add non-enumerable property "${j}" to object`,A)}}function l4(A,j){try{let e=j.prototype||{};A.prototype=j.prototype=e,Ip(A,"__sentry_original__",j)}catch{}}function lh(A){return A.__sentry_original__}function E3(A){return Object.keys(A).map(j=>`${encodeURIComponent(j)}=${encodeURIComponent(A[j])}`).join("&")}function c4(A){if(W0(A))return{message:A.message,name:A.name,stack:A.stack,...EhA(A)};if(ih(A)){let j={type:A.type,target:mhA(A.target),currentTarget:mhA(A.currentTarget),...EhA(A)};return typeof CustomEvent<"u"&&hu(A,CustomEvent)&&(j.detail=A.detail),j}else return A}function mhA(A){try{return i3(A)?Ay(A):Object.prototype.toString.call(A)}catch{return"<unknown>"}}function EhA(A){if(typeof A=="object"&&A!==null){let j={};for(let e in A)Object.prototype.hasOwnProperty.call(A,e)&&(j[e]=A[e]);return j}else return{}}function B3(A,j=40){let e=Object.keys(c4(A));if(e.sort(),!e.length)return"[object has no keys]";if(e[0].length>=j)return qu(e[0],j);for(let t=e.length;t>0;t--){let r=e.slice(0,t).join(", ");if(!(r.length>j))return t===e.length?r:qu(r,j)}return""}function ms(A){return m3(A,new Map)}function m3(A,j){if(jpj(A)){let e=j.get(A);if(e!==void 0)return e;let t={};j.set(A,t);for(let r of Object.keys(A))typeof A[r]<"u"&&(t[r]=m3(A[r],j));return t}if(Array.isArray(A)){let e=j.get(A);if(e!==void 0)return e;let t=[];return j.set(A,t),A.forEach(r=>{t.push(m3(r,j))}),t}return A}function jpj(A){if(!Kd(A))return!1;try{let j=Object.getPrototypeOf(A).constructor.name;return!j||j==="Object"}catch{return!0}}var hhA=50,BhA=/\(error: (.*)\)/,ghA=/captureMessage|captureException/;function d4(...A){let j=A.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,t=0)=>{let r=[],a=e.split(`
`);for(let n=t;n<a.length;n++){let o=a[n];if(o.length>1024)continue;let i=BhA.test(o)?o.replace(BhA,"$1"):o;if(!i.match(/\S*Error: /)){for(let s of j){let l=s(i);if(l){r.push(l);break}}if(r.length>=hhA)break}}return qhA(r)}}function h3(A){return Array.isArray(A)?d4(...A):A}function qhA(A){if(!A.length)return[];let j=Array.from(A);return/sentryWrapped/.test(j[j.length-1].function||"")&&j.pop(),j.reverse(),ghA.test(j[j.length-1].function||"")&&(j.pop(),ghA.test(j[j.length-1].function||"")&&j.pop()),j.slice(0,hhA).map(e=>({...e,filename:e.filename||j[j.length-1].filename,function:e.function||"?"}))}var g3="<anonymous>";function Mc(A){try{return!A||typeof A!="function"?g3:A.name||g3}catch{return g3}}var k4={},vhA={};function Qs(A,j){k4[A]=k4[A]||[],k4[A].push(j)}function Zs(A,j){vhA[A]||(j(),vhA[A]=!0)}function Po(A,j){let e=A&&k4[A];if(e)for(let t of e)try{t(j)}catch(r){vu&&xe.error(`Error while triggering instrumentation handler.
Type: ${A}
Name: ${Mc(t)}
Error:`,r)}}function q3(A){let j="console";Qs(j,A),Zs(j,epj)}function epj(){"console"in Jt&&jy.forEach(function(A){A in Jt.console&&T6(Jt.console,A,function(j){return tf[A]=j,function(...e){Po("console",{args:e,level:A});let r=tf[A];r&&r.apply(Jt.console,e)}})})}function lo(){let A=Jt,j=A.crypto||A.msCrypto,e=()=>Math.random()*16;try{if(j&&j.randomUUID)return j.randomUUID().replace(/-/g,"");j&&j.getRandomValues&&(e=()=>{let t=new Uint8Array(1);return j.getRandomValues(t),t[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,t=>(t^(e()&15)>>t/4).toString(16))}function xhA(A){return A.exception&&A.exception.values?A.exception.values[0]:void 0}function Sd(A){let{message:j,event_id:e}=A;if(j)return j;let t=xhA(A);return t?t.type&&t.value?`${t.type}: ${t.value}`:t.type||t.value||e||"<unknown>":e||"<unknown>"}function rf(A,j,e){let t=A.exception=A.exception||{},r=t.values=t.values||[],a=r[0]=r[0]||{};a.value||(a.value=j||""),a.type||(a.type=e||"Error")}function Dp(A,j){let e=xhA(A);if(!e)return;let t={type:"generic",handled:!0},r=e.mechanism;if(e.mechanism={...t,...r,...j},j&&"data"in j){let a={...r&&r.data,...j.data};e.mechanism.data=a}}function u4(A){if(A&&A.__sentry_captured__)return!0;try{Ip(A,"__sentry_captured__",!0)}catch{}return!1}function ey(A){return Array.isArray(A)?A:[A]}var af=Jt,tpj=1e3,fhA,v3,x3;function f3(A){let j="dom";Qs(j,A),Zs(j,rpj)}function rpj(){if(!af.document)return;let A=Po.bind(null,"dom"),j=GhA(A,!0);af.document.addEventListener("click",j,!1),af.document.addEventListener("keypress",j,!1),["EventTarget","Node"].forEach(e=>{let t=af[e]&&af[e].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty("addEventListener")||(T6(t,"addEventListener",function(r){return function(a,n,o){if(a==="click"||a=="keypress")try{let i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},l=s[a]=s[a]||{refCount:0};if(!l.handler){let d=GhA(A);l.handler=d,r.call(this,a,d,o)}l.refCount++}catch{}return r.call(this,a,n,o)}}),T6(t,"removeEventListener",function(r){return function(a,n,o){if(a==="click"||a=="keypress")try{let i=this,s=i.__sentry_instrumentation_handlers__||{},l=s[a];l&&(l.refCount--,l.refCount<=0&&(r.call(this,a,l.handler,o),l.handler=void 0,delete s[a]),Object.keys(s).length===0&&delete i.__sentry_instrumentation_handlers__)}catch{}return r.call(this,a,n,o)}}))})}function apj(A){if(A.type!==v3)return!1;try{if(!A.target||A.target._sentryId!==x3)return!1}catch{}return!0}function npj(A,j){return A!=="keypress"?!1:!j||!j.tagName?!0:!(j.tagName==="INPUT"||j.tagName==="TEXTAREA"||j.isContentEditable)}function GhA(A,j=!1){return e=>{if(!e||e._sentryCaptured)return;let t=opj(e);if(npj(e.type,t))return;Ip(e,"_sentryCaptured",!0),t&&!t._sentryId&&Ip(t,"_sentryId",lo());let r=e.type==="keypress"?"input":e.type;apj(e)||(A({event:e,name:r,global:j}),v3=e.type,x3=t?t._sentryId:void 0),clearTimeout(fhA),fhA=af.setTimeout(()=>{x3=void 0,v3=void 0},tpj)}}function opj(A){try{return A.target}catch{return null}}var G3=sh();function p4(){if(!("fetch"in G3))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function ty(A){return A&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(A.toString())}function F3(){if(typeof EdgeRuntime=="string")return!0;if(!p4())return!1;if(ty(G3.fetch))return!0;let A=!1,j=G3.document;if(j&&typeof j.createElement=="function")try{let e=j.createElement("iframe");e.hidden=!0,j.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(A=ty(e.contentWindow.fetch)),j.head.removeChild(e)}catch(e){vu&&xe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return A}function y3(A){let j="fetch";Qs(j,A),Zs(j,ipj)}function ipj(){F3()&&T6(Jt,"fetch",function(A){return function(...j){let{method:e,url:t}=spj(j),r={args:j,fetchData:{method:e,url:t},startTimestamp:Date.now()};return Po("fetch",{...r}),A.apply(Jt,j).then(a=>{let n={...r,endTimestamp:Date.now(),response:a};return Po("fetch",n),a},a=>{let n={...r,endTimestamp:Date.now(),error:a};throw Po("fetch",n),a})}})}function b3(A,j){return!!A&&typeof A=="object"&&!!A[j]}function FhA(A){return typeof A=="string"?A:A?b3(A,"url")?A.url:A.toString?A.toString():"":""}function spj(A){if(A.length===0)return{method:"GET",url:""};if(A.length===2){let[e,t]=A;return{url:FhA(e),method:b3(t,"method")?String(t.method).toUpperCase():"GET"}}let j=A[0];return{url:FhA(j),method:b3(j,"method")?String(j.method).toUpperCase():"GET"}}var m4=null;function $3(A){let j="error";Qs(j,A),Zs(j,lpj)}function lpj(){m4=Jt.onerror,Jt.onerror=function(A,j,e,t,r){return Po("error",{column:t,error:r,line:e,msg:A,url:j}),m4&&!m4.__SENTRY_LOADER__?m4.apply(this,arguments):!1},Jt.onerror.__SENTRY_INSTRUMENTED__=!0}var E4=null;function w3(A){let j="unhandledrejection";Qs(j,A),Zs(j,cpj)}function cpj(){E4=Jt.onunhandledrejection,Jt.onunhandledrejection=function(A){return Po("unhandledrejection",A),E4&&!E4.__SENTRY_LOADER__?E4.apply(this,arguments):!0},Jt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var B4=sh();function bhA(){let A=B4.chrome,j=A&&A.app&&A.app.runtime,e="history"in B4&&!!B4.history.pushState&&!!B4.history.replaceState;return!j&&e}var ry=Jt,g4;function ay(A){let j="history";Qs(j,A),Zs(j,dpj)}function dpj(){if(!bhA())return;let A=ry.onpopstate;ry.onpopstate=function(...e){let t=ry.location.href,r=g4;if(g4=t,Po("history",{from:r,to:t}),A)try{return A.apply(this,e)}catch{}};function j(e){return function(...t){let r=t.length>2?t[2]:void 0;if(r){let a=g4,n=String(r);g4=n,Po("history",{from:a,to:n})}return e.apply(this,t)}}T6(ry.history,"pushState",j),T6(ry.history,"replaceState",j)}var kpj=Jt,ch="__sentry_xhr_v3__";function I3(A){let j="xhr";Qs(j,A),Zs(j,upj)}function upj(){if(!kpj.XMLHttpRequest)return;let A=XMLHttpRequest.prototype;T6(A,"open",function(j){return function(...e){let t=Date.now(),r=Ys(e[0])?e[0].toUpperCase():void 0,a=ppj(e[1]);if(!r||!a)return j.apply(this,e);this[ch]={method:r,url:a,request_headers:{}},r==="POST"&&a.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let n=()=>{let o=this[ch];if(o&&this.readyState===4){try{o.status_code=this.status}catch{}let i={args:[r,a],endTimestamp:Date.now(),startTimestamp:t,xhr:this};Po("xhr",i)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?T6(this,"onreadystatechange",function(o){return function(...i){return n(),o.apply(this,i)}}):this.addEventListener("readystatechange",n),T6(this,"setRequestHeader",function(o){return function(...i){let[s,l]=i,d=this[ch];return d&&Ys(s)&&Ys(l)&&(d.request_headers[s.toLowerCase()]=l),o.apply(this,i)}}),j.apply(this,e)}}),T6(A,"send",function(j){return function(...e){let t=this[ch];if(!t)return j.apply(this,e);e[0]!==void 0&&(t.body=e[0]);let r={args:[t.method,t.url],startTimestamp:Date.now(),xhr:this};return Po("xhr",r),j.apply(this,e)}})}function ppj(A){if(Ys(A))return A;try{return A.toString()}catch{}}function D3(){return"npm"}function yhA(){let A=typeof WeakSet=="function",j=A?new WeakSet:[];function e(r){if(A)return j.has(r)?!0:(j.add(r),!1);for(let a=0;a<j.length;a++)if(j[a]===r)return!0;return j.push(r),!1}function t(r){if(A)j.delete(r);else for(let a=0;a<j.length;a++)if(j[a]===r){j.splice(a,1);break}}return[e,t]}function Md(A,j=100,e=1/0){try{return h4("",A,j,e)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function q4(A,j=3,e=100*1024){let t=Md(A,j);return gpj(t)>e?q4(A,j-1,e):t}function h4(A,j,e=1/0,t=1/0,r=yhA()){let[a,n]=r;if(j==null||["number","boolean","string"].includes(typeof j)&&!c3(j))return j;let o=mpj(A,j);if(!o.startsWith("[object "))return o;if(j.__sentry_skip_normalization__)return j;let i=typeof j.__sentry_override_normalization_depth__=="number"?j.__sentry_override_normalization_depth__:e;if(i===0)return o.replace("object ","");if(a(j))return"[Circular ~]";let s=j;if(s&&typeof s.toJSON=="function")try{let u=s.toJSON();return h4("",u,i-1,t,r)}catch{}let l=Array.isArray(j)?[]:{},d=0,k=c4(j);for(let u in k){if(!Object.prototype.hasOwnProperty.call(k,u))continue;if(d>=t){l[u]="[MaxProperties ~]";break}let m=k[u];l[u]=h4(u,m,i-1,t,r),d++}return n(j),l}function mpj(A,j){try{if(A==="domain"&&j&&typeof j=="object"&&j._events)return"[Domain]";if(A==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&j===global)return"[Global]";if(typeof window<"u"&&j===window)return"[Window]";if(typeof document<"u"&&j===document)return"[Document]";if(Y0(j))return"[VueViewModel]";if(l3(j))return"[SyntheticEvent]";if(typeof j=="number"&&j!==j)return"[NaN]";if(typeof j=="function")return`[Function: ${Mc(j)}]`;if(typeof j=="symbol")return`[${String(j)}]`;if(typeof j=="bigint")return`[BigInt: ${String(j)}]`;let e=Epj(j);return/^HTML(\w*)Element$/.test(e)?`[HTMLElement: ${e}]`:`[object ${e}]`}catch(e){return`**non-serializable** (${e})`}}function Epj(A){let j=Object.getPrototypeOf(A);return j?j.constructor.name:"null prototype"}function Bpj(A){return~-encodeURI(A).split(/%..|./).length}function gpj(A){return Bpj(JSON.stringify(A))}var Op;(function(A){A[A.PENDING=0]="PENDING";let e=1;A[A.RESOLVED=e]="RESOLVED";let t=2;A[A.REJECTED=t]="REJECTED"})(Op||(Op={}));function _d(A){return new Ul(j=>{j(A)})}function dh(A){return new Ul((j,e)=>{e(A)})}var Ul=class A{constructor(j){A.prototype.__init.call(this),A.prototype.__init2.call(this),A.prototype.__init3.call(this),A.prototype.__init4.call(this),this._state=Op.PENDING,this._handlers=[];try{j(this._resolve,this._reject)}catch(e){this._reject(e)}}then(j,e){return new A((t,r)=>{this._handlers.push([!1,a=>{if(!j)t(a);else try{t(j(a))}catch(n){r(n)}},a=>{if(!e)r(a);else try{t(e(a))}catch(n){r(n)}}]),this._executeHandlers()})}catch(j){return this.then(e=>e,j)}finally(j){return new A((e,t)=>{let r,a;return this.then(n=>{a=!1,r=n,j&&j()},n=>{a=!0,r=n,j&&j()}).then(()=>{if(a){t(r);return}e(r)})})}__init(){this._resolve=j=>{this._setResult(Op.RESOLVED,j)}}__init2(){this._reject=j=>{this._setResult(Op.REJECTED,j)}}__init3(){this._setResult=(j,e)=>{if(this._state===Op.PENDING){if(gu(e)){e.then(this._resolve,this._reject);return}this._state=j,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Op.PENDING)return;let j=this._handlers.slice();this._handlers=[],j.forEach(e=>{e[0]||(this._state===Op.RESOLVED&&e[1](this._value),this._state===Op.REJECTED&&e[2](this._value),e[0]=!0)})}}};function O3(A){let j=[];function e(){return A===void 0||j.length<A}function t(n){return j.splice(j.indexOf(n),1)[0]}function r(n){if(!e())return dh(new Hi("Not adding Promise because buffer limit was reached."));let o=n();return j.indexOf(o)===-1&&j.push(o),o.then(()=>t(o)).then(null,()=>t(o).then(null,()=>{})),o}function a(n){return new Ul((o,i)=>{let s=j.length;if(!s)return o(!0);let l=setTimeout(()=>{n&&n>0&&o(!1)},n);j.forEach(d=>{_d(d).then(()=>{--s||(clearTimeout(l),o(!0))},i)})})}return{$:j,add:r,drain:a}}function ny(A){if(!A)return{};let j=A.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!j)return{};let e=j[6]||"",t=j[8]||"";return{host:j[4],path:j[5],protocol:j[2],search:e,hash:t,relative:j[5]+e+t}}var $hA=["fatal","error","warning","log","info","debug"];function P3(A){return A==="warn"?"warning":$hA.includes(A)?A:"log"}var whA=1e3;function xu(){return Date.now()/whA}function hpj(){let{performance:A}=Jt;if(!A||!A.now)return xu;let j=Date.now()-A.now(),e=A.timeOrigin==null?j:A.timeOrigin;return()=>(e+A.now())/whA}var nf=hpj();var oy,qpj=(()=>{let{performance:A}=Jt;if(!A||!A.now){oy="none";return}let j=3600*1e3,e=A.now(),t=Date.now(),r=A.timeOrigin?Math.abs(A.timeOrigin+e-t):j,a=r<j,n=A.timing&&A.timing.navigationStart,i=typeof n=="number"?Math.abs(n+e-t):j,s=i<j;return a||s?r<=i?(oy="timeOrigin",A.timeOrigin):(oy="navigationStart",n):(oy="dateNow",t)})();function _c(A,j=[]){return[A,j]}function H3(A,j){let[e,t]=A;return[e,[...t,j]]}function v4(A,j){let e=A[1];for(let t of e){let r=t[0].type;if(j(t,r))return!0}return!1}function C3(A,j){return(j||new TextEncoder).encode(A)}function T3(A,j){let[e,t]=A,r=JSON.stringify(e);function a(n){typeof r=="string"?r=typeof n=="string"?r+n:[C3(r,j),n]:r.push(typeof n=="string"?C3(n,j):n)}for(let n of t){let[o,i]=n;if(a(`
${JSON.stringify(o)}
`),typeof i=="string"||i instanceof Uint8Array)a(i);else{let s;try{s=JSON.stringify(i)}catch{s=JSON.stringify(Md(i))}a(s)}}return typeof r=="string"?r:vpj(r)}function vpj(A){let j=A.reduce((r,a)=>r+a.length,0),e=new Uint8Array(j),t=0;for(let r of A)e.set(r,t),t+=r.length;return e}function K3(A,j){let e=typeof A.data=="string"?C3(A.data,j):A.data;return[ms({type:"attachment",length:e.length,filename:A.filename,content_type:A.contentType,attachment_type:A.attachmentType}),e]}var xpj={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function x4(A){return xpj[A]}function f4(A){if(!A||!A.sdk)return;let{name:j,version:e}=A.sdk;return{name:j,version:e}}function S3(A,j,e,t){let r=A.sdkProcessingMetadata&&A.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:A.event_id,sent_at:new Date().toISOString(),...j&&{sdk:j},...!!e&&t&&{dsn:Sc(t)},...r&&{trace:ms({...r})}}}function M3(A,j,e){let t=[{type:"client_report"},{timestamp:e||xu(),discarded_events:A}];return _c(j?{dsn:j}:{},[t])}function IhA(A,j=Date.now()){let e=parseInt(`${A}`,10);if(!isNaN(e))return e*1e3;let t=Date.parse(`${A}`);return isNaN(t)?6e4:t-j}function DhA(A,j){return A[j]||A.all||0}function _3(A,j,e=Date.now()){return DhA(A,j)>e}function L3(A,{statusCode:j,headers:e},t=Date.now()){let r={...A},a=e&&e["x-sentry-rate-limits"],n=e&&e["retry-after"];if(a)for(let o of a.trim().split(",")){let[i,s,,,l]=o.split(":",5),d=parseInt(i,10),k=(isNaN(d)?60:d)*1e3;if(!s)r.all=t+k;else for(let u of s.split(";"))u==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(r[u]=t+k):r[u]=t+k}else n?r.all=t+IhA(n,t):j===429&&(r.all=t+60*1e3);return r}function OhA(A,j){return A(j.stack||"",1)}function N3(A,j){let e={type:j.name||j.constructor.name,value:j.message},t=OhA(A,j);return t.length&&(e.stacktrace={frames:t}),e}var Aa=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var zE="production";function iy(){return Z0("globalEventProcessors",()=>[])}function z3(A){iy().push(A)}function of(A,j,e,t=0){return new Ul((r,a)=>{let n=A[t];if(j===null||typeof n!="function")r(j);else{let o=n({...j},e);Aa&&n.id&&o===null&&xe.log(`Event processor "${n.id}" dropped event`),gu(o)?o.then(i=>of(A,i,e,t+1).then(r)).then(null,a):of(A,o,e,t+1).then(r).then(null,a)}})}function G4(A){let j=nf(),e={sid:lo(),init:!0,timestamp:j,started:j,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>fpj(e)};return A&&Ld(e,A),e}function Ld(A,j={}){if(j.user&&(!A.ipAddress&&j.user.ip_address&&(A.ipAddress=j.user.ip_address),!A.did&&!j.did&&(A.did=j.user.id||j.user.email||j.user.username)),A.timestamp=j.timestamp||nf(),j.abnormal_mechanism&&(A.abnormal_mechanism=j.abnormal_mechanism),j.ignoreDuration&&(A.ignoreDuration=j.ignoreDuration),j.sid&&(A.sid=j.sid.length===32?j.sid:lo()),j.init!==void 0&&(A.init=j.init),!A.did&&j.did&&(A.did=`${j.did}`),typeof j.started=="number"&&(A.started=j.started),A.ignoreDuration)A.duration=void 0;else if(typeof j.duration=="number")A.duration=j.duration;else{let e=A.timestamp-A.started;A.duration=e>=0?e:0}j.release&&(A.release=j.release),j.environment&&(A.environment=j.environment),!A.ipAddress&&j.ipAddress&&(A.ipAddress=j.ipAddress),!A.userAgent&&j.userAgent&&(A.userAgent=j.userAgent),typeof j.errors=="number"&&(A.errors=j.errors),j.status&&(A.status=j.status)}function F4(A,j){let e={};j?e={status:j}:A.status==="ok"&&(e={status:"exited"}),Ld(A,e)}function fpj(A){return ms({sid:`${A.sid}`,init:A.init,started:new Date(A.started*1e3).toISOString(),timestamp:new Date(A.timestamp*1e3).toISOString(),status:A.status,errors:A.errors,did:typeof A.did=="number"||typeof A.did=="string"?`${A.did}`:void 0,duration:A.duration,abnormal_mechanism:A.abnormal_mechanism,attrs:{release:A.release,environment:A.environment,ip_address:A.ipAddress,user_agent:A.userAgent}})}var Gpj=1;function PhA(A){let{spanId:j,traceId:e}=A.spanContext(),{data:t,op:r,parent_span_id:a,status:n,tags:o,origin:i}=RE(A);return ms({data:t,op:r,parent_span_id:a,span_id:j,status:n,tags:o,trace_id:e,origin:i})}function RE(A){return Fpj(A)?A.getSpanJSON():typeof A.toJSON=="function"?A.toJSON():{}}function Fpj(A){return typeof A.getSpanJSON=="function"}function ChA(A){let{traceFlags:j}=A.spanContext();return!!(j&Gpj)}function ThA(A,j,e,t,r,a){let{normalizeDepth:n=3,normalizeMaxBreadth:o=1e3}=A,i={...j,event_id:j.event_id||e.event_id||lo(),timestamp:j.timestamp||xu()},s=e.integrations||A.integrations.map(S=>S.name);bpj(i,A),wpj(i,s),j.type===void 0&&ypj(i,A.stackParser);let l=Dpj(t,e.captureContext);e.mechanism&&Dp(i,e.mechanism);let d=r&&r.getEventProcessors?r.getEventProcessors():[],k=ShA().getScopeData();if(a){let S=a.getScopeData();R3(k,S)}if(l){let S=l.getScopeData();R3(k,S)}let u=[...e.attachments||[],...k.attachments];u.length&&(e.attachments=u),b4(i,k);let m=[...d,...iy(),...k.eventProcessors];return of(m,i,e).then(S=>(S&&$pj(S),typeof n=="number"&&n>0?Ipj(S,n,o):S))}function bpj(A,j){let{environment:e,release:t,dist:r,maxValueLength:a=250}=j;"environment"in A||(A.environment="environment"in j?e:zE),A.release===void 0&&t!==void 0&&(A.release=t),A.dist===void 0&&r!==void 0&&(A.dist=r),A.message&&(A.message=qu(A.message,a));let n=A.exception&&A.exception.values&&A.exception.values[0];n&&n.value&&(n.value=qu(n.value,a));let o=A.request;o&&o.url&&(o.url=qu(o.url,a))}var HhA=new WeakMap;function ypj(A,j){let e=Jt._sentryDebugIds;if(!e)return;let t,r=HhA.get(j);r?t=r:(t=new Map,HhA.set(j,t));let a=Object.keys(e).reduce((n,o)=>{let i,s=t.get(o);s?i=s:(i=j(o),t.set(o,i));for(let l=i.length-1;l>=0;l--){let d=i[l];if(d.filename){n[d.filename]=e[o];break}}return n},{});try{A.exception.values.forEach(n=>{n.stacktrace.frames.forEach(o=>{o.filename&&(o.debug_id=a[o.filename])})})}catch{}}function $pj(A){let j={};try{A.exception.values.forEach(t=>{t.stacktrace.frames.forEach(r=>{r.debug_id&&(r.abs_path?j[r.abs_path]=r.debug_id:r.filename&&(j[r.filename]=r.debug_id),delete r.debug_id)})})}catch{}if(Object.keys(j).length===0)return;A.debug_meta=A.debug_meta||{},A.debug_meta.images=A.debug_meta.images||[];let e=A.debug_meta.images;Object.keys(j).forEach(t=>{e.push({type:"sourcemap",code_file:t,debug_id:j[t]})})}function wpj(A,j){j.length>0&&(A.sdk=A.sdk||{},A.sdk.integrations=[...A.sdk.integrations||[],...j])}function Ipj(A,j,e){if(!A)return null;let t={...A,...A.breadcrumbs&&{breadcrumbs:A.breadcrumbs.map(r=>({...r,...r.data&&{data:Md(r.data,j,e)}}))},...A.user&&{user:Md(A.user,j,e)},...A.contexts&&{contexts:Md(A.contexts,j,e)},...A.extra&&{extra:Md(A.extra,j,e)}};return A.contexts&&A.contexts.trace&&t.contexts&&(t.contexts.trace=A.contexts.trace,A.contexts.trace.data&&(t.contexts.trace.data=Md(A.contexts.trace.data,j,e))),A.spans&&(t.spans=A.spans.map(r=>{let a=RE(r).data;return a&&(r.data=Md(a,j,e)),r})),t}function Dpj(A,j){if(!j)return A;let e=A?A.clone():new fu;return e.update(j),e}function KhA(A){if(A)return Opj(A)?{captureContext:A}:Cpj(A)?{captureContext:A}:A}function Opj(A){return A instanceof fu||typeof A=="function"}var Ppj=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Cpj(A){return Object.keys(A).some(j=>Ppj.includes(j))}function sf(A,j){return Al().captureException(A,KhA(j))}function sy(A,j){return Al().captureEvent(A,j)}function Gu(A,j){Al().addBreadcrumb(A,j)}function lf(...A){let j=Al();if(A.length===2){let[e,t]=A;return e?j.withScope(()=>(j.getStackTop().scope=e,t(e))):j.withScope(t)}return j.withScope(A[0])}function En(){return Al().getClient()}function Pp(){return Al().getScope()}function ly(A){let j=En(),e=cf(),t=Pp(),{release:r,environment:a=zE}=j&&j.getOptions()||{},{userAgent:n}=Jt.navigator||{},o=G4({release:r,environment:a,user:t.getUser()||e.getUser(),...n&&{userAgent:n},...A}),i=e.getSession();return i&&i.status==="ok"&&Ld(i,{status:"exited"}),y4(),e.setSession(o),t.setSession(o),o}function y4(){let A=cf(),j=Pp(),e=j.getSession()||A.getSession();e&&F4(e),MhA(),A.setSession(),j.setSession()}function MhA(){let A=cf(),j=Pp(),e=En(),t=j.getSession()||A.getSession();t&&e&&e.captureSession&&e.captureSession(t)}function cy(A=!1){if(A){y4();return}MhA()}function $4(A){return A.transaction}function J3(A,j,e){let t=j.getOptions(),{publicKey:r}=j.getDsn()||{},{segment:a}=e&&e.getUser()||{},n=ms({environment:t.environment||zE,release:t.release,user_segment:a,public_key:r,trace_id:A});return j.emit&&j.emit("createDsc",n),n}function _hA(A){let j=En();if(!j)return{};let e=J3(RE(A).trace_id||"",j,Pp()),t=$4(A);if(!t)return e;let r=t&&t._frozenDynamicSamplingContext;if(r)return r;let{sampleRate:a,source:n}=t.metadata;a!=null&&(e.sample_rate=`${a}`);let o=RE(t);return n&&n!=="url"&&(e.transaction=o.description),e.sampled=String(ChA(t)),j.emit&&j.emit("createDsc",e),e}function b4(A,j){let{fingerprint:e,span:t,breadcrumbs:r,sdkProcessingMetadata:a}=j;Hpj(A,j),t&&Spj(A,t),Mpj(A,e),Tpj(A,r),Kpj(A,a)}function R3(A,j){let{extra:e,tags:t,user:r,contexts:a,level:n,sdkProcessingMetadata:o,breadcrumbs:i,fingerprint:s,eventProcessors:l,attachments:d,propagationContext:k,transactionName:u,span:m}=j;dy(A,"extra",e),dy(A,"tags",t),dy(A,"user",r),dy(A,"contexts",a),dy(A,"sdkProcessingMetadata",o),n&&(A.level=n),u&&(A.transactionName=u),m&&(A.span=m),i.length&&(A.breadcrumbs=[...A.breadcrumbs,...i]),s.length&&(A.fingerprint=[...A.fingerprint,...s]),l.length&&(A.eventProcessors=[...A.eventProcessors,...l]),d.length&&(A.attachments=[...A.attachments,...d]),A.propagationContext={...A.propagationContext,...k}}function dy(A,j,e){if(e&&Object.keys(e).length){A[j]={...A[j]};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[j][t]=e[t])}}function Hpj(A,j){let{extra:e,tags:t,user:r,contexts:a,level:n,transactionName:o}=j,i=ms(e);i&&Object.keys(i).length&&(A.extra={...i,...A.extra});let s=ms(t);s&&Object.keys(s).length&&(A.tags={...s,...A.tags});let l=ms(r);l&&Object.keys(l).length&&(A.user={...l,...A.user});let d=ms(a);d&&Object.keys(d).length&&(A.contexts={...d,...A.contexts}),n&&(A.level=n),o&&(A.transaction=o)}function Tpj(A,j){let e=[...A.breadcrumbs||[],...j];A.breadcrumbs=e.length?e:void 0}function Kpj(A,j){A.sdkProcessingMetadata={...A.sdkProcessingMetadata,...j}}function Spj(A,j){A.contexts={trace:PhA(j),...A.contexts};let e=$4(j);if(e){A.sdkProcessingMetadata={dynamicSamplingContext:_hA(j),...A.sdkProcessingMetadata};let t=RE(e).description;t&&(A.tags={transaction:t,...A.tags})}}function Mpj(A,j){A.fingerprint=A.fingerprint?ey(A.fingerprint):[],j&&(A.fingerprint=A.fingerprint.concat(j)),A.fingerprint&&!A.fingerprint.length&&delete A.fingerprint}var _pj=100,U3,fu=class A{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=LhA()}static clone(j){return j?j.clone():new A}clone(){let j=new A;return j._breadcrumbs=[...this._breadcrumbs],j._tags={...this._tags},j._extra={...this._extra},j._contexts={...this._contexts},j._user=this._user,j._level=this._level,j._span=this._span,j._session=this._session,j._transactionName=this._transactionName,j._fingerprint=this._fingerprint,j._eventProcessors=[...this._eventProcessors],j._requestSession=this._requestSession,j._attachments=[...this._attachments],j._sdkProcessingMetadata={...this._sdkProcessingMetadata},j._propagationContext={...this._propagationContext},j._client=this._client,j}setClient(j){this._client=j}getClient(){return this._client}addScopeListener(j){this._scopeListeners.push(j)}addEventProcessor(j){return this._eventProcessors.push(j),this}setUser(j){return this._user=j||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Ld(this._session,{user:j}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(j){return this._requestSession=j,this}setTags(j){return this._tags={...this._tags,...j},this._notifyScopeListeners(),this}setTag(j,e){return this._tags={...this._tags,[j]:e},this._notifyScopeListeners(),this}setExtras(j){return this._extra={...this._extra,...j},this._notifyScopeListeners(),this}setExtra(j,e){return this._extra={...this._extra,[j]:e},this._notifyScopeListeners(),this}setFingerprint(j){return this._fingerprint=j,this._notifyScopeListeners(),this}setLevel(j){return this._level=j,this._notifyScopeListeners(),this}setTransactionName(j){return this._transactionName=j,this._notifyScopeListeners(),this}setContext(j,e){return e===null?delete this._contexts[j]:this._contexts[j]=e,this._notifyScopeListeners(),this}setSpan(j){return this._span=j,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let j=this._span;return j&&j.transaction}setSession(j){return j?this._session=j:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(j){if(!j)return this;let e=typeof j=="function"?j(this):j;if(e instanceof A){let t=e.getScopeData();this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&Object.keys(t.user).length&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint.length&&(this._fingerprint=t.fingerprint),e.getRequestSession()&&(this._requestSession=e.getRequestSession()),t.propagationContext&&(this._propagationContext=t.propagationContext)}else if(Kd(e)){let t=j;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=LhA(),this}addBreadcrumb(j,e){let t=typeof e=="number"?e:_pj;if(t<=0)return this;let r={timestamp:xu(),...j},a=this._breadcrumbs;return a.push(r),this._breadcrumbs=a.length>t?a.slice(-t):a,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(j){return this._attachments.push(j),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:j,_attachments:e,_contexts:t,_tags:r,_extra:a,_user:n,_level:o,_fingerprint:i,_eventProcessors:s,_propagationContext:l,_sdkProcessingMetadata:d,_transactionName:k,_span:u}=this;return{breadcrumbs:j,attachments:e,contexts:t,tags:r,extra:a,user:n,level:o,fingerprint:i||[],eventProcessors:s,propagationContext:l,sdkProcessingMetadata:d,transactionName:k,span:u}}applyToEvent(j,e={},t=[]){b4(j,this.getScopeData());let r=[...t,...iy(),...this._eventProcessors];return of(r,j,e)}setSDKProcessingMetadata(j){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...j},this}setPropagationContext(j){return this._propagationContext=j,this}getPropagationContext(){return this._propagationContext}captureException(j,e){let t=e&&e.event_id?e.event_id:lo();if(!this._client)return xe.warn("No client configured on scope - will not capture exception!"),t;let r=new Error("Sentry syntheticException");return this._client.captureException(j,{originalException:j,syntheticException:r,...e,event_id:t},this),t}captureMessage(j,e,t){let r=t&&t.event_id?t.event_id:lo();if(!this._client)return xe.warn("No client configured on scope - will not capture message!"),r;let a=new Error(j);return this._client.captureMessage(j,e,{originalException:j,syntheticException:a,...t,event_id:r},this),r}captureEvent(j,e){let t=e&&e.event_id?e.event_id:lo();return this._client?(this._client.captureEvent(j,{...e,event_id:t},this),t):(xe.warn("No client configured on scope - will not capture event!"),t)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(j=>{j(this)}),this._notifyingListeners=!1)}};function ShA(){return U3||(U3=new fu),U3}function LhA(){return{traceId:lo(),spanId:lo().substring(16)}}var df="7.119.1";var NhA=parseFloat(df),Lpj=100,ky=class{constructor(j,e,t,r=NhA){this._version=r;let a;e?a=e:(a=new fu,a.setClient(j));let n;t?n=t:(n=new fu,n.setClient(j)),this._stack=[{scope:a}],j&&this.bindClient(j),this._isolationScope=n}isOlderThan(j){return this._version<j}bindClient(j){let e=this.getStackTop();e.client=j,e.scope.setClient(j),j&&j.setupIntegrations&&j.setupIntegrations()}pushScope(){let j=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:j}),j}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(j){let e=this.pushScope(),t;try{t=j(e)}catch(r){throw this.popScope(),r}return gu(t)?t.then(r=>(this.popScope(),r),r=>{throw this.popScope(),r}):(this.popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(j,e){let t=this._lastEventId=e&&e.event_id?e.event_id:lo(),r=new Error("Sentry syntheticException");return this.getScope().captureException(j,{originalException:j,syntheticException:r,...e,event_id:t}),t}captureMessage(j,e,t){let r=this._lastEventId=t&&t.event_id?t.event_id:lo(),a=new Error(j);return this.getScope().captureMessage(j,e,{originalException:j,syntheticException:a,...t,event_id:r}),r}captureEvent(j,e){let t=e&&e.event_id?e.event_id:lo();return j.type||(this._lastEventId=t),this.getScope().captureEvent(j,{...e,event_id:t}),t}lastEventId(){return this._lastEventId}addBreadcrumb(j,e){let{scope:t,client:r}=this.getStackTop();if(!r)return;let{beforeBreadcrumb:a=null,maxBreadcrumbs:n=Lpj}=r.getOptions&&r.getOptions()||{};if(n<=0)return;let i={timestamp:xu(),...j},s=a?NE(()=>a(i,e)):i;s!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",s,e),t.addBreadcrumb(s,n))}setUser(j){this.getScope().setUser(j),this.getIsolationScope().setUser(j)}setTags(j){this.getScope().setTags(j),this.getIsolationScope().setTags(j)}setExtras(j){this.getScope().setExtras(j),this.getIsolationScope().setExtras(j)}setTag(j,e){this.getScope().setTag(j,e),this.getIsolationScope().setTag(j,e)}setExtra(j,e){this.getScope().setExtra(j,e),this.getIsolationScope().setExtra(j,e)}setContext(j,e){this.getScope().setContext(j,e),this.getIsolationScope().setContext(j,e)}configureScope(j){let{scope:e,client:t}=this.getStackTop();t&&j(e)}run(j){let e=X3(this);try{j(this)}finally{X3(e)}}getIntegration(j){let e=this.getClient();if(!e)return null;try{return e.getIntegration(j)}catch{return Aa&&xe.warn(`Cannot retrieve integration ${j.id} from the current Hub`),null}}startTransaction(j,e){let t=this._callExtensionMethod("startTransaction",j,e);return Aa&&!t&&(this.getClient()?xe.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):xe.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),t}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(j=!1){if(j)return this.endSession();this._sendSessionUpdate()}endSession(){let e=this.getStackTop().scope,t=e.getSession();t&&F4(t),this._sendSessionUpdate(),e.setSession()}startSession(j){let{scope:e,client:t}=this.getStackTop(),{release:r,environment:a=zE}=t&&t.getOptions()||{},{userAgent:n}=Jt.navigator||{},o=G4({release:r,environment:a,user:e.getUser(),...n&&{userAgent:n},...j}),i=e.getSession&&e.getSession();return i&&i.status==="ok"&&Ld(i,{status:"exited"}),this.endSession(),e.setSession(o),o}shouldSendDefaultPii(){let j=this.getClient(),e=j&&j.getOptions();return!!(e&&e.sendDefaultPii)}_sendSessionUpdate(){let{scope:j,client:e}=this.getStackTop(),t=j.getSession();t&&e&&e.captureSession&&e.captureSession(t)}_callExtensionMethod(j,...e){let r=I4().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[j]=="function")return r.extensions[j].apply(this,e);Aa&&xe.warn(`Extension method ${j} couldn't be found, doing nothing.`)}};function I4(){return Jt.__SENTRY__=Jt.__SENTRY__||{extensions:{},hub:void 0},Jt}function X3(A){let j=I4(),e=w4(j);return zhA(j,A),e}function Al(){let A=I4();if(A.__SENTRY__&&A.__SENTRY__.acs){let j=A.__SENTRY__.acs.getCurrentHub();if(j)return j}return Npj(A)}function cf(){return Al().getIsolationScope()}function Npj(A=I4()){return(!zpj(A)||w4(A).isOlderThan(NhA))&&zhA(A,new ky),w4(A)}function zpj(A){return!!(A&&A.__SENTRY__&&A.__SENTRY__.hub)}function w4(A){return Z0("hub",()=>new ky,A)}function zhA(A,j){if(!A)return!1;let e=A.__SENTRY__=A.__SENTRY__||{};return e.hub=j,!0}function Rpj(A,j){return j&&(A.sdk=A.sdk||{},A.sdk.name=A.sdk.name||j.name,A.sdk.version=A.sdk.version||j.version,A.sdk.integrations=[...A.sdk.integrations||[],...j.integrations||[]],A.sdk.packages=[...A.sdk.packages||[],...j.packages||[]]),A}function RhA(A,j,e,t){let r=f4(e),a={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!t&&j&&{dsn:Sc(j)}},n="aggregates"in A?[{type:"sessions"},A]:[{type:"session"},A.toJSON()];return _c(a,[n])}function JhA(A,j,e,t){let r=f4(e),a=A.type&&A.type!=="replay_event"?A.type:"event";Rpj(A,e&&e.sdk);let n=S3(A,r,t,j);return delete A.sdkProcessingMetadata,_c(n,[[{type:a},A]])}var Jpj="7";function Upj(A){let j=A.protocol?`${A.protocol}:`:"",e=A.port?`:${A.port}`:"";return`${j}//${A.host}${e}${A.path?`/${A.path}`:""}/api/`}function Xpj(A){return`${Upj(A)}${A.projectId}/envelope/`}function Vpj(A,j){return E3({sentry_key:A.publicKey,sentry_version:Jpj,...j&&{sentry_client:`${j.name}/${j.version}`}})}function UhA(A,j={}){let e=typeof j=="string"?j:j.tunnel,t=typeof j=="string"||!j._metadata?void 0:j._metadata.sdk;return e||`${Xpj(A)}?${Vpj(A,t)}`}var XhA=[];function Wpj(A){let j={};return A.forEach(e=>{let{name:t}=e,r=j[t];r&&!r.isDefaultInstance&&e.isDefaultInstance||(j[t]=e)}),Object.keys(j).map(e=>j[e])}function V3(A){let j=A.defaultIntegrations||[],e=A.integrations;j.forEach(n=>{n.isDefaultInstance=!0});let t;Array.isArray(e)?t=[...j,...e]:typeof e=="function"?t=ey(e(j)):t=j;let r=Wpj(t),a=Ypj(r,n=>n.name==="Debug");if(a!==-1){let[n]=r.splice(a,1);r.push(n)}return r}function VhA(A,j){let e={};return j.forEach(t=>{t&&Y3(A,t,e)}),e}function W3(A,j){for(let e of j)e&&e.afterAllSetup&&e.afterAllSetup(A)}function Y3(A,j,e){if(e[j.name]){Aa&&xe.log(`Integration skipped because it was already installed: ${j.name}`);return}if(e[j.name]=j,XhA.indexOf(j.name)===-1&&(j.setupOnce(z3,Al),XhA.push(j.name)),j.setup&&typeof j.setup=="function"&&j.setup(A),A.on&&typeof j.preprocessEvent=="function"){let t=j.preprocessEvent.bind(j);A.on("preprocessEvent",(r,a)=>t(r,a,A))}if(A.addEventProcessor&&typeof j.processEvent=="function"){let t=j.processEvent.bind(j),r=Object.assign((a,n)=>t(a,n,A),{id:j.name});A.addEventProcessor(r)}Aa&&xe.log(`Integration installed: ${j.name}`)}function Ypj(A,j){for(let e=0;e<A.length;e++)if(j(A[e])===!0)return e;return-1}function Cn(A,j){return Object.assign(function(...t){return j(...t)},{id:A})}function WhA(A){let j="";for(let e of A){let t=Object.entries(e.tags),r=t.length>0?`|#${t.map(([a,n])=>`${a}:${n}`).join(",")}`:"";j+=`${e.name}@${e.unit}:${e.metric}|${e.metricType}${r}|T${e.timestamp}
`}return j}function YhA(A,j,e,t){let r={sent_at:new Date().toISOString()};e&&e.sdk&&(r.sdk={name:e.sdk.name,version:e.sdk.version}),t&&j&&(r.dsn=Sc(j));let a=Qpj(A);return _c(r,[a])}function Qpj(A){let j=WhA(A);return[{type:"statsd",length:j.length},j]}var QhA="Not capturing exception because it's already been captured.",uy=class{constructor(j){if(this._options=j,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],j.dsn?this._dsn=s4(j.dsn):Aa&&xe.warn("No DSN provided, client will not send events."),this._dsn){let e=UhA(this._dsn,j);this._transport=j.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...j.transportOptions,url:e})}}captureException(j,e,t){if(u4(j)){Aa&&xe.log(QhA);return}let r=e&&e.event_id;return this._process(this.eventFromException(j,e).then(a=>this._captureEvent(a,e,t)).then(a=>{r=a})),r}captureMessage(j,e,t,r){let a=t&&t.event_id,n=jf(j)?j:String(j),o=oh(j)?this.eventFromMessage(n,e,t):this.eventFromException(j,t);return this._process(o.then(i=>this._captureEvent(i,t,r)).then(i=>{a=i})),a}captureEvent(j,e,t){if(e&&e.originalException&&u4(e.originalException)){Aa&&xe.log(QhA);return}let r=e&&e.event_id,n=(j.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(j,e,n||t).then(o=>{r=o})),r}captureSession(j){typeof j.release!="string"?Aa&&xe.warn("Discarded session because of missing or non-string release"):(this.sendSession(j),Ld(j,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(j){let e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(j).then(t=>e.flush(j).then(r=>t&&r))):_d(!0)}close(j){return this.flush(j).then(e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(j){this._eventProcessors.push(j)}setupIntegrations(j){(j&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(j){return this.getIntegrationByName(j)}getIntegrationByName(j){return this._integrations[j]}getIntegration(j){try{return this._integrations[j.id]||null}catch{return Aa&&xe.warn(`Cannot retrieve integration ${j.id} from the current Client`),null}}addIntegration(j){let e=this._integrations[j.name];Y3(this,j,this._integrations),e||W3(this,[j])}sendEvent(j,e={}){this.emit("beforeSendEvent",j,e);let t=JhA(j,this._dsn,this._options._metadata,this._options.tunnel);for(let a of e.attachments||[])t=H3(t,K3(a,this._options.transportOptions&&this._options.transportOptions.textEncoder));let r=this._sendEnvelope(t);r&&r.then(a=>this.emit("afterSendEvent",j,a),null)}sendSession(j){let e=RhA(j,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(j,e,t){if(this._options.sendClientReports){let r=typeof t=="number"?t:1,a=`${j}:${e}`;Aa&&xe.log(`Recording outcome: "${a}"${r>1?` (${r} times)`:""}`),this._outcomes[a]=(this._outcomes[a]||0)+r}}captureAggregateMetrics(j){Aa&&xe.log(`Flushing aggregated metrics, number of metrics: ${j.length}`);let e=YhA(j,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(j,e){this._hooks[j]||(this._hooks[j]=[]),this._hooks[j].push(e)}emit(j,...e){this._hooks[j]&&this._hooks[j].forEach(t=>t(...e))}_setupIntegrations(){let{integrations:j}=this._options;this._integrations=VhA(this,j),W3(this,j),this._integrationsInitialized=!0}_updateSessionFromEvent(j,e){let t=!1,r=!1,a=e.exception&&e.exception.values;if(a){r=!0;for(let i of a){let s=i.mechanism;if(s&&s.handled===!1){t=!0;break}}}let n=j.status==="ok";(n&&j.errors===0||n&&t)&&(Ld(j,{...t&&{status:"crashed"},errors:j.errors||Number(r||t)}),this.captureSession(j))}_isClientDoneProcessing(j){return new Ul(e=>{let t=0,r=1,a=setInterval(()=>{this._numProcessing==0?(clearInterval(a),e(!0)):(t+=r,j&&t>=j&&(clearInterval(a),e(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(j,e,t,r=cf()){let a=this.getOptions(),n=Object.keys(this._integrations);return!e.integrations&&n.length>0&&(e.integrations=n),this.emit("preprocessEvent",j,e),ThA(a,j,e,t,this,r).then(o=>{if(o===null)return o;let i={...r.getPropagationContext(),...t?t.getPropagationContext():void 0};if(!(o.contexts&&o.contexts.trace)&&i){let{traceId:l,spanId:d,parentSpanId:k,dsc:u}=i;o.contexts={trace:{trace_id:l,span_id:d,parent_span_id:k},...o.contexts};let m=u||J3(l,this,t);o.sdkProcessingMetadata={dynamicSamplingContext:m,...o.sdkProcessingMetadata}}return o})}_captureEvent(j,e={},t){return this._processEvent(j,e,t).then(r=>r.event_id,r=>{if(Aa){let a=r;a.logLevel==="log"?xe.log(a.message):xe.warn(a)}})}_processEvent(j,e,t){let r=this.getOptions(),{sampleRate:a}=r,n=AqA(j),o=ZhA(j),i=j.type||"error",s=`before send for type \`${i}\``;if(o&&typeof a=="number"&&Math.random()>a)return this.recordDroppedEvent("sample_rate","error",j),dh(new Hi(`Discarding event because it's not included in the random sample (sampling rate = ${a})`,"log"));let l=i==="replay_event"?"replay":i,k=(j.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(j,e,t,k).then(u=>{if(u===null)throw this.recordDroppedEvent("event_processor",l,j),new Hi("An event processor returned `null`, will not send event.","log");if(e.data&&e.data.__sentry__===!0)return u;let I=Amj(r,u,e);return Zpj(I,s)}).then(u=>{if(u===null){if(this.recordDroppedEvent("before_send",l,j),n){let f=1+(j.spans||[]).length;this.recordDroppedEvent("before_send","span",f)}throw new Hi(`${s} returned \`null\`, will not send event.`,"log")}let m=t&&t.getSession();if(!n&&m&&this._updateSessionFromEvent(m,u),n){let S=u.sdkProcessingMetadata&&u.sdkProcessingMetadata.spanCountBeforeProcessing||0,f=u.spans?u.spans.length:0,v=S-f;v>0&&this.recordDroppedEvent("before_send","span",v)}let I=u.transaction_info;if(n&&I&&u.transaction!==j.transaction){let S="custom";u.transaction_info={...I,source:S}}return this.sendEvent(u,e),u}).then(null,u=>{throw u instanceof Hi?u:(this.captureException(u,{data:{__sentry__:!0},originalException:u}),new Hi(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${u}`))})}_process(j){this._numProcessing++,j.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_sendEnvelope(j){if(this.emit("beforeEnvelope",j),this._isEnabled()&&this._transport)return this._transport.send(j).then(null,e=>{Aa&&xe.error("Error while sending event:",e)});Aa&&xe.error("Transport disabled")}_clearOutcomes(){let j=this._outcomes;return this._outcomes={},Object.keys(j).map(e=>{let[t,r]=e.split(":");return{reason:t,category:r,quantity:j[e]}})}};function Zpj(A,j){let e=`${j} must return \`null\` or a valid event.`;if(gu(A))return A.then(t=>{if(!Kd(t)&&t!==null)throw new Hi(e);return t},t=>{throw new Hi(`${j} rejected with ${t}`)});if(!Kd(A)&&A!==null)throw new Hi(e);return A}function Amj(A,j,e){let{beforeSend:t,beforeSendTransaction:r}=A;if(ZhA(j)&&t)return t(j,e);if(AqA(j)&&r){if(j.spans){let a=j.spans.length;j.sdkProcessingMetadata={...j.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return r(j,e)}return j}function ZhA(A){return A.type===void 0}function AqA(A){return A.type==="transaction"}function Q3(A,j){j.debug===!0&&(Aa?xe.enable():NE(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Pp().update(j.initialScope);let t=new A(j);Z3(t),jmj(t)}function Z3(A){let e=Al().getStackTop();e.client=A,e.scope.setClient(A)}function jmj(A){A.init?A.init():A.setupIntegrations&&A.setupIntegrations()}var emj=30;function kf(A,j,e=O3(A.bufferSize||emj)){let t={},r=n=>e.drain(n);function a(n){let o=[];if(v4(n,(d,k)=>{let u=x4(k);if(_3(t,u)){let m=jqA(d,k);A.recordDroppedEvent("ratelimit_backoff",u,m)}else o.push(d)}),o.length===0)return _d();let i=_c(n[0],o),s=d=>{v4(i,(k,u)=>{let m=jqA(k,u);A.recordDroppedEvent(d,x4(u),m)})},l=()=>j({body:T3(i,A.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Aa&&xe.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),t=L3(t,d),d),d=>{throw s("network_error"),d});return e.add(l).then(d=>d,d=>{if(d instanceof Hi)return Aa&&xe.error("Skipped sending event because buffer is full."),s("queue_overflow"),_d();throw d})}return a.__sentry__baseTransport__=!0,{send:a,flush:r}}function jqA(A,j){if(!(j!=="event"&&j!=="transaction"))return Array.isArray(A)?A[1]:void 0}function AL(A,j,e=[j],t="npm"){let r=A._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${j}`,packages:e.map(a=>({name:`${t}:@sentry/${a}`,version:df})),version:df}),A._metadata=r}var tmj=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],rmj=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],eqA="InboundFilters",amj=(A={})=>({name:eqA,setupOnce(){},processEvent(j,e,t){let r=t.getOptions(),a=nmj(A,r);return omj(j,a)?null:j}}),py=amj,O4=Cn(eqA,py);function nmj(A={},j={}){return{allowUrls:[...A.allowUrls||[],...j.allowUrls||[]],denyUrls:[...A.denyUrls||[],...j.denyUrls||[]],ignoreErrors:[...A.ignoreErrors||[],...j.ignoreErrors||[],...A.disableErrorDefaults?[]:tmj],ignoreTransactions:[...A.ignoreTransactions||[],...j.ignoreTransactions||[],...A.disableTransactionDefaults?[]:rmj],ignoreInternal:A.ignoreInternal!==void 0?A.ignoreInternal:!0}}function omj(A,j){return j.ignoreInternal&&kmj(A)?(Aa&&xe.warn(`Event dropped due to being internal Sentry Error.
Event: ${Sd(A)}`),!0):imj(A,j.ignoreErrors)?(Aa&&xe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Sd(A)}`),!0):smj(A,j.ignoreTransactions)?(Aa&&xe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Sd(A)}`),!0):lmj(A,j.denyUrls)?(Aa&&xe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Sd(A)}.
Url: ${D4(A)}`),!0):cmj(A,j.allowUrls)?!1:(Aa&&xe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Sd(A)}.
Url: ${D4(A)}`),!0)}function imj(A,j){return A.type||!j||!j.length?!1:dmj(A).some(e=>ef(e,j))}function smj(A,j){if(A.type!=="transaction"||!j||!j.length)return!1;let e=A.transaction;return e?ef(e,j):!1}function lmj(A,j){if(!j||!j.length)return!1;let e=D4(A);return e?ef(e,j):!1}function cmj(A,j){if(!j||!j.length)return!0;let e=D4(A);return e?ef(e,j):!0}function dmj(A){let j=[];A.message&&j.push(A.message);let e;try{e=A.exception.values[A.exception.values.length-1]}catch{}return e&&e.value&&(j.push(e.value),e.type&&j.push(`${e.type}: ${e.value}`)),Aa&&j.length===0&&xe.error(`Could not extract message for event ${Sd(A)}`),j}function kmj(A){try{return A.exception.values[0].type==="SentryError"}catch{}return!1}function umj(A=[]){for(let j=A.length-1;j>=0;j--){let e=A[j];if(e&&e.filename!=="<anonymous>"&&e.filename!=="[native code]")return e.filename||null}return null}function D4(A){try{let j;try{j=A.exception.values[0].stacktrace.frames}catch{}return j?umj(j):null}catch{return Aa&&xe.error(`Cannot extract url for event ${Sd(A)}`),null}}var tqA,aqA="FunctionToString",rqA=new WeakMap,pmj=()=>({name:aqA,setupOnce(){tqA=Function.prototype.toString;try{Function.prototype.toString=function(...A){let j=lh(this),e=rqA.has(En())&&j!==void 0?j:this;return tqA.apply(e,A)}}catch{}},setup(A){rqA.set(A,!0)}}),kh=pmj,P4=Cn(aqA,kh);var mmj="cause",Emj=5,nqA="LinkedErrors",Bmj=(A={})=>{let j=A.limit||Emj,e=A.key||mmj;return{name:nqA,setupOnce(){},preprocessEvent(t,r,a){let n=a.getOptions();Q0(N3,n.stackParser,n.maxValueLength,e,j,t,r)}}},gmj=Bmj,oqA=Cn(nqA,gmj);var jL={};Yt(jL,{FunctionToString:()=>P4,InboundFilters:()=>O4,LinkedErrors:()=>oqA});var iqA=jL;var wr=Jt,eL=0;function tL(){return eL>0}function Tmj(){eL++,setTimeout(()=>{eL--})}function JE(A,j={},e){if(typeof A!="function")return A;try{let r=A.__sentry_wrapped__;if(r)return typeof r=="function"?r:A;if(lh(A))return A}catch{return A}let t=function(){let r=Array.prototype.slice.call(arguments);try{e&&typeof e=="function"&&e.apply(this,arguments);let a=r.map(n=>JE(n,j));return A.apply(this,a)}catch(a){throw Tmj(),lf(n=>{n.addEventProcessor(o=>(j.mechanism&&(rf(o,void 0,void 0),Dp(o,j.mechanism)),o.extra={...o.extra,arguments:r},o)),sf(a)}),a}};try{for(let r in A)Object.prototype.hasOwnProperty.call(A,r)&&(t[r]=A[r])}catch{}l4(t,A),Ip(A,"__sentry_wrapped__",t);try{Object.getOwnPropertyDescriptor(t,"name").configurable&&Object.defineProperty(t,"name",{get(){return A.name}})}catch{}return t}var Es=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function nL(A,j){let e=oL(A,j),t={type:j&&j.name,value:_mj(j)};return e.length&&(t.stacktrace={frames:e}),t.type===void 0&&t.value===""&&(t.value="Unrecoverable error caught"),t}function Kmj(A,j,e,t){let r=En(),a=r&&r.getOptions().normalizeDepth,n={exception:{values:[{type:ih(j)?j.constructor.name:t?"UnhandledRejection":"Error",value:Lmj(j,{isUnhandledRejection:t})}]},extra:{__serialized__:q4(j,a)}};if(e){let o=oL(A,e);o.length&&(n.exception.values[0].stacktrace={frames:o})}return n}function rL(A,j){return{exception:{values:[nL(A,j)]}}}function oL(A,j){let e=j.stacktrace||j.stack||"",t=Mmj(j);try{return A(e,t)}catch{}return[]}var Smj=/Minified React error #\d+;/i;function Mmj(A){if(A){if(typeof A.framesToPop=="number")return A.framesToPop;if(Smj.test(A.message))return 1}return 0}function _mj(A){let j=A&&A.message;return j?j.error&&typeof j.error.message=="string"?j.error.message:j:"No error message"}function sqA(A,j,e,t){let r=e&&e.syntheticException||void 0,a=C4(A,j,r,t);return Dp(a),a.level="error",e&&e.event_id&&(a.event_id=e.event_id),_d(a)}function lqA(A,j,e="info",t,r){let a=t&&t.syntheticException||void 0,n=aL(A,j,a,r);return n.level=e,t&&t.event_id&&(n.event_id=t.event_id),_d(n)}function C4(A,j,e,t,r){let a;if(Af(j)&&j.error)return rL(A,j.error);if(n4(j)||o3(j)){let n=j;if("stack"in j)a=rL(A,j);else{let o=n.name||(n4(n)?"DOMError":"DOMException"),i=n.message?`${o}: ${n.message}`:o;a=aL(A,i,e,t),rf(a,i)}return"code"in n&&(a.tags={...a.tags,"DOMException.code":`${n.code}`}),a}return W0(j)?rL(A,j):Kd(j)||ih(j)?(a=Kmj(A,j,e,r),Dp(a,{synthetic:!0}),a):(a=aL(A,j,e,t),rf(a,`${j}`,void 0),Dp(a,{synthetic:!0}),a)}function aL(A,j,e,t){let r={};if(t&&e){let a=oL(A,e);a.length&&(r.exception={values:[{value:j,stacktrace:{frames:a}}]})}if(jf(j)){let{__sentry_template_string__:a,__sentry_template_values__:n}=j;return r.logentry={message:a,params:n},r}return r.message=j,r}function Lmj(A,{isUnhandledRejection:j}){let e=B3(A),t=j?"promise rejection":"exception";return Af(A)?`Event \`ErrorEvent\` captured as ${t} with message \`${A.message}\``:ih(A)?`Event \`${Nmj(A)}\` (type=${A.type}) captured as ${t}`:`Object captured as ${t} with keys: ${e}`}function Nmj(A){try{let j=Object.getPrototypeOf(A);return j?j.constructor.name:void 0}catch{}}function cqA(A,{metadata:j,tunnel:e,dsn:t}){let r={event_id:A.event_id,sent_at:new Date().toISOString(),...j&&j.sdk&&{sdk:{name:j.sdk.name,version:j.sdk.version}},...!!e&&!!t&&{dsn:Sc(t)}},a=zmj(A);return _c(r,[a])}function zmj(A){return[{type:"user_report"},A]}var H4=class extends uy{constructor(j){let e=wr.SENTRY_SDK_SOURCE||D3();AL(j,"browser",["browser"],e),super(j),j.sendClientReports&&wr.document&&wr.document.addEventListener("visibilitychange",()=>{wr.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(j,e){return sqA(this._options.stackParser,j,e,this._options.attachStacktrace)}eventFromMessage(j,e="info",t){return lqA(this._options.stackParser,j,e,t,this._options.attachStacktrace)}captureUserFeedback(j){if(!this._isEnabled()){Es&&xe.warn("SDK not enabled, will not capture user feedback.");return}let e=cqA(j,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(j,e,t){return j.platform=j.platform||"javascript",super._prepareEvent(j,e,t)}_flushOutcomes(){let j=this._clearOutcomes();if(j.length===0){Es&&xe.log("No outcomes to send");return}if(!this._dsn){Es&&xe.log("No dsn provided, will not send outcomes");return}Es&&xe.log("Sending outcomes:",j);let e=M3(j,this._options.tunnel&&Sc(this._dsn));this._sendEnvelope(e)}};var my;function dqA(){if(my)return my;if(ty(wr.fetch))return my=wr.fetch.bind(wr);let A=wr.document,j=wr.fetch;if(A&&typeof A.createElement=="function")try{let e=A.createElement("iframe");e.hidden=!0,A.head.appendChild(e);let t=e.contentWindow;t&&t.fetch&&(j=t.fetch),A.head.removeChild(e)}catch(e){Es&&xe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return my=j.bind(wr)}function kqA(){my=void 0}function uqA(A,j=dqA()){let e=0,t=0;function r(a){let n=a.body.length;e+=n,t++;let o={body:a.body,method:"POST",referrerPolicy:"origin",headers:A.headers,keepalive:e<=6e4&&t<15,...A.fetchOptions};try{return j(A.url,o).then(i=>(e-=n,t--,{statusCode:i.status,headers:{"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")}}))}catch(i){return kqA(),e-=n,t--,dh(i)}}return kf(A,r)}var Rmj=4;function pqA(A){function j(e){return new Ul((t,r)=>{let a=new XMLHttpRequest;a.onerror=r,a.onreadystatechange=()=>{a.readyState===Rmj&&t({statusCode:a.status,headers:{"x-sentry-rate-limits":a.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":a.getResponseHeader("Retry-After")}})},a.open("POST",A.url);for(let n in A.headers)Object.prototype.hasOwnProperty.call(A.headers,n)&&a.setRequestHeader(n,A.headers[n]);a.send(e.body)})}return kf(A,j)}var T4="?";var Jmj=30,Umj=40,Xmj=50;function iL(A,j,e,t){let r={filename:A,function:j,in_app:!0};return e!==void 0&&(r.lineno=e),t!==void 0&&(r.colno=t),r}var Vmj=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wmj=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ymj=A=>{let j=Vmj.exec(A);if(j){if(j[2]&&j[2].indexOf("eval")===0){let a=Wmj.exec(j[2]);a&&(j[2]=a[1],j[3]=a[2],j[4]=a[3])}let[t,r]=EqA(j[1]||T4,j[2]);return iL(r,t,j[3]?+j[3]:void 0,j[4]?+j[4]:void 0)}},Qmj=[Jmj,Ymj],Zmj=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,AEj=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,jEj=A=>{let j=Zmj.exec(A);if(j){if(j[3]&&j[3].indexOf(" > eval")>-1){let a=AEj.exec(j[3]);a&&(j[1]=j[1]||"eval",j[3]=a[1],j[4]=a[2],j[5]="")}let t=j[3],r=j[1]||T4;return[r,t]=EqA(r,t),iL(t,r,j[4]?+j[4]:void 0,j[5]?+j[5]:void 0)}},eEj=[Xmj,jEj],tEj=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,rEj=A=>{let j=tEj.exec(A);return j?iL(j[2],j[1]||T4,+j[3],j[4]?+j[4]:void 0):void 0},aEj=[Umj,rEj];var nEj=[Qmj,eEj,aEj],mqA=d4(...nEj),EqA=(A,j)=>{let e=A.indexOf("safari-extension")!==-1,t=A.indexOf("safari-web-extension")!==-1;return e||t?[A.indexOf("@")!==-1?A.split("@")[0]:T4,e?`safari-extension:${j}`:`safari-web-extension:${j}`]:[A,j]};var K4=1024,BqA="Breadcrumbs",oEj=(A={})=>{let j={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...A};return{name:BqA,setupOnce(){},setup(e){j.console&&q3(lEj(e)),j.dom&&f3(sEj(e,j.dom)),j.xhr&&I3(cEj(e)),j.fetch&&y3(dEj(e)),j.history&&ay(kEj(e)),j.sentry&&e.on&&e.on("beforeSendEvent",iEj(e))}}},sL=oEj,gqA=Cn(BqA,sL);function iEj(A){return function(e){En()===A&&Gu({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:Sd(e)},{event:e})}}function sEj(A,j){return function(t){if(En()!==A)return;let r,a,n=typeof j=="object"?j.serializeAttribute:void 0,o=typeof j=="object"&&typeof j.maxStringLength=="number"?j.maxStringLength:void 0;o&&o>K4&&(Es&&xe.warn(`\`dom.maxStringLength\` cannot exceed ${K4}, but a value of ${o} was configured. Sentry will use ${K4} instead.`),o=K4),typeof n=="string"&&(n=[n]);try{let s=t.event,l=uEj(s)?s.target:s;r=Ay(l,{keyAttrs:n,maxStringLength:o}),a=p3(l)}catch{r="<unknown>"}if(r.length===0)return;let i={category:`ui.${t.name}`,message:r};a&&(i.data={"ui.component_name":a}),Gu(i,{event:t.event,name:t.name,global:t.global})}}function lEj(A){return function(e){if(En()!==A)return;let t={category:"console",data:{arguments:e.args,logger:"console"},level:P3(e.level),message:o4(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)t.message=`Assertion failed: ${o4(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1);else return;Gu(t,{input:e.args,level:e.level})}}function cEj(A){return function(e){if(En()!==A)return;let{startTimestamp:t,endTimestamp:r}=e,a=e.xhr[ch];if(!t||!r||!a)return;let{method:n,url:o,status_code:i,body:s}=a,l={method:n,url:o,status_code:i},d={xhr:e.xhr,input:s,startTimestamp:t,endTimestamp:r};Gu({category:"xhr",data:l,type:"http"},d)}}function dEj(A){return function(e){if(En()!==A)return;let{startTimestamp:t,endTimestamp:r}=e;if(r&&!(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"))if(e.error){let a=e.fetchData,n={data:e.error,input:e.args,startTimestamp:t,endTimestamp:r};Gu({category:"fetch",data:a,level:"error",type:"http"},n)}else{let a=e.response,n={...e.fetchData,status_code:a&&a.status},o={input:e.args,response:a,startTimestamp:t,endTimestamp:r};Gu({category:"fetch",data:n,type:"http"},o)}}}function kEj(A){return function(e){if(En()!==A)return;let t=e.from,r=e.to,a=ny(wr.location.href),n=t?ny(t):void 0,o=ny(r);(!n||!n.path)&&(n=a),a.protocol===o.protocol&&a.host===o.host&&(r=o.relative),a.protocol===n.protocol&&a.host===n.host&&(t=n.relative),Gu({category:"navigation",data:{from:t,to:r}})}}function uEj(A){return!!A&&!!A.target}var vqA="Dedupe",pEj=()=>{let A;return{name:vqA,setupOnce(){},processEvent(j){if(j.type)return j;try{if(mEj(j,A))return Es&&xe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return A=j}}},lL=pEj,xqA=Cn(vqA,lL);function mEj(A,j){return j?!!(EEj(A,j)||BEj(A,j)):!1}function EEj(A,j){let e=A.message,t=j.message;return!(!e&&!t||e&&!t||!e&&t||e!==t||!GqA(A,j)||!fqA(A,j))}function BEj(A,j){let e=hqA(j),t=hqA(A);return!(!e||!t||e.type!==t.type||e.value!==t.value||!GqA(A,j)||!fqA(A,j))}function fqA(A,j){let e=qqA(A),t=qqA(j);if(!e&&!t)return!0;if(e&&!t||!e&&t||(e=e,t=t,t.length!==e.length))return!1;for(let r=0;r<t.length;r++){let a=t[r],n=e[r];if(a.filename!==n.filename||a.lineno!==n.lineno||a.colno!==n.colno||a.function!==n.function)return!1}return!0}function GqA(A,j){let e=A.fingerprint,t=j.fingerprint;if(!e&&!t)return!0;if(e&&!t||!e&&t)return!1;e=e,t=t;try{return e.join("")===t.join("")}catch{return!1}}function hqA(A){return A.exception&&A.exception.values&&A.exception.values[0]}function qqA(A){let j=A.exception;if(j)try{return j.values[0].stacktrace.frames}catch{return}}var bqA="GlobalHandlers",gEj=(A={})=>{let j={onerror:!0,onunhandledrejection:!0,...A};return{name:bqA,setupOnce(){Error.stackTraceLimit=50},setup(e){j.onerror&&(hEj(e),FqA("onerror")),j.onunhandledrejection&&(qEj(e),FqA("onunhandledrejection"))}}},cL=gEj,yqA=Cn(bqA,cL);function hEj(A){$3(j=>{let{stackParser:e,attachStacktrace:t}=wqA();if(En()!==A||tL())return;let{msg:r,url:a,line:n,column:o,error:i}=j,s=i===void 0&&Ys(r)?fEj(r,a,n,o):$qA(C4(e,i||r,void 0,t,!1),a,n,o);s.level="error",sy(s,{originalException:i,mechanism:{handled:!1,type:"onerror"}})})}function qEj(A){w3(j=>{let{stackParser:e,attachStacktrace:t}=wqA();if(En()!==A||tL())return;let r=vEj(j),a=oh(r)?xEj(r):C4(e,r,void 0,t,!0);a.level="error",sy(a,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function vEj(A){if(oh(A))return A;let j=A;try{if("reason"in j)return j.reason;if("detail"in j&&"reason"in j.detail)return j.detail.reason}catch{}return A}function xEj(A){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(A)}`}]}}}function fEj(A,j,e,t){let r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,a=Af(A)?A.message:A,n="Error",o=a.match(r);return o&&(n=o[1],a=o[2]),$qA({exception:{values:[{type:n,value:a}]}},j,e,t)}function $qA(A,j,e,t){let r=A.exception=A.exception||{},a=r.values=r.values||[],n=a[0]=a[0]||{},o=n.stacktrace=n.stacktrace||{},i=o.frames=o.frames||[],s=isNaN(parseInt(t,10))?void 0:t,l=isNaN(parseInt(e,10))?void 0:e,d=Ys(j)&&j.length>0?j:u3();return i.length===0&&i.push({colno:s,filename:d,function:"?",in_app:!0,lineno:l}),A}function FqA(A){Es&&xe.log(`Global Handler attached: ${A}`)}function wqA(){let A=En();return A&&A.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var IqA="HttpContext",GEj=()=>({name:IqA,setupOnce(){},preprocessEvent(A){if(!wr.navigator&&!wr.location&&!wr.document)return;let j=A.request&&A.request.url||wr.location&&wr.location.href,{referrer:e}=wr.document||{},{userAgent:t}=wr.navigator||{},r={...A.request&&A.request.headers,...e&&{Referer:e},...t&&{"User-Agent":t}},a={...A.request,...j&&{url:j},headers:r};A.request=a}}),dL=GEj,DqA=Cn(IqA,dL);var FEj="cause",bEj=5,OqA="LinkedErrors",yEj=(A={})=>{let j=A.limit||bEj,e=A.key||FEj;return{name:OqA,setupOnce(){},preprocessEvent(t,r,a){let n=a.getOptions();Q0(nL,n.stackParser,n.maxValueLength,e,j,t,r)}}},kL=yEj,PqA=Cn(OqA,kL);var $Ej=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],HqA="TryCatch",wEj=(A={})=>{let j={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...A};return{name:HqA,setupOnce(){j.setTimeout&&T6(wr,"setTimeout",CqA),j.setInterval&&T6(wr,"setInterval",CqA),j.requestAnimationFrame&&T6(wr,"requestAnimationFrame",IEj),j.XMLHttpRequest&&"XMLHttpRequest"in wr&&T6(XMLHttpRequest.prototype,"send",DEj);let e=j.eventTarget;e&&(Array.isArray(e)?e:$Ej).forEach(OEj)}}},uL=wEj,TqA=Cn(HqA,uL);function CqA(A){return function(...j){let e=j[0];return j[0]=JE(e,{mechanism:{data:{function:Mc(A)},handled:!1,type:"instrument"}}),A.apply(this,j)}}function IEj(A){return function(j){return A.apply(this,[JE(j,{mechanism:{data:{function:"requestAnimationFrame",handler:Mc(A)},handled:!1,type:"instrument"}})])}}function DEj(A){return function(...j){let e=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in e&&typeof e[r]=="function"&&T6(e,r,function(a){let n={mechanism:{data:{function:r,handler:Mc(a)},handled:!1,type:"instrument"}},o=lh(a);return o&&(n.mechanism.data.handler=Mc(o)),JE(a,n)})}),A.apply(this,j)}}function OEj(A){let j=wr,e=j[A]&&j[A].prototype;!e||!e.hasOwnProperty||!e.hasOwnProperty("addEventListener")||(T6(e,"addEventListener",function(t){return function(r,a,n){try{typeof a.handleEvent=="function"&&(a.handleEvent=JE(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Mc(a),target:A},handled:!1,type:"instrument"}}))}catch{}return t.apply(this,[r,JE(a,{mechanism:{data:{function:"addEventListener",handler:Mc(a),target:A},handled:!1,type:"instrument"}}),n])}}),T6(e,"removeEventListener",function(t){return function(r,a,n){let o=a;try{let i=o&&o.__sentry_wrapped__;i&&t.call(this,r,i,n)}catch{}return t.call(this,r,o,n)}}))}var KqA=[py(),kh(),uL(),sL(),cL(),kL(),lL(),dL()];function SqA(A){return[...KqA]}function pL(A={}){A.defaultIntegrations===void 0&&(A.defaultIntegrations=SqA()),A.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(A.release=__SENTRY_RELEASE__),wr.SENTRY_RELEASE&&wr.SENTRY_RELEASE.id&&(A.release=wr.SENTRY_RELEASE.id)),A.autoSessionTracking===void 0&&(A.autoSessionTracking=!0),A.sendClientReports===void 0&&(A.sendClientReports=!0);let j={...A,stackParser:h3(A.stackParser||mqA),integrations:V3(A),transport:A.transport||(p4()?uqA:pqA)};Q3(H4,j),A.autoSessionTracking&&PEj()}function PEj(){if(typeof wr.document>"u"){Es&&xe.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}ly({ignoreDuration:!0}),cy(),ay(({from:A,to:j})=>{A!==void 0&&A!==j&&(ly({ignoreDuration:!0}),cy())})}var mL={};Yt(mL,{Breadcrumbs:()=>gqA,Dedupe:()=>xqA,GlobalHandlers:()=>yqA,HttpContext:()=>DqA,LinkedErrors:()=>PqA,TryCatch:()=>TqA});var MqA=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var NqA="Dedupe",CEj=()=>{let A;return{name:NqA,setupOnce(){},processEvent(j){if(j.type)return j;try{if(TEj(j,A))return MqA&&xe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return A=j}}},Ey=CEj,HEj=Cn(NqA,Ey);function TEj(A,j){return j?!!(KEj(A,j)||SEj(A,j)):!1}function KEj(A,j){let e=A.message,t=j.message;return!(!e&&!t||e&&!t||!e&&t||e!==t||!RqA(A,j)||!zqA(A,j))}function SEj(A,j){let e=_qA(j),t=_qA(A);return!(!e||!t||e.type!==t.type||e.value!==t.value||!RqA(A,j)||!zqA(A,j))}function zqA(A,j){let e=LqA(A),t=LqA(j);if(!e&&!t)return!0;if(e&&!t||!e&&t||(e=e,t=t,t.length!==e.length))return!1;for(let r=0;r<t.length;r++){let a=t[r],n=e[r];if(a.filename!==n.filename||a.lineno!==n.lineno||a.colno!==n.colno||a.function!==n.function)return!1}return!0}function RqA(A,j){let e=A.fingerprint,t=j.fingerprint;if(!e&&!t)return!0;if(e&&!t||!e&&t)return!1;e=e,t=t;try{return e.join("")===t.join("")}catch{return!1}}function _qA(A){return A.exception&&A.exception.values&&A.exception.values[0]}function LqA(A){let j=A.exception;if(j)try{return j.values[0].stacktrace.frames}catch{return}}var JqA={};wr.Sentry&&wr.Sentry.Integrations&&(JqA=wr.Sentry.Integrations);var DDe={...JqA,...iqA,...mL};var Gr={};Yt(Gr,{clientDescriptor:()=>gL,device:()=>M4,getDevice:()=>uh,getb5xDevice:()=>_4,initializeDevice:()=>LEj,isEdge:()=>By,setDevice:()=>VqA,setDeviceUsesCredentialBundle:()=>hL,setIsEdge:()=>NEj});var BL=!1,M4,gL,UqA,XqA,S4,EL,uh=()=>M4,_4=()=>S4,VqA=(A,j)=>{let e=Number.parseInt(A.clientVersion,10)||0,t=A.clientName+"/"+e;j&&(BL=!0),A.fromDeviceInit?(S4=A,EL=t,_Ej()):(UqA=A,XqA=t,qL())},hL=()=>{BL=!0,qL()},qL=()=>{M4=UqA,gL=XqA},_Ej=()=>{BL||(S4&&EL?(M4=S4,gL=EL):qL())},LEj=VqA,By=!1,NEj=A=>By=A;var $A={};Yt($A,{Jwe:()=>Ef,JweB:()=>Oa,JweHeader:()=>_Bj,JwkEcPriKey:()=>XE,JwkEcPriKeyDeprecated:()=>SBj,JwkEcPubKey:()=>hh,JwkRsaPriKey:()=>Nd,JwkRsaPubKey:()=>yu,JwkSymKey:()=>co,JwkSymKeyOptionalKid:()=>TBj,Jws:()=>LBj,JwsB:()=>MBj,JwsHeader:()=>NBj,JwtHeader:()=>zBj,KeysetCiphertext:()=>Ki,KeysetCiphertextV2:()=>RBj,correctJwkEcPriKey:()=>KL,correctJwkEcPubKey:()=>SL,correctJwkNumber:()=>Ti,correctJwkRsaPriKeyIfNeeded:()=>Gy,correctJwkRsaPubKeyIfNeeded:()=>fy,exportKey:()=>by,exportUnvalidatedKey:()=>Fy,getRandomBytes:()=>Vr,getRandomValues:()=>yy,getRsaKeySize:()=>TL,getSalt:()=>ML,init:()=>hvA,isUsingWebkitSubtle:()=>gvA,keyOpsToBitMask:()=>PBj,setSupport:()=>WBj,sha256:()=>CBj,subtle:()=>we,supports:()=>Kp,testsComplete:()=>XBj,testsError:()=>VBj,unsafeHashStringSha1UpperHex:()=>HBj,waitForInit:()=>JBj,waitForTests:()=>UBj,webkitSubtle:()=>Z4});var xA=W(aA());var Tt="A256GCM",gy=A=>A===Tt,Cp="mp",WqA={name:"AES-GCM",length:256},uf=A=>{if(A===Tt)return WqA;throw new Error("Unexpected enc")};var YqA=()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global};var zEj=function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};function vL(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return function(){return j(A.apply(this,arguments))};case 3:return function(){return e(j(A.apply(this,arguments)))};case 4:return function(){return t(e(j(A.apply(this,arguments))))};case 5:return function(){return r(t(e(j(A.apply(this,arguments)))))};case 6:return function(){return a(r(t(e(j(A.apply(this,arguments))))))};case 7:return function(){return n(a(r(t(e(j(A.apply(this,arguments)))))))};case 8:return function(){return o(n(a(r(t(e(j(A.apply(this,arguments))))))))};case 9:return function(){return i(o(n(a(r(t(e(j(A.apply(this,arguments)))))))))}}}function xL(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return j(A);case 3:return e(j(A));case 4:return t(e(j(A)));case 5:return r(t(e(j(A))));case 6:return a(r(t(e(j(A)))));case 7:return n(a(r(t(e(j(A))))));case 8:return o(n(a(r(t(e(j(A)))))));case 9:return i(o(n(a(r(t(e(j(A))))))));default:{for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}}var pf=function(A,j){var e=typeof A=="number"?function(t){return t.length>=A}:A;return function(){var t=Array.from(arguments);return e(arguments)?j.apply(this,t):function(r){return j.apply(void 0,zEj([r],t,!1))}}};var QqA=function(A){return A._tag==="Some"},ZqA={_tag:"None"},AvA=function(A){return{_tag:"Some",value:A}};function fL(A){return function(j,e){return A.map(j,function(){return e})}}function jvA(A){var j=fL(A);return function(e){return j(e,void 0)}}function L4(A){return function(j,e){return A.chain(j,function(t){return A.map(e(t),function(){return t})})}}function evA(A){return function(j){return vL(j,A.fromEither)}}function tvA(A,j){var e=evA(A),t=L4(j);return function(r,a){return t(r,e(a))}}var Hp=ZqA,ph=AvA;var UEj=function(A){return A._tag==="Left"?Hp:ph(A.right)},rvA=function(A,j){return xL(A,N4(j))},XEj=function(A,j){return xL(A,VEj(j))};var GL="Option";var N4=function(A){return function(j){return mf(j)?Hp:ph(A(j.value))}},avA={URI:GL,map:rvA},r8e=pf(2,fL(avA)),a8e=jvA(avA);var VEj=function(A){return function(j){return mf(j)||mf(A)?Hp:ph(j.value(A.value))}};var FL=pf(2,function(A,j){return mf(A)?Hp:j(A.value)}),nvA={URI:GL,map:rvA,ap:XEj,chain:FL};var n8e=pf(2,function(A,j){return mf(A)?j():A});var bL=UEj,WEj={URI:GL,fromEither:bL},yL=QqA,mf=function(A){return A._tag==="None"};var ovA=function(A){return function(j){return mf(j)?A():j.value}};var o8e=pf(2,L4(nvA)),i8e=pf(2,tvA(WEj,nvA));var ivA=function(A){return A==null?Hp:ph(A)};var bu;(function(A){A.Web="B",A.iOS="I",A.Android="A",A.Windows="W",A.Mac="M",A.CLI="C",A.API="P",A.ThirdParty="T",A.MobileWeb="O"})(bu||(bu={}));var svA=60,QEj=64,ZEj=64,ABj=100,$L=32,jBj=5,eBj=3,tBj=/\W|_/g,rBj=60,aBj=255,nBj=!1,oBj=A=>JSON.stringify(A)||typeof A,UE=Lr,iBj=(A,j)=>A.filter(e=>!!e&&j(e)),wL=(A,j,e)=>ti(e,(t,r,a)=>({...t,[A(r,a)]:j(r,a)}),{}),z4=(...A)=>A.reduce((j,e)=>typeof e!="string"||e.length===0?j:j.length===0?e:dO(j,"/")&&Fp(e,"/")?j+e.slice(1):dO(j,"/")||Fp(e,"/")?j+e:j+"/"+e,""),sBj=(A,j,e)=>{if(j<0||j>=A.length)throw new Error("moveArrayItem: currentIndex out of bounds");if(e<0||e>=A.length)throw new Error("moveArrayItem: newIndex out of bounds");return j===e?A.slice():A.map((t,r)=>r===e?A[j]:j<=r&&r<e?A[r+1]:e<r&&r<=j?A[r-1]:t)},IL=A=>A?A.trim().normalize("NFKD"):"",Eh=async A=>new Promise((j,e)=>{let t=new FileReader;t.onloadend=()=>{let r=t.result;if(typeof r!="string"){e(new Error("Invalid FileReader result."));return}let a="data:attachment/file"+r.slice(r.search(/[,;]/));j(a)},t.readAsDataURL(A)}),Co=A=>{let j=A.reduce((t,r)=>t+r.byteLength,0),e=new Uint8Array(j);return A.reduce((t,r)=>(e.set(r,t),t+r.byteLength),0),e},lBj=(A,j)=>A.trim().toLowerCase()+":"+j,hy=A=>typeof A=="number"&&!Number.isNaN(A),Bh=A=>{if(!A||A.length<6||A.length>255)return!1;let j=A.trim().split("@"),e=j[1];return j.length===2&&/^[\w'+-]([\w'+.-]*[\w'+-])?@\w([\w.-]*\w)?\.[A-Za-z]{2,20}$/.test(A)&&e!==void 0&&qy(e)},qy=A=>/^([\da-z]([\da-z-]*[\da-z])?\.)+[\da-z]{2,}$/i.test(A),cBj=A=>{let j=Fp(A,"*.")?A.slice(2):A;return qy(j)},dBj=A=>/^[2-7A-Z]{13}$/.test(A),kBj=20,DL=A=>/^[\dA-Z]{1,11}(-[\dA-Z]{8})?$/.test(A),R4=A=>/^[a-z0-9]{1,11}(-?[a-z0-9]{1,11})?$/i.test(A),J4=A=>/^[\dA-Z]{26}$/.test(A),uBj=["B","I","A","W","M","C","P","T"],pBj=A=>Br(uBj,A),mBj=A=>A!==bu.Web&&A!==bu.MobileWeb&&A!==bu.ThirdParty,EBj=A=>/^\d{6}$/.test(A),Qn=async A=>new Promise(j=>{setTimeout(j,A)}),BBj=async(A,j)=>(await Qn(A),j),U4=()=>{let A,j,e=Hp,t=Hp,r=()=>{if(yL(e))return"Promise was already resolved";if(yL(t))return"Promise was already rejected"},a=new Promise((n,o)=>{A=i=>{let s=r();return s||(e=ph(i),n(i)),s},j=i=>{let s=r();return s||(t=ph(i),o(i)),s}});if(!A||!j)throw new Error("CallbackPromise functions were not initialized");return{resolve:A,reject:j,promise:a}},K6=async(A,j,e)=>wo(e,j).reduce(async(t,r)=>t.then(async a=>{let n=await A(r);return[...a,...n]}),Promise.resolve([])),X4=async(A,j,e)=>K6(async t=>Promise.all(t.map(A)),j,e),gBj=async(A,j)=>{let e=[];for(let t=0;t<j;t++)e.push(await A());return e},V4=A=>A?A.split(",").map(j=>j.trim()).filter(j=>j!==""):[],hBj=(A,j)=>{if(!A)return"";let e=j?", ":",";return V4(A).join(e)},qBj=A=>A.toLowerCase().replace(/\s/g,""),vBj=()=>navigator.userAgent.includes("Mac OS X")?"\u2318":"ctrl",xBj=A=>!A||!A.includes(".")?"":ME(A.split("."))?.toLowerCase()??"",lvA=/["%;<>[\\\]{}]/g,cvA=/\/{2,}/g,dvA=A=>A?A.replace(lvA,"").replace(cvA,"/"):"",fBj=async A=>new Promise((j,e)=>{let t=new FileReader;t.addEventListener("load",()=>{if(!t.result||typeof t.result!="object"||!("byteLength"in t.result)){e(new Error("Invalid FileReader result."));return}t.result.byteLength,j(t.result)}),t.addEventListener("error",()=>{e(t.error??new Error("Unexpected FileReader error"))}),t.readAsArrayBuffer(A)}),GBj=A=>{let j=A.trim().toLowerCase().replace(/^https:\/\//,"").replace(/\.1password\.com(.*)/,"").replace(/\s+/g,"-").replace(/[^\da-z-]/g,"").replace(/-+/g,"-");return j.length>$L&&(j=j.slice(0,$L)),j},FBj=A=>dvA(A).slice(0,svA),bBj=(A,j)=>{if(!A)return"";if(!j)return A;let e=new RegExp("[^"+j+"]","g");return A.replace(e,"")},yBj=/[\d+.A-Za-z-]+/,Tp=A=>new RegExp("^"+yBj.source+":").test(A)?A:"https://"+A,ai=A=>{if(!A)return"";let j=A.split(".");return!j||j.length<2?"":j.slice(1).join(".")},mh;(function(A){A.US="us",A.CA="ca",A.EU="eu",A.ES="es",A.IN="in"})(mh||(mh={}));var $Bj=[mh.US,mh.CA,mh.ES,mh.IN],wBj=["as","gu","mh","mp","fm","pw","pr","vi"],W4=A=>{if(!A)return"us";let j=A.split(".");if(!j||j.length<2)return"us";let e=j[j.length-1];if(!e)return"us";if(Br(e,":")){let[t]=e.split(":");t!==void 0&&(e=t)}switch(e){case"ca":return"ca";case"eu":return"eu";default:return"us"}},OL=(A,j,e)=>A>j&&A<=e;var xy={};Yt(xy,{primesAreReversed:()=>pvA,swapPrimes:()=>mvA,swapPrimesIfNeeded:()=>PL});var uvA=W(gh()),vy=W(so()),pvA=A=>Q4(A.p).compareTo(Q4(A.q))<0,PL=A=>pvA(A)?mvA(A):A,mvA=A=>({...A,p:A.q,q:A.p,dp:A.dq,dq:A.dp,qi:DBj(A.q,A.p)}),Q4=A=>{let j=vy.codec.hex.fromBits(vy.codec.base64url.toBits(A));return new uvA.BigInteger(j,16)},IBj=A=>{let j=A.toString(16),e=j.length%2===1?"0"+j:j;return vy.codec.base64url.fromBits(vy.codec.hex.toBits(e))},DBj=(A,j)=>IBj(Q4(j).modInverse(Q4(A)));var EvA=E`web-api/util/crypto.ts`,Ti=(A,j,e)=>{if(!A)return A;let t=ZA(A);if(!t||t.length===0)return A;if(t.length>j)throw new Error("JWK number is longer than expected");if(e==="pad"){if(t.length===j)return A;let r=new Uint8Array(j);r.set(t,j-t.length),t=r}else{if(t[0]!==0)return A;let r=0;for(;r<t.length&&t[r]===0;)r+=1;t=t.subarray(r)}return tj(t)},jP=A=>ei(A,"use"),fy=A=>{let j=By?"pad":"trim",e={...A,e:Ti(A.e,3,j),n:Ti(A.n,TL(A),j)};return jP(e)},Gy=A=>{let j=By?"pad":"trim",e=TL(A),t=e/2,r={...A,d:Ti(A.d,e,j),dp:Ti(A.dp,t,j),dq:Ti(A.dq,t,j),e:Ti(A.e,3,j),n:Ti(A.n,e,j),p:Ti(A.p,t,j),q:Ti(A.q,t,j),qi:Ti(A.qi,t,j)};return PL(jP(r))},TL=A=>{let j=r3(A.n),e=[256,384,512].find(t=>t>=j);if(!e)throw new Error("RSA modulus is larger than 4096-bit");return e},KL=A=>jP({...A,x:Ti(A.x,32,"pad"),y:Ti(A.y,32,"pad"),d:Ti(A.d,32,"pad")}),SL=A=>jP({...A,x:Ti(A.x,32,"pad"),y:Ti(A.y,32,"pad")}),OBj={sign:1,verify:2,encrypt:4,decrypt:8,wrapKey:16,unwrapKey:32,deriveKey:64,deriveBits:128},PBj=A=>A.reduce((j,e)=>j|OBj[e],0),CBj=async A=>{let j=await we.digest({name:"SHA-256"},A);return new Uint8Array(j)},HBj=async A=>Promise.resolve().then(async()=>we.digest({name:"SHA-1"},Dj(A)).then(j=>Pn(new Uint8Array(j)).toUpperCase())),ML=A=>tj(Vr(A/8)),AP=A=>"byteLength"in A&&typeof A.byteLength=="number",Fy=async(A,j)=>{let e=await we.exportKey("jwk",j);return AP(e)&&Bs([E`Unexpected ArrayBuffer: data`],EvA,E`exportUnvalidatedKey`),{...AP(e)?sj(e,Ue).unwrap():e,kid:A}},by=async(A,j,e)=>{let t=await we.exportKey("jwk",j);AP(t)&&Bs([E`Unexpected ArrayBuffer: data`],EvA,E`exportKey`);let r=AP(t)?sj(t,Ue).unwrap():t;return sj({...r,kid:A},e).unwrap()},BvA=xA.union([xA.tuple([xA.literal("encrypt"),xA.literal("decrypt")]),xA.tuple([xA.literal("decrypt"),xA.literal("encrypt")])]),co=xA.readonly(xA.type({kid:xA.string,ext:xA.boolean,kty:xA.literal("oct"),key_ops:BvA,alg:xA.string,k:xA.string}),"JwkSymKey"),TBj=xA.readonly(xA.type({kid:GA(xA.string,""),ext:xA.boolean,kty:xA.literal("oct"),key_ops:BvA,alg:xA.string,k:xA.string}),"JwkSymKeyOptionalKid"),yu=xA.readonly(xA.intersection([xA.type({kid:xA.string,ext:xA.boolean,key_ops:Do(xA.tuple([xA.literal("encrypt")]),A=>(Nr(new Pe({errorClass:Z("JwkRsaPubKey_key_ops"),message:E`JwkRsaPubKey_key_ops value: ${Z(JSON.stringify(A))}`})),["encrypt"])),kty:xA.literal("RSA"),alg:xA.string,e:xA.string,n:xA.string},"type"),xA.partial({use:xA.literal("enc")},"partial")]),"JwkRsaPubKey"),Nd=xA.readonly(xA.intersection([xA.type({kid:xA.string,ext:xA.boolean,key_ops:Do(xA.tuple([xA.literal("decrypt")]),()=>["decrypt"]),kty:xA.literal("RSA"),alg:xA.string,e:xA.string,n:xA.string,d:xA.string,dp:xA.string,dq:xA.string,p:xA.string,q:xA.string,qi:xA.string},"type"),xA.partial({use:xA.literal("enc")},"partial")]),"JwkRsaPriKey"),_L=xA.union([xA.literal("P-256"),xA.literal("P-384")]),hh=xA.readonly(xA.intersection([xA.type({kid:xA.string,ext:xA.boolean,kty:xA.literal("EC"),key_ops:xA.tuple([xA.literal("verify")]),crv:_L,x:xA.string,y:xA.string},"type"),xA.partial({use:xA.literal("sig")},"partial")]),"JwkEcPubKey"),XE=xA.readonly(xA.intersection([xA.type({kid:xA.string,ext:xA.boolean,kty:xA.literal("EC"),key_ops:xA.tuple([xA.literal("sign")]),crv:_L,x:xA.string,y:xA.string,d:xA.string},"type"),xA.partial({use:xA.literal("sig")},"partial")]),"JwkEcPriKey"),KBj=xA.union([xA.tuple([xA.literal("sign"),xA.literal("verify")]),xA.tuple([xA.literal("verify"),xA.literal("sign")]),xA.tuple([xA.literal("sign")])]),SBj=xA.readonly(xA.intersection([xA.type({kid:xA.string,ext:xA.boolean,kty:xA.literal("EC"),key_ops:KBj,crv:_L,x:xA.string,y:xA.string,d:xA.string},"type"),xA.partial({use:xA.literal("sig")},"partial")]),"JwkEcPriKeyDeprecated"),MBj=xA.readonly(xA.type({kid:xA.string,alg:xA.string,s:xA.string}),"JwsB"),Oa=xA.intersection([xA.type({kid:xA.string,enc:xA.string,cty:xA.string,data:xA.string},"type"),xA.partial({iv:ij(xA.string),alg:xA.string,p2c:xA.number,p2s:xA.string},"partial")],"JweB"),Ef=xA.readonly(xA.type({protected:xA.string,encrypted_key:xA.string,iv:xA.string,ciphertext:xA.string,tag:xA.string}),"Jwe"),_Bj=xA.readonly(xA.type({typ:xA.literal("jose+json"),alg:xA.string,enc:xA.literal(Tt),kid:xA.string}),"JweHeader"),LBj=xA.readonly(xA.type({protected:xA.string,payload:xA.string,signature:xA.string}),"Jws"),NBj=xA.readonly(xA.type({typ:xA.literal("jose+json"),alg:xA.string,kid:xA.string}),"JwsHeader"),zBj=xA.readonly(xA.type({typ:xA.literal("JWT"),kid:xA.union([xA.string,xA.undefined]),alg:xA.literal("ES256")}),"JwtHeader"),Ki=xA.readonly(xA.intersection([xA.type({uuid:xA.string,sn:xA.number,encryptedBy:xA.string,encSymKey:Oa,pubKey:yu,encPriKey:Oa},"type"),xA.partial({spubKey:hh,encSPriKey:Oa},"partial")]),"KeysetCiphertext"),RBj=xA.readonly(xA.type({uuid:xA.string,sn:xA.number,spec:xA.literal(2),ePubKey:yu,sPubKey:hh,encKeyData:Ef}),"KeysetCiphertextV2"),yy,Vr=A=>yy(new Uint8Array(A)),we,Z4,gvA=!1,CL=U4(),LL=U4(),JBj=CL.promise,UBj=LL.promise,XBj=LL.resolve,VBj=LL.reject,HL=YqA(),hvA=(A=HL?.crypto)=>{try{if(typeof A>"u")throw new TypeError("Crypto is unavailable");yy=A.getRandomValues.bind(A),we=A.subtle,Z4=A.webkitSubtle,!we&&Z4&&(we=Z4,gvA=!0),CL.resolve()}catch(j){CL.reject(j)}};HL?.crypto&&hvA(HL.crypto);var Kp={jwkImport:!0,rsaOaep256:!0,nativeAesGcm:!0,nativePbes2:!0,nativeEcdsa:!0},WBj=A=>{Kp={...Kp,...A}};var Sp=W(so());var qvA=26,fe=()=>Dy(16),eP=A=>/^[2-7A-Z]{26}$/.test(A),tP=A=>/^[\da-z]{26}$/.test(A),YBj=eP,$y=eP,QBj=eP,ZBj=eP,wy=tP,qh=tP,NL=tP,Agj=tP,zL=A=>A==="group"?NL:$y,RL=A=>j=>typeof j=="string"?A(j)?j:"":j&&j.uuid&&A(j.uuid)?j.uuid:"",vvA=A=>Sp.codec.base32.fromBits(A,!0).slice(0,qvA),xvA=A=>vvA(A).toLowerCase(),VE=A=>xvA(Sp.codec.bytes.toBits(A)),jgj=A=>vvA(Sp.hash.sha256.hash(A.toLowerCase())),egj=(A,j)=>{let e=A.slice(0,8);try{let t=Sp.codec.base32.toBits(e);return Sp.bitArray.extract(t,0,Sp.bitArray.bitLength(t))%j}catch{return 0}},ko=RL($y),Iy=RL(qh),zd=RL(NL);var tgj=9007199254740991,rgj=-9007199254740991,fvA=6,Dy=A=>{let j=Vr(A||4);return VE(j)},agj=A=>{if(A.length===0)throw new Error("selectRandomElement: Cannot select element of empty array");return A[F6(0,A.length-1)]},GvA=2,ngj=2**(GvA*8),JL=(A=.5)=>FvA(GvA)/ngj<A,F6=(A,j)=>{if(typeof j!="number"||typeof A!="number")throw new TypeError("Boundaries must be defined");if(j<A)throw new Error("Upper boundary cannot be less than lower boundary");if(j===A)return A;let e=j-A+1,t=Math.ceil(Math.log(e)/Math.log(2)/8);if(t>fvA||j>tgj||A<rgj)throw new Error("Boundaries are too large for JavaScript");let r=256**t,a=r-r%e,n=new Uint8Array(t),o;do o=bvA(yy(n));while(o>=a);let i=o%e+A;if(i<A||j<i)throw new Error("Somehow managed to generate a result out of range");return i},FvA=A=>{if(A>fvA||A<1)throw new Error("Byte length must be in [1, 6]");return bvA(Vr(A))},bvA=A=>ti(A,(j,e,t)=>j+e*256**t,0);var UL;(function(A){A.ContextError=E`ContextError`,A.RequestError=E`RequestError`,A.ValidationError=E`ValidationError`})(UL||(UL={}));var Nr=A=>{if(!VL||A.sampleRate!==void 0&&!JL(A.sampleRate))return;let j=uh();lf(e=>{let t=Cd({},j?yvA(j):{},A.metaData??{});for(let[r,a]of Object.entries(t))e.setContext(r,a);if(A.severityLevel&&e.setLevel(A.severityLevel),A.userUuid&&e.setUser({id:A.userUuid.str}),XL&&e.setTag("source",XL),A.tags)for(let[r,a]of Object.entries(A.tags))e.setTag(r,a.str);sf(A)})},yvA=A=>{let j=A.osName==="MacOSX"?"macOS":A.osName;return{app:{device_app_hash:Z(A.uuid??""),app_name:Z(A.clientName??""),app_build:Z(A.clientVersion??"")},browser:{name:Z(A.name??""),version:Z(A.model??"")},os:{name:Z(j??""),version:Z(A.osVersion??"")}}},Oy=A=>{for(let j of A)Nr(j)},VL=!1,XL,ogj=({appVersion:A,dsn:j,environment:e,sampleRate:t=1,source:r})=>{pL({defaultIntegrations:!1,sendDefaultPii:!1,autoSessionTracking:!1,dsn:j,environment:e,integrations:[Ey(),kh()],release:A,sampleRate:t}),XL=r,VL=!0},igj=()=>VL;var sj=(A,j,e)=>{let t=e?.mode??"default",r=nhA((0,$vA.mapLeft)(V0.reportFailure)(j.decode(A)),lgj);return r.type==="err"&&((t==="unsafe_report_only"||e?.file||e?.func)&&Bs(r.value,e?.file||E`unknown`,e?.func||E`unknown`,e?.errorClass,e?.context),t==="unsafe_report_only"&&!ps())?Bu(A):r},sgj=A=>j=>sj(j,A).unwrap(),lgj=A=>new a4(H0(A,E`\n`)),Bs=(A,j,e,t,r)=>{let a=A.map(n=>{let o=H0(Lr([r,n]),E`: `);return console.error(`${j.str}#${e.str} failed to decode: ${o.str}`),new Pe({errorClass:t||mn.ValidationError,message:o})});Oy(a)};var cgj=(A,j)=>A.reduce((e,t,r,a)=>j(t,r,a)?e+1:e,0),YL=(A,j)=>A.length===j.length&&A.every(e=>j.includes(e));var fh={};Yt(fh,{BUSINESS_TIER:()=>dgj,Card:()=>vh,CurrencyCodes:()=>QL,GiftCard:()=>Py,InAppPurchaseSelectedSubscriptionTier:()=>jN,Invoice:()=>rP,RestrictionType:()=>AN,Subscription:()=>jl,getBlankTier:()=>aP});var vh;(function(A){let j;(function(t){t.Visa="visa",t.Mastercard="mastercard",t.Amex="amex",t.Discover="discover",t.UsBankAccount="us_bank_account",t.AcssDebit="acss_debit",t.SepaDebit="sepa_debit",t.Unknown="unknown",t.AmericanExpress="american express"})(j=A.Brand||(A.Brand={}));let e=new Map([[j.Visa,"Visa"],[j.Mastercard,"Mastercard"],[j.Amex,"American Express"],[j.Discover,"Discover"],[j.UsBankAccount,"US Bank Account"],[j.AcssDebit,"ACSS Debit"],[j.SepaDebit,"SEPA Debit"],[j.Unknown,"Unknown"]]);A.getBrandText=t=>e.has(t)?e.get(t)||"Unknown":e.get(j.Unknown)||"Unknown",A.getValidBrand=t=>{switch(t=t?.toLocaleLowerCase(),t){case j.Visa:case j.Mastercard:case j.Discover:case j.AcssDebit:case j.SepaDebit:case j.UsBankAccount:return t;case j.AmericanExpress:case j.Amex:return j.Amex;case void 0:default:return j.Unknown}},A.isExpired=t=>{if(!t.expYear||!t.expMonth)return!1;let r=new Date,a=new Date(t.expYear,t.expMonth);return r>a}})(vh||(vh={}));var QL;(function(A){A.None="none",A.USD="USD",A.CAD="CAD",A.EUR="EUR"})(QL||(QL={}));var Py;(function(A){A.create=j=>Object.freeze({code:"",redeemedAt:"",amount:0,description:"",purchaserEmail:"",...j}),A.CodePrefix="GC"})(Py||(Py={}));var rP;(function(A){A.getSubscriptionLineItems=j=>du(j.lines,e=>e.quantity>0),A.getAdjustmentLineItems=j=>du(j.lines,e=>!e.quantity),A.getDiscountAmount=j=>{if(j.discount&&j.discount.coupon){let e=ti(j.lines,(t,r)=>r.discountable?t+r.amount:t,0);return j.discount.coupon.amountOff||e*j.discount.coupon.percentOff/100}return 0}})(rP||(rP={}));var Xl=W(aA());var wvA=(A,j)=>j?A==="\u2757\uFE0F LastPass Imported Shared Folders Metadata":!1;var Bf;(function(A){A.Monthly="M",A.Yearly="Y",A.Daily="D",A.ThreeYear="3",A.FiveYear="5",A.Other="O"})(Bf||(Bf={}));var gf=pe(Bf,"Frequency"),xh=Xl.readonly(Xl.type({frequency:gf,sortOrder:Xl.number,currency:Xl.string,display:Xl.readonly(Xl.type({amount:Xl.number,isPerUser:Xl.boolean}))}),"Plan");var ZL={"test-feature-flag":!1,"b5web-auto-sign-in":!1,"b5web-mycelium-forward-sign-in":!1,"b5web-dark-mode":!1,"safari-web-extension-iap":!1,"b5web-b2b-signup-requirePhoneNumber":!1,"b5-bpo-client-notification":!1,"b5web-pre-auth-telemetry-data-collection":!1,"pre-auth-telemetry-data-collection":!1,"distributor-sign-up":!1,"distributor-change-of-channel":!1,"b5web-signup-cookie-telemetry":!1,"b5web-feature-rollout-service-traffic-enabled":!1};var hf={"b5web-audit-events-playground":!1,"b2b-individual-vault-reporting":!1,"b2b-complete-trust-identity":!1,"b2b-xam-identity-device-trust-handoff":!1,"b2b-private-vault-reporting-in-business-watchtower":!1,"b5web-core-app-ui-v1-opt-in":!1,"b5web-core-app-ui-v1-opt-out":!1,"b5web-core-app-ui-v1-no-opt":!1,"b5web-device-trust-marketing":!1,"msp-net-seat-usage":!1,"msp-link-existing-account":!1,"b5-msp-account-billed-usage":!1,"msp-force-mfa-enrolment":!1,"msp-edit-managed-account":!1,"msp-limited-access-to-companies":!1,"msp-company-details-page":!1,"msp-email-notifications":!1,"distributor-sign-up":!1,"b5web-linked-accounts":!1,"b5web-linked-accounts-beta":!1,"b5web-billing-signup-payment-form":!1,"b5web-telemetry-data-collection":!1,"b5web-b2b-telemetry-data-collection":!1,"telemetry-data-collection":!1,"b2b-telemetry-setting-UI":!1,"telemetry-feature-flag-context":!1,"b5web-admin-new-invitations-page":!1,"b5web-admin-scim-timer-banner":!1,"b5web-sidebar-refresh-2025":!1,"b5web-sidebar-refresh-2025-phase-2-opt-in":!1,"b5web-sidebar-refresh-2025-phase-3-opt-out":!1,"b5-optimise-vault-access-projections":!1,"b5-extension-report":!1,"b5-extension-report-user-search":!1,"b5-extension-report-csv-download":!1,"hide-lastpass-importer-metadata-vault":!1,"b5web-admin-policies-ui":!1,"ct-minimum-client-version":!1,"b5web-admin-developer-report":!1,"b5web-service-accounts-for-all":!1,"b5-multiple-authentication-types":!1,"b2b-b5web-sidebar-talk-to-sales":!1,"b5web-generate-recovery-code-individual":!1,"b5web-generate-recovery-code-family":!1,"b5-auto-lock-policy":!1,"core-ssh-bookmarks":!1,"op-cli-integration-policy":!1,"b2b-reporting-policy":!1,"b5-policies-framework":!1,"b5web-admin-knox-firewall-rules":!1,"b5web-hosted-provisioning":!1,"b5web-hosted-provisioning-audit-events":!1,"b5web-self-hosted-provisioning-redesign":!1,"b5-public-key-verification":!1,"b5web-admin-custom-emails":!1,"b5web-company-logo-upload":!1,"b5-policies-restrict-failed-login-attempts":!1,"b5-policies-auto-delete-suspended-users":!1,"b5-policies-auto-delete-suspended-users-dev-time-options":!1,"b5-policies-release-channels":!1,"b5-policies-item-password":!1,"b5-developer-addon":!1,"b5web-developer-environments":!1,"b5web-developer-tools-active-page-improvements":!1,"b5-integrations-crowdstrike":!1,"b5-integrations-blumira":!1,"b5-integrations-rapid7":!1,"b5-integrations-stellarcyber":!1,"b5-integrations-2025-events-report-additions":!1,"b2b-xam-sso-configuration-beta-iteration":!1,"b2b-xam-app-catalog":!1,"b5web-b2b-xam-pql":!1,"b5web-b2b-xam-pql-ab-testing":!1,"b5web-business-support-email":!1,"auth-self-serve-migration-v1":!1,"b5-allow-maps-policy":!1,"b5-reverse-mycelium":!1,"authx-verifier":!1,"b5-tsp-new-monthly-pricing":!1,"b5-unlimited-connect-vacs":!1,"b5-invoice-enhancements-add-po-number":!1,"test-account-based-feature":!1,"extension-first-for-sso":!1,"extension-first-for-sso-scim":!1,"extension-first-for-scim":!1,"extension-allowed-policy-enabled":!1,"b5web-progress-timer":!1,"b5web-admin-new-confirm-all-invites-button":!1,"b2b-extension-first-guided-setup":!1,"b5-b2b-app-launcher-policy":!1,"b5web-policy-templates":!1,"b5web-policy-templates-tabs":!1,"b5-dropbox-passwords-import":!1,"b5web-details-pages-performance-fixes-2025":!1,"b5web-details-pages-activity-log-refactor":!1,"b5-msp-remove-nfr-seats":!1};var dgj="20180220_b_business",IvA=()=>({...hf,accountCreationPolicy:!1,accountSettings:!1,activityLog:!1,businessInvitationsPage:!1,businessSupportPhone:!1,businessSupportEmail:!1,clientVaultAccess:!1,customGroups:!1,customTemplates:!1,enforced2FA:!1,fineACL:!1,customDefaultAcl:!1,blockedDomains:!1,keepSuccessfulSignInAttempts:!1,groups:!1,groupPermissions:!1,guests:!1,itemSendingV1:!1,itemSharing:!1,members:!1,mfaDuo:!1,prioritySupport:!1,reports:!1,slack:!1,slackInvite:!1,teamInvite:!1,travelAdminMode:!1,familyChildAccounts:!1,firewallRules:!1,firewallRulesForGroups:!1,masterPasswordPolicy:!1,clientRestrictions:!1,signInAttemptsReport:!1,dontNotifyAdmins:!1,disableWebNotifMenu:!1,peoplePageServerSearch:!1,chronologicallySortedVaultPage:!1,customSupport:!1,dontShareWithOwners:!1,mpRequirementsCustom:!1,limitGroupVaultAccess:!1,vaultsReport:!1,email2fa:!1,replyToInviteEmail:!1,accountTransfer:!1,autoDeleteSuspendedUsers:!1,hibpDomainReport:!1,provisioning:!1,keepAdminWatchtowerReports:!1,viewAdminWatchtowerReports:!1,keepAdminWatchtowerPrivateVaultReports:!1,integrationHubProvisioning:!1,integrationHubDataStreaming:!1,itemUsageDataStreaming:!1,integrationHubMFA:!1,integrationHubAlerts:!1,integrationHubRequestAccessBusiness:!1,integrationHubRequestAccessTeams:!1,integrationHubRequestAccessFamilies:!1,insightsDashboard:!1,churnSurvey:!1,npsSurvey:!1,integrationHubEmailAlias:!1,shareService:!1,serviceAccounts:!1,shareServiceAdminControl:!1,itemSharingDomainRecipients:!1,itemSharingFiles:!1,integrationHubJumpCloud:!1,integrationHubGoogleWorkspace:!1,keepItemUsageAction:!1,singleSignOn:!1,singleSignOnAuth0:!1,singleSignOnAzure:!1,singleSignOnGeneric:!1,singleSignOnGoogle:!1,integrationHubUserManagedServiceAccounts:!1,managedServiceAccountTierAQuota:!1,managedServiceAccountTierBQuota:!1,managedServiceAccountTierARateLimit:!1,integrationHubBrex:!1,integrationHubRamp:!1,phantomIntegration:!1,deferActiveUserSubscriptionDowngrade:!1,liveBusinessChat:!1,emergencyKitSetting:!1,billingInfoDataMigrated:!1,unlockWithPasskey:!1,detailPageLimits:!1,telemetry:!1,automatedQuest:!1,unredeemedFamilyAccountEmails:!1,itemsInWrongAccountPolicy:!1,eraseClientForSuspendedUsers:!1,eraseClientForUsersOutsideGracePeriod:!1,detailedVaultReporting:!1,managedServiceProvider:!1,requireStrongAuthOnSensitiveActions:!1,linkedChildAccounts:!1,linkToParentAccount:!1,upgradeOnParentLink:!1,developerAddon:!1,developerAddonLegacyServiceAccounts:!1,developerAddonLegacyConnect:!1,b2bXamDeviceTrust:!1,b2bXamDeviceTrustEpmIntegration:!1,b2bXam:!1,b2bXamTrelica:!1,ssoMigrationReport:!1,salesAssistBillingOnly:!1,xamBilling:!1}),AN;(function(A){A.Tier="T",A.AccountType="A"})(AN||(AN={}));var aP=A=>({name:A||"",successorTierName:"",accountType:"",sortOrder:0,isPublic:!1,trialDays:0,backupDays:0,guestsIncluded:0,maxGuests:0,membersIncluded:0,maxMembers:0,minQuantity:0,storagePerAccount:0,storagePerUser:0,plans:[],marketingText:{name:"",localizedFeatures:[],defaultPriceDisplayFrequency:Bf.Yearly,viewDetailsURL:""},hasFeature:IvA(),hasGatedFeature:IvA(),tierChangeMappings:[],features:[]});var jl;(function(A){A.create=()=>({freezesAt:"2100-01-01T00:00:00.000Z",guests:0,members:0,provider:"",status:"",storageUsed:0,tier:void 0,settings:{billingCompanyName:"",billingAddress:"",billingEmails:"",billingPurchaseOrderNumber:""},balance:0,cards:[],coupon:void 0,pendingCreditAmount:0,nextInvoice:void 0,hasInvoices:!1,plan:void 0,stripe:void 0,purchaseOrder:void 0,stripePurchaseOrder:void 0,customerAddress:{country:"",provinceOrState:"",zip:""},billingStats:void 0,availableTiers:[],pendingPaymentMethods:[]});let j;(function(e){e.Trial="T",e.Active="A",e.Lapsed="L",e.CancelAtPeriodEnd="C",e.Frozen="F",e.Pending="P"})(j=A.Status||(A.Status={})),A.Provider={Undefined:"U",Stripe:"S",StripePurchaseOrder:"C",PurchaseOrder:"O",ThirdParty:"T",NotBilled:"N",ParentAccount:"R",AppleSubscription:"A",PayPal:"P",GooglePlayStore:"G",ManagedServiceProvider:"M",Distributor:"D",UnifiedBillingPlatform:"B"},A.canBillForAdditionalUsers=e=>!Br([A.Provider.AppleSubscription,A.Provider.GooglePlayStore],e.provider),A.isDirectlyBilled=e=>Br([A.Provider.Stripe,A.Provider.StripePurchaseOrder,A.Provider.Undefined],e.provider),A.isDirectlyBilledPurchaseOrder=e=>e.provider===A.Provider.StripePurchaseOrder,A.shouldShowBilling=e=>Br([A.Provider.Undefined,A.Provider.Stripe,A.Provider.StripePurchaseOrder,A.Provider.AppleSubscription,A.Provider.GooglePlayStore,A.Provider.ParentAccount,A.Provider.PurchaseOrder,A.Provider.ThirdParty,A.Provider.NotBilled,A.Provider.ManagedServiceProvider,A.Provider.Distributor],e.provider),A.shouldShowBillingAndSeats=e=>Br([A.Provider.Undefined,A.Provider.Stripe,A.Provider.Distributor,A.Provider.ThirdParty],e.provider),A.canChangeAccountType=(e,t)=>t?t.isAccountManaged&&t.subscription.provider!==A.Provider.ManagedServiceProvider:!Br([A.Provider.AppleSubscription,A.Provider.GooglePlayStore,A.Provider.PurchaseOrder,A.Provider.ThirdParty,A.Provider.NotBilled,A.Provider.ManagedServiceProvider],e.provider),A.hasFeature=e=>e.tier?e.tier.hasFeature:aP().hasFeature,A.hasGatedFeature=e=>e.tier?e.tier.hasGatedFeature:aP().hasGatedFeature,A.hasPendingCredit=e=>typeof e.pendingCreditAmount=="number"&&e.pendingCreditAmount>0,A.hasAvailableCredit=e=>-1*e.balance+e.pendingCreditAmount>0,A.hasCoupon=e=>e.coupon!==void 0&&e.coupon.stripeCouponUID!==""&&(e.coupon.amountOff||e.coupon.percentOff)!==0,A.hasTrialTimeLeft=(e,t)=>{if((e.provider===A.Provider.Distributor||e.provider===A.Provider.ThirdParty)&&(e.status===j.Trial||e.status===j.Active)&&t){if(!t.trialStartedAt)return!1;let r=new Date(t.trialStartedAt);return r.setDate(r.getDate()+t.trialDays),r.getTime()>Date.now()}if(e.provider===A.Provider.Stripe&&e.stripe!==void 0&&e.stripe.status==="trialing"){let r=H6(e.stripe.trialEnd);return!!r&&r.getTime()>Date.now()}return!1},A.getDefaultCardholderName=e=>{let t=X6(e.cards,r=>r.isDefault);return t?t.name:void 0},A.getCurrency=e=>{if(e.plan)return e.plan.currency;if(e.availableTiers&&e.availableTiers[0]&&e.availableTiers[0].plans&&e.availableTiers[0].plans[0])return e.availableTiers[0].plans[0].currency}})(jl||(jl={}));var jN;(function(A){A.FamilyAnnual="family.annual",A.FamilyMonthly="family.monthly",A.IndividualAnnual="individual.annual",A.IndividualMonthly="individual.monthly"})(jN||(jN={}));var kgj=(A,j)=>{if(j===vh.Brand.Unknown)return`Ending in ${A.slice(-4)}`;let e=String.fromCodePoint(8226).repeat(4);return`${vh.getBrandText(j)} ${e}${A.slice(-4)}`},Cy=A=>A.startsWith("pm_");var ugj=()=>{let A=!!document?.body?.dataset?.onepasswordExtensionVersion,j=!!document?.body?.dataset?.b5xBuildNumber;return A||j};var Vl=W(so()),eN=(A,j)=>new Vl.default.misc.hmac(A,Vl.default.hash.sha256).encrypt(j),pgj=(A,j)=>{let e=Vl.default.codec.hex.toBits(A),t=Vl.default.codec.hex.toBits(j),r=eN(e,t);return Vl.default.codec.hex.fromBits(r)},tN=(A,j)=>{let e=Vl.default.codec.base64url.toBits(A),t=Vl.default.codec.utf8String.toBits(j),r=eN(e,t);return new Vl.default.misc.hmac(r,Vl.default.hash.sha256)},Mp=(A,j)=>{if(A.byteLength!==32)throw new Error("Invalid secret length: "+A.byteLength);let e=Vl.default.codec.bytes.toBits(A),t=Vl.default.codec.utf8String.toBits(j),r=Vl.default.codec.bytes.fromBits(eN(e,t));return new Uint8Array(r)};var _p="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Zn="[a-fA-F\\d]{1,4}",DvA=`
(
(?:${Zn}:){7}(?:${Zn}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Zn}:){6}(?:${_p}|:${Zn}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Zn}:){5}(?::${_p}|(:${Zn}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Zn}:){4}(?:(:${Zn}){0,1}:${_p}|(:${Zn}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Zn}:){3}(?:(:${Zn}){0,2}:${_p}|(:${Zn}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Zn}:){2}(?:(:${Zn}){0,3}:${_p}|(:${Zn}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Zn}:){1}(?:(:${Zn}){0,4}:${_p}|(:${Zn}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::((?::${Zn}){0,5}:${_p}|(?::${Zn}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),mgj=`${_p}\\/(3[0-2]|[12]?[0-9])`,Egj=`${DvA}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`,qf;(function(A){A[A.v4=1]="v4",A[A.v6=2]="v6",A[A.v4cidr=3]="v4cidr",A[A.v6cidr=4]="v6cidr"})(qf||(qf={}));var Bgj=A=>{if(new RegExp(`^${_p}$`).test(A))return qf.v4;if(new RegExp(`^${DvA}$`).test(A))return qf.v6;if(new RegExp(`^${mgj}$`).test(A))return qf.v4cidr;if(new RegExp(`^${Egj}$`).test(A))return qf.v6cidr},ggj=A=>!!Bgj(A);var S6=W(aA());var vf;(function(A){A.OnePasswordForAndroid="A",A.OnePasswordForWeb="B",A.OnePasswordCli="C",A.OnePasswordForIos="I",A.OnePasswordForLinux="L",A.OnePasswordForMac="M",A.OnePasswordForTeamsApi="P",A.OnePasswordScimBridge="S",A.OnePasswordExtension="X",A.OnePasswordForWindows="W",A.BackofficeCli="BOC",A.OnePasswordConnect="CON",A.CsExtension="CSX",A.ExtendedAccessManagement="XAM"})(vf||(vf={}));var PvA=pe(vf,"ClientShortCode"),rN=S6.readonly(S6.intersection([S6.type({shortCode:PvA,buildNum:S6.number},"type"),S6.partial({channel:S6.keyof({beta:!0,nightly:!0,dev:!0}),commitHash:S6.string},"partial")]),"ClientInfo"),hgj=S6.readonly(S6.intersection([S6.type({client:rN,deviceUuid:S6.string},"type"),S6.partial({innerClient:rN,browserName:S6.string,browserVersion:S6.string,osName:S6.string,osVersion:S6.string,architecture:S6.string},"partial")]),"OpUserAgentInit"),qgj=1,xf=(A,j)=>[qgj,A.client.shortCode,OvA(A.client),A.deviceUuid,A.innerClient?.shortCode||"",OvA(A.innerClient),A.browserName||j.name||"unknown",A.browserVersion||j.version||"unknown",A.osName||j.osName||"unknown",A.osVersion||j.osVersion||"unknown",A.architecture||""].join("|"),OvA=A=>A?A.channel&&A.commitHash?[A.buildNum,A.channel,A.commitHash].join("-"):A.channel?[A.buildNum,A.channel].join("-"):A.buildNum.toString(10):"";var oP=W(so());var nP;(function(A){A[A.Minimum=10]="Minimum",A[A.Medium=12]="Medium",A[A.Strict=14]="Strict"})(nP||(nP={}));var Hy,WE,iP=A=>{Hy=A},sP=A=>{WE=A},vgj=()=>!!WE,$u={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",LOWERCASE:"abcdefghijklmnopqrstuvwxyz",DIGITS:"0123456789",SYMBOLS:"#$%&()*+,.;<=>?@[]^{}"},Lp=(A,j)=>{let e="";for(let r=0;r<j;++r){let a=F6(0,A.length-1);e+=A[a]}let t=j*Math.log(A.length)/Math.log(2);return[e,t]},aN=A=>{if(!Hy)throw new Error("Word list is not loaded");A=Math.max(1,Math.min(20,Math.ceil(A)));let j=[];for(let t=1;t<=A;t++){let r=Hy[F6(0,Hy.length-1)];r!==void 0&&j.push(r)}let e=A*Math.log(Hy.length)/Math.log(2);return[j,e]},ff=(A,j)=>{if(!A)return 0;let e=[...A].length;typeof j=="string"&&j.length>0&&A.toLowerCase().includes(j.toLowerCase())&&(e-=[...j].length+1,e=Math.max(0,e));let t=fgj(e);if(t=t*2,WE&&WE.includes(A.toLowerCase()))return 1;let r=A.toLowerCase();r=r.replace(/0/g,"o"),r=r.replace(/1/g,"l"),r=r.replace(/3/g,"e"),r=r.replace(/4/g,"a"),r=r.replace(/5/g,"s"),r=r.replace(/7/g,"t"),WE&&WE.includes(r)&&(t=4);let a=[$u.LOWERCASE,$u.UPPERCASE,$u.DIGITS," ",`.?!,;:-"'()`,"`~@#$%^&*[]{}+=_|\\/<>"],n=0;for(let o of a)xgj(A,o)&&(n+=1);return t+=(n-1)*6,Math.min(100,Math.round(t))},xgj=(A,j)=>{if(!A)return!1;let e=new Set(j);return[...A].some(t=>e.has(t))},fgj=A=>{let j=[0,4,6,8,10,12,14,16,18,20,21],e=0;return A>20&&(e+=A-20,A=20),A>10&&(e+=(A-10)*1.5,A=10),e+=j[A]??0,e},Ggj=A=>{let j=A.toLowerCase(),e=Fgj(j);return WE?b0(WE,t=>t.length<nP.Minimum?!1:t===j||e.test(t)):!1},Fgj=A=>{let j={0:"o",1:"[li]",2:"too?",3:"e",4:"(a|for)",5:"s",7:"t",8:"a(te?)?","@":"at?",$:"s",x:"(c?ks|x)",z:"[sz]"},e="",t="";for(let r of[...A])j[r]?(e+=CvA(t)+j[r],t=""):t+=r;return e+=CvA(t),new RegExp(`^${e}$`)},CvA=A=>A?B9(A):"",nN=A=>{if(A.length===0)return"";let j=oP.hash.sha256.hash(A);return oP.codec.base64url.fromBits(j).replace(/=+$/,"")};var oN=W(Io()),Ky=(...A)=>x9(A,(j,e)=>(t,r)=>e(t,r)||j(t,r),(j,e)=>0),Rd=A=>j=>(e,t)=>A(j(e),j(t)),bgj=(A,j=!0)=>j?A:Gf(A),Gf=A=>(j,e)=>A(e,j),HvA=(A=0,j=0)=>A-j,TvA=(A=!1,j=!1)=>A===j?0:A?1:-1,Ty=(A="",j="")=>A.localeCompare(j,void 0,{numeric:!0}),Gh="0001-01-01T00:00:00Z",iN=(A=new Date(Gh),j=new Date(Gh))=>A.getTime()-j.getTime(),KvA=(A=Gh,j=Gh)=>SvA(A).diff(SvA(j)),SvA=(A=Gh)=>{let j=(0,oN.default)(A);return j.isValid()?j:(0,oN.default)(Gh)},ni={booleans:Rd(TvA),dates:Rd(iN),moments:Rd(KvA),numbers:Rd(HvA),strings:Rd(Ty),desc:{booleans:Rd(Gf(TvA)),dates:Rd(Gf(iN)),moments:Rd(Gf(KvA)),numbers:Rd(Gf(HvA)),strings:Rd(Gf(Ty))}};var ygj=(A,j)=>{let e=new Set(j);return[...A].filter(t=>e.has(t)).join("")};var $gj=A=>A.account?A.account?.hasFeature.singleSignOn||A.account?.hasFeature.unlockWithPasskey:!1,MvA=8,wgj=()=>{let A=$u.UPPERCASE,[j,e]=Lp(A,MvA);return j};var sN=A=>A?.hasFeature["b2b-private-vault-reporting-in-business-watchtower"]&&A?.hasFeature.keepAdminWatchtowerPrivateVaultReports||!1;var Igj=A=>A?.hasBackOfficeFeature.detailedVaultReporting&&A?.hasUnleashFeature["b2b-individual-vault-reporting"]||!1,lN=(A,j,e)=>{if(!j)return!1;if(!e||!Bh(e)||A.length===0)return!0;let t=e.split("@");return t[1]?A.includes(t[1].trim().toLowerCase()):!0};var _vA=W(Io()),Sy=A=>A instanceof Date?A.valueOf():typeof A=="string"?(0,_vA.default)(A).valueOf():0;var LvA=A=>{let j=A;return A.split("://").length===1&&(j="https://"+j),j.toLowerCase()},cN=A=>{let j=A.flatMap(e=>{let t=LvA(e);try{return new URL(t).host}catch{return}}).filter(e=>e!==void 0);return y0(j)},Dgj=A=>{let j=A.replace(/^\w+:\/\//,"");if(!j)return"";try{return new URL(`https://${j}`).hostname.replace(/^www\./,"")}catch{return""}};var dN=(A,j)=>{if(j.length===0)return!1;let e=A.username?A.username.value:"";if(!e)return!1;let t=e.split("@");return t[1]?!j.includes(t[1].trim().toLowerCase()):!1};var My=(A,j)=>{let e=!1;return async()=>{if(!e&&typeof A=="function"){e=!0;try{await A(await j())}catch(t){throw e=!1,t}}}};var Fh={};Yt(Fh,{EventEmitter:()=>kN});var kN=class{constructor(){this._events={}}emit(j,...e){let t=this._events["~"+j];return t?(t.forEach(r=>{r.once&&this.off(j,r.fn,!0),r.fn(...e)}),!0):!1}on(j,e,t=!1){let r={fn:e,once:t},a="~"+j,n=this._events[a];return n?n.push(r):this._events[a]=[r],this}off(j,e,t=!1){let r="~"+j,a=this._events[r];if(!a)return this;let n=a.filter(o=>o.fn!==e||t&&!o.once);return n.length>0?this._events[r]=n:delete this._events[r],this}removeAllListeners(j){return j?delete this._events["~"+j]:this._events={},this}};var Lt={};Yt(Lt,{ClientStateChanged:()=>Hgj,LanguageRefreshed:()=>Mgj,RecoveryStarted:()=>Ygj,ReloadForced:()=>Jgj,ServerChanged:()=>Tgj,ServerChangedFromSelf:()=>Lgj,ServerChangedWithData:()=>Sgj,ServerConnected:()=>Kgj,SessionExpired:()=>Ugj,SessionInitError:()=>zgj,SessionInitialized:()=>Ngj,SessionRequestIdChanged:()=>Rgj,SignedIn:()=>Xgj,SignedOut:()=>Vgj,SpecialNavChanged:()=>Pgj,TimeoutWarning:()=>Wgj,TopBarContentChanged:()=>Ogj,UniverseReloaded:()=>Cgj,UsersChanged:()=>_gj});var Ogj="TopBarContentChanged",Pgj="SpecialNavChanged",Cgj="UniverseReloaded",Hgj="ClientStateChanged",Tgj="ServerChanged",Kgj="ServerConnected",Sgj="ServerChangedWithData",Mgj="LanguageRefreshed",_gj="UsersChanged",Lgj="ServerChangedFromSelf",Ngj="SessionInitialized",zgj="SessionInitError",Rgj="SessionRequestIdChanged",Jgj="ReloadForced",Ugj="SessionExpired",Xgj="SignedIn",Vgj="SignedOut",Wgj="TimeoutWarning",Ygj="RecoveryStarted";var uN={};Yt(uN,{DEFAULT_DIGITS:()=>Qgj,DEFAULT_PERIOD:()=>Zgj,generateSecret:()=>Ahj});var NvA=W(so());var Qgj=6,Zgj=30,Ahj=()=>NvA.codec.base32.fromBits(ia(Vr(10)));var pt=()=>{throw new Error("JSON.stringify has been disabled for this type. Seralization for this type is either disallowed, or must be invoked explicitly.")};var Lc=W(aA());var _y,Ff="mp",jhj=16,zvA=jhj*8,bf="A256GCM",pN="AES-GCM",ehj={name:pN,length:256},Np=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_Aes256EncryptionResult",this.data=j,this.iv=e}};Np.new=A=>new Np(A.data,A.iv);var gs=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_Aes256EncryptionKey",this.toJSON=pt,this.encryptRaw=async(t,r=void 0)=>{let a=await thj(),n={name:pN,iv:a,tagLength:zvA};r!==void 0&&(n.additionalData=r);let o=await we.encrypt(n,this.encryptionKey,t),i=new Uint8Array(o);return Np.new({data:i,iv:a})},this.decryptRaw=async(t,r=void 0)=>{let a={name:pN,iv:t.iv,tagLength:zvA};r!==void 0&&(a.additionalData=r);let n=await we.decrypt(a,this.encryptionKey,t.data);return new Uint8Array(n)},this.exportJwk=async()=>{let t=await we.exportKey("jwk",this.encryptionKey);return sj({...t,kid:this.kid},co).unwrap()},this.exportCryptoKey=async()=>this.encryptionKey,this.exportRawBytes=async()=>new Uint8Array(await we.exportKey("raw",this.encryptionKey)),this.encryptionKey=j,this.kid=e}};_y=gs;gs.generate=async()=>_y.fromRawBytes(Vr(32),fe());gs.fromRawBytes=async(A,j)=>{if(A.length!==32)throw new Error("Bad key len");let e=await we.importKey("raw",A,ehj,!0,["encrypt","decrypt"]);return new _y(e,j)};gs.inspectJwk=async A=>{if(A.alg!==bf)throw new Error(`Unexpected alg: ${A.alg}`);if(A.ext!==!0)throw new Error("Unexpected ext");if(A.key_ops.length!==2||!A.key_ops.includes("encrypt")||!A.key_ops.includes("decrypt"))throw new Error(`Invalid key_ops: ${JSON.stringify(A.key_ops)}`);if(A.kty!=="oct")throw new Error(`Unexpected kty: ${A.kty}`)};gs.fromJwk=async A=>{await _y.inspectJwk(A);let j=ZA(A.k);return _y.fromRawBytes(j,A.kid)};var thj=async()=>Vr(12);var Ly,RvA="b5+jwk+json",Bn=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_GENERALIZED_KEYS_JwebAes256EncryptionKey",this.toJSON=pt,this.encryptRaw=async(e,t=void 0)=>this.encryptionKey.encryptRaw(e,t),this.decryptRaw=async(e,t=void 0)=>this.encryptionKey.decryptRaw(e,t),this.processJweB=(e,t=!1)=>{if(e.kid!==this.kid)throw new Error("Invalid JweB: bad KID");if(e.enc!==bf)throw new Error("Invalid JweB: bad enc");if(e.cty!==RvA)throw new Error("Invalid JweB: bad cty");if(e.iv===void 0||e.iv.length<12)throw new Error("Invalid JweB: bad iv length");if(e.data.length<32)throw new Error("Invalid JweB: bad data length");let r=ZA(e.data),a=ZA(e.iv),n=Np.new({data:r,iv:a});if(t){if(this.kid!==Ff)throw new Error("Cannot extract derivation info if not MP");if(e.alg===void 0||e.p2c===void 0||e.p2s===void 0)return{encrypted:n,kdfInfo:void 0};let o={alg:e.alg,enc:e.enc,iterations:e.p2c,salt:e.p2s};return{encrypted:n,kdfInfo:o}}if(e.alg!==void 0||e.p2c!==void 0||e.p2s!==void 0)throw new Error("Unexpected derivation info");return{encrypted:n,kdfInfo:void 0}},this.encryptJweB=async(e,t=void 0)=>{let{data:r,iv:a}=await this.encryptRaw(e,t);return{kid:this.kid,enc:bf,cty:RvA,iv:tj(a),data:tj(r)}},this.decryptJweB=async(e,t=void 0)=>{let{encrypted:r,kdfInfo:a}=this.processJweB(e,!1);return this.decryptRaw(r,t)},this.encryptAndEncodeUnauthenticatedKdfInfo=async(e,t,r=void 0)=>{let a=await this.encryptJweB(e,r);return a.alg=t.alg,a.p2c=t.iterations,a.p2s=t.salt,a},this.decryptAndExtractUnauthenticatedKdfInfo=async(e,t=void 0)=>{let{encrypted:r,kdfInfo:a}=this.processJweB(e,!0);return{plaintext:await this.decryptRaw(r,t),unverifiedKdfInfo:a}},this.exportJwk=async()=>this.encryptionKey.exportJwk(),this.exportCryptoKey=async()=>this.encryptionKey.exportCryptoKey(),this.exportRawBytes=async()=>this.encryptionKey.exportRawBytes(),this.encryptionKey=j,this.kid=j.kid}};Ly=Bn;Bn.generate=async()=>new Ly(await gs.generate());Bn.fromRawBytes=async(A,j)=>Ly.fromAes256Key(await gs.fromRawBytes(A,j));Bn.fromAes256Key=async A=>new Ly(A);Bn.fromJwk=async A=>Ly.fromAes256Key(await gs.fromJwk(A));var el=async(A,j,e,t,r)=>{let a=await we.importKey("raw",j,{name:"HKDF"},!1,["deriveBits"]),n={name:"HKDF",hash:A,info:e,salt:t},o=await we.deriveBits(n,a,r*8);return new Uint8Array(o)};var Pr;(function(A){A.Sha256="SHA-256",A.Sha384="SHA-384",A.Sha512="SHA-512"})(Pr||(Pr={}));var Wl=async(A,j=Pr.Sha256)=>{let e=await we.digest({name:j},A);return new Uint8Array(e)};var UvA=1e5,JvA=1e4,lP=65e4,XvA=128,rhj=async(A,j,e,t,r)=>{if(t<JvA)throw new Error(`PBKDF2 cannot operate with fewer than ${JvA} interations, ${t} was supplied.`);let a=Dj(j),n=await we.importKey("raw",a,{name:"PBKDF2"},!1,["deriveBits"]),o={name:"PBKDF2",salt:e,iterations:t,hash:{name:A}},i=await we.deriveBits(o,n,r*8);return new Uint8Array(i)},Ny=async(A,j,e,t)=>{let r=ahj(A);return rhj(r.alg,j,e,t,r.length)},mN="PBES2-HS256";var cP="PBES2g-HS256";var dP=cP,ahj=A=>{switch(A){case mN:case cP:return{alg:Pr.Sha256,length:32};default:throw new Error(`Invalid PBKDF2 alg: ${A}`)}};var wu,kP=Lc.readonly(Lc.exact(Lc.type({alg:Lc.string,iterations:Lc.number,salt:Lc.string,enc:Lc.string})),"KeyDerivationInfo"),Zt=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_Auk",this.toJSON=pt,this.KID=()=>"mp",this.exportJwk=async()=>this.key.exportJwk(),this.exportJwkJSON=async()=>JSON.stringify(await this.key.exportJwk()),this.verifyMasterPassword=async(t,r)=>{let n=await(await wu.derive(t,r)).__crypto_internal.deriveConfirmationKey();return(await this.__crypto_internal.deriveConfirmationKey()).every((i,s)=>i===n[s])},this.__crypto_internal={deriveConfirmationKey:async()=>{let t=new Uint8Array;return el(Pr.Sha256,await this.key.exportRawBytes(),Dj("confirmationsigner"),t,32)}},this.encrypt=async t=>{if(this.derivationInfo===void 0)throw new Error("Missing derivation info for AUK");return this.key.encryptAndEncodeUnauthenticatedKdfInfo(t,this.derivationInfo)},this.decrypt=async t=>{let{plaintext:r,unverifiedKdfInfo:a}=await this.key.decryptAndExtractUnauthenticatedKdfInfo(t);return this.derivationInfo===void 0&&(this.derivationInfo=a),r},this.key=j,this.derivationInfo=e}};wu=Zt;Zt.fromRawBytes=async(A,j)=>{if(A.length!==32)throw new Error("Bad key len");return new wu(await Bn.fromRawBytes(A,Ff),j)};Zt.generateForTrustedDevice=async()=>wu.fromRawBytes(Vr(32),uP());Zt.__testGenerate=async()=>wu.fromRawBytes(Vr(32),uP());Zt.fromJwk=async(A,j=void 0)=>{if(A.kid!==Ff)throw new Error("KeyID for Auk is incorrect");return new wu(await Bn.fromJwk(A),j)};Zt.fromJwkWithRandomKdfInfoSsoOnly=async A=>{if(A.kid!==Ff)throw new Error("KeyID for Auk is incorrect");return new wu(await Bn.fromJwk(A),uP())};Zt.deriveKdfBytes=async(A,j)=>{let{email:e,password:t}=j,{alg:r,iterations:a,salt:n}=A,o=e.trim().toLowerCase(),i=ohj(t);if(r.startsWith("PBES2-")){let s=await nhj(t);return Ny(r,`${o}:${s}`,ZA(n),a)}else if(r.startsWith("PBES2g-")){let s=Dj(o),l=Dj(r),d=await el(Pr.Sha256,ZA(n),l,s,32);return Ny(r,i,d,a)}else throw new Error("Unknown derivation alg")};Zt.derive=async(A,j)=>{let{email:e,password:t,secretKey:r}=j,a=await wu.deriveKdfBytes(A,{email:e,password:t}),n=await r.combineWithBytes(a);return wu.fromRawBytes(n,A)};Zt.deriveDefaultKdf=async A=>wu.derive(uP(),A);var uP=()=>({alg:dP,iterations:lP,enc:bf,salt:ML(XvA)}),nhj=async A=>{if(A.length===0)return"";let j=await Wl(Dj(A),Pr.Sha256);return tj(j).replace(/=+$/,"")},ohj=A=>A?A.trim().normalize("NFKD"):"";var QvA=W(gh());var YE=W(gh());var VvA,yf=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SessionKey",this.toJSON=pt,this.rawKey=j}};VvA=yf;yf.__crypto_internal={new:async A=>new VvA(A)};var EN,WvA,zp;(function(A){A.Group4096="4096"})(zp||(zp={}));var Iu;(function(A){A.Srp="SRP-",A.SrpG="SRPg-"})(Iu||(Iu={}));var oi=class{constructor(j,e){this.toString=()=>this.prefix+this.srpGroupName,this.prefix=j,this.srpGroupName=e}get group(){return EP[this.srpGroupName]}};oi.fromParts=(A,j)=>new oi(A,j);oi.fromString=A=>{let j=shj[A];if(!j)throw new Error("Unknown SRP method");return j};var ihj=[oi.fromParts(Iu.Srp,zp.Group4096),oi.fromParts(Iu.SrpG,zp.Group4096)],shj=Object.fromEntries(ihj.map(A=>[A.toString(),A])),lhj=zp.Group4096,chj=Iu.SrpG,mP=oi.fromParts(chj,lhj),EP={[zp.Group4096]:{N:new YE.BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",16),g:new YE.BigInteger("5")}},QE=class{constructor(j,e,t,r,a,n){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpStarter",this.toJSON=pt,this.recieveBigBhex=async o=>{let{g:i,N:s}=this.group,l=new YE.BigInteger(o,16);if(l.mod(s).equals(YE.BigInteger.ZERO)||l.mod(s).equals(YE.BigInteger.ONE))throw new Error("Invalid SRP B value");let[d,k]=await Promise.all([dhj(this.group),khj(this.group,this.bigA,l)]),u=this.littleA.add(k.multiply(this.x)),m=l.subtract(i.modPow(this.x,s).multiply(d)),I=Dj(pP(m.modPow(u,s))),S=await Wl(I,Pr.Sha256);return zy.__crypto_internal.new(S,this.group,this.bigA,l,this.salt,this.identity)},this.littleA=j,this.bigA=e,this.group=t,this.x=r,this.salt=a,this.identity=n}get bigAhex(){return pP(this.bigA)}};EN=QE;QE.__crypto_internal={new:async(A,j,e,t)=>{let r=gN(Vr(32)),{g:a,N:n}=j,o=a.modPow(r,n);return new EN(r,o,j,A,e,t)},__testNew:async(A,j,e,t,r,a)=>new EN(r,a,j,A,e,t)};var pP=A=>A.toString(16).replace(/^(0x)?0*/,""),gN=A=>new YE.BigInteger(Pn(A),16),$f=A=>wp(A.toString(16)),dhj=async A=>{let{g:j,N:e}=A,t=BN(j,e),r=await Wl(Co([$f(e),t]),Pr.Sha256);return gN(r)},BN=(A,j)=>{let e=wp(j.toString(16)).byteLength,t=wp(A.mod(j).toString(16)),r=e-t.byteLength;if(r===0)return t;if(r<0)return t.slice(-2);let a=new Uint8Array(e);return a.set(t,r),a},khj=async(A,j,e)=>{let{g:t,N:r}=A,a=BN(j,r),n=BN(e,r),o=await Wl(Co([a,n]),Pr.Sha256),i=gN(o);if(i.mod(r).equals(YE.BigInteger.ZERO))throw new Error("Invalid SRP u value (u mod N = 0)");return i},zy=class{constructor(j,e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UnconfirmedSrpSessionKey",this.toJSON=pt,this.recieveServerHash=async r=>{let a=await Wl(Co([$f(this.bigA),this.m,this.rawKey]),Pr.Sha256),n=tj(a);if(r!==n)throw new Error("Invalid server hash");return yf.__crypto_internal.new(this.rawKey)},this.__crypto_internal={rawKey:()=>this.rawKey},this.rawKey=j,this.m=e,this.bigA=t}get clientHash(){return tj(this.m)}};WvA=zy;zy.__crypto_internal={new:async(A,j,e,t,r,a)=>{let n=await uhj(j,a,r,e,t,A);return new WvA(A,n,e)}};var uhj=async(A,j,e,t,r,a)=>{let{g:n,N:o}=A,[i,s]=await Promise.all([Wl($f(o),Pr.Sha256),Wl($f(n),Pr.Sha256)]),l=phj(i,s),d=await Wl(Dj(j),Pr.Sha256);return Wl(Co([l,d,e,$f(t),$f(r),a]),Pr.Sha256)},phj=(A,j)=>{if(A.length!==j.length)throw new Error("cannot xor with mismatched lengths");let e=new Uint8Array(A.length);for(let[t,r]of A.entries()){let a=j[t];if(a===void 0)throw new Error("xor: bByte undefined");e[t]=r^a}return e};var YvA,ZE=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpV",this.toJSON=pt,this.exportServerHex=async()=>pP(this.v),this.group=j,this.v=e}};YvA=ZE;ZE.__crypto_internal={fromBigInt:async(A,j)=>new YvA(A,j)};var BP,hN=32,Ho=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpX",this.toJSON=pt,this.exportBytes=()=>{let e=wp(this.x.toString(16)),t=hN-e.length;if(t===0)return e;if(t<0)throw new Error(`SrpX bytes exceeded expected length ${t}`);let r=new Uint8Array(hN).fill(0);return r.set(e,t),r},this.exportHex=()=>Pn(this.exportBytes()),this.exportBase64Url=()=>tj(wp(this.exportHex())),this.verifier=async e=>{let{g:t,N:r}=e;return ZE.__crypto_internal.fromBigInt(e,t.modPow(this.x,r))},this.beginAuth=async(e,t,r)=>QE.__crypto_internal.new(this.x,e,t,r),this.x=j}};BP=Ho;Ho.fromRawBytes=async A=>{if(A.length>hN)throw new Error("Bad key len");return new BP(new QvA.BigInteger(Pn(A),16))};Ho.generateForTrustedDevice=async()=>BP.fromRawBytes(Vr(32));Ho.fromHex=async A=>BP.fromRawBytes(wp(A));var Ry,ZvA=AB.readonly(AB.exact(AB.type({srpx:AB.string,auk:co})),"SerializedCredentialBundle"),ii=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_CredentialBundle",this.toJSON=pt,this.__crypto_internal={serialize:async()=>lt(ZvA.encode({srpx:tj(this.srpx.exportBytes()),auk:await this.auk.exportJwk()}))},this.srpx=j,this.auk=e}};Ry=ii;ii.new=async A=>new Ry(A.srpx,A.auk);ii.generateForTrustedDevice=async()=>Ry.new({srpx:await Ho.generateForTrustedDevice(),auk:await Zt.generateForTrustedDevice()});ii.forActiveUser=async A=>{if(!A.user?.masterKey)throw new Error("No auk found");let j=A.user?.masterKey;if(!(j instanceof Zt))throw new TypeError("Master key is not a valid Auk");if(!A.session.auth?.srpX)throw new Error("No srpx found");let e=await Ho.fromHex(A.session.auth.srpX);return Ry.new({srpx:e,auk:j})};ii.unsafeIfInputNotTrustworthyDeserialize=async A=>{let j=sj(A,Ue.pipe(ZvA)).unwrap();return Ry.new({srpx:await Ho.fromRawBytes(ZA(j.srpx)),auk:await Zt.fromJwkWithRandomKdfInfoSsoOnly(j.auk)})};var AxA=W(gh()),Jy=W(so()),Uy=A=>{let j=Jy.codec.hex.fromBits(Jy.codec.base64url.toBits(A));return new AxA.BigInteger(j,16)},jxA=A=>{let j=A.toString(16),e=j.length%2===1?"0"+j:j;return Jy.codec.base64url.fromBits(Jy.codec.hex.toBits(e))};var Jd=A=>{if(A.length===0||A[0]!==0)return A;let j=0;for(;j<A.length&&A[j]===0;)j+=1;return A=A.subarray(j),A};var qN,exA,gP,txA,rxA="b5+jwk+json",Ud;(function(A){A.OAEP_256="RSA-OAEP-256",A.OAEP="RSA-OAEP"})(Ud||(Ud={}));var mhj={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},Ehj={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},Xy={[Ud.OAEP]:Ehj,[Ud.OAEP_256]:mhj},Bhj=Symbol(),jB=class{constructor(j,e,t){this[exA]=0,this.toJSON=pt,this.encryptRaw=async r=>{if(r.length>2048/8)throw new Error("Plaintext is too large.");return new Uint8Array(await we.encrypt(Xy[this.alg],this.key,r))},this.encryptJweB=async r=>({kid:this.kid,enc:this.alg,cty:rxA,data:tj(await this.encryptRaw(r))}),this.exportJwk=async()=>{let r=await we.exportKey("jwk",this.key);return sj({...r,kid:this.kid},yu).unwrap()},this.kid=j,this.key=e,this.alg=t}};qN=jB,exA=Bhj;jB.fromComponents=async(A,j,e)=>{let{e:t,n:r}=e,a={kid:A,ext:!0,key_ops:["encrypt"],kty:"RSA",alg:j,e:tj(Jd(t)),n:tj(Jd(r))},n=await we.importKey("jwk",a,Xy[j],!0,["encrypt"]);return new qN(A,n,j)};jB.fromJwk=async A=>{if(A.alg!==Ud.OAEP&&A.alg!==Ud.OAEP_256)throw new Error(`Unexpected algorithm "${A.alg}"`);return qN.fromComponents(A.kid,A.alg,{e:ZA(A.e),n:ZA(A.n)})};var ghj=Symbol(),wf=class{constructor(j,e,t){this[txA]=0,this.toJSON=pt,this.decryptRaw=async r=>we.decrypt(Xy[this.alg],this.key,r).then(a=>new Uint8Array(a)),this.decryptJweB=async r=>{if(rxA!==r.cty)throw new Error("Unexpected content type");if(r.kid!==this.kid)throw new Error("Content encrypted with wrong key");if(r.enc!==this.alg)throw new Error(`Unexpected algorithm "${r.enc}", expected: "${this.alg}"`);let a=ZA(r.data);if(a.length===0)throw new Error("Invalid ciphertext, zero length");return this.decryptRaw(a)},this.exportJwk=async()=>{let r=await we.exportKey("jwk",this.key);return sj({...r,kid:this.kid},Nd).unwrap()},this.publicKey=async()=>{let{e:r,n:a}=await this.exportJwk();return jB.fromComponents(this.kid,this.alg,{e:ZA(r),n:ZA(a)})},this.kid=j,this.key=e,this.alg=t}};gP=wf,txA=ghj;wf.fromComponents=async(A,j,e)=>{let{e:t,n:r,d:a,dp:n,dq:o,p:i,q:s,qi:l}=e,d={kid:A,ext:!0,key_ops:["decrypt"],kty:"RSA",alg:j,e:tj(Jd(t)),n:tj(Jd(r)),d:tj(Jd(a)),dp:tj(Jd(n)),dq:tj(Jd(o)),p:tj(Jd(i)),q:tj(Jd(s)),qi:tj(Jd(l))};d=qhj(d);let k=await we.importKey("jwk",d,Xy[j],!0,["decrypt"]);return new gP(A,k,j)};wf.fromJwk=async A=>{if(A.alg!==Ud.OAEP&&A.alg!==Ud.OAEP_256)throw new Error("Unexpected algorithm");return gP.fromComponents(A.kid,A.alg,{e:ZA(A.e),n:ZA(A.n),d:ZA(A.d),dp:ZA(A.dp),dq:ZA(A.dq),p:ZA(A.p),q:ZA(A.q),qi:ZA(A.qi)})};wf.generate=async(A=Ud.OAEP)=>{if(A!==Ud.OAEP&&A!==Ud.OAEP_256)throw new Error("Unexpected algorithm");let j=await we.generateKey(Xy[A],!0,["encrypt","decrypt"]);return new gP(fe(),j.privateKey,A)};var hhj=A=>Uy(A.p).compareTo(Uy(A.q))<0,qhj=A=>hhj(A)?vhj(A):A,vhj=A=>({...A,p:A.q,q:A.p,dp:A.dq,dq:A.dp,qi:xhj(A.q,A.p)}),xhj=(A,j)=>jxA(Uy(j).modInverse(Uy(A)));var vN,hs=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountKey",this.toJSON=pt,this.KID=()=>this.key.kid,this.exportJwk=async()=>this.key.exportJwk(),this.encryptSelfWithKeyset=async e=>(await jB.fromJwk(e)).encryptJweB(lt(await this.key.exportJwk())),this.encrypt=async e=>this.key.encryptJweB(e),this.decrypt=async e=>this.key.decryptJweB(e),this.key=j}};vN=hs;hs.generate=async()=>new vN(await Bn.generate());hs.fromJwk=async A=>new vN(await Bn.fromJwk(A));var tl=W(aA());var hP=(A,j)=>tl.exact(tl.type(A),j),fhj=(A,j)=>tl.exact(tl.partial(A),j),oxA=1,eB=2,qs=class{constructor(j,e,t,r){this.toBytes=()=>{let a=new ArrayBuffer(1+eB+this.kid.length+eB+this.purpose.length+eB+this.content.length),n=new DataView(a),o=0;n.setUint8(o,oxA),o+=1;let i=Dj(this.kid);o+=axA(n,o,i);let s=Dj(this.purpose);if(o+=axA(n,o,s),o+=ixA(n,o,this.purposeVersion),o+=sxA(n,o,this.content),o!==a.byteLength)throw new Error("written invalid byte length");return new Uint8Array(a)},this.toBase64Url=()=>tj(this.toBytes()),this.toJSON=this.toBase64Url,this.kid=j,this.purpose=e,this.purposeVersion=t,this.content=r}};qs.fromParts=A=>new qs(A.kid,A.purpose,A.purposeVersion,A.content);qs.fromBytes=A=>{let j=A.buffer,e=new DataView(j),t=0,r=e.getUint8(t);if(t+=1,r!==oxA)throw new Error(`unknown envelope format version ${r}`);let{bytes:a,len:n}=nxA(e,t);t+=n;let{bytes:o,len:i}=nxA(e,t);t+=i;let s=lxA(e,t);t+=eB;let l=V6(a),d=V6(o),k=cxA(e,t,e.byteLength-t);return qs.fromParts({kid:l,purpose:d,purposeVersion:s,content:k})};qs.fromBase64Url=A=>qs.fromBytes(ZA(A));var ixA=(A,j,e)=>{if(e>65535||e<0)throw new Error("unsupported number");return A.setUint16(j,e,!0),eB},sxA=(A,j,e)=>{for(let[t,r]of e.entries())A.setUint8(j+t,r);return e.length},axA=(A,j,e)=>{let t=ixA(A,j,e.length);return eB+sxA(A,j+t,e)},lxA=(A,j)=>A.getUint16(j,!0),cxA=(A,j,e)=>{let t=new Uint8Array(e);for(let r=0;r<e;r++)t[r]=A.getUint8(j+r);return t},nxA=(A,j)=>{let e=lxA(A,j),t=cxA(A,j+eB,e);return{len:eB+e,bytes:t}},bh=new tl.Type("Envelope",A=>A instanceof qs,(A,j)=>{if(typeof A!="string")return tl.failure(A,j,"input is not a string");let e;try{e=qs.fromBase64Url(A)}catch{return tl.failure(A,j,"failed to decode input")}return tl.success(e)},A=>A.toBase64Url());var rl=W(aA());var xN,dxA="1P_ENVELOPE_VAULT_REPORTING_ITEM_SNAPSHOT",kxA=1,uxA=hP({encKey:rl.string,data:rl.string,additionalData:rl.string},"VaultSnapshotContent"),Vy=hP({clientCreatedAt:rl.string,hasUrl:rl.boolean,itemVersion:rl.number,payloadVersion:rl.number,templateUuid:rl.string,timestamp:rl.string,vaultItemUuid:rl.string,isBusinessRelated:rl.boolean},"VaultSnapshotAdditionalData"),Rp=class{constructor(j,e,t,r){this.toEnvelope=()=>{let a={encKey:tj(this.encKey),data:tj(this.data),additionalData:tj(this.unauthenticatedRawAd)};return qs.fromParts({kid:this.kid,purpose:dxA,purposeVersion:kxA,content:Ue.pipe(uxA).encode(a)})},this.kid=j,this.encKey=e,this.data=t,this.unauthenticatedRawAd=r,this.unauthenticatedDecoded=sj(r,Ue.pipe(Vy)).unwrap()}};xN=Rp;Rp.fromEnvelope=async A=>{if(A.purpose!==dxA)throw new Error("invalid purpose");if(A.purposeVersion!==kxA)throw new Error("invalid purpose version");let j=sj(A.content,Ue.pipe(uxA)).unwrap();return new xN(A.kid,ZA(j.encKey),ZA(j.data),ZA(j.additionalData))};Rp.fromPieces=(A,j,e,t)=>new xN(A,j,e,t);var fN,Nc=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_GENERALIZED_KEYS_HkdfKey",this.toJSON=pt,this.deriveExportableCryptoKey=async(t,r,a)=>we.deriveKey({name:"HKDF",...t},this.kdfKey,r,!0,a),this.deriveAes256Key=async(t,r)=>{let a=await this.deriveExportableCryptoKey(t,{name:"AES-GCM",length:256},["encrypt","decrypt"]),n=new Uint8Array(await we.exportKey("raw",a));return gs.fromRawBytes(n,r)},this.deriveCryptoKey=async(t,r,a)=>we.deriveKey({name:"HKDF",...t},this.kdfKey,r,!1,a),this.hkdfOutput=async t=>this.hkdfOutputWithCustomSalt({hash:t.hash,info:t.info,salt:new Uint8Array,len:t.len}),this.hkdfOutputWithCustomSalt=async t=>{let r={name:"HKDF",hash:t.hash,info:t.info,salt:t.salt};return new Uint8Array(await we.deriveBits(r,this.kdfKey,t.len*8))},this.exportRawIkm=()=>this.rawIkm,this.rawIkm=j,this.kdfKey=e,this.length=j.length}};fN=Nc;Nc.generate=async()=>fN.fromRawBytes(Vr(32));Nc.fromRawBytes=async A=>{if(A.length<32)throw new Error("Bad key len");let j=await we.importKey("raw",A,{name:"HKDF"},!1,["deriveKey","deriveBits"]);return new fN(A,j)};var If,BxA,tB;(function(A){A[A.V1=1]="V1"})(tB||(tB={}));var pxA="1P_MSP_LINK_AUTH_ENC_v",Ghj=["sign","verify"],Fhj="SHA-256",gxA=32,mxA="1P_MANAGED_ACCOUNT_LINK_AUTH",qP=bh,Xd=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountLinkAuthKey",this.toJSON=pt,this.exportAsVersionPrefixedBytes=async()=>{let e=await we.exportKey("raw",this.rawKey),t=new Uint8Array(e.byteLength+1);return t.set([tB.V1]),t.set(new Uint8Array(e),1),new Uint8Array(t)},this.exportAsBase64Url=async()=>{let e=await this.exportAsVersionPrefixedBytes();return tj(e)},this.sign=async e=>{let t=await we.sign("HMAC",this.rawKey,await ExA(e));return qs.fromParts({kid:"",content:new Uint8Array(t),purpose:mxA,purposeVersion:tB.V1})},this.verify=async(e,t)=>{if(e.purpose!==mxA)throw new Error("Purpose does not match");if(e.purposeVersion!==tB.V1)throw new Error("Unsupported purpose version");return we.verify("HMAC",this.rawKey,e.content,await ExA(t))},this.encryptSelfWithOwnersGroupKeyset=async e=>(await Df.fromOwnersGroupKeyset(e)).encryptJweB(await this.exportAsVersionPrefixedBytes()),this.rawKey=j}};If=Xd;Xd.__crypto_internal={importFromVersionPrefixedBytes:async A=>{if(A[0]!==tB.V1)throw new Error("Unsupported key version");return If.__crypto_internal.fromRawBytes(A.slice(1))},fromRawBytes:async A=>{if(A.byteLength!==gxA)throw new Error("Invalid key length");return new If(await we.importKey("raw",A,{name:"HMAC",hash:Fhj},!0,Ghj))}};Xd.generate=async()=>If.__crypto_internal.fromRawBytes(Vr(gxA));Xd.fromBase64Url=async A=>If.__crypto_internal.importFromVersionPrefixedBytes(ZA(A));Xd.decryptFromOwnersGroupKeyset=async(A,j)=>{let e=await Df.fromOwnersGroupKeyset(A);return If.__crypto_internal.importFromVersionPrefixedBytes(await e.decryptJweB(j))};var ExA=async A=>{let j=await A.exportKey();return lt(j)},Df=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountLinkAuthKeyEncryptionKey",this.toJSON=pt,this.encryptJweB=async e=>this.rawKey.encryptJweB(e),this.decryptJweB=async e=>this.rawKey.decryptJweB(e),this.rawKey=j}};BxA=Df;Df.fromOwnersGroupKeyset=async A=>{if(A.symKey.jwk===void 0)throw new Error("Keyset symmetric key is not exportable");let j=ZA(A.symKey.jwk.k);if(j.byteLength!==32)throw new Error("Symmetric key length is not 32 bytes");let t=await(await Nc.fromRawBytes(j)).deriveAes256Key({hash:Pr.Sha256,info:Dj(pxA+tB.V1),salt:new Uint8Array},A.symKey.jwk.kid+":"+pxA+tB.V1);return new BxA(await Bn.fromAes256Key(t))};var Du=W(aA());var IN={};Yt(IN,{deobfuscate:()=>Zy,obfuscate:()=>Qy});var yP=W(so());var Jp=W(so());var GN=()=>Vr(12);var bhj=async A=>$A.supports.nativeAesGcm?FN(A,"cek"):bN(A,"cek"),FN=async(A,j)=>{let e=j||fe(),t=await $A.subtle.generateKey(uf(A),!0,["encrypt","decrypt"]);return{type:"native",jwk:await $A.exportKey(e,t,$A.JwkSymKey),imported:t}},bN=async(A,j)=>await FP({uuid:j||fe(),enc:A,rawKey:$A.getRandomBytes(32)}),qxA=128,hxA=16,rB=A=>({ciphertext:A.slice(0,-hxA),tag:A.slice(-hxA)}),vxA=async({enc:A,plaintext:j,additionalData:e})=>{let t=await bhj(A);return{...await yhj({key:t,plaintext:j,additionalData:e}),cek:ZA(t.jwk.k)}},yhj=async({key:A,plaintext:j,additionalData:e})=>A.type==="native"?vP({key:A.imported,plaintext:j,additionalData:e}):xP({cipher:A.imported,plaintext:j,additionalData:e}),vP=async({key:A,plaintext:j,additionalData:e})=>{let t=GN(),r={name:A.algorithm.name,iv:t,...e?{additionalData:e}:{},tagLength:qxA},a=await $A.subtle.encrypt(r,A,j),n=new Uint8Array(a);return{iv:t,...rB(n)}},xP=async({cipher:A,plaintext:j,additionalData:e})=>{let t=GN(),r=Jp.mode.gcm.encrypt(A,ia(j),ia(t),e?ia(e):void 0,qxA),a=new Uint8Array(Jp.codec.bytes.fromBits(r));return{iv:t,...rB(a)}},xxA=async({enc:A,cek:j,iv:e,ciphertext:t,additionalData:r,tag:a})=>{let n=await whj({enc:A,rawKey:j,uuid:"cek"});return $hj({key:n,iv:e,ciphertext:t,additionalData:r,tag:a})},$hj=async({key:A,iv:j,ciphertext:e,additionalData:t,tag:r})=>A.type==="native"?fP({key:A.imported,iv:j,ciphertext:e,additionalData:t,tag:r}):GP({cipher:A.imported,iv:j,ciphertext:e,additionalData:t,tag:r}),fP=async({key:A,ciphertext:j,tag:e,additionalData:t,iv:r})=>{let a={name:A.algorithm.name,iv:r,...t?{additionalData:t}:{},tagLength:e.byteLength*8},n=Co([j,e]),o=await $A.subtle.decrypt(a,A,n);return new Uint8Array(o)},GP=async({cipher:A,ciphertext:j,tag:e,additionalData:t,iv:r})=>{let a=Co([j,e]),n=Jp.mode.gcm.decrypt(A,ia(a),ia(r),t?ia(t):void 0,e.byteLength*8);return new Uint8Array(Jp.codec.bytes.fromBits(n))},yN=async A=>{let j=uf(A.alg);return await $A.subtle.importKey("jwk",A,j,!0,["encrypt","decrypt"])},fxA=async A=>{let j=ZA(A.k);return new Jp.cipher.aes(ia(j))},whj=async A=>$A.supports.nativeAesGcm?$N(A):FP(A),$N=async({uuid:A,enc:j,rawKey:e})=>{let t=uf(j);if(e.length*8!==t.length)throw new Error("Invalid raw key length");let r=await $A.subtle.importKey("raw",e,t,!0,["encrypt","decrypt"]);return{type:"native",jwk:await $A.exportKey(A,r,$A.JwkSymKey),imported:r}},FP=async({uuid:A,enc:j,rawKey:e})=>{let t=uf(j);if(e.length*8!==t.length)throw new Error("Invalid raw key length");let r=new Jp.cipher.aes(ia(e));return{type:"sjcl",jwk:{kid:A,alg:j,kty:"oct",key_ops:["encrypt","decrypt"],k:tj(e),ext:!0},imported:r}};var GxA,Wy="b5+jwk+json",Yy=A=>{if(A.kid!==Cp)throw new Error("Data is not encrypted with master key");if(!A.alg||!A.p2c||!A.p2s)throw new Error("Missing derivation info");return{alg:A.alg,enc:A.enc,iterations:A.p2c,salt:A.p2s}},si=class{constructor(j=""){this.generate=async(e,t)=>{if(this.uuid)throw new Error("SymmetricKey UUID already exists, will not regenerate.");let{imported:r,jwk:a}=await FN(e,t);return this.key=r,this.jwk=a,this.uuid=a.kid,this.jwk},this.importRawKey=async(e,t)=>{let{imported:r,jwk:a}=await $N({uuid:this.uuid,enc:e,rawKey:t});return this.key=r,this.jwk=a,this.uuid=a.kid,this.jwk},this.encrypt=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");if(this.uuid===Cp&&!this.derivation)throw new Error("Missing derivation info for MUK");let{iv:t,ciphertext:r,tag:a}=await vP({key:this.key,plaintext:e}),n=Co([r,a]);return{kid:this.uuid,enc:this.jwk.alg,cty:Wy,iv:tj(t),data:tj(n)}},this.decrypt=async e=>{if(Wy!==e.cty)throw new Error("Unexpected content type");if(e.kid!==this.uuid)throw new Error("Key IDs do not match");if(!e.iv)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");let{ciphertext:t,tag:r}=rB(ZA(e.data));return await fP({key:this.key,ciphertext:t,tag:r,iv:ZA(e.iv)})},this.encryptFile=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");let{iv:t,ciphertext:r,tag:a}=await vP({key:this.key,plaintext:e});return{data:Co([r,a]),iv:tj(t)}},this.decryptFile=async e=>{let{data:t,iv:r}=e;if(!r)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");let{ciphertext:a,tag:n}=rB(t);return await fP({key:this.key,ciphertext:a,tag:n,iv:ZA(r)})},this.decryptWithKeyset=async(e,t)=>gy(t.enc)?this.decryptWithKey(e.symKey,t):this.decryptWithKey(e.ekeyPair,t),this.decryptWithKey=async(e,t)=>{let r=await e.decrypt(t);return this.jwk=sj(r,Ue.pipe(co)).unwrap(),this.uuid=this.jwk.kid,this.key=await yN(this.jwk),this},this.encryptWithKey=async e=>{if(!this.jwk)throw new Error("Missing JWK");return e.encrypt(lt(this.jwk))},this.uuid=j}};GxA=si;si.newFromJwkSymKey=async A=>{let j=new GxA(A.kid);return j.key=await yN(A),j.jwk=A,j};var FxA="b5+jwk+json",$t=A=>Kp.nativeAesGcm?new si(A):new bP(A),Dhj=async(A,j)=>{let e=$t(Cp);return await e.importRawKey(A,j),e},bP=class extends si{constructor(j){super(j),this.generate=async(e,t)=>{if(this.uuid)throw new Error("SymmetricKeyPf UUID already exists, will not regenerate");let{imported:r,jwk:a}=await bN(e,t);return this.jwk=a,this.uuid=a.kid,this.cipher=r,a},this.importRawKey=async(e,t)=>{let{imported:r,jwk:a}=await FP({uuid:this.uuid,enc:e,rawKey:t});return this.cipher=r,this.jwk=a,this.jwk},this.encrypt=async e=>{if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg.");if(!this.cipher)throw new Error("Missing cipher");if(this.uuid===Cp&&!this.derivation)throw new Error("Missing derivation info for MUK");let{iv:t,ciphertext:r,tag:a}=await xP({cipher:this.cipher,plaintext:e}),n=Co([r,a]);return{kid:this.uuid,enc:this.jwk.alg,cty:FxA,iv:tj(t),data:tj(n)}},this.decrypt=async e=>{if(FxA!==e.cty)throw new Error("Unexpected content type.");if(e.kid!==this.uuid)throw new Error("Key IDs do not match.");if(!e.iv)throw new Error("Missing initialization vector");if(!this.cipher)throw new Error("Missing cipher");let{ciphertext:t,tag:r}=rB(ZA(e.data));return await GP({cipher:this.cipher,ciphertext:t,tag:r,iv:ZA(e.iv)})},this.encryptFile=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");if(!this.cipher)throw new Error("Missing cipher");let{iv:t,ciphertext:r,tag:a}=await xP({cipher:this.cipher,plaintext:e});return{data:Co([r,a]),iv:tj(t)}},this.decryptFile=async e=>{let{data:t,iv:r}=e;if(!r)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");if(!this.cipher)throw new Error("Missing cipher");let{ciphertext:a,tag:n}=rB(t);return await GP({cipher:this.cipher,ciphertext:a,tag:n,iv:ZA(r)})},this.decryptWithKey=async(e,t)=>{let r=await e.decrypt(t),a=Ue.pipe(co);return this.jwk=sj(r,a).unwrap(),this.uuid=this.jwk.kid,this.cipher=await fxA(this.jwk),this}}};var bxA="03h4kf8euth5ks9skel3lfis9s",Ohj="f737s0",wN="3tnqywhecddkhvl375l6yu7qri",Phj="Obfuscation Does Not Provide Security But It Doesn't Hurt",yxA=yP.codec.hex.fromBits(yP.hash.sha1.hash(Phj)).slice(0,32),Qy=async A=>{let j=Dj(yxA),e=$t(wN);return await e.importRawKey(Tt,j),e.encrypt(Dj(A))},Zy=async A=>{if(!A)return"";let j="",e="";if(A.kid===bxA)j=Gr.device.uuid+Ohj,e=bxA;else if(A.kid===wN)j=yxA,e=wN;else throw new Error("Unrecognized key ID.");if(j.length!==32)throw new Error("Missing or invalid obfuscation key.");let t=$t(e);await t.importRawKey(Tt,Dj(j));let r=await t.decrypt(A);return V6(r)};var A$,Chj="2",Hhj=Du.readonly(Du.exact(Du.type({kid:Du.string,k:Du.string,s:Du.string})),"SerializedDeviceKey"),$P=class{constructor(){this.KEY_DOMAIN_SEPARATOR="1P_SSO_CREDENTIAL_BUNDLE_KEY:LOCAL",this.AD_DOMAIN_SEPARATOR="1P_SSO_CREDENTIAL_BUNDLE:LOCAL"+Chj}async serialize(j){return j.__crypto_internal.serialize()}async deserialize(j){return ii.unsafeIfInputNotTrustworthyDeserialize(j)}},vs=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_DeviceKey",this.toJSON=pt,this.computeContextSummary=async(t,r)=>{let a=await this.hkdfKey.deriveCryptoKey({hash:"SHA-384",info:Dj("1P_DEVICE_KEY_CONTEXT_SUMMARY_KEY"),salt:Dj(this.kid)},{name:"HMAC",hash:"SHA-384"},["sign"]),n=await we.sign({name:"HMAC"},a,lt({accountUuid:t,userUuid:r}));return tj(new Uint8Array(n))},this.serialize=async(t,r)=>{let a={kid:this.kid,k:tj(this.hkdfKey.exportRawIkm()),s:await this.computeContextSummary(t,r)};return JSON.stringify(a)},this.deriveAes256JwebKey=async t=>Bn.fromAes256Key(await this.hkdfKey.deriveAes256Key({hash:"SHA-384",info:Dj(t.KEY_DOMAIN_SEPARATOR),salt:Dj(this.kid)},this.kid)),this.encrypt=async(t,r)=>(await this.deriveAes256JwebKey(t)).encryptJweB(await t.serialize(r),Dj(t.AD_DOMAIN_SEPARATOR)),this.decrypt=async(t,r)=>{let n=await(await this.deriveAes256JwebKey(t)).decryptJweB(r,Dj(t.AD_DOMAIN_SEPARATOR));return t.deserialize(n)},this.encryptCredentialBundle=async t=>this.encrypt(new $P,t),this.decryptCredentialBundle=async t=>this.decrypt(new $P,t),this.exportObfuscated=async(t,r)=>{let a=await Qy(await this.serialize(t,r));return JSON.stringify(a)},this.kid=j,this.hkdfKey=e}};A$=vs;vs.generate=async()=>A$.fromRawBytes(Vr(32),fe());vs.fromRawBytes=async(A,j)=>{if(A.length!==32)throw new Error("Bad key len");return new A$(j,await Nc.fromRawBytes(A))};vs.fromSerialized=async(A,j,e)=>{let t=sj(A,Oo.pipe(Hhj)).unwrap(),r=await A$.fromRawBytes(ZA(t.k),t.kid);if(await r.computeContextSummary(j,e)!==t.s)throw new Error("Bad summary value");return r};vs.fromObfuscated=async(A,j,e)=>{let t=sj(A,Oo.pipe(Oa)).unwrap();return A$.fromSerialized(await Zy(t),j,e)};var OxA=W(wxA());var IxA,DxA,Thj=Symbol(),Of=class{constructor(j,e){this[DxA]="B5_CRYPTO_KEYS_ServiceAccountThrottleKeypair",this.toJSON=pt,this.exportSeed=()=>this.seed,this.getPublicKey=async()=>this.pub,this.getPublicKeyHex=async()=>Pn(this.pub),this.seed=j,this.pub=e}};IxA=Of,DxA=Thj;Of.generate=async()=>{let A=Vr(32),j=OxA.sign.keyPair.fromSeed(A);return new IxA(A,j.publicKey)};var Ou,Hn;(function(A){A.A2="A2",A.A3="A3",A.TrustedDevice="TD"})(Hn||(Hn={}));var DN=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_SecretKey_UnknownFormat",this.format=j}toString(){return this.format}},IP="23456789ABCDEFGHJKLMNPQRSTVWXYZ",Ba=class{constructor(j,e,t){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_SecretKey",this.toJSON=pt,this.identifier=()=>`${this.format.toString()}-${this.id}`,this.maskedString=()=>this.identifier()+" \u2022\u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022",this.unwrapFormatAsKnown=()=>{let r=this.format;switch(r){case Hn.A3:case Hn.A2:case Hn.TrustedDevice:return r;default:throw new Error("Unknown secret key format")}},this.formatKey=()=>{let r=this.rawKeyMaterial,a;try{a=this.unwrapFormatAsKnown()}catch{throw new Error("Cannot display secret key with unknown format")}switch(a){case Hn.A3:return[r.slice(0,6),r.slice(6,11),r.slice(11,16),r.slice(16,21),r.slice(21,26)].join("-");case Hn.A2:return[r.slice(0,5),r.slice(5,10),r.slice(10,15),r.slice(15,20),r.slice(20,25)].join("-");case Hn.TrustedDevice:return new Array(6).join("*")}},this.exportSensitiveReadableString=()=>{let r=this.formatKey();return`${this.identifier()}-${r}`},this.combineWithBytes=async r=>{let a=Dj(this.rawKeyMaterial),n=Dj(this.format.toString()),o=Dj(this.id),i=await el(Pr.Sha256,a,n,o,r.length),s=new Uint8Array(r.length);for(let[l,d]of r.entries()){let k=i[l];if(k===void 0)throw new Error("combineWithBytes: personalByte undefined");s[l]=d^k}return s},this.id=j,this.format=e,this.rawKeyMaterial=t}async exportObfuscated(){return Qy(this.exportSensitiveReadableString())}static async fromObfuscated(j){return Ou.fromInput(await Zy(j))}isTrustedDeviceFormat(){return this.format===Hn.TrustedDevice}__testKeyStrLen(){return this.rawKeyMaterial.length}__testKeyMaterialEquals(j){return this.rawKeyMaterial===j.rawKeyMaterial}};Ou=Ba;Ba.validateExpectedFormat=(A,j)=>{let{id:e,rawKeyMaterial:t}=j;switch(A){case Hn.A2:{if(j.id.length!==6)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${e.length}`);if(j.rawKeyMaterial.length!==25)throw new Error(`Invalid SecretKey key length; expected 25, got: ${t.length}`);break}case Hn.A3:{if(j.id.length!==6)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${e.length}`);if(j.rawKeyMaterial.length!==26)throw new Error(`Invalid SecretKey key length; expected 26, got: ${t.length}`);break}case Hn.TrustedDevice:{if(e.length!==6)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${e.length}`);if(t.length!==0)throw new Error(`Invalid SecretKey key length; expected 0, got: ${t.length}`);break}default:throw new Error("Unreachable")}};Ba.validateParams=A=>{let{id:j,format:e,rawKeyMaterial:t}=A,r;switch(A.format){case Hn.A2:case Hn.A3:case Hn.TrustedDevice:{r=A.format,Ou.validateExpectedFormat(r,{id:j,rawKeyMaterial:t});break}default:{r=new DN(A.format),Ou.validateExpectedFormat(Hn.A3,{id:j,rawKeyMaterial:t});break}}return{id:j,format:r,rawKeyMaterial:t}};Ba.new=A=>{let{id:j,format:e,rawKeyMaterial:t}=Ou.validateParams(A);return new Ou(j,e,t)};Ba.generate=async()=>Ou.new({id:Lp(IP,6)[0],format:Hn.A3,rawKeyMaterial:Lp(IP,26)[0]});Ba.generateForTrustedDevice=async()=>Ou.new({id:Lp(IP,6)[0],format:Hn.TrustedDevice,rawKeyMaterial:""});Ba.forTrustedDevice=async A=>Ou.new({id:A,format:Hn.TrustedDevice,rawKeyMaterial:""});Ba.fromInput=A=>{let j=new RegExp(`[^${IP}]`,"gmi");A=A.toUpperCase().replace(j,"");let e=A.slice(0,2),t=A.slice(2,8),r=A.slice(8);return Ou.new({id:t,format:e,rawKeyMaterial:r})};var PxA,CxA,HxA="b5x_autofill_parent_key",Pf=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UrlAutofillParentKey",this.toJSON=pt,this.deriveSessionKey=async e=>{let t=Math.floor(e/1e3),r=e3(t-t%10,8),a=new Uint8Array(0),n=await el(Pr.Sha256,this.rawKey,r,a,32);return yh.fromBytes(n)},this.rawKey=j,this.kid=HxA}};PxA=Pf;Pf.fromAuk=async A=>{let j=await A.exportJwk(),e=Dj(HxA),t=new Uint8Array(0),r=await el(Pr.Sha256,ZA(j.k),e,t,32);return new PxA(r)};var Khj="b5x_session_subkey",yh=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UrlAutofillSessionKey",this.toJSON=pt,this.decrypt=async e=>{if(e.length!==54)throw new Error("Input bytes to decrypt() are incorrect length.");let a=e.slice(0,12),n=e.slice(12),o=Np.new({data:n,iv:a}),i=await this.key.decryptRaw(o);return V6(i)},this.key=j}};CxA=yh;yh.fromBytes=async A=>{let j=await gs.fromRawBytes(A,Khj);return new CxA(j)};var PN,Up,SxA,MxA,al;(function(A){A.V1="v1"})(al||(al={}));var MPe=al.V1,$h="1PRK",ON=52,_xA=ON+$h.length,Shj=Dj("1P_RECOVERY_KEY_UUID"),Mhj="1P_RECOVERY_KEY_AUTH_",TxA="1P_RECOVERY_KEY_ENC_",KxA=Dj("1P_RECOVERY_KEY_ENC_RECOVERABLE_MATERIAL_v1"),LxA=Dj("1P_ENC_KEY_RECOVERY_KEY_AD_v1"),wh=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_InputRecoveryKey",this.toJSON=pt,this.toRecoveryKey=async t=>zc.__crypto_internal.fromHkdfKey(t,this.rawKey),this.rawKey=e,this.kid=j}};PN=wh;wh.fromBytes=async A=>{if(A.length!==32)throw new Error(`Bad key length: ${A.length}`);let j=await Nc.fromRawBytes(A),e=await NxA(j);return new PN(e,j)};wh.fromPaperKey=async A=>{if(!A.startsWith($h))throw new Error("Bad paper key: unknown prefix");let e=A.slice($h.length).replace(new RegExp("[-]","g"),"").toUpperCase().replace(new RegExp("[0]","g"),"O").replace(new RegExp("[1]","g"),"I"),t=await _hj(e);return PN.fromBytes(t)};var NxA=async A=>J0(await A.hkdfOutput({hash:Pr.Sha256,info:Shj,len:16})).toLowerCase(),_hj=async A=>{let j=t3(A);if(J0(j)!==A)throw new Error("invalid base32 input");return j},zc=class{constructor(j,e,t,r,a){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryKey",this.toJSON=pt,this.__crypto_internal={authKey:()=>this.authKey,encKey:()=>this.encKey},this.rawKeyAsBase32=()=>J0(this.rawKey.exportRawIkm()).toUpperCase(),this.rawKeyAsChunkedBase32=()=>{let n=this.rawKeyAsBase32();if(n.length!==ON)throw new Error(`Malformed recovery key: bad serialised length: ${n.length}`);let o=[],i=4;for(let s=0;s<ON;s+=i)o.push(n.slice(s,s+i));return o.join("-")},this.serialiseToSensitivePaperKey=async()=>$h+"-"+this.rawKeyAsChunkedBase32(),this.serialiseToObfuscatedPaperKey=async()=>{let n=this.rawKeyAsChunkedBase32(),o=n.slice(n.length-4);return $h+" \u2022\u2022\u2022\u2022\u2022\u2022 "+o},this.encryptSelfAndKeyset=async n=>{switch(this.version){case al.V1:{let[o,i]=await Promise.all([this.encryptSelfWithKeysetV1(n),this.encKey.encryptKeyset(n)]);return{encRecoveryKey:o,encKeysetSymKey:i}}}},this.decryptKeysetSymKey=async n=>this.encKey.decryptKeysetSymKey(n),this.beginAuth=async()=>this.authKey.beginAuth(this.kid),this.exportVerifier=async()=>this.authKey.exportVerifier().then(n=>({srpv:n})),this.checkIntegrity=async(n,o,i,s)=>{if(n.symKey.jwk===void 0)throw new Error("missing user keyset symmetric key");let l=await Wl(lt(o),Pr.Sha256);if(tj(l)!==i)throw new Error("integrity check failed for recoverable material");if((await this.decryptKeysetSymKey(o)).k!==n.symKey.jwk.k)throw new Error("decrypted keyset does not match expected keyset");let k=await Up.decryptFromKeyset(this.version,n,s);if(tj(k.rawKey.exportRawIkm())!==tj(this.rawKey.exportRawIkm()))throw new Error("decrypted recovery key does not match recovery key")},this.encryptSelfWithKeysetV1=async n=>{if(n.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");return(await Bn.fromJwk(n.symKey.jwk)).encryptJweB(this.rawKey.exportRawIkm(),LxA)},this.version=j,this.rawKey=t,this.kid=e,this.authKey=r,this.encKey=a}};Up=zc;zc.__crypto_internal={fromHkdfKey:async(A,j)=>{let e=await NxA(j),[t,r]=await Promise.all([Up.deriveAuthKeyV1(j),Up.deriveEncKeyV1(e,j)]);return new Up(A,e,j,t,r)},fromBytes:async(A,j)=>{let e=await Nc.fromRawBytes(j);return Up.__crypto_internal.fromHkdfKey(A,e)}};zc.generate=async(A=al.V1)=>Up.__crypto_internal.fromBytes(A,Vr(32));zc.decryptFromKeyset=async(A,j,e)=>{if(j.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");switch(A){case al.V1:return Up.decryptRecoveryKeyWithKeysetV1(j,e)}};zc.deriveAuthKeyV1=async A=>j$.fromBytes(await A.hkdfOutput({hash:Pr.Sha256,info:Dj(Mhj+al.V1),len:32}));zc.deriveEncKeyV1=async(A,j)=>e$.fromBytes(await j.hkdfOutput({hash:Pr.Sha256,info:Dj(TxA+al.V1),len:32}),A+":"+TxA+al.V1);zc.decryptRecoveryKeyWithKeysetV1=async(A,j)=>{if(A.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");let t=await(await Bn.fromJwk(A.symKey.jwk)).decryptJweB(j,LxA);return Up.__crypto_internal.fromBytes(al.V1,t)};var j$=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryAuthKeyV1",this.toJSON=pt,this.beginAuth=async e=>this.srpx.beginAuth(EP[zp.Group4096],new Uint8Array(16).fill(0),e),this.exportVerifier=async()=>this.srpx.verifier(EP[zp.Group4096]).then(async e=>e.exportServerHex()),this.__crypto_internal={srpx:()=>this.srpx},this.srpx=j}};SxA=j$;j$.fromBytes=async A=>new SxA(await Ho.fromRawBytes(A));var e$=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryEncKeyV1",this.toJSON=pt,this.encryptKeyset=async e=>{if(e.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");return this.key.encryptJweB(lt(co.encode(e.symKey.jwk)),KxA)},this.decryptKeysetSymKey=async e=>{let t=await this.key.decryptJweB(e,KxA);return sj(t,Ue.pipe(co)).unwrap()},this.__crypto_internal={key:()=>this.key},this.key=j}};MxA=e$;e$.fromBytes=async(A,j)=>new MxA(await Bn.fromRawBytes(A,j));var zxA,RxA="1P_WEB_TAG_ROUTE_HKDF_KEY",Cf=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_TagRouteKey",this.toJSON=pt,this.hmacTag=e=>{let t=Mp(this.rawKey,e);return VE(t)},this.rawKey=j,this.kid=RxA}};zxA=Cf;Cf.fromActiveKeyset=async A=>{let j=A.symKey.jwk;if(!j)throw new Error("fromActiveKeyset could not find symmetric key");let e=Dj(RxA),t=new Uint8Array(0),r=await el(Pr.Sha256,ZA(j.k),e,t,32);return new zxA(r)};var Tn=W(aA());var AA=A=>j=>Lhj((...e)=>({...j(...e),filename:A})),JxA=Z,Lhj=A=>async(j,...e)=>{let t={body:void 0,...A(...e)},a=t.responseType===J?{...t.options??{},responseType:"ignore"}:t.options,n=t.encrypted??!0,o=JxA(t.name),i=JxA(t.filename),s=await j.request({name:o,method:t.method,url:t.url,body:t.body,encrypted:n,decryptResponse:t.decryptResponse,options:a}),l=await Nhj({response:s,responseType:a?.responseType??"json",endpointName:o});return sj(l,t.responseType,{mode:t.validation,file:i,func:o}).unwrap()},Nhj=async({response:A,responseType:j,endpointName:e})=>{try{switch(j){case"json":{let t=await A.text();return t===""?void 0:JSON.parse(t)}case"arraybuffer":return await A.arrayBuffer();case"text":return await A.text();case"ignore":return}}catch{let t=Z(j),r=E`Failed to decode response as ${t} for ${e}`,a=A.headers.get("Content-Type"),n=new Pe({errorClass:mn.ValidationError,message:r,metaData:{response:{statusCode:yp(A.status),contentType:a?Z(a):Z("unknown")}}});throw console.error(r.str),Nr(n),n}};var zhj=AA("web-api/api/managed_credential_policies.ts"),DP=Tn.readonly(Tn.type({uuid:Tn.string,accountUuid:Tn.string,urls:Tn.array(Tn.string),usernames:Tn.array(Tn.string),version:Tn.number,state:Tn.string,type:Tn.string,sendNotifications:Tn.boolean,createdAt:Tn.string,updatedAt:Tn.string}),"ManagedCredentialPolicy"),CN=zhj(()=>({name:"getManagedCredentialsPolicies",method:"GET",url:"/credentials-api/v1/policies",responseType:Tn.array(DP)}));var XxA,UxA="1P_WEB_MANAGED_CREDENTIAL_POLICY_HKDF_KEY",aB=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedCredentialPolicyKey",this.toJSON=pt,this.encrypt=async e=>await this.symmetricKey.encrypt(lt(e)),this.decrypt=async e=>{let t=await this.symmetricKey.decrypt(e);return sj(t,Ue.pipe(DP)).unwrap()},this.symmetricKey=j}};XxA=aB;aB.fromActiveKeyset=async A=>{let j=A.symKey.jwk;if(!j)throw new Error("fromActiveKeyset could not find symmetric key");let e=Dj(UxA),t=new Uint8Array(0),r=await el(Pr.Sha256,ZA(j.k),e,t,32),a=new si(UxA);return await a.importRawKey(Tt,r),new XxA(a)};var W6=W(aA());var ct=W(aA());var HN=AA("web-api/api/managed_credential.ts"),TN=ct.readonly(ct.type({vaultUuid:ct.string,itemUuid:ct.string,itemVersion:ct.number},"ManagedCredentialSource")),VxA=ct.type({uuid:ct.string,accessorUuid:ct.string,accessorType:ct.string,encryptedBy:ct.string,encItemKey:Oa,acl:ct.array(ct.string)},"ManagedCredentialAccessor"),OP=ct.readonly(ct.type({encOverview:Oa,encDetails:Oa}),"BaseEncryptedData"),PP=ct.readonly(ct.type({uuid:ct.string,templateUuid:ct.string,policyUuid:ct.string,createdAt:ct.string,updatedAt:ct.string,creatorUuid:ct.string,changerUuid:ct.string,version:ct.number,encryptedBy:ct.string,source:TN,accessors:ct.array(VxA)},"BaseManagedCredential")),Rhj=ct.readonly(ct.intersection([PP,OP]),"ManagedCredential"),CP=ct.type({policyUuid:ct.string,templateUuid:ct.string,creatorUuid:ct.string,encryptedBy:ct.string,source:TN,accessors:ct.array(ct.type({accessorUuid:ct.string,encryptedBy:ct.string,encItemKey:Oa}))},"BaseCreateManagedCredential"),WxA=ct.readonly(ct.intersection([CP,OP]),"CreateManagedCredential"),sCe=ct.array(WxA,"CreateManagedCredentialRequest"),HP=ct.readonly(ct.type({uuid:ct.string,templateUuid:ct.string,changerUuid:ct.string}),"BaseUpdatedManagedCredential"),Jhj=ct.readonly(ct.intersection([HP,OP]),"UpdatedManagedCredential"),KN=HN(()=>({name:"getManagedCredentials",method:"GET",url:"/credentials-api/v1/credentials",responseType:ct.array(Rhj)})),SN=HN(A=>({name:"createManagedCredential",method:"POST",url:"/credentials-api/v1/credentials",body:A,responseType:J})),MN=HN(A=>({name:"updateManagedCredential",method:"PATCH",url:`/credentials-api/v1/credentials/${A.uuid}`,body:A,responseType:J}));var hA=W(aA());var TP=W(Io());var gr=E9((A,j,e)=>{throw console.error(`[${A}#${j}]`,e),e});var kCe=30,yj;(function(A){A.LoginUuid="001",A.CreditCardUuid="002",A.SecureNoteUuid="003",A.IdentityUuid="004",A.PasswordUuid="005",A.DocumentUuid="006",A.SoftwareUuid="100",A.BankAccountUuid="101",A.DatabaseUuid="102",A.DriverLicenseUuid="103",A.OutdoorLicenseUuid="104",A.MembershipUuid="105",A.PassportUuid="106",A.RewardsUuid="107",A.SocialSecurityNumberUuid="108",A.RouterUuid="109",A.ServerUuid="110",A.EmailUuid="111",A.ApiCredentialUuid="112",A.MedicalRecordUuid="113",A.SshKeyUuid="114",A.CryptoWalletUuid="115",A.SnippetUuid="116",A.InboxKeysUuid="901",A.ManagedApplicationUuid="912",A.sort=j=>{let e={};e[A.LoginUuid]=1,e[A.SecureNoteUuid]=2,e[A.CreditCardUuid]=3,e[A.IdentityUuid]=4,e[A.PasswordUuid]=5,e[A.DocumentUuid]=6;let t=[],r=[];return j.forEach(a=>{e[a.uuid]?t.push(a):r.push(a)}),t.sort((a,n)=>{let o=e[a.uuid]||10,i=e[n.uuid]||10;return o-i}),r.sort((a,n)=>a.singularName.localeCompare(n.singularName)),t.concat(r)},A.StateActive="A",A.StateHidden="H",A.StateDeleted="D"})(yj||(yj={}));var YxA=E`model/vault_item`,Uhj=gr(YxA.str),t$;(function(A){A[A.FANTASTIC=100]="FANTASTIC",A[A.EXCELLENT=85]="EXCELLENT",A[A.VERY_GOOD=73]="VERY_GOOD",A[A.GOOD=60]="GOOD",A[A.FAIR=53]="FAIR",A[A.WEAK=44]="WEAK",A[A.TERRIBLE=26]="TERRIBLE"})(t$||(t$={}));var r$;(function(A){A[A.FANTASTIC=75]="FANTASTIC",A[A.EXCELLENT=64]="EXCELLENT",A[A.VERY_GOOD=55]="VERY_GOOD",A[A.GOOD=45]="GOOD",A[A.FAIR=40]="FAIR",A[A.WEAK=33]="WEAK",A[A.TERRIBLE=20]="TERRIBLE"})(r$||(r$={}));var dA=class A{constructor(j,e,t){this.addToPasswordHistory=r=>{this.details.passwordHistory||(this.details.passwordHistory=[]);let a={time:Math.floor(Date.now()/1e3),value:r};this.details.passwordHistory.push(a)},this.getSortedPasswordHistory=()=>!this.details||!this.details.passwordHistory?[]:this.details.passwordHistory.slice().sort((r,a)=>typeof r.time=="number"&&typeof a.time=="number"?a.time-r.time:typeof r.time=="number"?-1:typeof a.time=="number"?1:0),this.parseTemplate=r=>{if(!r||(this.templateUuid=r.uuid,!r.attrs||!r.attrs.contents))return;let a=r.attrs.contents,{localizedStrings:n}=r.attrs;for(let o of a){let i=o.fields,s=[];if(i)for(let l of i){let d="";l.type===A.FieldType.Address&&(d={street:"",city:"",country:"",zip:"",state:""}),(l.type===A.FieldType.MonthYear||l.type===A.FieldType.Date)&&(d=void 0),s.push({k:l.type,n:l.name,v:d,t:l.title||n[l.name]||"",a:l.attributes,inputTraits:l.inputTraits,m:l.menuitems})}this.details.sections.push({name:o.set,title:o.title||n["set."+o.set]||"",fields:s})}},this.decryptWithKey=async(r,a,n)=>{this.encOverview=a,this.encDetails=n;try{let o={mode:"unsafe_report_only",file:E`web-api/model/vault_item.ts`,func:E`decryptWithKey`,errorClass:E`VaultItemValidationError`,context:E`Error decoding decrypted bytes for vault/${Z(this.vault.uuid)}/item/${Z(this.uuid)}: `},i=r.decrypt(a).then(l=>{let d=sj(l,Ue).unwrap(),k=sj(d,KP,o);this.overview=k.unwrap()}),s=n&&r.decrypt(n).then(l=>{let d=sj(l,Ue).unwrap(),k=sj(d,Hf,o);this.details=k.unwrap()});await Promise.all(Lr([i,s]))}catch(o){console.error("Item is corrupt:",this.vault.uuid,this.uuid,o),this.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1}}return(this.details===null||typeof this.details!="object"||this.overview===null||typeof this.overview!="object")&&(this.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1},this.details={sections:[]},console.error("Item is corrupt:",this.vault.uuid,this.uuid)),Array.isArray(this.details.sections)||(this.details.sections=[]),this},this.decrypt=async(r,a)=>{if(!this.vault.activeKey)throw new Error("Missing vault's active key");return this.decryptWithKey(this.vault.activeKey,r,a)},this.encryptWithKey=async r=>Promise.resolve().then(async()=>{if(!this.details)throw new Error("Missing item details");return Promise.all([r.encrypt(Ue.pipe(KP).encode(this.overview)),r.encrypt(Ue.pipe(Hf).encode(this.details))])}).catch(Uhj("encryptWithKey")),this.encrypt=async()=>{let r=this.vault.activeKey;if(!r)throw new Error("Missing vault's active key");let[a,n]=await this.encryptWithKey(r);return this.encryptedBy=r.uuid,this.encOverview=a,this.encDetails=n,this},this.clone=()=>{let r=B0(this),a=new A(this.vault);return a.overview=r.overview,a.details=r.details,a.faveIndex=r.faveIndex,a.state=r.state,a.templateUuid=r.templateUuid,a.createdAt=r.createdAt,a.updatedAt=r.updatedAt,a},this.exportToJson=()=>{let r={overview:this.overview,details:this.details,createdAt:this.createdAt,updatedAt:this.updatedAt,faveIndex:this.faveIndex||0,trashed:this.state,templateUuid:this.templateUuid,uuid:this.uuid};return Oo.pipe(_N).encode(r)},this.vault=j,this.uuid=t||fe(),this.itemVersion=0,this.createdAt=new Date,this.updatedAt=this.createdAt,this.state=A.ItemState.Active,this.overview={title:"",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1,URLs:[]},this.details={sections:[],fields:[]},this.isNewItem=!1,this.isRestoredItem=!1,this.parseTemplate(e)}get title(){return this.overview.title||""}set title(j){this.overview.title=j}get subtitle(){return this.templateUuid===yj.SecureNoteUuid&&this.notes?this.notes.slice(0,80).split(`
`)[0]||"":typeof this.overview.ainfo!="string"?"":this.overview.ainfo||""}get notes(){return this.details&&this.details.notesPlain||""}set notes(j){this.details.notesPlain=j,this.templateUuid===yj.SecureNoteUuid&&(this.overview.ainfo=j.slice(0,80).split(`
`)[0]||"")}get tags(){return this.overview.tags||[]}set tags(j){this.overview.tags=j.filter(e=>e.length>0)||[]}addTag(j){let e=this.tags||[];j.length===0||e.includes(j)||(this.tags=[...e,j])}removeTag(j){let e=this.tags||[];this.tags=e.filter(t=>t!==j)}get webFormFields(){return this.details?this.details.fields||[]:[]}set webFormFields(j){this.details.fields=j}get username(){if(!(!this.details||!this.details.fields))return X6(this.details.fields,j=>j.designation==="username")}set username(j){j&&(this.details&&this.details.fields?this.details.fields.push(j):this.details.fields=[j])}get url(){return this.overview&&this.overview.url||""}set url(j){this.overview.url=j;let e={l:"",u:j};this.overview.URLs?this.overview.URLs=[...this.overview.URLs,e]:this.overview.URLs=[e]}setUsername(j){this.username?this.username.value=j:this.username={name:"username",value:j,type:"T",designation:"username"},this.overview.ainfo=j}getPassword(){if(this.details){if(this.templateUuid===yj.LoginUuid){let j=X6(this.details.fields,e=>e.designation==="password");return j?j.value:""}else if(this.templateUuid===yj.PasswordUuid)return this.details.password}}setPassword(j,e=!1,t=0){if(!this.details||this.templateUuid!==yj.LoginUuid&&this.templateUuid!==yj.PasswordUuid)return;let r=this.getPassword();r&&r!==j&&this.addToPasswordHistory(r),this.templateUuid===yj.LoginUuid?this.details.fields=Whj(n=>n.designation==="password",{name:"password",value:j,type:"P",designation:"password"},this.details.fields):this.templateUuid===yj.PasswordUuid&&(this.details.password=j),this.overview.pbe=e?qO(t,6):0,this.overview.pgrng=e;let a=e?A.getPasswordStrengthFromEntropy(t):ff(j,this.username?this.username.value:"");this.overview.ps=qO(a,6)}get passwordUpdatedAt(){let j=this.getSortedPasswordHistory()[0];return j?j.time:typeof this.getPassword()=="string"&&this.createdAt?Math.floor(this.createdAt.getTime()/1e3):0}toString(){return"[object VaultItem]"}};(function(A){A.SectionFieldAdditionalAttributes=hA.partial({guarded:hA.string,clipboardFilter:hA.string,multiline:hA.string,generate:hA.string,placeholder:hA.string,provider:hA.type({type:hA.literal("fastmail"),data:hA.type({aliasId:hA.string,accountId:hA.string})},"EmailProvider"),sshKeyAttributes:hA.type({fingerprint:hA.string,keyType:hA.intersection([hA.type({t:hA.string},"required"),hA.partial({c:hA.number},"partial")]),privateKey:hA.string,publicKey:hA.string})},"SectionFieldAdditionalAttributes"),A.SectionFieldInputTraits=hA.partial({keyboard:hA.string,autocorrection:hA.string,autocapitalization:hA.string},"SectionFieldInputTraits");let j=new hA.Type("GeneratedString",k=>hA.string.is(k)&&k.length>0,(k,u)=>{let m=hA.string.validate(k??"",u);return m._tag==="Left"?m:hA.success(m.right||fe())},hA.string.encode);A.SectionField=hA.intersection([hA.type({k:GA(hA.string,"string"),n:j,v:hA.unknown,t:GA(hA.string,"")},"required"),hA.partial({a:A.SectionFieldAdditionalAttributes,inputTraits:ij(A.SectionFieldInputTraits),m:hA.readonlyArray(hA.string)},"partial")],"SectionField"),A.Section=hA.type({name:GA(hA.string,""),title:GA(hA.string,""),fields:ij(hA.array(A.SectionField))},"Section"),A.WebFormField=hA.intersection([hA.type({value:GA(hA.string,""),type:GA(hA.string,"T")},"required"),hA.partial({designation:hA.string,id:hA.string,name:hA.string},"partial")],"WebFormField"),A.PreviouslyUsedPassword=hA.type({time:ij(hA.number),value:Do(hA.string,()=>"")},"PreviouslyUsedPassword"),A.DocumentAttributes=hA.intersection([hA.type({fileName:hA.string,documentId:GA(hA.string,""),unencryptedSize:hA.number,encryptedSize:hA.number,integrityHash:hA.string,encryptionKey:$A.JwkSymKeyOptionalKid,nonce:hA.string},"required"),hA.partial({signingKey:$A.JwkSymKey},"partial")],"DocumentAttributes"),A.FileAttributes=hA.intersection([hA.type({fileId:GA(hA.string,""),encryptionKey:$A.JwkSymKey,nonce:hA.string},"required"),hA.partial({signingKey:$A.JwkSymKey},"partial")],"FileAttributes"),A.UrlField=hA.intersection([hA.type({l:GA(hA.string,""),u:GA(hA.string,"")},"required"),hA.partial({m:GA(hA.string,"default")},"partial")]),A.PasskeyPrfOverview=hA.type({numCreds:hA.number},"PasskeyPrfOverview"),A.PasskeyOverview=hA.type({credentialId:hA.string,rpId:ij(hA.string),userHandle:ij(hA.string),prf:ij(A.PasskeyPrfOverview)},"PasskeyOverview"),A.GeoLocation=hA.type({lat:hA.number,lon:hA.number},"GeoLocation"),A.ItemLocation=hA.type({k:hA.string,n:hA.string,v:hA.union([A.GeoLocation,hA.undefined,hA.null])},"ItemLocation");let e;(function(k){k.Amazon="amazon",k.Apple="apple",k.Discord="discord",k.Facebook="facebook",k.Github="github",k.Google="google",k.Microsoft="microsoft",k.Okta="okta",k.Slack="slack",k.Twitter="twitter"})(e=A.SsoLoginProvider||(A.SsoLoginProvider={})),A.SsoLoginItemReference=hA.type({itemUuid:hA.string,vaultUuid:hA.string},"SsoLoginItemReference"),A.SsoLoginField=hA.intersection([hA.type({provider:hA.string}),hA.partial({item:A.SsoLoginItemReference})],"SsoFieldData"),A.ManagedApplicationField=hA.type({applicationUuid:hA.string,email:hA.string,loginInitiationUrl:hA.string}),A.Icons=hA.type({detail:ij(A.FileAttributes)},"Icons"),A.WatchtowerExclusions=hA.type({compromised:hA.boolean,vulnerable:hA.boolean,reused:hA.boolean,weak:hA.boolean,unsecured:hA.boolean,inactiveMfa:hA.boolean,expiring:hA.boolean},"WatchtowerExclusions"),A.PasskeyPrf=hA.type({alg:hA.literal("HMAC_SHA256"),credWithUv:hA.string},"PasskeyPrf");let t=hA.type({type:hA.literal("webauthn"),createdAt:hA.number,privateKey:hA.string,userHandle:hA.string,prf:ij(A.PasskeyPrf)},"WebAuthnPasskey"),r=hA.type({type:hA.literal("passage"),createdAt:hA.number,privateKey:hA.string,userHandle:hA.string,passageIdentifier:hA.string},"PassagePasskey");A.UnknownPasskey=hA.intersection([hA.type({type:hA.string,createdAt:hA.number},"UnknownPasskey"),hA.UnknownRecord]),A.Passkey=hA.union([t,r],"Passkey"),A.isKnownPasskey=k=>!!k&&(k.type==="webauthn"||k.type==="passage");let a;(function(k){k.String="string",k.Concealed="concealed",k.Date="date",k.Phone="phone",k.Address="address",k.Url="URL",k.Email="email",k.MonthYear="monthYear",k.Gender="gender",k.CreditCardType="cctype",k.Reference="reference",k.Menu="menu",k.Country="country",k.Month="month",k.OneTimePassword="totp",k.File="file",k.SshKey="sshKey",k.SsoLogin="ssoLogin",k.PasskeyType="passkeyType",k.ManagedApplication="managedApplication"})(a=A.FieldType||(A.FieldType={})),A.TOTP_PREFIX="TOTP_",A.isTotpField=k=>k.k===a.Concealed&&Fp(k.n,A.TOTP_PREFIX);let n=1024*32,o=1024*1024*4;A.MaxOverviewSize=n/1.5,A.MaxDetailSize=o/1.5,A.FieldName={CreditCard:{CreditCardNumber:"ccnum",Expiry:"expiry"},Identity:{FirstName:"firstname",LastName:"lastname"},Passport:{Expiry:"expiry_date"},DriverLicense:{Expiry:"expiry_date"},Membership:{Expiry:"expiry_date"},MedicalRecord:{Date:"date"}};let i;(function(k){k.Active="N",k.Archived="Y",k.Deleted="D"})(i=A.ItemState||(A.ItemState={})),A.getDateValueFromString=k=>{let u=TP.default.utc(k.trim(),"YYYY-MM-DD",!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return hy(u)?u:void 0},A.getDateStringFromValue=k=>{if(typeof k!="number")return"";let u="YYYY-MM-DD",m=TP.default.utc(k,"X").format(u);return A.getDateValueFromString(m)===k?m:(0,TP.default)(k,"X").format(u)},A.findFieldWithName=(k,u)=>{if(!(!u.details||!u.details.sections))for(let m of u.details.sections){let I=X6(m.fields,S=>S.n===k);if(I)return I}};let s=k=>{try{return new URL(Tp(k)).hostname}catch{return}};A.getHighlightedUrl=k=>{let u=s(k);if(!u)return[{type:"Plain",content:k}];let m=k.toLowerCase().indexOf(u);if(m===-1)return[{type:"Plain",content:k}];let I=m+u.length;return Lr([m!==0&&{type:"Plain",content:k.slice(0,m)},{type:"Highlighted",content:k.slice(m,I)},I!==k.length&&{type:"Plain",content:k.slice(I)}])},A.getAddressValue=k=>{let{v:u}=k;if(Xhj(u))return{street:typeof u.street=="string"?u.street:"",city:typeof u.city=="string"?u.city:"",state:typeof u.state=="string"?u.state:"",zip:typeof u.zip=="string"?u.zip:"",country:typeof u.country=="string"?u.country:""}},A.getManagedApplicationValues=k=>k.k===A.FieldType.ManagedApplication&&"v"in k&&A.ManagedApplicationField.is(k.v)?k.v:void 0,A.getSsoValue=k=>{if(k.k===A.FieldType.SsoLogin&&"v"in k&&typeof k.v=="object")return k.v},A.getStringValue=k=>"value"in k&&typeof k.value=="string"?k.value:"v"in k&&typeof k.v=="string"?k.v:"",A.getNumberValue=k=>"v"in k&&typeof k.v=="number"&&!Number.isNaN(k.v)?k.v:void 0,A.getDocumentAttributesFromField=k=>{if(k.k===A.FieldType.File&&"v"in k&&typeof k.v=="object")return k.v??void 0},A.getPasswordStrengthFromEntropy=k=>k9(k,0,r$.FANTASTIC)/r$.FANTASTIC*100,A.getPasswordStrength=(k,u,m,I)=>typeof m=="boolean"&&m&&typeof I=="number"?A.getPasswordStrengthFromEntropy(I):ff(k,u),A.getCreditCardSubtitle=k=>{if(k.length>=8){let u=k.slice(0,4),m=k.slice(-4);return u+" **** "+m}return""},A.copyAsCorruptedItem=k=>{let u=new A(k.vault,void 0,k.uuid);return u.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1},u.details={sections:[]},u.createdAt=k.createdAt,u.updatedAt=k.updatedAt,u.faveIndex=k.faveIndex,u.state=k.state,u.templateUuid=k.templateUuid,u.itemVersion=k.itemVersion,u},A.importFromJson=(k,u,m)=>{let I=sj(u,Oo).unwrap(),S=sj(I,_N,{mode:"unsafe_report_only",file:YxA,func:E`importFromJson`}).unwrap(),f=m?.generateNewUuid||!wy(S.uuid)?void 0:S.uuid,v=new A(k,void 0,f);return v.overview=S.overview,v.details=S.details,v.createdAt=S.createdAt?new Date(S.createdAt):new Date,v.updatedAt=S.updatedAt?new Date(S.updatedAt):new Date,v.faveIndex=S.faveIndex,v.state=S.trashed,v.templateUuid=S.templateUuid,v},A.getRichIconUrl=({templateUuid:k,title:u,url:m},I=64)=>{if(yj.SoftwareUuid===k)return`https://c.1password.com/richicons/images/software/${I}/${d(u)}.png`;if(yj.LoginUuid===k){if(!m)return"";/^[\w-]+:\/\//.test(m)||(m="https://"+m);try{let f=new URL(m).hostname;return Vhj(f)?`https://c.1password.com/richicons/images/login/${I}/${f}.png`:""}catch{return""}}return""};let l=[" serial number"," software license"," company license"," family license"," license"," app"," shareware"," lizenz"],d=k=>{let u=k.toLowerCase().replace(/[^\d a-z]/g," ").replace(/ {2,}/g," ").trim();u.startsWith("license for ")&&(u=u.slice(12));for(let m of l)if(u.endsWith(m)){u=u.slice(0,-m.length);break}return u.replace(/ /g,"")}})(dA||(dA={}));var KP=hA.intersection([hA.type({title:GA(hA.string,""),ainfo:Do(GA(hA.string,""),A=>{if(typeof A=="number")return A.toString(10);throw new Error("Unexpected ainfo type")})},"required"),hA.partial({url:hA.string,ps:ij(hA.number),pbe:hA.number,pgrng:hA.boolean,passkey:ij(dA.PasskeyOverview),tags:ij(nh(hA.string)),locations:ij(nh(dA.ItemLocation)),URLs:hA.array(dA.UrlField),icons:dA.Icons,watchtowerExclusions:dA.WatchtowerExclusions,b5UserUUID:hA.string,b5AccountUUID:hA.string,integration:hA.string},"partial")],"VaultItemOverview"),Hf=hA.intersection([hA.type({sections:GA(hA.array(dA.Section),[])},"required"),hA.partial({fields:ij(hA.array(dA.WebFormField)),backupKeys:hA.array(hA.string),notesPlain:hA.string,password:ij(hA.string),passwordHistory:hA.array(dA.PreviouslyUsedPassword),passkey:ij(hA.union([dA.Passkey,dA.UnknownPasskey])),documentAttributes:dA.DocumentAttributes,customData:hA.record(hA.string,hA.unknown)},"partial")],"VaultItemDetails"),_N=hA.type({uuid:hA.string,templateUuid:ij(hA.string),faveIndex:ij(hA.number),createdAt:ij(Yn),updatedAt:ij(Yn),overview:KP,details:Hf,trashed:hA.string},"ExternalVaultItem"),Xhj=A=>typeof A=="object"&&A!==null,Vhj=A=>{let j=A.split(".");return j.length>=2&&j.every(e=>e.length>0)},Whj=(A,j,e)=>{if(typeof e>"u")return[j];let t=v0(e,A);return t>-1?e.map((r,a)=>a===t?j:r):[...e,j]};var SP=W6.type({ainfo:W6.string,passkey:ij(dA.PasskeyOverview),pbe:ij(W6.number),pgrng:ij(W6.boolean),ps:ij(W6.number),title:W6.string,url:ij(W6.string),URLs:W6.array(dA.UrlField)}),MP=Hf,_P=W6.readonly(W6.type({overview:SP,details:MP}),"BaseManagedCredentialData"),Yhj=W6.readonly(W6.intersection([PP,_P]),"ManagedCredential"),Qhj=W6.readonly(W6.intersection([HP,_P]),"UpdatedManagedCredential"),Zhj=W6.readonly(W6.intersection([CP,_P]),"CreateManagedCredential");var Tf=class{constructor(){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedCredentialKey",this.toJSON=pt,this.generate=async()=>{await this.symmetricKey.generate(Tt)},this.encryptCreate=async j=>{let{overview:e,details:t,...r}=j,a=await this.symmetricKey.encrypt(lt(e)),n=await this.symmetricKey.encrypt(lt(t));return{...r,encOverview:a,encDetails:n}},this.encryptUpdated=async j=>{let{overview:e,details:t,...r}=j,a=await this.symmetricKey.encrypt(lt(e)),n=await this.symmetricKey.encrypt(lt(t));return{...r,encOverview:a,encDetails:n}},this.encrypt=async j=>{let{overview:e,details:t,...r}=j,a=await this.symmetricKey.encrypt(lt(e)),n=await this.symmetricKey.encrypt(lt(t));return{...r,encOverview:a,encDetails:n}},this.decrypt=async j=>{let{encOverview:e,encDetails:t,...r}=j,a=await this.symmetricKey.decrypt(e),n=sj(a,Ue.pipe(SP)).unwrap(),o=await this.symmetricKey.decrypt(t),i=sj(o,Ue.pipe(MP)).unwrap();return{...r,details:i,overview:n}},this.decryptWithKeyset=async(j,e)=>(await this.symmetricKey.decryptWithKeyset(j,e),this),this.wrapWithKey=async j=>this.symmetricKey.encryptWithKey(j),this.symmetricKey=new si}get uuid(){return this.symmetricKey.uuid}};var qr=W(aA());var ot,Vp=new Array(128).fill(void 0);Vp.push(void 0,null,!0,!1);function b6(A){return Vp[A]}var o$=Vp.length;function jqj(A){A<132||(Vp[A]=o$,o$=A)}function LP(A){let j=b6(A);return jqj(A),j}var AfA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&AfA.decode();var a$=null;function RN(){return(a$===null||a$.byteLength===0)&&(a$=new Uint8Array(ot.memory.buffer)),a$}function LN(A,j){return A=A>>>0,AfA.decode(RN().subarray(A,A+j))}function Y6(A){o$===Vp.length&&Vp.push(Vp.length+1);let j=o$;return o$=Vp[j],Vp[j]=A,j}var n$=null;function xs(){return(n$===null||n$.byteLength===0)&&(n$=new Int32Array(ot.memory.buffer)),n$}function i$(A,j){return A=A>>>0,RN().subarray(A/1,A/1+j)}var nl=0;function Yl(A,j){let e=j(A.length*1,1)>>>0;return RN().set(A,e/1),nl=A.length,e}function jfA(A,j,e,t){try{let o=ot.__wbindgen_add_to_stack_pointer(-16),i=Yl(A,ot.__wbindgen_malloc),s=nl,l=Yl(j,ot.__wbindgen_malloc),d=nl,k=Yl(e,ot.__wbindgen_malloc),u=nl,m=Yl(t,ot.__wbindgen_malloc),I=nl;ot.seal_x25519_chacha20poly1305(o,i,s,l,d,k,u,m,I);var r=xs()[o/4+0],a=xs()[o/4+1],n=xs()[o/4+2];if(n)throw LP(a);return NN.__wrap(r)}finally{ot.__wbindgen_add_to_stack_pointer(16)}}function efA(A,j,e,t,r){try{let l=ot.__wbindgen_add_to_stack_pointer(-16),d=Yl(A,ot.__wbindgen_malloc),k=nl,u=Yl(j,ot.__wbindgen_malloc),m=nl,I=Yl(e,ot.__wbindgen_malloc),S=nl,f=Yl(t,ot.__wbindgen_malloc),v=nl,P=Yl(r,ot.__wbindgen_malloc),D=nl;ot.open_x25519_chacha20poly1305(l,d,k,u,m,I,S,f,v,P,D);var a=xs()[l/4+0],n=xs()[l/4+1],o=xs()[l/4+2],i=xs()[l/4+3];if(i)throw LP(o);var s=i$(a,n).slice();return ot.__wbindgen_free(a,n*1,1),s}finally{ot.__wbindgen_add_to_stack_pointer(16)}}function Xp(A,j){try{return A.apply(this,j)}catch(e){ot.__wbindgen_exn_store(Y6(e))}}var QxA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>ot.__wbg_encappedkeyandciphertext_free(A>>>0)),NN=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,QxA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,QxA.unregister(this),j}free(){let j=this.__destroy_into_raw();ot.__wbg_encappedkeyandciphertext_free(j)}get encapped_key(){try{let r=ot.__wbindgen_add_to_stack_pointer(-16);ot.__wbg_get_encappedkeyandciphertext_encapped_key(r,this.__wbg_ptr);var j=xs()[r/4+0],e=xs()[r/4+1],t=i$(j,e).slice();return ot.__wbindgen_free(j,e*1,1),t}finally{ot.__wbindgen_add_to_stack_pointer(16)}}set encapped_key(j){let e=Yl(j,ot.__wbindgen_malloc),t=nl;ot.__wbg_set_encappedkeyandciphertext_encapped_key(this.__wbg_ptr,e,t)}get ciphertext(){try{let r=ot.__wbindgen_add_to_stack_pointer(-16);ot.__wbg_get_encappedkeyandciphertext_ciphertext(r,this.__wbg_ptr);var j=xs()[r/4+0],e=xs()[r/4+1],t=i$(j,e).slice();return ot.__wbindgen_free(j,e*1,1),t}finally{ot.__wbindgen_add_to_stack_pointer(16)}}set ciphertext(j){let e=Yl(j,ot.__wbindgen_malloc),t=nl;ot.__wbg_set_encappedkeyandciphertext_ciphertext(this.__wbg_ptr,e,t)}},ZxA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>ot.__wbg_hpkeerror_free(A>>>0)),zN=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,ZxA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,ZxA.unregister(this),j}free(){let j=this.__destroy_into_raw();ot.__wbg_hpkeerror_free(j)}},eqj=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>ot.__wbg_x25519keypair_free(A>>>0)),NP=class{__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,eqj.unregister(this),j}free(){let j=this.__destroy_into_raw();ot.__wbg_x25519keypair_free(j)}get public_key(){try{let r=ot.__wbindgen_add_to_stack_pointer(-16);ot.__wbg_get_encappedkeyandciphertext_encapped_key(r,this.__wbg_ptr);var j=xs()[r/4+0],e=xs()[r/4+1],t=i$(j,e).slice();return ot.__wbindgen_free(j,e*1,1),t}finally{ot.__wbindgen_add_to_stack_pointer(16)}}set public_key(j){let e=Yl(j,ot.__wbindgen_malloc),t=nl;ot.__wbg_set_encappedkeyandciphertext_encapped_key(this.__wbg_ptr,e,t)}get private_key(){try{let r=ot.__wbindgen_add_to_stack_pointer(-16);ot.__wbg_get_encappedkeyandciphertext_ciphertext(r,this.__wbg_ptr);var j=xs()[r/4+0],e=xs()[r/4+1],t=i$(j,e).slice();return ot.__wbindgen_free(j,e*1,1),t}finally{ot.__wbindgen_add_to_stack_pointer(16)}}set private_key(j){let e=Yl(j,ot.__wbindgen_malloc),t=nl;ot.__wbg_set_encappedkeyandciphertext_ciphertext(this.__wbg_ptr,e,t)}constructor(){let j=ot.x25519keypair_new();return this.__wbg_ptr=j>>>0,this}};async function tqj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function rqj(){let A={};return A.wbg={},A.wbg.__wbg_hpkeerror_new=function(j){let e=zN.__wrap(j);return Y6(e)},A.wbg.__wbindgen_object_drop_ref=function(j){LP(j)},A.wbg.__wbg_crypto_1d1f22824a6a080c=function(j){let e=b6(j).crypto;return Y6(e)},A.wbg.__wbindgen_is_object=function(j){let e=b6(j);return typeof e=="object"&&e!==null},A.wbg.__wbg_process_4a72847cc503995b=function(j){let e=b6(j).process;return Y6(e)},A.wbg.__wbg_versions_f686565e586dd935=function(j){let e=b6(j).versions;return Y6(e)},A.wbg.__wbg_node_104a2ff8d6ea03a2=function(j){let e=b6(j).node;return Y6(e)},A.wbg.__wbindgen_is_string=function(j){return typeof b6(j)=="string"},A.wbg.__wbg_require_cca90b1a94a0255b=function(){return Xp(function(){let j=module.require;return Y6(j)},arguments)},A.wbg.__wbindgen_is_function=function(j){return typeof b6(j)=="function"},A.wbg.__wbindgen_string_new=function(j,e){let t=LN(j,e);return Y6(t)},A.wbg.__wbg_msCrypto_eb05e62b530a1508=function(j){let e=b6(j).msCrypto;return Y6(e)},A.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return Xp(function(j,e){b6(j).randomFillSync(LP(e))},arguments)},A.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return Xp(function(j,e){b6(j).getRandomValues(b6(e))},arguments)},A.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(j,e){let t=new Function(LN(j,e));return Y6(t)},A.wbg.__wbg_call_27c0f87801dedf93=function(){return Xp(function(j,e){let t=b6(j).call(b6(e));return Y6(t)},arguments)},A.wbg.__wbindgen_object_clone_ref=function(j){let e=b6(j);return Y6(e)},A.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Xp(function(){let j=self.self;return Y6(j)},arguments)},A.wbg.__wbg_window_c6fb939a7f436783=function(){return Xp(function(){let j=window.window;return Y6(j)},arguments)},A.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Xp(function(){let j=globalThis.globalThis;return Y6(j)},arguments)},A.wbg.__wbg_global_207b558942527489=function(){return Xp(function(){let j=global.global;return Y6(j)},arguments)},A.wbg.__wbindgen_is_undefined=function(j){return b6(j)===void 0},A.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return Xp(function(j,e,t){let r=b6(j).call(b6(e),b6(t));return Y6(r)},arguments)},A.wbg.__wbg_buffer_12d079cc21e14bdb=function(j){let e=b6(j).buffer;return Y6(e)},A.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(j,e,t){let r=new Uint8Array(b6(j),e>>>0,t>>>0);return Y6(r)},A.wbg.__wbg_new_63b92bc8671ed464=function(j){let e=new Uint8Array(b6(j));return Y6(e)},A.wbg.__wbg_set_a47bac70306a19a7=function(j,e,t){b6(j).set(b6(e),t>>>0)},A.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(j){let e=new Uint8Array(j>>>0);return Y6(e)},A.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(j,e,t){let r=b6(j).subarray(e>>>0,t>>>0);return Y6(r)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(LN(j,e))},A.wbg.__wbindgen_memory=function(){let j=ot.memory;return Y6(j)},A}function aqj(A,j){return ot=A.exports,tfA.__wbindgen_wasm_module=j,n$=null,a$=null,ot}async function tfA(A){if(ot!==void 0)return ot;typeof A>"u"&&(A=new URL("b5_hpke_bg.wasm",import.meta.url));let j=rqj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await tqj(await A,j);return aqj(e,t)}var rfA=tfA;var li=W(aA());var JN,nfA,UN,ofA,XN=My(rfA,async()=>{let{default:A}=await Promise.resolve().then(()=>W(afA()));return A}),oqj=Symbol(),nB=class{constructor(j){this[nfA]=0,this.toJSON=pt,this.exportJwk=async e=>({kid:e,kty:"OKP",crv:"X25519",x:tj(this.publicKey)}),this.seal=async(e,t,r)=>{let a=jfA(this.publicKey,e,t,r);return{ciphertext:a.ciphertext,encappedKey:a.encapped_key}},this.publicKey=j}};JN=nB,nfA=oqj;nB.fromJwk=async A=>{await XN();let j=ZA(A.x);return JN.__crypto_internal.fromBytes(j)};nB.__crypto_internal={fromBytes:async A=>{if(A.length!==32)throw new Error(`invalid length: ${A.length}`);return new JN(A)}};var iqj=Symbol(),oB=class{constructor(j,e){this[ofA]=0,this.toJSON=pt,this.exportSensitiveJwk=async t=>({kid:t,kty:"OKP",crv:"X25519",d:tj(this.privateKey),x:tj(this.rawPublicKey)}),this.publicKey=async()=>nB.__crypto_internal.fromBytes(this.rawPublicKey),this.open=async(t,r,a,n)=>efA(this.privateKey,t,r,a,n),this.privateKey=j,this.rawPublicKey=e}};UN=oB,ofA=iqj;oB.fromJwk=async A=>{await XN();let j=ZA(A.x),e=ZA(A.d);if(j.length!==32)throw new Error(`invalid (pub) length: ${j.length}`);if(e.length!==32)throw new Error(`invalid (pri) length: ${e.length}`);return new UN(ZA(A.d),ZA(A.x))};oB.generate=async()=>{await XN();let A=new NP;return new UN(A.private_key,A.public_key)};var Kf=li.readonly(li.type({kid:li.string,kty:li.literal("OKP"),crv:li.literal("X25519"),x:li.string},"type"),"JwkX25519PubKey"),zP=li.readonly(li.type({kid:li.string,kty:li.literal("OKP"),crv:li.literal("X25519"),d:li.string,x:li.string},"type"),"JwkX25519PriKey");var VN,ifA,WN,sfA,lfA=Dj("1P_VAULT_REPORTING_ITEM_SNAPSHOT_V1"),sqj=Symbol(),Pu=class{constructor(j,e){this[ifA]=0,this.toJSON=pt,this.exportJwk=async()=>this.publicKey.exportJwk(this.kid),this.encrypt=async t=>{let r=Ue.pipe(Vy).encode(t.additionalData),a=Ue.pipe(s$).encode(t.snapshot),n=await this.publicKey.seal(lfA,a,r);return Rp.fromPieces(this.kid,n.encappedKey,n.ciphertext,r).toEnvelope()},this.kid=j,this.publicKey=e}};VN=Pu,ifA=sqj;Pu.fromJwk=async A=>new VN(A.kid,await nB.fromJwk(A));Pu.__crypto_internal={fromPubkey:async(A,j)=>new VN(A,j)};var lqj=Symbol(),Wp=class{constructor(j,e){this[sfA]=0,this.toJSON=pt,this.exportSensitiveJwk=async()=>this.privateKey.exportSensitiveJwk(this.uuid),this.publicKey=async()=>Pu.__crypto_internal.fromPubkey(this.uuid,await this.privateKey.publicKey()),this.decrypt=async t=>{let r=await Rp.fromEnvelope(t.encryptedSnapshot);if(r.kid!==this.uuid)throw new Error("Incorrect kid");let a=await this.privateKey.open(r.encKey,lfA,r.data,r.unauthenticatedRawAd);return{snapshot:sj(a,Ue.pipe(s$)).unwrap(),additionalData:r.unauthenticatedDecoded,serverData:t.serverData}},this.uuid=j,this.privateKey=e}};WN=Wp,sfA=lqj;Wp.fromJwk=async A=>new WN(A.kid,await oB.fromJwk(A));Wp.generate=async()=>new WN(fe(),await oB.generate());var YN=qr.exact(qr.partial({compromisedDomain:qr.string,vulnerablePassword:qr.boolean,passwordStrength:qr.number,reusedPassword:qr.boolean,unsecuredWebsite:qr.boolean,inactiveTwoFactor:qr.string,inactivePasskey:qr.string,expiringSoon:qr.boolean,expired:qr.boolean,itemsInWrongAccount:qr.boolean},"SnapshotWatchtowerReport")),s$=qr.intersection([qr.exact(qr.type({title:GA(qr.string,"")},"required")),qr.exact(qr.partial({username:qr.string,domains:qr.array(qr.string),watchtowerReport:YN,vaultName:qr.string},"optional"))],"VaultItemSnapshot"),Sf=4,l$=bh,RP=qr.type({uuid:qr.string,trashed:qr.string,vaultUuid:qr.string},"VaultItemSnapshotServerData"),cfA=qr.type({encryptedSnapshot:l$,serverData:RP},"EncryptedVaultItemSnapshotWithServerData"),dfA=qr.readonly(qr.exact(qr.type({snapshot:s$,additionalData:Vy,serverData:RP})),"VaultItemSnapshotWithAdditionalAndServerData");var Q6;(function(A){A.rawHkdf=el,A.rawPbkdf2UsingPbes2Alg=Ny,A.Sha2Mode=Pr})(Q6||(Q6={}));var Yp;(function(A){A.PBES2_ALG_256=mN,A.PBES2_ALG_256_G=cP,A.DEFAULT_PBES2_ALG=dP,A.DEFAULT_ITERATIONS=lP,A.ITERATIONS_100_000=UvA})(Yp||(Yp={}));var Ve={};Yt(Ve,{AvailableTiers:()=>yfA,BillingStats:()=>JP,Card:()=>sB,Charge:()=>mfA,ChildAccountRelationship:()=>tz,Coupon:()=>Ih,CustomerAddress:()=>QN,Discount:()=>EfA,Feature:()=>FfA,Frequency:()=>Bf,FrequencyCodec:()=>gf,GiftCard:()=>kfA,Invoice:()=>d$,InvoiceLine:()=>pfA,InvoicePdf:()=>BfA,MspLastInvoiceData:()=>gfA,MspProjectedInvoiceData:()=>hfA,OpTaxNumber:()=>ufA,PendingPaymentMethod:()=>Az,Plan:()=>xh,Promotion:()=>Mf,PurchaseOrder:()=>vfA,PurchaseOrderStatus:()=>UP,RemainingAmount:()=>$fA,SetupIntent:()=>rz,StripePurchaseOrder:()=>xfA,StripePurchaseOrderStatus:()=>jz,StripeSubscription:()=>qfA,Subscription:()=>ffA,TaxAdvice:()=>GfA,Tier:()=>lB,TierChangeMapping:()=>bfA,UpdatePaymentMethodRequest:()=>Avj,activateStripeBilling:()=>Lqj,addCard:()=>kqj,addOrUpdateAddress:()=>dqj,attachAsChildAccount:()=>Vqj,cancelStripeSubscription:()=>Cqj,changeDefaultCard:()=>uqj,changeDefaultPaymentMethod:()=>tvj,changeTier:()=>ez,checkChildAccountCode:()=>Wqj,checkGiftCard:()=>vqj,createAppleSubscription:()=>Sqj,createChildAccountRelationship:()=>Uqj,createPlayStoreSubscription:()=>Kqj,createSetupIntent:()=>Qqj,createUnverifiedSetupIntent:()=>Zqj,deleteCard:()=>pqj,deletePaymentMethod:()=>rvj,deletePendingPaymentMethod:()=>Dqj,detachChildAccount:()=>Yqj,endTrialPeriod:()=>Hqj,getAvailableTiers:()=>Nqj,getAvailableTiersV3:()=>zqj,getBillingStats:()=>wqj,getCard:()=>Eqj,getChildAccountRelationship:()=>Xqj,getDefaultTiers:()=>Jqj,getGiftCards:()=>qqj,getInvoiceDetails:()=>fqj,getInvoicePDF:()=>Gqj,getInvoices:()=>xqj,getIsValidPurchaseOrderToken:()=>Mqj,getIsValidStripePurchaseOrderToken:()=>_qj,getMspDistributorLinkPreview:()=>dvj,getMspLastInvoiceData:()=>bqj,getMspNfrInfo:()=>lvj,getMspProjectedInvoiceData:()=>yqj,getPaymentMethod:()=>evj,getRemainingAmount:()=>ivj,getSubscription:()=>Oqj,getTaxAdvice:()=>Tqj,getUpgradeTiers:()=>Rqj,getValidPromotionFromCode:()=>gqj,linkAccountToPartner:()=>nvj,redeemGiftCard:()=>hqj,requestInvoiceEmail:()=>Fqj,updateCard:()=>mqj,updatePaymentMethod:()=>jvj,updateStripeSubscription:()=>Pqj});var iB=W(aA());var cqj=AA("web-api/api/billing/customer_address.ts"),QN=iB.readonly(iB.type({country:iB.string,provinceOrState:iB.string,zip:iB.string}),"CustomerAddress"),dqj=cqj(A=>({name:"addOrUpdateAddress",method:"POST",url:"/api/v1/billing/address",body:A,responseType:J}));var Z6=W(aA());var c$=AA("web-api/api/billing/card.ts"),sB=Z6.readonly(Z6.type({stripeCardUid:Z6.string,brand:Z6.string,country:Z6.string,isDefault:Z6.boolean,expMonth:Z6.number,expYear:Z6.number,name:Z6.string,state:Z6.union([Z6.string,Z6.undefined]),zip:Z6.union([Z6.string,Z6.undefined]),lastFour:GA(Z6.string,"")}),"Card"),kqj=c$(A=>({name:"addCard",method:"POST",url:"/api/v1/cards",body:A,responseType:J})),uqj=c$(A=>({name:"changeDefaultCard",method:"PATCH",url:`/api/v1/cards/${A.stripeCardUid}/default`,responseType:J})),pqj=c$(A=>({name:"deleteCard",method:"DELETE",url:`/api/v1/cards/${A}`,responseType:J})),mqj=c$((A,j)=>({name:"updateCard",method:"PATCH",url:`/api/v1/card/${A}`,body:j,responseType:J})),Eqj=c$(A=>({name:"getCard",method:"GET",url:`/api/v1/cards/${A}`,responseType:sB}));var Ma=W(aA());var Bqj=AA("web-api/api/billing/coupon.ts"),Ih=Ma.readonly(Ma.type({stripeCouponUID:Ma.string,amountOff:Ma.number,percentOff:Ma.number,createdAt:Ma.string,currency:Ma.string,duration:Ma.string,durationInMonths:Ma.number}),"Coupon"),Mf=Ma.readonly(Ma.type({name:Ma.string,description:Ma.string,trialDays:Ma.number,addTrialDays:Ma.boolean,coupon:Ma.union([Ih,Ma.undefined]),suppressPromotionDescription:Ma.boolean,thirdPartyBilling:Ma.boolean,automatedPartnership:Ma.boolean,showBilling:Ma.boolean}),"Promotion"),gqj=Bqj((A,j)=>({name:"getValidPromotionFromCode",method:"GET",url:`/api/v2/coupon/${A}/${j}/check`,encrypted:!1,responseType:Mf}));var Ql=W(aA());var ZN=AA("web-api/api/billing/gift_card.ts"),kfA=Ql.readonly(Ql.type({code:Ql.string,redeemedAt:Ql.string,amount:Ql.number,description:Ql.string,purchaserEmail:Ql.string}),"GiftCard"),hqj=ZN(A=>({name:"redeemGiftCard",method:"POST",url:"/api/v1/giftcard/redeem",body:A,responseType:J})),qqj=ZN(()=>({name:"getGiftCards",method:"GET",url:"/api/v1/giftcards",responseType:Ql.readonlyArray(kfA)})),vqj=ZN(A=>({name:"checkGiftCard",method:"POST",url:`/api/v1/giftcard/${encodeURIComponent(A)}/check`,responseType:J}));var PA=W(aA());var _f=AA("web-api/api/billing/invoice.ts"),ufA=PA.readonly(PA.intersection([PA.type({label:PA.string,number:PA.string,effective:PA.string}),PA.partial({requiredStatement:PA.union([PA.string,PA.null])})]),"OpTaxNumber"),pfA=PA.readonly(PA.type({stripeInvoiceLineUID:PA.string,amount:PA.number,currency:PA.string,description:PA.string,periodStart:PA.string,periodEnd:PA.string,priceUID:PA.union([PA.string,PA.undefined]),planUID:PA.union([PA.string,PA.undefined]),quantity:GA(PA.number,0),proration:GA(PA.boolean,!1),discountable:GA(PA.boolean,!1),taxName:GA(PA.string,"")}),"InvoiceLine"),mfA=PA.readonly(PA.type({uid:PA.string,amount:PA.number,captured:PA.boolean,created:PA.string,currency:PA.string,paid:PA.boolean,refunded:PA.boolean,amountRefunded:PA.number,desc:PA.string,failMsg:PA.string,failCode:PA.string,meta:GA(PA.record(PA.string,PA.string),{}),email:PA.string,statement:PA.string,status:PA.string,source:PA.union([sB,PA.null])}),"Charge"),EfA=PA.readonly(PA.type({coupon:PA.union([Ih,PA.null]),start:PA.string,end:PA.string}),"Discount"),d$=PA.readonly(PA.type({stripeInvoiceUID:PA.string,accountName:PA.string,address:PA.string,amountDue:PA.number,attemptCount:PA.number,attempted:PA.boolean,billTo:PA.string,charge:PA.union([mfA,PA.null]),closed:PA.boolean,currency:PA.string,date:PA.string,description:PA.string,discount:PA.union([EfA,PA.null]),endingBalance:PA.number,forgiven:PA.boolean,lines:GA(nh(pfA),[]),metadata:GA(PA.record(PA.string,PA.string),{}),nextPaymentAttempt:PA.string,willRetry:PA.boolean,paid:PA.boolean,periodStart:PA.string,periodEnd:PA.string,startingBalance:PA.number,statementDescriptor:PA.string,subtotal:PA.number,tax:PA.number,taxPercent:PA.number,total:PA.number,taxName:PA.string,taxNumber:GA(PA.string,""),isTaxExempt:GA(PA.boolean,!1),opTaxNumbers:PA.union([PA.readonlyArray(ufA),PA.null]),showDefaultTaxMsg:PA.boolean}),"Invoice"),BfA=PA.readonly(PA.type({fileName:PA.string,contentType:PA.string,contents:PA.string}),"InvoicePDF"),gfA=PA.readonly(PA.union([PA.type({mspName:PA.string,periodStart:PA.string,periodEnd:PA.string,taxPercent:PA.number,paid:PA.boolean,forgiven:PA.boolean,currency:PA.string,subtotal:PA.number,discountCoupon:PA.union([Ih,PA.null]),amountDue:PA.number,startingBalance:PA.number,endingBalance:PA.number,taxNumber:PA.string,pricePerSeat:PA.number,mspNetSeats:PA.number,managedAccountNetSeats:PA.number}),PA.null])),hfA=PA.readonly(PA.union([PA.type({periodStart:PA.string,periodEnd:PA.string,mspName:PA.string,mspProjectedNetSeats:PA.number,managedAccountProjectedNetSeats:PA.number,pricePerSeat:PA.number,taxExempt:PA.boolean,taxPercent:PA.number,currency:PA.string}),PA.null])),xqj=_f((A=0,j=20)=>({name:"getInvoices",method:"GET",url:`/api/v1/invoices?page=${A}&limit=${j}`,responseType:PA.readonlyArray(d$)})),fqj=_f(A=>({name:"getInvoiceDetails",method:"GET",url:`/api/v1/invoice/${A}`,responseType:d$})),Gqj=_f(A=>({name:"getInvoicePdf",method:"GET",url:`/api/v1/invoice/${A}/pdf`,responseType:BfA})),Fqj=_f(A=>({name:"requestInvoiceEmail",method:"POST",url:`/api/v1/invoice/${A}/email`,responseType:J})),bqj=_f(()=>({name:"getMspLastInvoiceData",method:"GET",url:"/api/v2/billing/msp/last-invoice",responseType:gfA})),yqj=_f(()=>({name:"getMspProjectedInvoiceData",method:"GET",url:"/api/v2/billing/msp/projected-invoice",responseType:hfA}));var Wj=W(aA());var Qp=W(aA());var $qj=AA("web-api/api/billing/billing_stats.ts"),JP=Qp.readonly(Qp.type({activeMembers:Qp.number,activeGuests:Qp.number,billedMembers:Qp.number,billedGuests:Qp.number}),"BillingStats"),wqj=$qj(()=>({name:"getBillingStats",method:"GET",url:"/api/v1/billing/stats",responseType:JP}));var Rc=W(aA());var Iqj=AA("web-api/api/billing/pendingpaymentmethod.ts"),Az=Rc.readonly(Rc.type({id:Rc.number,accountId:Rc.number,setupIntentUid:Rc.string,isDefault:Rc.boolean,isFailed:Rc.boolean}),"PendingPaymentMethod"),Dqj=Iqj(A=>({name:"deletePendingPaymentMethod",method:"DELETE",url:`/api/v1/pendingPaymentMethod/${A}`,responseType:J}));var Cu=AA("web-api/api/billing/subscription.ts"),qfA=Wj.readonly(Wj.type({stripeSubscriptionUid:Wj.string,cancelAtPeriodEnd:Wj.boolean,canceledAt:Wj.string,currentPeriodEnd:Wj.string,currentPeriodStart:Wj.string,endedAt:Wj.string,quantity:Wj.number,start:Wj.string,status:Wj.string,taxPercent:Wj.number,effectiveTaxRate:Wj.number,trialEnd:Wj.string,trialStart:Wj.string,taxNumber:Wj.string,isTaxExempt:Wj.boolean,country:Wj.string,provinceOrState:Wj.string,zip:Wj.string}),"StripeSubscription"),UP;(function(A){A.Paid="P",A.Outstanding="O",A.Special="S"})(UP||(UP={}));var vfA=Wj.readonly(Wj.type({state:Wj.string,teamMembers:Wj.number,totalPrice:Wj.number,paymentStatus:pe(UP,"PurchaseOrderStatus"),startDate:Wj.string,endDate:Wj.string}),"PurchaseOrder"),jz;(function(A){A.Approved="A",A.Pending="P",A.Canceled="C",A.Delinquent="D"})(jz||(jz={}));var xfA=Wj.readonly(Wj.type({state:Wj.string,teamMembers:Wj.number,memberPrice:Wj.number,billingStartDate:Wj.string,customerPO:Wj.string,frequency:Wj.union([Wj.literal("Y"),Wj.literal("M")]),secretsAutomationPrice:Wj.number,vaultAccessCredits:Wj.number}),"StripePurchaseOrder"),ffA=Wj.readonly(Wj.type({balance:Wj.number,subscription:qfA,plan:Wj.union([xh,Wj.undefined]),cards:Wj.union([Wj.readonlyArray(sB),Wj.null]),nextInvoice:Wj.union([d$,Wj.undefined]),hasInvoices:Wj.boolean,purchaseOrder:Wj.union([vfA,Wj.undefined]),stripePurchaseOrder:Wj.union([xfA,Wj.undefined]),customerAddress:Wj.union([QN,Wj.undefined]),pendingCreditAmount:GA(Wj.number,0),coupon:Wj.union([Ih,Wj.undefined]),pendingPaymentMethods:Wj.union([Wj.array(Az),Wj.undefined]),billingStats:Wj.union([JP,Wj.undefined])}),"Subscription"),Oqj=Cu(()=>({name:"getSubscription",method:"GET",url:"/api/v2/billing",responseType:ffA})),Pqj=Cu(A=>({name:"updateStripeSubscription",method:"POST",url:"/api/v2/subscription",body:A,responseType:J})),Cqj=Cu(()=>({name:"cancelStripeSubscription",method:"DELETE",url:"/api/v1/subscription",responseType:J})),Hqj=Cu(()=>({name:"endTrialPeriod",method:"DELETE",url:"/api/v1/subscription/trial",responseType:J})),GfA=Wj.readonly(Wj.type({countryCode:Wj.string,provinceCode:Wj.string,postalCode:Wj.string,taxRate:Wj.number,taxRateString:Wj.string,effectiveTaxRate:Wj.number,effectiveTaxRateString:Wj.string,taxName:Wj.string,originalPrice:Wj.number,totalPrice:Wj.number,totalTax:Wj.number,useTaxData:Wj.boolean}),"TaxAdvice"),Tqj=Cu(A=>({name:"getTaxAdvice",method:"POST",url:"/api/v2/taxadvice",body:A,responseType:GfA,encrypted:!1})),Kqj=Cu(A=>({name:"createPlayStoreSubscription",method:"POST",url:"/api/v1/subscriptions/playstore",body:A,responseType:J})),Sqj=Cu(A=>({name:"createAppleSubscription",method:"POST",url:"/api/v1/subscriptions/apple",body:A,options:{dataType:"arraybuffer"},responseType:J})),Mqj=Cu(A=>({name:"getIsValidPurchaseOrderToken",method:"GET",url:`/api/v1/purchase_order/${A}/check`,responseType:J})),_qj=Cu(A=>({name:"getIsValidStripePurchaseOrderToken",method:"GET",url:`/api/v1/stripe_purchase_order/${A}/check`,responseType:J})),Lqj=Cu(A=>({name:"activateStripeBilling",method:"POST",url:"/api/v1/billing/activate",body:A,responseType:J}));var mt=W(aA());var k$=AA("web-api/api/billing/tier.ts"),FfA=mt.readonly(mt.type({title:mt.string,desc:mt.string}),"Feature"),bfA=mt.readonly(mt.type({tierId:mt.number,restrictionType:mt.string,accountType:mt.string,mappedTierName:mt.union([mt.string,mt.undefined])}),"TierChangeMapping"),lB=mt.readonly(mt.type({name:mt.string,successorTierName:ij(mt.string),accountType:mt.string,isPublic:mt.boolean,sortOrder:mt.number,trialDays:mt.number,backupDays:mt.number,guestsIncluded:mt.number,maxGuests:mt.number,membersIncluded:mt.number,maxMembers:mt.number,minQuantity:mt.number,storagePerAccount:mt.number,storagePerUser:mt.number,marketingText:mt.readonly(mt.type({defaultPriceDisplayFrequency:gf,localizedFeatures:GA(mt.readonlyArray(FfA),[]),name:mt.string,viewDetailsURL:mt.string})),features:GA(mt.readonlyArray(mt.string),[]),gatedFeatures:GA(mt.readonlyArray(mt.string),[]),plans:GA(mt.readonlyArray(xh),[]),tierChangeRestrictions:GA(mt.readonlyArray(bfA),[])}),"Tier"),yfA=mt.readonly(mt.type({currentTier:lB,listOfTiers:mt.readonlyArray(lB)}),"AvailableTiers"),Nqj=k$(()=>({name:"getAvailableTiers",method:"GET",url:"/api/v2/billing/tiers",responseType:mt.readonlyArray(lB)})),zqj=k$(()=>({name:"getAvailableTiersV3",method:"GET",url:"/api/v3/billing/tiers",responseType:yfA})),Rqj=k$(()=>({name:"getUpgradeTiers",method:"GET",url:"/api/v2/billing/tiers/upgrades",responseType:mt.readonlyArray(lB)})),Jqj=k$(()=>({name:"getDefaultTiers",method:"GET",url:"/api/v2/billing/tiers/defaults",responseType:mt.readonlyArray(lB)})),ez=k$(A=>({name:"changeTier",method:"PUT",url:"/api/v1/billing/tiers/switch",body:A,responseType:J}));var Dh=W(aA());var u$=AA("web-api/api/billing/child_account_relationship.ts"),tz=Dh.readonly(Dh.type({code:Dh.string,state:Dh.string}),"ChildAccountRelationship"),Uqj=u$(()=>({name:"createChildAccountRelationship",method:"POST",url:"/api/v1/account/child",responseType:tz})),Xqj=u$(()=>({name:"getChildAccountRelationship",method:"GET",url:"/api/v1/account/child",responseType:tz})),Vqj=u$(A=>({name:"attachAsChildAccount",method:"POST",url:"/api/v1/account/child/attach",body:{code:A},responseType:J})),Wqj=u$(A=>({name:"checkChildAccountCode",method:"POST",url:`/api/v1/account/child/${encodeURIComponent(A)}/check`,responseType:J})),Yqj=u$(()=>({name:"detachChildAccount",method:"DELETE",url:"/api/v1/account/child",responseType:J}));var Si=W(aA());var Lf=AA("web-api/api/billing/payment.ts"),rz=Si.readonly(Si.type({uid:Si.string,clientSecret:Si.string}),"SetupIntent"),Qqj=Lf(()=>({name:"createSetupIntent",method:"POST",url:"/api/v1/billing/payment/setup_intents",encrypted:!0,responseType:rz})),Zqj=Lf((A,j)=>({name:"createUnverifiedSetupIntent",method:"POST",url:"/api/v1/billing/payment/unverified_setup_intents",body:{setupIntentCode:A,signupUid:j},encrypted:!1,responseType:rz})),Avj=Si.readonly(Si.type({name:Si.string,country:Si.string,state:Si.string,zip:Si.string,expYear:Si.number,expMonth:Si.number}),"UpdatePaymentMethodRequest"),jvj=Lf((A,j)=>({name:"updatePaymentMethod",method:"PATCH",url:`/api/v1/paymentmethod/${A}`,body:j,responseType:J})),evj=Lf(A=>({name:"getPaymentMethod",method:"GET",url:`/api/v1/paymentmethod/${A}`,responseType:sB})),tvj=Lf(A=>({name:"changeDefaultPaymentMethod",method:"PATCH",url:`/api/v1/paymentmethod/${A}/default`,responseType:J})),rvj=Lf(A=>({name:"deletePaymentMethod",method:"DELETE",url:`/api/v1/paymentmethod/${A}`,responseType:J}));var avj=AA("web-api/api/billing/partnership.ts"),nvj=avj(A=>({name:"linkAccountToPartner",method:"POST",url:"/api/v1/billing/partnership/link",body:A,responseType:J}));var cB=W(aA());var ovj=AA("web-api/api/billing/remaining_amount.ts"),$fA=cB.readonly(cB.type({remainingAmount:cB.number,isPartialRefund:cB.boolean})),ivj=ovj((A="credit")=>({name:"getRemainingAmount",method:"GET",url:`/api/v1/billing/remaining?type=${A}`,responseType:$fA}));var Mi=W(aA());var wfA=AA("web-api/api/billing/msp.ts"),svj=Mi.readonly(Mi.type({mspAccountSeatPrice:Mi.number,membersIncluded:Mi.number},"MSPNfrData")),lvj=wfA(()=>({name:"getMspNfrInfo",method:"GET",url:"/api/v1/billing/msp/nfr-info",responseType:svj})),cvj=Mi.readonly(Mi.type({distributorName:Mi.string,domain:Mi.string,lastBillingDate:Mi.number,daysUsed:Mi.number,remainingCredits:Mi.number,amountDue:Mi.number},"MSPDistributorLinkPreview")),dvj=wfA(A=>({name:"getMspDistributorLinkPreview",method:"GET",url:`/api/v1/billing/msp/distributor-link/preview?entitlement=${A}`,responseType:cvj}));var Te=W(aA());var ke=W(aA());var dB=AA("web-api/api/sso_settings.ts"),fs;(function(A){A.Okta="Okta",A.Azure="Azure",A.Google="Google",A.Duo="Duo",A.OneLogin="OneLogin",A.JumpCloud="JumpCloud",A.Ping="Ping",A.Unknown="Unknown",A.Generic="Generic",A.Auth0="Auth0"})(fs||(fs={}));var XP;(function(A){A.None="N",A.Everyone="E",A.SelectedGroups="S",A.ExceptGuests="G",A.ExcludedGroups="X"})(XP||(XP={}));var VP;(function(A){A.Active="A",A.Disabled="D"})(VP||(VP={}));var az=ke.type({enabledAt:ke.string,deadline:ke.string},"SsoGroup"),p$=ke.readonly(ke.partial({remainingUnlocks:ke.number,deadlineDate:ke.string,state:ke.string}),"SsoMigrationGracePeriod"),kvj=ke.type({clientId:ke.string,identityProvider:ke.string,wellKnownUrl:ke.string},"SsoOidcWellKnownSettingsRequest"),IfA=ke.readonly(ke.type({authorizationEndpoint:ke.string,issuer:ke.string,tokenEndpoint:ke.string,userInfoEndpoint:ke.string}),"WellKnownUrlResponse"),uvj=ke.readonly(ke.type({url:ke.string}),"WellKnownUrlRequest"),pvj=ke.intersection([ke.type({clientId:ke.string,authEndpoint:ke.string,identityProvider:pe(fs,"IdentityProviders"),issuer:ke.string,tokenEndpoint:ke.string,userInfoEndpoint:ke.string,privateApp:ke.boolean,displayName:ij(ke.string)},"type"),ke.partial({wellKnownExpiresAt:ke.string,wellKnownUrl:ke.string,clientSecret:ke.string},"partial")],"SsoOidcSettings"),DfA=ke.readonly(ke.type({oidcSettings:pvj}),"SsoFederationSettings"),WP=ke.readonly(ke.intersection([ke.type({authenticationPolicy:pe(XP,"SsoAuthenticationPolicy"),federationType:ke.string,state:pe(VP,"SsoState"),federationSettings:DfA},"type"),ke.partial({gracePeriodAuthCount:ke.number,ssoGroups:ke.array(ke.string,"ssoGroups"),gracePeriodDuration:ke.number,lastVerifiedAt:ke.union([ke.string,ke.undefined],"lastVerifiedAt"),offlineAccessSessionDuration:ke.number,lastUpdatedAt:ke.string},"partial")]),"SsoSettings"),OfA=ke.readonly(ke.type({authRedirect:ke.string}),"SsoValidateResponse"),PfA=ke.readonly(ke.type({deadline:ke.string}),"FindSsoGroupDeadlineResponse"),CfA=ke.readonly(ke.type({totalRecoveryUsers:ke.number,usersToRecover:ke.array(ke.string,"usersToRecover"),groupsSsoBreakdowns:ke.array(ke.type({groupUuid:ke.string,userCount:ke.number}),"groupsSsoBreakdowns")}),"AffectedUserCounts"),YP=dB(()=>({name:"getSsoSettings",method:"GET",url:"/api/v2/sso/settings",responseType:WP})),nz=dB(A=>({name:"createSsoSettings",method:"POST",url:"/api/v2/sso/settings",body:A,responseType:WP})),oz=dB(A=>({name:"updateSsoSettings",method:"PUT",url:"/api/v2/sso/settings",responseType:WP,body:A})),iz=dB(A=>({name:"ssoValidateStart",method:"POST",url:"/api/v2/sso/settings/oidc/validate/start",body:A,responseType:OfA})),sz=dB(A=>({name:"ssoValidateEnd",method:"POST",url:"/api/v2/sso/settings/oidc/validate/verify",body:A,responseType:J})),mvj=dB((A,j,e)=>({name:"getAffectedUserCounts",method:"POST",url:"/api/v3/sso/settings/recovery/breakdown",body:{ssoGroupsIncluded:A,ssoGroupsExcluded:j,authPolicyType:e},responseType:CfA})),lz=dB(A=>({name:"getGroupDeadline",method:"GET",url:`/api/v2/sso/group/${A}/deadline`,responseType:PfA})),cz=dB(A=>({name:"postOidcWellKnownUrl",method:"POST",url:"/api/v2/sso/wellknown",body:A,responseType:IfA}));var kB=W(aA());var dz=W(Io()),it=A=>{let j=zl(A,r=>Evj(r)),e=G0(j,r=>r.length>0),t=pn(e,(r,a)=>encodeURIComponent(a)+"="+r);return t.length>0?"?"+t.join("&"):""},Evj=A=>Array.isArray(A)?A.map(j=>encodeURIComponent(kz(j))).join(","):encodeURIComponent(kz(A)),kz=A=>typeof A>"u"||A===null?"":typeof A=="string"?A:Array.isArray(A)?A.map(j=>kz(j)).join(","):JSON.stringify(A),Hu=(A,j)=>j.slice(0,15).filter((e,t)=>(A&1<<t)!==0),m$=(A,j)=>{let e=t=>typeof t=="string"&&l6(A).includes(t);return new kB.Type(j,e,(t,r)=>e(t)?kB.success(t):kB.failure(t,r),kB.identity)},Oh;(function(A){A.Older="older",A.Newer="newer"})(Oh||(Oh={}));var E$=(A,j)=>A===Oh.Newer?dz.default.utc(j).startOf("day"):dz.default.utc(j).endOf("day");var Ge=W(aA());var Vd=W(aA());var gvj=AA("web-api/api/icons.ts"),Nf=Vd.readonly(Vd.type({version:Vd.string,icons:Vd.readonlyArray(Vd.type({url:Vd.string,description:Vd.string}))}),"IconSet"),uz=gvj(A=>({name:"getIcons",method:"GET",url:`/api/v1/icons/${A}`,responseType:Nf}));var ca=W(aA());var QP=AA("web-api/api/vault_item_template.ts"),HfA=ca.readonly(ca.partial({source:ca.string,detail:ca.string}),"VaultItemTemplateIcons"),TfA=ca.partial({subtitle:ca.string,hidden:ca.string,availability:ca.string,icons:HfA},"VaultItemTemplateAttrs"),zf=ca.intersection([ca.type({uuid:ca.string,singularName:ca.string,pluralName:ca.string,icon:ca.string,sourceIcon:ca.string,activeItemCount:GA(ca.number,0),state:GA(ca.string,""),version:GA(ca.number,0),createdAt:r4,updatedAt:r4},"type"),ca.partial({templateUuid:ca.string,attrs:TfA},"partial")],"VaultItemTemplate"),KfA=ca.readonly(ca.type({version:ca.number,templates:ca.readonlyArray(zf)}),"AccountTemplatesResponse"),pz=QP(A=>{let j="/api/v3/templates";return A&&(j+="/all"),{name:"getAccountTemplates",method:"GET",url:j,responseType:KfA}}),ZP=QP(A=>({name:"getDefaultTemplate",method:"GET",url:`/api/v2/template/default/${A}`,responseType:zf,encrypted:!1})),mz=QP(A=>({name:"postTemplate",method:"POST",url:"/api/v1/template",body:zf.encode(A),responseType:J})),Ez=QP((A,j)=>({name:"changeTemplatesState",method:"PATCH",url:`/api/v1/template/${A.join(",")}/state/${j}`,responseType:J}));var Qa=AA("web-api/api/vault.ts"),SfA=Ge.readonly(Ge.type({uuid:Ge.string,avatar:Ge.string,type:Ge.string}),"PreviewGroup"),MfA=Ge.readonly(Ge.type({uuid:Ge.string,avatar:Ge.string,initials:Ge.string}),"PreviewUser"),Wd=Ge.readonly(Ge.type({vaultUuid:Ge.string,accessorType:Ge.keyof({group:!0,user:!0}),accessorUuid:Ge.string,vaultKeySN:Ge.number,encVaultKey:Ge.union([$A.JweB,Ge.undefined]),encryptedBy:Ge.string,acl:Ge.number,leaseTimeout:Ge.number}),"VaultAccess"),ci=Ge.readonly(Ge.intersection([Ge.type({uuid:Ge.string,type:Ge.string,attrVersion:Ge.number,contentVersion:Ge.number,encAttrs:$A.JweB},"type"),Ge.partial({createdAt:Ge.string,updatedAt:Ge.string,access:Ge.readonlyArray(Wd),combinedAccess:Wd,activeItemCount:Ge.number,clientAccess:Ge.number,archivedKeys:Ge.readonlyArray($A.JweB),itemCategories:Ge.readonlyArray(zf),previewGroups:Ge.readonlyArray(SfA),previewUsers:Ge.readonlyArray(MfA)},"partial")]),"Vault"),hvj=["accessors","archived-keys","categories","combined-access"],AC=Qa(A=>{let j=[A.withAccessorPreviews?"accessor-previews":void 0,"combined-access"].filter(t=>t!==void 0).join(",");return{name:"getVaults",method:"GET",url:`/api/v1/vaults${it({user:A.user,group:A.group,permission:A.permission,attrs:j||void 0,limit:A.limit})}`,responseType:Ge.array(ci)}}),Bz=Qa(A=>{let j=[A.withAccessorPreviews?"accessor-previews":void 0,"combined-access"].filter(r=>r!==void 0).join(","),e=it({attrs:j||void 0}),t=G0({userUuid:A.user,groupUuid:A.group,permission:A.permission,attrs:j||void 0,limit:A.limit,vaultUuids:A.vaultUuids},ss);return{name:"getVaults",method:"POST",url:`/api/v1/vaults${e}`,body:{...t},responseType:Ge.array(ci)}}),gz=Qa(()=>({name:"getVaultsForAccountTransfer",method:"GET",url:"/api/v1/vaults/account-transfer",responseType:Ge.array(ci)}));var B$={getDateString:A=>E$(A,void 0).toISOString(),direction:Oh.Older,limit:25},_fA=Ge.readonly(Ge.type({vaults:Ge.readonlyArray(ci),hasMoreData:Ge.boolean}),"LimitedVaultsResponse"),hz=Qa((A,j,e)=>{let t=encodeURIComponent(A||B$.getDateString(j)),r=it({limit:e.limit||B$.limit});return{name:"getVaultsByCreation",method:"GET",url:`/api/v1/vaults/timeline/${t}/${j}${r}`,responseType:_fA}}),qz=Qa((A,j)=>{let e=Hu(j,hvj),t=e.length>0?"?attrs="+e.join(","):"";return{name:"getVault",method:"GET",url:`/api/v3/vault/${A}${t}`,responseType:ci}}),g$=ij(ci),vz=Qa(()=>({name:"getSystemVault",method:"GET",url:"/api/v1/vault/system",responseType:g$})),xz=Qa(()=>({name:"getManagedVault",method:"GET",url:"/api/v1/vault/managed",responseType:g$})),fz=Qa(()=>({name:"getPersonalVault",method:"GET",url:"/api/v1/vault/personal",responseType:g$})),Gz=Qa(()=>({name:"getEveryoneVault",method:"GET",url:"/api/v1/vault/everyone",responseType:g$})),Fz=Qa(()=>({name:"getGeneratedPasswordsVault",method:"GET",url:"/api/v1/vault/generatedpasswords",responseType:g$})),bz=Qa(A=>({name:"updateVault",method:"PUT",url:`/api/v3/vault/${A.uuid}/attrs`,body:A,responseType:J})),yz=Qa((A,j)=>({name:"updateVaultClientAccess",method:"PUT",url:"/api/v1/vault/clientaccess",body:{uuid:A,clientAccess:j},responseType:J})),jC=Qa((A,j)=>({name:"addVaultAccess",method:"PATCH",url:`/api/v2/vault/${A}/vaultaccess`,body:{vaultaccess:j},responseType:J})),LfA=Ge.readonly(Ge.intersection([Ge.type({mandatoryGroupUuids:Ge.readonlyArray(Ge.string),adminGroupUuids:Ge.readonlyArray(Ge.string),enableAdminGroupsByDefault:Ge.boolean}),Ge.partial({iconSet:Nf})]),"CreateVaultPreflight"),$z=Qa(A=>({name:"getCreateVaultPreflight",method:"GET",url:`/api/v1/vault/preflight/create?type=${A}`,responseType:LfA})),wz=Qa(()=>({name:"createAccountTransferVaultPreflight",method:"GET",url:"/api/v1/vault/preflight/account-transfer/create",responseType:LfA})),Iz=Qa(A=>({name:"createVault",method:"POST",url:"/api/v2/vault",body:A,responseType:J})),Dz=Qa(A=>({name:"createVaultForAccountTransfer",method:"POST",url:"/api/v1/vault/account-transfer",body:A,responseType:J})),qvj=Ge.readonly(Ge.type({archivedItemCount:Ge.number}),"DeleteVaultPreflight"),Oz=Qa(A=>({name:"deleteVaultPreflight",method:"GET",url:`/api/v1/vault/preflight/delete/${A}`,responseType:qvj})),Pz=Qa(A=>({name:"deleteVault",method:"DELETE",url:`/api/v4/vault/${A}`,responseType:J})),Cz=Qa((A,j,e)=>({name:"deleteAccessorFromVault",method:"DELETE",url:`/api/v1/vault/${A}/${e?"group":"person"}/${j}`,responseType:J})),Hz=Qa((A,j,e)=>({name:"updatePersonVaultAccessPermissions",method:"PATCH",url:`/api/v1/acl/person/${A}/${j}/${e}`,responseType:J})),Tz=Qa((A,j,e)=>({name:"updateGroupVaultAccessPermissions",method:"PATCH",url:`/api/v1/acl/group/${A}/${j}/${e}`,responseType:J})),Kz=Qa(A=>({name:"updateBulkGroupVaultAccessPermissions",method:"PATCH",url:"/api/v2/acl/groups",body:A,responseType:J})),Sz=Qa(A=>({name:"enableTravelSafe",method:"PUT",url:`/api/v1/vault/${A}/enabletravel`,responseType:J})),Mz=Qa(A=>({name:"disableTravelSafe",method:"PUT",url:`/api/v1/vault/${A}/disabletravel`,responseType:J})),_z=Qa(A=>({name:"enableServiceAccountAccess",method:"PUT",url:`/api/v1/vault/${A}/enableserviceaccountaccess`,responseType:J})),Lz=Qa(A=>({name:"enableServiceAccountAccess",method:"PUT",url:`/api/v1/vault/${A}/disableserviceaccountaccess`,responseType:J}));var _i=AA("web-api/api/groups.ts"),sr;(function(A){let j;(function(a){a.Manager="A",a.Member="R"})(j=A.Role||(A.Role={}));let e=pe(j,"Role"),t;(function(a){a.Active="A",a.Deleted="D",a.Inactive="I"})(t=A.State||(A.State={}));let r=pe(t,"State");A.Type=Te.readonly(Te.type({groupUuid:Te.string,memberUuid:Te.string,role:e,state:r,version:Te.number}),"GroupMembership")})(sr||(sr={}));var Nz=["pubkey","memberships","vault-access","recoverable-ks","user-counts"],Rf=Te.intersection([Te.type({uuid:Te.string,name:Te.string,type:Te.string,desc:Te.string,attrVersion:Te.number,activeKeysetUuid:Te.string,permissions:Te.number},"type"),Te.partial({createdAt:Te.string,updatedAt:Te.string,avatar:Te.string,archivedKeysets:Te.readonlyArray($A.KeysetCiphertext),userMembership:sr.Type,sso:az,recoverableKeyset:$A.KeysetCiphertext,recoveryKeyset:$A.KeysetCiphertext,pubKey:$A.JwkRsaPubKey,memberships:Te.array(sr.Type),vaultAccess:Te.readonlyArray(Wd),userCount:Te.number,trustLogEntry:Te.string},"partial")],"Group"),vvj=Te.readonly(Te.type({groups:Te.array(Rf),totalCount:Te.number}),"GroupsResponse"),eC=_i((A,j)=>{let e=Hu(A,Nz);return{name:"getGroups",method:"GET",url:`/api/v1/groups${it({attrs:e,groups:j?.groupUuids,limit:j?.limit,membershipsOnly:j?.membershipsOnly,offset:j?.offset,search:j?.search,types:j?.types,sort:j?.sort,sortDir:j?.sortDir,user:j?.user,vault:j?.vault})}`,responseType:Te.array(Rf)}}),zz=_i((A,j)=>{let e=Hu(A,Nz),t=e.length>0?"?attrs="+e.join(","):"",r=it({search:j?.search,user:j?.user,vault:j?.vault});return{name:"searchGroupsCount",method:"GET",url:`/api/v1/groups/count${t}${r}`,responseType:Te.number}}),Rz=_i((A,j)=>{let e=Hu(j,Nz),t=e.length>0?"?attrs="+e.join(","):"";return{name:"getGroup",method:"GET",url:`/api/v2/group/${A}${t}`,responseType:Rf}}),NfA=Te.readonly(Te.intersection([Te.type({uuid:Te.string,pubKey:$A.JwkRsaPubKey},"type"),Te.partial({spubKey:$A.JwkEcPubKey},"partial")]),"AccessorPubKey"),Jz=_i(A=>({name:"getGroupPubKeys",method:"GET",url:`/api/v1/group/pubkeys?uuids=${A.join(",")}`,responseType:Te.array(NfA)})),Uz=_i(A=>({name:"updateGroup",method:"PUT",url:`/api/v1/group/${A.uuid}/attrs`,body:A,responseType:J})),Xz=_i((A,j)=>({name:"updateGroupPermissions",method:"PUT",url:`/api/v1/group/${A}/permissions`,body:{permissions:j},responseType:J})),Vz=_i(A=>({name:"createGroup",method:"POST",url:"/api/v1/group",body:A,responseType:J})),xvj=Te.readonly(Te.partial({trustLogEntry:Te.string}),"DeleteGroupRequest"),Wz=_i((A,j)=>({name:"deleteGroup",method:"DELETE",url:`/api/v2/group/${A}`,body:j,responseType:J})),Yz=_i(A=>({name:"markGroupReadyForPurging",method:"POST",url:`/api/v1/group/${A}/purge`,responseType:J})),Qz=Te.readonly(Te.partial({currentUserMustResetPassword:Te.boolean}),"UpdateGroupMembershipsResponse"),Zz=_i((A,j,e)=>({name:"updateGroupMembershipRole",method:"PATCH",url:`/api/v1/group/${j}/person/${A}/role/${e}`,responseType:J})),AR=_i((A,j)=>({name:"patchGroupMemberships",method:"PATCH",url:`/api/v3/group/${A}/membership`,body:j,responseType:Qz})),jR=_i((A,j)=>({name:"patchUserMemberships",method:"PATCH",url:`/api/v2/user/${A}/membership`,body:j,responseType:Qz})),eR=_i(A=>({name:"addRecoveryKeysetToGroup",method:"PUT",url:`/api/v1/group/${A.uuid}/recoverykeyset`,body:A,responseType:J})),zfA=Te.readonly(Te.type({csv:Te.string}),"GetGroupMembersCsvResponse"),tR=_i(A=>({name:"getGroupMembersCsv",method:"GET",url:`/api/v1/group/${A}/members/csv`,responseType:zfA})),RfA=Te.readonly(Te.type({count:Te.number}),"UniqueUserCountResponse"),fvj=Te.readonly(Te.type({groupUuids:Te.array(Te.string)}),"UniqueUserCountForGroupsRequest"),rR=_i(A=>({name:"postUniqueUserCountForGroups",method:"POST",url:"/api/v3/group/unique/users",body:A,responseType:RfA})),Gvj=Te.readonly(Te.type({applicationUuids:Te.array(Te.string)}),"GroupApplicationAssignmentRequest"),aR=_i((A,j)=>({name:"putGroupApplicationAssignment",method:"PUT",url:`/api/v1/group/${A}/assign-applications`,body:j,responseType:J}));var Et=W(aA());var Ph=AA("web-api/api/mfa.ts"),nR="totp",oR="email",di;(function(A){A.Totp="T",A.Duo="D",A.Dsecret="S",A.DsecretProxy="P",A.WebAuthn="W",A.Email="E"})(di||(di={}));var tC=Et.readonly(Et.intersection([Et.type({type:pe(di,"MfaType"),keyHandle:Et.string,keyValue:Et.string},"type"),Et.partial({createdAt:Et.string,updatedAt:Et.string},"partial")]),"StandardMfaParams"),JfA=Et.readonly(Et.intersection([tC,Et.type({digits:Et.number,code:Et.string})]),"MfaCodeParams"),UfA=Et.readonly(Et.intersection([tC,Et.partial({digits:Et.number,totpClientData:Et.string})]),"MfaTotpParams"),XfA=Et.readonly(Et.intersection([tC,Et.partial({keyName:Et.string,webAuthnClientData:Et.string})]),"MfaWebAuthnParams"),VfA=Et.union([UfA,XfA,JfA]),Jf=Et.partial({dsecret:Et.string,ssoMigrationGracePeriod:p$},"VerifyMfaResponse"),WfA=Et.readonly(Et.type({length:Et.number,method:Et.string}),"SendMfaCodeResponse"),YfA=Et.readonly(Et.type({allowedTypes:Et.array(pe(di,"MfaType")),canDisableAll:Et.boolean,enforced:Et.boolean,hasMFA:Et.boolean}),"MfaConfig"),QfA=Et.union([Jf,Et.null],"EnableMfaResponse"),iR=Ph(A=>({name:"enableMfa",method:"POST",url:"/api/v1/user/mfa",body:A,responseType:QfA})),sR=Ph(A=>({name:"disableMfa",method:"PUT",url:`/api/v1/user/mfa/${A}`,responseType:J})),lR=Ph(A=>({name:"sendMfaCode",method:"POST",url:"/api/v1/user/mfa/code",body:A,responseType:WfA,encrypted:!1})),cR=Ph(()=>({name:"getMfa",method:"GET",url:"/api/v1/user/mfa",responseType:Et.array(VfA)})),dR=Ph(()=>({name:"getMfaConfig",method:"GET",url:"/api/v1/user/mfa/config",responseType:YfA})),kR=Ph(A=>({name:"verifyTotp",method:"POST",url:"/api/v1/user/mfa/totp/verify",body:{totpCode:A},responseType:Jf})),ZfA=Et.readonly(Et.type({challenge:Et.string,rpid:Et.string}),"GetWebAuthnChallengeResponse"),bvj=Ph(()=>({name:"getWebAuthnChallenge",method:"GET",url:"/api/v1/user/mfa/webauthn/challenge",responseType:ZfA}));var et=W(aA());var rC=AA("web-api/api/user.ts"),uR=rC(A=>({name:"beginChangeEmail",method:"POST",url:"/api/v1/emailchange/begin",body:{email:A},responseType:J})),aC=rC((A,j)=>({name:"completeChangeEmail",method:"POST",url:"/api/v1/emailchange/complete",body:{auth:A,token:j},responseType:J})),pR=rC(A=>({name:"cancelChangeEmail",method:"POST",url:"/api/v1/emailchange/cancel",body:{email:A},responseType:J})),mR=rC(()=>({name:"promptConfirmChangeEmail",method:"POST",url:"/api/v1/emailchange/propose/verify",responseType:J})),h$=et.readonly(et.intersection([et.type({uuid:et.string,createdAt:et.string,lastAuthAt:et.string,email:et.string,firstName:et.string,lastName:et.string,name:et.string,attrVersion:et.number,keysetVersion:et.number,state:et.string,type:et.string,avatar:et.string,language:et.string,accountKeyFormat:et.string,accountKeyUuid:et.string,combinedPermissions:et.number,newsletterPrefs:et.number,preferences:et.number,keysets:et.union([et.readonlyArray($A.KeysetCiphertext),et.null]),vaultAccess:et.union([et.readonlyArray(Wd),et.null]),hasMFAEnabled:et.boolean},"type"),et.partial({updatedAt:et.string,memberships:et.array(sr.Type),externalGUID:et.string,csToken:et.string},"partial")]),"User"),AGA=et.readonly(et.intersection([et.type({uuid:et.string,firstName:et.string,lastName:et.string,name:et.string,email:et.string,avatar:et.string,state:et.string,type:et.string}),et.partial({combinedPermissions:et.number})]));var gn=AA("web-api/api/account.ts"),nC=mA.partial({companySize:mA.string},"AccountMeta"),jGA=mA.readonly(mA.type({hasPackages:mA.boolean,hasNativeClient:mA.boolean,hasNonSafariClient:mA.boolean,hasMspConsoleAccess:mA.boolean,mustMigrate:mA.boolean}),"UserFlags"),eGA=mA.readonly(mA.type({hasRecoveryMembers:mA.boolean,isAccountManaged:mA.boolean}),"AccountFlags"),tGA=mA.readonly(mA.type({accountName:mA.union([mA.string,mA.undefined]),accountDomain:mA.union([mA.string,mA.undefined])}),"MspInfo"),rGA=mA.readonly(mA.type({inviteSecret:mA.string,inviteEmailDomains:ij(mA.string)}),"InviteSettings"),aGA=mA.readonly(mA.type({billingCompanyName:GA(mA.string,""),billingAddress:GA(mA.string,""),billingEmails:GA(mA.string,""),billingPurchaseOrderNumber:GA(mA.string,"")}),"BillingSettings"),nGA=mA.readonly(mA.type({trialStartedAt:mA.string,trialDays:mA.number,status:mA.string,provider:mA.string,freezesAt:mA.string,members:mA.number,guests:mA.number,settings:aGA}),"BillingInfo"),oC=mA.type({alerts:mA.string,notifications:mA.string},"SlackSettings"),iC=mA.partial({isEnabled:mA.boolean,rememberDays:mA.number,integrationKey:mA.string,secretKey:mA.string,host:mA.string},"DuoSettings"),sC=mA.readonly(mA.type({url:ij(mA.string)}),"SupportSettings"),oGA=mA.readonly(mA.type({address:mA.string,verified:mA.boolean}),"ReplyToEmailSettings"),lC=mA.readonly(mA.partial({isEnabled:mA.boolean,notificationEmails:mA.string,monitoringEnabled:mA.boolean,monitoringDomain:mA.string,deploymentOption:mA.string,identityProvider:mA.string,replyToEmail:oGA}),"ProvisioningSettings"),Ch;(function(A){A.Minimum="",A.Medium="M",A.Strict="S",A.Custom="C"})(Ch||(Ch={}));var cC=mA.readonly(mA.type({type:pe(Ch,"MasterPasswordPolicyType"),customString:GA(mA.string,"")}),"MasterPasswordPolicySettings"),iGA=mA.readonly(mA.intersection([mA.type({enforced:GA(mA.boolean,!1)},"type"),mA.partial({availableTypes:ij(mA.readonlyArray(pe(di,"MfaType")))},"partial")]),"TwoFactorSettings"),yvj=mA.readonlyArray(mA.string),sGA=mA.readonly(mA.type({requireModernApps:GA(mA.boolean,!1)}),"ClientRestrictionSettings"),dC=mA.readonly(mA.partial({hideDeveloperTools:GA(mA.boolean,!1),hideIntegrations:GA(mA.boolean,!1),updatedAt:Yn}),"SidebarNavigationPoliciesSettings"),lGA=mA.readonly(mA.partial({blockFileStorage:GA(mA.boolean,!1),blockPasskeyAuthenticator:GA(mA.boolean,!1),privateVaultsBusinessWatchtowerReportingEnabled:GA(mA.boolean,!0),allowedWatchtowerDomains:ij(mA.string),telemetryOptOut:GA(mA.boolean,!1)}),"TeamMemberPoliciesSettings"),$vj=mA.readonly(mA.type({isEnabled:GA(mA.boolean,!1),daysUntilDelete:ij(mA.number)}),"AutoDeleteSuspendedUsersSettings"),cGA=mA.readonly(mA.type({enabled:GA(mA.boolean,!1),daysUntilDelete:ij(mA.number)})),ER=mA.readonly(mA.type({definition:cGA}),"AutoDeleteSuspendedUsersPolicyResponse"),kC=mA.type({slackURLs:ij(oC),betaIsEnabled:GA(mA.boolean,!1),richIconsAreDisabled:GA(mA.boolean,!1),duo:ij(iC),support:ij(sC),provisioning:ij(lC),masterPasswordPolicy:ij(cC),twoFactor:ij(iGA),clientRestrictions:ij(sGA),teamMemberPolicies:ij(lGA),disableEmergencyKit:GA(mA.boolean,!1),sidebarNavigationPolicies:ij(dC)},"AccountSettings"),uC=mA.readonly(mA.type({groups:mA.number,invitations:mA.number,users:mA.number,vaults:mA.number,activeGuests:mA.number,activeUsers:mA.number,activeManagedAccounts:mA.number}),"EntityCounts"),dGA=mA.type({gatedFeature:mA.string,trialDays:mA.number,remainingDays:mA.number,optedOut:mA.boolean},"GatedFeatureTrial"),kGA=mA.readonly(mA.intersection([mA.type({uuid:mA.string,name:mA.string,domain:mA.string,type:mA.string,state:mA.string,avatar:mA.string,attrVersion:mA.number,createdAt:mA.string},"type"),mA.partial({storageUsed:mA.number,baseAttachmentURL:mA.string,baseAvatarURL:mA.string,me:h$,meta:nC,counts:uC,users:mA.array(AGA),groups:mA.array(Rf),tier:lB,userFlags:jGA,accountFlags:eGA,invite:rGA,billing:nGA,promotions:mA.array(Mf),settings:kC,gatedFeatureTrials:mA.array(dGA),mspInfo:tGA},"partial")]),"Account"),wvj=mA.readonly(mA.partial({domain:mA.string,email:mA.string}),"CheckDomainRequests"),q$;(function(A){A.AccountFlags="account-flags",A.Billing="billing",A.Counts="counts",A.Groups="groups",A.Invite="invite",A.Me="me",A.MeMemberships="me.memberships",A.Meta="meta",A.Promotions="promotions",A.Settings="settings",A.SettingsTeamMemberPolicies="settings.team-member-policies",A.Tier="tier",A.UserFlags="user-flags",A.Users="users",A.GatedFeatureTrials="account-gated-feature-trials"})(q$||(q$={}));var BR=gn(A=>({name:"getAccountWithAttrs",method:"GET",url:`/api/v3/account${it({attrs:A})}`,responseType:kGA})),gR=gn((A,j)=>({name:"activateAccount",method:"PUT",url:"/api/v1/account/activate",body:{vaults:A,groups:j},responseType:J})),hR=gn(A=>({name:"joinAccount",method:"PUT",url:"/api/v1/person/join",body:{vault:A},responseType:J})),qR=gn(A=>({name:"updateAccount",method:"PUT",url:"/api/v1/account/attrs",body:A,responseType:J})),vR=gn(A=>({name:"updateBillingSettings",method:"PUT",url:"/api/v1/account/billingsettings",body:A,responseType:J})),xR=gn(()=>({name:"deleteAccount",method:"DELETE",url:"/api/v1/account",responseType:J})),fR=gn((A,j)=>({name:"verifyLockedOutAccountDeletion",method:"GET",url:`/api/v1/account/${A}/${j}/verifydeletion`,responseType:J})),GR=gn((A,j)=>({name:"lockedOutDeleteAccount",method:"DELETE",url:`/api/v1/account/${A}/${j}`,responseType:J})),uGA=mA.readonly(mA.type({result:mA.boolean}),"CheckDomainAvailabilityResponse"),FR=gn((A,j)=>({name:"checkDomainAvailability",method:"POST",url:"/api/v1/domain/check",body:{domain:A,email:j},responseType:uGA,encrypted:!1})),pGA=mA.readonly(mA.type({domain:mA.string}),"GetSuggestedDomainResponse"),bR=gn(A=>({name:"getSuggestedDomain",method:"POST",url:"/api/v1/domain/suggestion",body:{accountName:A},responseType:pGA,encrypted:!1})),yR=gn(A=>({name:"changeDomain",method:"PUT",url:`/api/v1/account/domain/${A}`,responseType:J})),$R=gn(A=>({name:"postImage",method:"POST",url:"/api/v1/image",body:A,responseType:mA.string,options:{dataType:"arraybuffer",responseType:"text"},encrypted:!1})),v$=gn(A=>({name:"changeAccountType",method:"PUT",url:"/api/v2/account/type",body:A,responseType:J})),wR=gn(A=>({name:"changeAccountTypeV3",method:"PUT",url:"/api/v3/account/type",body:A,responseType:J})),mGA=mA.readonly(mA.type({activeMembers:mA.number,activeGuests:mA.number,billedMembers:mA.number,billedGuests:mA.number}),"AccountUserCounts"),IR=gn(()=>({name:"getAccountUserCounts",method:"GET",url:"/api/v1/account/counts",responseType:mGA})),tKe=mA.readonly(mA.type({encAuthenticationKey:$A.JweB,signInAddress:mA.string},"CreateAccountMspLinkRequest")),DR=mA.readonly(mA.type({linkRequestUuid:mA.string,mspDomain:mA.string,mspAccountName:mA.undefined,encAuthenticationKey:$A.JweB,groupPublicKeyMac:mA.undefined,eamGroupKeyset:mA.undefined,expirationTime:mA.string,acceptedAt:mA.undefined}),"UnacceptedMspLinkRequest"),EGA=mA.readonly(mA.type({linkRequestUuid:mA.string,mspDomain:mA.string,mspAccountName:mA.string,encAuthenticationKey:$A.JweB,groupPublicKeyMac:qP,eamGroupKeyset:$A.KeysetCiphertext,expirationTime:mA.string,acceptedAt:mA.string}),"ValidatedMspLinkRequest"),BGA=mA.union([DR,EGA]),OR=gn(()=>({name:"getAccountMspLinkRequest",method:"GET",url:"/api/v1/msp-link-request",responseType:BGA})),PR=gn(A=>({name:"cancelMspAccountLinkRequest",method:"DELETE",url:`/api/v1/msp-link-request/${A}`,responseType:J})),CR=gn(()=>({name:"createAccountMspLinkRequestPreflight",method:"GET",url:"/api/v1/msp-link-request/preflight",responseType:J})),HR=gn(A=>({name:"createAccountMspLinkRequest",method:"POST",url:"/api/v1/msp-link-request",body:A,responseType:DR})),TR=gn(A=>({name:"declineMspAccountLinkRequest",method:"PATCH",url:`/api/v1/msp/link-request/${A}/decline`,responseType:J})),gGA=mA.readonly(mA.type({eamGroupExists:mA.boolean,objectTypesNeeded:mA.readonlyArray(mA.string),vaultsNeeded:mA.readonlyArray(mA.string)}),"FinalizeMspAccountLinkRequestPreflight"),KR=gn(()=>({name:"finalizeMspAccountLinkRequestPreflight",method:"GET",url:"/api/v1/msp-link-request/finalize/preflight",responseType:gGA})),SR=gn(()=>({name:"finalizeMspAccountLinkRequest",method:"POST",url:"/api/v1/msp-link-request/finalize",responseType:J}));var Ce=W(aA());var Ivj=AA("web-api/api/account_overview.ts"),Dvj=Ce.readonly(Ce.intersection([Ce.type({accessVersion:Ce.number,attrVersion:Ce.number,contentVersion:Ce.number,uuid:Ce.string},"type"),Ce.partial({snapshotContentVersion:Ce.number,watchtowerReportNeedsUpdating:Ce.boolean},"partial")]),"VaultOverview"),Ovj=Ce.readonly(Ce.type({permissions:Ce.number}),"UserOverview"),Pvj=Ce.readonly(Ce.intersection([Ce.type({status:Ce.keyof({A:!0,C:!0,F:!0,L:!0,T:!0,P:!0}),storageUsed:GA(Ce.number,0)},"type"),Ce.partial({accountWillFreezeAt:Ce.string,storageCapacity:Ce.number},"partial")]),"BillingOverview"),Cvj=Ce.readonly(Ce.type({isEnabled:Ce.boolean,serverItemSnapshotPayloadVersion:Ce.number,hasPubKey:Ce.boolean,isPolicyEnabled:Ce.boolean}),"DetailedVaultReporting"),Hvj=Ce.readonly(Ce.type({lastUpdatedAt:Ce.number}),"ActivationHubOverview"),Tvj=Ce.readonly(Ce.intersection([Ce.type({notifier:Ce.string,accountVersion:Ce.number,billingVersion:Ce.number,templateVersion:Ce.number,userVersion:Ce.number,keysetVersion:Ce.number,policiesVersion:Ce.union([Ce.number,Ce.undefined]),managedCredentialsVersion:Ce.union([Ce.string,Ce.undefined]),managedCredentialsPolicyVersion:Ce.union([Ce.string,Ce.undefined]),userOverview:Ovj,billingOverview:Pvj,hasPackages:Ce.boolean,supportsItemUsage:Ce.boolean},"type"),Ce.partial({vaults:Ce.readonlyArray(Dvj),watchtowerReportVersion:Ce.number,detailedVaultReporting:Cvj,activationHubOverview:Hvj,kolideAppsVersion:Ce.number},"partial")]),"AccountOverview"),MR=Ivj(()=>({name:"getAccountOverview",method:"GET",url:"/api/v2/overview",responseType:Tvj}));var Yd=W(aA());var _R=AA("web-api/api/email_templates.ts"),Kvj=Yd.type({createdAt:Yd.string,subjectOverride:Yd.string,templateConfig:Yd.string,templateUuid:Yd.string,updatedAt:Yd.string},"IoAccountTemplateConfig"),LR=_R(A=>({name:"getAccountTemplateConfig",method:"GET",url:`/api/v1/email-templates/account-template-config/${A}`,responseType:Kvj})),NR=_R(A=>({name:"createAccountTemplateConfig",body:{...A},method:"POST",url:"/api/v1/email-templates/account-template-config",responseType:Yd.null})),zR=_R(A=>({name:"updateAccountTemplateConfig",body:{...A},method:"PUT",url:"/api/v1/email-templates/account-template-config",responseType:Yd.null}));var Jc=W(aA());var pC=AA("web-api/api/account_config.ts"),Svj=Jc.type({companyLogoUrl:Jc.string}),Mvj=Jc.type({companyLogoUrl:Jc.string,createdAt:Jc.string,updatedAt:Jc.string},"IoAccountConfig"),RR=pC(A=>({name:"uploadCompanyLogo",method:"POST",url:"/api/v1/email-templates/email-account-config/logo",body:A,responseType:Svj,options:{dataType:"arraybuffer"}})),JR=pC(A=>({name:"deleteCompanyLogo",method:"DELETE",url:"/api/v1/email-templates/email-account-config/logo",body:{isDraftLogo:A},responseType:J})),UR=pC(()=>({name:"publishCompanyLogo",method:"POST",url:"/api/v1/email-templates/email-account-config/logo/publish",body:Jc.null,responseType:Jc.void})),XR=pC(()=>({name:"getEmailAccountConfig",method:"GET",url:"/api/v1/email-templates/email-account-config",responseType:Mvj}));var An=W(aA());var hGA=AA("web-api/api/activation_hub.ts"),qGA=An.readonly(An.type({uuid:An.string,name:An.string,description:An.string,dismissable:An.boolean,tags:An.array(An.string),ordering:An.number,dependencies:An.array(An.string),completedAt:ij(An.string),dismissed:ij(An.boolean)}),"Task"),vGA=An.readonly(An.type({total:An.number,tasks:An.array(qGA)},"GetActivationHubTasksResponse")),VR=hGA(A=>({name:"getActivationHubTasks",method:"GET",url:`/api/v2/activation-hub/tasks/list${it({product:A.product,platform:A.platform,audience:A.audience,limit:A.limit})}`,responseType:vGA})),WR=hGA(A=>({name:"completeActivationHubTask",method:"PUT",url:`/api/v1/activation-hub/tasks/${A.uuid}/completed`,body:{dismissed:A.dismiss,completedAt:A.completedAt},responseType:J}));var ja=W(aA());var x$=AA("web-api/api/admin_watchtower.ts"),_vj=ja.readonly(ja.type({pubKey:yu}),"WatchtowerPubkey"),xGA=ja.readonly(ja.type({encryptedBy:ja.string,vaultKeySn:ja.number,encVaultKey:$A.JweB,encVaultAttrs:$A.JweB,combinedAcl:ja.number}),"WatchtowerReportVaultData"),fGA=ja.readonly(ja.intersection([ja.type({uuid:ja.string,vaultUuid:ja.string,vaultType:ja.string,updatedAt:ja.string,isOutdated:ja.boolean,encData:$A.Jwe},"type"),ja.partial({vaultName:ja.string,vaultData:xGA},"partial")]),"WatchtowerReportItem"),GGA=ja.readonly(ja.type({reports:ja.array(fGA),nextStartUuid:ja.string}),"WatchtowerReports"),FGA=ja.readonly(ja.type({accountVaultCount:ja.number,accountEmptyVaultCount:ja.number}),"WatchtowerStats"),mC=x$(()=>({name:"getWatchtowerPubkey",method:"GET",url:"/api/v1/report/watchtower/pubkey",responseType:_vj})),YR=x$((A,j)=>({name:"uploadWatchtowerReport",method:"POST",url:`/api/v1/report/watchtower/vault/${A}`,body:j,responseType:J})),QR=x$((A,j)=>({name:"getWatchtowerReport",method:"GET",url:`/api/v1/report/watchtower${it({vaultTypes:A,startUuid:j})}`,responseType:GGA})),ZR=x$(A=>({name:"getWatchtowerStats",method:"GET",url:`/api/v1/report/watchtower/stats${it({vaultTypes:A})}`,responseType:FGA})),AJ=x$((A,j)=>({name:"createWatchtowerPubkey",method:"POST",url:`/api/v1/report/watchtower/pubkey/${A}`,body:{pubKey:j},responseType:J}));var Fr=W(aA()),$GA=W(Io());var Cr=W(aA());var Hh=A=>A?encodeURIComponent(A).length>150:!1;var yGA=AA("web-api/api/partial_user.ts"),Ao=Cr.readonly(Cr.type({uuid:Cr.string,name:Cr.string,email:Cr.string,avatar:Cr.string,state:Cr.string,type:Cr.string}),"PartialUser"),gt;(function(A){A.Provisioning="P",A.Connect="C",A.DataStreaming="D",A.Cli="X",A.UserManaged="M",A.Na="",A.Slack="slack",A.Duo="duo",A.MaskedEmails="MaskedEmails",A.Brex="Brex",A.PrivacyCom="PrivacyCom"})(gt||(gt={}));var G$=Cr.intersection([Ao,Cr.readonly(Cr.type({createdAt:Cr.string,creatorUuid:Cr.string,serviceAccountType:pe(gt,"ServiceAccountType")},"type")),Cr.partial({canActiveUserViewDetails:Cr.boolean,permissions:Cr.number},"partial")],"ServiceAccountsPartialUser"),f$;(function(A){A.Migrated="MIGRATED",A.PendingMigration="PENDING_MIGRATION",A.InAuthRecovery="IN_AUTH_RECOVERY",A.PendingAuthRecovery="PENDING_AUTH_RECOVERY",A.Other="OTHER"})(f$||(f$={}));var jJ=Cr.readonly(Cr.intersection([Ao,Cr.partial({combinedPermissions:Cr.number,authState:pe(f$,"AuthStates")},"partial")]),"ExtendedPartialUser"),Lvj=Cr.readonly(Cr.intersection([Cr.type({totalCount:Cr.number,users:Cr.readonlyArray(jJ)},"type"),Cr.partial({serviceAccounts:Cr.readonlyArray(G$)},"partial")]),"GetPartialUsersResponse"),Nvj=350,uB=async(A,j,e)=>{if(Hh(j.search))return{totalCount:0,users:[],serviceAccounts:[]};let t=j.emails?y0(j.emails):[],r=[];for(let n of t){let o=r.length-1,i=r[o];o>=0&&i!==void 0&&i.length+n.length<Nvj?r[o]+=","+n:r.push(n)}let a=Rvj(j.attrs);if(r.length>0){let n=r.map(async i=>{let s={...j,attrs:a,membershipLimit:e,emails:i,limit:j.limit,offset:j.offset,sort:j.sort,sortDir:j.sortDir};return bGA(A,it(s))});return(await Promise.all(n)).reduce((i,s)=>({totalCount:i.totalCount+s.totalCount,users:[...i.users,...s.users],serviceAccounts:[...i.serviceAccounts||[],...s.serviceAccounts||[]]}),{totalCount:0,users:[],serviceAccounts:[]})}else{let n={...j,attrs:a,limit:j.limit,offset:j.offset,sort:j.sort,sortDir:j.sortDir};return bGA(A,it(n))}},bGA=yGA(A=>({name:"getUsers",method:"GET",url:`/api/v3/users${A}`,responseType:Lvj})),EC=yGA(A=>({name:"getUsersCount",method:"GET",url:`/api/v2/users/count${it({emails:A?.emails,states:A?.states,types:A?.types,group:A?.group,search:A?.search,vault:A?.vault})}`,responseType:Cr.number})),zvj={combinedPermissions:"combined-permissions",authState:"auth-state"},Rvj=A=>A.map(j=>zvj[j]);var BC=AA("web-api/api/activity.ts"),Jvj=100,Uvj="regular_user",Xvj="external_user",gC=()=>(0,$GA.default)().subtract(13,"month"),tJ=Fr.readonly(Fr.intersection([Fr.type({actor:Ao,time:Fr.string,ipAddress:Fr.string,action:Fr.string},"type"),Fr.partial({eid:Fr.number,uuid:Fr.string,objectType:Fr.string,objectUuid:Fr.string,auxInfo:Fr.string,auxUUID:Fr.string,sessionUuid:Fr.string,actorType:Fr.string},"partial")]),"Activity"),Vvj=Fr.readonly(Fr.type({objectType:Fr.string,action:Fr.string}),"Event"),wGA=Fr.readonly(Fr.type({auditEvents:Fr.readonlyArray(tJ),cursor:Fr.string,hasMore:Fr.boolean,totalCount:Fr.number}),"ActivityWithCursor"),rJ=BC((A,j,e,t,r,a,n,o,i)=>({name:"getFilteredActivityLogReports",method:"POST",url:"/api/v4/auditevents",body:{cursor:A,limit:j,startTime:e,endTime:t,direction:r,events:a,actorUuids:n,memberUuids:o,genericUuids:i},responseType:wGA})),IGA=Fr.readonly(Fr.type({count:Fr.number,hasMore:Fr.boolean}),"AuditEventsTotalReports"),aJ=BC((A,j,e,t,r,a)=>({name:"getFilteredActivityLogTotalReports",method:"POST",url:"/api/v1/auditevents/summary",body:{startTime:A,endTime:j,events:e,actorUuids:t,memberUuids:r,genericUuids:a},responseType:IGA})),nJ=BC(A=>({name:"reportAuditEvent",method:"POST",url:"/api/v1/auditevents/report",body:A,responseType:J})),eJ;(function(A){A.Group="G",A.Vault="V",A.Person="P",A.ServiceAccount="S"})(eJ||(eJ={}));var oJ=BC((A,j)=>{let e=it({type:A});return{name:"getActivityFeed",method:"GET",url:`/api/v1/auditevents/feed/${j}${e}`,responseType:Fr.readonlyArray(tJ)}});var IA=W(aA());var Kn=AA("web-api/api/auth.ts"),iJ=IA.type({method:IA.string,alg:IA.string,iterations:IA.number,salt:IA.string,v:IA.string}),Uf=IA.type({method:IA.string,alg:IA.string,iterations:IA.number,salt:IA.string},"AuthParams"),DGA=IA.intersection([IA.type({status:IA.string},"type"),IA.partial({sessionID:IA.string,accountKeyFormat:IA.string,accountKeyUuid:IA.string,userAuth:Uf,newDomain:IA.string,newHost:IA.string,newEmail:IA.string},"partial")],"StartAuthResponse"),Tu=Kn(A=>({name:"startAuth",method:"POST",url:"/api/v3/auth/start",body:A,responseType:DGA,encrypted:!1})),OGA=IA.type({userB:IA.string},"SrpResponse"),sJ=Kn(A=>({name:"postAuth",method:"POST",url:"/api/v2/auth",body:{userA:A},responseType:OGA,encrypted:!1})),PGA=IA.type({serverVerifyHash:IA.string},"SrpResponse"),lJ=Kn(A=>({name:"confirmKeyAuth",method:"POST",url:"/api/v2/auth/confirm-key",body:{clientVerifyHash:A},responseType:PGA,encrypted:!1})),hC=IA.type({enabled:IA.boolean},"DsecretResponse"),qC=IA.type({enabled:IA.boolean},"DsecretProxyResponse"),vC=IA.type({enabled:IA.boolean,digits:IA.number},"TotpResponse"),xC=IA.intersection([IA.type({enabled:IA.boolean,host:IA.string,sigRequest:IA.string},"type"),IA.partial({authURL:IA.string},"partial")],"DuoResponse"),fC=IA.type({enabled:IA.boolean,keyHandles:IA.array(IA.string),challenge:IA.string,rpid:IA.string},"WebAuthnResponse"),GC=IA.intersection([IA.type({enabled:IA.boolean,availableTypes:GA(IA.readonlyArray(pe(di,"MfaType")),[])},"type"),IA.partial({webAuthnChallenge:IA.string,webAuthnRpid:IA.string},"partial")],"MustEnableResponse"),FC=IA.readonly(IA.type({enabled:IA.boolean,digits:GA(IA.number,0),methods:IA.array(IA.string)}),"CodeResponse"),bC=IA.partial({dsecret:hC,dsecretProxy:qC,totp:vC,duo:xC,webAuthn:fC,mustEnable:GC,code:FC},"MfaResponse"),yC=IA.intersection([IA.type({notifier:IA.string},"type"),IA.partial({accountUuid:IA.string,userUuid:IA.string,mfa:bC,ssoMigrationGracePeriod:p$},"partial")],"CompleteAuthResponse"),cJ=Kn(A=>({name:"completeAuth",method:"POST",url:"/api/v2/auth/complete",body:A,responseType:yC})),dJ=Kn(A=>({name:"verifyMfa",method:"POST",url:"/api/v1/auth/mfa",body:A,responseType:Jf})),kJ=Kn(A=>({name:"enableMfaWithAuth",method:"POST",url:"/api/v1/auth/mfa/enable",body:A,responseType:Jf})),uJ=Kn(A=>({name:"submitNewUserAuth",method:"POST",url:"/api/v1/user/auth",body:A,responseType:J})),F$=Kn(()=>({name:"extendSession",method:"PUT",url:"/api/v1/session/touch",responseType:J})),b$=Kn(()=>({name:"signOut",method:"PUT",url:"/api/v1/session/signout",responseType:J})),CGA=IA.readonly(IA.type({sessionUuid:IA.string,sessionKey:$A.JwkSymKey,notifier:IA.string},"DelegateSessionResponse")),y$=Kn((A,j)=>({name:"delegateSession",method:"POST",url:"/api/v2/delegatesession",body:{device:A,isNewPhysicalDevice:j},responseType:CGA})),pJ=IA.readonly(IA.type({channelSeed:IA.string,channelUuid:IA.string,initiatorAuth:IA.string},"MyceliumChannelStartResponse")),Wvj=Kn((A,j)=>({name:"myceliumChannelStart",method:"POST",url:"/api/v2/mycelium/u",body:{deviceUuid:A,hello:j},responseType:pJ,encrypted:!1})),Yvj=Kn(A=>({name:"myceliumChannelStart",method:"POST",url:"/api/v2/mycelium/v",body:{hello:A},responseType:pJ,encrypted:!0})),HGA=IA.type({lastAuthIP:IA.string,city:IA.string,country:IA.string,countryCode:IA.string}),TGA=IA.type({hello:IA.string,locationMeta:HGA},"MyceliumChannelHelloResponse"),Qvj=Kn((A,j,e)=>({name:"myceliumChannelSwitchRegion",method:"PUT",url:`/api/v2/mycelium/u/${A}/switch-region`,body:{region:e},options:{headers:{ChannelJoinAuth:j}},responseType:J,encrypted:!1})),Zvj=IA.type({region:IA.array(IA.number)},"MyceliumChannelSwitchSourceErrResponse"),Axj=Kn((A,j)=>({name:"myceliumGetHello",method:"GET",url:`/api/v2/mycelium/v/${A}/1`,options:{headers:{ChannelJoinAuth:j}},responseType:TGA,encrypted:!0})),KGA=IA.type({responderAuth:IA.string},"MyceliumChannelJoinResponse"),jxj=Kn((A,j,e)=>({name:"myceliumChannelSendMsgN",method:"PUT",url:`/api/v2/mycelium/v/${A}/2`,options:{headers:{ChannelJoinAuth:j}},body:{reply:e},responseType:KGA,encrypted:!0})),SGA=IA.union([IA.type({reply:IA.string},"MyceliumChannelReplyResponse"),IA.undefined]),exj=Kn((A,j)=>({name:"myceliumGetReply",method:"GET",url:`/api/v2/mycelium/u/${A}/2`,options:{headers:{ChannelAuth:j}},responseType:SGA,encrypted:!1})),mJ=IA.union([IA.type({msg:IA.string},"MyceliumChannelMsgnResponse"),IA.undefined]),txj=Kn((A,j,e)=>({name:"myceliumGetMsgN",method:"GET",url:`/api/v2/mycelium/u/${j}/${A}`,options:{headers:{ChannelAuth:e}},responseType:mJ,encrypted:!1})),rxj=Kn((A,j,e,t)=>({name:"myceliumChannelSendMsgN",method:"PUT",url:`/api/v2/mycelium/u/${j}/${A}`,options:{headers:{ChannelAuth:e}},body:{msg:t},responseType:J,encrypted:!1})),MGA=IA.union([IA.type({city:IA.string,country:IA.string,countryCode:IA.string,lastAuthIP:IA.string},"LocationMeta"),IA.undefined]),_GA=IA.union([IA.type({locationMeta:MGA,reply:IA.string},"MyceliumChannelMsgTwoResponse"),IA.undefined]),axj=Kn((A,j)=>({name:"myceliumGetMsgTwoV",method:"GET",url:`/api/v2/mycelium/v/${A}/2`,options:{headers:{ChannelAuth:j}},responseType:_GA,encrypted:!0})),nxj=Kn((A,j,e)=>({name:"myceliumGetMsgNv",method:"GET",url:`/api/v2/mycelium/v/${j}/${A}`,options:{headers:{ChannelAuth:e}},responseType:mJ,encrypted:!0})),oxj=Kn((A,j,e,t)=>({name:"myceliumChannelSendMsgNv",method:"PUT",url:`/api/v2/mycelium/v/${j}/${A}`,options:{headers:{ChannelAuth:e}},body:{msg:t},responseType:J,encrypted:!0})),LGA=IA.type({session_uuid:IA.string,session_key:co,notifier_url:IA.string}),NGA=IA.type({token:IA.string,exp:IA.string}),ixj=IA.type({secret:IA.type({credential_bundle:IA.type({auk:co,srpx:IA.string}),account_details:IA.type({sign_in_address:IA.string,user_uuid:IA.string,account_uuid:IA.string,email:IA.string}),delegated_auth:IA.type({session:IA.union([LGA,IA.undefined,IA.null]),refresh_token:IA.union([NGA,IA.undefined,IA.null])}),extra_credentials:IA.union([IA.type({password_secret_key:IA.type({secret_key:IA.string})}),IA.type({sso:IA.type({account_key_uuid:IA.string,sso_provider_name:IA.string})}),IA.type({webauthn:IA.type({account_key_uuid:IA.string})})])})});var To=W(aA());var zGA=AA("web-api/api/banners.ts"),Xf;(function(A){A.Accept="A",A.Dismiss="D"})(Xf||(Xf={}));var RGA=To.readonly(To.type({uuid:To.string,banner:To.string,group:To.number}),"BannerInstance"),JGA=To.readonlyArray(To.type({group:To.number,until:To.string}),"BannerGroupTimeouts"),EJ=To.readonly(To.type({instances:ij(To.array(RGA)),snooze:GA(JGA,[])}),"BannerInstances"),BJ=zGA(A=>({name:"getBannersForSession",method:"GET",url:`/api/v2/banner/instances?groups=${A}`,responseType:EJ})),$C=zGA((A,j)=>({name:"performBannerAction",method:"POST",url:`/api/v2/banner/instance/${A}/status`,body:{status:j},responseType:EJ}));var ol=W(aA());var sxj=AA("web-api/api/client_restrictions.ts"),wC=ol.readonly(ol.intersection([ol.type({clientName:ol.string,version:ol.string},"type"),ol.partial({osVersion:ol.string},"partial")]),"ModernAppVersion"),gJ=sxj(()=>({name:"getModernAppVersions",method:"GET",url:"/api/v1/modern-app-versions",responseType:ol.array(wC)}));var y6=W(aA());var Ku=AA("web-api/api/cpace.ts"),UGA=y6.readonly(y6.type({msga:y6.string}),"MsgA"),XGA=y6.readonly(y6.type({msgb:y6.string}),"MsgB"),VGA=y6.readonly(y6.type({taga:y6.string}),"TagA"),WGA=y6.readonly(y6.type({tagb:y6.string}),"TagB"),lxj=y6.readonly(y6.type({msgb:y6.string,signInToken:y6.string}),"SendMsgbRequest"),cxj=y6.readonly(y6.type({tagb:y6.string,signInToken:y6.string}),"SendTagbRequest"),YGA=y6.readonly(y6.type({encCreds:$A.JweB}),"SharedCredentialBundle"),dxj=Ku((A,j)=>({name:"sendMsgA",method:"PUT",url:`/api/v3/device/enrollments/${j}/cpace/msga`,body:{msga:A},responseType:J})),kxj=Ku((A,j)=>({name:"receiveMsgA",method:"POST",url:`/api/v3/device/enrollments/${j}/cpace/msga`,body:{signInToken:A},responseType:ij(UGA),encrypted:!1})),uxj=Ku((A,j,e)=>({name:"sendMsgB",method:"PUT",url:`/api/v3/device/enrollments/${e}/cpace/msgb`,body:{msgb:A,signInToken:j},responseType:J,encrypted:!1})),pxj=Ku(A=>({name:"receiveMsgB",method:"GET",url:`/api/v3/device/enrollments/${A}/cpace/msgb`,responseType:ij(XGA),decryptResponse:"mustDecryptExceptUndefined"})),mxj=Ku((A,j)=>({name:"sendTagA",method:"PUT",url:`/api/v3/device/enrollments/${j}/cpace/taga`,body:{taga:A},responseType:J})),Exj=Ku((A,j)=>({name:"receiveTagA",method:"POST",url:`/api/v3/device/enrollments/${j}/cpace/taga`,body:{signInToken:A},responseType:ij(VGA),encrypted:!1})),Bxj=Ku((A,j,e)=>({name:"sendTagB",method:"PUT",url:`/api/v3/device/enrollments/${e}/cpace/tagb`,body:{tagb:A,signInToken:j},responseType:J,encrypted:!1})),gxj=Ku(A=>({name:"receiveTagB",method:"GET",url:`/api/v3/device/enrollments/${A}/cpace/tagb`,responseType:ij(WGA),decryptResponse:"mustDecryptExceptUndefined"})),hxj=Ku((A,j)=>({name:"receiveSharedCredentialBundle",method:"POST",url:`/api/v3/device/enrollments/${j}/share/credentials`,body:{signInToken:A},responseType:ij(YGA),encrypted:!1})),qxj=Ku((A,j)=>({name:"shareCredentialBundle",method:"PUT",url:`/api/v3/device/enrollments/${A}/share/credentials`,body:{encCreds:j},responseType:J}));var Ae=W(aA());var Th=AA("web-api/api/developer_report.ts"),QGA=Ae.readonly(Ae.type({count:Ae.number,templateUuid:Ae.string}),"DeveloperReportItemCount"),vxj=Ae.readonly(Ae.type({numInPrivateVaults:Ae.number,numInSharedVaults:Ae.number}),"DeveloperReportItems"),xxj=Ae.readonly(Ae.type({developerItems:Ae.record(Ae.string,vxj),numUsers:Ae.number,numUsersCli:Ae.number,numUsersSsh:Ae.number,numServiceAccounts:Ae.number,numServiceAccountsActive:Ae.number}),"DeveloperReport"),hJ=Th(A=>({name:"getDeveloperReport",method:"POST",url:"/api/v1/report/developer",responseType:xxj,body:{filterGroups:A}})),fxj=Ae.readonly(Ae.type({avatar:Ae.string,cliLastAccessed:Ae.union([Ae.string,Ae.null]),developerItems:Ae.readonlyArray(QGA),firstName:Ae.string,lastName:Ae.string,uuid:Ae.string}),"DeveloperUsersReportUser"),Gxj=Ae.readonly(Ae.type({numUsers:Ae.number,users:Ae.array(fxj)}),"DeveloperUsersReport"),qJ=Th((A,j,e,t,r)=>({name:"getDeveloperUsersReport",method:"POST",url:"/api/v1/report/developer/users",body:{filterGroups:e,pageNum:A,perPage:j,sortBy:t,sortDir:r},responseType:Gxj})),Fxj=Ae.readonly(Ae.type({csv:Ae.string}),"DeveloperUsersReportCsv"),vJ=Th((A,j,e)=>({name:"getDeveloperUsersReportCsv",method:"POST",url:"/api/v1/report/developer/users/csv",responseType:Fxj,body:{filterGroups:A,sortBy:j,sortDir:e}})),bxj=Ae.readonly(Ae.type({developerItems:Ae.readonlyArray(QGA),uuid:Ae.string,vault:Ae.union([ci,Ae.null])}),"DeveloperSharedVaultsReportVault"),yxj=Ae.readonly(Ae.type({numSharedVaults:Ae.number,sharedVaults:Ae.array(bxj)}),"DeveloperSharedVaultsReport"),xJ=Th((A,j,e,t,r)=>({name:"getDeveloperSharedVaultsReport",method:"POST",url:"/api/v1/report/developer/shared-vaults",responseType:yxj,body:{filterGroups:e,pageNum:A,perPage:j,sortBy:t,sortDir:r}})),$xj=Ae.readonly(Ae.type({csv:Ae.string}),"DeveloperSharedVaultsReportCsv"),fJ=Th((A,j,e)=>({name:"getDeveloperSharedVaultsReportCsv",method:"POST",url:"/api/v1/report/developer/shared-vaults/csv",responseType:$xj,body:{filterGroups:A,sortBy:j,sortDir:e}})),wxj=Ae.readonly(Ae.type({numAccounts:Ae.number,avatar:Ae.string,canCreateVaults:Ae.boolean,isCreatorActive:Ae.boolean,lastAccessedAt:Ae.union([Ae.string,Ae.null]),name:Ae.string,numDeveloperItems:Ae.number,numVaults:Ae.number,tokenCreatedAt:Ae.string,tokenExpiry:Ae.union([Ae.string,Ae.null]),tokenLastRotatedAt:Ae.union([Ae.string,Ae.null]),uuid:Ae.string},"DeveloperServiceAccountItem")),Ixj=Ae.readonly(Ae.type({numServiceAccounts:Ae.number,serviceAccounts:Ae.array(wxj)}),"DeveloperServiceAccountsReport"),GJ=Th((A,j,e,t)=>({name:"getDeveloperServiceAccountsReport",method:"POST",url:"/api/v1/report/developer/service-accounts",responseType:Ixj,body:{pageNum:A,perPage:j,sortBy:e,sortDir:t}})),Dxj=Ae.readonly(Ae.type({csv:Ae.string}),"DeveloperServiceAccountsReportCsv"),FJ=Th((A,j)=>({name:"getDeveloperServiceAccountsReportCsv",method:"POST",url:"/api/v1/report/developer/service-accounts/csv",responseType:Dxj,body:{sortBy:A,sortDir:j}}));var Vf=AA("web-api/api/device.ts"),$$=Vf(A=>({name:"addDevice",method:"POST",url:"/api/v1/device",body:A,encrypted:!1,responseType:J})),bJ=Vf((A,j)=>({name:"deleteDevice",method:"DELETE",url:j?`/api/v1/device/${A}/${j}`:`/api/v1/device/${A}`,responseType:J})),yJ=Vf(()=>({name:"deleteInactiveDevices",method:"DELETE",url:"/api/v1/device/old",responseType:J})),$J=Vf(A=>({name:"reauthorizeDevice",method:"PUT",url:`/api/v1/device/${A}/reauthorize`,responseType:J})),wJ=Vf(A=>({name:"require2FAOnNextSignIn",method:"DELETE",url:`/api/v1/device/${A}/dsecret`,responseType:J})),Oxj=Vf(A=>({name:"deleteAllDevices",method:"DELETE",url:`/api/v2/devices/${A}`,responseType:J}));var pB=W(aA());var ZGA=AA("web-api/api/device_trust.ts"),AFA=pB.type({payload:pB.string,signature:pB.string,signedBy:pB.string},"SignDeviceTrustPublicKeyResponse"),Pxj=ZGA(A=>({name:"signDeviceTrustPublicKey",method:"POST",url:"/api/v1/device-trust/sign-public-key",body:{publicKey:A},encrypted:!0,responseType:AFA})),Cxj=pB.type({token:pB.string}),Hxj=ZGA(()=>({name:"getKolideAgentEnrollmentToken",method:"GET",url:"/api/v1/device-trust/kolide-enrollment-token",encrypted:!0,responseType:Cxj}));var Uc=W(aA());var jFA=AA("web-api/api/email_subscriptions.ts"),Txj=Uc.readonly(Uc.type({subscriptions:Uc.type({newsletter:Uc.boolean,events:Uc.boolean,content:Uc.boolean,announcements:Uc.boolean,research:Uc.boolean,unsubscribed:Uc.boolean})}),"EmailSubscriptions"),IJ=jFA(()=>({name:"getEmailSubscriptions",method:"GET",url:"/api/v1/emailsubscriptions",responseType:Txj})),DJ=jFA(A=>({name:"updateEmailSubscriptions",method:"PUT",url:"/api/v1/emailsubscriptions",body:A,responseType:J}));var $6=W(aA());var IC=AA("web-api/api/email_templates.ts"),eFA=$6.type({canCustomize:$6.boolean,content:$6.string,createdAt:$6.string,description:$6.string,options:$6.string,subjectLine:$6.string,title:$6.string,updatedAt:$6.string,templateUuid:$6.string}),tFA=$6.array(eFA),rFA=eFA,OJ=IC(()=>({name:"getEmailTemplates",method:"GET",url:"/api/v1/email-templates",responseType:tFA})),PJ=IC(A=>({name:"getEmailTemplateByUuid",method:"GET",url:`/api/v1/email-templates/${A}`,responseType:rFA})),CJ=IC(A=>({name:"sendTestEmailWithOverrides",method:"POST",body:{recipientUserUUID:A.recipientUserUuid,templateUUID:A.templateUuid,unsafeTemplateOverride:A.templateOverride,unsafeSubjectLine:A.subjectLine},url:"/api/v1/email-templates/send-preview",responseType:$6.void})),Kxj=$6.type({templateUuid:$6.string,contentOverrides:$6.string,subjectOverrides:$6.string}),Sxj=$6.type({renderedHtmlCacheKey:$6.string,plaintextContent:$6.string,subjectLine:$6.string}),HJ=IC(A=>({name:"GenerateEmailTemplatePreview",method:"POST",url:"/api/v1/email-templates/preview",body:{...A},responseType:Sxj}));var Kh=W(aA());var Mxj=AA("web-api/api/feedback.ts"),_xj=Kh.type({message:Kh.string,canContact:Kh.boolean,url:Kh.string},"Feedback"),TJ=Mxj(A=>({name:"sendFeedback",method:"POST",url:"/api/v1/feedback",body:A,responseType:J}));var Xc=W(aA());var w$=AA("web-api/api/file.ts"),KJ=Xc.intersection([Xc.type({fileId:Xc.string},"type"),Xc.partial({signingKey:$A.JwkSymKey},"partial")],"File"),aFA=42e4,nFA=A=>"fileId"in A?A.fileId:A.documentId,DC=async(A,j,e,t)=>{let r=nFA(j);if(!r)throw new CA.ClientError(CA.ClientErrorCode.missingFileId,Z("Missing file ID"));let a=j.signingKey?`/api/v2/file/${t}/${e}/${encodeURIComponent(r)}`:`/api/v1/file/${encodeURIComponent(r)}`,n=await _J(A,a);if(typeof n=="object"&&n?.byteLength===2&&V6(n)==="{}"){let o=E`Requested corrupted file ${Z(r)} for vault ${Z(t)} and item ${Z(e)}`;throw console.error(o),Nr(new Pe({errorClass:E`CorruptedFileError`,message:o,severityLevel:"warning"})),new CA.ClientError(CA.ClientErrorCode.corruptedFile,Z("This file is corrupted."))}return n},SJ=async(A,j,e,t)=>{let r=nFA(j);if(!r)throw new CA.ClientError(CA.ClientErrorCode.missingFileId,Z("Missing file ID"));let a=`/api/v2/file/${t}/${e}/${encodeURIComponent(r)}`,n=await _J(A,a);if(typeof n=="object"&&n?.byteLength===2&&V6(n)==="{}"){let o=E`Requested corrupted file ${Z(r)} for vault ${Z(t)} and item ${Z(e)}`;throw console.error(o),Nr(new Pe({errorClass:E`CorruptedFileError`,message:o,severityLevel:"warning"})),new CA.ClientError(CA.ClientErrorCode.corruptedFile,Z("This file is corrupted."))}return n},MJ=w$((A,j)=>({name:"getFileIdsFromItemUuid",method:"GET",url:`/api/v1/files/${j}/${A}`,responseType:Xc.array(Xc.string)})),OC=w$(A=>({name:"getFileKey",method:"GET",url:`/api/v3/filekey/${A}`,responseType:KJ})),PC=w$(A=>({name:"uploadFile",method:"POST",url:"/api/v2/file",body:A,options:{timeout:aFA,dataType:"arraybuffer"},responseType:KJ,encrypted:!1,decryptResponse:"mustDecrypt"})),_J=async(A,j)=>{let e=await Lxj(A,j);return await Nxj(A,e)},Lxj=w$(A=>({name:"getFileRedirectUrl",method:"GET",url:A,options:{responseType:"text",headers:{"X-Use-302-Redirect":"false"}},responseType:Xc.string,encrypted:!1})),Nxj=w$(A=>({name:"getFileFromUrl",method:"GET",url:A,options:{responseType:"arraybuffer",timeout:aFA},responseType:U0,encrypted:!1}));var _a=W(aA());var Sh;(function(A){A.Country="country",A.Continent="continent",A.Ip="ip",A.Anonymous="anonymous",A.All="all"})(Sh||(Sh={}));var Mh;(function(A){A.Allow="allow",A.Report="report",A.Challenge="challenge",A.Deny="deny",A.Continue="continue"})(Mh||(Mh={}));var _h;(function(A){A.Tor="T",A.Vpn="V",A.Proxy="P",A.CloudProvider="C"})(_h||(_h={}));var Su;(function(A){A.Group="group",A.Global="global"})(Su||(Su={}));var oFA=AA("web-api/api/firewall_rules.ts"),iFA=_a.readonly(_a.intersection([_a.type({type:pe(Su,"FirewallRuleScopeType")},"type"),_a.partial({uuid:_a.string},"partial")]),"FirewallRuleScope"),CC=_a.readonly(_a.intersection([_a.type({type:pe(Sh,"FirewallRuleType"),action:pe(Mh,"FirewallRuleAction"),value:_a.readonly(GA(_a.array(_a.union([pe(_h,"FirewallRuleAnonymousType"),_a.string])),[]))},"type"),_a.partial({scope:_a.readonlyArray(iFA)},"partial")]),"FirewallRule"),HC=_a.readonly(_a.type({rules:_a.union([_a.readonlyArray(CC),_a.null])}),"FirewallRules"),LJ=oFA(A=>({name:"postFirewallRules",method:"POST",url:"/api/v1/firewallrules",body:A,responseType:J})),NJ=oFA(()=>({name:"getFirewallRules",method:"GET",url:"/api/v1/firewallrules",responseType:HC}));var ga=W(aA());var XJ=AA("web-api/api/insights.ts"),Zp;(function(A){A.Filter="filter",A.Attribute="sort-by",A.Direction="sort-direction"})(Zp||(Zp={}));var zJ;(function(A){A.Email="email",A.BreachesCount="breaches-count",A.BreachName="breach-name",A.Date="date",A.MembersCount="members-count",A.Invited="invited"})(zJ||(zJ={}));var RJ;(function(A){A.VaultName="vault-name",A.VaultType="vault-type",A.ItemsCount="items-count",A.IssuesCount="issues-count"})(RJ||(RJ={}));var JJ;(function(A){A.TeamMember="team-member",A.AccessDate="access-date",A.JoinDate="join-date"})(JJ||(JJ={}));var sFA=ga.readonly(ga.type({noLinkedAccountCount:ga.number,notUsing1PasswordCount:ga.number,notUsingPrivateCount:ga.number,teamMembersCount:ga.number,guestUsersCount:ga.number}),"InsightsTeamReportOverview"),VJ=XJ(()=>({name:"getInsightsTeamReportOverview",method:"GET",url:"/api/v1/insights/teamusage/overview",responseType:sFA})),lFA=ga.readonly(ga.type({uuid:ga.string,email:ga.string,name:ga.string,createdAt:ga.string,avatar:ij(ga.string),lastAuthAt:ij(ga.string),isNotified:ga.boolean,numGroups:ij(ga.number),privateVaultItems:ij(ga.number)}),"InsightsTeamReportUser"),I$;(function(A){A.PageNumber="page-number",A.ItemsPerPage="items-per-page"})(I$||(I$={}));var UJ;(function(A){A.Signins="no-recent-usage",A.FamilyAccount="no-family-accounts",A.PrivateVault="no-private-vault-usage"})(UJ||(UJ={}));var cFA=ga.readonly(ga.type({users:ga.readonlyArray(lFA)}),"InsightsTeamReport"),WJ=XJ((A,j,e,t,r)=>({name:"getInsightsTeamReport",method:"GET",url:`/api/v1/insights/teamusage${it({[Zp.Filter]:A,[I$.PageNumber]:j,[I$.ItemsPerPage]:e,[Zp.Attribute]:t,[Zp.Direction]:r})}`,responseType:cFA})),dFA=ga.readonly(ga.type({csv:ga.string}),"InsightsTeamReportCsv"),YJ=XJ((A,j,e)=>({name:"getInsightsTeamReportCsv",method:"GET",url:"/api/v1/insights/teamusage/csv"+it({[Zp.Filter]:A,[Zp.Attribute]:j,[Zp.Direction]:e}),responseType:dFA}));var $j=W(aA());var zt=W(aA());var Nt=W(aA());var Ko=W(aA());var Mu=Ko.type({token:Ko.string,publicKey:Ko.string},"signInTokenDetails"),zxj=Ko.readonly(Ko.type({encCredentials:Ef,v:Ko.literal(1)}),"EncryptedDeviceCredentials"),Am=Ko.readonly(Ko.type({encCredentials:Oa,v:Ko.literal(2)}),"EncryptedCredentialBundle"),Rxj=Ko.type({requestId:Ko.number,accountUuid:Ko.string,userUuid:Ko.string},"TrustedDeviceUpgradeEventRequest");var kFA=AA("web-api/api/oidc.ts"),Jxj=Nt.readonly(Nt.intersection([Nt.type({authRedirect:Nt.string}),Nt.partial({newEmail:Nt.string})]),"StartOidcAuthResponse"),QJ=kFA(A=>({name:"startOidcAuth",method:"POST",url:"/api/v3/auth/sso/oidc/start",body:A,options:{headers:{"X-AgileBits-Client":Gr.clientDescriptor}},responseType:Jxj,encrypted:!1})),Uxj=Nt.readonly(Nt.type({accountUuid:Nt.string,userUuid:Nt.string,email:Nt.string,sessionUuid:Nt.string}),"VerifyOidcResponseUserData"),Xxj=Nt.union([Nt.literal("found"),Nt.literal("must_enroll_initial_device"),Nt.literal("device_not_enrolled"),Nt.literal("sso_migration_deadline_passed")],"VerifyOidcResponseType"),uFA=Nt.intersection([Nt.type({signInTokenDetails:Mu},"signInTokenDetails"),Nt.partial({encSignInRefreshTokenDetails:Ef},"encSignInRefreshTokenDetails")]),Wf=Nt.intersection([Am,Nt.readonly(Nt.type({accountKeyFormat:Nt.string,accountKeyUuid:Nt.string,userAuth:Uf}),"extra")],"CredentialBundleAuthResponse"),Vxj=Nt.intersection([Nt.type({type:Xxj},"type"),Nt.type({user:Uxj},"user"),Nt.partial({auth:Wf},"auth"),Nt.type({ssoAuth:uFA},"ssoAuth")],"VerifyOidcResponse"),ZJ=kFA((A,j,e,t)=>({name:"verifyOIDC",method:"POST",url:"/api/v3/auth/sso/oidc/verify",options:{headers:{"X-AgileBits-Client":Gr.clientDescriptor}},encrypted:!1,body:{code:A,state:j,device:e,signInRefreshTokenClientKey:t},responseType:Vxj})),Wxj=Nt.readonly(Nt.type({b5_state:Nt.string,redirect_uuid:Nt.string}),"NativeOidcState"),Yxj=Nt.readonly(Nt.type({b5State:Nt.string,accountUuid:Nt.string,clientShortCode:Nt.string}),"SsoOidcState");var JA=W(aA());var Yf=AA("web-api/api/webauthn.ts"),TC=JA.literal("public-key"),pFA=JA.literal("ble"),mFA=JA.literal("hybrid"),EFA=JA.literal("cable"),BFA=JA.literal("internal"),gFA=JA.literal("nfc"),hFA=JA.literal("usb"),qFA=JA.literal("discouraged"),vFA=JA.literal("preferred"),xFA=JA.literal("required"),fFA=JA.type({type:TC,id:JA.string,transports:ij(JA.array(JA.union([pFA,mFA,EFA,BFA,gFA,hFA],"WebauthnCredentialDescriptorType")))},"WebauthnCredentialDescriptor"),Qxj=JA.type({appid:ij(JA.string),credProps:ij(JA.boolean),hmacSecret:ij(JA.boolean)},"WebauthnCredentialExtensionClientInputs"),GFA=JA.type({challenge:JA.string,timeout:ij(JA.number),rpId:ij(JA.string),allowCredentials:ij(JA.array(fFA)),userVerification:ij(JA.union([qFA,vFA,xFA])),extensions:ij(Qxj)},"WebauthnPublicKeyRequest"),AU=JA.readonly(JA.type({publicKey:GFA},"WebauthnAssertion")),FFA=JA.readonly(JA.type({alg:JA.number,type:TC}),"PublicKeyCredentialParameters"),bFA=JA.readonly(JA.intersection([JA.type({name:JA.string}),JA.partial({id:JA.string})]),"PublicKeyCredentialRpEntity"),yFA=JA.readonly(JA.type({displayName:JA.string,id:JA.string,name:JA.string}),"PublicKeyCredentialUserEntity"),$FA=JA.keyof({direct:void 0,enterprise:void 0,indirect:void 0,none:void 0}),wFA=JA.keyof({ble:void 0,hybrid:void 0,internal:void 0,nfc:void 0,usb:void 0}),IFA=JA.keyof({"cross-platform":void 0,platform:void 0}),jU=JA.keyof({discouraged:void 0,preferred:void 0,required:void 0}),DFA=jU,OFA=JA.readonly(JA.partial({authenticatorAttachment:IFA,requireResidentKey:JA.boolean,residentKey:jU,userVerification:DFA}),"AuthenticatorSelectionCriteria"),PFA=JA.readonly(JA.intersection([JA.type({id:U0,type:TC}),JA.partial({transports:JA.array(wFA)})]),"PublicKeyCredentialDescriptor"),CFA=JA.readonly(JA.partial({appId:JA.string,credProps:JA.boolean,hmacCreateSecret:JA.boolean}),"AuthenticationExtensionsClientInputs"),HFA=JA.readonly(JA.intersection([JA.type({challenge:JA.string,pubKeyCredParams:JA.array(FFA),rp:bFA,user:yFA}),JA.partial({attestation:$FA,authenticatorSelection:OFA,excludeCredentials:JA.array(PFA),extensions:CFA,timeout:JA.number})]),"PublicKeyCredentialCreationOptions"),TFA=JA.readonly(JA.type({aborted:JA.boolean,onabort:JA.Function,reason:JA.any,throwIfAborted:JA.Function,addEventListener:JA.Function,removeEventListener:JA.Function}),"AbortSignal"),KC=JA.readonly(JA.partial({publicKey:HFA,signal:TFA}),"CredentialCreationOptions"),KFA=JA.exact(JA.type({clientDataJSON:JA.string,attestationObject:ij(JA.string),transports:ij(JA.array(JA.string))})),Zxj=JA.exact(JA.type({id:JA.string,type:JA.string,rawId:JA.string,response:KFA}),"CredentialCreationResponse"),SFA=JA.exact(JA.type({clientDataJSON:JA.string,authenticatorData:ij(JA.string),signature:ij(JA.string),userHandle:ij(JA.string)})),Afj=JA.exact(JA.type({id:JA.string,type:JA.string,rawId:JA.string,response:SFA}),"CredentialAssertionResponse"),jfj=JA.readonly(JA.type({accountUuid:JA.string,userUuid:JA.string,email:JA.string,sessionUuid:JA.string}),"VerifyPasskeyResponseUserData"),efj=JA.union([JA.literal("found"),JA.literal("must_enroll_initial_device"),JA.literal("device_not_enrolled")],"VerifyPasskeyResponseType"),tfj=JA.type({type:efj,user:jfj,auth:ij(Wf),signInTokenDetails:Mu},"VerifyPasskeyResponse"),rfj=JA.type({challenge:KC},"RegisterWebauthnCredentialResponse"),SC=JA.readonly(JA.type({name:JA.string,createdAt:JA.string,updatedAt:JA.string,credentialId:JA.string})),eU=Yf((A,j,e,t)=>({name:"verifyPasskey",method:"POST",url:"/api/v3/auth/passkey/verify",options:{headers:{"X-AgileBits-Client":Gr.clientDescriptor}},encrypted:!1,body:{userUuid:A,device:j,assertion:e,keyId:t},responseType:tfj})),tU=Yf(()=>({name:"registerWebauthnCredential",method:"POST",url:"/api/v2/auth/webauthn/register",encrypted:!0,responseType:rfj})),rU=Yf((A,j)=>({name:"verifyWebauthnCredentialAttestation",method:"POST",url:"/api/v2/auth/webauthn/register/challenge",encrypted:!0,body:{name:A,attestation:j},responseType:SC})),MFA=JA.readonly(JA.type({credentials:JA.array(SC,"credentials")})),aU=Yf(A=>({name:"getUserCredentials",method:"GET",url:`/api/v2/users/${A}/credentials`,responseType:MFA})),nU=Yf((A,j)=>({name:"deleteUserCredential",method:"DELETE",url:`/api/v2/users/${A}/credentials/${j}`,responseType:J})),oU=Yf((A,j)=>({name:"updateUserCredentials",method:"PATCH",url:`/api/v2/users/credential/${A}`,encrypted:!0,body:{name:j},responseType:SC}));var MC=AA("web-api/api/auth_methods.ts"),_C="PASSWORD+SK",D$="OIDC",O$="WEBAUTHN",_FA=zt.type({type:zt.literal(_C)},"PasswordAuthMethod"),LFA=zt.intersection([zt.type({type:zt.literal(D$)},"type"),zt.partial({provider:zt.string,iconUrl:zt.string},"partial")],"OidcAuthMethod"),NFA=zt.type({type:zt.literal(O$),assertion:AU},"type"),_u=zt.readonly(zt.union([_FA,LFA,NFA]),"AuthMethod"),afj=zt.intersection([zt.readonly(zt.type({authMethods:GA(zt.array(_u),[])}),"authMethods"),zt.partial({userUuid:zt.string},"userUuid"),zt.partial({signInAddress:zt.string},"signInAddress")],"AuthMethodResponse"),iU=MC((A,j)=>({name:"getAuthMethods",method:"POST",url:"/api/v2/auth/methods",body:{email:A,userUuid:j},responseType:afj,encrypted:!1})),zFA=zt.readonly(zt.type({method:zt.string,alg:zt.string,iterations:zt.number,salt:zt.string,v:zt.string}),"ReadOnlyAuth"),nfj=zt.readonly(zt.partial({authOnly:zt.boolean,landingPage:zt.string}),"SsoSignInOptions"),sU=MC((A,j,e)=>({name:"addCredentialBundle",method:"POST",url:"/api/v3/user/devicecredentials",body:{deviceCredentials:A,keyId:j,enrollmentUuid:e},responseType:J})),ofj=zt.readonly(zt.type({deviceCredentials:Am,auth:zFA,activeKeyset:Ki}),"SetUpCredentialBundleRequest"),RFA=zt.readonly(zt.type({accountKeyUuid:zt.string}),"SetUpCredentialBundleResponse"),lU=MC((A,j,e)=>({name:"setupCredentialBundle",method:"PUT",url:"/api/v3/user/devicecredentials",body:{deviceCredentials:A,auth:j,activeKeyset:e},responseType:RFA})),cU=MC(A=>({name:"getEncryptedCredentialBundle",method:"GET",url:`/api/v3/auth/devicecredentials?keyUuid=${A}`,responseType:Wf}));var il=AA("web-api/api/invitation.ts"),ifj=$j.readonly($j.type({secret:$j.string,accountName:$j.string}),"TeamInvitationDetails"),P$=$j.readonly($j.type({uuid:$j.string,token:$j.union([$j.string,$j.undefined]),accountUuid:$j.string,accountName:$j.union([$j.string,$j.undefined]),accountType:$j.union([$j.string,$j.undefined]),accountHost:$j.string,disableEmergencyKit:GA($j.boolean,!1),email:$j.string,language:$j.string,senderFullName:$j.union([$j.string,$j.undefined]),senderEmail:$j.union([$j.string,$j.undefined]),state:$j.union([$j.string,$j.undefined]),type:$j.union([$j.string,$j.undefined]),sentAt:$j.union([$j.string,$j.undefined]),timeout:$j.union([$j.number,$j.undefined]),acceptedAt:$j.union([$j.string,$j.undefined]),revokedAt:$j.union([$j.string,$j.undefined]),migratingFrom:$j.union([$j.string,$j.undefined]),accountUsesNewKeysets:$j.boolean,passwordRules:$j.string,iconSet:ij(Nf),accountAuthMethods:GA($j.array(_u),[]),isManaged:GA($j.boolean,!1),extensionFirstForSso:GA($j.boolean,!1),extensionAllowedPolicyFeatureEnabled:GA($j.boolean,!1),b2bExtensionFirstGuidedSetupEnabled:GA($j.boolean,!1)}),"InvitationDetails"),sfj=$j.readonly($j.type({email:$j.string,reason:$j.union([$j.literal("is_existing_user"),$j.literal("is_existing_guest")])}),"FailedInvites"),lfj=$j.readonly($j.type({successfulInvites:$j.array(P$),failedInvites:$j.array(sfj)}),"InviteResponse"),cfj=$j.readonly($j.type({state:$j.string,inviteUuid:$j.union([$j.string,$j.undefined]),userUuid:$j.union([$j.string,$j.undefined]),vaultAcl:$j.union([$j.number,$j.undefined]),vaultUuid:$j.union([$j.string,$j.undefined]),shouldConfirm:$j.boolean}),"InviteVaultV2"),dU=il((A,j)=>({name:"lookUpInvitation",method:"GET",url:`/api/v1/invite/${A}/${j}`,responseType:P$,encrypted:!1})),kU=il(A=>({name:"lookUpTeamInvitation",method:"GET",url:`/api/v1/teaminvite/${A}`,encrypted:!1,responseType:ifj})),uU=il(()=>({name:"getPendingInvitations",method:"GET",url:"/api/v1/invites",responseType:$j.array(P$)})),pU=il(A=>({name:"inviteViaSlack",method:"POST",url:"/api/v1/invite/slack",body:A,options:{timeout:6e4},responseType:$j.array(P$)})),mU=il((A,j,e)=>({name:"inviteUsersViaEmail",method:"POST",url:`/api/v1/invite${e?`?source=${e}`:""}`,body:{invites:A,type:j},responseType:$j.array(lfj)})),EU=il(A=>({name:"teamInvitePerson",method:"POST",url:"/api/v1/teaminvite",body:A,responseType:J,encrypted:!1})),BU=il(A=>({name:"resendInvitations",method:"GET",url:`/api/v1/invite/resend/${A.join(",")}`,responseType:$j.array(P$)})),gU=il(A=>({name:"revokeInvitations",method:"DELETE",url:`/api/v1/invite/${A.join(",")}`,responseType:J})),hU=il(A=>({name:"generateReplyToConfirmation",method:"POST",url:"/api/v1/invite/replyto/begin",body:{email:A},responseType:J})),qU=il((A,j)=>({name:"completeReplyToConfirmation",method:"POST",url:"/api/v1/invite/replyto/complete",body:{token:j,email:A},responseType:J})),dfj=$j.readonly($j.type({inviteSecret:$j.string}),"RegenerateSignUpLinkResponse"),vU=il(()=>({name:"regenerateSignUpLink",method:"PUT",url:"/api/v1/account/teaminvite/regenerate",responseType:dfj})),xU=il(A=>({name:"getInviteVaults",method:"GET",url:`/api/v2/invitevault${it(A)}`,responseType:$j.array(cfj)})),fU=il(A=>({name:"updateInviteVault",method:"PUT",url:"/api/v2/invitevault",body:A,responseType:J})),GU=il(A=>({name:"deleteInviteVault",method:"DELETE",url:"/api/v2/invitevault",body:A,responseType:J}));var kfj=AA("web-api/api/item_usage.ts"),C$;(function(A){A.Fill="fill",A.SelectSsoProvider="select-sso-provider",A.EnterItemEditMode="enter-item-edit-mode",A.Export="export",A.Share="share",A.SecureCopy="secure-copy",A.Reveal="reveal"})(C$||(C$={}));var ufj=kfj(A=>({name:"reportItemUsage",method:"POST",url:"/api/v3/user/itemusage",body:A,responseType:J}));var pj=W(aA());var jm=AA("web-api/api/item_share.ts"),Lu;(function(A){A.AnyoneWithTheLink="P",A.OnlySomePeople="A"})(Lu||(Lu={}));var H$=pe(Lu,"ItemShareAvailableTo"),Qd;(function(A){A.Email="E",A.Domain="D"})(Qd||(Qd={}));var JFA=pe(Qd,"ItemShareRecipientType"),pfj=pj.intersection([pj.type({allowed:pj.boolean,maxSize:pj.number}),pj.partial({allowedTypes:pj.readonlyArray(H$),allowedRecipientTypes:pj.readonlyArray(JFA),maxExpiry:pj.number,defaultExpiry:pj.number,maxViews:pj.union([pj.number,pj.undefined])})]),mfj=pj.readonly(pj.type({allowedTypes:pj.readonlyArray(H$),allowedRecipientTypes:pj.readonlyArray(JFA),maxExpiry:pj.number,defaultExpiry:pj.number,maxViews:pj.union([pj.number,pj.undefined]),files:pfj}),"ItemSharePreflightResponse"),LC;(function(A){A.Active="A",A.Inactive="I"})(LC||(LC={}));var Efj=pe(LC,"ItemShareState"),Bfj=pj.readonly(pj.type({type:pj.literal(Qd.Email),email:pj.string}),"ItemShareRecipientEmail"),gfj=pj.readonly(pj.type({type:pj.literal(Qd.Domain),domain:pj.string}),"ItemShareRecipientDomain"),FU=pj.union([Bfj,gfj]),hfj=pj.readonly(pj.type({uuid:pj.string,state:Efj,itemVersion:pj.number,createdAt:Yn,expiresAt:Yn,sharedBy:pj.readonly(pj.type({uuid:pj.string,name:pj.union([pj.string,pj.undefined])})),encShareSecret:pj.union([Oa,pj.undefined]),url:pj.string,type:H$,recipients:pj.union([pj.readonlyArray(FU),pj.undefined]),viewCount:pj.number,maxViews:pj.union([pj.number,pj.undefined]),canDelete:pj.boolean})),qfj=pj.readonly(pj.type({shares:pj.readonlyArray(hfj)})),bU=jm((A,j)=>({name:"getSharedHistoryForItem",method:"GET",url:`/api/v4/itemshare/${A}/${j}`,responseType:qfj})),yU=jm((A,j)=>({name:"getItemSharePreflight",method:"GET",url:`/api/v4/itemshare/preflight/${A}/${j}`,responseType:mfj})),vfj=pj.readonly(pj.type({url:pj.string}),"CreateItemShareResponse"),$U=jm(A=>({name:"createItemShare",method:"POST",url:"/api/v4/itemshare",body:A,responseType:vfj})),xfj=pj.readonly(pj.type({rejectedRecipients:pj.readonlyArray(FU)})),wU=jm(A=>({name:"validateItemShareRecipients",method:"POST",url:"/api/v4/itemshare/validate-recipients",body:A,responseType:xfj})),ffj=pj.readonly(pj.type({uuid:pj.string,ip:pj.string,accessorEmail:pj.string,timestamp:Yn,action:pj.string,location:pj.union([pj.readonly(pj.type({city:pj.string,country:pj.string,countryCode:pj.string}),"ItemShareAuditLocation"),pj.undefined])}),"ItemShareAuditEvent"),Gfj=pj.readonly(pj.type({createdAt:Yn,expiresAt:Yn,maxViews:pj.union([pj.number,pj.undefined]),state:pj.string,accessType:H$,sharedBy:pj.string,recipients:GA(pj.readonlyArray(FU),[]),events:GA(pj.readonlyArray(ffj),[])}),"ItemShareAuditDetailsResponse"),IU=jm(A=>({name:"getItemShareAuditDetails",method:"GET",url:`/api/v3/itemshare/audit/${A}`,responseType:Gfj})),Ffj=pj.readonly(pj.type({token:pj.string,email:pj.string,expiresAt:Yn}),"ShareSeviceAuthTokenResponse"),DU=jm(()=>({name:"getShareSeviceAuthToken",method:"GET",url:"/api/v3/itemshare/token",responseType:Ffj})),OU=jm((A,j,e)=>({name:"deleteItemShare",method:"DELETE",url:`/api/v3/itemshare/${A}/${j}/${e}`,responseType:J})),PU=jm(A=>({name:"updateAccountShareSettings",method:"POST",url:"/api/v3/itemshare/admin/settings",body:A,responseType:J})),bfj=pj.readonly(pj.type({allowedDomains:GA(pj.readonlyArray(pj.string),[]),allowedTypes:pj.readonlyArray(H$),enforceAllowedDomains:pj.boolean,allowFiles:pj.union([pj.boolean,pj.undefined]),defaultExpiry:pj.number,maxExpiry:pj.number,maxViews:pj.union([pj.number,pj.undefined]),allowTeamJoin:pj.boolean})),CU=jm(()=>({name:"getAccountShareSettings",method:"GET",url:"/api/v3/itemshare/admin/settings",responseType:bfj}));var mB=W(aA());var $fj=AA("web-api/api/keyset.ts"),UFA=mB.readonly(mB.type({version:mB.number,keysets:mB.readonlyArray(Ki)}),"UserKeysets"),HU=$fj(()=>({name:"getKeysets",method:"GET",url:"/api/v2/account/keysets",responseType:UFA}));var hn=W(aA());var wfj=AA("web-api/api/kolide.ts"),XFA=hn.readonly(hn.type({name:hn.string,include_url_patterns:hn.array(hn.string),exclude_url_patterns:hn.array(hn.string)}),"KolideApp"),Ifj=hn.record(hn.string,XFA,"KolideAppList"),Dfj=hn.readonly(hn.type({app_list:Ifj,enabled:hn.boolean,generated_at:hn.string}),"KolidePayload"),Ofj=hn.readonly(hn.type({account_uuid:hn.string,definition:Dfj}),"KolideAppsResponse"),Pfj=wfj(()=>({name:"getKolideApps",method:"GET",url:"/api/v2/policies/device-trust",responseType:Ofj}));var Kj=W(aA());var jbA=W(aA());var TU=W(gh());var Zl=A=>new TU.BigInteger(A.toString(10),10),NC=A=>Number.parseInt(A.toString(10),10),VFA=(A,j)=>Zl(A).and(Zl(j)).equals(Zl(j)),WFA=(A,j)=>Zl(A).and(Zl(j)).compareTo(TU.BigInteger.ZERO)>0,YFA=(A,j)=>NC(Zl(A).or(Zl(j))),QFA=(A,j)=>NC(Zl(A).xor(Zl(j))),ZFA=(A,j)=>NC(Zl(A).andNot(Zl(j))),AbA=A=>NC(ti(A,(j,e)=>j.or(Zl(e)),Zl(0)));var Xj;(function(A){A.codec=jbA.number,A.empty=()=>0,A.equals=(j,e)=>j===e,A.fromHex=j=>Number.parseInt(j,16),A.toHex=j=>j.toString(16),A.combine=AbA,A.disable=ZFA,A.enable=YFA,A.includes=VFA,A.includesAny=WFA,A.toggle=QFA})(Xj||(Xj={}));var pr=Xj.fromHex,rt={BelongsToTeamMembersGroup:pr("000000001"),BelongsToOwnersGroup:pr("000000002"),BelongsToAdminsGroup:pr("000000004"),BelongsToRecoveryGroup:pr("000000008"),BelongsToUserDefinedGroup:pr("000000010"),BelongsToSecurityGroup:pr("000000020"),BelongsToExternalAccountManagersGroup:pr("000000040"),BelongsToProvisioningGroup:pr("000000080"),Recover:pr("000000100"),ViewAdminConsole:pr("000000200"),ViewActivities:pr("000000400"),ViewTemplates:pr("000000800"),ViewPeople:pr("000001000"),AddPerson:pr("000002000"),ChangePersonName:pr("000004000"),SuspendPerson:pr("000008000"),DeletePerson:pr("000010000"),ViewVaults:pr("000020000"),UsePersonalVault:pr("000040000"),CreateVault:pr("000080000"),ManageTemplates:pr("000100000"),ManageVaults:pr("000200000"),ViewGroups:pr("000400000"),ManageGroups:pr("000800000"),ViewTeamSettings:pr("001000000"),ChangeTeamSettings:pr("002000000"),ChangeTeamAttrs:pr("004000000"),ChangeTeamDomain:pr("008000000"),SuspendTeam:pr("010000000"),DeleteTeam:pr("020000000"),ViewBilling:pr("040000000"),ManageBilling:pr("080000000"),ProvisionPeople:pr("10000000000"),BeginRecovery:pr("80000000000"),ViewSecurityReports:pr("20000000000"),BackofficeView:pr("0100000000000"),BackofficeViewAdvanced:pr("0200000000000"),BackofficeUpdate:pr("0400000000000"),BackofficeChangeDomain:pr("0800000000000"),BackofficeSuspendTeam:pr("1000000000000"),BackofficeDeleteTeam:pr("2000000000000")},Hfj={Recovery:rt.Recover,ViewAdminConsole:Xj.combine([rt.ViewAdminConsole,rt.ViewActivities,rt.ViewPeople,rt.ViewVaults,rt.ViewTemplates,rt.ViewGroups,rt.ViewTeamSettings]),ManagePeople1:Xj.combine([rt.AddPerson,rt.DeletePerson]),ManagePeople2:rt.ChangePersonName,SuspendPerson:rt.SuspendPerson,CreateVault:rt.CreateVault,ManageAllVaults:rt.ManageVaults,ManageAllGroups:rt.ManageGroups,ManageTeamSettings:Xj.combine([rt.ChangeTeamSettings,rt.ChangeTeamAttrs,rt.ChangeTeamDomain,rt.ManageTemplates]),DeleteTeam:Xj.combine([rt.SuspendTeam,rt.DeleteTeam]),ManageBilling:Xj.combine([rt.ViewBilling,rt.ManageBilling]),ProvisionPeople:Xj.combine([rt.ProvisionPeople,rt.BeginRecovery]),ViewSecurityReports:rt.ViewSecurityReports},zC=Xj.combine([rt.Recover,rt.ManageGroups,rt.ManageVaults]),KU=Xj.combine([rt.BelongsToOwnersGroup,rt.BelongsToAdminsGroup,rt.BelongsToRecoveryGroup,zC]),Ac;(function(A){A.ViewConsole="view-console",A.Add="add",A.Unlink="unlink",A.Launch="launch",A.Edit="edit",A.FreezeUnfreeze="freeze-unfreeze"})(Ac||(Ac={}));var Lh=AA("web-api/api/managed_account.ts"),EB=Kj.readonly(Kj.type({kid:Kj.string,encryptedBy:Kj.string,encKey:$A.JweB},"ManagedAccountKey")),So;(function(A){A.Active="A",A.Unlinked="U"})(So||(So={}));var Qf=Kj.readonly(Kj.intersection([Kj.type({uuid:Kj.string,name:Kj.string}),Kj.partial({state:pe(So,"ManagedAccountState"),domain:Kj.string,avatar:Kj.string,website:Kj.string,country:Kj.string,region:Kj.string,activeSeats:Kj.number,startedManagingDate:Kj.string,lastLaunchedAt:Kj.string,acl:Kj.array(pe(Ac,"MspPermissions")),managedAccountKey:EB})]),"ManagedAccount"),Tfj=Kj.readonly(Kj.intersection([Kj.type({name:Kj.string,country:Kj.string}),Kj.partial({website:Kj.string,region:Kj.string})]),"CompanyDetails"),uSe=Kj.partial({name:Kj.string,country:Kj.string,website:Kj.string,region:Kj.string},"UpdateCompanyDetails"),pSe=Kj.readonly(Kj.type({companyDetails:Tfj,managedAccountKey:EB,eamUserKeyset:$A.KeysetCiphertext},"CreateManagedAccountRequest")),mSe=Kj.readonly(Kj.type({managedAccountUuid:Kj.string})),Kfj=Kj.readonly(Kj.type({sessionUuid:Kj.string,sessionKey:$A.JwkSymKey,managedAccountKey:EB,encryptedByKey:$A.KeysetCiphertext,notifier:Kj.string},"LaunchSessionResponse")),ESe=Kj.readonly(Kj.type({type:Kj.string,accountUuid:Kj.string,sessionUuid:Kj.string,sessionKey:$A.JwkSymKey,managedAccountKey:$A.JwkSymKey,encryptedByKey:$A.KeysetCiphertext,notifier:Kj.string,languageCode:Kj.string}),"LaunchSessionData"),BSe=Kj.readonly(Kj.type({type:Kj.string},"MessageRelayReady")),ebA=Kj.readonly(Kj.intersection([Kj.type({name:Kj.string,uuid:Kj.string,type:Kj.string}),Kj.partial({avatar:Kj.string})]),"AssignedGroup"),tbA=Kj.readonly(Kj.intersection([Kj.type({uuid:Kj.string,name:Kj.string,email:Kj.string,state:Kj.string,acl:Kj.array(Kj.string),assignedThroughGroups:Kj.array(ebA)}),Kj.partial({avatar:Kj.string})]),"ManagedAccountUser"),rbA=Kj.readonly(Kj.intersection([Kj.type({uuid:Kj.string,name:Kj.string,acl:Kj.array(Kj.string),lastUpdated:Kj.string,userCount:Kj.number,type:Kj.string}),Kj.partial({avatar:Kj.string})]),"ManagedAccountGroup"),abA=Kj.readonly(Kj.type({users:Kj.array(tbA),groups:Kj.array(rbA)}),"ManagedAccountAccessDetailsResponse"),SU=Lh(A=>({name:"getManagedAccounts",method:"GET",url:A?"/api/v1/msp/managed-accounts?include-keys=true":"/api/v1/msp/managed-accounts",responseType:Kj.array(Qf)})),MU=Lh(A=>({name:"createManagedAccount",method:"POST",url:"/api/v1/msp/managed-accounts",body:A,responseType:Qf})),_U=Lh((A,j)=>({name:"updateManagedAccount",method:"PATCH",url:`/api/v1/msp/managed-accounts/${A}`,body:j,responseType:J})),LU=Lh(A=>({name:"unlinkManagedAccount",method:"DELETE",url:`/api/v1/msp/managed-accounts/${A}`,responseType:J})),NU=Lh(A=>({name:"createLaunchSession",method:"POST",url:"/api/v1/msp/launch",body:A,responseType:Kfj})),zU=Lh(A=>({name:"getManagedAccountDetails",method:"GET",url:`/api/v1/msp/managed-accounts/${A}`,responseType:Qf})),RU=Lh(A=>({name:"getManagedAccountAccessDetails",method:"GET",url:`/api/v1/msp/access/managed-accounts/${A}`,responseType:abA}));var ki=W(aA());var Sfj=AA("web-api/api/managed_account_net_seats.ts"),nbA=ki.readonly(ki.type({uuid:ki.string,name:ki.string,netSeats:ki.number,avatar:ij(ki.string),website:ij(ki.string),domain:ki.string},"ManagedAccountNetSeats")),vSe=ki.type({startDate:ij(ki.string),endDate:ij(ki.string)}),JU=Sfj(A=>{let j=new URLSearchParams;return A.startDate&&j.set("startDate",A.startDate),A.endDate&&j.set("endDate",A.endDate),{name:"getManagedAccountsNetSeats",method:"GET",url:`/api/v1/msp/managed-accounts/net-seats?${j.toString()}`,responseType:ki.array(nbA)}});var Vc=W(aA());var obA=AA("web-api/api/monitoring.ts"),ibA=Vc.readonly(Vc.partial({status:Vc.union([Vc.literal("error"),Vc.literal("ok"),Vc.literal("unknown")]),lastChecked:Vc.string}),"MonitoringStatus"),T$=obA(A=>({name:"createMonitoringCheck",method:"POST",url:"/api/v1/monitoring",body:A,responseType:J})),UU=obA(()=>({name:"getMonitoringStatus",method:"GET",url:"/api/v1/monitoring/status",responseType:ibA}));var Ke=W(aA());var em=AA("web-api/api/msp.ts"),sbA=Ke.readonly(Ke.intersection([Ke.type({uuid:Ke.string,name:Ke.string,acl:Ke.array(pe(Ac,"MspPermission"))}),Ke.partial({key:EB})]),"ManagedCompanyAccess"),Mfj=Ke.readonly(Ke.type({accessorUuid:Ke.string,accessorType:Ke.string,encKey:Ki,encryptedBy:Ke.string},"MspAccess")),_fj=Ke.readonly(Ke.array(Mfj)),OSe=Ke.readonly(Ke.type({access:_fj})),lbA=Ke.readonly(Ke.intersection([Ke.type({acl:Ke.array(pe(Ac,"MspPermission"))}),Ke.partial({encKeyset:Ki})]),"MspUserPermissionsResponse"),cbA=Ke.readonly(Ke.partial({acl:GA(Ke.array(pe(Ac,"MspPermission")),[]),managedCompanies:Ke.array(sbA)}),"MspGroupPermissionsResponse"),Lfj=Ke.intersection([Ke.type({acl:GA(Ke.array(Ke.string),[])}),Ke.partial({encKey:Ki,encryptedBy:Ke.string})],"MspGroupPermissionsRequest"),dbA=Ke.type({linkRequestUuid:Ke.string,encAuthenticationKey:Oa,expirationTime:Ke.string,acceptedAt:Ke.union([Ke.string,Ke.undefined]),managedAccount:Qf},"MspLinkRequestResponse"),kbA=Ke.type({linkRequestUuid:Ke.string,managedAccountName:Ke.string,managedAccountDomain:Ke.string,managedAccountUuid:Ke.string,expiresAt:Ke.string},"LinkRequestItem"),ubA=Ke.type({linkRequests:Ke.array(kbA)},"AcceptedLinkRequestsResponse"),PSe=Ke.type({encManagedAccountKey:EB,eamUserKeyset:Ki,eamGroupKeyset:Ki,groupPublicKeyMac:bh},"AcceptLinkRequest"),VU=em(()=>({name:"getLinkRequests",method:"GET",url:"/api/v1/msp/link-requests",responseType:ubA})),WU=em(A=>({name:"setupMsp",method:"POST",url:"/api/v1/msp",body:A,responseType:J})),YU=em(()=>({name:"getUserMspPermissions",method:"GET",url:"/api/v1/msp",responseType:lbA})),QU=em(A=>({name:"getGroupMspPermissions",method:"GET",url:`/api/v1/msp/access/group/${A}`,responseType:cbA})),XU=Ke.readonly(Ke.intersection([Ke.type({groupUuid:Ke.string,managedAccountUuid:Ke.string}),Ke.partial({acl:ij(Ke.array(pe(Ac,"MspPermission"))),managedAccountKey:EB})]),"ManagedCompanyMspGroupPermission"),Nfj=Ke.partial({update:Ke.array(XU),remove:Ke.array(XU)},"ManagedCompanyMspGroupPermissionsRequest"),ZU=em(A=>({name:"updateManagedCompanyMspPermissions",method:"PATCH",url:"/api/v1/msp/access",body:A,responseType:J})),AX=em((A,j)=>({name:"updateGroupMspPermissions",method:"PUT",url:`/api/v1/msp/access/group/${A}`,body:j,responseType:J})),jX=em(A=>({name:"getMspLinkRequest",method:"GET",url:`/api/v1/msp/link-request/${A}`,responseType:dbA})),eX=em((A,j)=>({name:"acceptLinkRequest",method:"PATCH",url:`/api/v1/msp/link-request/${A}/accept`,body:j,responseType:J})),tX=em(A=>({name:"declineLinkRequest",method:"PATCH",url:`/api/v1/msp/link-request/${A}/decline`,responseType:J}));var Mo=W(aA());var aX=AA("web-api/api/notifications.ts"),rX;(function(A){A.DeviceEnrollment="DEVICE_ENROLL"})(rX||(rX={}));var zfj=Mo.intersection([Mo.type({uuid:Mo.string,type:Mo.string},"type"),Mo.partial({payload:Mo.string},"partial")],"Notification"),Rfj=Mo.readonly(Mo.type({notifications:Mo.readonlyArray(zfj)}),"NotificationsResponse"),nX=aX(()=>({name:"getNotifications",method:"GET",url:"/api/v2/notification",responseType:Rfj})),oX=aX(A=>({name:"acknowledgeNotification",method:"POST",url:"/api/v2/notification/acknowledge",body:A,responseType:J})),KSe=Mo.readonly(Mo.type({token:Mo.string}),"SaveSettingsRequest"),iX=aX(A=>({name:"saveNotificationSettings",method:"POST",url:"/api/v2/notification/settings",body:A,responseType:J}));var Zf=W(aA());var Jfj=AA("web-api/api/notifier.ts"),Ufj=Zf.readonly(Zf.type({notifierUrl:Zf.string},"type"),"GetNotifierUrlResponse"),pbA=Jfj(()=>({name:"getNotifierUrl",method:"GET",url:"/api/v2/notifier/url",responseType:Ufj}));var re=W(aA());var ll=AA("web-api/api/object_access.ts"),qn;(function(A){A.ConnectCredentialsFull="full",A.ConnectCredentialsSigningPrivateKeyToken="signing-private-key,token",A.SigningPrivateKey="signing-private-key",A.AdminWatchtowerKeysetPrivateKey="private-key",A.UserManagedServiceAccountCreator="usermanaged-service-account-creator",A.None=""})(qn||(qn={}));var Xfj=pe(qn,"DataType"),Li;(function(A){A.ServiceAccountConnect="serviceaccount.connect",A.ServiceAccountDataStreaming="serviceaccount.streaming",A.AdminWatchtowerKeyset="keyset.adminwatchtower",A.ServiceAccountUserManaged="serviceaccount.usermanaged"})(Li||(Li={}));var jG=pe(Li,"ObjectType"),ui;(function(A){A.Manage="scope:manage",A.Every="scope:every",A.Some="scope:some"})(ui||(ui={}));var JC=pe(ui,"ObjectDataAccessScope"),_o;(function(A){A.ServiceAccountTokenCreate="token-create",A.ServiceAccountTokenRevoke="token-delete",A.ServiceAccountTokenEdit="token-edit",A.ServiceAccountCreate="sa-create",A.ServiceAccountEdit="sa-edit",A.ServiceAccountDelete="sa-delete",A.ServiceAccountCreatorManaged="sa-creator-managed",A.ServiceAccountConnectVaultAccessEdit="vault-access-edit",A.ServiceAccountConnectAddRemove="add-remove"})(_o||(_o={}));var mbA=pe(_o,"ObjectDataAccessAcl"),EbA=re.union([JC,mbA]),RC;RC||(RC={});var Vfj=pe(RC,"ObjectDataAcl"),AG;(function(A){A.Active="A"})(AG||(AG={}));var BbA=pe(AG,"ObjectDataAccessState"),sl;(function(A){A.Group="G",A.User="U"})(sl||(sl={}));var sX=pe(sl,"ObjectDataAccessorType"),gbA=re.readonly(re.union([re.type({dataType:Xfj,encKey:$A.JweB,encData:$A.JweB}),re.type({dataType:re.literal(qn.None)}),re.intersection([re.type({dataType:re.literal(qn.UserManagedServiceAccountCreator)}),re.partial({creatorUuid:re.string})])]),"ObjectDataValue"),K$=re.readonly(re.type({objectType:jG,objectUuid:re.string,data:gbA,encryptedBy:re.string,acl:re.readonlyArray(re.string)})),Wfj=re.readonly(re.type({data:K$}),"UpdateObjectDataRequest"),hbA=re.readonly(re.type({avatar:re.string,name:re.string,type:re.string}),"AccessorPreview"),qbA=re.readonly(re.intersection([re.type({accessorType:sX,accessorUuid:re.string,acl:re.readonlyArray(re.string),objectType:re.string,objectUuid:re.string,scope:JC},"type"),re.partial({accessorPreview:hbA},"partial")],"CombinedObjectAccessor")),UC=re.readonly(re.type({objectType:jG,scope:JC,keysets:re.readonlyArray($A.KeysetCiphertext),data:re.readonlyArray(K$)}),"UserCombinedObjectDataAccess"),vbA=re.readonly(re.type({combinedAccess:UC}),"UserCombinedObjectDataAccessResponse"),lX=ll(A=>({name:"getUserCombinedObjectDataAccess",method:"GET",url:`/api/v1/objects/${A}/access/combined`,responseType:vbA})),xbA=re.readonly(re.type({access:re.array(qbA)})),BB=re.readonly(re.intersection([re.type({state:BbA,objectType:jG,accessorUuid:re.string,accessorType:sX,kid:re.string,pubKey:$A.JwkRsaPubKey,encryptedBy:re.string,createdAt:re.string,updatedAt:re.string,acl:re.array(EbA)},"type"),re.partial({encKeyset:$A.KeysetCiphertext},"partial")]),"ObjectDataAccess"),cX=ll(A=>({name:"createObjectDataAccess",method:"POST",url:`/api/v1/objects/${A.access.objectType}/access`,body:A,responseType:J})),dX=ll((A,j,e)=>({name:"deleteObjectDataAccess",method:"DELETE",url:`/api/v1/objects/${A}/access/${e}/${j}`,responseType:J})),XC=re.readonly(re.type({access:re.readonlyArray(BB)})),kX=ll((A,j,e)=>({name:"getObjectDataAccess",method:"GET",url:`/api/v1/objects/${A}/access/${j}/${e}`,responseType:XC})),uX=ll((A,j)=>({name:"createObjectData",method:"POST",url:`/api/v1/objects/${A}`,body:j,responseType:J})),pX=ll(A=>({name:"getObjectDataAccessorsForObjectType",method:"GET",url:`/api/v1/objects/${A}/access`,responseType:XC})),fbA=re.readonly(re.type({objectType:jG,accessors:re.readonlyArray(BB)}),"ObjectDataPreflightResponse"),mX=ll((A,j,e)=>{let t=it({accessorDetails:e.accessorDetails});return{name:"getCombinedObjectAccessors",method:"GET",url:`/api/v1/objects/${A}/${j}/access/combined${t}`,responseType:xbA}}),VC=async(A,j)=>{try{return await Yfj(A,j)}catch(e){let t=N0(e);if(j3(t,Rl.notFound))return;throw t}},Yfj=ll(A=>({name:"getObjectDataPreflightWith404",method:"GET",url:`/api/v2/objects/${A}/preflight`,responseType:fbA})),GbA=re.readonly(re.type({objectType:jG,requiredGroups:GA(re.readonlyArray(re.string),[]),existingAccess:re.union([BB,re.undefined]),keyset:re.union([$A.KeysetCiphertext,re.undefined]),data:GA(re.readonlyArray(K$),[])}),"ObjectDataAccessPreflightResponse"),eG=ll((A,j,e)=>{let t=`/api/v1/objects/${A}/access/preflight/${j}`;return e&&(t+=`?accessoruuid=${e}`),{name:"getObjectDataAccessPreflight",method:"GET",url:t,responseType:GbA}}),S$=ll((A,j)=>({name:"addObjectData",method:"PATCH",url:`/api/v1/objects/${A}`,body:j,responseType:J})),EX=ll((A,j,e,t)=>({name:"deleteObjectData",method:"DELETE",url:`/api/v1/objects/${A}/${j}/${e}/${t}`,responseType:J})),Qfj=ll(A=>({name:"getObjectDataAccessForUserAndType",method:"GET",url:`/api/v1/objects/${A}/access/user`,responseType:XC})),BX=ll((A,j,e,t,r)=>({name:"updateObjectData",method:"PUT",url:`/api/v1/objects/${A}/${j}/${e}/${t}`,body:r,responseType:J})),FbA=re.readonly(re.type({objectType:jG,objectData:re.readonlyArray(K$)}),"ObjectDataWithSpec1Response"),gX=ll(A=>({name:"getAllObjectDataWithDataSpec1",method:"GET",url:`/api/v1/objects/${A}/dataspec/1`,responseType:FbA}));var Zfj=AA("web-api/api/outdated_browser.ts"),hX=Zfj(A=>({name:"reportOutdatedBrowser",method:"POST",url:"/api/v2/report-outdated-browser",body:A,responseType:J}));var vt=W(aA());var Zd=AA("web-api/api/package.ts"),bbA=vt.intersection([vt.type({sourceVaultUuid:vt.string,senderUuid:vt.string,recipientUuid:vt.string,itemUuid:vt.string,itemVersion:vt.number,templateUuid:vt.string,encKey:$A.JweB,recoverableEncKey:$A.JweB,encOverview:$A.JweB,signature:$A.JwsB},"type"),vt.partial({uuid:vt.string,createdAt:vt.string,updatedAt:vt.string,clientCreatedAt:vt.string,clientUpdatedAt:vt.string,encDetails:$A.JweB},"partial")],"Package"),WC=vt.readonly(vt.intersection([bbA,vt.type({uuid:vt.string},"type")]),"IncomingPackage"),vX=Zd(A=>({name:"sendPackages",method:"PATCH",url:"/api/v1/packages",body:A,responseType:J})),xX=Zd(()=>({name:"getIncomingPackages",method:"GET",url:"/api/v1/packages/incoming",responseType:vt.array(WC)})),fX=Zd(A=>({name:"getIncomingPackage",method:"GET",url:`/api/v1/package/${A}`,responseType:WC})),GX=Zd((A,j)=>({name:"getPackagesForVaultItem",method:"GET",url:`/api/v1/packages/sent/${A}/${j}`,responseType:vt.array(WC)})),YC=Zd(A=>({name:"removePackages",method:"DELETE",url:"/api/v1/packages",body:A,responseType:J})),ybA=vt.readonly(vt.type({uuid:vt.string,name:vt.string,email:vt.string,avatar:vt.string,signingKey:$A.JwkEcPubKey}),"Sender"),FX=vt.readonly(vt.intersection([vt.type({uuid:vt.string,formatVersion:vt.number,sender:ybA,createdAt:vt.string,expiresAt:vt.string,encOverview:$A.JweB},"type"),vt.partial({readAt:vt.string},"partial")]),"IncomingPackageOverviewV2"),$bA=vt.readonly(vt.intersection([FX,vt.type({encDetails:$A.JweB},"type")]),"IncomingPackageV2"),qX;(function(A){A[A.OneDay=86400]="OneDay",A[A.OneWeek=604800]="OneWeek",A[A.OneMonth=2678400]="OneMonth",A[A.TwoMonths=5356800]="TwoMonths"})(qX||(qX={}));var bX=vt.readonly(vt.type({packages:vt.readonlyArray(FX),totalCount:vt.number}),"PackageOverviews"),AGj=Zd(A=>({name:"sendPackageV2",method:"POST",url:"/api/v2/packages",body:A,responseType:J})),jGj=Zd(()=>({name:"getIncomingPackagesV2",method:"GET",url:"/api/v2/packages",responseType:bX})),eGj=Zd(A=>({name:"getMoreIncomingPackages",method:"GET",url:`/api/v2/packages${it(A)}`,responseType:bX})),tGj=Zd(A=>({name:"getIncomingPackageV2",method:"GET",url:`/api/v2/packages/${A}`,responseType:$bA})),yX=Zd(A=>({name:"markPackageAsRead",method:"PATCH",url:`/api/v2/packages/${A}/read`,responseType:J})),$X=Zd(A=>({name:"removePackageV2",method:"DELETE",url:`/api/v2/packages/${A}`,responseType:J}));var jc=W(aA());var rGj=AA("web-api/api/pending_invitations.ts"),aGj=jc.type({uuid:jc.string,email:jc.string,userType:jc.string,expiresAt:jc.string,status:jc.string}),wbA=jc.type({pendingInvitations:jc.array(aGj),totalCount:jc.number},"GetPendingInvitationResponse"),IbA=A=>{let j=new URLSearchParams;return Object.entries(A).forEach(([e,t])=>{j.append(e,t.toString())}),j.toString()},wX=rGj(A=>({name:"getPendingInvitation",method:"GET",url:`/api/v1/pending-invitations?${IbA(A)}`,responseType:wbA}));var Le=W(aA());var OX={};Yt(OX,{AppBuild:()=>IX,AppRelease:()=>Wc,AppReleases:()=>DX,Device:()=>cl});var c6=W(aA());var cl;(function(A){A.Type=c6.intersection([c6.type({uuid:c6.string,clientName:c6.string,clientVersion:c6.string}),c6.partial({name:c6.string,model:c6.string,osName:c6.string,osVersion:c6.string,userAgent:c6.string,lastAuthIP:c6.string,avatar:c6.string,locationCity:c6.string,locationCountry:c6.string,locationCountryCode:c6.string,state:c6.string,createdAt:c6.string,updatedAt:c6.string,lastAuthAt:c6.string,fromDeviceInit:c6.boolean})],"Device");let j=5184e6;A.isInactive=e=>{let t=Date.now()-j;return!!e.lastAuthAt&&Sy(e.lastAuthAt)<t},A.compareAuthDates=(e,t)=>Sy(t.lastAuthAt)-Sy(e.lastAuthAt)})(cl||(cl={}));var Rt=W(aA()),IX=Rt.readonly(Rt.type({version:Rt.string,url:Rt.union([Rt.string,Rt.undefined]),buildnum:Rt.number,bbn:Rt.union([Rt.string,Rt.undefined])},"AppBuild")),Wc=Rt.readonly(Rt.type({release:Rt.union([IX,Rt.undefined]),beta:Rt.union([IX,Rt.undefined])},"AppRelease")),DX=Rt.readonly(Rt.type({B:Rt.union([Wc,Rt.undefined]),CLI:Rt.union([Wc,Rt.undefined]),KNOX:Rt.union([Wc,Rt.undefined]),OPA4:Rt.union([Wc,Rt.undefined]),OPI4:Rt.union([Wc,Rt.undefined]),OPM4:Rt.union([Wc,Rt.undefined]),OPM7:Rt.union([Wc,Rt.undefined]),OPM8:Rt.union([Wc,Rt.undefined]),OPW4:Rt.union([Wc,Rt.undefined]),OPW8:Rt.union([Wc,Rt.undefined]),SCIM:Rt.union([Wc,Rt.undefined])},"AppReleases"));var dl=AA("web-api/api/person.ts"),QC=Le.intersection([Le.type({uuid:Le.string,email:Le.string,name:Le.string,state:Le.string,type:Le.string,attrVersion:Le.number,keysetVersion:Le.number},"type"),Le.partial({avatar:Le.string,language:Le.string,combinedPermissions:Le.number,newsletterPrefs:Le.number,preferences:Le.number,externalGUID:Le.string,createdAt:Le.string,updatedAt:Le.string,lastAuthAt:Le.string},"partial")],"BasePerson"),gB=Le.intersection([QC,Le.partial({hasMFAEnabled:Le.boolean,proposedEmail:Le.string,pubKey:$A.JwkRsaPubKey},"partial"),Le.type({personalItemsCount:Le.union([Le.number,Le.null]),keysets:Le.union([Le.readonlyArray($A.KeysetCiphertext),Le.null]),memberships:Le.union([Le.readonlyArray(sr.Type),Le.null]),vaultAccess:Le.union([Le.readonlyArray(Wd),Le.null]),devices:Le.union([Le.readonlyArray(cl.Type),Le.null])},"type")],"Person"),nGj=["pubkey","keysets","groups","vault-access","devices","personal-items-count","proposed-email-change"],PX=dl((A,j,e)=>{let t=Hu(j,nGj),r=it({states:"all",...e,attrs:t});return{name:"getUser",method:"GET",url:`/api/v2/user/${A}${r}`,responseType:gB,options:{timeout:6e4}}}),DbA=Le.readonly(Le.intersection([Le.type({uuid:Le.string,pubKey:$A.JwkRsaPubKey},"type"),Le.partial({spubKey:$A.JwkEcPubKey},"partial")]),"UserPubKey"),CX=dl(A=>({name:"getUserPubKeys",method:"GET",url:`/api/v2/user/pubkeys?uuids=${A.join(",")}`,responseType:Le.array(DbA)})),M$=dl(A=>({name:"changeUserName",method:"POST",url:"/api/v1/person/name",body:A,responseType:J})),_$=dl(A=>({name:"changeUserAvatar",method:"POST",url:"/api/v1/person/avatar",body:A,responseType:J})),oGj=Le.readonly(Le.intersection([Le.type({uuids:Le.readonlyArray(Le.string)},"type"),Le.partial({trustLogEntry:Le.string},"partial")])),HX=dl(A=>({name:"deleteUsers",method:"DELETE",url:"/api/v3/people",body:A,responseType:J})),TX=dl((A,j,e)=>({name:"confirmUsersWithMemberships",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:A,groupMemberships:j,trustLogEntry:e},responseType:J})),KX=dl((A,j,e)=>({name:"confirmUsersWithVaultAccessList",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:A,vaultaccess:j,trustLogEntry:e},responseType:J})),SX=dl((A,j,e,t)=>({name:"confirmUsersWithMembershipsAndVaultAccessList",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:A,groupMemberships:j,vaultaccess:e,trustLogEntry:t},responseType:J})),MX=dl(A=>({name:"suspendUsers",method:"PUT",url:`/api/v1/people/suspend/${A.join(",")}`,responseType:J})),_X=dl(A=>({name:"markAwayForTravel",method:"PUT",url:"/api/v1/people/enabletravel",body:{uuids:A},responseType:J})),LX=dl(A=>({name:"markBackFromTravel",method:"PUT",url:"/api/v1/people/disabletravel",body:{uuids:A},responseType:J})),NX=dl(A=>({name:"reactivateUsers",method:"PUT",url:`/api/v1/people/reactivate/${A.join(",")}`,responseType:J})),zX=dl(A=>({name:"updateUser",method:"POST",url:"/api/v1/user/attrs",body:A,responseType:J})),RX=dl((A,j,e)=>({name:"upgradeGuestToMember",method:"PUT",responseType:J,url:`/api/v3/user/upgrade-guest/${A}`,body:{vault:j,membership:e}}));var xt=W(aA());var Sn=W(aA());var JX=AA("web-api/api/policies/auto_lock.ts"),UX=Sn.readonly(Sn.type({enabled:GA(Sn.boolean,!1),lockAfterIdleTimeMin:GA(Sn.number,480)}),"AutoLockPolicyDefinition"),ObA=Sn.readonly(Sn.partial({uuid:Sn.string,firstName:Sn.string,lastName:Sn.string}),"AutoLockLastUpdatedByUser"),PbA=Sn.readonly(Sn.intersection([Sn.type({definition:UX}),Sn.partial({lastUpdated:Sn.string,lastUpdatedByUser:ObA})]),"AutoLockPolicyResponse"),XX=JX(()=>({name:"getAutoLockPolicyDefaultDefinition",method:"GET",url:`/api/v1/policies/${Ze.AdminExperience}/${Se.AutoLock}/definition`,responseType:UX})),VX=JX(()=>({name:"getAutoLockPolicy",method:"GET",url:`/api/v1/policies/${Ze.AdminExperience}/${Se.AutoLock}`,responseType:PbA})),WX=JX(A=>({name:"updateAutoLockPolicy",method:"POST",url:`/api/v1/policies/${Ze.AdminExperience}/${Se.AutoLock}`,body:{definition:A},responseType:J}));var ZC=W(aA());var CbA=AA("web-api/api/policies/sidebar_navigation.ts"),HbA=ZC.readonly(ZC.type({definition:dC}),"SidebarNavPolicy"),YX=CbA(()=>({name:"getSidebarNavPolicies",method:"GET",url:`/api/v1/policies/${Ze.AdminExperience}/${Se.SidebarNav}`,responseType:HbA})),QX=CbA(A=>({name:"updateSidebarNavPolicies",method:"POST",url:`/api/v1/policies/${Ze.AdminExperience}/${Se.SidebarNav}`,body:{definition:A},responseType:J}));var Ak=W(aA());var TbA=AA("web-api/api/policies/restrict_failed_login_attempts.ts"),AH=3,iGj=10,jH=10,KbA=Ak.readonly(Ak.type({enabled:GA(Ak.boolean,!1),allowedAttempts:GA(Ak.number,AH),lockoutPeriodMin:GA(Ak.number,jH)}),"RestrictFailedLoginAttemptsPolicyDefinition"),SbA=Ak.readonly(Ak.type({definition:KbA}),"RestrictFailedLoginAttemptsPolicyResponse"),ZX=TbA(()=>({name:"getRestrictFailedLoginAttemptsPolicy",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.RestrictFailedLoginAttempts}`,responseType:SbA})),AV=TbA(A=>({name:"updateRestrictFailedLoginAttemptsPolicy",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.RestrictFailedLoginAttempts}`,body:{definition:A},responseType:J}));var uo=W(aA());var MbA=AA("web-api/api/policies/allow_account_creation.ts"),_bA=uo.readonly(uo.type({enabled:GA(uo.boolean,!1)}),"AllowAccountCreationDefinition"),LbA=uo.readonly(uo.partial({uuid:uo.string,firstName:uo.string,lastName:uo.string}),"AllowAccountCreationLastUpdatedByUser"),NbA=uo.readonly(uo.intersection([uo.type({definition:_bA}),uo.partial({lastUpdated:uo.string,lastUpdatedByUser:LbA})]),"AllowAccountCreationResponse"),jV=MbA(()=>({name:"getAllowAccountCreationPolicy",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.AllowAccountCreation}`,responseType:NbA})),eV=MbA(A=>({name:"updateAllowAccountCreationPolicy",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.AllowAccountCreation}`,body:{definition:A},responseType:J}));var zbA=AA("web-api/api/policies/auto_delete_suspended_users.ts"),tV=zbA(()=>({name:"getAutoDeleteSuspendedUsersPolicies",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.AutoDeleteSuspendedUsers}`,responseType:ER})),rV=zbA(A=>({name:"updateAutoDeleteSuspendedUsersPolicies",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.AutoDeleteSuspendedUsers}`,body:{definition:A},responseType:J}));var hB=W(aA());var aV=AA("web-api/api/policies/release_channels.ts"),eH=200,nV=hB.readonly(hB.type({restrictTo:GA(hB.number,eH)}),"ReleaseChannelsPolicyDefinition"),RbA=hB.readonly(hB.type({definition:nV}),"ReleaseChannelsPolicyResponse"),oV=aV(()=>({name:"getReleaseChannelsPolicyDefaultDefinition",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ReleaseChannels}/definition`,responseType:nV})),iV=aV(()=>({name:"getReleaseChannelsPolicy",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ReleaseChannels}`,responseType:RbA})),sV=aV(A=>({name:"updateReleaseChannelsPolicy",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ReleaseChannels}`,body:{definition:A},responseType:J}));var qB=W(aA());var JbA=AA("web-api/api/policies/allow_maps.ts"),UbA=qB.readonly(qB.type({mapsEnabled:GA(qB.boolean,!1)}),"AllowMapsPolicyDefinition"),XbA=qB.readonly(qB.type({definition:UbA}),"AllowMapsPolicyResponse"),lV=JbA(()=>({name:"getAllowMapsPolicy",method:"GET",url:`/api/v2/policies/${Ze.IdentityPeopleAccounts}/${Se.AllowMaps}`,responseType:XbA})),cV=JbA(A=>({name:"updateAllowMapsPolicy",method:"POST",url:`/api/v2/policies/${Ze.IdentityPeopleAccounts}/${Se.AllowMaps}`,body:{definition:A},responseType:J}));var Lo=W(aA());var VbA=AA("web-api/api/policies/item_password.ts"),WbA=20,sGj=[],YbA=Lo.readonly(Lo.type({enabled:GA(Lo.boolean,!1),minimumCharacters:GA(Lo.number,WbA),includeSymbols:GA(Lo.boolean,!1),includeNumbers:GA(Lo.boolean,!1),includeUppercaseLetters:GA(Lo.boolean,!1),includeLowercaseLetters:GA(Lo.boolean,!1),excludedDomains:GA(Lo.array(Lo.string),sGj)}),"ItemPasswordPolicyDefinition"),QbA=Lo.readonly(Lo.type({definition:YbA}),"ItemPasswordPolicyResponse"),dV=VbA(()=>({name:"getItemPasswordPolicy",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ItemPassword}`,responseType:QbA})),kV=VbA(A=>({name:"updateItemPasswordPolicy",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ItemPassword}`,body:{definition:A},responseType:J}));var tG=W(aA());var uV=AA("web-api/api/policies/skip_extension_download.ts"),lGj=tG.readonly(tG.type({enabled:GA(tG.boolean,!0)}),"ExtensionAllowedPolicyDefinition"),cGj=uV(()=>({name:"getExtensionAllowedPolicy",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ExtensionAllowed}`,responseType:vB})),dGj=uV(A=>({name:"updateExtensionAllowedPolicy",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.ExtensionAllowed}`,body:{definition:A},responseType:J})),kGj=uV(()=>({name:"unauthenticatedGetExtensionAllowedPolicy",method:"GET",url:`/api/v1/policies/locked/${Ze.AdminExperience}/${Se.ExtensionAllowed}`,responseType:vB,encrypted:!1}));var xB=W(aA());var pV=AA("web-api/api/policies/app_launcher_allowed.ts"),uGj=xB.readonly(xB.type({appLauncherPolicyEnabled:GA(xB.boolean,!1),appCatalogUrl:GA(xB.string,"")}),"AppLauncherAllowedPolicyDefinition"),pGj=pV(()=>({name:"getAppLauncherAllowedPolicy",method:"GET",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.AppLauncherAllowed}`,responseType:vB})),mGj=pV(A=>({name:"updateAppLauncherAllowedPolicy",method:"POST",url:`/api/v2/policies/${Ze.AdminExperience}/${Se.AppLauncherAllowed}`,body:{definition:A},responseType:J})),EGj=pV(()=>({name:"unauthenticatedGetAppLauncherAllowedPolicy",method:"GET",url:`/api/v1/policies/locked/${Ze.AdminExperience}/${Se.AppLauncherAllowed}`,responseType:vB,encrypted:!1}));var Ar=W(aA());var rG=AA("web-api/api/policy_templates.ts"),ZbA=Ar.type({policyContext:Ar.string,policyName:Ar.string,definition:Ar.any,enforced:GA(Ar.boolean,!0)}),aG=Ar.type({name:Ar.string,templateUuid:Ar.string,createdAt:ij(Ar.string),updatedAt:ij(Ar.string),numChildAccounts:GA(Ar.number,0)}),A0A=Ar.type({page:Ar.number,itemsPerPage:Ar.number,totalItems:Ar.number,totalPages:Ar.number,sortBy:Ar.string,sort:Ar.string}),j0A=Ar.type({templates:Ar.array(aG),pagination:A0A}),e0A=Ar.type({uuid:Ar.string,name:Ar.string,state:m$(So,"ManagedAccountState"),domain:Ar.string,country:Ar.string,region:Ar.string,startedManagingDate:GA(Ar.string,"")}),t0A=Ar.type({name:Ar.string,templateUuid:Ar.string,childAccounts:Ar.array(e0A),pagination:Ar.type({page:Ar.number,itemsPerPage:Ar.number,totalItems:Ar.number,totalPages:Ar.number})}),BGj=rG(A=>{let j={page:A.currentPage??1,itemsPerPage:A.itemsPerPage??100,sortBy:void 0,sort:void 0};return{name:"getPolicyTemplates",method:"GET",url:`/api/v1/policy-templates${it(j)}`,responseType:j0A}}),r0A=Ar.type({template:aG,policies:Ar.array(ZbA)}),gGj=rG(A=>({name:"getPolicyTemplatePolicies",method:"GET",url:`/api/v1/policy-templates/${A}/policies`,responseType:r0A})),hGj=rG(A=>({name:"createPolicyTemplate",method:"POST",url:"/api/v1/policy-templates",body:{name:A},responseType:aG})),qGj=rG((A,j)=>({name:"updatePolicyTemplateName",method:"PUT",url:`/api/v1/policy-templates/${j}`,body:{name:A},responseType:aG})),vGj=rG(({policyTemplateUuid:A,policyContext:j,policyName:e,definition:t,enforced:r})=>({name:"updateTemplatePolicyDefinition",method:"PUT",url:`/api/v1/policy-templates/${A}/policies/${j}/${e}`,body:{definition:t,enforced:r},responseType:aG})),xGj=rG(A=>({name:"getPolicyTemplateChildAccounts",method:"GET",url:`/api/v1/policy-templates/${A}/child-accounts${it({page:1,itemsPerPage:100,sortBy:void 0,sort:void 0})}`,responseType:t0A}));var fB=W(aA());var a0A=AA("web-api/api/policies/developer/ssh_bookmarks.ts"),n0A=fB.readonly(fB.type({allowSshBookmarksSyncToDisk:GA(fB.boolean,!0)})),o0A=fB.readonly(fB.type({definition:n0A}),"SshBookmarksPolicyResponse"),mV=a0A(()=>({name:"getSshBookmarksPolicy",method:"GET",url:`/api/v2/policies/${Ze.Developer}/${Se.SshBookmarks}`,responseType:o0A})),EV=a0A(A=>({name:"updateSshBookmarksPolicy",method:"POST",url:`/api/v2/policies/${Ze.Developer}/${Se.SshBookmarks}`,body:{definition:A},responseType:J}));var tm=W(aA());var i0A=AA("web-api/api/policies/developer/cli_integration.ts"),s0A=tm.readonly(tm.type({enabled:GA(tm.boolean,!1),enableCliIntegration:GA(tm.boolean,!0)})),l0A=tm.readonly(tm.type({definition:s0A}),"CliIntegrationPolicyResponse"),BV=i0A(()=>({name:"getCliIntegrationPolicy",method:"GET",url:`/api/v2/policies/${Ze.Developer}/${Se.CliIntegration}`,responseType:l0A})),gV=i0A(A=>({name:"updateCliIntegrationPolicy",method:"POST",url:`/api/v2/policies/${Ze.Developer}/${Se.CliIntegration}`,body:{definition:A},responseType:J}));var Yc=W(aA());var c0A=AA("web-api/api/policies/insights/reporting.ts"),d0A=Yc.readonly(Yc.type({allowedEmailDomains:GA(Yc.array(Yc.string),[]),appDiscoveryEnabled:GA(Yc.boolean,!1)}),"ReportingPolicyDefinition"),k0A=Yc.readonly(Yc.type({definition:d0A}),"ReportingPolicyResponse"),fGj=c0A(()=>({name:"getReportingPolicy",method:"GET",url:`/api/v2/policies/${Ze.Insights}/${Se.Reporting}`,responseType:k0A})),GGj=c0A(A=>({name:"updateReportingPolicy",method:"POST",url:`/api/v2/policies/${Ze.Insights}/${Se.Reporting}`,body:{definition:A},responseType:J}));var Ze;(function(A){A.AdminExperience="admin-exp",A.IdentityPeopleAccounts="identity-people-and-accounts",A.Developer="developer",A.Insights="insights"})(Ze||(Ze={}));var Se;(function(A){A.AllowAccountCreation="allow-account-creation",A.AutoLock="auto-lock",A.SidebarNav="sidebar-nav",A.RestrictFailedLoginAttempts="restrict-failed-login-attempts",A.AutoDeleteSuspendedUsers="auto-delete-suspended-users",A.ReleaseChannels="release-channels",A.ItemPassword="item-password",A.ExtensionAllowed="extension-allowed",A.AppLauncherAllowed="app-launcher-allowed",A.AllowMaps="allow-maps",A.SshBookmarks="ssh-bookmarks",A.CliIntegration="cli-integration",A.Reporting="reporting"})(Se||(Se={}));var hV={[Se.AllowAccountCreation]:Ze.AdminExperience,[Se.AutoLock]:Ze.AdminExperience,[Se.SidebarNav]:Ze.AdminExperience,[Se.RestrictFailedLoginAttempts]:Ze.AdminExperience,[Se.AutoDeleteSuspendedUsers]:Ze.AdminExperience,[Se.ReleaseChannels]:Ze.AdminExperience,[Se.ItemPassword]:Ze.AdminExperience,[Se.ExtensionAllowed]:Ze.AdminExperience,[Se.AppLauncherAllowed]:Ze.AdminExperience,[Se.AllowMaps]:Ze.IdentityPeopleAccounts,[Se.SshBookmarks]:Ze.Developer,[Se.CliIntegration]:Ze.Developer,[Se.Reporting]:Ze.Insights},u0A=AA("web-api/api/policies/index.ts"),vB=xt.readonly(xt.type({uuid:xt.union([xt.string,xt.undefined]),policyContext:xt.string,policyName:xt.string,definition:xt.any,lastUpdated:xt.union([xt.string,xt.undefined]),lastUpdatedByUser:xt.union([xt.readonly(xt.type({uuid:xt.string,firstName:xt.string,lastName:xt.string})),xt.undefined]),version:xt.number}),"GenericAccountPolicyResponse"),p0A=xt.readonly(xt.type({policies:xt.readonlyArray(vB),version:xt.number}),"AllPoliciesResponse"),qV=u0A(()=>({name:"getAllPoliciesForCurrentAccount",method:"GET",url:"/api/v1/policies/all",responseType:p0A})),m0A=xt.type({context:xt.string,createdAt:xt.string,disabled:xt.boolean,id:xt.number,name:xt.string,updatedAt:xt.string,uuid:xt.string}),E0A=xt.type({pagination:xt.type({itemsPerPage:xt.number,page:xt.number,sort:xt.string,sortBy:xt.string,totalItems:xt.number,totalPages:xt.number}),policies:xt.array(m0A)}),vV=u0A(({availableInTemplates:A})=>({name:"getPolicyList",method:"GET",url:`/api/v1/policies${it({availableInTemplates:A})}`,responseType:E0A}));var qj=W(aA());var bGj=Object.create,G0A=Object.defineProperty,yGj=Object.getOwnPropertyDescriptor,F0A=Object.getOwnPropertyNames,$Gj=Object.getPrototypeOf,wGj=Object.prototype.hasOwnProperty,mo=(A,j)=>function(){return j||(0,A[F0A(A)[0]])((j={exports:{}}).exports,j),j.exports},IGj=(A,j,e,t)=>{if(j&&typeof j=="object"||typeof j=="function")for(let r of F0A(j))!wGj.call(A,r)&&r!==e&&G0A(A,r,{get:()=>j[r],enumerable:!(t=yGj(j,r))||t.enumerable});return A},bV=(A,j,e)=>(e=A!=null?bGj($Gj(A)):{},IGj(j||!A||!A.__esModule?G0A(e,"default",{value:A,enumerable:!0}):e,A)),Jh=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/function.js"(A){"use strict";var j=A&&A.__spreadArray||function(h,O,V){if(V||arguments.length===2)for(var Y=0,rA=O.length,yA;Y<rA;Y++)(yA||!(Y in O))&&(yA||(yA=Array.prototype.slice.call(O,0,Y)),yA[Y]=O[Y]);return h.concat(yA||Array.prototype.slice.call(O))};Object.defineProperty(A,"__esModule",{value:!0}),A.dual=A.getEndomorphismMonoid=A.SK=A.hole=A.constVoid=A.constUndefined=A.constNull=A.constFalse=A.constTrue=A.unsafeCoerce=A.apply=A.getRing=A.getSemiring=A.getMonoid=A.getSemigroup=A.getBooleanAlgebra=void 0,A.identity=i,A.constant=s,A.flip=l,A.flow=d,A.tuple=k,A.increment=u,A.decrement=m,A.absurd=I,A.tupled=S,A.untupled=f,A.pipe=v,A.not=D;var e=function(h){return function(){return{meet:function(O,V){return function(Y){return h.meet(O(Y),V(Y))}},join:function(O,V){return function(Y){return h.join(O(Y),V(Y))}},zero:function(){return h.zero},one:function(){return h.one},implies:function(O,V){return function(Y){return h.implies(O(Y),V(Y))}},not:function(O){return function(V){return h.not(O(V))}}}}};A.getBooleanAlgebra=e;var t=function(h){return function(){return{concat:function(O,V){return function(Y){return h.concat(O(Y),V(Y))}}}}};A.getSemigroup=t;var r=function(h){var O=(0,A.getSemigroup)(h);return function(){return{concat:O().concat,empty:function(){return h.empty}}}};A.getMonoid=r;var a=function(h){return{add:function(O,V){return function(Y){return h.add(O(Y),V(Y))}},zero:function(){return h.zero},mul:function(O,V){return function(Y){return h.mul(O(Y),V(Y))}},one:function(){return h.one}}};A.getSemiring=a;var n=function(h){var O=(0,A.getSemiring)(h);return{add:O.add,mul:O.mul,one:O.one,zero:O.zero,sub:function(V,Y){return function(rA){return h.sub(V(rA),Y(rA))}}}};A.getRing=n;var o=function(h){return function(O){return O(h)}};A.apply=o;function i(h){return h}A.unsafeCoerce=i;function s(h){return function(){return h}}A.constTrue=s(!0),A.constFalse=s(!1),A.constNull=s(null),A.constUndefined=s(void 0),A.constVoid=A.constUndefined;function l(h){return function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];return O.length>1?h(O[1],O[0]):function(Y){return h(Y)(O[0])}}}function d(h,O,V,Y,rA,yA,VA,dj,bA){switch(arguments.length){case 1:return h;case 2:return function(){return O(h.apply(this,arguments))};case 3:return function(){return V(O(h.apply(this,arguments)))};case 4:return function(){return Y(V(O(h.apply(this,arguments))))};case 5:return function(){return rA(Y(V(O(h.apply(this,arguments)))))};case 6:return function(){return yA(rA(Y(V(O(h.apply(this,arguments))))))};case 7:return function(){return VA(yA(rA(Y(V(O(h.apply(this,arguments)))))))};case 8:return function(){return dj(VA(yA(rA(Y(V(O(h.apply(this,arguments))))))))};case 9:return function(){return bA(dj(VA(yA(rA(Y(V(O(h.apply(this,arguments)))))))))}}}function k(){for(var h=[],O=0;O<arguments.length;O++)h[O]=arguments[O];return h}function u(h){return h+1}function m(h){return h-1}function I(h){throw new Error("Called `absurd` function which should be uncallable")}function S(h){return function(O){return h.apply(void 0,O)}}function f(h){return function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];return h(O)}}function v(h,O,V,Y,rA,yA,VA,dj,bA){switch(arguments.length){case 1:return h;case 2:return O(h);case 3:return V(O(h));case 4:return Y(V(O(h)));case 5:return rA(Y(V(O(h))));case 6:return yA(rA(Y(V(O(h)))));case 7:return VA(yA(rA(Y(V(O(h))))));case 8:return dj(VA(yA(rA(Y(V(O(h)))))));case 9:return bA(dj(VA(yA(rA(Y(V(O(h))))))));default:{for(var Mj=arguments[0],mj=1;mj<arguments.length;mj++)Mj=arguments[mj](Mj);return Mj}}}A.hole=I;var P=function(h,O){return O};A.SK=P;function D(h){return function(O){return!h(O)}}var C=function(){return{concat:function(h,O){return d(h,O)},empty:i}};A.getEndomorphismMonoid=C;var b=function(h,O){var V=typeof h=="number"?function(Y){return Y.length>=h}:h;return function(){var Y=Array.from(arguments);return V(arguments)?O.apply(this,Y):function(rA){return O.apply(void 0,j([rA],Y,!1))}}};A.dual=b}}),oH=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/internal.js"(A){"use strict";var j=A&&A.__spreadArray||function(h,O,V){if(V||arguments.length===2)for(var Y=0,rA=O.length,yA;Y<rA;Y++)(yA||!(Y in O))&&(yA||(yA=Array.prototype.slice.call(O,0,Y)),yA[Y]=O[Y]);return h.concat(yA||Array.prototype.slice.call(O))};Object.defineProperty(A,"__esModule",{value:!0}),A.flatMapReader=A.flatMapTask=A.flatMapIO=A.flatMapEither=A.flatMapOption=A.flatMapNullable=A.liftOption=A.liftNullable=A.fromReadonlyNonEmptyArray=A.has=A.emptyRecord=A.emptyReadonlyArray=A.tail=A.head=A.isNonEmpty=A.singleton=A.right=A.left=A.isRight=A.isLeft=A.some=A.none=A.isSome=A.isNone=void 0;var e=Jh(),t=function(h){return h._tag==="None"};A.isNone=t;var r=function(h){return h._tag==="Some"};A.isSome=r,A.none={_tag:"None"};var a=function(h){return{_tag:"Some",value:h}};A.some=a;var n=function(h){return h._tag==="Left"};A.isLeft=n;var o=function(h){return h._tag==="Right"};A.isRight=o;var i=function(h){return{_tag:"Left",left:h}};A.left=i;var s=function(h){return{_tag:"Right",right:h}};A.right=s;var l=function(h){return[h]};A.singleton=l;var d=function(h){return h.length>0};A.isNonEmpty=d;var k=function(h){return h[0]};A.head=k;var u=function(h){return h.slice(1)};A.tail=u,A.emptyReadonlyArray=[],A.emptyRecord={},A.has=Object.prototype.hasOwnProperty;var m=function(h){return j([h[0]],h.slice(1),!0)};A.fromReadonlyNonEmptyArray=m;var I=function(h){return function(O,V){return function(){for(var Y=[],rA=0;rA<arguments.length;rA++)Y[rA]=arguments[rA];var yA=O.apply(void 0,Y);return h.fromEither(yA==null?(0,A.left)(V.apply(void 0,Y)):(0,A.right)(yA))}}};A.liftNullable=I;var S=function(h){return function(O,V){return function(){for(var Y=[],rA=0;rA<arguments.length;rA++)Y[rA]=arguments[rA];var yA=O.apply(void 0,Y);return h.fromEither((0,A.isNone)(yA)?(0,A.left)(V.apply(void 0,Y)):(0,A.right)(yA.value))}}};A.liftOption=S;var f=function(h,O){return(0,e.dual)(3,function(V,Y,rA){return O.flatMap(V,(0,A.liftNullable)(h)(Y,rA))})};A.flatMapNullable=f;var v=function(h,O){return(0,e.dual)(3,function(V,Y,rA){return O.flatMap(V,(0,A.liftOption)(h)(Y,rA))})};A.flatMapOption=v;var P=function(h,O){return(0,e.dual)(2,function(V,Y){return O.flatMap(V,function(rA){return h.fromEither(Y(rA))})})};A.flatMapEither=P;var D=function(h,O){return(0,e.dual)(2,function(V,Y){return O.flatMap(V,function(rA){return h.fromIO(Y(rA))})})};A.flatMapIO=D;var C=function(h,O){return(0,e.dual)(2,function(V,Y){return O.flatMap(V,function(rA){return h.fromTask(Y(rA))})})};A.flatMapTask=C;var b=function(h,O){return(0,e.dual)(2,function(V,Y){return O.flatMap(V,function(rA){return h.fromReader(Y(rA))})})};A.flatMapReader=b}}),b0A=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Apply.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(f,v,P,D){D===void 0&&(D=P);var C=Object.getOwnPropertyDescriptor(v,P);(!C||("get"in C?!v.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return v[P]}}),Object.defineProperty(f,D,C)}:function(f,v,P,D){D===void 0&&(D=P),f[D]=v[P]}),e=A&&A.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),t=A&&A.__importStar||function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var P in f)P!=="default"&&Object.prototype.hasOwnProperty.call(f,P)&&j(v,f,P);return e(v,f),v};Object.defineProperty(A,"__esModule",{value:!0}),A.ap=n,A.apFirst=o,A.apSecond=i,A.apS=s,A.getApplySemigroup=l,A.sequenceT=m,A.sequenceS=S;var r=Jh(),a=t(oH());function n(f,v){return function(P){return function(D){return f.ap(f.map(D,function(C){return function(b){return v.ap(C,b)}}),P)}}}function o(f){return function(v){return function(P){return f.ap(f.map(P,function(D){return function(){return D}}),v)}}}function i(f){return function(v){return function(P){return f.ap(f.map(P,function(){return function(D){return D}}),v)}}}function s(f){return function(v,P){return function(D){return f.ap(f.map(D,function(C){return function(b){var h;return Object.assign({},C,(h={},h[v]=b,h))}}),P)}}}function l(f){return function(v){return{concat:function(P,D){return f.ap(f.map(P,function(C){return function(b){return v.concat(C,b)}}),D)}}}}function d(f,v,P){return function(D){for(var C=Array(P.length+1),b=0;b<P.length;b++)C[b]=P[b];return C[P.length]=D,v===0?f.apply(null,C):d(f,v-1,C)}}var k={1:function(f){return[f]},2:function(f){return function(v){return[f,v]}},3:function(f){return function(v){return function(P){return[f,v,P]}}},4:function(f){return function(v){return function(P){return function(D){return[f,v,P,D]}}}},5:function(f){return function(v){return function(P){return function(D){return function(C){return[f,v,P,D,C]}}}}}};function u(f){return a.has.call(k,f)||(k[f]=d(r.tuple,f-1,[])),k[f]}function m(f){return function(){for(var v=[],P=0;P<arguments.length;P++)v[P]=arguments[P];for(var D=v.length,C=u(D),b=f.map(v[0],C),h=1;h<D;h++)b=f.ap(b,v[h]);return b}}function I(f){var v=f.length;switch(v){case 1:return function(P){var D;return D={},D[f[0]]=P,D};case 2:return function(P){return function(D){var C;return C={},C[f[0]]=P,C[f[1]]=D,C}};case 3:return function(P){return function(D){return function(C){var b;return b={},b[f[0]]=P,b[f[1]]=D,b[f[2]]=C,b}}};case 4:return function(P){return function(D){return function(C){return function(b){var h;return h={},h[f[0]]=P,h[f[1]]=D,h[f[2]]=C,h[f[3]]=b,h}}}};case 5:return function(P){return function(D){return function(C){return function(b){return function(h){var O;return O={},O[f[0]]=P,O[f[1]]=D,O[f[2]]=C,O[f[3]]=b,O[f[4]]=h,O}}}}};default:return d(function(){for(var P=[],D=0;D<arguments.length;D++)P[D]=arguments[D];for(var C={},b=0;b<v;b++)C[f[b]]=P[b];return C},v-1,[])}}function S(f){return function(v){for(var P=Object.keys(v),D=P.length,C=I(P),b=f.map(v[P[0]],C),h=1;h<D;h++)b=f.ap(b,v[P[h]]);return b}}}}),yV=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Functor.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.map=e,A.flap=t,A.bindTo=r,A.let=a,A.getFunctorComposition=n,A.as=o,A.asUnit=i;var j=Jh();function e(s,l){return function(d){return function(k){return s.map(k,function(u){return l.map(u,d)})}}}function t(s){return function(l){return function(d){return s.map(d,function(k){return k(l)})}}}function r(s){return function(l){return function(d){return s.map(d,function(k){var u;return u={},u[l]=k,u})}}}function a(s){return function(l,d){return function(k){return s.map(k,function(u){var m;return Object.assign({},u,(m={},m[l]=d(u),m))})}}}function n(s,l){var d=e(s,l);return{map:function(k,u){return(0,j.pipe)(k,d(u))}}}function o(s){return function(l,d){return s.map(l,function(){return d})}}function i(s){var l=o(s);return function(d){return l(d,void 0)}}}}),DGj=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Applicative.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getApplicativeMonoid=r,A.getApplicativeComposition=a;var j=b0A(),e=Jh(),t=yV();function r(n){var o=(0,j.getApplySemigroup)(n);return function(i){return{concat:o(i).concat,empty:n.of(i.empty)}}}function a(n,o){var i=(0,t.getFunctorComposition)(n,o).map,s=(0,j.ap)(n,o);return{map:i,of:function(l){return n.of(o.of(l))},ap:function(l,d){return(0,e.pipe)(l,s(d))}}}}}),y0A=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Chain.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.chainFirst=j,A.tap=e,A.bind=t;function j(r){var a=e(r);return function(n){return function(o){return a(o,n)}}}function e(r){return function(a,n){return r.chain(a,function(o){return r.map(n(o),function(){return o})})}}function t(r){return function(a,n){return function(o){return r.chain(o,function(i){return r.map(n(i),function(s){var l;return Object.assign({},i,(l={},l[a]=s,l))})})}}}}}),OGj=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/ChainRec.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tailRec=void 0;var j=function(e,t){for(var r=t(e);r._tag==="Left";)r=t(r.left);return r.right};A.tailRec=j}}),PGj=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/FromEither.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(S,f,v,P){P===void 0&&(P=v);var D=Object.getOwnPropertyDescriptor(f,v);(!D||("get"in D?!f.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return f[v]}}),Object.defineProperty(S,P,D)}:function(S,f,v,P){P===void 0&&(P=v),S[P]=f[v]}),e=A&&A.__setModuleDefault||(Object.create?function(S,f){Object.defineProperty(S,"default",{enumerable:!0,value:f})}:function(S,f){S.default=f}),t=A&&A.__importStar||function(S){if(S&&S.__esModule)return S;var f={};if(S!=null)for(var v in S)v!=="default"&&Object.prototype.hasOwnProperty.call(S,v)&&j(f,S,v);return e(f,S),f};Object.defineProperty(A,"__esModule",{value:!0}),A.fromOption=o,A.fromPredicate=i,A.fromOptionK=s,A.chainOptionK=l,A.fromEitherK=d,A.chainEitherK=k,A.chainFirstEitherK=u,A.filterOrElse=m,A.tapEither=I;var r=y0A(),a=Jh(),n=t(oH());function o(S){return function(f){return function(v){return S.fromEither(n.isNone(v)?n.left(f()):n.right(v.value))}}}function i(S){return function(f,v){return function(P){return S.fromEither(f(P)?n.right(P):n.left(v(P)))}}}function s(S){var f=o(S);return function(v){var P=f(v);return function(D){return(0,a.flow)(D,P)}}}function l(S,f){var v=s(S);return function(P){var D=v(P);return function(C){return function(b){return f.chain(b,D(C))}}}}function d(S){return function(f){return(0,a.flow)(f,S.fromEither)}}function k(S,f){var v=d(S);return function(P){return function(D){return f.chain(D,v(P))}}}function u(S,f){var v=I(S,f);return function(P){return function(D){return v(D,P)}}}function m(S,f){return function(v,P){return function(D){return f.chain(D,function(C){return S.fromEither(v(C)?n.right(C):n.left(P(C)))})}}}function I(S,f){var v=d(S),P=(0,r.tap)(f);return function(D,C){return P(D,v(C))}}}}),CGj=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Separated.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.right=A.left=A.flap=A.Functor=A.Bifunctor=A.URI=A.bimap=A.mapLeft=A.map=A.separated=void 0;var j=Jh(),e=yV(),t=function(k,u){return{left:k,right:u}};A.separated=t;var r=function(k,u){return(0,j.pipe)(k,(0,A.map)(u))},a=function(k,u){return(0,j.pipe)(k,(0,A.mapLeft)(u))},n=function(k,u,m){return(0,j.pipe)(k,(0,A.bimap)(u,m))},o=function(k){return function(u){return(0,A.separated)((0,A.left)(u),k((0,A.right)(u)))}};A.map=o;var i=function(k){return function(u){return(0,A.separated)(k((0,A.left)(u)),(0,A.right)(u))}};A.mapLeft=i;var s=function(k,u){return function(m){return(0,A.separated)(k((0,A.left)(m)),u((0,A.right)(m)))}};A.bimap=s,A.URI="Separated",A.Bifunctor={URI:A.URI,mapLeft:a,bimap:n},A.Functor={URI:A.URI,map:r},A.flap=(0,e.flap)(A.Functor);var l=function(k){return k.left};A.left=l;var d=function(k){return k.right};A.right=d}}),HGj=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Witherable.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(i,s,l,d){d===void 0&&(d=l);var k=Object.getOwnPropertyDescriptor(s,l);(!k||("get"in k?!s.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(i,d,k)}:function(i,s,l,d){d===void 0&&(d=l),i[d]=s[l]}),e=A&&A.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),t=A&&A.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var l in i)l!=="default"&&Object.prototype.hasOwnProperty.call(i,l)&&j(s,i,l);return e(s,i),s};Object.defineProperty(A,"__esModule",{value:!0}),A.wiltDefault=a,A.witherDefault=n,A.filterE=o;var r=t(oH());function a(i,s){return function(l){var d=i.traverse(l);return function(k,u){return l.map(d(k,u),s.separate)}}}function n(i,s){return function(l){var d=i.traverse(l);return function(k,u){return l.map(d(k,u),s.compact)}}}function o(i){return function(s){var l=i.wither(s);return function(d){return function(k){return l(k,function(u){return s.map(d(u),function(m){return m?r.some(u):r.none})})}}}}}}),$V=mo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Either.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(lA,eA,FA,Jj){Jj===void 0&&(Jj=FA);var Er=Object.getOwnPropertyDescriptor(eA,FA);(!Er||("get"in Er?!eA.__esModule:Er.writable||Er.configurable))&&(Er={enumerable:!0,get:function(){return eA[FA]}}),Object.defineProperty(lA,Jj,Er)}:function(lA,eA,FA,Jj){Jj===void 0&&(Jj=FA),lA[Jj]=eA[FA]}),e=A&&A.__setModuleDefault||(Object.create?function(lA,eA){Object.defineProperty(lA,"default",{enumerable:!0,value:eA})}:function(lA,eA){lA.default=eA}),t=A&&A.__importStar||function(lA){if(lA&&lA.__esModule)return lA;var eA={};if(lA!=null)for(var FA in lA)FA!=="default"&&Object.prototype.hasOwnProperty.call(lA,FA)&&j(eA,lA,FA);return e(eA,lA),eA};Object.defineProperty(A,"__esModule",{value:!0}),A.match=A.foldW=A.matchW=A.isRight=A.isLeft=A.fromOption=A.fromPredicate=A.FromEither=A.MonadThrow=A.throwError=A.ChainRec=A.Extend=A.extend=A.Alt=A.alt=A.altW=A.Bifunctor=A.mapLeft=A.bimap=A.Traversable=A.sequence=A.traverse=A.Foldable=A.reduceRight=A.foldMap=A.reduce=A.Monad=A.Chain=A.Applicative=A.Apply=A.ap=A.apW=A.Pointed=A.of=A.asUnit=A.as=A.Functor=A.map=A.getAltValidation=A.getApplicativeValidation=A.getWitherable=A.getFilterable=A.getCompactable=A.getSemigroup=A.getEq=A.getShow=A.URI=A.flatMap=A.right=A.left=void 0,A.either=A.stringifyJSON=A.chainFirstW=A.chainFirst=A.chain=A.chainW=A.sequenceArray=A.traverseArray=A.traverseArrayWithIndex=A.traverseReadonlyArrayWithIndex=A.traverseReadonlyNonEmptyArrayWithIndex=A.ApT=A.apSW=A.apS=A.bindW=A.bind=A.let=A.bindTo=A.Do=A.exists=A.toUnion=A.chainNullableK=A.fromNullableK=A.tryCatchK=A.tryCatch=A.fromNullable=A.orElse=A.orElseW=A.swap=A.filterOrElseW=A.filterOrElse=A.flatMapOption=A.flatMapNullable=A.liftOption=A.liftNullable=A.chainOptionKW=A.chainOptionK=A.fromOptionK=A.duplicate=A.flatten=A.flattenW=A.tap=A.apSecondW=A.apSecond=A.apFirstW=A.apFirst=A.flap=A.getOrElse=A.getOrElseW=A.fold=void 0,A.getValidationMonoid=A.getValidationSemigroup=A.getApplyMonoid=A.getApplySemigroup=void 0,A.toError=at,A.elem=st,A.parseJSON=KA,A.getValidation=uj;var r=DGj(),a=b0A(),n=t(y0A()),o=OGj(),i=PGj(),s=Jh(),l=yV(),d=t(oH()),k=CGj(),u=HGj();A.left=d.left,A.right=d.right,A.flatMap=(0,s.dual)(2,function(lA,eA){return(0,A.isLeft)(lA)?lA:eA(lA.right)});var m=function(lA,eA){return(0,s.pipe)(lA,(0,A.map)(eA))},I=function(lA,eA){return(0,s.pipe)(lA,(0,A.ap)(eA))},S=function(lA,eA,FA){return(0,s.pipe)(lA,(0,A.reduce)(eA,FA))},f=function(lA){return function(eA,FA){var Jj=(0,A.foldMap)(lA);return(0,s.pipe)(eA,Jj(FA))}},v=function(lA,eA,FA){return(0,s.pipe)(lA,(0,A.reduceRight)(eA,FA))},P=function(lA){var eA=(0,A.traverse)(lA);return function(FA,Jj){return(0,s.pipe)(FA,eA(Jj))}},D=function(lA,eA,FA){return(0,s.pipe)(lA,(0,A.bimap)(eA,FA))},C=function(lA,eA){return(0,s.pipe)(lA,(0,A.mapLeft)(eA))},b=function(lA,eA){return(0,s.pipe)(lA,(0,A.alt)(eA))},h=function(lA,eA){return(0,s.pipe)(lA,(0,A.extend)(eA))},O=function(lA,eA){return(0,o.tailRec)(eA(lA),function(FA){return(0,A.isLeft)(FA)?(0,A.right)((0,A.left)(FA.left)):(0,A.isLeft)(FA.right)?(0,A.left)(eA(FA.right.left)):(0,A.right)((0,A.right)(FA.right.right))})};A.URI="Either";var V=function(lA,eA){return{show:function(FA){return(0,A.isLeft)(FA)?"left(".concat(lA.show(FA.left),")"):"right(".concat(eA.show(FA.right),")")}}};A.getShow=V;var Y=function(lA,eA){return{equals:function(FA,Jj){return FA===Jj||((0,A.isLeft)(FA)?(0,A.isLeft)(Jj)&&lA.equals(FA.left,Jj.left):(0,A.isRight)(Jj)&&eA.equals(FA.right,Jj.right))}}};A.getEq=Y;var rA=function(lA){return{concat:function(eA,FA){return(0,A.isLeft)(FA)?eA:(0,A.isLeft)(eA)?FA:(0,A.right)(lA.concat(eA.right,FA.right))}}};A.getSemigroup=rA;var yA=function(lA){var eA=(0,A.left)(lA.empty);return{URI:A.URI,_E:void 0,compact:function(FA){return(0,A.isLeft)(FA)?FA:FA.right._tag==="None"?eA:(0,A.right)(FA.right.value)},separate:function(FA){return(0,A.isLeft)(FA)?(0,k.separated)(FA,FA):(0,A.isLeft)(FA.right)?(0,k.separated)((0,A.right)(FA.right.left),eA):(0,k.separated)(eA,(0,A.right)(FA.right.right))}}};A.getCompactable=yA;var VA=function(lA){var eA=(0,A.left)(lA.empty),FA=(0,A.getCompactable)(lA),Jj=FA.compact,Er=FA.separate,cn=function(Zr,$n){return(0,A.isLeft)(Zr)||$n(Zr.right)?Zr:eA},Zo=function(Zr,$n){return(0,A.isLeft)(Zr)?(0,k.separated)(Zr,Zr):$n(Zr.right)?(0,k.separated)(eA,(0,A.right)(Zr.right)):(0,k.separated)((0,A.right)(Zr.right),eA)};return{URI:A.URI,_E:void 0,map:m,compact:Jj,separate:Er,filter:cn,filterMap:function(Zr,$n){if((0,A.isLeft)(Zr))return Zr;var wn=$n(Zr.right);return wn._tag==="None"?eA:(0,A.right)(wn.value)},partition:Zo,partitionMap:function(Zr,$n){if((0,A.isLeft)(Zr))return(0,k.separated)(Zr,Zr);var wn=$n(Zr.right);return(0,A.isLeft)(wn)?(0,k.separated)((0,A.right)(wn.left),eA):(0,k.separated)(eA,(0,A.right)(wn.right))}}};A.getFilterable=VA;var dj=function(lA){var eA=(0,A.getFilterable)(lA),FA=(0,A.getCompactable)(lA);return{URI:A.URI,_E:void 0,map:m,compact:eA.compact,separate:eA.separate,filter:eA.filter,filterMap:eA.filterMap,partition:eA.partition,partitionMap:eA.partitionMap,traverse:P,sequence:A.sequence,reduce:S,foldMap:f,reduceRight:v,wither:(0,u.witherDefault)(A.Traversable,FA),wilt:(0,u.wiltDefault)(A.Traversable,FA)}};A.getWitherable=dj;var bA=function(lA){return{URI:A.URI,_E:void 0,map:m,ap:function(eA,FA){return(0,A.isLeft)(eA)?(0,A.isLeft)(FA)?(0,A.left)(lA.concat(eA.left,FA.left)):eA:(0,A.isLeft)(FA)?FA:(0,A.right)(eA.right(FA.right))},of:A.of}};A.getApplicativeValidation=bA;var Mj=function(lA){return{URI:A.URI,_E:void 0,map:m,alt:function(eA,FA){if((0,A.isRight)(eA))return eA;var Jj=FA();return(0,A.isLeft)(Jj)?(0,A.left)(lA.concat(eA.left,Jj.left)):Jj}}};A.getAltValidation=Mj;var mj=function(lA){return function(eA){return(0,A.isLeft)(eA)?eA:(0,A.right)(lA(eA.right))}};A.map=mj,A.Functor={URI:A.URI,map:m},A.as=(0,s.dual)(2,(0,l.as)(A.Functor)),A.asUnit=(0,l.asUnit)(A.Functor),A.of=A.right,A.Pointed={URI:A.URI,of:A.of};var ae=function(lA){return function(eA){return(0,A.isLeft)(eA)?eA:(0,A.isLeft)(lA)?lA:(0,A.right)(eA.right(lA.right))}};A.apW=ae,A.ap=A.apW,A.Apply={URI:A.URI,map:m,ap:I},A.Applicative={URI:A.URI,map:m,ap:I,of:A.of},A.Chain={URI:A.URI,map:m,ap:I,chain:A.flatMap},A.Monad={URI:A.URI,map:m,ap:I,of:A.of,chain:A.flatMap};var _j=function(lA,eA){return function(FA){return(0,A.isLeft)(FA)?lA:eA(lA,FA.right)}};A.reduce=_j;var cj=function(lA){return function(eA){return function(FA){return(0,A.isLeft)(FA)?lA.empty:eA(FA.right)}}};A.foldMap=cj;var Qj=function(lA,eA){return function(FA){return(0,A.isLeft)(FA)?lA:eA(FA.right,lA)}};A.reduceRight=Qj,A.Foldable={URI:A.URI,reduce:S,foldMap:f,reduceRight:v};var Cj=function(lA){return function(eA){return function(FA){return(0,A.isLeft)(FA)?lA.of((0,A.left)(FA.left)):lA.map(eA(FA.right),A.right)}}};A.traverse=Cj;var kj=function(lA){return function(eA){return(0,A.isLeft)(eA)?lA.of((0,A.left)(eA.left)):lA.map(eA.right,A.right)}};A.sequence=kj,A.Traversable={URI:A.URI,map:m,reduce:S,foldMap:f,reduceRight:v,traverse:P,sequence:A.sequence};var Bj=function(lA,eA){return function(FA){return(0,A.isLeft)(FA)?(0,A.left)(lA(FA.left)):(0,A.right)(eA(FA.right))}};A.bimap=Bj;var De=function(lA){return function(eA){return(0,A.isLeft)(eA)?(0,A.left)(lA(eA.left)):eA}};A.mapLeft=De,A.Bifunctor={URI:A.URI,bimap:D,mapLeft:C};var wt=function(lA){return function(eA){return(0,A.isLeft)(eA)?lA():eA}};A.altW=wt,A.alt=A.altW,A.Alt={URI:A.URI,map:m,alt:b};var wj=function(lA){return function(eA){return(0,A.isLeft)(eA)?eA:(0,A.right)(lA(eA))}};A.extend=wj,A.Extend={URI:A.URI,map:m,extend:h},A.ChainRec={URI:A.URI,map:m,ap:I,chain:A.flatMap,chainRec:O},A.throwError=A.left,A.MonadThrow={URI:A.URI,map:m,ap:I,of:A.of,chain:A.flatMap,throwError:A.throwError},A.FromEither={URI:A.URI,fromEither:s.identity},A.fromPredicate=(0,i.fromPredicate)(A.FromEither),A.fromOption=(0,i.fromOption)(A.FromEither),A.isLeft=d.isLeft,A.isRight=d.isRight;var Bt=function(lA,eA){return function(FA){return(0,A.isLeft)(FA)?lA(FA.left):eA(FA.right)}};A.matchW=Bt,A.foldW=A.matchW,A.match=A.matchW,A.fold=A.match;var Ye=function(lA){return function(eA){return(0,A.isLeft)(eA)?lA(eA.left):eA.right}};A.getOrElseW=Ye,A.getOrElse=A.getOrElseW,A.flap=(0,l.flap)(A.Functor),A.apFirst=(0,a.apFirst)(A.Apply),A.apFirstW=A.apFirst,A.apSecond=(0,a.apSecond)(A.Apply),A.apSecondW=A.apSecond,A.tap=(0,s.dual)(2,n.tap(A.Chain)),A.flattenW=(0,A.flatMap)(s.identity),A.flatten=A.flattenW,A.duplicate=(0,A.extend)(s.identity),A.fromOptionK=(0,i.fromOptionK)(A.FromEither),A.chainOptionK=(0,i.chainOptionK)(A.FromEither,A.Chain),A.chainOptionKW=A.chainOptionK;var Ie={fromEither:A.FromEither.fromEither};A.liftNullable=d.liftNullable(Ie),A.liftOption=d.liftOption(Ie);var Ee={flatMap:A.flatMap};A.flatMapNullable=d.flatMapNullable(Ie,Ee),A.flatMapOption=d.flatMapOption(Ie,Ee),A.filterOrElse=(0,i.filterOrElse)(A.FromEither,A.Chain),A.filterOrElseW=A.filterOrElse;var er=function(lA){return(0,A.isLeft)(lA)?(0,A.right)(lA.left):(0,A.left)(lA.right)};A.swap=er;var Vt=function(lA){return function(eA){return(0,A.isLeft)(eA)?lA(eA.left):eA}};A.orElseW=Vt,A.orElse=A.orElseW;var yt=function(lA){return function(eA){return eA==null?(0,A.left)(lA):(0,A.right)(eA)}};A.fromNullable=yt;var Sr=function(lA,eA){try{return(0,A.right)(lA())}catch(FA){return(0,A.left)(eA(FA))}};A.tryCatch=Sr;var Dr=function(lA,eA){return function(){for(var FA=[],Jj=0;Jj<arguments.length;Jj++)FA[Jj]=arguments[Jj];return(0,A.tryCatch)(function(){return lA.apply(void 0,FA)},eA)}};A.tryCatchK=Dr;var yr=function(lA){var eA=(0,A.fromNullable)(lA);return function(FA){return(0,s.flow)(FA,eA)}};A.fromNullableK=yr;var ra=function(lA){var eA=(0,A.fromNullableK)(lA);return function(FA){return(0,A.flatMap)(eA(FA))}};A.chainNullableK=ra,A.toUnion=(0,A.foldW)(s.identity,s.identity);function at(lA){try{return lA instanceof Error?lA:new Error(String(lA))}catch{return new Error}}function st(lA){return function(eA,FA){if(FA===void 0){var Jj=st(lA);return function(Er){return Jj(eA,Er)}}return(0,A.isLeft)(FA)?!1:lA.equals(eA,FA.right)}}var kr=function(lA){return function(eA){return(0,A.isLeft)(eA)?!1:lA(eA.right)}};A.exists=kr,A.Do=(0,A.of)(d.emptyRecord),A.bindTo=(0,l.bindTo)(A.Functor);var Va=(0,l.let)(A.Functor);A.let=Va,A.bind=n.bind(A.Chain),A.bindW=A.bind,A.apS=(0,a.apS)(A.Apply),A.apSW=A.apS,A.ApT=(0,A.of)(d.emptyReadonlyArray);var je=function(lA){return function(eA){var FA=lA(0,d.head(eA));if((0,A.isLeft)(FA))return FA;for(var Jj=[FA.right],Er=1;Er<eA.length;Er++){var cn=lA(Er,eA[Er]);if((0,A.isLeft)(cn))return cn;Jj.push(cn.right)}return(0,A.right)(Jj)}};A.traverseReadonlyNonEmptyArrayWithIndex=je;var oA=function(lA){var eA=(0,A.traverseReadonlyNonEmptyArrayWithIndex)(lA);return function(FA){return d.isNonEmpty(FA)?eA(FA):A.ApT}};A.traverseReadonlyArrayWithIndex=oA,A.traverseArrayWithIndex=A.traverseReadonlyArrayWithIndex;var gA=function(lA){return(0,A.traverseReadonlyArrayWithIndex)(function(eA,FA){return lA(FA)})};A.traverseArray=gA,A.sequenceArray=(0,A.traverseArray)(s.identity),A.chainW=A.flatMap,A.chain=A.flatMap,A.chainFirst=A.tap,A.chainFirstW=A.tap;function KA(lA,eA){return(0,A.tryCatch)(function(){return JSON.parse(lA)},eA)}var xj=function(lA,eA){return(0,A.tryCatch)(function(){var FA=JSON.stringify(lA);if(typeof FA!="string")throw new Error("Converting unsupported structure to JSON");return FA},eA)};A.stringifyJSON=xj,A.either={URI:A.URI,map:m,of:A.of,ap:I,chain:A.flatMap,reduce:S,foldMap:f,reduceRight:v,traverse:P,sequence:A.sequence,bimap:D,mapLeft:C,alt:b,extend:h,chainRec:O,throwError:A.throwError},A.getApplySemigroup=(0,a.getApplySemigroup)(A.Apply),A.getApplyMonoid=(0,r.getApplicativeMonoid)(A.Applicative);var gj=function(lA,eA){return(0,a.getApplySemigroup)((0,A.getApplicativeValidation)(lA))(eA)};A.getValidationSemigroup=gj;var ve=function(lA,eA){return(0,r.getApplicativeMonoid)((0,A.getApplicativeValidation)(lA))(eA)};A.getValidationMonoid=ve;function uj(lA){var eA=(0,A.getApplicativeValidation)(lA).ap,FA=(0,A.getAltValidation)(lA).alt;return{URI:A.URI,_E:void 0,map:m,of:A.of,chain:A.flatMap,bimap:D,mapLeft:C,reduce:S,foldMap:f,reduceRight:v,extend:h,traverse:P,sequence:A.sequence,chainRec:O,throwError:A.throwError,ap:eA,alt:FA}}}}),TGj=mo({"../../node_modules/.pnpm/io-ts@2.2.22_fp-ts@2.16.9/node_modules/io-ts/lib/index.js"(A){"use strict";var j=A&&A.__extends||function(){var $=function(L,Q){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,kA){N.__proto__=kA}||function(N,kA){for(var BA in kA)Object.prototype.hasOwnProperty.call(kA,BA)&&(N[BA]=kA[BA])},$(L,Q)};return function(L,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");$(L,Q);function N(){this.constructor=L}L.prototype=Q===null?Object.create(Q):(N.prototype=Q.prototype,new N)}}(),e=A&&A.__assign||function(){return e=Object.assign||function($){for(var L,Q=1,N=arguments.length;Q<N;Q++){L=arguments[Q];for(var kA in L)Object.prototype.hasOwnProperty.call(L,kA)&&($[kA]=L[kA])}return $},e.apply(this,arguments)},t=A&&A.__spreadArray||function($,L,Q){if(Q||arguments.length===2)for(var N=0,kA=L.length,BA;N<kA;N++)(BA||!(N in L))&&(BA||(BA=Array.prototype.slice.call(L,0,N)),BA[N]=L[N]);return $.concat(BA||Array.prototype.slice.call(L))};Object.defineProperty(A,"__esModule",{value:!0}),A.partial=A.PartialType=A.type=A.InterfaceType=A.array=A.ArrayType=A.recursion=A.RecursiveType=A.Int=A.brand=A.RefinementType=A.keyof=A.KeyofType=A.literal=A.LiteralType=A.void=A.undefined=A.null=A.UnknownRecord=A.AnyDictionaryType=A.UnknownArray=A.AnyArrayType=A.boolean=A.BooleanType=A.bigint=A.BigIntType=A.number=A.NumberType=A.string=A.StringType=A.unknown=A.UnknownType=A.voidType=A.VoidType=A.UndefinedType=A.nullType=A.NullType=A.getIndex=A.getTags=A.emptyTags=A.mergeAll=A.getDomainKeys=A.appendContext=A.getContextEntry=A.getFunctionName=A.identity=A.Type=A.success=A.failure=A.failures=void 0,A.alias=A.clean=A.StrictType=A.dictionary=A.object=A.ObjectType=A.Dictionary=A.getDefaultContext=A.getValidationError=A.interface=A.Array=A.taggedUnion=A.TaggedUnionType=A.Integer=A.refinement=A.any=A.AnyType=A.never=A.NeverType=A.Function=A.FunctionType=A.exact=A.ExactType=A.strict=A.readonlyArray=A.ReadonlyArrayType=A.readonly=A.ReadonlyType=A.tuple=A.TupleType=A.intersection=A.IntersectionType=A.union=A.UnionType=A.record=A.DictionaryType=void 0;var r=$V();A.failures=r.left;var a=function($,L,Q){return(0,A.failures)([{value:$,context:L,message:Q}])};A.failure=a,A.success=r.right;var n=function(){function $(L,Q,N,kA){this.name=L,this.is=Q,this.validate=N,this.encode=kA,this.decode=this.decode.bind(this)}return $.prototype.pipe=function(L,Q){var N=this;return Q===void 0&&(Q="pipe(".concat(this.name,", ").concat(L.name,")")),new $(Q,L.is,function(kA,BA){var vA=N.validate(kA,BA);return(0,r.isLeft)(vA)?vA:L.validate(vA.right,BA)},this.encode===A.identity&&L.encode===A.identity?A.identity:function(kA){return N.encode(L.encode(kA))})},$.prototype.asDecoder=function(){return this},$.prototype.asEncoder=function(){return this},$.prototype.decode=function(L){return this.validate(L,[{key:"",type:this,actual:L}])},$}();A.Type=n;var o=function($){return $};A.identity=o;function i($){return $.displayName||$.name||"<function".concat($.length,">")}A.getFunctionName=i;function s($,L){return{key:$,type:L}}A.getContextEntry=s;function l($,L,Q,N){for(var kA=$.length,BA=Array(kA+1),vA=0;vA<kA;vA++)BA[vA]=$[vA];return BA[kA]={key:L,type:Q,actual:N},BA}A.appendContext=l;function d($,L){for(var Q=L.length,N=0;N<Q;N++)$.push(L[N])}var k=Object.prototype.hasOwnProperty;function u($){return Object.keys($).map(function(L){return"".concat(L,": ").concat($[L].name)}).join(", ")}function m($){for(var L=0;L<$.length;L++)if($[L].encode!==A.identity)return!1;return!0}function I($){return"{ ".concat(u($)," }")}function S($){return"Partial<".concat($,">")}function f($,L,Q,N){N===void 0&&(N="{ [K in ".concat(L.name,"]: ").concat(Q.name," }"));for(var kA=$.length,BA={},vA=0;vA<kA;vA++)BA[$[vA]]=Q;var EA=(0,A.strict)(BA,N);return new Jj(N,function(RA){return EA.is(RA)},EA.validate,EA.encode,L,Q)}function v($){var L;if(bA($)){var Q=$.value;if(A.string.is(Q))return L={},L[Q]=null,L}else{if(Mj($))return $.keys;if(kj($)){var N=$.types.map(function(kA){return v(kA)});return N.some(Ee.is)?void 0:Object.assign.apply(Object,t([{}],N,!1))}}}A.getDomainKeys=v;function P($,L){for(var Q=Object.keys($),N=Q.length,kA=!1,BA={},vA=0;vA<N;vA++){var EA=Q[vA];L.is(EA)?BA[EA]=$[EA]:kA=!0}return kA?BA:$}function D($,L,Q){return Q===void 0&&(Q="{ [K in ".concat($.name,"]: ").concat(L.name," }")),new Jj(Q,function(N){return A.UnknownRecord.is(N)?Object.keys(N).every(function(kA){return!$.is(kA)||L.is(N[kA])}):dj(L)&&Array.isArray(N)},function(N,kA){if(A.UnknownRecord.is(N)){for(var BA={},vA=[],EA=Object.keys(N),RA=EA.length,Ej=!1,Vj=0;Vj<RA;Vj++){var UA=EA[Vj],Hj=N[UA],Uj=$.validate(UA,l(kA,UA,$,UA));if((0,r.isLeft)(Uj))Ej=!0;else{var te=Uj.right;Ej=Ej||te!==UA,UA=te;var Zj=L.validate(Hj,l(kA,UA,L,Hj));if((0,r.isLeft)(Zj))d(vA,Zj.left);else{var Fj=Zj.right;Ej=Ej||Fj!==Hj,BA[UA]=Fj}}}return vA.length>0?(0,A.failures)(vA):(0,A.success)(Ej?BA:N)}return dj(L)&&Array.isArray(N)?(0,A.success)(N):(0,A.failure)(N,kA)},$.encode===A.identity&&L.encode===A.identity?function(N){return P(N,$)}:function(N){for(var kA={},BA=Object.keys(P(N,$)),vA=BA.length,EA=0;EA<vA;EA++){var RA=BA[EA];kA[String($.encode(RA))]=L.encode(N[RA])}return kA},$,L)}function C($){return"("+$.map(function(L){return L.name}).join(" | ")+")"}function b($,L){for(var Q=!0,N=!0,kA=!A.UnknownRecord.is($),BA=0,vA=L;BA<vA.length;BA++){var EA=vA[BA];EA!==$&&(Q=!1),A.UnknownRecord.is(EA)&&(N=!1)}if(Q)return $;if(N)return L[L.length-1];for(var RA={},Ej=0,Vj=L;Ej<Vj.length;Ej++){var EA=Vj[Ej];for(var UA in EA)(!k.call(RA,UA)||kA||EA[UA]!==$[UA])&&(RA[UA]=EA[UA])}return RA}A.mergeAll=b;function h($){switch($._tag){case"RefinementType":case"ReadonlyType":return h($.type);case"InterfaceType":case"StrictType":case"PartialType":return $.props;case"IntersectionType":return $.types.reduce(function(L,Q){return Object.assign(L,h(Q))},{})}}function O($,L){for(var Q=Object.getOwnPropertyNames($),N=!1,kA={},BA=0;BA<Q.length;BA++){var vA=Q[BA];k.call(L,vA)?kA[vA]=$[vA]:N=!0}return N?kA:$}function V($){return mj($)?"{| ".concat(u($.props)," |}"):ae($)?S("{| ".concat(u($.props)," |}")):"Exact<".concat($.name,">")}function Y($){return $.length>0}A.emptyTags={};function rA($,L){for(var Q=[],N=0,kA=$;N<kA.length;N++){var BA=kA[N];L.indexOf(BA)!==-1&&Q.push(BA)}return Q}function yA($,L){if($===A.emptyTags)return L;if(L===A.emptyTags)return $;var Q=Object.assign({},$);for(var N in L)if(k.call($,N)){var kA=rA($[N],L[N]);if(Y(kA))Q[N]=kA;else{Q=A.emptyTags;break}}else Q[N]=L[N];return Q}function VA($,L){if($===A.emptyTags||L===A.emptyTags)return A.emptyTags;var Q=A.emptyTags;for(var N in $)if(k.call(L,N)){var kA=rA($[N],L[N]);kA.length===0&&(Q===A.emptyTags&&(Q={}),Q[N]=$[N].concat(L[N]))}return Q}function dj($){return $._tag==="AnyType"}function bA($){return $._tag==="LiteralType"}function Mj($){return $._tag==="KeyofType"}function mj($){return $._tag==="InterfaceType"}function ae($){return $._tag==="PartialType"}function _j($){return $._tag==="StrictType"}function cj($){return $._tag==="ExactType"}function Qj($){return $._tag==="RefinementType"}function Cj($){return $._tag==="IntersectionType"}function kj($){return $._tag==="UnionType"}function Bj($){return $._tag==="RecursiveType"}function De($){return $._tag==="ReadonlyType"}var wt=[];function wj($){if(wt.indexOf($)!==-1)return A.emptyTags;if(mj($)||_j($)){var L=A.emptyTags;for(var Q in $.props){var N=$.props[Q];bA(N)&&(L===A.emptyTags&&(L={}),L[Q]=[N.value])}return L}else{if(cj($)||Qj($)||De($))return wj($.type);if(Cj($))return $.types.reduce(function(BA,vA){return yA(BA,wj(vA))},A.emptyTags);if(kj($))return $.types.slice(1).reduce(function(BA,vA){return VA(BA,wj(vA))},wj($.types[0]));if(Bj($)){wt.push($);var kA=wj($.type);return wt.pop(),kA}}return A.emptyTags}A.getTags=wj;function Bt($){var L=wj($[0]),Q=Object.keys(L),N=$.length,kA=function(Ej){for(var Vj=L[Ej].slice(),UA=[L[Ej]],Hj=1;Hj<N;Hj++){var Uj=$[Hj],te=wj(Uj),Zj=te[Ej];if(Zj===void 0)return"continue-keys";if(Zj.some(function(Fj){return Vj.indexOf(Fj)!==-1}))return"continue-keys";Vj.push.apply(Vj,Zj),UA.push(Zj)}return{value:[Ej,UA]}};A:for(var BA=0,vA=Q;BA<vA.length;BA++){var EA=vA[BA],RA=kA(EA);if(typeof RA=="object")return RA.value;switch(RA){case"continue-keys":continue A}}}A.getIndex=Bt;var Ye=function($){j(L,$);function L(){var Q=$.call(this,"null",function(N){return N===null},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="NullType",Q}return L}(n);A.NullType=Ye,A.nullType=new Ye,A.null=A.nullType;var Ie=function($){j(L,$);function L(){var Q=$.call(this,"undefined",function(N){return N===void 0},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="UndefinedType",Q}return L}(n);A.UndefinedType=Ie;var Ee=new Ie;A.undefined=Ee;var er=function($){j(L,$);function L(){var Q=$.call(this,"void",Ee.is,Ee.validate,A.identity)||this;return Q._tag="VoidType",Q}return L}(n);A.VoidType=er,A.voidType=new er,A.void=A.voidType;var Vt=function($){j(L,$);function L(){var Q=$.call(this,"unknown",function(N){return!0},A.success,A.identity)||this;return Q._tag="UnknownType",Q}return L}(n);A.UnknownType=Vt,A.unknown=new Vt;var yt=function($){j(L,$);function L(){var Q=$.call(this,"string",function(N){return typeof N=="string"},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="StringType",Q}return L}(n);A.StringType=yt,A.string=new yt;var Sr=function($){j(L,$);function L(){var Q=$.call(this,"number",function(N){return typeof N=="number"},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="NumberType",Q}return L}(n);A.NumberType=Sr,A.number=new Sr;var Dr=function($){j(L,$);function L(){var Q=$.call(this,"bigint",function(N){return typeof N=="bigint"},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="BigIntType",Q}return L}(n);A.BigIntType=Dr,A.bigint=new Dr;var yr=function($){j(L,$);function L(){var Q=$.call(this,"boolean",function(N){return typeof N=="boolean"},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="BooleanType",Q}return L}(n);A.BooleanType=yr,A.boolean=new yr;var ra=function($){j(L,$);function L(){var Q=$.call(this,"UnknownArray",Array.isArray,function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="AnyArrayType",Q}return L}(n);A.AnyArrayType=ra,A.UnknownArray=new ra,A.Array=A.UnknownArray;var at=function($){j(L,$);function L(){var Q=$.call(this,"UnknownRecord",function(N){return N!==null&&typeof N=="object"&&!Array.isArray(N)},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="AnyDictionaryType",Q}return L}(n);A.AnyDictionaryType=at,A.UnknownRecord=new at;var st=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.value=vA,EA._tag="LiteralType",EA}return L}(n);A.LiteralType=st;function kr($,L){L===void 0&&(L=JSON.stringify($));var Q=function(N){return N===$};return new st(L,Q,function(N,kA){return Q(N)?(0,A.success)($):(0,A.failure)(N,kA)},A.identity,$)}A.literal=kr;var Va=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.keys=vA,EA._tag="KeyofType",EA}return L}(n);A.KeyofType=Va;function je($,L){L===void 0&&(L=Object.keys($).map(function(N){return JSON.stringify(N)}).join(" | "));var Q=function(N){return A.string.is(N)&&k.call($,N)};return new Va(L,Q,function(N,kA){return Q(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity,$)}A.keyof=je;var oA=function($){j(L,$);function L(Q,N,kA,BA,vA,EA){var RA=$.call(this,Q,N,kA,BA)||this;return RA.type=vA,RA.predicate=EA,RA._tag="RefinementType",RA}return L}(n);A.RefinementType=oA;function gA($,L,Q){return G($,L,Q)}A.brand=gA,A.Int=gA(A.number,function($){return Number.isInteger($)},"Int");var KA=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.runDefinition=vA,EA._tag="RecursiveType",EA}return L}(n);A.RecursiveType=KA,Object.defineProperty(KA.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function xj($,L){var Q,N=function(){return Q||(Q=L(kA),Q.name=$),Q},kA=new KA($,function(BA){return N().is(BA)},function(BA,vA){return N().validate(BA,vA)},function(BA){return N().encode(BA)},N);return kA}A.recursion=xj;var gj=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.type=vA,EA._tag="ArrayType",EA}return L}(n);A.ArrayType=gj;function ve($,L){return L===void 0&&(L="Array<".concat($.name,">")),new gj(L,function(Q){return A.UnknownArray.is(Q)&&Q.every($.is)},function(Q,N){var kA=A.UnknownArray.validate(Q,N);if((0,r.isLeft)(kA))return kA;for(var BA=kA.right,vA=BA.length,EA=BA,RA=[],Ej=0;Ej<vA;Ej++){var Vj=BA[Ej],UA=$.validate(Vj,l(N,String(Ej),$,Vj));if((0,r.isLeft)(UA))d(RA,UA.left);else{var Hj=UA.right;Hj!==Vj&&(EA===BA&&(EA=BA.slice()),EA[Ej]=Hj)}}return RA.length>0?(0,A.failures)(RA):(0,A.success)(EA)},$.encode===A.identity?A.identity:function(Q){return Q.map($.encode)},$)}A.array=ve;var uj=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.props=vA,EA._tag="InterfaceType",EA}return L}(n);A.InterfaceType=uj;function lA($,L){L===void 0&&(L=I($));var Q=Object.keys($),N=Q.map(function(BA){return $[BA]}),kA=Q.length;return new uj(L,function(BA){if(A.UnknownRecord.is(BA)){for(var vA=0;vA<kA;vA++){var EA=Q[vA],RA=BA[EA];if(RA===void 0&&!k.call(BA,EA)||!N[vA].is(RA))return!1}return!0}return!1},function(BA,vA){var EA=A.UnknownRecord.validate(BA,vA);if((0,r.isLeft)(EA))return EA;for(var RA=EA.right,Ej=RA,Vj=[],UA=0;UA<kA;UA++){var Hj=Q[UA],Uj=Ej[Hj],te=N[UA],Zj=te.validate(Uj,l(vA,Hj,te,Uj));if((0,r.isLeft)(Zj))d(Vj,Zj.left);else{var Fj=Zj.right;(Fj!==Uj||Fj===void 0&&!k.call(Ej,Hj))&&(Ej===RA&&(Ej=e({},RA)),Ej[Hj]=Fj)}}return Vj.length>0?(0,A.failures)(Vj):(0,A.success)(Ej)},m(N)?A.identity:function(BA){for(var vA=e({},BA),EA=0;EA<kA;EA++){var RA=Q[EA],Ej=N[EA].encode;Ej!==A.identity&&(vA[RA]=Ej(BA[RA]))}return vA},$)}A.type=lA,A.interface=lA;var eA=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.props=vA,EA._tag="PartialType",EA}return L}(n);A.PartialType=eA;function FA($,L){L===void 0&&(L=S(I($)));var Q=Object.keys($),N=Q.map(function(BA){return $[BA]}),kA=Q.length;return new eA(L,function(BA){if(A.UnknownRecord.is(BA)){for(var vA=0;vA<kA;vA++){var EA=Q[vA],RA=BA[EA];if(RA!==void 0&&!$[EA].is(RA))return!1}return!0}return!1},function(BA,vA){var EA=A.UnknownRecord.validate(BA,vA);if((0,r.isLeft)(EA))return EA;for(var RA=EA.right,Ej=RA,Vj=[],UA=0;UA<kA;UA++){var Hj=Q[UA],Uj=Ej[Hj],te=$[Hj],Zj=te.validate(Uj,l(vA,Hj,te,Uj));if((0,r.isLeft)(Zj))Uj!==void 0&&d(Vj,Zj.left);else{var Fj=Zj.right;Fj!==Uj&&(Ej===RA&&(Ej=e({},RA)),Ej[Hj]=Fj)}}return Vj.length>0?(0,A.failures)(Vj):(0,A.success)(Ej)},m(N)?A.identity:function(BA){for(var vA=e({},BA),EA=0;EA<kA;EA++){var RA=Q[EA],Ej=BA[RA];Ej!==void 0&&(vA[RA]=N[EA].encode(Ej))}return vA},$)}A.partial=FA;var Jj=function($){j(L,$);function L(Q,N,kA,BA,vA,EA){var RA=$.call(this,Q,N,kA,BA)||this;return RA.domain=vA,RA.codomain=EA,RA._tag="DictionaryType",RA}return L}(n);A.DictionaryType=Jj;function Er($,L,Q){var N=v($);return N?f(Object.keys(N),$,L,Q):D($,L,Q)}A.record=Er;var cn=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.types=vA,EA._tag="UnionType",EA}return L}(n);A.UnionType=cn;function Zo($,L){L===void 0&&(L=C($));var Q=Bt($);if(Q!==void 0&&$.length>0){var N=Q[0],kA=Q[1],BA=kA.length,vA=function(EA){for(var RA=0;RA<BA;RA++)if(kA[RA].indexOf(EA)!==-1)return RA};return new T(L,function(EA){if(A.UnknownRecord.is(EA)){var RA=vA(EA[N]);return RA!==void 0?$[RA].is(EA):!1}return!1},function(EA,RA){var Ej=A.UnknownRecord.validate(EA,RA);if((0,r.isLeft)(Ej))return Ej;var Vj=Ej.right,UA=vA(Vj[N]);if(UA===void 0)return(0,A.failure)(EA,RA);var Hj=$[UA];return Hj.validate(Vj,l(RA,String(UA),Hj,Vj))},m($)?A.identity:function(EA){var RA=vA(EA[N]);if(RA===void 0)throw new Error("no codec found to encode value in union codec ".concat(L));return $[RA].encode(EA)},$,N)}else return new cn(L,function(EA){return $.some(function(RA){return RA.is(EA)})},function(EA,RA){for(var Ej=[],Vj=0;Vj<$.length;Vj++){var UA=$[Vj],Hj=UA.validate(EA,l(RA,String(Vj),UA,EA));if((0,r.isLeft)(Hj))d(Ej,Hj.left);else return(0,A.success)(Hj.right)}return(0,A.failures)(Ej)},m($)?A.identity:function(EA){for(var RA=0,Ej=$;RA<Ej.length;RA++){var Vj=Ej[RA];if(Vj.is(EA))return Vj.encode(EA)}throw new Error("no codec found to encode value in union type ".concat(L))},$)}A.union=Zo;var Zr=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.types=vA,EA._tag="IntersectionType",EA}return L}(n);A.IntersectionType=Zr;function $n($,L){L===void 0&&(L="(".concat($.map(function(N){return N.name}).join(" & "),")"));var Q=$.length;return new Zr(L,function(N){return $.every(function(kA){return kA.is(N)})},$.length===0?A.success:function(N,kA){for(var BA=[],vA=[],EA=0;EA<Q;EA++){var RA=$[EA],Ej=RA.validate(N,l(kA,String(EA),RA,N));(0,r.isLeft)(Ej)?d(vA,Ej.left):BA.push(Ej.right)}return vA.length>0?(0,A.failures)(vA):(0,A.success)(b(N,BA))},$.length===0?A.identity:function(N){return b(N,$.map(function(kA){return kA.encode(N)}))},$)}A.intersection=$n;var wn=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.types=vA,EA._tag="TupleType",EA}return L}(n);A.TupleType=wn;function cp($,L){L===void 0&&(L="[".concat($.map(function(N){return N.name}).join(", "),"]"));var Q=$.length;return new wn(L,function(N){return A.UnknownArray.is(N)&&N.length===Q&&$.every(function(kA,BA){return kA.is(N[BA])})},function(N,kA){var BA=A.UnknownArray.validate(N,kA);if((0,r.isLeft)(BA))return BA;for(var vA=BA.right,EA=vA.length>Q?vA.slice(0,Q):vA,RA=[],Ej=0;Ej<Q;Ej++){var Vj=vA[Ej],UA=$[Ej],Hj=UA.validate(Vj,l(kA,String(Ej),UA,Vj));if((0,r.isLeft)(Hj))d(RA,Hj.left);else{var Uj=Hj.right;Uj!==Vj&&(EA===vA&&(EA=vA.slice()),EA[Ej]=Uj)}}return RA.length>0?(0,A.failures)(RA):(0,A.success)(EA)},m($)?A.identity:function(N){return $.map(function(kA,BA){return kA.encode(N[BA])})},$)}A.tuple=cp;var vd=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.type=vA,EA._tag="ReadonlyType",EA}return L}(n);A.ReadonlyType=vd;function ee($,L){return L===void 0&&(L="Readonly<".concat($.name,">")),new vd(L,$.is,$.validate,$.encode,$)}A.readonly=ee;var Ls=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.type=vA,EA._tag="ReadonlyArrayType",EA}return L}(n);A.ReadonlyArrayType=Ls;function xc($,L){L===void 0&&(L="ReadonlyArray<".concat($.name,">"));var Q=ve($);return new Ls(L,Q.is,Q.validate,Q.encode,$)}A.readonlyArray=xc;var Ai=function($,L){return Wt(lA($),L)};A.strict=Ai;var In=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.type=vA,EA._tag="ExactType",EA}return L}(n);A.ExactType=In;function Wt($,L){L===void 0&&(L=V($));var Q=h($);return new In(L,$.is,function(N,kA){var BA=A.UnknownRecord.validate(N,kA);if((0,r.isLeft)(BA))return BA;var vA=$.validate(N,kA);return(0,r.isLeft)(vA)?vA:(0,r.right)(O(vA.right,Q))},function(N){return $.encode(O(N,Q))},$)}A.exact=Wt;var Vk=function($){j(L,$);function L(){var Q=$.call(this,"Function",function(N){return typeof N=="function"},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="FunctionType",Q}return L}(n);A.FunctionType=Vk,A.Function=new Vk;var Ot=function($){j(L,$);function L(){var Q=$.call(this,"never",function(N){return!1},function(N,kA){return(0,A.failure)(N,kA)},function(){throw new Error("cannot encode never")})||this;return Q._tag="NeverType",Q}return L}(n);A.NeverType=Ot,A.never=new Ot;var Pl=function($){j(L,$);function L(){var Q=$.call(this,"any",function(N){return!0},A.success,A.identity)||this;return Q._tag="AnyType",Q}return L}(n);A.AnyType=Pl,A.any=new Pl;function G($,L,Q){return Q===void 0&&(Q="(".concat($.name," | ").concat(i(L),")")),new oA(Q,function(N){return $.is(N)&&L(N)},function(N,kA){var BA=$.validate(N,kA);if((0,r.isLeft)(BA))return BA;var vA=BA.right;return L(vA)?(0,A.success)(vA):(0,A.failure)(vA,kA)},$.encode,$,L)}A.refinement=G,A.Integer=G(A.number,Number.isInteger,"Integer");var T=function($){j(L,$);function L(Q,N,kA,BA,vA,EA){var RA=$.call(this,Q,N,kA,BA,vA)||this;return RA.tag=EA,RA}return L}(cn);A.TaggedUnionType=T;var H=function($,L,Q){Q===void 0&&(Q=C(L));var N=Zo(L,Q);return N instanceof T?N:(console.warn("[io-ts] Cannot build a tagged union for ".concat(Q,", returning a de-optimized union")),new T(Q,N.is,N.validate,N.encode,L,$))};A.taggedUnion=H;var B=function($,L){return{value:$,context:L}};A.getValidationError=B;var R=function($){return[{key:"",type:$}]};A.getDefaultContext=R,A.Dictionary=A.UnknownRecord;var uA=function($){j(L,$);function L(){var Q=$.call(this,"object",function(N){return N!==null&&typeof N=="object"},function(N,kA){return Q.is(N)?(0,A.success)(N):(0,A.failure)(N,kA)},A.identity)||this;return Q._tag="ObjectType",Q}return L}(n);A.ObjectType=uA,A.object=new uA,A.dictionary=Er;var qA=function($){j(L,$);function L(Q,N,kA,BA,vA){var EA=$.call(this,Q,N,kA,BA)||this;return EA.props=vA,EA._tag="StrictType",EA}return L}(n);A.StrictType=qA;function QA($){return $}A.clean=QA;function fj($){return function(){return $}}A.alias=fj}}),KGj=mo({"../../node_modules/.pnpm/io-ts@2.2.22_fp-ts@2.16.9/node_modules/io-ts/lib/PathReporter.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.PathReporter=A.success=A.failure=void 0;var j=$V(),e=TGj();function t(i){return typeof i=="function"?(0,e.getFunctionName)(i):typeof i=="number"&&!isFinite(i)?isNaN(i)?"NaN":i>0?"Infinity":"-Infinity":JSON.stringify(i)}function r(i){return i.map(function(s){var l=s.key,d=s.type;return"".concat(l,": ").concat(d.name)}).join("/")}function a(i){return i.message!==void 0?i.message:"Invalid value ".concat(t(i.value)," supplied to ").concat(r(i.context))}function n(i){return i.map(a)}A.failure=n;function o(){return["No errors!"]}A.success=o,A.PathReporter={report:(0,j.fold)(n,o)}}}),wV=mo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/types.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ByteSequence=void 0;var j=class{constructor(e){this.base64Value=e}toBase64(){return this.base64Value}};A.ByteSequence=j}}),iH=mo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/util.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.isByteSequence=A.isInnerList=A.isValidKeyStr=A.isValidTokenStr=A.isAscii=void 0;var j=/^[\x20-\x7E]*$/,e=/^[a-zA-Z*][:/!#$%&'*+\-.^_`|~A-Za-z0-9]*$/,t=/^[a-z*][*\-_.a-z0-9]*$/;function r(s){return j.test(s)}A.isAscii=r;function a(s){return e.test(s)}A.isValidTokenStr=a;function n(s){return t.test(s)}A.isValidKeyStr=n;function o(s){return Array.isArray(s[0])}A.isInnerList=o;function i(s){return typeof s=="object"&&"base64Value"in s}A.isByteSequence=i}}),IV=mo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/token.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Token=void 0;var j=iH(),e=class{constructor(t){if(!(0,j.isValidTokenStr)(t))throw new TypeError("Invalid character in Token string. Tokens must start with *, A-Z and the rest of the string may only contain a-z, A-Z, 0-9, :/!#$%&'*+-.^_`|~");this.value=t}toString(){return this.value}};A.Token=e}}),SGj=mo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/serializer.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.serializeKey=A.serializeParameters=A.serializeToken=A.serializeByteSequence=A.serializeBoolean=A.serializeString=A.serializeDecimal=A.serializeInteger=A.serializeBareItem=A.serializeInnerList=A.serializeItem=A.serializeDictionary=A.serializeList=A.SerializeError=void 0;var j=wV(),e=IV(),t=iH(),r=class extends Error{};A.SerializeError=r;function a(v){return v.map(P=>(0,t.isInnerList)(P)?i(P):o(P)).join(", ")}A.serializeList=a;function n(v){return Array.from(v.entries()).map(([P,D])=>{let C=f(P);return D[0]===!0?C+=S(D[1]):(C+="=",(0,t.isInnerList)(D)?C+=i(D):C+=o(D)),C}).join(", ")}A.serializeDictionary=n;function o(v){return s(v[0])+S(v[1])}A.serializeItem=o;function i(v){return`(${v[0].map(P=>o(P)).join(" ")})${S(v[1])}`}A.serializeInnerList=i;function s(v){if(typeof v=="number")return Number.isInteger(v)?l(v):d(v);if(typeof v=="string")return k(v);if(v instanceof e.Token)return I(v);if(v instanceof j.ByteSequence)return m(v);if(typeof v=="boolean")return u(v);throw new r(`Cannot serialize values of type ${typeof v}`)}A.serializeBareItem=s;function l(v){if(v<-999999999999999||v>999999999999999)throw new r("Structured headers can only encode integers in the range range of -999,999,999,999,999 to 999,999,999,999,999 inclusive");return v.toString()}A.serializeInteger=l;function d(v){let P=v.toFixed(3).replace(/0+$/,"");if(P.split(".")[0].replace("-","").length>12)throw new r("Fractional numbers are not allowed to have more than 12 significant digits before the decimal point");return P}A.serializeDecimal=d;function k(v){if(!(0,t.isAscii)(v))throw new r("Only ASCII strings may be serialized");return`"${v.replace(/("|\\)/g,P=>"\\"+P)}"`}A.serializeString=k;function u(v){return v?"?1":"?0"}A.serializeBoolean=u;function m(v){return`:${v.toBase64()}:`}A.serializeByteSequence=m;function I(v){return v.toString()}A.serializeToken=I;function S(v){return Array.from(v).map(([P,D])=>{let C=";"+f(P);return D!==!0&&(C+="="+s(D)),C}).join("")}A.serializeParameters=S;function f(v){if(!(0,t.isValidKeyStr)(v))throw new r("Keys in dictionaries must only contain lowercase letter, numbers, _-*. and must start with a letter or *");return v}A.serializeKey=f}}),MGj=mo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/parser.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ParseError=A.parseItem=A.parseList=A.parseDictionary=void 0;var j=wV(),e=IV(),t=iH();function r(d){return new i(d).parseDictionary()}A.parseDictionary=r;function a(d){return new i(d).parseList()}A.parseList=a;function n(d){return new i(d).parseItem()}A.parseItem=n;var o=class extends Error{constructor(d,k){super(`Parse error: ${k} at offset ${d}`)}};A.ParseError=o;var i=class{constructor(d){this.input=d,this.pos=0}parseDictionary(){this.skipWS();let d=new Map;for(;!this.eof();){let k=this.parseKey(),u;if(this.lookChar()==="="?(this.pos++,u=this.parseItemOrInnerList()):u=[!0,this.parseParameters()],d.set(k,u),this.skipOWS(),this.eof())return d;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new o(this.pos,"Dictionary contained a trailing comma")}return d}parseList(){this.skipWS();let d=[];for(;!this.eof();){if(d.push(this.parseItemOrInnerList()),this.skipOWS(),this.eof())return d;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new o(this.pos,"A list may not end with a trailing comma")}return d}parseItem(d=!0){d&&this.skipWS();let k=[this.parseBareItem(),this.parseParameters()];return d&&this.checkTrail(),k}parseItemOrInnerList(){return this.lookChar()==="("?this.parseInnerList():this.parseItem(!1)}parseInnerList(){this.expectChar("("),this.pos++;let d=[];for(;!this.eof();){if(this.skipWS(),this.lookChar()===")")return this.pos++,[d,this.parseParameters()];d.push(this.parseItem(!1));let k=this.lookChar();if(k!==" "&&k!==")")throw new o(this.pos,"Expected a whitespace or ) after every item in an inner list")}throw new o(this.pos,"Could not find end of inner list")}parseBareItem(){let d=this.lookChar();if(d===void 0)throw new o(this.pos,"Unexpected end of string");if(d.match(/^[-0-9]/))return this.parseIntegerOrDecimal();if(d==='"')return this.parseString();if(d.match(/^[A-Za-z*]/))return this.parseToken();if(d===":")return this.parseByteSequence();if(d==="?")return this.parseBoolean();throw new o(this.pos,"Unexpected input")}parseParameters(){let d=new Map;for(;!this.eof()&&this.lookChar()===";";){this.pos++,this.skipWS();let u=this.parseKey(),m=!0;this.lookChar()==="="&&(this.pos++,m=this.parseBareItem()),d.set(u,m)}return d}parseIntegerOrDecimal(){let d="integer",k=1,u="";if(this.lookChar()==="-"&&(k=-1,this.pos++),!l(this.lookChar()))throw new o(this.pos,"Expected a digit (0-9)");for(;!this.eof();){let m=this.getChar();if(l(m))u+=m;else if(d==="integer"&&m==="."){if(u.length>12)throw new o(this.pos,"Exceeded maximum decimal length");u+=".",d="decimal"}else{this.pos--;break}if(d==="integer"&&u.length>15)throw new o(this.pos,"Exceeded maximum integer length");if(d==="decimal"&&u.length>16)throw new o(this.pos,"Exceeded maximum decimal length")}if(d==="integer")return parseInt(u,10)*k;if(u.endsWith("."))throw new o(this.pos,"Decimal cannot end on a period");if(u.split(".")[1].length>3)throw new o(this.pos,"Number of digits after the decimal point cannot exceed 3");return parseFloat(u)*k}parseString(){let d="";for(this.expectChar('"'),this.pos++;!this.eof();){let k=this.getChar();if(k==="\\"){if(this.eof())throw new o(this.pos,"Unexpected end of input");let u=this.getChar();if(u!=="\\"&&u!=='"')throw new o(this.pos,"A backslash must be followed by another backslash or double quote");d+=u}else{if(k==='"')return d;if((0,t.isAscii)(k))d+=k;else throw new o(this.pos,"Strings must be in the ASCII range")}}throw new o(this.pos,"Unexpected end of input")}parseToken(){let d="";for(;!this.eof();){let k=this.lookChar();if(k===void 0||!/^[:/!#$%&'*+\-.^_`|~A-Za-z0-9]$/.test(k))return new e.Token(d);d+=this.getChar()}return new e.Token(d)}parseByteSequence(){this.expectChar(":"),this.pos++;let d=this.input.indexOf(":",this.pos);if(d===-1)throw new o(this.pos,'Could not find a closing ":" character to mark end of Byte Sequence');let k=this.input.substring(this.pos,d);if(this.pos+=k.length+1,!/^[A-Za-z0-9+/=]*$/.test(k))throw new o(this.pos,"ByteSequence does not contain a valid base64 string");return new j.ByteSequence(k)}parseBoolean(){this.expectChar("?"),this.pos++;let d=this.getChar();if(d==="1")return!0;if(d==="0")return!1;throw new o(this.pos,'Unexpected character. Expected a "1" or a "0"')}parseKey(){var d;if(!(!((d=this.lookChar())===null||d===void 0)&&d.match(/^[a-z*]/)))throw new o(this.pos,"A key must begin with an asterisk or letter (a-z)");let k="";for(;!this.eof();){let u=this.lookChar();if(u===void 0||!/^[a-z0-9_\-.*]$/.test(u))return k;k+=this.getChar()}return k}lookChar(){return this.input[this.pos]}expectChar(d){if(this.lookChar()!==d)throw new o(this.pos,`Expected ${d}`)}getChar(){return this.input[this.pos++]}eof(){return this.pos>=this.input.length}skipOWS(){for(;;){let d=this.input.substr(this.pos,1);if(d===" "||d==="	")this.pos++;else break}}skipWS(){for(;this.lookChar()===" ";)this.pos++}checkTrail(){if(this.skipWS(),!this.eof())throw new o(this.pos,"Unexpected characters at end of input")}};A.default=i;var s=/^[0-9]$/;function l(d){return d===void 0?!1:s.test(d)}}}),_Gj=mo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/index.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(r,a,n,o){o===void 0&&(o=n);var i=Object.getOwnPropertyDescriptor(a,n);(!i||("get"in i?!a.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(r,o,i)}:function(r,a,n,o){o===void 0&&(o=n),r[o]=a[n]}),e=A&&A.__exportStar||function(r,a){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&j(a,r,n)};Object.defineProperty(A,"__esModule",{value:!0}),A.Token=void 0,e(SGj(),A),e(MGj(),A),e(wV(),A),e(iH(),A);var t=IV();Object.defineProperty(A,"Token",{enumerable:!0,get:function(){return t.Token}})}}),ea;function L$(A){let j=ea.__externref_table_alloc();return ea.__wbindgen_export_2.set(j,A),j}function Nh(A,j){try{return A.apply(this,j)}catch(e){let t=L$(e);ea.__wbindgen_exn_store(t)}}var $0A=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&$0A.decode();var N$=null;function oG(){return(N$===null||N$.byteLength===0)&&(N$=new Uint8Array(ea.memory.buffer)),N$}function tH(A,j){return A=A>>>0,$0A.decode(oG().subarray(A,A+j))}function zh(A){return A==null}var g0A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{ea.__wbindgen_export_3.get(A.dtor)(A.a,A.b)});function LGj(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(ea.__wbindgen_export_3.get(r.dtor)(o,r.b),g0A.unregister(r)):r.a=o}};return a.original=r,g0A.register(a,r,r),a}function fV(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=fV(A[0]));for(let n=1;n<r;n++)a+=", "+fV(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}var FB=0,aH=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},NGj=typeof aH.encodeInto=="function"?function(A,j){return aH.encodeInto(A,j)}:function(A,j){let e=aH.encode(A);return j.set(e),{read:A.length,written:e.length}};function GV(A,j,e){if(e===void 0){let o=aH.encode(A),i=j(o.length,1)>>>0;return oG().subarray(i,i+o.length).set(o),FB=o.length,i}let t=A.length,r=j(t,1)>>>0,a=oG(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=oG().subarray(r+n,r+t),i=NGj(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return FB=n,r}var Rh=null;function nG(){return(Rh===null||Rh.buffer.detached===!0||Rh.buffer.detached===void 0&&Rh.buffer!==ea.memory.buffer)&&(Rh=new DataView(ea.memory.buffer)),Rh}function h0A(A,j){let e=j(A.length*1,1)>>>0;return oG().set(A,e/1),FB=A.length,e}function xV(A){let j=ea.__wbindgen_export_2.get(A);return ea.__externref_table_dealloc(A),j}function zGj(A,j){return A=A>>>0,oG().subarray(A/1,A/1+j)}function RGj(A,j,e){return ea.createSession(A,j,e)}function JGj(A,j,e){ea.closure288_externref_shim(A,j,e)}function UGj(A,j,e,t){ea.closure169_externref_shim(A,j,e,t)}var rH=Object.freeze({Local:0,0:"Local",Lower:1,1:"Lower",Upper:2,2:"Upper"}),q0A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>ea.__wbg_enclavesession_free(A>>>0,1)),XGj=class w0A{static __wrap(j){j=j>>>0;let e=Object.create(w0A.prototype);return e.__wbg_ptr=j,q0A.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,q0A.unregister(this),j}free(){let j=this.__destroy_into_raw();ea.__wbg_enclavesession_free(j,0)}decryptMessage(j){let e=h0A(j,ea.__wbindgen_malloc),t=FB,r=ea.enclavesession_decryptMessage(this.__wbg_ptr,e,t);if(r[3])throw xV(r[2]);var a=zGj(r[0],r[1]).slice();return ea.__wbindgen_free(r[0],r[1]*1,1),a}encryptMessage(j,e){let t=GV(j,ea.__wbindgen_malloc,ea.__wbindgen_realloc),r=FB,a=h0A(e,ea.__wbindgen_malloc),n=FB,o=ea.enclavesession_encryptMessage(this.__wbg_ptr,t,r,a,n);if(o[2])throw xV(o[1]);return xV(o[0])}};async function VGj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function WGj(){let A={};return A.wbg={},A.wbg.__wbg_buffer_61b7ce01341d7f88=function(j){return j.buffer},A.wbg.__wbg_call_500db948e69c7330=function(){return Nh(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_call_b0d8e36992d9900d=function(){return Nh(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_crypto_ed58b8e10a292839=function(j){return j.crypto},A.wbg.__wbg_done_f22c1561fa919baa=function(j){return j.done},A.wbg.__wbg_enclavesession_new=function(j){return XGj.__wrap(j)},A.wbg.__wbg_getRandomValues_bcb4912f16000dc4=function(){return Nh(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_get_9aa3dff3f0266054=function(j,e){return j[e>>>0]},A.wbg.__wbg_get_bbccf8970793c087=function(){return Nh(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(j,e){return j[e]},A.wbg.__wbg_instanceof_ArrayBuffer_670ddde44cdb2602=function(j){let e;try{e=j instanceof ArrayBuffer}catch{e=!1}return e},A.wbg.__wbg_instanceof_Uint8Array_28af5bc19d6acad8=function(j){let e;try{e=j instanceof Uint8Array}catch{e=!1}return e},A.wbg.__wbg_isArray_1ba11a930108ec51=function(j){return Array.isArray(j)},A.wbg.__wbg_isSafeInteger_12f5549b2fca23f4=function(j){return Number.isSafeInteger(j)},A.wbg.__wbg_iterator_23604bb983791576=function(){return Symbol.iterator},A.wbg.__wbg_length_65d1cd11729ced11=function(j){return j.length},A.wbg.__wbg_length_d65cf0786bfc5739=function(j){return j.length},A.wbg.__wbg_msCrypto_0a36e2ec3a343d26=function(j){return j.msCrypto},A.wbg.__wbg_new_254fa9eac11932ae=function(){return new Array},A.wbg.__wbg_new_3d446df9155128ef=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return UGj(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_3ff5b33b1ce712df=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_688846f374351c92=function(){return new Object},A.wbg.__wbg_newnoargs_fd9e4bf8be2bc16d=function(j,e){return new Function(tH(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_ba35896968751d91=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_34ce8f1051e74449=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_next_01dd9234a5bf6d05=function(){return Nh(function(j){return j.next()},arguments)},A.wbg.__wbg_next_137428deb98342b0=function(j){return j.next},A.wbg.__wbg_node_02999533c4ea02e3=function(j){return j.node},A.wbg.__wbg_now_64d0bb151e5d3889=function(){return Date.now()},A.wbg.__wbg_process_5c1d670bc53614b8=function(j){return j.process},A.wbg.__wbg_queueMicrotask_2181040e064c0dc8=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_ef9ac43769cbcc4f=function(j){return j.queueMicrotask},A.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740=function(){return Nh(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_require_79b1e9274cde3c87=function(){return Nh(function(){return module.require},arguments)},A.wbg.__wbg_resolve_0bf7c44d641804f9=function(j){return Promise.resolve(j)},A.wbg.__wbg_set_1d80752d0d5f0b21=function(j,e,t){j[e>>>0]=t},A.wbg.__wbg_set_23d69db4e5c66a6e=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_set_3f1d0b984ed272ed=function(j,e,t){j[e]=t},A.wbg.__wbg_static_accessor_GLOBAL_0be7472e492ad3e3=function(){let j=typeof global>"u"?null:global;return zh(j)?0:L$(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_1a6eb482d12c9bfb=function(){let j=typeof globalThis>"u"?null:globalThis;return zh(j)?0:L$(j)},A.wbg.__wbg_static_accessor_SELF_1dc398a895c82351=function(){let j=typeof self>"u"?null:self;return zh(j)?0:L$(j)},A.wbg.__wbg_static_accessor_WINDOW_ae1c80c7eea8d64a=function(){let j=typeof window>"u"?null:window;return zh(j)?0:L$(j)},A.wbg.__wbg_subarray_46adeb9b86949d12=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_then_0438fad860fe38e1=function(j,e){return j.then(e)},A.wbg.__wbg_then_0ffafeddf0e182a4=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_value_4c32fd138a88eee2=function(j){return j.value},A.wbg.__wbg_versions_c71aa1626a93e0a1=function(j){return j.versions},A.wbg.__wbindgen_as_number=function(j){return+j},A.wbg.__wbindgen_boolean_get=function(j){let e=j;return typeof e=="boolean"?e?1:0:2},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper583=function(j,e,t){return LGj(j,e,289,JGj)},A.wbg.__wbindgen_debug_string=function(j,e){let t=fV(e),r=GV(t,ea.__wbindgen_malloc,ea.__wbindgen_realloc),a=FB;nG().setInt32(j+4*1,a,!0),nG().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(tH(j,e))},A.wbg.__wbindgen_in=function(j,e){return j in e},A.wbg.__wbindgen_init_externref_table=function(){let j=ea.__wbindgen_export_2,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_jsval_loose_eq=function(j,e){return j==e},A.wbg.__wbindgen_memory=function(){return ea.memory},A.wbg.__wbindgen_number_get=function(j,e){let t=e,r=typeof t=="number"?t:void 0;nG().setFloat64(j+8*1,zh(r)?0:r,!0),nG().setInt32(j+4*0,!zh(r),!0)},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=zh(r)?0:GV(r,ea.__wbindgen_malloc,ea.__wbindgen_realloc),n=FB;nG().setInt32(j+4*1,n,!0),nG().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return tH(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(tH(j,e))},A}function YGj(A,j){return ea=A.exports,I0A.__wbindgen_wasm_module=j,Rh=null,N$=null,ea.__wbindgen_start(),ea}async function I0A(A){if(ea!==void 0)return ea;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof A>"u"&&(A=new URL("confidential_computing_bg.wasm",import.meta.url));let j=WGj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await VGj(await A,j);return YGj(e,t)}var QGj=I0A,ZGj=bV($V(),1),AFj=bV(KGj(),1),jFj=(A,j)=>{let e=j.decode(A);if((0,ZGj.isLeft)(e))throw new Error("Failed to decode: "+(0,AFj.failure)(e.left).join(", "));return e.right},eFj=A=>typeof A=="object"&&A!==null&&"name"in A&&typeof A.name=="string"&&"message"in A&&typeof A.message=="string",tFj=bV(_Gj(),1);var rFj="Proxy-Status",aFj="SessionBridge",D0A="Session expired";var nFj=async(A,j)=>{switch(oFj(A.headers)){case 1:{let t=new Uint8Array(await A.arrayBuffer());return new Response(j(t),A)}case 0:throw A.status===401?new Error(D0A):new Error("Failed to proxy request to enclave service");case 2:throw new Error("Failed to proxy request to Session Bridge");default:throw new Error("Unsupported response origin")}},oFj=A=>{let j=A.get(rFj);if(!j)return 2;let t=(0,tFj.parseList)(j)[0];if(!t)return 2;let[r,a]=t,n=a.get("error");return r.toString()===aFj?n?0:1:2},iFj=function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};function sFj(A){return A}function O0A(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return j(A);case 3:return e(j(A));case 4:return t(e(j(A)));case 5:return r(t(e(j(A))));case 6:return a(r(t(e(j(A)))));case 7:return n(a(r(t(e(j(A))))));case 8:return o(n(a(r(t(e(j(A)))))));case 9:return i(o(n(a(r(t(e(j(A))))))));default:{for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}}var DV=function(A,j){var e=typeof A=="number"?function(t){return t.length>=A}:A;return function(){var t=Array.from(arguments);return e(arguments)?j.apply(this,t):function(r){return j.apply(void 0,iFj([r],t,!1))}}},lFj=function(A){return A._tag==="Left"},cFj=function(A){return{_tag:"Left",left:A}},dFj=function(A){return{_tag:"Right",right:A}};function P0A(A){return function(j,e){return A.map(j,function(){return e})}}function kFj(A){var j=P0A(A);return function(e){return j(e,void 0)}}function uFj(A){return function(j,e){return A.chain(j,function(t){return A.map(e(t),function(){return t})})}}var pFj=cFj,OV=dFj,mFj=DV(2,function(A,j){return bB(A)?A:j(A.right)}),C0A=function(A,j){return O0A(A,BFj(j))},EFj=function(A,j){return O0A(A,hFj(j))},PV="Either",BFj=function(A){return function(j){return bB(j)?j:OV(A(j.right))}},H0A={URI:PV,map:C0A},T2e=DV(2,P0A(H0A)),K2e=kFj(H0A),gFj=function(A){return function(j){return bB(j)?j:bB(A)?A:OV(j.right(A.right))}},hFj=gFj,qFj={URI:PV,map:C0A,ap:EFj,chain:mFj},vFj={URI:PV,fromEither:sFj},bB=lFj,S2e=DV(2,uFj(qFj)),M2e={fromEither:vFj.fromEither},ha=function(){var A=function(j,e){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},A(j,e)};return function(j,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A(j,e);function t(){this.constructor=j}j.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nH=function(){return nH=Object.assign||function(A){for(var j,e=1,t=arguments.length;e<t;e++){j=arguments[e];for(var r in j)Object.prototype.hasOwnProperty.call(j,r)&&(A[r]=j[r])}return A},nH.apply(this,arguments)},T0A=pFj,Qc=function(A,j,e){return T0A([{value:A,context:j,message:e}])},kl=OV,Pa=function(){function A(j,e,t,r){this.name=j,this.is=e,this.validate=t,this.encode=r,this.decode=this.decode.bind(this)}return A.prototype.pipe=function(j,e){var t=this;return e===void 0&&(e="pipe(".concat(this.name,", ").concat(j.name,")")),new A(e,j.is,function(r,a){var n=t.validate(r,a);return bB(n)?n:j.validate(n.right,a)},this.encode===po&&j.encode===po?po:function(r){return t.encode(j.encode(r))})},A.prototype.asDecoder=function(){return this},A.prototype.asEncoder=function(){return this},A.prototype.decode=function(j){return this.validate(j,[{key:"",type:this,actual:j}])},A}(),po=function(A){return A};function xFj(A){return A.displayName||A.name||"<function".concat(A.length,">")}function fFj(A,j,e,t){for(var r=A.length,a=Array(r+1),n=0;n<r;n++)a[n]=A[n];return a[r]={key:j,type:e,actual:t},a}function GFj(A,j){for(var e=j.length,t=0;t<e;t++)A.push(j[t])}var v0A=Object.prototype.hasOwnProperty;function FFj(A){return Object.keys(A).map(function(j){return"".concat(j,": ").concat(A[j].name)}).join(", ")}function bFj(A){for(var j=0;j<A.length;j++)if(A[j].encode!==po)return!1;return!0}function yFj(A){return"{ ".concat(FFj(A)," }")}var $Fj=function(A){ha(j,A);function j(){var e=A.call(this,"null",function(t){return t===null},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="NullType",e}return j}(Pa),_2e=new $Fj,wFj=function(A){ha(j,A);function j(){var e=A.call(this,"undefined",function(t){return t===void 0},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="UndefinedType",e}return j}(Pa),x0A=new wFj,IFj=function(A){ha(j,A);function j(){var e=A.call(this,"void",x0A.is,x0A.validate,po)||this;return e._tag="VoidType",e}return j}(Pa),L2e=new IFj,DFj=function(A){ha(j,A);function j(){var e=A.call(this,"unknown",function(t){return!0},kl,po)||this;return e._tag="UnknownType",e}return j}(Pa),N2e=new DFj,OFj=function(A){ha(j,A);function j(){var e=A.call(this,"string",function(t){return typeof t=="string"},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="StringType",e}return j}(Pa),FV=new OFj,PFj=function(A){ha(j,A);function j(){var e=A.call(this,"number",function(t){return typeof t=="number"},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="NumberType",e}return j}(Pa),K0A=new PFj,CFj=function(A){ha(j,A);function j(){var e=A.call(this,"bigint",function(t){return typeof t=="bigint"},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="BigIntType",e}return j}(Pa),z2e=new CFj,HFj=function(A){ha(j,A);function j(){var e=A.call(this,"boolean",function(t){return typeof t=="boolean"},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="BooleanType",e}return j}(Pa),R2e=new HFj,TFj=function(A){ha(j,A);function j(){var e=A.call(this,"UnknownArray",Array.isArray,function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="AnyArrayType",e}return j}(Pa),J2e=new TFj,KFj=function(A){ha(j,A);function j(){var e=A.call(this,"UnknownRecord",function(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="AnyDictionaryType",e}return j}(Pa),f0A=new KFj,U2e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.value=n,o._tag="LiteralType",o}return j}(Pa),X2e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.keys=n,o._tag="KeyofType",o}return j}(Pa),SFj=function(A){ha(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.type=n,i.predicate=o,i._tag="RefinementType",i}return j}(Pa);function MFj(A,j,e){return _0A(A,j,e)}var V2e=MFj(K0A,function(A){return Number.isInteger(A)},"Int"),_Fj=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.runDefinition=n,o._tag="RecursiveType",o}return j}(Pa);Object.defineProperty(_Fj.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var W2e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ArrayType",o}return j}(Pa),LFj=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="InterfaceType",o}return j}(Pa);function S0A(A,j){j===void 0&&(j=yFj(A));var e=Object.keys(A),t=e.map(function(a){return A[a]}),r=e.length;return new LFj(j,function(a){if(f0A.is(a)){for(var n=0;n<r;n++){var o=e[n],i=a[o];if(i===void 0&&!v0A.call(a,o)||!t[n].is(i))return!1}return!0}return!1},function(a,n){var o=f0A.validate(a,n);if(bB(o))return o;for(var i=o.right,s=i,l=[],d=0;d<r;d++){var k=e[d],u=s[k],m=t[d],I=m.validate(u,fFj(n,k,m,u));if(bB(I))GFj(l,I.left);else{var S=I.right;(S!==u||S===void 0&&!v0A.call(s,k))&&(s===i&&(s=nH({},i)),s[k]=S)}}return l.length>0?T0A(l):kl(s)},bFj(t)?po:function(a){for(var n=nH({},a),o=0;o<r;o++){var i=e[o],s=t[o].encode;s!==po&&(n[i]=s(a[i]))}return n},A)}var Y2e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="PartialType",o}return j}(Pa),Q2e=function(A){ha(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.domain=n,i.codomain=o,i._tag="DictionaryType",i}return j}(Pa),NFj=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="UnionType",o}return j}(Pa),Z2e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="IntersectionType",o}return j}(Pa),A_e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="TupleType",o}return j}(Pa),zFj=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyType",o}return j}(Pa);function M0A(A,j){return j===void 0&&(j="Readonly<".concat(A.name,">")),new zFj(j,A.is,A.validate,A.encode,A)}var j_e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyArrayType",o}return j}(Pa),e_e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ExactType",o}return j}(Pa),RFj=function(A){ha(j,A);function j(){var e=A.call(this,"Function",function(t){return typeof t=="function"},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="FunctionType",e}return j}(Pa),t_e=new RFj,JFj=function(A){ha(j,A);function j(){var e=A.call(this,"never",function(t){return!1},function(t,r){return Qc(t,r)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return j}(Pa),r_e=new JFj,UFj=function(A){ha(j,A);function j(){var e=A.call(this,"any",function(t){return!0},kl,po)||this;return e._tag="AnyType",e}return j}(Pa),a_e=new UFj;function _0A(A,j,e){return e===void 0&&(e="(".concat(A.name," | ").concat(xFj(j),")")),new SFj(e,function(t){return A.is(t)&&j(t)},function(t,r){var a=A.validate(t,r);if(bB(a))return a;var n=a.right;return j(n)?kl(n):Qc(n,r)},A.encode,A,j)}var n_e=_0A(K0A,Number.isInteger,"Integer"),o_e=function(A){ha(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a,n)||this;return i.tag=o,i}return j}(NFj),XFj=function(A){ha(j,A);function j(){var e=A.call(this,"object",function(t){return t!==null&&typeof t=="object"},function(t,r){return e.is(t)?kl(t):Qc(t,r)},po)||this;return e._tag="ObjectType",e}return j}(Pa),i_e=new XFj,s_e=function(A){ha(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="StrictType",o}return j}(Pa),VFj=M0A(S0A({handshakeMessage:FV,sessionUuid:FV},"SessionHandshakeResponse")),l_e=M0A(S0A({handshakeMessage:FV}),"SessionHandshakeRequest");var WFj=async A=>{if(!A.ok)throw new Error(`Failed to complete request with status ${A.status}: ${await A.text()}`);return jFj(await A.json(),VFj)},YFj=async A=>await Promise.all(A.map(async j=>{let t=await(await fetch(j)).arrayBuffer();return new Uint8Array(t)})),QFj=class L0A{constructor(j){this.sessionFactory=j,this.session=void 0}static create(j){let{verificationMode:e,performSessionHandshake:t}=j,r=rH.Upper;switch(e){case"unsafe-local":r=rH.Local;break;case"unsafe-lower":r=rH.Lower;break;case"upper":r=rH.Upper;break;default:throw new Error("invalid verification mode")}let a=async()=>RGj(async n=>t(n).then(WFj),YFj,r);return new L0A(a)}async fetch(j){try{return await this.fetchWithoutRefresh(j)}catch(e){if(eFj(e)&&e.message===D0A)return this.freeSession(),await this.fetchWithoutRefresh(j);throw e}}async fetchWithoutRefresh({destinationPath:j,bytes:e,sendRequest:t}){this.session??(this.session=await this.sessionFactory());let{message:r,sessionUuid:a}=this.session.encryptMessage(j,e),n=await t({sessionUuid:a,encryptedRequest:r});return await nFj(n,this.session.decryptMessage.bind(this.session))}freeSession(){this.session&&(this.session.free(),this.session=void 0)}},GB,N0A=async A=>GB?(GB=await GB,GB):(GB=ZFj(A),GB=await GB,GB),ZFj=async A=>{let{default:j}=await Promise.resolve().then(()=>W(B0A(),1));return await QGj(j),QFj.create(A)};var iG=A=>async(j,e,...t)=>{let{name:r,url:a,method:n="POST",destinationPath:o,body:i,responseType:s,timeout:l=3e4,srpEncrypted:d=!0,abortController:k}=A(...t),u=jbj(e),I=await(await N0A({performSessionHandshake:ebj({session:j}),verificationMode:u})).fetch({bytes:Ue.encode(i),destinationPath:o,sendRequest:tbj({session:j,name:r,url:a,method:n,timeout:l,srpEncrypted:d,abortController:k})});if(!I.ok)throw new Error("Request to the enclave failed due to internal error");let S=new Uint8Array(await I.arrayBuffer());return sj(S,Ue.pipe(s)).unwrap()},Abj=["b5dev.com","b5dev.ca","b5dev.eu","b5test.com","b5test.ca","b5test.eu","b5rev.com"],jbj=A=>{let j=A.split(":",1)[0]??"";return j.endsWith(".b5local.com")?"unsafe-local":Abj.some(e=>j.endsWith(`.${e}`))?"unsafe-lower":"upper"},ebj=({session:A})=>async j=>A.request({encrypted:!1,method:"POST",name:E`confidentialComputingCreateSession`,url:"/api/v1/confidential-computing/session",body:j}),tbj=({session:A,name:j,url:e,method:t,timeout:r,srpEncrypted:a,abortController:n})=>async({encryptedRequest:o,sessionUuid:i})=>A.request({name:j,url:e,method:t,body:o,encrypted:a,options:{dataType:"arraybuffer",headers:{"Enclave-Session-Uuid":i},timeout:r,abortController:n}});var Mn=AA("web-api/api/provision.ts"),rbj=qj.readonly(qj.type({uuid:qj.string,accountName:qj.string,accountType:qj.string,accountUuid:qj.string,domain:qj.string,name:qj.string,email:qj.string,userState:qj.string,accountUsesNewKeysets:qj.union([qj.boolean,qj.undefined]),accountAuthMethods:qj.readonlyArray(_u),account2faTypes:GA(qj.readonlyArray(pe(di,"MfaType")),[]),accountKeyUuid:qj.string,accountKeyFormat:qj.string,enforce2faSetup:qj.boolean,disableEmergencyKit:GA(qj.boolean,!1),passwordRules:qj.string,b5WebProgressTimerEnabled:GA(qj.boolean,!1),extensionFirstForSsoScimEnabled:GA(qj.boolean,!1),extensionFirstForScimEnabled:GA(qj.boolean,!1),extensionAllowedPolicyFeatureEnabled:GA(qj.boolean,!1)}),"Provision"),abj=qj.readonly(qj.type({valid:qj.boolean}),"ProvisioningEmailVerificationValidity"),nbj=qj.readonly(qj.type({userState:qj.string}),"ProvisioningUserState"),obj=qj.readonly(qj.type({exists:qj.boolean}),"HostedProvisioningIntegrationExists"),ibj=qj.readonly(qj.type({lastResendAt:qj.union([qj.string,qj.undefined]),resendAllCooldown:qj.number}),"ResendDetails"),CV=Mn(A=>({name:"createProvisionUser",method:"POST",url:"/api/v1/provision/user",body:A,responseType:gB})),HV=Mn((A,j)=>({name:"startUserProvision",method:"PUT",url:`/api/v1/provision/user/${encodeURIComponent(A)}/start${it(j)}`,responseType:J})),TV=Mn(A=>({name:"suspendUserProvision",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/suspend`,responseType:J})),KV=Mn(A=>({name:"resendUserProvision",method:"PUT",url:"/api/v1/provision/resend",body:A,responseType:J})),SV=Mn(()=>({name:"resendAllUsersProvision",method:"PUT",url:"/api/v1/provision/resend-all",body:{},responseType:J})),MV=Mn(()=>({name:"getResendDetails",method:"GET",url:"/api/v1/provision/resend-all/details",responseType:ibj})),_V=Mn(()=>({name:"getProvisioningIntegrationExists",method:"GET",url:"/api/v1/hp/integrations/exists",responseType:obj})),LV=Mn((A,j)=>({name:"getProvisionDetails",method:"POST",url:`/api/v2/provision/user/${encodeURIComponent(A)}/details`,responseType:rbj,encrypted:!1,body:j})),NV=Mn((A,j)=>({name:"sendProvisionStartedConfirmation",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/send`,responseType:J,encrypted:!1,body:j})),zV=Mn((A,j)=>({name:"sendProvisionedConfirmation",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/confirm/start`,responseType:J,encrypted:!1,body:j})),RV=Mn((A,j)=>({name:"resendProvisioningEmailVerification",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/${j}/resend-verification`,responseType:J})),JV=Mn((A,j,e)=>({name:"checkProvisioningEmailVerification",method:"GET",url:`/api/v2/provision/user/${encodeURIComponent(A)}/${j}/${e}`,encrypted:!1,responseType:abj})),UV=Mn((A,j)=>({name:"findProvisionedUserState",method:"POST",url:`/api/v2/provision/user/${encodeURIComponent(A)}/state`,encrypted:!1,body:j,responseType:nbj})),sH=Mn(A=>({name:"acceptProvision",method:"POST",url:"/api/v1/provision/user/accept",body:A,responseType:J,encrypted:!1})),XV=Mn(A=>({name:"finishConfirmationSsoUser",method:"PUT",url:"/api/v1/provision/user/confirm/finish/sso",body:A,responseType:J,encrypted:!0})),VV=Mn(A=>({name:"getProvisionedPersonalVault",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(A)}/personalvault`,responseType:ci})),z0A=qj.readonly(qj.type({vaultUuid:qj.string,vaultKeySN:qj.number,encryptedBy:qj.string,encVaultKey:$A.JweB}),"ProvisionedVaultKey"),R0A=qj.readonly(qj.type({groupUuid:qj.string,keyset:$A.KeysetCiphertext}),"ProvisionedGroupKeyset"),J0A=qj.readonly(qj.type({keyset:$A.KeysetCiphertext,vaultKeys:qj.readonlyArray(z0A),groupKeysets:qj.readonlyArray(R0A)}),"ProvisionedKeys"),WV=Mn((A,j)=>({name:"completeUserProvision",method:"PUT",url:`/api/v1/provision/user/${encodeURIComponent(A)}/complete`,body:j,responseType:J})),YV=Mn(A=>({name:"getUserProvisionedKeys",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(A)}/keys`,responseType:J0A})),U0A=qj.readonly(qj.type({uuid:qj.string,sn:qj.number,priKey:$A.JwkRsaPriKey,symKey:$A.JwkSymKey,signingKey:$A.JwkEcPriKey}),"PsaPlaintextKeyset"),sbj=qj.readonly(qj.type({psaKeyset:U0A,provisioningGroupPublicKey:$A.JwkRsaPubKey,emailDomains:qj.array(qj.string),recoveryGroupUuid:qj.string,notificationEmails:qj.array(qj.string),identityProvider:qj.string}),"ProvisioningRegistrationData"),X0A=qj.readonly(qj.type({apiSecret:qj.string}),"RegisterProvisioningResponse"),QV=iG((A,j)=>({method:"POST",name:E`registerProvisioningIntegration`,url:`/api/v1/hp/integrations/${j}`,destinationPath:"/provisioning-key-service/api/v1/integration/create",body:A,responseType:X0A})),z$;(function(A){A.EncryptedPuk="encrypted-puk"})(z$||(z$={}));var sG;(function(A){A.Active="A",A.Suspended="S"})(sG||(sG={}));var R$;(function(A){A.EntraId="ENTRA_ID",A.Okta="OKTA",A.Unknown="UNKNOWN"})(R$||(R$={}));var V0A=qj.readonly(qj.intersection([qj.type({state:pe(sG,"HostedProvisioningIntegrationState"),notificationEmails:qj.array(qj.string),identityProvider:GA(pe(R$,"ProvisioningServiceIdp"),R$.Unknown)}),qj.partial({encryptedPuk:$A.JweB})]),"HostedProvisioningIntegration"),W0A=qj.readonly(qj.type({integration:V0A}),"HostedProvisioningIntegrationResponse"),ZV=Mn((A,j)=>({name:"getHostedProvisioningIntegration",method:"GET",url:`/api/v1/hp/integrations/${A}${it({attrs:j})}`,responseType:W0A})),Y0A=qj.readonly(qj.type({list:qj.string,signature:qj.string}),"EmailDomains"),Q0A=qj.readonly(qj.partial({emailDomains:Y0A,state:qj.string,notificationEmails:qj.array(qj.string)}),"UpdateHostedProvisioningIntegration"),J$=Mn((A,j)=>({name:"updateHostedProvisioningIntegration",method:"PATCH",url:`/api/v1/hp/integrations/${A}`,body:j,responseType:Q0A})),Z0A=qj.readonly(qj.type({srpx:qj.string,auk:$A.JwkSymKey}),"ProvisionCredentialBundle"),AyA=qj.readonly(qj.type({credentialBundle:Z0A}),"FinishUserConfirmationResponse"),AW=iG(A=>({method:"POST",name:E`finishUserConfirmation`,url:"/api/v1/provision/user/confirm/finish",destinationPath:"/provisioning-key-service/api/v1/user/confirm/finish",srpEncrypted:!1,body:A,responseType:AyA})),jW=Mn(A=>({method:"PUT",name:"completeProvisionedUserSignup",url:"/api/v1/provision/user/confirm/finish",body:A,responseType:J})),lbj=qj.readonly(qj.type({apiSecret:qj.string,userUuids:qj.readonly(qj.array(qj.string))}),"MigrateUsersData"),jyA=qj.readonly(qj.type({}),"MigrateUsersResponse"),eW=iG((A,j)=>({method:"POST",name:E`migrateUsersToHostedProvisioning`,url:`/api/v1/provision/user-migrations/${j}`,destinationPath:"/provisioning-key-service/api/v1/user-migrations",body:A,responseType:jyA}));var Ne=W(aA());var rm=AA("web-api/api/recovery.ts"),cbj=Ne.readonly(Ne.type({uuid:Ne.string,accountUuid:Ne.string,accountName:Ne.string,accountType:Ne.string,domain:Ne.string,name:Ne.string,email:Ne.string,passwordRules:Ne.string,accountUsesNewKeysets:Ne.union([Ne.boolean,Ne.undefined]),accountAuthMethods:Ne.array(_u),disableEmergencyKit:GA(Ne.boolean,!1),recoveryKeysExist:GA(Ne.boolean,!1),isPkvEnabled:GA(Ne.boolean,!1)}),"Recovery"),P_e=Ne.readonly(Ne.type({token:Ne.string}),"FindRecoveryDetails"),C_e=Ne.readonly(Ne.type({token:Ne.string,emailVerificationChallenge:Ne.string}),"RecoveryChallengeVerify"),dbj=Ne.readonly(Ne.type({emailVerificationSuccessToken:Ne.string}),"RecoveryChallengeVerifyResponse"),tW=rm((A,j)=>({name:"findRecoveryDetails",method:"POST",url:`/api/v1/recover/${encodeURIComponent(A)}/details`,body:j,responseType:cbj,encrypted:!1})),rW=rm((A,j)=>({name:"recoveryVerifyEmailStart",method:"POST",url:`/api/v2/recover/${encodeURIComponent(A)}/verify-email/start`,body:j,responseType:J,encrypted:!1})),aW=rm((A,j)=>({name:"recoveryVerifyEmailResend",method:"POST",url:`/api/v2/recover/${encodeURIComponent(A)}/verify-email/resend`,body:j,responseType:J,encrypted:!1})),nW=rm((A,j)=>({name:"recoveryVerifyEmailAuth",method:"POST",url:`/api/v2/recover/${encodeURIComponent(A)}/verify-email/verify`,body:j,responseType:dbj,encrypted:!1})),oW=rm(A=>({name:"beginRecovery",method:"PUT",url:`/api/v1/recover/begin/${A.join(",")}`,responseType:J})),lH=rm(A=>({name:"continueRecovery",method:"POST",url:"/api/v2/recover/continue",body:A,responseType:J,encrypted:!1})),iW=rm(A=>({name:"cancelRecovery",method:"PUT",url:`/api/v1/recover/cancel/${A.join(",")}`,responseType:J})),eyA=Ne.readonly(Ne.type({vaultUuid:Ne.string,vaultKeySN:Ne.number,encryptedBy:Ne.string,encVaultKey:$A.JweB}),"RecoverableVaultKey"),tyA=Ne.readonly(Ne.type({groupUuid:Ne.string,keyset:$A.KeysetCiphertext}),"RecoverableGroupKeyset"),ryA=Ne.readonly(Ne.type({packageUuid:Ne.string,key:$A.JweB}),"RecoverablePackageKey"),sW=Ne.readonly(Ne.type({vaultKeys:Ne.readonlyArray(eyA),groupKeysets:Ne.readonlyArray(tyA),packageKeys:Ne.readonlyArray(ryA)}),"RecoverableKeys"),ayA=Ne.readonly(Ne.type({keys:Ne.readonlyArray(sW)}),"RecoverableKeysForPeople"),kbj=Ne.readonly(Ne.intersection([Ne.type({keys:Ne.readonlyArray(sW)},"type"),Ne.partial({trustLogEntry:Ne.string},"partial")])),cH=rm((A,j)=>({name:"completeRecovery",method:"PUT",url:`/api/v1/recover/complete/${A.join(",")}`,body:j,responseType:J})),lW=rm(A=>({name:"getRecoverableKeysForPeople",method:"GET",url:`/api/v1/recover/keys/${A.join(",")}`,responseType:ayA}));var jn=W(aA());var ubj=AA("web-api/api/dashboard.ts"),nyA=jn.readonly(jn.intersection([jn.type({activeUsersCount:jn.number,deletedUsersCount:jn.number,invitedUsersCount:jn.number,invitedUsersToConfirm:jn.array(Ao),invitedUsersToConfirmCount:jn.number,guestUsersCount:jn.number,recoveredUsersToConfirm:jn.array(Ao),recoveredUsersToConfirmCount:jn.number,recoveringUsersCount:jn.number,suspendedUsersCount:jn.number,travelingUsers:jn.array(Ao),travelingUsersCount:jn.number}),jn.partial({activeUsersExtensionInstalls:jn.number})]),"ReportDashboardOverview"),cW=ubj(()=>({name:"getDashboardReport",method:"GET",url:"/api/v1/report/dashboard",responseType:nyA}));var pA=W(aA());var lG=W(Io()),Zc;(function(A){A[A.AllTime=0]="AllTime",A[A.LastWeek=7]="LastWeek",A[A.LastMonth=30]="LastMonth",A[A.Last2Months=60]="Last2Months",A[A.Last3Months=90]="Last3Months",A[A.Last6Months=180]="Last6Months",A[A.Last12Months=365]="Last12Months"})(Zc||(Zc={}));var dH=A=>{if(A===Zc.AllTime)return new Date(0);let j=A<30?{days:A}:{months:A/30};return(0,lG.default)().subtract(j).toDate()},pbj=[Zc.LastWeek,Zc.LastMonth,Zc.Last2Months,Zc.Last3Months,Zc.Last6Months,Zc.Last12Months,Zc.AllTime],mbj=A=>j=>j===Zc.AllTime?0:(0,lG.default)(A).subtract(j,"days").valueOf(),Ebj=A=>j=>ti(j,(e,t)=>(0,lG.default)(t.lastUsedAt).isSameOrBefore(e)?(0,lG.default)(t.lastUsedAt):e,(0,lG.default)(A)).valueOf();var ze=W(aA());var Nu=AA("web-api/api/vault_item.ts"),oyA=ze.readonly(ze.type({fileId:ze.string,signature:ze.string}),"FileReference"),am=ze.intersection([ze.type({uuid:ze.string,templateUuid:ze.string,itemVersion:ze.number,encryptedBy:ze.string,encOverview:$A.JweB},"type"),ze.partial({faveIndex:ze.number,trashed:ze.string,createdAt:ze.string,updatedAt:ze.string,changerUuid:ze.string,packageUuid:ze.string,encDetails:$A.JweB,fileReferences:ze.readonlyArray(oyA)},"partial")],"VaultItem"),dW=ze.intersection([ze.type({contentVersion:ze.number,batchComplete:ze.boolean},"type"),ze.partial({items:ze.readonlyArray(am),deletedItemUuids:ze.readonlyArray(ze.string)},"partial")],"ItemsResponse"),kW=Nu(A=>({name:"getVaultItemsOverviews",method:"GET",url:`/api/v1/vault/${A}/items/overviews`,responseType:dW})),uW=Nu((A,j)=>({name:"getVaultItems",method:"GET",url:`/api/v2/vault/${A}/${j}/items`,responseType:dW})),iyA=ze.readonly(ze.type({item:am}),"ItemDetailResponse"),pW=Nu((A,j)=>({name:"getVaultItemDetails",method:"GET",url:`/api/v1/vault/${A}/item/${j}`,responseType:iyA})),mW=Nu((A,j)=>({name:"getVaultItemVersion",method:"GET",url:`/api/v1/vault/${A}/itemversion/${j}`,responseType:ze.number})),syA=ze.readonly(ze.type({changerUUID:ze.string,changerFullName:ze.string,changerEmail:ze.string,changerAvatar:ze.string,updatedAt:ze.string,itemVersion:ze.number}),"ItemHistoryMetadata"),lyA=ze.readonly(ze.type({history:ze.array(syA)}),"ItemHistoryResponse"),EW=Nu((A,j)=>({name:"getVaultItemHistory",method:"GET",url:`/api/v1/vault/${A}/item/${j}/history`,responseType:lyA})),BW=Nu((A,j,e)=>({name:"getPreviousVersionOfItem",method:"GET",url:`/api/v1/vault/${A}/item/${j}/history/${e}`,responseType:am})),Bbj=ze.type({retentionDays:ze.number,since:ze.string,items:ze.array(am)},"DeletedVaultItemsResponse"),gW=Nu(A=>({name:"getDeletedVaultItems",method:"GET",url:`/api/v2/vault/${A}/items/deleted`,responseType:Bbj})),hW=Nu((A,j)=>({name:"postPurgeDeletedVaultItems",method:"POST",url:`/api/v2/vault/${A}/items/deleted/purge`,body:{itemUuids:j},responseType:J})),qW=Nu((A,j)=>({name:"deleteVaultItemHistory",method:"DELETE",url:`/api/v1/vault/${A}/item/${j}/history/all`,responseType:J})),cyA=ze.type({contentVersion:ze.number,updatedItems:GA(ze.record(ze.string,ze.number),{}),failedItems:GA(ze.record(ze.string,ze.number),{})},"PatchVaultItemsResponse"),vW=Nu((A,j,e)=>({name:"patchVaultItems",method:"PATCH",url:`/api/v3/vault/${A}/${j}/items`,body:e,responseType:cyA}));var pi=AA("web-api/api/report.ts"),W$=50,U$;(function(A){A.Overview="overview",A.ExtendedOverview="extended",A.Users="users"})(U$||(U$={}));var X$;(function(A){A.NoManager="nomanager",A.HighPopulation="highlyshared"})(X$||(X$={}));var V$;(function(A){A.UsersCount="userscount"})(V$||(V$={}));var cG;(function(A){A.Active="active",A.All="all",A.Inactive="inactive"})(cG||(cG={}));var gbj=[cG.All,cG.Active,cG.Inactive],hbj=pA.type({vaultUuid:pA.string,count:pA.number}),dyA=pA.readonly(pA.type({user:gB,groupCount:pA.number,vaultCount:pA.number,itemCount:pA.number}),"ReportSectionUserOverview"),kyA=pA.readonly(pA.type({vaultUuid:pA.string,itemUuid:pA.string,lastUsedAt:pA.string,lastUsedVersion:pA.number,action:pA.union([pA.string,pA.undefined])}),"ReportUserItemUsage"),uyA=pA.readonly(pA.type({itemUsages:pA.readonlyArray(kyA),vaults:pA.readonlyArray(ci),vaultItemsByVault:pA.record(pA.string,pA.readonlyArray(am))}),"ReportSectionUserItemUsage"),pyA=pA.readonly(pA.partial({overview:dyA,itemUsage:uyA}),"ReportUser"),myA=pA.readonly(pA.type({usageByVaults:pA.array(hbj),totalUsage:pA.number}),"ReportUserItemUsageOverview"),EyA=pA.readonly(pA.partial({current:pA.string,later:pA.string,earlier:pA.string}),"ReportCursors"),ByA=pA.readonly(pA.type({vaultUuid:pA.string,userUuid:pA.string,itemUuid:pA.string,usedAt:pA.string,usedVersion:pA.number,action:pA.union([pA.string,pA.undefined])}),"ReportItemUsage"),xW=pA.readonly(pA.type({cursors:EyA,itemUsages:pA.readonlyArray(ByA),vaults:pA.record(pA.string,ci),vaultItems:pA.record(pA.string,am),partialUsers:pA.record(pA.string,Ao),hasMore:pA.boolean}),"ReportItem"),gyA=pA.readonly(pA.type({vault:ci,userCount:pA.number,groupCount:pA.number,currentUserUuids:pA.array(pA.string)}),"ReportSectionVaultOverview"),hyA=pA.readonly(pA.type({userUuid:pA.string,itemUuid:pA.string,lastUsedAt:pA.string,lastUsedVersion:pA.number,action:pA.union([pA.string,pA.undefined])}),"ReportVaultItemUsage"),qyA=pA.readonly(pA.type({itemUsages:pA.readonlyArray(hyA),vault:ci,vaultItems:pA.readonlyArray(am),usersByUserUuid:pA.record(pA.string,Ao)}),"ReportSectionVaultItemUsage"),vyA=pA.readonly(pA.partial({overview:gyA,itemUsage:qyA}),"ReportVault"),qbj=pA.readonly(pA.type({usersCount:pA.number,vault:ci}),"ReportVaultsItem"),xyA=pA.readonly(pA.type({items:pA.readonlyArray(qbj)}),"ReportVaults"),fyA=pA.readonly(pA.type({deviceCount:pA.number,hasMFAEnabled:pA.boolean,hasLinkedAccount:pA.boolean,lastAuthAt:ij(pA.string),createdAt:pA.string,personalItemCount:pA.number,personalVaultContentVersion:pA.number,user:Ao}),"ReportAccountUser"),GyA=pA.readonly(pA.type({userCount:pA.number,groupCount:pA.number,vaultCount:pA.number}),"ReportSectionAccountOverview"),FyA=pA.readonly(pA.partial({overview:GyA,users:pA.readonlyArray(fyA)}),"ReportAccount"),byA=pA.readonly(pA.type({userActiveCount:pA.number,userSuspendedCount:pA.number,userPendingCount:pA.number,userInRecoveryCount:pA.number,userGuestCount:pA.number,invitesPendingCount:pA.number,groupCount:pA.number,vaultCount:pA.number,vaultSharedCount:pA.number,privateVaultCount:pA.number,privateVaultItemsCount:pA.number,itemCount:pA.number,itemSharedCount:pA.number,deviceCount:pA.number,fileCount:pA.number,fileSize:pA.number}),"ReportSectionExtendedAccountOverview"),yyA=pA.readonly(pA.type({extended:byA}),"ReportOverview"),$yA=pA.readonly(pA.type({clientName:pA.string,count:pA.number,modernCount:pA.number}),"ReportOldDevicesOverviewClient"),wyA=pA.readonly(pA.type({clients:pA.readonlyArray($yA)}),"ReportOldDevicesOverview"),IyA=pA.readonly(pA.type({uuid:pA.string,name:pA.string,clientName:pA.string,osName:pA.string,osVersion:pA.string,lastAuthAt:pA.string}),"ReportOldDeviceDevice"),DyA=pA.readonly(pA.type({device:IyA,user:Ao}),"ReportOldDevice"),OyA=pA.readonly(pA.type({overview:wyA,devices:pA.readonlyArray(DyA)}),"ReportOldDevices"),PyA=pA.readonly(pA.type({reportName:pA.string,lastViewedAt:pA.string}),"LastViewedReport"),CyA=pA.readonly(pA.type({reports:pA.readonlyArray(PyA)}),"LastViewedReports"),HyA=pA.readonly(pA.type({userUuid:pA.string,userState:pA.string,type:pA.string,firstName:pA.string,lastName:pA.string,email:pA.string,lastAuthAt:ij(pA.string),deviceName:ij(pA.string),deviceClientName:ij(pA.string),extensionInstallCount:GA(pA.number,0),userItemCount:GA(pA.number,0)}),"UserExtensionInstallReport"),TyA=pA.readonly(pA.type({currentPage:pA.number,itemsPerPage:pA.number,itemsReturned:pA.number,totalItems:pA.number,totalPages:pA.number}),"ExtensionAdoptionPaginationReport"),KyA=pA.readonly(pA.type({activeUsersLastWeek:pA.number,activeUsersWithExtensionInstalls:pA.number,totalActiveUsers:pA.number}),"ExtensionAdoptionExtraData"),SyA=pA.readonly(pA.type({data:pA.array(HyA),pagination:TyA}),"ExtensionAdoptionReport"),MyA=pA.readonly(pA.type({csv:pA.string}),"ExtensionAdoptionReportCsv"),kH=A=>"itemUuid"in A&&wy(A.itemUuid)?qh(A.vaultUuid):"vaultUuid"in A&&qh(A.vaultUuid)||"userUuid"in A&&$y(A.userUuid),fW=pi((A,j)=>({name:"getUserReport",method:"GET",url:`/api/v1/report/user/${A}?sections=${j.join(",")}`,responseType:pyA})),GW=pi((A,j)=>({name:"getItemReportWithCursors",method:"GET",url:`/api/v1/report/itemusage/history${it({...EO(A,(t,r)=>mO(r)),cursor:j.earlier})}`,responseType:xW,validation:"unsafe_report_only"})),FW=pi((A,j)=>({name:"getItemReportWithFilters",method:"GET",url:`/api/v1/report/itemusage/history${it({...EO(A,(t,r)=>mO(r)),date:j.date.toISOString(),todate:dH(j.toDate).toISOString(),limit:j.limit})}`,responseType:xW,validation:"unsafe_report_only"})),bW=pi((A,j)=>({name:"getUserItemUsageOverview",method:"GET",url:`/api/v1/report/itemusage/overview${it({"user-uuid":A,date:j.date.toISOString(),todate:dH(j.toDate).toISOString()})}`,responseType:myA})),yW=pi((A,j)=>({name:"getVaultReport",method:"GET",url:`/api/v1/report/vault/${A}?sections=${j.join(",")}`,responseType:vyA})),$W=pi((A,j)=>{let e=`/api/v1/report/vaults/${A}`;return j.length>0&&(e+=`?attrs=${j.join(",")}`),{name:"getVaultsReport",method:"GET",url:e,responseType:xyA}}),wW=pi(A=>({name:"getAccountReport",method:"GET",url:`/api/v2/report/account?sections=${A.join(",")}`,responseType:FyA})),IW=pi(A=>({name:"getOverviewReport",method:"GET",url:`/api/v1/report/overview?sections=${A.join(",")}`,responseType:yyA,options:{timeout:6e4}})),DW=pi(()=>({name:"getOldDevicesReport",method:"GET",url:"/api/v1/report/devices/old",responseType:OyA})),uH=pA.readonly(pA.type({csv:pA.string}),"GetAccountReportCsvResponse"),OW=pi(()=>({name:"getAccountReportCsv",method:"GET",url:"/api/v1/report/account/csv",responseType:uH})),PW=pi(A=>({name:"sendUnusedPrivateVaultEmail",method:"POST",url:"/api/v1/report/teamusage/unused-private-vault/notify",body:{recipients:A},responseType:J})),CW=pi(A=>({name:"sendUnredeemedFamilyAccountEmail",method:"POST",url:"/api/v1/report/teamusage/unredeemed-family-account/notify",body:{recipients:A},responseType:J})),HW=pi(A=>({name:"sendNoSigninPastMonthEmail",method:"POST",url:"/api/v1/report/teamusage/no-signin-past-month/notify",body:{recipients:A},responseType:J})),TW=pi(()=>({name:"getLastViewedReports",method:"GET",url:"/api/v1/report/lastviewed",responseType:CyA})),KW=pi(A=>{let j={currentPage:A?.currentPage,itemsPerPage:A?.itemsPerPage,extensionStatus:A?.extensionStatus,search:A?.search,sortBy:A?.sortBy,sortDirection:A?.sortDirection};return{name:"getExtensionAdoptionReport",method:"POST",url:"/api/v1/report/extension-adoption",responseType:SyA,body:j}}),SW=pi(()=>({name:"getExtensionAdoptionOverview",method:"GET",url:"/api/v1/report/extension-adoption/overview",responseType:KyA})),MW=pi(()=>({name:"getExtensionAdoptionReportCsv",method:"GET",url:"/api/v1/report/extension-adoption/csv",responseType:MyA}));var At=W(aA());var lr=W(aA());var pH=AA("web-api/api/serviceaccount_tokens.ts"),mH=lr.type({u:lr.string,a:lr.number},"VaultClaim"),_yA=lr.intersection([lr.type({jti:lr.string,issuer:lr.string,audience:lr.string,features:lr.readonlyArray(lr.string)},"type"),lr.partial({expiry:lr.string,vaults:lr.readonlyArray(mH),signatureHash:lr.string},"partial")],"TokenInfo"),EH=lr.intersection([lr.type({name:lr.string,state:lr.string,signedBy:lr.string,createdAt:lr.string,tokenInfo:_yA},"type"),lr.partial({expiresAt:lr.string},"partial")],"ServiceAccountToken"),e9e=lr.type({name:lr.string,subject:lr.string,account_uuid:lr.string,token_info:lr.intersection([_yA,lr.type({signatureHash:lr.string})]),kid:lr.string},"RegisterServiceAccountTokenRequest"),vbj=lr.readonly(lr.type({id:lr.string}),"RegisterServiceAccountTokenResponse"),t9e=lr.type({name:lr.string},"RenameServiceAccountTokenRequest"),BH=pH(A=>({name:"registerServiceAccountToken",method:"POST",url:"/api/v2/serviceaccounts/token",body:A,responseType:vbj})),_W=pH((A,j,e)=>{let t=encodeURIComponent(A),r=encodeURIComponent(j);return{name:"renameServiceAccountToken",method:"PATCH",url:`/api/v1/serviceaccounts/${t}/tokens/${r}`,body:e,responseType:J}}),LW=pH((A,j)=>{let e=encodeURIComponent(A),t=encodeURIComponent(j);return{name:"revokeServiceAccountToken",method:"DELETE",url:`/api/v1/serviceaccounts/${e}/tokens/${t}`,responseType:J}}),NW=pH(()=>({name:"revokeAllServiceAccountTokensForAccount",method:"DELETE",url:"/api/v1/serviceaccounts/tokens",responseType:J}));var dG=AA("web-api/api/serviceaccounts.ts"),zW=At.type({totalVaults:At.number,displayable:At.array(Wd)},"ServiceAccountVaultAccess"),RW=At.type({credits:At.number},"ServiceAccountBillables"),LyA=pe(gt,"ServiceAccountType"),NyA=At.intersection([QC,At.readonly(At.type({creatorUuid:At.string,serviceAccountType:LyA},"type")),At.partial({tokens:At.readonlyArray(EH),serviceAccountVaultAccess:At.readonly(zW),billables:At.readonly(RW),permissions:At.number,rotatedAt:At.string,expiresAt:At.string},"partial")],"ServiceAccount"),zyA=At.intersection([h$,At.readonly(At.type({createdAt:At.string,creatorUuid:At.string,serviceAccountType:LyA,tokensVersion:At.number},"type")),At.partial({creatorFirstName:At.string,creatorLastName:At.string,creatorState:At.string,tokens:At.array(EH),devices:At.array(cl.Type),serviceAccountVaultAccess:At.readonly(zW),billables:At.readonly(RW),rotatedAt:At.string},"partial")],"ServiceAccountUser"),RyA=At.readonly(At.type({serviceAccounts:At.array(G$)}),"GetServiceAccountsResponse"),JyA=At.readonly(At.intersection([At.type({serviceAccount:zyA},"type"),At.partial({devices:At.array(cl.Type)},"partial")],"Integration")),UyA=At.readonly(At.intersection([At.type({integrations:At.array(JyA)},"type"),At.partial({releases:DX},"partial")],"GetIntegrationsResponse")),JW=dG(A=>({name:"createServiceAccountV3",method:"POST",url:"/api/v3/serviceaccounts",body:A,responseType:gB})),UW=dG(A=>({name:"getIntegrations",method:"GET",url:`/api/v1/integrations${A.length>0?it({attrs:A}):""}`,responseType:UyA,options:{timeout:6e4}})),Y$=dG(()=>({name:"getServiceAccounts",method:"GET",url:"/api/v1/serviceaccounts",responseType:RyA})),XyA=At.readonly(At.type({email:At.string,token:At.string,uuid:At.string,throttleKey:At.string,accessors:At.readonlyArray(BB)},"CreateServiceAccountPreflightResponse")),XW=dG(A=>({name:"createServiceAccountPreflight",method:"GET",url:`/api/v1/serviceaccounts/preflight/${encodeURIComponent(A)}`,responseType:XyA})),VW=dG((A,j)=>({name:"getServiceAccount",method:"GET",url:`/api/v1/serviceaccount/${A}${j.length>0?it({attrs:j}):""}`,responseType:NyA})),WW=dG((A,j)=>({name:"updateServiceAccount",method:"PATCH",url:`/api/v1/serviceaccount/${A}`,body:j,responseType:J}));var Xe=W(aA());var VyA=AA("web-api/api/sign_in_attempts.ts"),nm;(function(A){A.Reported="report_firewall_rule",A.Blocked="firewall_rule",A.Credentials="credentials",A.Mfa="mfa",A.AppVersion="app_version",A.Sso="sso"})(nm||(nm={}));var yB;(function(A){A.Country="country",A.Continent="continent",A.Ip="ip",A.Anonymous="anonymous",A.All="all"})(yB||(yB={}));var xbj=Xe.union([Xe.literal(nm.Reported),Xe.literal(nm.Blocked),Xe.literal(nm.Credentials),Xe.literal(nm.Mfa),Xe.literal(nm.AppVersion),Xe.literal(nm.Sso)],"SignInAttemptReasonsEnum"),fbj=Xe.union([Xe.literal(yB.Country),Xe.literal(yB.Continent),Xe.literal(yB.Ip),Xe.literal(yB.Anonymous),Xe.literal(yB.All)],"SignInAuxInfoTypesEnum"),WyA=Xe.readonly(Xe.intersection([Xe.type({country:Xe.string,date:Xe.string,deviceUuid:Xe.string,email:Xe.string,ip:Xe.string,location:Xe.string,osName:Xe.string,clientName:Xe.string,point:Xe.type({lat:Xe.number,lon:Xe.number}),reason:xbj,userUuid:Xe.string,uuid:Xe.string},"type"),Xe.partial({auxInfo:Xe.partial({type:fbj,value:Xe.string})},"partial")]),"SignInAttempt"),YyA=Xe.readonly(Xe.type({attempts:Xe.readonlyArray(WyA)}),"GetSignInAttemptsResponse"),Gbj=Xe.readonly(Xe.partial({userUuid:Xe.string,includeStates:Xe.array(Xe.string),excludeStates:Xe.array(Xe.string),limit:Xe.number,cursor:Xe.string}),"GetSignInAttemptRequest"),QyA=Xe.readonly(Xe.type({attempts:Xe.array(WyA),cursor:Xe.string,hasMore:Xe.boolean,totalCount:Xe.number}),"GetSignInAttemptsResponseV2"),Fbj=VyA(()=>({name:"getSignInAttempts",method:"GET",url:"/api/v1/signinattempts",responseType:YyA})),bbj=VyA(A=>({name:"getSigninAttemptsV2",method:"POST",url:"/api/v2/signinattempts",body:A,responseType:QyA}));var ne=W(aA());var om=AA("web-api/api/signup.ts"),ybj=ne.readonly(ne.partial({promoCode:ne.string},"partial"),"UpdateSignupRequest"),ZyA=ne.readonly(ne.type({isEnabled:ne.boolean,isRequired:ne.boolean}),"SignupFeatureCreditCardForm"),A$A=ne.readonly(ne.type({isRequired:ne.boolean,challenge:KC}),"SignupFeatureUnlockWithPasskey"),j$A=ne.readonly(ne.partial({creditCardForm:ZyA,passkey:A$A}),"SignupFeatures"),e$A=ne.readonly(ne.type({accountUuid:ne.string,accountName:ne.string,domain:ne.string,avatar:ne.string,type:ne.string,userAvatar:ne.string,accountKeyFormat:ne.string,accountKeyUuid:ne.string,lastAuthAt:ne.string,createdAt:ne.string}),"AccountInfo"),Q$=ne.readonly(ne.intersection([ne.type({uuid:ne.string,domain:ne.string,state:ne.string,createdAt:ne.string,completedAt:ne.string,expiresAt:ne.string,name:ne.string,type:ne.string,source:ne.string,email:ne.string,language:ne.string,availablePlans:ne.array(xh),tierName:ne.string,trialEndsAt:ne.string,features:j$A,setupIntentCode:ne.string},"SignupRequired"),ne.partial({stepUuid:ne.string,promoCode:ne.string,flowServiceUuid:ne.string,setupIntentCode:ne.string,defaultBillingFrequency:gf,duplicateAccounts:ne.array(e$A),accountCreationDisabled:ne.boolean},"SignupPartial")],"Signup")),$bj=ne.readonly(ne.type({type:ne.literal("O"),payload:ne.type({code:ne.string,state:ne.string})}),"SsoOidcIdentity"),gH;(function(A){A.CtoCiso="CTO/CISO",A.Devops="DevOps",A.Engineering="Engineering",A.Executive="Executive",A.Finance="Finance",A.Hr="HR",A.It="IT",A.Legal="Legal",A.Marketing="Marketing",A.Operations="Operations",A.Sales="Sales",A.Security="Security",A.Other="Other"})(gH||(gH={}));var wbj=ne.readonly(ne.type({companyRole:pe(gH,"CompanyRole")}),"UserMeta"),Ibj=ne.readonly(ne.type({emailResendToken:ne.string}),"AccountSignUp"),YW=om(A=>({name:"legacySignUpAccount",method:"POST",url:"/api/v1/signup",body:A,responseType:J,encrypted:!1,options:{withCredentials:!0}})),QW=om(A=>({name:"signUpAccount",method:"POST",url:"/api/v2/signup",body:A,responseType:Ibj,encrypted:!1,options:{withCredentials:!0}})),Dbj=ne.intersection([ne.readonly(ne.type({userUuid:ne.string},"readonlyUserUuid")),ne.readonly(ne.partial({sessionUuid:ne.string,signInTokenDetails:Mu},"readonlyAuthDetails"))],"UserRegistrationResponse"),hH=om(A=>({name:"signUpUser",method:"POST",url:"/api/v2/user",body:A,responseType:Dbj,encrypted:!1})),qH=om(A=>({name:"getSignupDetails",method:"GET",url:`/api/v2/signup/${A}`,responseType:Q$,encrypted:!1})),ZW=om((A,j)=>({name:"updateSignup",method:"PATCH",url:`/api/v3/signup/${A}`,body:j,responseType:Q$})),AY=om((A,j)=>({name:"updateSignupAccountType",method:"PATCH",url:`/api/v2/signup/${A}`,body:j,responseType:Q$})),jY=om((A,j,e)=>({name:"signUpAndGetInfo",method:"GET",url:`/api/v2/signup/${A}?email=${encodeURIComponent(j)}&account-type=${e}`,responseType:Q$,encrypted:!1})),t$A=ne.readonly(ne.type({accountUuid:ne.string,userUuid:ne.string,signInTokenDetails:ij(Mu)}),"AccountRegistrationResponse"),vH=om(A=>({name:"postAccount",method:"POST",url:"/api/v1/account",body:A,responseType:t$A,encrypted:!1})),eY=om(A=>({name:"resendVerificationEmail",method:"POST",url:`/api/v1/signup/resend/${A}`,responseType:J}));var $e=W(aA());var ek=AA("web-api/api/slack.ts"),r$A=9e4,jk;(function(A){A.Active="A",A.Inactive="I",A.NotLoaded="N"})(jk||(jk={}));var xH=$e.readonly($e.type({state:pe(jk,"SlackAppState"),notifChannelUid:$e.string,alertChannelUid:$e.string,scope:$e.string,teamName:$e.string,alertNotifTeamUid:$e.string,enterpriseUid:$e.string,enterpriseName:$e.string,enterpriseUrl:$e.string,enterpriseTeams:GA($e.readonlyArray($e.string),[]),isGranular:$e.boolean}),"SlackApp"),fH=$e.readonly($e.type({nonce:$e.string}),"SlackNonce"),GH=$e.readonly($e.intersection([$e.type({email:$e.string,hasPendingInvite:$e.boolean,hasTeamUser:$e.boolean,name:$e.string,uid:$e.string},"type"),$e.partial({avatar:$e.string,handle:$e.string},"partial")]),"SlackUser"),tY=$e.readonly($e.type({users:$e.array(GH)}),"SlackUsers"),FH=$e.readonly($e.intersection([$e.type({name:$e.string,uid:$e.string,numMembers:$e.number,isPrivate:$e.boolean},"type"),$e.partial({topic:$e.string},"partial")]),"SlackChannel"),rY=$e.readonly($e.type({channels:$e.array(FH),cursor:$e.string}),"GetSlackChannelsResponse"),bH=$e.readonly($e.type({uid:$e.string,name:$e.string}),"SlackTeam"),Obj=$e.readonly($e.type({teams:$e.array(bH)}),"SlackTeams"),yH=$e.readonly($e.type({uid:$e.string,name:$e.string,numMembers:$e.number,handle:$e.string}),"SlackGroup"),a$A=$e.readonly($e.type({userGroups:$e.array(yH)}),"SlackGroups"),aY=ek(()=>({name:"getSlackUsers",method:"GET",url:"/api/v1/slack/users",responseType:tY})),nY=ek(A=>({name:"getSlackChannels",method:"GET",options:{timeout:r$A},url:`/api/v3/slack/channels${it({cursor:A})}`,responseType:rY})),oY=ek((A,j)=>({name:"getGridSlackChannels",method:"GET",options:{timeout:r$A},url:`/api/v3/slack/grid/teams/${A}/channels${it({cursor:j})}`,responseType:rY})),iY=ek(A=>({name:"getGridSlackGroups",method:"GET",url:`/api/v3/slack/grid/teams/${A}/usergroups`,responseType:a$A})),sY=ek(A=>({name:"getGridSlackUsers",method:"GET",url:`/api/v1/slack/grid/teams/${A}/users`,responseType:tY})),lY=ek(()=>({name:"getGridSlackTeams",method:"GET",url:"/api/v1/slack/grid/teams",responseType:Obj})),cY=ek(()=>({name:"getSlackGroups",method:"GET",url:"/api/v1/slack/usergroups",responseType:a$A})),dY=ek(()=>({name:"getSlackApp",method:"GET",url:"/api/v2/slack/app",responseType:xH})),kY=ek(A=>({name:"updateSlackApp",method:"PUT",url:"/api/v1/slack/app",body:A,responseType:J})),uY=ek(()=>({name:"postSlackNonce",method:"POST",url:"/api/v1/slack/oauth/nonce",responseType:fH})),pY=ek(A=>({name:"postSlackAccessToken",method:"POST",url:"/api/v1/slack/oauth/verify",body:A,responseType:J}));var qa=W(aA());var $B=AA("web-api/api/sso_enrollment.ts"),$H;(function(A){A.Web="WEB",A.Core="CORE",A.B5x="B5X",A.Unknown="UNKNOWN"})($H||($H={}));var n$A=pe($H,"LastAuthDeviceType"),o$A=qa.intersection([qa.type({clientType:n$A},"type"),qa.partial({clientName:qa.string},"partial")],"LastAuthDeviceForEnrollment"),Pbj=qa.readonly(qa.type({signInToken:qa.string}),"DeviceEnrollmentRequest"),i$A=qa.intersection([qa.type({enrollmentUuid:qa.string,accountKeyUuid:qa.string},"type"),qa.partial({lastDevice:o$A},"partial")],"DeviceEnrollmentResponse"),wH;(function(A){A.SelectingVerifier="SELECTING_VERIFIER",A.WaitingForCode="WAITING_FOR_CODE",A.PendingValidation="PENDING_VALIDATION",A.Success="SUCCESS"})(wH||(wH={}));var IH=pe(wH,"DeviceEnrollmentState"),mY=$B(A=>({name:"kickoffDeviceEnrollment",method:"POST",url:"/api/v3/device/enrollments",encrypted:!1,body:{signInToken:A},responseType:i$A})),EY=qa.readonly(qa.type({status:IH}),"DeviceEnrollmentStatusResponse"),BY=$B(A=>({name:"getDeviceEnrollmentStatus",method:"GET",url:`/api/v3/device/enrollments/${A}/status`,responseType:EY})),gY=$B((A,j)=>({name:"unsafeGetDeviceEnrollmentStatus",method:"POST",url:"/api/v3/device/enrollments/status",encrypted:!1,body:{enrollmentUuid:A,signInToken:j},responseType:EY})),Cbj=qa.readonly(qa.type({enrollmentUuid:qa.string,status:IH,device:cl.Type}),"TrustedDeviceEnrollment"),Hbj=qa.readonly(qa.type({enrollments:qa.array(Cbj)}),"AvailableTrustedDeviceEnrollmentsResponse"),hY=$B(()=>({name:"getPendingDeviceEnrollments",method:"GET",responseType:Hbj,url:"/api/v3/device/enrollments"})),qY=$B(A=>({name:"cancelDeviceEnrollment",method:"DELETE",url:`/api/v2/device/enrollments/${A}`,responseType:J,options:{responseType:"text"}})),vY=$B((A,j)=>({name:"unsafeCancelDeviceEnrollment",method:"DELETE",url:"/api/v2/device/enrollments",body:{enrollmentUuid:A,signInToken:j},encrypted:!1,responseType:J,options:{responseType:"text"}})),s$A=qa.readonly(qa.type({newDeviceUuid:qa.string,verifyingDeviceUuid:qa.string,status:IH}),"DeviceEnrollment"),xY=$B(A=>({name:"getEnrollment",method:"GET",responseType:s$A,url:`/api/v3/device/enrollments/${A}`})),fY=$B(A=>({name:"markSignatureInvalid",method:"POST",url:`/api/v3/device/enrollments/${A}/invalid`,responseType:J,options:{responseType:"text"}}));var Re=W(aA());var kG=AA("web-api/api/sso_migration_report.ts"),GY=Re.readonly(Re.type({userUuid:Re.string,name:Re.string,email:Re.string,avatar:Re.string,state:Re.string,type:Re.string})),Tbj=Re.readonly(Re.type({total:Re.number,pending:Re.number,expired:Re.number,successful:Re.number}),"SsoMigrationReportOverviewResponse"),Kbj=kG(()=>({name:"getSsoMigrationReportOverview",method:"GET",url:"/api/v1/report/sso/overview",responseType:Tbj})),Sbj=Re.readonly(Re.type({uuid:Re.string,name:Re.string}),"SsoGroupPolicy"),Mbj=Re.readonly(Re.type({groupPolicies:Re.array(Sbj)}),"SsoMigrationReportGroupsResponse"),_bj=kG(()=>({name:"getSsoMigrationReportGroups",method:"GET",url:"/api/v1/report/sso/groups",responseType:Mbj})),Lbj=kG(A=>({name:"sendSsoMigrationReminderEmail",method:"POST",url:"/api/v1/report/sso/notify",body:{recipients:A},responseType:J})),O9e=Re.readonly(Re.intersection([Re.type({pageSize:Re.number,pageNum:Re.number,sortBy:t4("SsoMigrationReportSortBy"),sortDir:t4("SortDirection")}),Re.partial({users:Re.array(Re.string),groups:Re.array(Re.string)})]),"SsoReportFilters"),l$A=Re.readonly(Re.intersection([Re.exact(GY),Re.type({deadline:Re.string}),Re.partial({lastReminder:Re.string})]),"SsoMigrationReportPendingRecord"),Nbj=Re.readonly(Re.type({pendingRecords:Re.array(l$A)}),"SsoMigrationReportPendingResponse"),zbj=kG(A=>({name:"getSsoMigrationPendingReport",method:"POST",url:"/api/v1/report/sso/pending",body:A,responseType:Nbj})),c$A=Re.readonly(Re.intersection([Re.exact(GY),Re.type({deadline:Re.string})]),"SsoMigrationReportExpiredRecord"),Rbj=Re.readonly(Re.type({expiredRecords:Re.array(c$A)}),"SsoMigrationReportExpiredResponse"),Jbj=kG(A=>({name:"getSsoMigrationExpiredReport",method:"POST",url:"/api/v1/report/sso/expired",body:A,responseType:Rbj})),d$A=Re.readonly(Re.exact(GY),"SsoMigrationReportSuccessfulRecord"),Ubj=Re.readonly(Re.type({successfulRecords:Re.array(d$A)}),"SsoMigrationReportSuccessfulResponse"),Xbj=kG(A=>({name:"getSsoMigrationSuccessfulReport",method:"POST",url:"/api/v1/report/sso/success",body:A,responseType:Ubj}));var da=W(aA());var FY=AA("web-api/api/support.ts"),k$A=da.readonly(da.type({provider:da.string,status:da.string}),"BillingSupportInfo"),u$A=da.readonly(da.type({name:da.string,uuid:da.string,domain:da.string,type:da.string,state:da.string,tierName:da.string,avatar:da.string,createdAt:da.string,canBeDeleted:da.boolean,billing:k$A}),"AccountSupportInfo"),p$A=da.readonly(da.type({avatar:da.string,accountKeyFormat:da.string,accountKeyUuid:da.string,lastAuthAt:da.string}),"UserSupportInfo"),m$A=da.readonly(da.type({account:u$A,user:p$A}),"SupportInfo"),E$A=da.readonly(da.type({accounts:da.array(m$A)}),"SupportGetAccounts"),bY=FY(A=>({name:"requestSupportEmail",method:"GET",url:`/api/v1/support/start/${encodeURIComponent(A)}`,responseType:J})),yY=FY((A,j)=>({name:"getSupportAccountsList",method:"GET",url:`/api/v1/support/getaccounts/${encodeURIComponent(A)}/token/${j}`,encrypted:!1,responseType:E$A})),$Y=FY((A,j,e)=>{let t=`email=${encodeURIComponent(j)}&token=${e}`;return{name:"requestAccountDeletion",method:"GET",url:`/api/v1/support/senddelete/account/${A}?${t}`,responseType:J}});var Wbj=AA("web-api/api/survey.ts"),wY;(function(A){A.Cancellation="cancellation",A.Deletion="deletion"})(wY||(wY={}));var IY;(function(A){A.DuplicateAccount="duplicate_account",A.DidNotUse="did_not_use",A.CouldNotUnderstand="could_not_understand",A.TooExpensive="too_expensive",A.MeNotYou="me_not_you",A.Other="other"})(IY||(IY={}));var DY=Wbj(A=>({name:"submitDepartureSurvey",method:"POST",url:"/api/v1/survey",body:A,responseType:J,encrypted:!1}));var Gs=W(aA());var DH=async(A,j,e,t)=>Ybj(t?.timeout,t?.abortController,j,{method:A,body:OY(e,t?.dataType),cache:t?.cache?"default":"reload",credentials:t?.withCredentials?"include":"omit",headers:t?.headers}),OY=(A,j)=>{if(!(typeof A>"u"||A===null)){if(A instanceof ArrayBuffer&&(A=new Uint8Array(A)),A instanceof Uint8Array){if(j==="arraybuffer")return A;throw new TypeError("Expected arraybuffer data type")}if(typeof A=="string"){if(j==="text")return Dj(A);throw new TypeError("Expected text data type")}if(j==="json")return lt(A);throw new TypeError("Unexpected request body and data type")}},Ybj=async(A,j,e,t)=>{if(typeof A>"u")return fetch(e,t);if(typeof AbortController>"u")return Promise.race([fetch(e,t),new Promise((a,n)=>{setTimeout(()=>n(B$A()),A)})]);let r=j??new AbortController;return Promise.race([fetch(e,{...t,signal:r.signal}),new Promise((a,n)=>{setTimeout(()=>{n(B$A()),r.abort()},A)})])},B$A=()=>new mu(Tc.serverRequestTimedOut,Z("The request took too long. Check your Internet connection and try again."));var uG=async(A,j)=>DH("GET",A,void 0,j).then(async e=>{if(e.status<200||e.status>=300)throw new pu(e.status);return j?.responseType==="text"?e.text():e.json()}),PY=async A=>{let j=`https://api.pwnedpasswords.com/range/${A}`;return uG(j,{responseType:"text",timeout:5e3,cache:!0}).then(e=>sj(e,Gs.string).unwrap()).then(g$A(A))},g$A=A=>j=>j.trim().split(`
`).map(e=>`${A}${e.slice(0,35)}`),CY=async A=>uG(z4(A,"generator/combined_words.txt"),{responseType:"text"}).then(j=>sj(j,Gs.string).unwrap()).then(j=>j.trim().split(`
`)),HY=async A=>uG(z4(A,"banlist/combined_words.txt"),{responseType:"text"}).then(j=>sj(j,Gs.string).unwrap()).then(j=>j.trim().split(`
`)),TY=async()=>uG("https://watchtower.1password.com/api/v1/compromised-sites",{cache:!0}).then(A=>sj(A,Gs.record(Gs.string,Gs.number)).unwrap()),KY=async()=>uG("https://watchtower.1password.com/api/v1/2fa-sites",{cache:!0}).then(A=>sj(A,Gs.record(Gs.string,Gs.string)).unwrap()),SY=async()=>uG("https://watchtower.1password.com/api/v1/passkey-sites",{cache:!0}).then(A=>sj(A,Gs.record(Gs.string,Gs.string)).unwrap());var im=W(aA());var Qbj=AA("web-api/api/trustpilot.ts"),h$A=im.readonly(im.type({reviewLink:im.string,rating:im.number,numberOfReviews:im.number}),"TrustpilotData"),MY=Qbj(()=>({name:"getTrustpilotReviewData",method:"GET",url:"/api/v1/trustpilot-review",responseType:h$A}));var Eo=W(aA());var OH=AA("web-api/api/user_cookie.ts"),q$A=Eo.readonly(Eo.type({userUuid:Eo.string,userEmail:Eo.string,userName:Eo.string,userAvatarURL:Eo.string,usingMyDomain:Eo.boolean,accountUuid:Eo.string,accountType:Eo.string,accountName:Eo.string,accountDomain:Eo.string,accountAvatarURL:Eo.string,hasPrioritySupport:Eo.boolean}),"UserCookie"),_Y=OH(A=>({name:"getUserCookies",method:"GET",url:`https://accounts.${A}/api/v1/accountcookies`,options:{withCredentials:!0,timeout:5e3},responseType:GA(Eo.array(q$A),[]),encrypted:!1})),LY=OH(A=>({name:"setUserCookie",method:"PATCH",url:`https://accounts.${A}/api/v1/accountcookie`,options:{withCredentials:!0},responseType:J})),NY=OH((A,j)=>({name:"deleteAccountCookie",method:"DELETE",url:`https://accounts.${A}/api/v1/accountcookie/account/${j}`,options:{withCredentials:!0},responseType:J})),zY=OH((A,j)=>({name:"deleteUserCookie",method:"DELETE",url:`https://accounts.${A}/api/v1/accountcookie/user/${j}`,options:{withCredentials:!0},responseType:J}));var Ut=W(aA());var PH=AA("web-api/api/hibp.ts"),RY=Ut.readonly(Ut.type({name:Ut.string,domain:Ut.string,title:Ut.string,date:Ut.string,addedDate:Ut.string,description:Ut.string,dataClasses:Ut.array(Ut.string),isSpamList:GA(Ut.boolean,!1),notifiedDate:ij(Ut.string)}),"HibpBreach"),CH=Ut.readonly(Ut.intersection([Ut.type({email:Ut.string,breachNames:Ut.array(Ut.string)},"type"),Ut.partial({aliases:Ut.array(Ut.string),user:Ao,invitePending:Ut.boolean,inviteExpired:Ut.boolean},"partial")]),"HibpUser"),v$A=Ut.readonly(Ut.type({domains:Ut.array(Ut.string),users:Ut.array(CH),breaches:Ut.array(RY),lastRunAt:ij(Ut.string),isTruncated:Ut.boolean,numActive:Ut.number,numInactive:Ut.number}),"HibpDomainReport"),x$A=Ut.readonly(Ut.type({csv:Ut.string}),"HibpDomainReportCsv"),JY=PH(()=>({name:"getHibpReport",method:"GET",url:"/api/v1/report/hibp",options:{timeout:6e4},responseType:Ut.array(RY)})),UY=PH(A=>({name:"getHibpDomainReport",method:"GET",url:`/api/v1/report/hibp/domain/${A}`,options:{timeout:6e4},responseType:v$A})),XY=PH((A,j)=>{let e=it({reportType:j});return{name:"getHibpDomainReportCsv",method:"GET",url:`/api/v1/report/hibp/domain/${A}/csv${e}`,options:{timeout:6e4},responseType:x$A}}),VY=PH(A=>({name:"postHibpDomainReportNotify",method:"POST",url:"/api/v1/report/hibp/domain/notify",body:A,responseType:J}));var pG=W(aA());var Zbj=AA("web-api/api/vault_managers.ts"),f$A=pG.readonly(pG.type({managers:pG.readonlyArray(Ao)}),"VaultManagers"),WY=Zbj(A=>({name:"getVaultManagers",method:"GET",url:`/api/v1/vault/${A}/managers`,responseType:f$A}));var d6=W(aA());var Aw=AA("web-api/api/verified_domain.ts"),Z$;(function(A){A.Email="E",A.Dns="D"})(Z$||(Z$={}));var HH=d6.readonly(d6.partial({txtRecord:d6.string}),"BeginDomainVerificationResponse"),YY=Aw((A,j,e)=>({name:"beginDomainVerification",method:"POST",url:"/api/v1/verifieddomains/begin",body:{type:A,domain:j,emailMailbox:e},responseType:HH})),QY=Aw((A,j,e)=>({name:"completeDomainVerification",method:"POST",url:"/api/v1/verifieddomains/complete",body:{type:A,domain:j,token:e},responseType:J})),TH=d6.readonly(d6.intersection([d6.type({domain:d6.string},"type"),d6.partial({aliasOf:d6.string},"partial")]),"VerifiedDomain"),KH=d6.readonly(d6.intersection([d6.type({domain:d6.string,type:d6.string},"type"),d6.partial({txtRecord:d6.string},"partial")]),"PendingVerifiedDomain"),SH=d6.readonly(d6.type({verified:d6.readonlyArray(TH),pending:d6.readonlyArray(KH)}),"GetVerifiedDomainsResponse"),ZY=Aw(()=>({name:"getVerifiedDomains",method:"GET",url:"/api/v1/verifieddomains",responseType:SH})),AQ=Aw(A=>({name:"updateVerifiedDomain",method:"PUT",url:"/api/v1/verifieddomains/update",body:A,responseType:J})),jQ=Aw(A=>({name:"deleteVerifiedDomain",method:"DELETE",url:`/api/v1/verifieddomains/${A}`,responseType:J}));var A0j=AA("web-api/api/wizard_progress.ts"),eQ=A0j(A=>({name:"createProvisioningProgressStep",method:"POST",url:"/api/v1/wizard/provisioning/progress",body:A,responseType:J}));var _n=W(aA());var MH=AA("web-api/api/account_transfer.ts"),G$A=_n.readonly(_n.intersection([_n.type({uuid:_n.string},"type"),_n.partial({domain:_n.string},"partial")]),"AccountTransferAccount"),j0j=_n.readonly(_n.type({pending:_n.number,complete:_n.number,declined:_n.number}),"AccountTransferUserCounts"),F$A=_n.readonly(_n.intersection([_n.type({originAccount:G$A,destinationAccount:G$A},"type"),_n.partial({userCounts:j0j},"partial")]),"AccountTransferDetails"),tQ=MH(()=>({name:"getAccountTransfersDetails",method:"GET",url:"/api/v1/account/transfer",responseType:F$A})),rQ=MH(A=>({name:"postMigratingUsers",method:"POST",url:"/api/v1/accountmigration/users",body:A,responseType:J})),jw;(function(A){A.Pending="P",A.Complete="C",A.Declined="D",A.Inactive="I"})(jw||(jw={}));var aQ=MH(A=>({name:"patchMigratingUserState",method:"PATCH",url:`/api/v1/accountmigration/user/${A}`,responseType:J})),nQ=MH(()=>({name:"suspendMigratedUser",method:"PUT",url:"/api/v1/accountmigration/user/suspend",responseType:J}));var tk=W(aA());var b$A=AA("web-api/api/fastmail.ts"),y$A=tk.readonly(tk.type({verifier:tk.string,nonce:tk.string}),"FastmailVerifier"),$$A=tk.readonly(tk.type({accountId:tk.string,refreshToken:tk.string},"FastmailAccountId")),oQ=b$A(()=>({name:"postFastmailVerifier",method:"POST",url:"/api/v1/fastmail/verifier",responseType:y$A})),iQ=b$A(A=>({name:"postFastmailRefreshToken",method:"POST",url:"/api/v1/fastmail/oauth/exchange",body:A,responseType:$$A}));var Ln=W(aA());var _H=AA("web-api/api/brex.ts"),w$A=Ln.readonly(Ln.type({nonce:Ln.string,verifier:ij(Ln.string)}),"BrexVerifier"),I$A=Ln.readonly(Ln.type({refreshToken:Ln.string,accountId:Ln.string},"BrexRefreshToken")),sQ=_H(()=>({name:"postBrexVerifier",method:"POST",url:"/api/v1/brex/verifier",responseType:w$A})),lQ=_H(A=>({name:"postBrexRefreshToken",method:"POST",url:"/api/v1/brex/oauth/exchange",body:A,responseType:I$A})),D$A=Ln.readonly(Ln.type({clientSecret:ij(Ln.string),clientId:Ln.string},"BrexClientInfoResponse")),O$A=Ln.readonly(Ln.type({refreshToken:Ln.string,accessToken:Ln.string,expiresIn:Ln.number},"BrexRequestAccessTokenResponse")),cQ=_H(()=>({name:"getBrexClientInfo",method:"GET",url:"/api/v1/brex/clientinfo",responseType:D$A})),dQ=_H(A=>({name:"requestBrexAccessToken",method:"POST",url:"/api/v1/brex/oauth/accesstoken",body:A,responseType:O$A}));var e0j=AA("web-api/api/telemetry.ts"),kQ=e0j(A=>({name:"reportUsoAction",method:"POST",url:`/api/v1/uso/telemetry/${A}`,responseType:J}));var sm=W(aA());var LH=AA("web-api/api/session_restoration.ts"),uQ=sm.readonly(sm.type({sessionRestorationToken:sm.string,tokenPubKey:sm.string},"SessionKeySaveResponse")),t0j=LH((A,j)=>({name:"saveSessionRestorationKey",method:"POST",url:"/api/v2/session-restore/save-key",body:{jwk:A,redirectState:j},responseType:uQ,encrypted:!0,decryptResponse:"dontDecrypt"})),r0j=LH((A,j)=>({name:"saveSessionRestorationKey",method:"POST",url:"/api/v2/session-restore/save-key/u",body:{jwk:A,redirectState:j},responseType:uQ,encrypted:!1})),P$A=sm.readonly(sm.type({sessionRestorationKey:$A.JwkSymKey},"SessionKeyRestoreResponse")),a0j=LH((A,j)=>({name:"saveSessionRestorationKey",method:"POST",encrypted:!1,url:"/api/v2/session-restore/restore-key",body:{sessionRestorationToken:A,redirectState:j},responseType:P$A})),n0j=LH(A=>({name:"destroySessionRestorationKey",method:"DELETE",encrypted:!1,url:"/api/v2/session-restore/destroy-key",body:{sessionRestorationToken:A},responseType:J}));var mG=W(aA());var C$A=AA("web-api/api/default_vault_permissions.ts"),o0j=mG.readonly(mG.type({acl:mG.number})),pQ=C$A(()=>({name:"getDefaultVaultPermissions",method:"GET",responseType:o0j,url:"/api/v3/account/defaultvaultacl"})),mQ=C$A(A=>({name:"getDefaultVaultPermissions",method:"PUT",responseType:J,url:"/api/v3/account/defaultvaultacl",body:A}));var vn=W(aA());var EQ=AA("web-api/api/features.ts"),H$A=vn.readonly(vn.type({name:vn.string,value:vn.string}),"VariantPayload"),T$A=vn.readonly(vn.intersection([vn.type({name:vn.string}),vn.partial({variantPayload:Do(vn.union([H$A,vn.undefined]),A=>{ps()&&console.warn(`Unexpected variantPayload type. Received ${typeof A}. Setting variantPayload to undefined.`)})},"partial")]),"Feature"),NH=vn.readonly(vn.type({features:vn.readonlyArray(T$A)}),"FeaturesList"),BQ=EQ((A,j,e)=>({name:"getFeatures",method:"POST",url:"/api/v2/features",body:{features:A},options:{headers:{...j&&{"x-datadog-trace-id":j.toString()},...e&&{"x-datadog-parent-id":e.toString()}}},responseType:NH})),gQ=EQ((A,j,e)=>({name:"getPreAuthFeatures",method:"POST",url:"/api/v2/pre-registration-features",body:{features:A},options:{headers:{...j&&{"x-datadog-trace-id":j.toString()},...e&&{"x-datadog-parent-id":e.toString()}}},responseType:NH,encrypted:!1})),hQ=EQ((A,j,e,t)=>({name:"getPreAuthFeaturesFromService",method:"POST",url:"/api/pre-registration-features",body:{features:A,baseFeatureContext:j},options:{headers:{...e&&{"x-datadog-trace-id":e.toString()},...t&&{"x-datadog-parent-id":t.toString()}}},responseType:NH,encrypted:!1}));var xn=W(aA());var zH=AA("web-api/api/detailed_vault_reporting.ts"),i0j=xn.readonly(xn.type({pubKey:Kf}),"DetailedVaultReportingPubkeyV2"),qQ=zH(()=>({name:"getDetailedVaultReportingPubkeyV2",method:"GET",url:"/api/v2/report/dvr/pubkey",responseType:i0j})),vQ=zH(()=>({name:"getHasDetailedVaultReportingKeyset",method:"GET",url:"/api/v1/report/dvr/pubkey/ping",responseType:xn.boolean})),s0j=xn.readonly(xn.type({dvrPrivateKey:xn.string}),"RegisterDetailedVaultReportingKeyRequest"),K$A=xn.readonly(xn.type({}),"RegisterDetailedVaultReportingKeyResponse"),xQ=iG(A=>({method:"POST",name:E`registerDetailedVaultReportingKey`,url:"/api/v1/report/dvr/register-epm-app-discovery",destinationPath:"/epm-login-discovery/api/v1/register",body:A,responseType:K$A})),l0j=xn.readonly(xn.intersection([xn.type({vaultUuid:xn.string}),xn.partial({items:xn.array(xn.string,"vaultItemUuids")})]),"VaultReportingSyncResponse"),S$A=ij(l0j),fQ=zH(()=>({name:"getVaultReportingSync",method:"GET",url:"/api/v1/report/dvr/sync",responseType:S$A})),GQ=zH(A=>({name:"putVaultReportingSnapshotsV2",method:"PUT",url:"/api/v2/report/dvr/snapshots",body:A,responseType:J}));var Nn=W(aA());var fA={};Yt(fA,{Account:()=>dt,AccountMeta:()=>nC,AccountSettings:()=>kC,Activity:()=>xG,AdminWatchtowerKeysetObjectDataValue:()=>tT,AuditEventReportRequest:()=>Z0j,Auth:()=>Wr,AuthCodec:()=>_Q,AuthParams:()=>fG,BaseManagedCredentialData:()=>_P,BasicNewsletter:()=>Oyj,BitSet:()=>Xj,CONTENT_TYPE:()=>Wy,ChildAccountRelationship:()=>Wh,ColorType:()=>yG,CreateManagedCredential:()=>Zhj,DEFAULT_ISSUER:()=>aZ,DataType:()=>qn,DetailedVaultReportingObjectDataValue:()=>IwA,DetailedVaultReportingObjectDataValueV2:()=>DwA,DisplayPermission:()=>Hfj,DuoSettings:()=>iC,ECDSAPrivateKey:()=>DB,ECDSAPrivateKeyPF:()=>EG,ECDSAPublicKey:()=>k6,ECDSAPublicKeyPF:()=>BG,EmailProviderDomains:()=>iyj,EmptyObjectDataValue:()=>PwA,EncryptedVaultItemSnapshotBatchV2:()=>Ryj,EncryptionKeyPair:()=>ul,EncryptionKeyPairPlaintext:()=>G0j,EntityCounts:()=>uC,Env:()=>LQ,ExternalVaultItem:()=>_N,File:()=>ow,FirewallRuleAction:()=>Mh,FirewallRuleAnonymousType:()=>_h,FirewallRuleScopeType:()=>Su,FirewallRuleType:()=>Sh,GENERATED_FAMILY_DOMAIN_PREFIX:()=>Y0j,Group:()=>wA,GroupMembershipWithKeyset:()=>tw,IntegrationTranslatableValues:()=>NQ,Invitation:()=>Ru,InviteVaultV2:()=>CB,InviteVaultV2List:()=>ZH,JWK_ALG_A256GCM:()=>Tt,KID_MASTER_PASSWORD:()=>Cp,Keyset:()=>La,KeysetCiphertext:()=>Ki,LocalAuth:()=>Ju,LocalAuthVerifier:()=>iw,MY_DOMAIN:()=>pl,ManagedCredential:()=>Yhj,ManagedCredentialDetails:()=>MP,ManagedCredentialOverview:()=>SP,MasterPasswordPolicySettings:()=>cC,MasterPasswordPolicyType:()=>Ch,MspPermission:()=>Ac,Named:()=>lm,ObjectDataAccess:()=>BB,ObjectDataAccessAcl:()=>_o,ObjectDataAccessScope:()=>ui,ObjectDataAccessorType:()=>sl,ObjectDataType:()=>jZ,ObjectType:()=>Li,OldUser:()=>eo,PASSWORD_ENTROPY:()=>r$,PASSWORD_STRENGTH:()=>t$,Package:()=>Aq,PackageV2:()=>tZ,Permission:()=>rt,Person:()=>Hr,Preference:()=>Qh,Promotion:()=>Mf,ProvisionedGroupKeyset:()=>Ew,ProvisionedKeys:()=>Bw,ProvisionedVaultKey:()=>mw,ProvisioningSettings:()=>lC,RSAPrivateKey:()=>IB,RSAPublicKey:()=>sa,RecoverableGroupKeyset:()=>hw,RecoverableKeys:()=>vw,RecoverableKeysForPeople:()=>xw,RecoverablePackageKey:()=>qw,RecoverableVaultKey:()=>gw,RecoveryKeysetPermissions:()=>zC,RestrictedHostedProvisioningManagedGroupPermissions:()=>KU,START_DOMAIN:()=>AwA,SerializableLocalAuthCredentials:()=>nwA,ServiceAccountActions:()=>SwA,ServiceAccountConnectObjectDataValue:()=>rT,ServiceAccountJwtClaims:()=>TwA,ServiceAccountJwtPrivateClaims:()=>HwA,ServiceAccountStreamingObjectDataValue:()=>wwA,ServiceAccountTokenState:()=>Kyj,ServiceAccountUser:()=>Ri,ServiceAccountUserManagedObjectDataValue:()=>OwA,SigningKeyPair:()=>OB,SlackApp:()=>xH,SlackAppState:()=>jk,SlackChannel:()=>FH,SlackGroup:()=>yH,SlackInvitationScope:()=>iZ,SlackNonce:()=>fH,SlackSettings:()=>oC,SlackTeam:()=>bH,SlackUser:()=>GH,SnapshotVaultTypes:()=>lZ,SupportSettings:()=>sC,SymmetricKey:()=>si,SymmetricKeyPf:()=>bP,TEMPLATE_TITLE_MAX_LENGTH:()=>kCe,TokenFeatures:()=>Gw,UpdatedManagedCredential:()=>Qhj,User:()=>Yj,UserCombinedObjectDataAccess:()=>UC,UserCookie:()=>Fw,Vault:()=>ej,VaultAccess:()=>ft,VaultAttrs:()=>nT,VaultClientAccess:()=>Zh,VaultItem:()=>dA,VaultItemDetails:()=>Hf,VaultItemOverview:()=>KP,VaultItemTemplate:()=>yj,VaultSnapshotInsertScopeType:()=>bG,WC_ALG_A256GCM:()=>WqA,WatchtowerDataStructureV1:()=>Ayj,WatchtowerDataStructureV2:()=>MQ,WatchtowerStructureVersion:()=>QH,billing:()=>fh,compareSlackUsers:()=>Syj,createEmptySlackApp:()=>sZ,createServiceAccountJwt:()=>nZ,createServiceAccountTokenInfo:()=>Cyj,createSymmetricKey:()=>$t,crypto1:()=>IN,crypto2:()=>fw,cryptoTests:()=>cT,decryptSigningKeyPair:()=>XH,distributors:()=>NwA,ecdsa:()=>cw,extractDerivationInfo:()=>Yy,getAcceptedInviteVaultsKeyedByUserUuid:()=>syj,getImportedPubKey:()=>Uh,getNativeKeyAlg:()=>uf,getSlackUserInitials:()=>Myj,importMasterKey:()=>Dhj,importPubKey:()=>Ni,isGenericDomain:()=>Q0j,isSlackGridApp:()=>Nyj,isSymKeyAlg:()=>gy,localAuthCredentialsToSerializable:()=>owA,newSnapshotForItemV2:()=>sT,rsa:()=>AT,slackAppHasScope:()=>_yj,slackAppIsActive:()=>Lyj,tokenSignatureHash:()=>oZ,validServiceAccountAcl:()=>Tyj,vaultACL:()=>le});var wB=W(so());var mr=H6,ec=$p;var rj=A=>async(j,e)=>Promise.resolve().then(e).catch(gr(A,j)),jo=async(A,j,e=0)=>{let t=A.join("#"),r=FQ[t];if(r?.promise&&c0j(r,e))return r.promise;let a=Promise.resolve().then(j);return FQ[t]={promise:a,timeFinished:1/0},a.then(n=>(M$A(t),n),n=>{throw M$A(t),n})},c0j=(A,j)=>Date.now()-A.timeFinished<j,FQ={},M$A=A=>{let j=FQ[A];j&&(j.timeFinished=Date.now())};var d0j="action/mfa",ew=rj(d0j);var k0j=async(A,j)=>ew("enableMFA",async()=>{let e=await iR(A.session,j);return A.user&&(e&&e.dsecret&&(A.user.dSecret=e.dsecret),A.user.hasMFAEnabled=!0),e??void 0}),u0j=async(A,j)=>{try{await sR(A.session,j),A.user&&(A.user.dSecret=void 0,A.user.hasMFAEnabled=!1)}catch(e){throw console.error("disableMfa failed: "+e),e}},p0j=async(A,j)=>ew("sendMFACode",async()=>lR(A.session,j)),m0j=async A=>ew("getMFA",async()=>(await cR(A.session)).map(e=>({...e,createdAt:mr(e.createdAt),updatedAt:mr(e.updatedAt)}))),E0j=async A=>ew("getMFAConfig",async()=>dR(A.session)),B0j=async(A,j)=>ew("verifyTotp",async()=>kR(A.session,j)),RH=(A,j)=>{let t=new wB.misc.hmac(wB.codec.base64url.toBits(A),wB.hash.sha256).encrypt(wB.codec.base32.toBits(j));return wB.codec.base64url.fromBits(t).slice(0,8)},_$A=A=>({type:"public-key",id:ZA(A)}),g0j=async(A,j,e,t,r)=>{if(!navigator.credentials||!navigator.credentials.create)throw new Error("Browser does not support WebAuthn.");if(!A.user)throw new Error("Missing user");let a=e.map(l=>_$A(l)),n=await navigator.credentials.create({publicKey:{challenge:ZA(t),rp:{id:r,name:"1Password"},user:{id:Dj(A.user.uuid),name:A.user.email,displayName:A.user.name},pubKeyCredParams:[{type:"public-key",alg:-7}],timeout:6e4,attestation:"none",authenticatorSelection:{authenticatorAttachment:"cross-platform",userVerification:"discouraged",residentKey:"discouraged"},excludeCredentials:a}});if(!n)throw new Error("Credential is missing.");let{attestationObject:o,clientDataJSON:i}=n.response;return{type:di.WebAuthn,keyHandle:n.id,keyValue:tj(new Uint8Array(o)),keyName:j,webAuthnClientData:tj(new Uint8Array(i))}},h0j=async(A,j,e)=>{if(!navigator.credentials||!navigator.credentials.get)throw new Error("Browser does not support WebAuthn.");let t=A.map(i=>_$A(i));if(t.length===0)throw new Error("No key handles provided.");let r=await navigator.credentials.get({publicKey:{challenge:ZA(j),rpId:e,allowCredentials:t,userVerification:"discouraged",timeout:6e4}});if(!r)throw new Error("Failed to get credential response.");let{signature:a,authenticatorData:n,clientDataJSON:o}=r.response;return{keyHandle:r.id,signature:tj(new Uint8Array(a)),authData:tj(new Uint8Array(n)),clientData:tj(new Uint8Array(o))}},q0j=()=>{let A=navigator.credentials;return!!(A&&A.get&&A.create&&window.PublicKeyCredential)};var tw;(function(A){A.create=j=>({...v0j,...j})})(tw||(tw={}));var v0j={role:sr.Role.Member,state:sr.State.Active,version:1};var UH=W(aA());var x0j="model/rsa_public_key",f0j=gr(x0j),Uh=async A=>Promise.resolve().then(async()=>"jwk"in A?A:Ni(A)),Ni=async A=>new sa(A.kid,void 0,A).import(),sa=class A{constructor(j,e,t){this.encrypt=async r=>Promise.resolve().then(async()=>{let a,n;if(r.length>2048/8)throw new Error("Plaintext is too large.");if(!this.jwk)throw new Error("Missing JWK encryption key.");if(!this.key)throw new Error("Missing encryption key.");if(this.jwk.alg===A.JWK_ALG_RSA_OAEP)n=A.JWK_ALG_RSA_OAEP,a=A.WC_ALG_RSA_OAEP;else if(this.jwk.alg===A.JWK_ALG_RSA_OAEP_256)n=A.JWK_ALG_RSA_OAEP_256,a=A.WC_ALG_RSA_OAEP_256;else throw new Error("Unsupported encryption alg");return $A.subtle.encrypt(a,this.key,r).then(o=>{let i=new Uint8Array(o),s=tj(i);return{kid:this.uuid,enc:n,cty:A.CONTENT_TYPE,data:s}})}).catch(f0j("encrypt")),this.import=async r=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK");let a=this.jwk.kid,n=!0,o;if(this.jwk.alg===A.JWK_ALG_RSA_OAEP_256)o=A.WC_ALG_RSA_OAEP_256;else if(this.jwk.alg===A.JWK_ALG_RSA_OAEP)o=A.WC_ALG_RSA_OAEP;else throw new Error("Unexpected algorithm");return this.jwk=fy(this.jwk),this.key=await $A.subtle.importKey("jwk",this.jwk,o,n,["encrypt"]),this.uuid=a,this},this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await Fy(this.uuid,this.key),this.jwk},this.uuid=j,this.key=e,this.jwk=t}};sa.CONTENT_TYPE="b5+jwk+json";sa.JWK_ALG_RSA_OAEP_256="RSA-OAEP-256";sa.WC_ALG_RSA_OAEP_256={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}};sa.JWK_ALG_RSA_OAEP="RSA-OAEP";sa.WC_ALG_RSA_OAEP={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}};sa.DEFAULT_ALG=sa.WC_ALG_RSA_OAEP;var JH=E`model/rsa_private_key`,L$A=gr(JH.str),IB=class{constructor(j,e,t){this.decrypt=async r=>Promise.resolve().then(async()=>{typeof r=="string"&&Bs([E`Unexpected JSON string: json`],JH,E`decrypt`);let a=sj(typeof r=="string"?JSON.parse(r):r,Oa,{mode:"unsafe_report_only",file:JH,func:E`decrypt`}).unwrap();if(sa.CONTENT_TYPE!==a.cty)throw new Error("Unexpected content type");if(a.kid!==this.uuid)throw new Error("Content encrypted with wrong key");if(!this.key)throw new Error("Missing decryption key");let n;if(a.enc===sa.JWK_ALG_RSA_OAEP_256){if(!Kp.rsaOaep256)throw new CA.ClientError(CA.ClientErrorCode.noRsaOaep256Support,Z("Browser does not support RSA-OAEP-256"));n=sa.WC_ALG_RSA_OAEP_256}else if(a.enc===sa.JWK_ALG_RSA_OAEP)n=sa.WC_ALG_RSA_OAEP;else throw new Error("Unexpected algorithm");let o=ZA(a.data);return $A.subtle.decrypt(n,this.key,o).then(i=>new Uint8Array(i))}).catch(L$A("decrypt")),this.import=async r=>Promise.resolve().then(async()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK");let a=this.jwk.kid,n=!0,o;if(this.jwk.alg===sa.JWK_ALG_RSA_OAEP_256)o=sa.WC_ALG_RSA_OAEP_256;else if(this.jwk.alg===sa.JWK_ALG_RSA_OAEP)o=sa.WC_ALG_RSA_OAEP;else throw new Error("RSAPrivateKey failed to import, unexpected alg");return this.jwk=Gy(this.jwk),$A.subtle.importKey("jwk",this.jwk,o,n,["decrypt"]).then(i=>(this.key=i,this.uuid=a,this))}).catch(L$A("import")),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await Fy(this.uuid,this.key),this.jwk},this.encryptWithKey=async r=>{if(!this.jwk)throw new Error("Missing JWK");return r.encrypt(lt(this.jwk))},this.decryptWithKey=async(r,a)=>{let n=await r.decrypt(a),o=sj(n,Ue).unwrap(),i=sj(o,Nd,{mode:"unsafe_report_only",file:JH,func:E`decryptWithKey`}).unwrap();return this.import(i)},this.uuid=j,this.key=e,this.jwk=t}};var bQ=E`web-api/model/encryption_key_pair.ts`,G0j=UH.readonly(UH.type({pubKey:yu,priKey:Nd}),"EncryptionKeyPairPlaintext"),ul=class{constructor(j,e,t){this.uuid=j,this.pubKey=e,this.priKey=t,this.encryptWithKey=async r=>{let a=await this.priKey.encryptWithKey(r),n=this.pubKey.jwk;if(!n)throw new Error("Missing public key");return{pubKey:n,encPriKey:a}},this.encrypt=e.encrypt,this.decrypt=t.decrypt}};(function(A){A.generate=async j=>{let e=async()=>F0j(j).then(b0j),r=eh(31,()=>e),a=e();return ti(r,async(o,i)=>o.catch(async()=>i()),a).catch(o=>{throw new Error(`Failed to generate valid encryption keys after 32 attempts. <${G6(o)}>`)})},A.decryptWithKey=async(j,{pubKey:e,encPriKey:t})=>{let r={mode:"unsafe_report_only",file:bQ,func:E`decryptWithKey`};typeof e=="string"&&Bs([E`Unexpected JSON string: pubKey`],bQ,E`decryptWithKey`),typeof t=="string"&&Bs([E`Unexpected JSON string: encPriKey`],bQ,E`decryptWithKey`);let a=sj(typeof e=="string"?JSON.parse(e):e,yu,r).unwrap(),n=sj(typeof t=="string"?JSON.parse(t):t,Oa,r).unwrap(),o=a.kid,[i,s]=await Promise.all([new sa(o).import(a),new IB(o).decryptWithKey(j,n)]);if(i.uuid!==s.uuid)throw new Error("Public and private key IDs do not match");return new A(o,i,s)}})(ul||(ul={}));var F0j=async A=>{let j=["encrypt","decrypt"],t=sa.DEFAULT_ALG,r=A||fe(),{publicKey:a,privateKey:n}=await $A.subtle.generateKey(t,!0,j);if(!a||!n)throw new Error("Did not generate key pair properly");let o=new sa(r,a),i=new IB(r,n);return await Promise.all([o.exportKey(),i.exportKey()]),new ul(r,o,i)},b0j=async A=>{let j={pubKey:A.pubKey.jwk,priKey:A.priKey.jwk};if(xy.primesAreReversed(j.priKey))throw new Error("p < q");let e=$t(),t=e.generate(Tt).then(async()=>A.encryptWithKey(e)).then(async o=>ul.decryptWithKey(e,o)),r="I've got a golden ticket!",a=t.then(async o=>o.encrypt(Dj(r)));return Promise.all([t,a]).then(async([o,i])=>o.decrypt(i)).then(async o=>V6(o)===r?Promise.resolve():Promise.reject(new Error("Decryption failed"))).then(()=>A)};var U$A=W(so());var N$A="model/ecdsa_public_key",y0j=gr(N$A),$0j=rj(N$A),k6=class A{constructor(j,e,t){this.verify=async(r,a)=>Promise.resolve().then(async()=>{if(a.alg!=="ES256")throw new Error("Unknown jwk signature alg:"+a.alg);let n=A.DEFAULT_SIGN_ALG;if(a.kid!==this.uuid)throw new Error("Unexpected signature kid:"+a.kid+" != "+this.uuid);if(!this.key)throw new Error("Missing public key");return $A.subtle.verify(n,this.key,ZA(a.s),r).then(o=>!!o)}).catch(y0j("verify")),this.import=async r=>$0j("import",async()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK key");let a=this.jwk.kid;if(this.jwk=SL(this.jwk),this.jwk.kty!=="EC"||this.jwk.crv!=="P-256")throw new Error("Unexpected EC key/crv: "+this.jwk.kty+", "+this.jwk.crv+".");let n=!0,o=A.KEY_ALG_ES256,i=["verify"],s=await $A.subtle.importKey("jwk",this.jwk,o,n,i).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,Z("Invalid public key"))});return this.uuid=a,this.key=s,this}),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await by(this.uuid,this.key,hh),this.jwk},this.uuid=j||"",this.key=e,this.jwk=t}};k6.KEY_ALG_ES256={name:"ECDSA",namedCurve:"P-256"};k6.SIGN_ALG_ES256={name:"ECDSA",hash:{name:"SHA-256"},jwkAlgorithmIdentifier:"ES256"};k6.DEFAULT_KEY_ALG=k6.KEY_ALG_ES256;k6.DEFAULT_SIGN_ALG=k6.SIGN_ALG_ES256;var yQ=E`web-api/model/ecdsa_private_key.ts`,w0j=gr(yQ.str),I0j=rj(yQ.str),DB=class{constructor(j,e,t){this.sign=async r=>Promise.resolve().then(async()=>{if(!this.key)throw new Error("Missing private key");let a=k6.DEFAULT_SIGN_ALG;return $A.subtle.sign(a,this.key,r).then(n=>({kid:this.uuid,alg:a.jwkAlgorithmIdentifier,s:tj(new Uint8Array(n))}))}).catch(w0j("sign")),this.import=async r=>I0j("import",async()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK key");let a=this.jwk.kid;if(this.jwk=KL(this.jwk),this.jwk.kty!=="EC"||this.jwk.crv!=="P-256")throw new Error("Unexpected EC key/crv: "+this.jwk.kty+", "+this.jwk.crv+".");let n=k6.KEY_ALG_ES256,o=!0,i=["sign"],s=await $A.subtle.importKey("jwk",this.jwk,n,o,i).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,Z("Invalid private key"))});return this.key=s,this.uuid=a,this}),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await by(this.uuid,this.key,XE),this.jwk},this.encryptWithKey=async r=>{if(!this.jwk)throw new Error("Missing JWK");if(!r)throw new Error("No key given");let a=lt(this.jwk);if(!a)throw new Error("Missing plaintext");return r.encrypt(a)},this.decryptWithKey=async(r,a)=>{let n=await r.decrypt(a),o=sj(n,Ue).unwrap(),i=sj(o,XE,{mode:"unsafe_report_only",file:yQ,func:E`decryptWithKey`}).unwrap();return this.import(i)},this.uuid=j||"",this.key=e,this.jwk=t}};var zu=W(so());var D0j="model/ecdsa_private_key_pf",$Q=gr(D0j),EG=class extends DB{constructor(j,e,t,r){super(j,void 0,r),this.sign=async a=>Promise.resolve().then(()=>{if(!this.sjclKey)throw new Error("Missing private key");let n=k6.DEFAULT_SIGN_ALG,o=zu.hash.sha256.hash(ia(a)),i=this.sjclKey.sign(o,1,!1);return{kid:this.uuid,alg:n.jwkAlgorithmIdentifier,s:tj(new Uint8Array(zu.codec.bytes.fromBits(i)))}}).catch($Q("sign")),this.import=async a=>Promise.resolve().then(()=>{if(a&&(this.jwk=a),!this.jwk)throw new Error("Missing JWK key");let n=ZA(this.jwk.d),o=zu.bn.fromBits(ia(n));return this.sjclKey=new zu.ecc.ecdsa.secretKey(zu.ecc.curves.c256,o),this}).catch($Q("import")),this.exportKey=async()=>Promise.resolve().then(async()=>{if(!this.pubKey)throw new Error("Missing public key");if(!this.sjclKey)throw new Error("Missing private key");let a=this.sjclKey;return this.pubKey.exportKey().then(n=>{let o=zu.codec.bytes.fromBits(a.get());return this.jwk={crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",kid:this.uuid,d:tj(new Uint8Array(o)),x:n.x,y:n.y},this.jwk})}).catch($Q("exportKey")),this.sjclKey=t,this.pubKey=e}};var rk=W(so());var O0j="model/ecdsa_public_key_pf",wQ=gr(O0j),BG=class extends k6{constructor(j,e,t){super(j,void 0,t),this.verify=async(r,a)=>Promise.resolve().then(()=>{let n=k6.DEFAULT_SIGN_ALG;if(!this.sjclKey)throw new Error("Missing public key");if(a.kid!==this.uuid)throw new Error("Signing key mismatch, expected '"+this.uuid+"' got '"+a.kid+"'");if(a.alg!==n.jwkAlgorithmIdentifier)throw new Error("Unsupported signature algorithm: "+a.alg);let o=ia(ZA(a.s)),i=rk.hash.sha256.hash(ia(r));return this.sjclKey.verify(i,o,!1)}).catch(wQ("verify")),this.import=async r=>Promise.resolve().then(()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK key");let a=ZA(this.jwk.x),n=ZA(this.jwk.y),o=rk.codec.hex.fromBits(ia(a))+rk.codec.hex.fromBits(ia(n));return this.sjclKey=new rk.ecc.ecdsa.publicKey(rk.ecc.curves.c256,rk.codec.hex.toBits(o)),this}).catch(wQ("import")),this.exportKey=async()=>Promise.resolve().then(()=>{if(!this.sjclKey)throw new Error("Missing public key");let r=this.sjclKey.get();return this.jwk={crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",kid:this.uuid,x:tj(new Uint8Array(rk.codec.bytes.fromBits(r.x))),y:tj(new Uint8Array(rk.codec.bytes.fromBits(r.y)))},this.jwk}).catch(wQ("exportKey")),this.sjclKey=e}};var gG=E`web-api/model/signing_key_pair.ts`,IQ=gr(gG.str),z$A=rj(gG.str),OB=class{constructor(j){this.generate=async e=>Promise.resolve().then(async()=>{let t=$A.supports.nativeEcdsa?this._generateNative:this._generatePolyfill,r=async()=>t(e).then(T0j),a=5,n=eh(a-1,()=>r),o=r();return ti(n,async(s,l)=>s.catch(async()=>l()),o).catch(s=>{throw new Error(`Failed to generate valid signing keys after ${a} attempts. <${G6(s)}>`)})}),this._generateNative=async e=>{let t=["sign","verify"],a=k6.DEFAULT_KEY_ALG;this.uuid=e||fe();let n=await $A.subtle.generateKey(a,!0,t);this.pubKey=new k6(this.uuid,n.publicKey),this.priKey=new DB(this.uuid,n.privateKey);let o=this.pubKey.exportKey(),i=this.priKey.exportKey();return await Promise.all([i,o]),this},this._generatePolyfill=async e=>{let t=k6.DEFAULT_SIGN_ALG.jwkAlgorithmIdentifier;if(t!=="ES256")throw new Error("Unsupported ECDSA polyfill: "+t);e=e||fe(),this.uuid=e;let r=U$A.ecc.ecdsa.generateKeys(256,1),a=new BG(e,r.pub),n=new EG(e,a,r.sec);this.pubKey=a,this.priKey=n;let o=this.pubKey.exportKey(),i=this.priKey.exportKey();return await Promise.all([i,o]),this},this.sign=async e=>Promise.resolve().then(async()=>{if(!this.priKey)throw new Error("Missing signing key");return this.priKey.sign(e)}).catch(IQ("sign")),this.verify=async(e,t)=>Promise.resolve().then(async()=>{if(!this.pubKey)throw new Error("Missing public key");return this.pubKey.verify(e,t)}).catch(IQ("verify")),this.export=async()=>Promise.resolve().then(async()=>{if(!this.pubKey)throw new Error("Missing public key");if(!this.priKey)throw new Error("Missing private key");return Promise.all([this.pubKey.exportKey(),this.priKey.exportKey()]).then(()=>this)}).catch(IQ("export")),this.import=async e=>z$A("import",async()=>{if(e.pubKey.kid!==e.priKey.kid)throw new Error("invalid signing keypair");if(this.uuid=e.pubKey.kid,!this.pubKey||!this.priKey){let t=H0j(this.uuid);this.pubKey=t.pubKey,this.priKey=t.priKey}return await Promise.all([this.pubKey.import(e.pubKey),this.priKey.import(e.priKey)]),this}),this.encryptWithKey=async e=>{if(!this.priKey)throw new Error("Missing private key");if(!this.pubKey||!this.pubKey.jwk)throw new Error("Missing public key");let t=await this.priKey.encryptWithKey(e);return{pubKey:this.pubKey.jwk,encPriKey:t}},this.decryptWithKey=async(e,t)=>z$A("decryptWithKey",async()=>{let{pubKey:r,encPriKey:a}=P0j(t);this.uuid=r.kid;let n=await C0j(e,a);if(n.kid!==r.kid)throw new Error("Public and private key IDs do not match.");return this.import({pubKey:r,priKey:n})}),this.uuid=j||""}plaintextJSON(){if(!this.pubKey)throw new Error("Missing public key");if(!this.priKey)throw new Error("Missing private key");return{pubKey:this.pubKey.jwk,priKey:this.priKey.jwk}}},P0j=A=>{typeof A.pubKey=="string"&&Bs([E`Unexpected JSON string: json.pubKey`],gG,E`parseStringsIfNecessary`),typeof A.encPriKey=="string"&&Bs([E`Unexpected JSON string: json.encPriKey`],gG,E`parseStringsIfNecessary`);let j={mode:"unsafe_report_only",file:gG,func:E`parseStringsIfNecessary`};return{pubKey:sj(R$A(A.pubKey),hh,j).unwrap(),encPriKey:sj(R$A(A.encPriKey),Oa,j).unwrap()}},R$A=A=>typeof A=="string"?JSON.parse(A):A,C0j=async(A,j)=>{let e=sj(await A.decrypt(j),Ue).unwrap();return sj(e,XE,{mode:"unsafe_report_only",file:gG,func:E`decryptJson`}).unwrap()},H0j=A=>{if($A.supports.nativeEcdsa)return{pubKey:new k6(A),priKey:new DB(A)};{let j=new BG(A);return{pubKey:j,priKey:new EG(A,j)}}},J$A=new Uint8Array([73,39,118,101,32,103,111,116,32,97,32,103,111,108,100,101,110,32,116,105,99,107,101,116,33]),T0j=async A=>Promise.resolve().then(async()=>{let j=A.plaintextJSON(),e=new OB().import(j),t=e.then(async a=>a.sign(J$A));return Promise.all([e,t]).then(async([a,n])=>a.verify(J$A,n)).then(a=>{if(!a)throw new Error("Signature failed verification")}).then(()=>A)});var La=class{constructor(j,e,t,r,a=0){this.uuid=j,this.symKey=e,this.ekeyPair=t,this.skeyPair=r,this.sn=a,this.generateSigningKeys=async()=>(this.skeyPair=new OB(this.uuid),this.skeyPair.generate(this.uuid)),this.sign=async n=>{if(!this.skeyPair)throw new Error("Failed to sign, skeyPair missing");return this.skeyPair.sign(n)},this.verify=async(n,o)=>{if(!this.skeyPair)throw new Error("Failed to verify, skeyPair missing");return this.skeyPair.verify(n,o)},this.encrypt=async n=>this.ekeyPair.encrypt(n),this.decrypt=async n=>this.ekeyPair.decrypt(n),this.encryptWithKey=async n=>{let[o,i,s]=await Promise.all([this.symKey.encryptWithKey(n),this.ekeyPair.encryptWithKey(this.symKey),this.skeyPair&&this.skeyPair.priKey?this.skeyPair.encryptWithKey(this.symKey):Promise.resolve(void 0)]);return{uuid:this.uuid,sn:this.sn,encryptedBy:o.kid,encSymKey:o,pubKey:i.pubKey,encPriKey:i.encPriKey,spubKey:s?.pubKey,encSPriKey:s?.encPriKey}}}hasSigningKeys(){return!!this.skeyPair&&!!this.skeyPair.pubKey}};(function(A){A.generateWithSigningKeys=async()=>X$A(!0),A.generateWithoutSigningKeys=async()=>X$A(!1),A.decryptWithKeyset=async(j,e)=>{let t=e.encSymKey.enc,r=gy(t)?j.symKey:j.ekeyPair;return A.decryptWithKey(r,e)},A.decryptWithKey=async(j,e)=>{let{sn:t,uuid:r,pubKey:a,encSymKey:n,encPriKey:o,spubKey:i,encSPriKey:s}=e,l=await $t().decryptWithKey(j,n),[d,k]=await Promise.all([ul.decryptWithKey(l,{pubKey:a,encPriKey:o}),XH(l,{pubKey:i,encPriKey:s})]);return new A(r,l,d,k,t)}})(La||(La={}));var X$A=async A=>{let j=fe(),e=$t(),[,t,r]=await Promise.all([e.generate(Tt,j),ul.generate(j),A?new OB(j).generate(j):Promise.resolve(void 0)]);return new La(j,e,t,r)},XH=async(A,{pubKey:j,encPriKey:e})=>{if(!(!j||!e))try{return await new OB().decryptWithKey(A,{pubKey:j,encPriKey:e})}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidSigningKeyPair))return;throw t}};var le={};Yt(le,{ALL:()=>S0j,ALL_EXPORT:()=>HQ,ALL_READ:()=>W$A,ALL_WRITE:()=>Y$A,ArchiveItem:()=>qG,CreateItem:()=>Vh,DEFAULT_VAULT_CREATION_ACL:()=>R0j,DeleteItem:()=>vG,Export:()=>PQ,Import:()=>OQ,MANAGED_VAULT_ACL:()=>N0j,Manage:()=>Xh,NoAccess:()=>K0j,Print:()=>CQ,RWE:()=>WH,ReadItem:()=>hG,Recover:()=>V$A,RevealPassword:()=>VH,SendItem:()=>DQ,TOKEN_READ:()=>M0j,TOKEN_WRITE:()=>_0j,UMSA_TOKEN_WRITE:()=>L0j,UpdateItem:()=>PB,ViewHistory:()=>rw,changeVaultAccessPermissions:()=>J0j,includesFrozenACL:()=>aw,isEffectivelyZero:()=>z0j,vaultAccessDependencies:()=>Q$A});var K0j=0,V$A=1,Xh=2,VH=16,hG=32,PB=64,Vh=128,qG=256,vG=512,rw=1024,DQ=1048576,OQ=2097152,PQ=4194304,CQ=8388608,S0j=2147483646,W$A=Xj.combine([hG,VH,rw]),Y$A=Xj.combine([PB,Vh,OQ,qG,vG]),HQ=Xj.combine([PQ,CQ,DQ]),M0j=Xj.combine([hG,VH]),_0j=Xj.combine([PB,Vh,qG]),L0j=Xj.combine([Vh,PB,vG,qG]),WH=Xj.combine([W$A,Y$A,HQ]),N0j=Xj.combine([hG,PB,Vh,vG,rw]),z0j=A=>{let j=Xj.combine([WH,Xh,V$A]);return!Xj.includesAny(A,j)},R0j=WH,aw=A=>(A&PB)>0||(A&Vh)>0||(A&vG)>0||(A&qG)>0,J0j=(A,j)=>{let e=0,t=0;X0j(A,j)?e=Xj.enable(A,j):e=Xj.toggle(A,j);for(let r of Q$A)t=Xj.toggle(A,e),e=U0j(e,t,r.parent,r.children);return e},Q$A=[{parent:hG,children:Xj.disable(WH,hG)},{parent:Vh,children:OQ},{parent:PB,children:Xj.combine([qG,vG])},{parent:VH,children:Xj.combine([HQ,rw,PB])},{parent:rw,children:Xj.combine([PQ,CQ,DQ])}],U0j=(A,j,e,t)=>{let r=Xj.disable(e,A);return Xj.includesAny(j,r)?Xj.disable(A,t):Xj.includesAny(A,t)?Xj.enable(A,e):A},X0j=(A,j)=>{let e=Xj.includesAny(A,j),t=Xj.includes(A,j);return e&&!t};var TQ=zl,V0j="model/group",KQ=rj(V0j),wA=class A{constructor(j){this.accessorType="group",this.decryptRecoverableKeyset=async e=>KQ("decryptRecoverableKeyset",async()=>this.recoverableKeyset?e.uuid!==this.recoverableKeyset.encryptedBy?Promise.reject(new Error("Cannot decrypt the group's keyset. It is not encrypted by the given keyset.")):La.decryptWithKeyset(e,this.recoverableKeyset):Promise.reject(new Error("Missing recoverable keyset."))),this.createMembership=async(e,t,r)=>KQ("createMembership",async()=>{if(!t.pubKey)throw Nr(new Pe({errorClass:mn.ValidationError,userUuid:t.uuid?Z(t.uuid):void 0,message:E`Missing member's public key`})),new Error("Missing member's public key.");if(!e)throw Nr(new Pe({errorClass:mn.ValidationError,userUuid:t.uuid?Z(t.uuid):void 0,message:E`Missing group's active keyset`})),new Error("Missing group's active keyset.");let a=await Uh(t.pubKey),n=await e.encryptWithKey(a);return tw.create({keyset:n,groupUuid:this.uuid,memberUuid:t.uuid,...r})}),this.addMembership=async(e,t,r)=>KQ("addMembership",async()=>this.createMembership(e,t,r).then(a=>(this._memberships[a.memberUuid]=a,a))),this.setVaultAccessList=e=>{this._vaultACLs=void 0,this._vaultAccessMap=Ia(e,t=>t.vaultUuid)},this.enableKeysetRecovery=async(e,t)=>{if(this.type===A.TypeExternalAccountManagers)return this.recoverableKeyset=void 0,this;if(!t.pubKey)throw new Error("Missing recovery group's public key");return this.recoverableKeyset=await e.encryptWithKey(t.pubKey),this},this.enableRecoverCapability=async e=>{if(!e)throw new Error("Missing recovery keyset.");if(!this.pubKey)throw new Error("Missing public key");let t=await e.encryptWithKey(this.pubKey);return this.recoveryKeyset=t,this},this.uuid=j.uuid?j.uuid:fe(),this.name=j.name,this.type=j.type,this.desc=j.desc,this.activeKeysetUuid=j.activeKeysetUuid,this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.attrVersion=j.attrVersion||0,this.avatar=j.avatar||"",this.permissions=j.permissions||Xj.empty(),this.userCount=j.userCount,this.archivedKeysets=[],this._memberships={},this._sso=j.sso,this._vaultAccessMap={},this._vaultACLs=void 0,this._attrMask=0}hasAttrMask(j){return(this._attrMask&j)===j}addAttrMask(j){this._attrMask|=j}get isTypeUserDefined(){return this.type===A.TypeUserDefined}get isTypeTeamMembers(){return this.type===A.TypeTeamMembers}get isTypeOwners(){return this.type===A.TypeOwners}get isTypeAdmins(){return this.type===A.TypeAdmins}get isTypeSecurity(){return this.type===A.TypeSecurity}get isTypeMSPAdministrators(){return this.type===A.TypeMSPAdministrators}get isTypeExternalAccountManagers(){return this.type===A.TypeExternalAccountManagers}get isTypeProvisioning(){return this.type===A.TypeProvisioning}get canBeDeleted(){return this.isTypeUserDefined||this.isTypeProvisioning}setOverview(j){this.uuid=j.uuid?j.uuid:fe(),this.name=j.name,this.type=j.type,this.desc=j.desc,this.activeKeysetUuid=j.activeKeysetUuid,this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.attrVersion=j.attrVersion||0,this.avatar=j.avatar||"",this.permissions=j.permissions||Xj.empty(),this.userCount=j.userCount,this._sso=j.sso}_getLoadedVaultAccessMap(){if(!this.hasAttrMask(A.Attr.VaultAccess))throw new Error("Vault access list has not been loaded");return this._vaultAccessMap}getAccessorVaultUuids(){return this.getVaultUuids()}getVaultUuids(){return TQ(this._getLoadedVaultAccessMap(),()=>!0)}getVaultAccessMap(){return this._getLoadedVaultAccessMap()}getVaultACLs(){return this._vaultACLs||(this._vaultACLs=TQ(this._getLoadedVaultAccessMap(),j=>j.acl)),this._vaultACLs}hasVaultACL(j,e,t){return t&&aw(e)?!1:((this.getVaultACLs()[j.uuid]||0)&e)===e}hasPermission(...j){return Xj.includes(this.permissions,Xj.combine(j))}getPeopleUuids(){return TQ(this._memberships,()=>!0)}get pubKey(){return this._pubKey}set pubKey(j){j&&(this._pubKey=j,this.addAttrMask(A.Attr.PubKey))}getMembership(j){return this._memberships[j]}get memberships(){return Lr(l6(this._memberships))}set memberships(j){if(this._memberships={},j){for(let e of j)this._memberships[e.memberUuid]=e;this.addAttrMask(A.Attr.Memberships)}}get ssoConfig(){return this._sso}ssoMigrationGracePeriodDeadline(){return this._sso?.deadline}removeMember(j){this._memberships=ei(this._memberships,j.uuid)}get vaultAccessList(){return Lr(l6(this._getLoadedVaultAccessMap()))}getUnsafeVaultAccessList(){return Lr(l6(this._vaultAccessMap))}setVaultAccess(j){this._vaultACLs=void 0,this._vaultAccessMap={...this._vaultAccessMap,[j.vaultUuid]:j}}removeVaultAccess(j){this._vaultAccessMap=ei(this._vaultAccessMap,j.uuid)}clearCachedAccessInfo(){this._memberships={},this._vaultAccessMap={},this._vaultACLs=void 0,this.recoveryKeyset=void 0}compare(j){return Z$A(this)-Z$A(j)||Ty(this.name,j.name)}toString(){return"[object Group]"}};wA.TypeOwners="O";wA.TypeAdmins="A";wA.TypeRecovery="R";wA.TypeTeamMembers="M";wA.TypeUserDefined="U";wA.TypeMSPAdministrators="T";wA.TypeExternalAccountManagers="E";wA.TypeSecurity="S";wA.TypeProvisioning="P";wA.TypeBackofficeUsers="X";wA.TypeBackofficeBilling="Y";wA.TypeBackofficeSecurity="W";wA.TypeBackofficeDevelopers="V";wA.TypeBackofficeFinance="F";wA.TypeBackofficeContent="C";wA.TypeBackofficeOwners="Z";wA.TypeBackofficeAdvanced="D";wA.Attr={None:0,PubKey:1,Memberships:2,VaultAccess:4,RecoverableKeyset:8,UserCounts:16,All:255};var Z$A=A=>W0j[A.type]||0,W0j=[wA.TypeOwners,wA.TypeAdmins,wA.TypeRecovery,wA.TypeSecurity,wA.TypeTeamMembers,wA.TypeBackofficeOwners,wA.TypeBackofficeSecurity,wA.TypeBackofficeAdvanced,wA.TypeBackofficeDevelopers,wA.TypeBackofficeContent,wA.TypeBackofficeBilling,wA.TypeBackofficeUsers,wA.TypeUserDefined].reduce((A,j,e)=>({...A,[j]:e}),{});var YH=class{constructor(){this.groupsByUuid={},this.clearAll()}clearAll(){this.setGroups([])}setGroups(j){this.groupsByUuid={},this.recoveryGroup=void 0;let e={};for(let t of j){if(t.type===wA.TypeRecovery){this.recoveryGroup=t;continue}else this.groupsByUuid[t.uuid]=t;Br([wA.TypeAdmins,wA.TypeOwners,wA.TypeTeamMembers,wA.TypeSecurity,wA.TypeMSPAdministrators],t.type)&&(e[t.type]=t)}this.administratorsGroup=e[wA.TypeAdmins],this.ownersGroup=e[wA.TypeOwners],this.teamMembersGroup=e[wA.TypeTeamMembers],this.securityGroup=e[wA.TypeSecurity],this.mspAdministratorsGroup=e[wA.TypeMSPAdministrators]}getGroup(j){let e=this.groupsByUuid[j];return!e&&this.recoveryGroup&&this.recoveryGroup.uuid===j?this.recoveryGroup:e}getGroups(){return(this.recoveryGroup?[this.recoveryGroup]:[]).concat(l6(this.groupsByUuid))}getManagableGroups(){return l6(this.groupsByUuid)}};var SQ=(A,j)=>A?.subscription.status===j;var pl="my",AwA="start",Y0j="pg8-;",Q0j=A=>A===pl||A===AwA,dt=class A{static isValidType(j){return j===A.Type.Family||j===A.Type.Individual||j===A.Type.Business}static get defaultSettings(){return{slackURLs:{alerts:"",notifications:""},betaIsEnabled:!1,richIconsAreDisabled:!1,duo:{isEnabled:!1,rememberDays:30,integrationKey:"",secretKey:"",host:""},support:{url:""},provisioning:{isEnabled:!1,notificationEmails:"",monitoringEnabled:!1,monitoringDomain:"",deploymentOption:"",identityProvider:"",replyToEmail:{address:"",verified:!1}},masterPasswordPolicy:{type:Ch.Minimum,customString:""},twoFactor:{enforced:!1},clientRestrictions:{requireModernApps:!1},teamMemberPolicies:{blockFileStorage:!1,blockPasskeyAuthenticator:!1,privateVaultsBusinessWatchtowerReportingEnabled:!0,allowedWatchtowerDomains:"",telemetryOptOut:!1},disableEmergencyKit:!1,sidebarNavigationPolicies:{hideDeveloperTools:!1,hideIntegrations:!1}}}constructor(j){this.uuid=j.uuid,this.type=j.type,this.avatar=j.avatar||"",this.domain=j.domain||"",this.inviteEmail=j.invite&&j.invite.inviteEmailDomains||"",this.inviteSecret=j.invite&&j.invite.inviteSecret||"",this.name=j.name||"",this.state=j.state,this.attrVersion=j.attrVersion,this.baseAvatarURL=j.baseAvatarURL,this.baseAttachmentURL=j.baseAttachmentURL,this.settings=j.settings?g0({},j.settings,A.defaultSettings):A.defaultSettings,this.features={},this.gatedFeatures={},this.gatedFeatureTrials=[],this.hasNativeClient=j.userFlags?j.userFlags.hasNativeClient:!1,this.hasNonSafariClient=j.userFlags?j.userFlags.hasNonSafariClient:!1,this.hasPackages=j.userFlags?j.userFlags.hasPackages:!1,this.hasMspConsoleAccess=j.userFlags?j.userFlags.hasMspConsoleAccess:!1,this.mustMigrate=j.userFlags?j.userFlags.mustMigrate:!1,this.hasRecoveryMembers=j.accountFlags?j.accountFlags.hasRecoveryMembers:!1,this.isAccountManaged=j.accountFlags?j.accountFlags.isAccountManaged:!1,this.mspInfo=j?.mspInfo||{accountName:void 0,accountDomain:void 0},this.activities=[],this.promotions=[],this.meta={companySize:void 0},this.counts={groups:0,invitations:0,users:0,vaults:0,activeGuests:0,activeUsers:0,activeManagedAccounts:0},this.subscription=jl.create(),this.trialDays=j.billing?.trialDays||0,this._cache=new YH}setAttrs(j){this.uuid=j.uuid,this.type=j.type,this.avatar=j.avatar||"",this.domain=j.domain||"",j.invite&&(this.inviteEmail=j.invite.inviteEmailDomains||"",this.inviteSecret=j.invite.inviteSecret||""),this.name=j.name||"",this.state=j.state,this.attrVersion=j.attrVersion,this.baseAvatarURL=j.baseAvatarURL,this.baseAttachmentURL=j.baseAttachmentURL,j.settings?this.settings=g0({},j.settings,A.defaultSettings):this.settings=g0({},this.settings,A.defaultSettings),j.userFlags&&(this.hasNativeClient=j.userFlags.hasNativeClient,this.hasNonSafariClient=j.userFlags.hasNonSafariClient,this.hasPackages=j.userFlags.hasPackages,this.hasMspConsoleAccess=j.userFlags.hasMspConsoleAccess,this.mustMigrate=j.userFlags.mustMigrate),j.accountFlags&&(this.hasRecoveryMembers=j.accountFlags.hasRecoveryMembers,this.isAccountManaged=j.accountFlags.isAccountManaged),j.billing&&(this.trialDays=j.billing.trialDays)}get hasFeature(){return{...jl.hasFeature(this.subscription),...this.features}}get hasBackOfficeFeature(){return{...jl.hasFeature(this.subscription)}}get hasUnleashFeature(){return{...this.features}}get fspPhase(){return this.features["b5web-core-app-ui-v1-no-opt"]?"no-opt":this.features["b5web-core-app-ui-v1-opt-out"]?"opt-out":this.features["b5web-core-app-ui-v1-opt-in"]?"opt-in":void 0}get hasGatedFeature(){return jl.hasGatedFeature(this.subscription)}get isFamily(){return this.type===A.Type.Family}get isIndividual(){return this.type===A.Type.Individual}get isBusiness(){return this.type===A.Type.Business}get isManagedServiceProvider(){return!!this.hasBackOfficeFeature?.managedServiceProvider}get isBackoffice(){return this.domain==="backoffice"}urlHost(j){return(this.isIndividual?pl:this.domain)+"."+j}urlOrigin(j){return"https://"+this.urlHost(j)}supportsBetaFeatures(){let j=this.hasFeature;return j.mfaDuo||j.customTemplates||j.itemSendingV1||j.reports}get administratorsGroup(){return this._cache.administratorsGroup}get ownersGroup(){return this._cache.ownersGroup}get recoveryGroup(){return this._cache.recoveryGroup}get teamMembersGroup(){return this._cache.teamMembersGroup}get securityGroup(){return this._cache.securityGroup}get mspAdministratorsGroup(){return this._cache.mspAdministratorsGroup}get groups(){return this._cache.getManagableGroups()}findGroup(j){return this._cache.getGroup(j)}setGroups(j){this._cache.setGroups(j)}pushGroup(j){this._cache.groupsByUuid[j.uuid]=j,j.isTypeSecurity&&(this._cache.securityGroup=j)}removeGroup(j){let e=zd(j);delete this._cache.groupsByUuid[e]}};dt.StateRegistered="R";dt.StateActive="A";dt.StateSuspended="S";dt.StateDeleted="D";dt.defaultMfaTypes=[di.Totp,di.WebAuthn];(function(A){let j;(function(e){e.Individual="I",e.Family="F",e.Business="B"})(j=A.Type||(A.Type={})),A.isProvisioningEnabled=(e,t)=>!!e?.settings.provisioning?.isEnabled||t===sG.Active,A.isDuoEnabled=e=>!!e?.settings.duo?.isEnabled,A.isFrozen=e=>SQ(e,jl.Status.Frozen),A.isTrial=e=>SQ(e,jl.Status.Trial),A.isActive=e=>SQ(e,jl.Status.Active),A.isInExtendedPromotionalTrial=e=>e?.trialDays>=60,A.hasLinkedAccountsFeature=e=>!!(e?.hasBackOfficeFeature.linkedChildAccounts&&e?.hasUnleashFeature["b5web-linked-accounts"])})(dt||(dt={}));var tc=W(aA());var Z0j=tc.readonly(tc.intersection([tc.type({objectType:tc.string,action:tc.string},"required"),tc.partial({objectUUID:tc.string,reportType:tc.string},"optional")]),"AuditEventReportRequest"),xG;(function(A){A.fromApi=j=>({actor:j.actor,eid:j.eid||0,uuid:j.uuid||"",time:H6(j.time),ipAddress:j.ipAddress,action:j.action,objectType:j.objectType||"",objectUuid:j.objectUuid||"",auxInfo:j.auxInfo||"",auxUuid:j.auxUUID||"",actorType:j.actorType||""}),A.ObjectType={Account:"account",Billing:"billing",User:"user",Signup:"signup",Device:"device",Group:"group",Tier:"tier",Plan:"plan",Policy:"policy",GroupMembership:"gm",Vault:"vault",VaultItem:"item",VaultItems:"items",VaultItemHistory:"itemhist",VaultKey:"vaultkey",Template:"template",UserVaultAccess:"uva",GroupVaultAccess:"gva",Invite:"invite",EmailChange:"ec",ServiceAccount:"sa",StripeSubscription:"sub",StripeCard:"card",StripePaymentMethod:"pm",StripeEvent:"strpevnt",Report:"report",SlackApp:"slackapp",File:"file",FamilyChildAccount:"famchild",Promotion:"promo",PromotionOffer:"promoffr",CJPartner:"cjprtner",ServiceAccountToken:"satoken",MigratingUser:"miguser",ObjectDelegatedSession:"dlgdsess",SsoSettings:"sso",SignInToken:"ssotkn",RecoveryKey:"rkey",ManagedAccount:"mngdacc",MSPLinkRequest:"msplreq",FederatedApplication:"fedapp",FederatedApplicationAssignment:"faassign",FederatedSession:"fedsess",ProvisioningIntegration:"provint"},A.Action={Verify:"verify",Activate:"activate",Reactivate:"reactive",Suspend:"suspend",BeginRecovery:"beginr",CancelRecovery:"cancelr",CompleteRecovery:"completr",UpgradeGuestToMember:"upguest",Begin:"begin",Complete:"complete",Propose:"propose",Provision:"provsn",Join:"join",Create:"create",Update:"update",Delete:"delete",Purge:"purge",View:"view",Export:"export",ReAuth:"reauth",Convert:"convert",Cancel:"cancel",EditCustomEmail:"editce",EnableMFA:"enblmfa",UpdateMFA:"updatmfa",DisableMFA:"disblmfa",EnableDuo:"enblduo",UpdateDuo:"updatduo",DisableDuo:"disblduo",Enabled:"enabled",Disabled:"disabled",Changed:"changed",Hide:"hide",Unhide:"unhide",Patch:"patch",Grant:"grant",Revoke:"revoke",TokenRename:"trename",TokenRevoke:"trevoke",TokenVerify:"tverify",Expire:"expire",GroupJoin:"join",GroupLeave:"leave",GroupRole:"role",Refund:"refund",ResetBilling:"resbill",AddPromotion:"addpromo",RemovePromotion:"rmpromo",RedeemPromotion:"rdmpromo",RevokePromotion:"rvkpromo",EnableThanksGivingPromo:"enbltgp",DisableThanksGivingPromo:"disbltgp",AddCoupon:"addcoupn",EmailDeletion:"emaildel",ResendEmail:"rsndmail",SendProvisionStartedEmail:"sendts",ResendProvisionStartedEmail:"resendts",ResendAllProvisionStartedEmail:"prsndall",EnableTravel:"trvlaway",DisableTravel:"trvlback",EnableSync:"syncon",DisableSync:"syncoff",ChangeKeyset:"changeks",ChangeMasterPassword:"changemp",ChangeSecretKey:"changesk",ChangeName:"changenm",ChangeLanguage:"changela",UpdateAttributes:"updatea",AttachChild:"attchild",DetachChild:"detchild",RedeemChild:"rdmchild",UpdateFirewallRule:"updatfw",DeauthorizeOldDevices:"deolddev",DeauthorizeAllDevices:"dealldev",Send:"sendpkg",Share:"share",DeleteShare:"delshare",Unknown:"unknown",Reject:"reject",AddCredit:"addcred",SetCoupon:"setcoupn",RemoveCoupon:"rmcoupn",ChangeTier:"changetr",ResetTrial:"restrial",EndTrial:"endtrial",RecalculateAccountTrial:"recaltrl",AddPurchaseOrder:"addpo",AddStripePurchaseOrder:"addspo",RetryInvoice:"retryinv",Ignore:"ignore",Requeue:"requeue",ClearCache:"clrcache",ResetInviteRateLimit:"rsivrtlt",UpdatePurchaseOrder:"updatepo",UpdateStripePurchaseOrder:"udatespo",ClearFailedMFACount:"clrflmfa",AddTaxNumber:"addtxnum",RemoveTaxNumber:"rmtaxnum",RetryAppleReceipt:"rtaplrct",Replace:"replace",AutoDelete:"autodel",UserLockout:"lockout",AddVerifiedDomain:"vrfydmn",UpdateVerifiedDomain:"uvrfydmn",DeleteVerifiedDomain:"dvrfydmn",UpdateItemShareAdminSettings:"uisas",ActionMigratingUserComplete:"musercom",ActionMigratingUserDeclined:"muserdec",ActionAddAccountTransfer:"addaxfr",ActionRemoveAccountTransfer:"remaxfr",ActionEnableSSO:"enblsso",ActionDisableSSO:"disblsso",ActionChangeSSOAuthenticationPolicy:"chngpsso",ActionChangeSSOGracePeriodDuration:"chngdsso",ActionUpdateSSOClientSecret:"chngcsso",ActionDeleteSSOGroup:"delgsso",ActionAddSSOGroup:"addgsso",ActionEnrollTrustedDevice:"tdvcsso",ActionSetupCredentialBundleAuth:"sdvcsso",ActionDelegateSession:"dlgsess",NewSignInToken:"ssotkn",RatchetSignInToken:"ssotknr",SignInWithSignInToken:"ssotknv",ActionEnableDVR:"enbldvr",ActionDisableDVR:"disbldvr",LaunchInto:"launchi",Unlink:"unlink",ActionLaunch:"launch",ActionFail:"fail",Accept:"accept",ActionMSPUpdatePermission:"upmspprm",ActionMSPRemovePermission:"rmmspprm"},A.ReportType={ReportBusinessWatchtower:"business-watchtower",ReportInsightsPasswordHealth:"insights-password-health",ReportDomainBreach:"domain-breach-report",ReportInsightsBreachChecks:"insights-breach-checks",ReportInsightsTeamUsage:"insights-team-usage",ReportSignInAttempts:"sign-in-attempts",ReportVerifications:"verifications-report",ReportActivityLog:"activity-log",ReportUserItemUsages:"user-usage-report",ReportVaultItemUsages:"vault-usage-report",ReportItemUsages:"item-usage-report",ReportDevice:"device-report",ReportTeam:"team-report",ReportOverview:"overview-report",ReportDeveloper:"developer-report",ReportFoundApps:"found-apps-report",ReportFoundAppDetails:"found-app-details-report",ReportSsoMigration:"sso-migration-report",ReportAdoption:"adoption-report"},A.PolicyType={PolicyReporting:"reporting",PolicyUndefined:"undefined"}})(xG||(xG={}));var va=W(aA()),QH=2,Ayj=va.readonly(va.intersection([va.type({cw:va.number,rp:va.number,wp:va.number,i2fa:va.number,exp:va.number,tot:va.number}),va.partial({uw:va.number,vp:va.number})])),MQ=va.readonly(va.intersection([va.type({cw:va.number,rp:va.number,wp:va.number,i2fa:va.number,exp:va.number,tot:va.number}),va.partial({uw:va.number,vp:va.number,wa:va.number})]));var rc=W(aA()),ewA=W(gh()),nw=W(so());var fG=rc.readonly(rc.type({method:rc.string,alg:rc.string,iterations:rc.number,salt:rc.string}),"AuthParams"),_Q=rc.readonly(rc.type({params:fG,srpX:rc.string}),"Auth"),Wr;(function(A){A.generate=async j=>A.generateWithParams(j,jwA()),A.generateWithParams=async(j,e)=>{let t=await eyj(j,e);return{params:e,srpX:t}},A.createFromPreComputedX=(j,e)=>({srpX:Pn(j),params:e||jwA()}),A.getForUpload=j=>({...j.params,v:ayj(j)})})(Wr||(Wr={}));var jyj=128,jwA=()=>({method:mP.toString(),alg:Yp.DEFAULT_PBES2_ALG,iterations:Yp.DEFAULT_ITERATIONS,salt:$A.getSalt(jyj)}),eyj=async(A,j)=>{switch(oi.fromString(j.method).prefix){case Iu.SrpG:return tyj(A,j);case Iu.Srp:return ryj(A,j)}},tyj=async(A,j)=>{let{email:e,secretKey:t,password:r}=twA(A),a=ZA(j.salt),n=Dj(e),o=Dj(j.method),i=await Q6.rawHkdf(Q6.Sha2Mode.Sha256,a,o,n,32),s=await Q6.rawPbkdf2UsingPbes2Alg(j.alg,r,i,j.iterations),l=await t.combineWithBytes(s);return Pn(l)},ryj=async(A,j)=>{let{email:e,secretKey:t,password:r}=twA(A),a=ZA(j.salt),n=await Q6.rawPbkdf2UsingPbes2Alg(j.alg,nN(r),a,j.iterations),o=await t.combineWithBytes(n),i=new nw.hash.sha1;i.update(ia(a)),i.update(nw.hash.sha1.hash(e+":"+Pn(o)));let s=i.finalize();return nw.codec.hex.fromBits(s)},ayj=A=>{let{g:j,N:e}=oi.fromString(A.params.method).group,t=nyj(A.srpX);return oyj(j.modPow(t,e))},twA=({email:A,password:j,secretKey:e})=>({email:A.trim().toLowerCase(),password:IL(j),secretKey:e}),nyj=A=>new ewA.BigInteger(A,16),oyj=A=>A.toString(16).replace(/^(0x)?0*/,"");var Wh;(function(A){A.create=e=>Object.freeze({code:"",state:"",...e}),A.CodePrefix="CA";let j;(function(e){e.Active="A",e.Ready="R"})(j=A.State||(A.State={}))})(Wh||(Wh={}));var LQ;(function(A){A.Prd="1password.com",A.Pca="1password.ca",A.Peu="1password.eu",A.Ent="ent.1password.com",A.Stg="b5staging.com",A.Dev="b5dev.com",A.Dca="b5dev.ca",A.Deu="b5dev.eu",A.Tst="b5test.com",A.Tca="b5test.ca",A.Teu="b5test.eu",A.Rev="b5rev.com",A.Lcl="b5local.com:3000",A.LclHot="b5local.com:4000"})(LQ||(LQ={}));var Yh=W(so()),ow=class{constructor(j,e){if(!j){let t=new Error("Created new File without a file ID");console.warn(t)}if(!e){let t=new Error(`Created new File (${j}) without a signing key`);console.warn(t)}this.fileId=j,this.signingKey=e}signReference(j,e){let t=new Yh.misc.hmac(Yh.codec.base64url.toBits(this.signingKey.k),Yh.hash.sha256),r=this.signingKey.kid+this.fileId+j+e.toString();return Yh.codec.base64url.fromBits(t.encrypt(r))}};var lm;(function(A){A.getInitials=({name:j})=>f9(b9(j)," ").filter(e=>!!e).slice(0,2).reduce((e,t)=>e+[...t][0],"").toLocaleUpperCase()})(lm||(lm={}));var NQ;(function(A){A.workspace="workspace"})(NQ||(NQ={}));var rwA=W(Io());var iyj=["126.com","163.com","aim.com","airmail.com","aol.com","att.net","bellsouth.net","charter.net","comcast.net","cox.net","earthlink.net","facebook.com","fastmail.com","fastmail.fm","gmail.com","guerrillamail.com","hotmail.com","hushmail.com","icloud.com","inbox.ru","juno.com","live.com","mac.com","mail.ru","mailinator.com","me.com","msn.com","outlook.com","protonmail.com","qq.com","sbcglobal.net","snkmail.com","tempmail.us","thrma.com","trbvm.com","verizon.net","yahoo.com","yandex.com","yandex.ru","yp.ycare.de","zoho.com"],Ru=class{constructor(j){this.uuid=j.uuid,this.email=j.email||"",this.accountName=j.accountName||"",this.accountType=j.accountType||"",this.language=j.language,this.state=j.state||"",this.type=j.type||"",this.sentAt=H6(j.sentAt),this.timeout=j.timeout||0,this.revokedAt=H6(j.revokedAt),this.acceptedAt=H6(j.acceptedAt)}get expiresAt(){return(0,rwA.default)(this.sentAt).add(this.timeout,"hours").toDate()}get isExpired(){return Date.now()-this.expiresAt.valueOf()>0}get joined(){}get lastAuthAt(){}travelModeIsEnabled(){return!1}};Ru.StatePending="P";Ru.StateAccepted="A";Ru.StateRevoked="R";Ru.TypeRegular="R";Ru.TypeGuest="G";var CB=class{constructor(j){this.state=j.state,this.shouldConfirm=j.shouldConfirm,this.inviteUuid=j.inviteUuid,this.userUuid=j.userUuid,this.vaultUuid=j.vaultUuid,this.vaultAcl=j.vaultAcl}};CB.StatePending="P";CB.StateAccepted="A";var ZH=class{constructor(j){this.vaults=j}get shouldConfirm(){return this.vaults.every(j=>j.shouldConfirm)}},syj=A=>{let j=A.vaults.filter(e=>e.state===CB.StateAccepted&&e.userUuid);return zl(Gp(j,e=>e.userUuid),e=>new ZH(e))};var ml=W(aA());var lyj=E`web-api/model/local_auth.ts`,cyj="localauthv2keykid",awA="fool me twice",dyj="shame on you",nwA=ml.readonly(ml.type({email:ml.string,srpX:ml.string,muk:co,secretKey:ij(ml.string),signInAddress:ml.string,userAuth:fG,throttleSecret:ij(ml.readonly(ml.type({seed:ml.string,uuid:ml.string}))),deviceUuid:ij(ml.string)}),"SerializableLocalAuthCredentials"),owA=(A,j)=>{let e=A.throttleKeypair?Pn(A.throttleKeypair.exportSeed()):void 0;return{signInAddress:A.signInAddress,userAuth:A.userAuth,email:A.email,srpX:A.srpX,muk:A.muk,secretKey:A.secretKey,throttleSecret:e&&j?{seed:e,uuid:j}:void 0,deviceUuid:A.deviceUuid}},Ju;(function(A){A.generate=async j=>{let{bearerToken:e,...t}=await A.generateVerifierAndToken();try{let r=await iw.deriveKey(t,e),a=Ue.encode(owA(j)),n=await r.encrypt(a);return{localAuth:{verifier:t,encCredentials:n},credentials:j,bearerToken:e}}catch(r){throw new Error("new LocalAuth failed: "+r)}},A.decryptCredentials=async(j,e)=>{try{let r=await(await iw.deriveKey(j.verifier,e)).decrypt(j.encCredentials),a=sj(r,Ue).unwrap();return sj(a,nwA,{mode:"unsafe_report_only",file:lyj,func:E`decryptCredentials`}).unwrap()}catch(t){throw new Error("credentials failed: "+t)}},A.generateVerifierAndToken=async()=>{let j=kyj();return{...await pyj(j),bearerToken:j}}})(Ju||(Ju={}));var kyj=()=>{let A=Vr(24);return tj(A)},uyj=()=>{let A=Vr(16);return tj(A)},pyj=async A=>{let j=uyj(),e=await zQ(A,j),t=Mp(e,awA),r=tj(t);return{salt:j,localHash:r}},iw;(function(A){let j=async(e,t)=>{try{let r=await zQ(t,e.salt),a=Mp(r,awA),n=tj(a);if(e.localHash!==n)throw new Error("Authentication failed, invalid bearer token")}catch(r){throw new Error("validateBearerToken failed: "+r)}};A.deriveKey=async(e,t)=>{try{await j(e,t);let r=await zQ(t,e.salt),a=Mp(r,dyj),n=$t(cyj);return await n.importRawKey(Tt,a),n}catch(r){throw new Error("deriveKey failed: "+r)}}})(iw||(iw={}));var zQ=async(A,j)=>{try{let e=ZA(j);return Q6.rawPbkdf2UsingPbes2Alg(Yp.PBES2_ALG_256,A,e,Yp.ITERATIONS_100_000)}catch(e){throw new Error("token PBKDF2 failed: "+e)}};var uw=W(Dn()),vr=W(aA());var jT=W(aA());var cw={};Yt(cw,{DEFAULT_KEY_ALG:()=>dwA,DEFAULT_SIGN_ALG:()=>myj,JWK_ALG_ES256:()=>ak,JWK_CRV_ES256:()=>swA,WC_IMPORT_ALG_ES256:()=>RQ,WC_SIGN_ALG_ES256:()=>JQ,_importPriKeyNative:()=>uwA,_importPriKeySjcl:()=>BwA,_importPubKeyNative:()=>pwA,_importPubKeySjcl:()=>gwA,_signNative:()=>mwA,_signSjcl:()=>hwA,_verifyNative:()=>EwA,_verifySjcl:()=>qwA,generateJwkPair:()=>UQ,generateKeyPair:()=>kwA,importPriKey:()=>GG,importPubKey:()=>sw,sign:()=>FG,verify:()=>lw});var mi=W(so());var ak="ES256",swA="P-256",RQ={name:"ECDSA",namedCurve:"P-256"},JQ={name:"ECDSA",hash:{name:"SHA-256"}},lwA=A=>{if(A.kty==="EC"||A.crv===swA)return RQ;throw new Error("Unexpected EC kty/crv: "+A.kty+", "+A.crv+".")},cwA=A=>{if(A!==ak)throw new Error("Unexpected algorithm identifier");return JQ},dwA=RQ,myj=JQ,UQ=async A=>{let{priKey:j,pubKey:e}=await kwA(A);return{priKey:j.jwk,pubKey:e.jwk}},kwA=async A=>{let j=$A.supports.nativeEcdsa?Eyj:Byj,e=async()=>j(A).then(qyj),t=5,r=eh(t-1,()=>e),a=e();return ti(r,async(o,i)=>o.catch(async()=>i()),a).catch(o=>{throw new Error(`Failed to generate valid signing keys after ${t} attempts. <${G6(o)}>`)})},GG=async A=>"imported"in A?A:$A.supports.nativeEcdsa?await uwA(A):await BwA(A),sw=async A=>"imported"in A?A:$A.supports.nativeEcdsa?await pwA(A):await gwA(A),FG=async({alg:A,key:j,signingInput:e})=>j.type==="native"?mwA({alg:A,key:j.imported,signingInput:e}):hwA({alg:A,key:j.imported,signingInput:e}),lw=async({alg:A,key:j,signingInput:e,signature:t})=>j.type==="native"?EwA({alg:A,key:j.imported,signingInput:e,signature:t}):qwA({alg:A,key:j.imported,signingInput:e,signature:t}),Eyj=async A=>{let j=["sign","verify"],t=dwA,r=A||fe(),{publicKey:a,privateKey:n}=await $A.subtle.generateKey(t,!0,j);if(!a||!n)throw new Error("Did not generate key pair properly");let[o,i]=await Promise.all([$A.exportKey(r,a,$A.JwkEcPubKey),$A.exportKey(r,n,$A.JwkEcPriKey)]);return{uuid:r,priKey:{type:"native",jwk:i,imported:n},pubKey:{type:"native",jwk:o,imported:a}}},uwA=async A=>{let j=lwA(A),e=$A.correctJwkEcPriKey(A),t=await $A.subtle.importKey("jwk",e,j,!0,["sign"]).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,Z("Invalid private key"))});return{type:"native",jwk:e,imported:t}},pwA=async A=>{let j=lwA(A),e=$A.correctJwkEcPubKey(A),t=await $A.subtle.importKey("jwk",e,j,!0,["verify"]).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,Z("Invalid public key"))});return{type:"native",jwk:e,imported:t}},mwA=async({alg:A,key:j,signingInput:e})=>{let t=await $A.subtle.sign(cwA(A),j,e);return new Uint8Array(t)},EwA=async({alg:A,key:j,signingInput:e,signature:t})=>{let r=await $A.subtle.verify(cwA(A),j,t,e);if(typeof r!="boolean")throw new TypeError("Unknown verification value: "+r);return r},Byj=async A=>{let j=A||fe(),{pub:e,sec:t}=mi.ecc.ecdsa.generateKeys(256,1),r=await hyj(e,j),a=await gyj(t,r);return{uuid:j,priKey:{type:"sjcl",jwk:a,imported:t},pubKey:{type:"sjcl",jwk:r,imported:e}}},BwA=async A=>{let j=$A.correctJwkEcPriKey(A),e=ZA(j.d),t=mi.bn.fromBits(ia(e)),r=new mi.ecc.ecdsa.secretKey(mi.ecc.curves.c256,t);return{type:"sjcl",jwk:j,imported:r}},gwA=async A=>{let j=$A.correctJwkEcPubKey(A),e=ZA(j.x),t=ZA(j.y),r=Pn(e)+Pn(t);if(r.length!==128)throw new Error("Invalid length for ECDSA point: "+r.length);let a=new mi.ecc.ecdsa.publicKey(mi.ecc.curves.c256,mi.codec.hex.toBits(r));return{type:"sjcl",jwk:j,imported:a}},hwA=async({alg:A,key:j,signingInput:e})=>{if(A!==ak)throw new Error("Unsupported algorithm");let t=mi.hash.sha256.hash(ia(e)),r=j.sign(t,1,!1);return new Uint8Array(mi.codec.bytes.fromBits(r))},qwA=async({alg:A,key:j,signingInput:e,signature:t})=>{if(A!==ak)throw new Error("Unsupported signature algorithm: "+A);let r=ia(t),a=mi.hash.sha256.hash(ia(e));return j.verify(a,r,!1)},gyj=async(A,j)=>{let e=new Uint8Array(mi.codec.bytes.fromBits(A.get()));return{...j,key_ops:["sign"],d:tj(e)}},hyj=async(A,j)=>{let{x:e,y:t}=A.get();return{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",kid:j,x:tj(new Uint8Array(mi.codec.bytes.fromBits(e))),y:tj(new Uint8Array(mi.codec.bytes.fromBits(t)))}},iwA=Dj("I've got a golden ticket!"),qyj=async A=>{let j=await GG(A.priKey.jwk),e=await FG({alg:ak,key:j,signingInput:iwA}),t=await sw(A.pubKey.jwk);if(!await lw({alg:ak,key:t,signingInput:iwA,signature:e}))throw new Error("Signature failed verification");return A};var AT={};Yt(AT,{DEFAULT_PARAMS:()=>xyj,JWK_ALG_RSA_OAEP:()=>fwA,JWK_ALG_RSA_OAEP_256:()=>vwA,WC_KEY_GEN_RSA_OAEP:()=>VQ,WC_KEY_GEN_RSA_OAEP_256:()=>xwA,_decrypt:()=>ywA,_encrypt:()=>$wA,_importPriKey:()=>FwA,_importPubKey:()=>bwA,decrypt:()=>QQ,decryptJweB:()=>fyj,encrypt:()=>YQ,encryptJweB:()=>Gyj,generateKeyPair:()=>WQ});var vyj="model/rsa",XQ=rj(vyj),vwA="RSA-OAEP-256",xwA={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},fwA="RSA-OAEP",VQ={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},xyj=VQ,WQ=async A=>XQ("generateKeyPair",async()=>{let j=await ul.generate(A),e=j.pubKey.jwk,t=j.priKey.jwk;if(!e||!t)throw new Error("Missing plain text key pair.");return{pubKey:e,priKey:t}}),fyj=async(A,j)=>XQ("decrypt",async()=>(await new IB(A.kid,void 0,A).import()).decrypt(j)),Gyj=async(A,j)=>XQ("encrypt",async()=>(await Ni(A)).encrypt(j)),Fyj=A=>{switch(A){case vwA:{if(!Kp.rsaOaep256)throw new CA.ClientError(CA.ClientErrorCode.noRsaOaep256Support,Z("Browser does not support RSA-OAEP-256"));return xwA}case fwA:return VQ}throw new Error("Unexpected alg: "+A)},GwA=A=>{let{name:j,hash:e}=Fyj(A);return{name:j,hash:e}},YQ=async(A,j)=>await $wA(await bwA(A),j),QQ=async(A,j)=>await ywA(await FwA(A),j),FwA=async A=>{let j=GwA(A.alg),e=Gy(A);return we.importKey("jwk",e,j,!0,["decrypt"])},bwA=async A=>{let j=GwA(A.alg),e=fy(A);return we.importKey("jwk",e,j,!0,["encrypt"])},ywA=async(A,j)=>{let e=await we.decrypt(A.algorithm,A,j);return new Uint8Array(e)},$wA=async(A,j)=>{if(j.length>256)throw new Error("Plaintext is too large.");let e=await we.encrypt({name:A.algorithm.name},A,j);return new Uint8Array(e)};var dw=async(A,j)=>{let e="jwk"in A?A.jwk:"encryptionKeyPair"in A?A.encryptionKeyPair.pubKey:A;if(typeof e>"u")throw new TypeError("Missing JWK");if(e.kty!=="RSA")throw new Error(`Unexpected key type: ${e.kty}`);return byj(e,j)},kw=async(A,j)=>{let e="jwk"in A?A.jwk:"encryptionKeyPair"in A?A.encryptionKeyPair.priKey:A;if(typeof e>"u")throw new TypeError("Missing JWK");if(e.kty!=="RSA")throw new Error(`Unexpected key type: ${e.kty}`);return yyj(e,j)},byj=async(A,j)=>{let e={alg:A.alg,enc:Tt,kid:A.kid,typ:"jose+json"},t=tj(lt(e)),{cek:r,ciphertext:a,tag:n,iv:o}=await vxA({enc:e.enc,plaintext:j,additionalData:Dj(t)}),i=await YQ(A,r);return{protected:t,encrypted_key:tj(i),iv:tj(o),ciphertext:tj(a),tag:tj(n)}},yyj=async(A,j)=>{let e=sj(j.protected,LE.pipe($A.JweHeader)).unwrap();if(e.kid!==A.kid)throw new Error("Encrypted with incorrect key");if(e.alg!==A.alg)throw new Error("Key algorithm does not match encrypted data");let t=ZA(j.encrypted_key),r=await QQ(A,t);return{content:await xxA({enc:e.enc,cek:r,iv:ZA(j.iv),ciphertext:ZA(j.ciphertext),additionalData:Dj(j.protected),tag:ZA(j.tag)}),header:e}};var eT=jT.readonly(jT.type({ePriKey:Nd,sPriKey:XE}),"KeysetEncKeyData"),ZQ;(function(A){A.fromClassicKeyset=j=>{if(!j.ekeyPair.priKey.jwk||!j.ekeyPair.pubKey.jwk)throw new Error("Missing encryption key pair");if(!j.skeyPair?.priKey?.jwk||!j.skeyPair?.pubKey?.jwk)throw new Error("Missing signing key pair");return{uuid:j.uuid,sn:j.sn,spec:2,encryptionKeyPair:{priKey:j.ekeyPair.priKey.jwk,pubKey:j.ekeyPair.pubKey.jwk},signingKeyPair:{priKey:j.skeyPair.priKey.jwk,pubKey:j.skeyPair.pubKey.jwk}}},A.generate=async()=>{let j=fe(),[e,t]=await Promise.all([WQ(j),UQ(j)]);return{uuid:j,sn:0,spec:2,encryptionKeyPair:e,signingKeyPair:t}},A.encryptKeyset=async(j,e)=>{let t={ePriKey:e.encryptionKeyPair.priKey,sPriKey:e.signingKeyPair.priKey},r=await dw(j,Ue.encode(t));return{uuid:e.uuid,sn:e.sn,spec:2,ePubKey:e.encryptionKeyPair.pubKey,sPubKey:e.signingKeyPair.pubKey,encKeyData:r}},A.decryptKeyset=async(j,e)=>{let{uuid:t,sn:r,spec:a,ePubKey:n,sPubKey:o,encKeyData:i}=e,s=await kw(j,i),{ePriKey:l,sPriKey:d}=sj(s.content,Ue.pipe(eT)).unwrap();return{uuid:t,sn:r,spec:a,encryptionKeyPair:{priKey:l,pubKey:n},signingKeyPair:{priKey:d,pubKey:o}}}})(ZQ||(ZQ={}));var tT=eT,lze=vr.readonly(vr.type({email:vr.string,hexMuk:vr.string,srpComputedX:vr.readonly(vr.type({hexX:vr.string,userAuth:fG})),url:vr.string,userUuid:vr.string}),"Credentials"),wwA=vr.readonly(vr.type({signingKey:$A.JwkEcPriKeyDeprecated}),"ServiceAccountStreamingODValue"),AZ=vr.readonly(vr.strict({token:vr.string,sPriKey:$A.JwkEcPriKey})),$yj=vr.readonly(vr.type({token:vr.string,signingKey:$A.JwkEcPriKeyDeprecated})),rT=new vr.Type("ServiceAccountConnectObjectDataValue",AZ.is,A=>{let j=vr.union([$yj,AZ]).decode(A);if((0,uw.isRight)(j)){let e=j.right;return"signingKey"in e?(0,uw.right)({token:e.token,sPriKey:{...e.signingKey,key_ops:["sign"]}}):(0,uw.right)(e)}return j},AZ.encode),IwA=vr.readonly(vr.exact(vr.type({ePriKey:Nd})),"DetailedVaultReportingObjectDataValue"),DwA=vr.readonly(vr.exact(vr.type({ePriKey:zP})),"DetailedVaultReportingObjectDataValueV2"),OwA=vr.readonly(vr.type({creatorUuid:vr.string}),"ServiceAccountUserManagedObjectDataValue"),PwA=vr.readonly(vr.undefined,"EmptyObjectDataValue"),jZ=vr.union([tT,IwA,DwA,rT,wwA,OwA,PwA],"ObjectDataType");var cm=Xj.fromHex,Qh={TravelMode:cm("000000001"),WelcomeMessageDismissed:cm("000000002"),ReviewBannerDismissed:cm("000000004"),TrashArchiveRenameAcknowledged:cm("000000008"),EKitDownloaded:cm("000000010"),TelemetryNotificationAcknowledged:cm("000000020"),TelemetryOptIn:cm("000000040"),ImportBannerDismissed:cm("000000080"),InformationSaleOptOut:cm("000000100")};var Yj;(function(A){let j;(function(r){r.Registered="R",r.VerifiedIncomplete="V",r.PendingActivation="P",r.Active="A",r.Suspended="S",r.Deleted="D",r.RecoveryStarted="1",r.RecoveryAccepted="2",r.ProvisionPending="T",r.ProvisionStarted="3",r.Provisioned="N",r.ProvisionAccepted="4",r.ProvisionSuspended="5",r.HostedProvisionSuspended="B",r.Purging="X",r.Purged="Z",r.MustMigrateAuth="M"})(j=A.State||(A.State={})),A.AllStates=[A.State.Registered,A.State.VerifiedIncomplete,A.State.PendingActivation,A.State.Active,A.State.Suspended,A.State.Deleted,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionPending,A.State.ProvisionStarted,A.State.Provisioned,A.State.ProvisionAccepted,A.State.ProvisionSuspended,A.State.HostedProvisionSuspended,A.State.Purging,A.State.Purged,A.State.MustMigrateAuth];let e;(function(r){r.Regular="R",r.Guest="G",r.ServiceAccount="S",r.ExternalAccountManagement="E"})(e=A.Type||(A.Type={})),A.getInitials=lm.getInitials,A.compareByFullName=ni.strings(r=>r.name),A.isOwner=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Xj.includes(r.combinedPermissions,rt.BelongsToOwnersGroup)},A.isSecurity=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Xj.includes(r.combinedPermissions,rt.BelongsToSecurityGroup)},A.isAdmin=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Xj.includes(r.combinedPermissions,rt.BelongsToAdminsGroup)},A.isProvisionManager=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Xj.includes(r.combinedPermissions,rt.ProvisionPeople)&&!A.isOwner(r)&&!A.isAdmin(r)},A.isGuest=r=>r.type===e.Guest,A.isMember=r=>r.type===e.Regular,A.isExternalAccountManagement=r=>r.type===e.ExternalAccountManagement,A.isServiceAccount=r=>r.type===e.ServiceAccount,A.isActive=r=>r.state===j.Active,A.isSuspended=r=>r.state===j.Suspended,A.isProvisionStarted=r=>r.state===j.ProvisionStarted,A.isProvisioned=r=>r.state===j.Provisioned,A.isProvisionSuspended=r=>r.state===j.ProvisionSuspended,A.isHostedProvisionSuspended=r=>r.state===j.HostedProvisionSuspended,A.isEnrolled=r=>Br([j.Active,j.ProvisionPending,j.ProvisionStarted,j.Provisioned,j.ProvisionSuspended,j.HostedProvisionSuspended,j.Suspended,j.RecoveryStarted,j.RecoveryAccepted],r.state),A.canBeRecovered=r=>r.state===j.Active&&(r.type===e.Regular||r.type===e.Guest),A.canBeDeleted=r=>{switch(r.state){case j.Suspended:case j.PendingActivation:case j.ProvisionPending:case j.ProvisionStarted:case j.Provisioned:case j.ProvisionAccepted:case j.ProvisionSuspended:case j.HostedProvisionSuspended:return!0;case j.Active:return r.type===e.ServiceAccount;default:return!1}},A.canHaveNameChanged=r=>Br([j.Active,j.PendingActivation,j.RecoveryStarted,j.RecoveryAccepted,j.ProvisionPending,j.ProvisionStarted,j.Provisioned,j.ProvisionAccepted,j.ProvisionSuspended],r.state),A.canUseTravelMode=r=>(r.state===j.Active||r.state===j.RecoveryStarted||r.state===j.RecoveryAccepted)&&(r.type===e.Regular||r.type===e.Guest),A.managesSomeGroup=r=>!r||!r.groupMemberships||r.groupMemberships.length===0?!1:A.isOwner(r)||A.isAdmin(r)||r.hasPermission(rt.ManageGroups)||r.groupMemberships.some(a=>a.role===sr.Role.Manager),A.canHaveGroupsManaged=r=>!A.isGuest(r)&&A.isEnrolled(r),A.canHaveVaultsManaged=A.isEnrolled,A.canReceivePackage=r=>A.isMember(r)&&Br([A.State.PendingActivation,A.State.Active,A.State.Suspended,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionAccepted],r.state),A.canCreateReportOn=r=>Br([j.Registered,j.Active,j.Suspended,j.Deleted,j.RecoveryStarted,j.RecoveryAccepted,j.ProvisionPending,j.ProvisionStarted,j.Provisioned,j.ProvisionAccepted,j.ProvisionSuspended],r.state),A.mustBeRecordedToTrustLogWhenDeleted=r=>Br([j.Active,j.Suspended,j.MustMigrateAuth,j.RecoveryStarted,j.RecoveryAccepted,j.ProvisionAccepted,j.HostedProvisionSuspended],r.state);let t;(function(r){r.Recoverable="Recoverable",r.CanHaveGroupsManaged="CanHaveGroupsManaged",r.CanUseTravelMode="CanUseTravelMode",r.CanReceivePackage="CanReceivePackage",r.CanCreateReportOn="CanCreateReportOn"})(t=A.FilterTypes||(A.FilterTypes={})),A.Filters={[t.Recoverable]:{states:[A.State.Active],types:[A.Type.Regular,A.Type.Guest]},[t.CanHaveGroupsManaged]:{states:[A.State.Active,A.State.RecoveryAccepted,A.State.RecoveryStarted,A.State.Suspended],types:[A.Type.Regular]},[t.CanUseTravelMode]:{states:[j.Active,j.RecoveryStarted,j.RecoveryAccepted],types:[e.Regular,e.Guest]},[t.CanReceivePackage]:{states:[A.State.PendingActivation,A.State.Active,A.State.Suspended,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionAccepted],types:[e.Regular]},[t.CanCreateReportOn]:{states:[A.State.Registered,A.State.Active,A.State.Suspended,A.State.Deleted,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionPending,A.State.ProvisionStarted,A.State.Provisioned,A.State.ProvisionAccepted,A.State.ProvisionSuspended],types:[A.Type.Regular,A.Type.Guest]}}})(Yj||(Yj={}));var aT=l6,wyj=Oc,Hr=class A{constructor(j){this.accessorType="user",this.uuid=j.uuid||"",this.name=j.name||"",this.state=j.state||"",this.type=j.type||"",this.attrVersion=j.attrVersion||0,this.keysetVersion=j.keysetVersion||0,this.avatar=j.avatar||"",this.language=j.language||"en",this.combinedPermissions=j.combinedPermissions||Xj.empty(),this.newsletterPrefs=j.newsletterPrefs||0,this.preferences=j.preferences||Xj.empty(),this.externalGUID=j.externalGUID,this.hasMFAEnabled=j.hasMFAEnabled,this.proposedEmail=j.proposedEmail,this.email=j.email||"",this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.lastAuthAt=j.lastAuthAt,this.csToken=j.csToken,this.pubKey=void 0,this.activeKeyset=void 0,this.archivedKeysets=[],this._groupMemberships=[],this._directVaultAccessMap={},this._groupVaultAccessMap={},this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0,this._attrMask=0,this.devices=[],this.personalItemsCount=void 0}hasAttrMask(j){return(this._attrMask&j)===j}addAttrMask(j){this._attrMask|=j}isOwner(){return this.hasPermission(rt.BelongsToOwnersGroup)}setAttrs(j){return this.name=j.name||"",this.state=j.state||"",this.type=j.type||"",this.attrVersion=j.attrVersion||0,this.keysetVersion=j.keysetVersion||0,this.avatar=j.avatar||"",this.language=j.language||"en",this.combinedPermissions=j.combinedPermissions||Xj.empty(),this.newsletterPrefs=j.newsletterPrefs||0,this.preferences=j.preferences||Xj.empty(),this.externalGUID=j.externalGUID,this.hasMFAEnabled=j.hasMFAEnabled,this.proposedEmail=j.proposedEmail,this.email=j.email||"",this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.lastAuthAt=j.lastAuthAt,this.csToken=j.csToken,this}setActiveKeyset(j){j?(this.activeKeyset=j,this.pubKey=j.ekeyPair.pubKey):(this.activeKeyset=void 0,this.pubKey=void 0)}hasPermission(...j){return Xj.includes(this.combinedPermissions,Xj.combine(j))}hasPreference(...j){return this.preferences?Xj.includes(this.preferences,Xj.combine(j)):!1}async generateNewKeyset(){return Promise.reject(new Error("Not supported"))}get joined(){return this.createdAt}get initials(){return this._initials||(this._initials=lm.getInitials(this)),this._initials}clearCachedInitials(){this._initials=""}travelModeIsEnabled(){return this.preferences!==void 0&&Xj.includes(this.preferences,Qh.TravelMode)}getAccessorVaultUuids(){return zl(this._directVaultAccessMap,()=>!0)}getVaultUuids(){let j=GO(Sa(this._directVaultAccessMap),Sa(this._groupVaultAccessMap)),e={};return j.forEach(t=>{e[t]=!0}),e}getVaultACLs(){if(!this._combinedVaultACLs){let j=GO(Sa(this._directVaultAccessMap),Sa(this._groupVaultAccessMap)),e={};j.forEach(t=>{let r=this._directVaultAccessMap[t],a=r?r.acl:0,o=aT(this._groupVaultAccessMap[t]||{}).reduce((i,s)=>i|s.acl,a);e[t]=o}),this._combinedVaultACLs=e}return this._combinedVaultACLs}hasVaultACL(j,e,t){return t&&aw(e)?!1:((this.getVaultACLs()[j.uuid]||0)&e)===e}getGroupUuids(){let j={};for(let e of this._groupMemberships)j[e.groupUuid]=!0;return j}getGroupMembership(j){return X6(this._groupMemberships,e=>e.groupUuid===j.uuid)}setState(j){this.state=j}get isActive(){return this.state===Yj.State.Active}get isEnrolled(){switch(this.state){case Yj.State.Active:case Yj.State.RecoveryAccepted:case Yj.State.RecoveryStarted:case Yj.State.Suspended:return!0;default:return!1}}get isMember(){return this.type===Yj.Type.Regular}get isGuest(){return this.type===Yj.Type.Guest}get isExternalAccountManagement(){return this.type===Yj.Type.ExternalAccountManagement}vaultAccessForVault(j){let e=m0(this._directVaultAccessMap,j.uuid,void 0),t=aT(this._groupVaultAccessMap[j.uuid]||{}),r=e?[e,...t]:t;if(!r||r.length===0)throw new Error("Vault access for this vault has not been loaded.");return r}getDirectVaultAccessMap(){return Nl(this._directVaultAccessMap)}getGroupVaultAccessMap(){return Nl(this._groupVaultAccessMap)}getUnsafeVaultAccessList(){if(!this._fullVaultAccessList){let j=aT(this._directVaultAccessMap),e=wyj(this._groupVaultAccessMap,t=>aT(t));this._fullVaultAccessList=j.concat(e)}return this._fullVaultAccessList}get vaultAccessList(){if(!this.hasAttrMask(A.Attr.VaultAccess))throw new Error("Vault access list has not been loaded");return Nl(this.getUnsafeVaultAccessList())}set vaultAccessList(j){let[e,t]=F0(j,r=>r.accessorType==="group");this._directVaultAccessMap=Ia(t,r=>r.vaultUuid),this._groupVaultAccessMap=Dyj(e),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}setVaultAccess(j){j.accessorType==="group"?this._groupVaultAccessMap=Iyj(this._groupVaultAccessMap,j):this._directVaultAccessMap={...this._directVaultAccessMap,[j.vaultUuid]:j},this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}removeVaultAccess(j){this._directVaultAccessMap=ei(this._directVaultAccessMap,j.uuid),this._groupVaultAccessMap=ei(this._groupVaultAccessMap,j.uuid),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}get unsafeGroupMemberships(){return this._groupMemberships}get groupMemberships(){return Nl(this._groupMemberships)}set groupMemberships(j){this._groupMemberships=j.slice(),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}pushGroupMembership(j){this._groupMemberships.push(j),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}markTraveling(j){j?this.preferences=Xj.enable(this.preferences,Qh.TravelMode):this.preferences=Xj.disable(this.preferences,Qh.TravelMode),this.updatedAt=new Date,this.attrVersion++}compare(j){return this.name.localeCompare(j.name)}toString(){return"[object Person]"}};Hr.UUIDNewlyCreatedProvisionUser="ANEWLYCREATEDTRANSFERUSER2";Hr.UUIDNewlyCreatedServiceAccount="NEWLYCREATEDSERVICEACCOUNT";Hr.Attr={None:0,PubKey:1,Keysets:2,Groups:4,VaultAccess:8,Devices:16,PersonalItemsCount:32,ProposedEmailChange:64,All:255};var Iyj=(A,j)=>{let e=j.vaultUuid,t=j.accessorUuid;return{...A,[e]:{...A[e],[t]:j}}},Dyj=A=>{let j={};return A.forEach(e=>{let t=e.vaultUuid,r=e.accessorUuid,a=j[t]||{};j[t]=a,a[r]=e}),j};var El=W(aA());var Fs=Xj.fromHex,Zh={Offline:Fs("000000001"),Web:Fs("000000002"),Mac:Fs("000000004"),Windows:Fs("000000008"),IOS:Fs("000000010"),Android:Fs("000000020"),CLI:Fs("000000040"),Extension:Fs("000000080"),SCIM:Fs("000000100"),CSExtension:Fs("000000200"),Linux:Fs("000000400"),Connect:Fs("000000800"),ServiceAccount:Fs("000001000"),All:Fs("0FFFFFFFF"),Travel:Fs("100000000")};var CwA=E`web-api/model/vault.ts`,eZ=gr(CwA.str),pw=(A,j=!1)=>e=>{if(typeof e=="string")return e;let t=typeof e,r=`Unexpected vault attr type. Expected ${A} to be string, received ${t}.`;return!j&&(t==="number"||t==="boolean")?(ps()&&console.warn(`${r} Converting ${A} to string.`),String(e)):(ps()&&console.warn(`${r} Setting ${A} to empty string.`),"")},nT=El.readonly(El.type({name:Do(El.string,pw("name")),type:Do(El.string,pw("type")),desc:Do(El.string,pw("desc")),uuid:Do(El.string,pw("uuid")),avatar:Do(El.string,pw("avatar",!0)),defaultAcl:Do(El.union([Xj.codec,El.undefined]),A=>{ps()&&console.warn(`Unexpected vault attr type. Expected defaultAcl to be number, received ${typeof A}. Setting defaultAcl to undefined.`)})},"VaultAttrs")),ej=class A{constructor(j){this.generateNewKey=async()=>{this.uuid||(this.uuid=fe());let e=this.activeKey,t=$t();return await t.generate(Tt),t.sn=e?(e.sn||1)+1:1,this.activeKey=t,this.keys.unshift(t),await this.encryptAttrs(),this},this.revokeAccess=async e=>Promise.resolve().then(()=>{this.clearCachedAccessInfo(),this.accessList=du(this.accessList,t=>t.accessorUuid!==e.uuid),e.accessorType==="user"?this.previewUsers=du(this.previewUsers,t=>t.uuid!==e.uuid):this.previewGroups=du(this.previewGroups,t=>t.uuid!==e.uuid),e.removeVaultAccess(this)}),this.getAttrs=()=>({uuid:this.uuid,name:this.name,type:this.type,desc:this.desc,avatar:this.avatar,defaultAcl:this.defaultAcl}),this.encryptAttrs=async()=>Promise.resolve().then(async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.uuid||(this.uuid=fe()),this.activeKey.encrypt(lt(this.getAttrs())).then(e=>(this.encAttrs=e,this))}).catch(eZ("encryptAttrs")),this.encrypt=async e=>Promise.resolve().then(async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.activeKey.encrypt(e)}).catch(eZ("encrypt")),this.decrypt=async e=>Promise.resolve().then(async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.activeKey.decrypt(e)}).catch(eZ("decrypt")),this.decryptAttrs=async e=>{let t=await this.activeKey?.decrypt(e).then(r=>{let a=sj(r,Ue).unwrap();return sj(a,nT,{mode:"unsafe_report_only",file:CwA,func:E`decryptAttrs`}).unwrap()}).catch(()=>{});return t?.uuid||(t={uuid:this.uuid,name:"Corrupted vault",type:"",desc:"Corrupted vault",avatar:"",defaultAcl:void 0}),this.uuid=t.uuid,this.name=t.name,this.type=t.type,this.desc=t.desc,this.avatar=t.avatar,this.defaultAcl=t.defaultAcl,this},this.uuid=j.uuid?j.uuid:fe(),this.name=typeof j.name=="string"?j.name:"",this.type=j.type,this.desc=typeof j.desc=="string"?j.desc:"",this.defaultAcl=j.defaultAcl,this.avatar=j.avatar||"",this.leaseTimeout=0,this.clientAccess=Zh.All,this.createdAt=new Date,this.contentVersion=1,this.activeItemCount=0,this.keys=[],this.accessList=[],this.itemTemplates=[],this.previewGroups=[],this.previewUsers=[],this._attrMask=0,this.attrVersion=1}hasAttrMask(j){return Xj.equals(j,A.Attr.None)?Xj.equals(this._attrMask,A.Attr.None):Xj.includes(this._attrMask,j)}addAttrMask(j){this._attrMask=Xj.combine([this._attrMask,j])}get isPersonal(){return this.type===A.TypePersonal}get isSystem(){return this.type===A.TypeSystem}get isGeneratedPasswords(){return this.type===A.TypeGeneratedPasswords}get isDeveloperEnvironment(){return this.type===A.TypeDeveloperEnvironment}get isManaged(){return this.type===A.TypeManagedApplications}hasClientAccess(...j){return this.clientAccess?Xj.includes(this.clientAccess,Xj.combine(j)):!1}getPeopleUuids(){if(!this._userUuidMap){let j={};for(let e of this.accessList)e.accessorType!=="group"&&(j[e.accessorUuid]=!0);this._userUuidMap=j}return this._userUuidMap}getGroupUuids(){if(!this._groupUuidMap){let j={};for(let e of this.accessList)e.accessorType==="group"&&(j[e.accessorUuid]=!0);this._groupUuidMap=j}return this._groupUuidMap}clearCachedAccessInfo(){this._userUuidMap=void 0,this._groupUuidMap=void 0}setCombinedAcl(j){this._combinedAcl=j,this.addAttrMask(A.Attr.CombinedAccess)}getCombinedAcl(){return this._combinedAcl}setAccessList(j){this.accessList=j,this.clearCachedAccessInfo();let e=[];for(let r of j)r.vaultKey&&(r.vaultKey.sn=r.vaultKeySN,e.push(r.vaultKey));if(e.length===0){console.warn("No vault keys in access list.");return}let t=e.sort((r,a)=>typeof r.sn>"u"?1:typeof a.sn>"u"?-1:a.sn-r.sn);this.activeKey=t[0]}clearAccessList(){this.accessList=[],this.clearCachedAccessInfo()}toString(){return"[object Vault]"}};ej.StateActive="A";ej.StateDeleted="D";ej.TypePersonal="P";ej.TypeEveryone="E";ej.TypeUserCreated="U";ej.TypeProvision="T";ej.TypeSystem="S";ej.TypeGeneratedPasswords="G";ej.TypeReplacement="R";ej.TypeManagedApplications="M";ej.TypeDeveloperEnvironment="D";ej.TypeClientPlaceholder="-";ej.DefaultDescMarker="GYkuBJsjEZmMUuiP";ej.Attr={None:0,Accessors:1,ArchivedKeys:2,ItemCategories:4,CombinedAccess:8,All:255};(function(A){A.compare=Ky((j,e)=>j.type===A.TypePersonal?-1:e.type===A.TypePersonal||j.type===A.TypeEveryone?1:e.type===A.TypeEveryone?-1:0,ni.strings(j=>j.name),ni.dates(j=>j.createdAt),ni.strings(j=>j.uuid)),A.activeUserHasAcl=(j,e)=>{let t=j.getCombinedAcl?j.getCombinedAcl():void 0;if(typeof t>"u")throw new TypeError("combinedPermissions not found on vault");return Xj.includes(t,e)}})(ej||(ej={}));var Oyj=1,eo=class extends Hr{constructor(j){super(j),this.generateNewKeyset=async()=>{let e=await La.generateWithSigningKeys();if(this.activeKeyset){e.sn=this.activeKeyset.sn+1;let t=await this.activeKeyset.encryptWithKey(e.symKey);this.archivedKeysets=[t,...this.archivedKeysets]}else e.sn=1;return this.setActiveKeyset(e),this},this.encryptActiveKeysetWithMasterKey=async()=>{if(!this.activeKeyset)throw new Error("Missing activeKeyset");if(!this.masterKey)throw new Error("Missing masterKey");return this.activeKeyset.encryptWithKey(this.masterKey)},this.getCredentials=()=>{if(!this.email)throw new Error("Missing email");if(!this.password)throw new Error("Missing password");if(!this.secretKey)throw new Error("Missing Secret Key");return{email:this.email,password:this.password,secretKey:this.secretKey}},this.canManageVault=e=>e?ej.activeUserHasAcl(e,Xh):!1,this.password=j.password,this.secretKey=j.secretKey,this.meta=j.meta}};var Aq=class{constructor(j,e,t){this.encryptAndSign=async r=>{if(!this.item)throw new Error("Missing item.");if(!this.recipient.pubKey)throw new Error("Missing recipient's public key");this.key=$t();let[a]=await Promise.all([Ni(this.recipient.pubKey),this.key.generate(Tt)]);if(!this.key.jwk)throw new Error("Missing JWK.");this.encKey=await a.encrypt(lt(this.key.jwk));let[n,o]=await this.item.encryptWithKey(this.key);this.encOverview=n,this.encDetails=o;let i=Co([Dj(this.sender.uuid),Dj(this.recipient.uuid),lt(this.encOverview),lt(this.encDetails)]);if(!this.sender.activeKeyset)throw new Error("Missing active keyset.");return this.signature=await this.sender.activeKeyset.sign(i),await this._enableKeyRecovery(r),this},this._enableKeyRecovery=async r=>{if(!r.pubKey)throw new Error("Missing group's public key");if(!this.key)throw new Error("Missing key");return this.recoverableEncKey=await this.key.encryptWithKey(r.pubKey),this},this.verifyAndDecrypt=async(r,a)=>{this.key=$t();let n=new dA(r,void 0,this.uuid);if(!this.templateUuid)throw new Error("Missing template UUID");if(!this.itemUuid)throw new Error("Missing item UUID");if(!this.encOverview)throw new Error("Missing encrypted overview");if(!this.encKey)throw new Error("Missing encryption key");return await this.key.decryptWithKeyset(a,this.encKey),await n.decryptWithKey(this.key,this.encOverview,this.encDetails),n.templateUuid=this.templateUuid,n.packageUuid=this.uuid,n.uuid=this.itemUuid,n.itemVersion=1,n.state=dA.ItemState.Active,n.createdAt=this.clientCreatedAt,n.updatedAt=this.clientUpdatedAt,this.item=n,this},this.sender=j,this.recipient=e,this.item=t,this.createdAt=new Date}},tZ;(function(A){A.encryptAndSign=async(j,e,t)=>{},A.verifyAndDecrypt=async j=>{}})(tZ||(tZ={}));var mw=class{constructor(j,e){this.vaultUuid=j,this.vaultKey=e,this.encryptWithKey=async t=>{if(typeof this.vaultKey.sn>"u")throw new TypeError("Missing vault key SN");let r=await this.vaultKey.encryptWithKey(t);return{vaultUuid:this.vaultUuid,vaultKeySN:this.vaultKey.sn,encryptedBy:r.kid,encVaultKey:r}}}},Ew=class{constructor(j,e){this.groupUuid=j,this.keyset=e,this.encryptWithKey=async t=>({groupUuid:this.groupUuid,keyset:await this.keyset.encryptWithKey(t)})}},Bw=class{constructor(j,e){this.vaultKeys=j,this.groupKeysets=e,this.encryptForPerson=async t=>{let r=t.pubKey;if(!r)throw new Error("Missing user's public key");return this.encryptWithPubKey(r)},this.encryptWithPubKey=async t=>{let[r,a]=await Promise.all([Promise.all(this.vaultKeys.map(async n=>n.encryptWithKey(t))),Promise.all(this.groupKeysets.map(async n=>n.encryptWithKey(t)))]);return{vaultKeys:r,groupKeysets:a}}}};var gw=class{constructor(j,e){this.vaultUuid=j,this.vaultKey=e,this.encryptWithKey=async t=>{if(typeof this.vaultKey.sn>"u")throw new TypeError("Missing vault key SN");let r=await this.vaultKey.encryptWithKey(t);return{vaultUuid:this.vaultUuid,vaultKeySN:this.vaultKey.sn,encryptedBy:r.kid,encVaultKey:r}}}},hw=class{constructor(j,e){this.groupUuid=j,this.keyset=e,this.encryptWithKey=async t=>{let r=await this.keyset.encryptWithKey(t);return{groupUuid:this.groupUuid,keyset:r}}}},qw=class{constructor(j,e){this.packageUuid=j,this.key=e,this.encryptWithKey=async t=>{let r=await this.key.encryptWithKey(t);return{packageUuid:this.packageUuid,key:r}}}},vw=class{constructor(j,e,t){this.vaultKeys=j,this.groupKeysets=e,this.packageKeys=t,this.encryptForPerson=async r=>{if(!r.pubKey)throw new Error("Missing user's public key");let a=await Ni(r.pubKey),[n,o,i]=await Promise.all([Promise.all(this.vaultKeys.map(async s=>s.encryptWithKey(a))),Promise.all(this.groupKeysets.map(async s=>s.encryptWithKey(a))),Promise.all(this.packageKeys.map(async s=>s.encryptWithKey(a)))]);return{vaultKeys:n,groupKeysets:o,packageKeys:i}}}},xw=class{constructor(j){this.keys=j,this.encryptForPeople=async e=>{if(this.keys.length!==e.length)throw new Error("Number of keys and people do not match.");let t=this.keys.map(async(r,a)=>{let n=e[a];if(n===void 0)throw new Error("encryptForPeople: user not found.");return r.encryptForPerson(n)});return{keys:await Promise.all(t)}}}};var zi=W(aA());var fw={};Yt(fw,{JwtStandardClaims:()=>oT,Keyset:()=>ZQ,KeysetEncKeyData:()=>eT,createToken:()=>iT,decrypt:()=>kw,encrypt:()=>dw,sign:()=>rZ,verify:()=>Pyj});var rZ=async(A,j)=>{let e=await GG(A),t={alg:ak,kid:A.kid,typ:"jose+json"},r=tj(lt(t)),a=tj(j),n=Dj(r+"."+a),o=await FG({alg:t.alg,key:e,signingInput:n});return{protected:r,payload:a,signature:tj(o)}},Pyj=async(A,j)=>{let e=await sw(A),t=LE.pipe($A.JwsHeader),r=sj(j.protected,t).unwrap();if(r.alg!==ak)throw new Error("Unexpected algorithm");if(r.kid!==A.kid)throw new Error("Incorrect signing key");let a=Dj(j.protected+"."+j.payload),n=ZA(j.signature);return{isValid:await lw({alg:r.alg,key:e,signingInput:a,signature:n}),header:r}};var nk=W(aA());var oT=nk.readonly(nk.partial({iss:nk.string,sub:nk.string,aud:nk.readonlyArray(nk.string),exp:X0,nbf:X0,iat:X0,jti:nk.string}),"JwtStandardClaims"),iT=async(A,j,e)=>{let t={alg:ak,kid:A.kid,typ:"JWT"},r=tj(lt(t)),a=tj(lt(e.encode(j))),n=Dj(r+"."+a),o={...A,key_ops:["sign"]},i=await GG(o),s=await FG({alg:t.alg,key:i,signingInput:n});return r+"."+a+"."+tj(s)};var aZ="com.1password.b5",Gw;(function(A){A.AccessVaults="vaultaccess"})(Gw||(Gw={}));var Cyj=({audience:A,features:j,...e})=>{let t={audience:A,features:j,jti:fe(),issuer:e.issuer||aZ,vaults:e.vaultAccess?Hyj(e.vaultAccess):void 0,expiry:e.expiry?e.expiry.toISOString():void 0};return KwA(t),t},HwA=zi.readonly(zi.intersection([zi.type({"1password.com/auuid":zi.string,"1password.com/fts":zi.readonlyArray(zi.string)}),zi.partial({"1password.com/token":zi.string,"1password.com/vts":zi.readonlyArray(mH)})]),"ServiceAccountJwtPrivateClaims"),TwA=zi.intersection([oT,HwA],"ServiceAccountJwtClaims"),nZ=async({signingKey:A,accountUuid:j,serviceAccountUuid:e,createTokenInfo:t,...r})=>{if(!e)throw new Error("SAJWT subject claim not provided.");KwA(t);let a={"1password.com/auuid":j,"1password.com/token":r.bearerToken,"1password.com/fts":t.features,"1password.com/vts":t.vaults,aud:[t.audience],sub:e,exp:t.expiry?new Date(t.expiry):void 0,iat:new Date,nbf:r.notValidBefore,iss:t.issuer||aZ,jti:t.jti};return await iT(A,a,TwA)},KwA=A=>{if(!A.audience)throw new Error("Audience claim is required.");if(A.features.length===0)throw new Error("Token 'features' claim not provided");if(A.vaults?.length&&A.vaults?.length>0&&!A.features.includes(Gw.AccessVaults))throw new Error(`Feature ${Gw.AccessVaults} is required if including Vault claims.`)},Hyj=A=>A.map(({vaultUuid:j,acl:e})=>({u:j,a:e})),oZ=async A=>{let j=A.split(".")[2];if(!j)throw new Error("corrupted token");let e=await $A.sha256(Dj(j));return Pn(e)};var Ri=class A{constructor(j){this.uuid=j.uuid||"",this.email=j.email||"",this.creatorUuid=j.creatorUuid,this.serviceAccountType=j.serviceAccountType,this.attrVersion=j.attrVersion||0,this.keysetVersion=j.keysetVersion||0,this.name=j.name||"",this.state=j.state||"",this.type=j.type||"",this.avatar=j.avatar||"",this.language=j.language||"en",this.permissions=j.permissions||0,this.combinedPermissions=j.combinedPermissions||Xj.empty(),this.newsletterPrefs=j.newsletterPrefs||0,this.preferences=j.preferences||Xj.empty(),this.externalGUID=j.externalGUID,this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.lastAuthAt=j.lastAuthAt,this.billables=j.billables,this.rotatedAt=j.rotatedAt,this.expiresAt=j.expiresAt,this._tokenJtiMap={},this._attrMask=0,this._serviceAccountVaultAccess=j.serviceAccountVaultAccess}hasAttrMask(j){return(this._attrMask&j)===j}addAttrMask(j){this._attrMask|=j}static translateAttrMaskNames(j){let e=Object.keys(A.Attr).filter(t=>!["None","All"].includes(t)).map(t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/^-+|-+$/g,"").toLowerCase());return Hu(j,e)}get tokens(){if(!this.hasAttrMask(A.Attr.Tokens))throw new TypeError("Service Account token list has not been loaded");return Object.values(this._tokenJtiMap)}set tokens(j){this._tokenJtiMap=Ia(j,e=>e.tokenInfo.jti)}getToken(j){if(!this.hasAttrMask(A.Attr.Tokens))throw new TypeError("Service Account token list has not been loaded");return this._tokenJtiMap[j]}get displayableVaultAccess(){if(!this.hasAttrMask(A.Attr.VaultAccess)||!this._serviceAccountVaultAccess)throw new TypeError("Service Account Vault Access has not been loaded.");return this._serviceAccountVaultAccess.displayable}get totalAccessibleVaults(){if(!this.hasAttrMask(A.Attr.VaultAccess)||!this._serviceAccountVaultAccess)throw new TypeError("Service Account Vault Access has not been loaded.");return this._serviceAccountVaultAccess.totalVaults}};Ri.Attr={None:0,Tokens:1,VaultAccess:2,Billables:4,All:255};var SwA={CreateToken:_o.ServiceAccountTokenCreate,RevokeToken:_o.ServiceAccountTokenRevoke,EditToken:_o.ServiceAccountTokenEdit,CreateServiceAccount:_o.ServiceAccountCreate,EditServiceAccount:_o.ServiceAccountEdit,DeleteServiceAccount:_o.ServiceAccountDelete,EditVaultAccess:_o.ServiceAccountConnectVaultAccessEdit},Tyj=Object.values(SwA),Kyj={Active:"A",Revoked:"R"};var iZ;(function(A){A.UsersRead="users:read",A.EmailRead="users:read.email",A.GroupsRead="usergroups:read"})(iZ||(iZ={}));var Syj=()=>{Ky((A,j)=>A.hasTeamUser&&!j.hasTeamUser?1:!A.hasTeamUser&&j.hasTeamUser?-1:0,(A,j)=>A.hasPendingInvite&&!j.hasPendingInvite?1:!A.hasPendingInvite&&j.hasPendingInvite?-1:0,ni.strings(A=>A.name),ni.strings(A=>A.email))},Myj=lm.getInitials,_yj=(A,j)=>A?.scope?A.scope.split(",").some(t=>t===j):!1,Lyj=A=>A===jk.Active,Nyj=A=>!!A?.enterpriseUid&&!!A.isGranular,sZ=(A=jk.NotLoaded)=>({state:A,notifChannelUid:"",alertChannelUid:"",scope:"",teamName:"",alertNotifTeamUid:"",enterpriseUid:"",enterpriseName:"",enterpriseUrl:"",enterpriseTeams:[],isGranular:!1});var Fw=class{constructor(j){this.setDomainBasedInfo=()=>{this.countryCode=W4(this.accountDomain),this.server=ai(this.accountDomain)},this.getSignInDomain=()=>this.usingMyDomain?pl+"."+this.server:this.accountDomain,this.update=e=>{let t=!1;return this.userUuid!==e.userUuid&&(this.userUuid=e.userUuid,t=!0),this.userEmail!==e.userEmail&&(this.userEmail=e.userEmail,t=!0),this.userName!==e.userName&&(this.userName=e.userName,t=!0),this.userAvatarURL!==e.userAvatarURL&&(this.userAvatarURL=e.userAvatarURL,t=!0),this.usingMyDomain!==e.usingMyDomain&&(this.usingMyDomain=e.usingMyDomain,t=!0),this.accountType!==e.accountType&&(this.accountType=e.accountType,t=!0),this.accountName!==e.accountName&&(this.accountName=e.accountName,t=!0),this.accountDomain!==e.accountDomain&&(this.accountDomain=e.accountDomain,this.setDomainBasedInfo(),t=!0),this.accountAvatarURL!==e.accountAvatarURL&&(this.accountAvatarURL=e.accountAvatarURL,t=!0),this.hasPrioritySupport!==e.hasPrioritySupport&&(this.hasPrioritySupport=e.hasPrioritySupport,t=!0),t},this.userUuid=j.userUuid,this.userEmail=j.userEmail,this.userName=j.userName,this.userAvatarURL=j.userAvatarURL,this.usingMyDomain=j.usingMyDomain,this.accountUuid=j.accountUuid,this.accountType=j.accountType,this.accountName=j.accountName,this.accountDomain=j.accountDomain,this.accountAvatarURL=j.accountAvatarURL,this.hasPrioritySupport=j.hasPrioritySupport,this.countryCode=W4(this.accountDomain),this.server=ai(this.accountDomain)}toString(){return"[object UserCookie]"}};var MwA,zyj="model/vault_access",_wA=rj(zyj),ft=class{constructor(j){if(this.canManageVault=e=>this.vaultUuid===e.uuid&&(this.acl&Xh)===Xh,this.encryptVaultKey=async e=>_wA("encryptVaultKey",async()=>{if(!this.vaultKey)throw new Error("Missing vault key");if(!e)throw new Error("Missing accessor");if(!e.pubKey)throw new Error("Missing accessor's pubKey");return this.vaultKey.encryptWithKey(e.pubKey).then(t=>(this.encVaultKey=t,t))}),this.decryptVaultKey=async e=>{if(!this.encVaultKey)throw new Error("Missing encrypted vault key.");if(!e)throw new Error("Missing keyset");return this.vaultKey=await $t().decryptWithKeyset(e,this.encVaultKey),this.vaultKey},!qh(j.vaultUuid))throw new Error("Invalid vault UUID");if(!zL(j.accessorType)(j.accessorUuid))throw new Error("Invalid accessor UUID");this.vaultUuid=j.vaultUuid,this.accessorType=j.accessorType,this.accessorUuid=j.accessorUuid,this.vaultKeySN=j.vaultKeySN,this.encVaultKey=j.encVaultKey&&"kid"in j.encVaultKey&&j.encVaultKey.kid?j.encVaultKey:void 0,this.encryptedBy=j.encryptedBy,this.acl=j.acl,this.leaseTimeout=j.leaseTimeout}static combineACLs(j){return j?j.reduce((e,t)=>e|t.acl,0):0}toApi(){return{vaultUuid:this.vaultUuid,accessorType:this.accessorType,accessorUuid:this.accessorUuid,vaultKeySN:this.vaultKeySN,encVaultKey:this.encVaultKey,encryptedBy:this.encryptedBy,acl:this.acl,leaseTimeout:this.leaseTimeout}}};MwA=ft;ft.generate=async(A,j,e)=>_wA("generate",async()=>{if(!A||!A.activeKey)throw new Error("Missing vault key");if(typeof A.activeKey.sn>"u")throw new TypeError("Missing active key SN");if(!j||!j.pubKey)throw new Error("Missing accessor's public key");let t=await Uh(j.pubKey),r=await A.activeKey.encryptWithKey(t),a=new MwA({accessorType:j.accessorType,accessorUuid:j.uuid,encryptedBy:t.uuid,encVaultKey:r,leaseTimeout:0,vaultKeySN:A.activeKey.sn,vaultUuid:A.uuid,...e});return a.vaultKey=A.activeKey,a});var ok=W(aA());var lZ=[ej.TypePersonal,ej.TypeEveryone,ej.TypeUserCreated],bG;(function(A){A.Patch="patch",A.Full="full"})(bG||(bG={}));var Ryj=ok.type({scope:ok.string,contentVersion:ok.number,isFinal:ok.boolean,vaultUuid:ok.string,snapshots:ok.array(l$)},"EncryptedVaultItemSnapshotBatchV2"),sT=async(A,j,e)=>{let t={title:A.overview.title};if(A.templateUuid===yj.LoginUuid&&A.username!==void 0&&(t.username=A.username.value),A.vault.type!==ej.TypePersonal&&(t.vaultName=A.vault.name),A.overview.URLs){let o=A.overview.URLs.map(i=>i.u);t.domains=cN(o)}e&&(t.watchtowerReport=e);let r=!!t.domains?.some(o=>!!o),a={uuid:"",trashed:A.state,vaultUuid:A.vault.uuid},n={clientCreatedAt:$p(A.createdAt),hasUrl:r,itemVersion:A.itemVersion,payloadVersion:Sf,templateUuid:A.templateUuid||"",timestamp:$p(new Date),vaultItemUuid:A.uuid,isBusinessRelated:lN(j,A.templateUuid===yj.LoginUuid,t.username)};return{snapshot:t,additionalData:n,serverData:a}};var yG;(function(A){A.Lavender="lavender",A.Algae="algae",A.LightBlue="light_blue",A.Sand="sand",A.Red="red",A.Peach="peach"})(yG||(yG={}));var cT={};Yt(cT,{logCryptoSupport:()=>Uyj,run:()=>cZ});var cZ=async()=>{if($A.waitForInit!==void 0){await $A.waitForInit;try{await Jyj(),$A.testsComplete()}catch(A){$A.testsError(A)}}},LwA,Jyj=async()=>{let A=performance.now(),[j,e,t,r]=await Promise.all([lT(Qyj),lT(Xyj),lT(Vyj),lT(Wyj)]),a=performance.now();LwA=Math.round(a-A).toString(10),$A.setSupport({jwkImport:j,rsaOaep256:e,nativeAesGcm:t,nativeEcdsa:r})},Uyj=()=>{let{jwkImport:A,rsaOaep256:j,nativeAesGcm:e,nativeEcdsa:t}=$A.supports;(ps()||Object.values($A.supports).includes(!1))&&`${LwA}${A}${j}${e}${t}`},lT=async A=>Promise.resolve().then(A).then(()=>!0,()=>!1),Xyj=async()=>{let A={alg:"RSA-OAEP-256",e:"AQAB",ext:!0,key_ops:["encrypt"],kid:"pdmixa3yhjitikm7uv2fd7veme",kty:"RSA",n:"1HfpUoQjzFj9sXJc1-BsZ5oWYsBhDTZkjLYzPqam5DhezPAIDkoZfBw1B4jG43ez-_WifZf_kRc9zyHl3aoe0bUmVJnr58kGvStscTD0b1n5xkLHsuADf5YqjxYTmBZEkmrewV5xG7TdiYdx7ZboUpRVD6g7yg3xakfYvZuGuIkPlxHvxb4qx-wMe1M81sPZAAoSQl923uMCCIO6y236f2oMSsSDbm-6FynwMo4rWvRuN588pZCfHzhYzchembABVdt2HsHUwZC36fV9T_EuHEjTIiWaSYj1UyMUWvD8bVwehlDV4_NBiU-IuL3s8SDJCSQW4zHiTQG8qVEUpkPBew"};return new sa("").import(A)},Vyj=async()=>{let A=new si;await A.generate(Tt,void 0),await A.encrypt(Dj("A3-TEST"));let j=A.jwk?.k;if(!j)throw new Error("Missing key value");let e=ZA(j);await new si().importRawKey(Tt,e)},Wyj=async()=>$A.subtle.generateKey(k6.DEFAULT_KEY_ALG,!0,["sign","verify"]),Yyj={alg:"RSA-OAEP",e:"AQAB",ext:!0,key_ops:["encrypt"],kty:"RSA",n:"lW5zhTLlU1ayN9uDy4_9uNT3I2bTX24565Gr5yuKnNRGpE3rT9rGzjgPDamcKPIi4fPCP0HFFpS35D6F1zlOsy2uPFwXC6HGZVRvXoHaAcTq3HRTkQ2HpWnxI9R0XwJMDaxCwDFalAYSEYkQC6k7CFT87PPTKzCgnfVqX3aHAU2LzfjlQL1KtVU1Qy8QwUv_LgI9tjbbFrn62sAWruJItG65pHbWH0Gyp_Kna4HCiL4zjiWVxMOqwLt1Qkj_vkJwJ8pA7ooJEuTXCpxkoikEyxxRCDWxSbICyaD90MVpyXt2iaFaZc8ntS_JiofeMmm0iZ0uNJ3B0oT-twe0Dn2Edw",kid:"tyy2gvlws7xxnpqvayhqeg5e5y"},Qyj=async()=>$A.subtle.importKey("jwk",Yyj,sa.WC_ALG_RSA_OAEP,!0,["encrypt"]);var NwA={};var Zyj=AA("web-api/api/quest.ts"),A$j=Nn.readonly(Nn.intersection([Nn.type({id:Nn.number,title:Nn.string,description:Nn.string,url:Nn.string,priorityLevel:Nn.number,image:Nn.string,badgeColor:m$(yG,"ColorType"),questColor:m$(yG,"ColorType")}),Nn.partial({badgeText:Nn.string})]),"Quest"),dZ=Zyj(()=>({name:"getAutomatedQuest",method:"GET",url:"/api/v1/quest",responseType:Nn.union([A$j,Nn.null])}));var HA=W(aA());var Ei=AA("web-api/api/recovery_key.ts"),j$j=HA.exact(HA.type({recoveryKeyUuid:HA.string}),"RecoveryKeyStartRequest"),zwA=HA.exact(HA.type({sessionUuid:HA.string,cryptoVersion:HA.string}),"StartRecoveryResponse"),e$j=Ei(A=>({name:"recoveryKeyBeginAttempt",method:"POST",url:"/api/v2/recovery-keys/session/new",body:A,responseType:zwA,encrypted:!1})),t$j=HA.exact(HA.type({bigA:HA.string}),"RecoverySrpARequest"),RwA=HA.exact(HA.type({bigB:HA.string}),"RecoverySrpBResponse"),r$j=Ei(A=>({name:"recoveryKeyAuthV1Begin",method:"POST",url:"/api/v2/recovery-keys/session/auth/cv1/start",body:A,responseType:RwA,encrypted:!1})),a$j=HA.exact(HA.type({clientHash:HA.string}),"RecoverySrpConfirmKeyRequest"),JwA=HA.exact(HA.type({serverHash:HA.string}),"RecoverySrpConfirmKeyResponse"),n$j=Ei(A=>({name:"recoveryKeyAuthV1ConfirmKey",method:"POST",url:"/api/v2/recovery-keys/session/auth/cv1/confirm",body:A,responseType:JwA,encrypted:!1})),o$j=HA.type({uuid:HA.string,label:HA.union([HA.string,HA.null]),enc:HA.string,encryptedBy:HA.string,cryptoVersion:HA.string,verifierParam:HA.string}),i$j=Ei(A=>({name:"createRecoveryKey",method:"POST",url:"/api/v2/recovery-keys/keys",body:A,responseType:J})),kZ;(function(A){A.Provisional="PROVISIONAL",A.PolicyAdded="PROVISIONAL_POLICY_ADDED",A.PendingActivation="PENDING_ACTIVATION",A.Active="ACTIVE",A.Suspended="SUSPENDED",A.Deleted="DELETED",A.Displaced="DISPLACED"})(kZ||(kZ={}));var UwA=HA.type({uuid:HA.string,label:HA.union([HA.string,HA.null]),state:HA.string,enc:HA.string,encryptedBy:HA.string,cryptoVersion:HA.string,verifierParam:HA.string,createdAt:HA.string,updatedAt:HA.string}),s$j=Ei(A=>({name:"getRecoveryKey",method:"GET",url:`/api/v2/recovery-keys/keys/${A}`,responseType:UwA})),l$j=Ei(A=>({name:"deleteRecoveryKey",method:"DELETE",url:`/api/v2/recovery-keys/keys/${A}`,responseType:J})),c$j=Ei(A=>({name:"activateRecoveryKey",method:"POST",url:`/api/v2/recovery-keys/keys/${A}/activate`,responseType:J})),d$j=HA.type({recoveryKeyUuid:HA.string,feature:HA.string,custody:HA.string,configuration:HA.type({userVerification:HA.array(HA.string),delaySecs:HA.number}),specVersion:HA.string}),XwA=HA.type({uuid:HA.string}),k$j=Ei(A=>({name:"createRecoveryPolicy",method:"POST",url:"/api/v2/recovery-keys/policies",body:A,responseType:XwA})),u$j=HA.type({encryptedKeyMaterial:HA.string}),VwA=HA.type({integrity:HA.string}),p$j=Ei((A,j)=>({name:"addRecoverableMaterial",method:"POST",url:`/api/v2/recovery-keys/keys/${A}/material`,body:j,responseType:VwA})),WwA=HA.type({policyUuids:HA.array(HA.string)}),m$j=Ei((A,j)=>({name:"getRecoveryPolicies",method:"GET",url:`/api/v2/recovery-keys/policies${it({feature:A,state:j})}`,responseType:WwA})),YwA=HA.exact(HA.type({uuid:HA.string,recoveryKeyUuid:HA.string,feature:HA.string,custody:HA.string,configuration:HA.exact(HA.type({userVerification:HA.array(HA.string),delaySecs:HA.number})),specVersion:HA.string,createdAt:HA.string,updatedAt:HA.string})),E$j=Ei(A=>({name:"getRecoveryPolicy",method:"GET",url:`/api/v2/recovery-keys/policies/${A}`,responseType:YwA})),QwA=HA.type({uuid:HA.string,policyUuid:HA.string,state:HA.string,createdAt:HA.string,updatedAt:HA.string,expiresAt:HA.string}),ZwA=HA.type({recoveryAttempts:HA.array(QwA)}),B$j=Ei(()=>({name:"getRecoveryAttempts",method:"GET",url:"/api/v2/recovery-keys/attempts",responseType:ZwA})),AIA=HA.type({userUuid:HA.string,accountUuid:HA.string,accountName:HA.string,accountType:HA.string,domain:HA.string,name:HA.string,email:HA.string,passwordRules:HA.string,accountUsesNewKeysets:HA.boolean,accountAuthMethods:HA.array(_u),disableEmergencyKit:HA.boolean}),jIA=HA.union([HA.type({attemptState:HA.union([HA.literal("KEY_VERIFIER_ACCEPTED"),HA.literal("EMAIL_VERIFICATION_PENDING")]),policySpecVersion:HA.string,custody:HA.string,aux:HA.type({verificationModes:HA.array(HA.string)})}),HA.type({attemptState:HA.literal("ID_VERIFICATION_COMPLETE"),policySpecVersion:HA.string,custody:HA.string,aux:AIA})],"RecoveryGetAttemptStatusResponse"),g$j=Ei(()=>({name:"recoveryKeyGetAttemptStatus",method:"GET",url:"/api/v2/recovery-keys/session/status",responseType:jIA,encrypted:!0})),h$j=HA.exact(HA.type({email:HA.union([HA.string,HA.undefined])})),eIA=HA.exact(HA.type({sentToEmail:HA.string})),q$j=Ei((A,j)=>({name:"recoveryKeyStartEmailVerification",method:"POST",url:`/api/v2/recovery-keys/session/identity-verification/email/start${A?"?resend=true":""}`,body:j,responseType:eIA,encrypted:!0})),v$j=HA.exact(HA.type({emailVerificationChallenge:HA.string})),x$j=Ei(A=>({name:"recoveryKeySubmitEmailVerification",method:"POST",url:"/api/v2/recovery-keys/session/identity-verification/email/submit",body:A,responseType:J,encrypted:!0})),tIA=HA.exact(HA.type({encryptedKeyMaterial:HA.string,encryptedKeyset:Ki}),"RecoveryGetMaterialResponse"),f$j=Ei(()=>({name:"recoveryKeyGetMaterial",method:"GET",url:"/api/v2/recovery-keys/session/material",responseType:tIA,encrypted:!0})),G$j=HA.exact(HA.type({accountKeyFormat:HA.string,accountKeyUuid:HA.string,language:HA.string,device:cl.Type,keyset:Ki,userAuth:iJ,deviceCredentials:HA.union([Am,HA.undefined])})),rIA=HA.exact(HA.type({sessionUuid:HA.string,signInTokenDetails:HA.union([Mu,HA.undefined]),email:HA.string,userUuid:HA.string,accountUuid:HA.string})),F$j=Ei(A=>({name:"recoveryKeyPostRegistration",method:"POST",url:"/api/v2/recovery-keys/session/complete",body:A,responseType:rIA,encrypted:!0}));var Aj=W(aA());var ik=AA("web-api/api/identity.ts"),aIA=Aj.readonly(Aj.type({name:Aj.string,website_url:Aj.string,provision_tags:Aj.array(Aj.string),uuid:Aj.string})),nIA=Aj.readonly(Aj.array(aIA)),oIA=Aj.readonly(Aj.type({identityAccessToken:Aj.string})),HB;(function(A){let j;(function(d){d.Oidc="OIDC",d.Saml="SAML"})(j=A.SsoProtocolType||(A.SsoProtocolType={}));let e;(function(d){d.Group="group",d.User="user"})(e=A.ApplicationAssignmentResourceType||(A.ApplicationAssignmentResourceType={}));let t=pe(j,"SsoProtocolType"),r=pe(e,"ApplicationAssignmentResourceType"),a;(function(d){d.Active="active",d.Inactive="inactive",d.Pending="pending"})(a=A.ApplicationStatusType||(A.ApplicationStatusType={}));let n=pe(a,"ApplicationStatusType"),o=Aj.readonly(Aj.partial({allowed_redirect_uris:Aj.array(Aj.string),allowed_logout_uris:Aj.array(Aj.string),initiate_login_uri:Aj.string,client_secret:Aj.union([Aj.string,Aj.undefined])})),i=Aj.readonly(Aj.partial({configuration_type:Aj.union([Aj.literal("metadata"),Aj.literal("explicit")]),service_provider_metadata_url:Aj.union([Aj.string,Aj.undefined]),service_provider_metadata_xml:Aj.union([Aj.string,Aj.undefined]),acs_url:Aj.union([Aj.string,Aj.undefined]),entity_id:Aj.union([Aj.string,Aj.undefined]),relay_state:Aj.union([Aj.string,Aj.undefined]),name_id_format:Aj.union([Aj.string,Aj.undefined]),logout_url:Aj.union([Aj.string,Aj.undefined]),binding_type:Aj.union([Aj.string,Aj.undefined]),user_attributes:Aj.record(Aj.string,Aj.string),group_attributes:Aj.record(Aj.string,Aj.string)})),s=Aj.readonly(Aj.partial({OidcConfiguration:Aj.union([o,Aj.undefined]),SamlConfiguration:Aj.union([i,Aj.undefined])})),l=Aj.readonly(Aj.type({resource_type:Aj.union([r,Aj.string]),resource_uuid:Aj.string}));A.ManagedApplication=Aj.readonly(Aj.type({assignments:Aj.union([Aj.array(l),Aj.undefined]),catalog_uuid:Aj.union([Aj.string,Aj.undefined]),configuration:s,created_at:Aj.string,kolide_enabled:Aj.boolean,name:Aj.string,status:n,type:Aj.union([t,Aj.string]),updated_at:Aj.string,url:Aj.union([Aj.string,Aj.undefined]),uuid:Aj.string}),"SsoApplication"),A.ManagedApplicationsResponse=Aj.readonly(Aj.type({applications:Aj.array(A.ManagedApplication)})),A.PatchManagedApplicationRequest=Aj.readonly(Aj.type({configuration:s,name:Aj.string,type:Aj.union([t,Aj.string])}),"SsoApplication"),A.ManagedApplicationConfiguration=Aj.readonly(Aj.type({configuration:s,name:Aj.string,type:Aj.union([t,Aj.string])}),"SsoApplication"),A.ManagedApplicationDisplayProperties=Aj.readonly(Aj.type({login_initiation_url:Aj.string,name:Aj.string,uuid:Aj.string,service_provider_url:Aj.string}))})(HB||(HB={}));var iIA=Aj.readonly(Aj.type({userApplications:Aj.array(HB.ManagedApplicationDisplayProperties)},"UserApplication")),sIA=Aj.readonly(Aj.type({certificate:Aj.string})),uZ=ik(()=>({name:"getAppCatalogApplications",method:"GET",url:"/api/v1/app-catalog/applications",responseType:nIA})),pZ=ik(()=>({name:"getIdentityAccessToken",method:"POST",url:"/api/v1/oidc/token",responseType:oIA})),mZ=ik(()=>({name:"getUserApplications",method:"GET",url:"/api/v1/user/applications",responseType:iIA})),EZ=ik(A=>({name:"createSsoApp",method:"POST",url:"/api/v1/idp/application",body:A,responseType:HB.ManagedApplication})),BZ=ik(A=>({name:"deleteSsoApp",method:"DELETE",url:`/api/v1/idp/applications/${A}`,responseType:J})),gZ=ik((A,j)=>({name:"patchSsoApp",method:"PATCH",url:`/api/v1/idp/applications/${A}`,body:j,responseType:HB.ManagedApplication})),hZ=ik(A=>{let j="/api/v1/idp/applications";return{name:"getAccountApplications",method:"GET",url:A?`${j}${it({includeDeleted:A})}`:j,responseType:HB.ManagedApplicationsResponse}}),qZ=ik(A=>({name:"getApplicationDetails",method:"GET",url:`/api/v1/idp/applications/${A}`,responseType:HB.ManagedApplication})),vZ=ik((A,j)=>({name:"putApplicationGroupAssignment",method:"PUT",url:`/api/v1/applications/${A}/assign-groups`,body:{groupUuids:j},responseType:J})),xZ=ik(A=>({name:"patchApplicationDeviceCheckStatus",method:"PATCH",url:"/api/v1/idp/applications/device_check_status",body:A,responseType:J})),fZ=ik(()=>({name:"getAccountHandoffCertificate",method:"GET",url:"/api/v1/idp/account-certificate",responseType:sIA}));var lIA=AA("web-api/api/account_gated_feature_trials.ts"),GZ=lIA(A=>({name:"createAccountGatedFeatureTrialAction",method:"POST",url:"/api/v1/accountgatedfeaturetrial",body:A,responseType:J})),FZ=lIA(A=>({name:"updateAccountGatedFeatureTrialAction",method:"PATCH",url:"/api/v1/accountgatedfeaturetrial",body:A,responseType:J}));var zr=W(aA());var cIA=AA("web-api/api/tracing.ts"),b$j=zr.readonly(zr.intersection([zr.type({name:zr.string,traceId:zr.number,spanId:zr.number,start:zr.number,duration:zr.number,service:zr.string,resource:zr.string,error:zr.number}),zr.partial({parentId:zr.number,type:zr.string,meta:zr.record(zr.string,zr.string),metrics:zr.record(zr.string,zr.number)})]),"PerfTrace"),bZ=zr.readonly(zr.type({success:zr.number,reason:zr.union([zr.string,zr.undefined])}),"TraceSubmissionResult"),yZ=cIA(A=>({name:"sendPerformanceTraces",method:"PUT",url:"/api/v2/perftrace",body:A,responseType:bZ})),$Z=cIA(A=>({name:"sendPreAuthPerformanceTraces",method:"PUT",url:"/api/v2/preauth-perftrace",body:A,responseType:bZ,encrypted:!1}));var $G=W(aA());var dIA=AA("web-api/api/xam.ts"),wZ=$G.readonly($G.type({token:$G.string})),IZ=dIA(()=>({name:"getDeviceTrustAccessToken",method:"GET",url:"/api/v1/device-trust/token",responseType:wZ})),DZ=dIA(()=>({name:"getCentralAccountHubToken",method:"GET",url:"/api/v1/central-account-hub/token",responseType:wZ}));var jr=W(aA());var y$j=AA("web-api/api/identity_verification.ts"),dT;(function(A){A.C="C",A.V="V",A.R="R"})(dT||(dT={}));var kIA=pe(dT,"ActionType"),OZ=jr.readonly(jr.partial({city:jr.string,country:jr.string,countryCode:jr.string,timeZone:jr.string,latitude:jr.number,longitude:jr.number}),"RequesterLocation"),uIA=jr.readonly(jr.type({challengeUuid:jr.string,requesterUserUuid:jr.string,respondentUserUuid:jr.string,action:kIA,expiresAt:jr.union([jr.string,jr.undefined]),createdAt:jr.string,requesterLocation:jr.union([OZ,jr.undefined])}),"ActionSummary"),$$j=jr.readonly(jr.type({challengeUuid:jr.string,requesterUserUuid:jr.string,respondentUserUuid:jr.string,status:jr.union([jr.literal("verified"),jr.literal("rejected"),jr.literal("expired"),jr.literal("pending")]),createdAt:jr.string,requesterLocation:jr.union([OZ,jr.undefined])}),"VerificationEvent"),pIA=jr.readonly(jr.type({actions:jr.array(uIA)}),"AdminIdentityVerificationResponse"),PZ=y$j(()=>({name:"getVerificationActionSummary",method:"GET",url:"/api/v1/identity-verification/account/actions",responseType:pIA}));var wG=W(aA());var w$j=AA("web-api/api/trustlog.ts"),kT=class extends Error{constructor(j,e){super(),this.code=j,this.name="RequestError",this.message=this.code+": "+e}},CZ=A=>async({endpoint:j,method:e,body:t,encrypted:r=!0})=>{let a="/api/v1/atlas"+j,n=await A.request({name:E`atlasRequestCallback`,url:a,method:e,body:t,encrypted:r,options:{dataType:"json"}});if(!n.ok)throw new kT(n.status,await n.text());return n.json()},I$j=wG.readonly(wG.type({trustLogEntry:wG.string},"EnableTrustLogRequest")),HZ=w$j(A=>({name:"enableTrustLog",method:"POST",url:"/api/v1/atlas/trustlog/enable",body:A,responseType:J}));var Bi=W(aA());var D$j=AA("web-api/api/email_notifications.ts"),O$j=Bi.readonly(Bi.type({email:Bi.string,name:Bi.string,uuid:Bi.string}),"EmailNotificationRecipientUser"),mIA=Bi.readonly(Bi.partial({users:Bi.array(O$j),emails:Bi.array(Bi.string)}),"EmailNotificationRecipients"),P$j=Bi.readonly(Bi.partial({inviteaccepted:mIA,recoverycontinued:mIA}),"GetEmailNotificationSettingsResponse"),C$j=D$j(()=>({name:"getEmailNotificationSettings",method:"GET",url:"/api/v1/email-notifications/settings",responseType:P$j}));var jq={};Yt(jq,{Distributor:()=>uT,DistributorChangeOfChannel:()=>hIA,DistributorEntitlement:()=>qIA,DistributorInfo:()=>EIA,DistributorProduct:()=>gIA,getDistributor:()=>T$j,getDistributorEntitlementFromCode:()=>K$j,linkDistributorByEntitlementCode:()=>S$j});var dm=W(aA());var H$j=AA("web-api/src/api/distributors/distributor.ts"),uT=dm.partial({name:dm.string,iconUrl:dm.string,url:dm.string},"Distributor"),EIA=dm.partial({distributor:uT,activatedAt:dm.string,status:dm.string},"DistributorInfo"),T$j=H$j(()=>({name:"getDistributor",method:"GET",url:"/api/v1/distributor",responseType:EIA}));var Bo=W(aA());var BIA=AA("web-api/api/distributors/entitlement.ts"),gIA=Bo.partial({environment:Bo.string,productId:Bo.string,productSource:Bo.string},"DistributorProduct"),hIA=Bo.partial({onePasswordDomain:Bo.string},"DistributorChangeOfChannel"),qIA=Bo.readonly(Bo.intersection([Bo.type({companyName:Bo.string,contactEmail:Bo.string,distributor:uT,entitlementCode:Bo.string,product:gIA,status:Bo.string}),Bo.partial({changeOfChannel:hIA})]),"DistributorEntitlement"),K$j=BIA(A=>({name:"getDistributorEntitlementFromCode",method:"GET",url:`/api/v1/distributors/entitlement/${A}/check`,encrypted:!1,responseType:qIA})),S$j=BIA(A=>({name:"linkDistributorByEntitlementCode",method:"POST",url:"/api/v1/distributors/link",body:{entitlementCode:A},responseType:J}));var xa={};Yt(xa,{PARSE_WATCHTOWER_REPORT_STEPS:()=>CIA,accountToAPI:()=>gT,billing:()=>Uu,decryptDocument:()=>hT,decryptFile:()=>OG,encryptDocument:()=>zZ,encryptFile:()=>JZ,fileId:()=>xT,groupToAPI:()=>km,packageFromAPI:()=>qT,packageToAPI:()=>XZ,packagesFromAPI:()=>UZ,parseAccount:()=>NZ,parseAdminWatchtowerReports:()=>rAA,parseAndDecryptVaultAccessList:()=>ww,parseFirewallRules:()=>RZ,parseGroup:()=>BT,parseGroups:()=>DG,parsePerson:()=>ck,parseProvisionedGroupKeyset:()=>IIA,parseProvisionedKeys:()=>WZ,parseProvisionedVaultKey:()=>wIA,parseServiceAccount:()=>rq,parseVault:()=>bs,parseVaults:()=>KB,personToAPI:()=>Iw,recoverableKeysForPeopleFromAPI:()=>QZ,reportSectionItemUsageFromApi:()=>vT,serviceAccountToApi:()=>xwj,signupFromAPI:()=>eAA,userCookiesFromAPI:()=>tAA,userReportFromAPI:()=>ZZ,vaultAccessToAPI:()=>Bl,vaultItemFromAPI:()=>MB,vaultItemTemplateFromAPI:()=>TB,vaultItemTemplatesFromAPI:()=>MZ,vaultItemToApi:()=>Dw,vaultItemsFromAPI:()=>SB,vaultReportFromAPI:()=>AAA,vaultToAPI:()=>lk,vaultsReportFromAPI:()=>jAA,vaultsToAPI:()=>LZ});var Uu={};Yt(Uu,{parseAvailableTiersFromAPI:()=>L$j,parseAvailableTiersV3:()=>N$j,parseTiersFromAPI:()=>vIA,subscriptionDetailAttrsFromAPI:()=>M$j,tierFromAPI:()=>IG});var M$j=A=>{let j=A.cards&&A.cards.length>0?A.cards.slice().sort(_$j):[];return{balance:A.balance||0,cards:j,pendingCreditAmount:A.pendingCreditAmount||0,plan:A.plan,coupon:A.coupon,nextInvoice:A.nextInvoice,hasInvoices:A.hasInvoices,stripe:A.subscription,purchaseOrder:A.purchaseOrder,stripePurchaseOrder:A.stripePurchaseOrder,customerAddress:A.customerAddress,pendingPaymentMethods:A.pendingPaymentMethods||[],billingStats:A.billingStats}},_$j=(A,j)=>A.expYear!==j.expYear?j.expYear-A.expYear:A.expMonth!==j.expMonth?j.expMonth-A.expMonth:A.name!==j.name?A.name.localeCompare(j.name):A.stripeCardUid.localeCompare(j.stripeCardUid);var L$j=(A,j)=>{if(!A||A.length===0)return[];let e=[];for(let t of A){let r=IG(t);j.tier&&j.tier.name===r.name&&(j.tier.plans=r.plans,r.sortOrder=-1),e.push(r)}return vO(e,"sortOrder")},N$j=A=>({currentTier:IG(A.currentTier),listOfTiers:vIA(A.listOfTiers)}),vIA=A=>A.map(j=>IG(j)),IG=(A,j)=>{let e=A.features.reduce((i,s)=>({...i,[s]:!0}),fh.getBlankTier().hasFeature),t=A.gatedFeatures.reduce((i,s)=>({...i,[s]:!0}),fh.getBlankTier().hasGatedFeature),r=[];A.plans&&(r=vO(A.plans,"sortOrder"));let a=[];A.tierChangeRestrictions.length>0&&(a=A.tierChangeRestrictions);let{successorTierName:n}=A,o={...ei(A,["features"]),...ei(A,["gatedFeatures"]),marketingText:{...A.marketingText,localizedFeatures:A.marketingText.localizedFeatures},successorTierName:n,hasFeature:e,hasGatedFeature:t,plans:r,tierChangeMappings:a};return o.plans.length===0&&j&&j.plans&&j.plans.length>0&&j.name===o.name&&(o.plans=j.plans),o};var bw=async A=>await MR(A.session);var yw=(A,j)=>({getEntry:J$j(A.id,j),getEntries:R$j(A.id,j),saveEntry:U$j(A.id,j),saveEntries:xIA(A.id,j)}),pT=A=>{let j=z$j();return eq={...eq,[A]:j},j},eq={},z$j=()=>({keysets:{}}),TZ=(A,j)=>(eq[A]||pT(A))[j],R$j=(A,j)=>()=>TZ(A,j),J$j=(A,j)=>e=>TZ(A,j)[e],U$j=(A,j)=>(e,t)=>{xIA(A,j)({[e]:t})},xIA=(A,j)=>e=>{let t=TZ(A,j);eq={...eq,[A]:{...eq[A],[j]:p0({},t,e)}}},KZ=()=>{eq={}};var X$j="action/keyset",SZ=rj(X$j),mT=(A,j)=>{let e=Ia(j,"uuid");yw(A,"keysets").saveEntries(e)},sk=async(A,j)=>SZ("decryptKeysets",async()=>{let e=A.user&&A.user.masterKey,t=Ia(j,n=>n.uuid),r=yw(A,"keysets"),a=Promise.resolve([]);for(let n of j)a=a.then(async o=>fIA(n.uuid,t,r,e).then(i=>(A.user&&n.encryptedBy===e?.KID()&&(A.user.activeKeyset=i,A.user.pubKey=i.ekeyPair.pubKey),[...o,i])));return a}),u6=(A,j)=>yw(A,"keysets").getEntry(j),fIA=async(A,j,e,t,r=0)=>SZ("getDecryptedKeyset",async()=>{if(r>50)throw new Error("Infinite loop!");let a=e.getEntry(A);if(a)return a;let n=j[A];if(n)return V$j(n,j,e,t,r+1).then(o=>(e.saveEntry(o.uuid,o),o));throw new Error("Could not find keyset. <"+A+">")}),V$j=async(A,j,e,t,r=0)=>SZ("decryptKeysetFindParent",async()=>{if(A.encryptedBy===t?.KID())return t?La.decryptWithKey(t,A):Promise.reject(new Error("Missing master key"));let a=A.encryptedBy||A.encSymKey.kid;if(!a)throw new Error("Missing encryptedBy.");if(a===A.uuid)throw new Error("Keyset is self-encrypted.");return fIA(a,j,e,t,r).then(async n=>La.decryptWithKeyset(n,A))}),$w=async A=>{if(!A.user)return;let j=A.accountOverview;if(A.accountOverview=await bw(A),!j||A.accountOverview&&A.accountOverview.keysetVersion!==j.keysetVersion)return ET(A)},ET=async A=>{let{keysets:j}=await HU(A.session);if(!A.user)throw new Error("Missing user");if(!A.user.masterKey){let e=j.find(r=>r.encryptedBy===Cp);if(!e)throw new Error("Could not find active keyset");let t=Yy(e.encSymKey);A.user.masterKey=await Zt.derive(t,A.user.getCredentials())}return sk(A,j)};var Bl=A=>{if(!A.acl||le.isEffectivelyZero(A.acl))throw new Error("invalid vault acl");if(!A.encVaultKey)throw new Error("missing vault access key");return{vaultUuid:A.vaultUuid,accessorType:A.accessorType,accessorUuid:A.accessorUuid,acl:A.acl,leaseTimeout:A.leaseTimeout,vaultKeySN:A.vaultKeySN,encryptedBy:A.encVaultKey.kid,encVaultKey:A.encVaultKey}};var MZ=A=>A.map(TB).sort(ni.strings(j=>j.uuid)),TB=A=>{let j=A.uuid||A.templateUuid||"",e={uuid:j,localizedStrings:{},contents:[],...A.attrs};return{...A,uuid:j,sidebarIcon:A.sourceIcon,attrs:e}};var W$j="parser/vault",_Z=rj(W$j),KB=async(A,j)=>_Z("parseVaults",async()=>j?Promise.all(j.map(async e=>bs(A,e))):[]),GIA=async(A,j,e)=>_Z("parseAndDecryptVaultAccessRecord",async()=>{let t=new ft({...e,vaultUuid:j.uuid});if(!t.encVaultKey)return t;let r=u6(A,t.encVaultKey.kid);return r?t.decryptVaultKey(r).then(a=>(j.activeKey||(j.activeKey=a),t)).catch(a=>(console.error("parser/vault#parseAndDecryptVaultAccessRecord",a),t)):t}),Y$j=A=>new ej({uuid:A,name:"",type:ej.TypeClientPlaceholder,desc:""}),ww=async(A,j)=>_Z("parseAndDecryptVaultAccessList",async()=>{if(!j)return Promise.resolve(void 0);if(j.length===0)return Promise.resolve([]);let e=pn(j,async t=>GIA(A,Y$j(t.vaultUuid),t));return Promise.all(e)}),bs=async(A,j,e,t)=>{let r=t||new ej({uuid:j.uuid,name:"",type:j.type,desc:""});if(r.createdAt=mr(j.createdAt),r.updatedAt=mr(j.updatedAt),r.attrVersion=j.attrVersion,r.contentVersion=j.contentVersion,r.activeItemCount=j.activeItemCount||0,r.clientAccess=j.clientAccess||Xj.empty(),j.previewUsers&&(r.previewUsers=j.previewUsers.slice()),j.previewGroups&&(r.previewGroups=j.previewGroups.slice()),j.itemCategories&&(r.itemTemplates=MZ(j.itemCategories.slice())),j.combinedAccess&&r.setCombinedAcl(j.combinedAccess.acl),!j.access)throw new Error(`Missing vault access information: ${j.uuid}`);let a=j.access.map(async o=>GIA(A,r,o)),n=await Promise.all(a);return r.setAccessList(n),await r.decryptAttrs(j.encAttrs),e&&r.addAttrMask(e),r},LZ=(A,j)=>{let e=j?Gp(j,"vaultUuid"):{};return A.map(t=>lk(t,e[t.uuid]))},lk=(A,j)=>{if(!A.uuid)throw new Error("Vault missing uuid");if(!A.encAttrs)throw new Error("Vault missing EncAttrs");if(!A.type)throw new Error("Vault missing type");return{uuid:A.uuid,type:A.type,attrVersion:A.attrVersion,contentVersion:A.contentVersion,encAttrs:A.encAttrs,access:j&&j.length>0?j.map(Bl):void 0}};var Q$j="parser/group",FIA=rj(Q$j),DG=async(A,j)=>FIA("parseGroups",async()=>Promise.all(j.map(async e=>BT(A,e)))),BT=async(A,j,e,t)=>FIA("parseGroup",async()=>{let r={uuid:j.uuid,name:j.name,desc:j.desc,type:j.type,activeKeysetUuid:j.activeKeysetUuid,createdAt:mr(j.createdAt),updatedAt:mr(j.updatedAt),attrVersion:j.attrVersion,avatar:j.avatar,permissions:j.permissions,userCount:j.userCount,sso:j.sso},a=t||new wA(r);t&&a.setOverview(r),j.recoverableKeyset&&(a.recoverableKeyset=j.recoverableKeyset);let n=Promise.resolve(),o;return j.pubKey&&(o=new sa(j.pubKey.kid,void 0,j.pubKey),n=o.import()),n.then(async()=>(a.clearCachedAccessInfo(),j.memberships&&(a.memberships=j.memberships),o&&(a.pubKey=o),e&&a.addAttrMask(e),j.vaultAccess&&j.vaultAccess.length>0?ww(A,j.vaultAccess).then(i=>{i&&a.setVaultAccessList(i)}).catch(i=>{throw console.error("Failed to parse accessList:",i),i}):Promise.resolve())).then(async()=>j.recoveryKeyset?(a.recoveryKeyset=j.recoveryKeyset,u6(A,j.activeKeysetUuid)&&a.type!==wA.TypeRecovery?sk(A,[a.recoveryKeyset]).catch(async()=>Promise.resolve()):Promise.resolve()):Promise.resolve()).then(async()=>Promise.resolve(a))}),km=(A,j)=>{let e={uuid:A.uuid,name:A.name,type:A.type,desc:A.desc,activeKeysetUuid:A.activeKeysetUuid||"",attrVersion:A.attrVersion,recoverableKeyset:A.recoverableKeyset,recoveryKeyset:A.recoveryKeyset,avatar:A.avatar,permissions:A.permissions};if(A.archivedKeysets.length>0&&(e.archivedKeysets=A.archivedKeysets),(j&wA.Attr.PubKey)!==0&&A.pubKey&&(e.pubKey=A.pubKey.jwk),(j&wA.Attr.Memberships)!==0&&(e.memberships=A.memberships),(j&wA.Attr.VaultAccess)!==0){let t=A.getUnsafeVaultAccessList();t&&t.length>0&&(e.vaultAccess=t.map(Bl))}return e};var Z$j="parser/person",bIA=rj(Z$j),Awj=async A=>bIA("_importPubKey",async()=>A?new sa(A.kid,void 0,A).import():Promise.resolve(void 0)),ck=async(A,j,e=0,t)=>bIA("parsePerson",async()=>{let r=jwj(j),a=t?t.setAttrs(r):new Hr(r);a.addAttrMask(e);let n=j.personalItemsCount;n&&(a.personalItemsCount=n);let o=j.devices;o&&(a.devices=o);let i=j.proposedEmail;return i&&(a.proposedEmail=i),j.memberships&&j.memberships.length>0&&(a.groupMemberships=j.memberships),Awj(j.pubKey).then(async s=>(s&&(a.pubKey=s),ww(A,j.vaultAccess))).then(s=>(s&&(a.vaultAccessList=s),a))}),jwj=A=>{let j=A.csToken??void 0;return{uuid:A.uuid,name:A.name,state:A.state,type:A.type,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,language:A.language,avatar:A.avatar,combinedPermissions:A.combinedPermissions,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID||"",hasMFAEnabled:A.hasMFAEnabled,email:A.email,createdAt:mr(A.createdAt),updatedAt:mr(A.updatedAt),lastAuthAt:mr(A.lastAuthAt),csToken:j}},Iw=A=>({uuid:A.uuid,email:A.email,name:A.name,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,state:A.state,type:A.type,avatar:A.avatar,language:A.language,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID,hasMFAEnabled:A.hasMFAEnabled,keysets:null,memberships:null,vaultAccess:null,devices:null,personalItemsCount:null});var ewj="parser/account",twj=rj(ewj),NZ=async(A,j)=>twj("parseAccount",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));A.account?A.account.setAttrs(j):A.account=new dt(j);let e=A.account;if(A.account.createdAt=mr(j.createdAt),j.me&&A.setUserUUID(j.me.uuid),j.billing){A.account.trialStartedAt=mr(j.billing.trialStartedAt),A.account.trialDays=j.billing.trialDays;let n=j.tier?IG(j.tier,A.account.subscription.tier):A.account.subscription.tier,o={billingCompanyName:"",billingAddress:"",billingEmails:"",billingPurchaseOrderNumber:""};A.account.subscription={...A.account.subscription,freezesAt:j.billing.freezesAt,guests:j.billing.guests,members:j.billing.members,provider:j.billing.provider,status:j.billing.status,storageUsed:j.storageUsed||0,tier:n,settings:{...o,...j.billing.settings}}}j.meta&&(A.account.meta=j.meta),j.promotions&&(A.account.promotions=j.promotions),j.counts&&(A.account.counts=j.counts);let t=Promise.resolve();if(!A.user)return Promise.reject(new Error("Missing user"));if(j.gatedFeatureTrials&&(A.account.gatedFeatureTrials=j.gatedFeatureTrials),j.mspInfo&&(A.account.mspInfo=j.mspInfo),j.groups){let n=j.groups;t=t.then(async()=>DG(A,n)).then(o=>{e.setGroups(o)})}let a;if(j.me){let n=j.me;t=t.then(async()=>{let o=Hr.Attr.PubKey|Hr.Attr.Groups|Hr.Attr.VaultAccess;return ck(A,n,o,A.user)}).then(async o=>{let i=o&&Yj.isExternalAccountManagement(o);return!A.config.inWebView&&!i&&(A.session.setLanguage(o.language),A.nc.emit(Lt.LanguageRefreshed)),a=o,Promise.resolve([])})}return t.then(async()=>A.account?Promise.resolve({account:A.account,activeUser:a}):Promise.reject(new Error("Missing account")))}),gT=A=>{if(!A.uuid)throw new Error("Account missing uuid");if(!A.type)throw new Error("Account missing type");return{uuid:A.uuid,type:A.type,attrVersion:A.attrVersion,avatar:A.avatar,createdAt:ec(A.createdAt),domain:A.domain,invite:{inviteEmailDomains:A.inviteEmail,inviteSecret:A.inviteSecret},name:A.name,state:A.state,trialStartedAt:ec(A.trialStartedAt),trialDays:A.trialDays,settings:A.settings,billingSettings:A.subscription.settings}};var hT=async(A,j)=>{let e=A.encryptionKey;if(!e.alg)throw new Error("Missing key algorithm");let t=e.alg,r=$t(e.kid),a=new Uint8Array(j);if(await yIA(a)!==e4(A.integrityHash))throw new Error("Integrity hash does not match.");return await r.importRawKey(t,ZA(e.k)),r.decryptFile({data:a,iv:A.nonce})},zZ=async(A,j)=>{let e=$t(),t=await e.generate(Tt),r=new Uint8Array(A),{data:a,iv:n}=await e.encryptFile(r);if(!n)throw new Error("Missing nonce");return{data:a.buffer,attributes:{documentId:"",encryptedSize:a.byteLength||0,encryptionKey:t,fileName:j||"",integrityHash:await yIA(a),nonce:n,unencryptedSize:A.byteLength||0}}},yIA=async A=>{let j=await $A.subtle.digest({name:"SHA-256"},A);return tj(new Uint8Array(j))};var rwj="parser/firewall_rules",awj=rj(rwj),RZ=async A=>awj("parseFirewallRules",async()=>{let j=[],e=[],t=[];if(A.rules===null)return{globalRules:j,groupRules:e};for(let r of A.rules){if(r===void 0)continue;let a={type:r.type,scope:r.scope,value:r.value,action:r.action};if(r.scope&&r.scope.length>1)throw new Error("More firewall scopes than expected. Scope may only be either 'Global' or 'Group'");if(r.scope===void 0||r.scope[0]?.type===Su.Global){j.push(a);continue}if(r.scope[0]?.type===Su.Group){let n=t[0]?.scope&&t[0]?.scope[0]?.uuid?t[0].scope[0]?.uuid:"";if(t.length===0){t.push(a);continue}if(r.scope[0]?.uuid===n){t.push(a);continue}let o={rules:[...t],groupUuid:n};e.push(o),t.length=0,t.push(a)}}if(t.length!==0){let r={rules:[...t],groupUuid:t[0]?.scope&&t[0]?.scope[0]?.uuid?t[0].scope[0]?.uuid:""};e.push(r)}return{globalRules:j,groupRules:e}});var OG=async(A,j)=>{let e=A.encryptionKey;if(!e.alg)throw new Error("Missing key algorithm");let t={kid:e.kid,enc:e.alg,cty:Wy,iv:A.nonce,data:tj(new Uint8Array(j))},r=$t(e.kid);return await r.importRawKey(e.alg,ZA(e.k)),r.decrypt(t)},JZ=async A=>{let j=$t();await j.generate(Tt);let e=await j.encrypt(new Uint8Array(A)),t=ZA(e.data);if(!e.iv)throw new Error("Missing iv");if(!j.jwk)throw new Error("No encryption key.");return{data:t.buffer,attributes:{fileId:"",encryptionKey:j.jwk,nonce:e.iv}}};var nwj="parser/package",$IA=rj(nwj),UZ=async(A,j,e,t)=>$IA("packagesFromAPI",async()=>!e||e.length===0?[]:Promise.all(e.map(async r=>qT(A,j,r,t))).catch(()=>[])),qT=async(A,j,e,t)=>$IA("packageFromAPI",async()=>{let r=await t([e.senderUuid,e.recipientUuid]),a=r.find(d=>d.uuid===e.recipientUuid),n=r.find(d=>d.uuid===e.senderUuid);if(!a||!n)throw new Error("Missing recipient or sender.");let o=await Ni(n.pubKey),i=new Hr({uuid:n.uuid});i.pubKey=o;let s=new Aq(i,a);if(s.uuid=e.uuid,s.createdAt=mr(e.createdAt),s.updatedAt=mr(e.updatedAt),s.itemUuid=e.itemUuid,s.itemVersion=e.itemVersion,s.templateUuid=e.templateUuid,s.clientCreatedAt=mr(e.clientCreatedAt),s.clientUpdatedAt=mr(e.clientUpdatedAt),s.encKey=e.encKey,s.recoverableEncKey=e.recoverableEncKey,s.encOverview=e.encOverview,s.encDetails=e.encDetails,s.signature=e.signature,!A.user)throw new Error("Missing user");let l=a.uuid===A.user.uuid&&A.user.activeKeyset;return l?s.verifyAndDecrypt(j,l):s}),XZ=A=>{if(!A.item)throw new Error("Missing item");if(!A.encKey)throw new Error("Missing encKey");if(!A.recoverableEncKey)throw new Error("Missing recoverableEncKey");if(!A.encOverview)throw new Error("Missing encOverview");if(!A.signature)throw new Error("Missing signature");if(!A.item.templateUuid)throw new Error("Missing template UUID");let j={uuid:A.uuid,senderUuid:A.sender.uuid,recipientUuid:A.recipient.uuid,sourceVaultUuid:A.item.vault.uuid,itemUuid:A.item.uuid,itemVersion:A.item.itemVersion,templateUuid:A.item.templateUuid,encKey:A.encKey,recoverableEncKey:A.recoverableEncKey,encOverview:A.encOverview,encDetails:A.encDetails,signature:A.signature};return A.createdAt&&(j.createdAt=ec(A.createdAt)),A.updatedAt&&(j.updatedAt=ec(A.updatedAt)),A.item.createdAt&&(j.clientCreatedAt=ec(A.item.createdAt)),A.item.updatedAt&&(j.clientUpdatedAt=ec(A.item.updatedAt)),j};var owj="parser/provisioned_keys",VZ=rj(owj),wIA=async(A,j)=>VZ("parseProvisionedVaultKey",async()=>$t().decryptWithKeyset(j,A.encVaultKey).then(e=>(e.sn=A.vaultKeySN,new mw(A.vaultUuid,e)))),IIA=async(A,j)=>VZ("parseProvisionedGroupKeyset",async()=>La.decryptWithKeyset(j,A.keyset).then(e=>new Ew(A.groupUuid,e))),WZ=async(A,j)=>VZ("parseProvisionedKeys",async()=>{let e=u6(A,j.keyset.encryptedBy);return e?La.decryptWithKeyset(e,j.keyset).then(async t=>{let r=Promise.all(pn(j.vaultKeys,async n=>wIA(n,t))),a=Promise.all(pn(j.groupKeysets,async n=>IIA(n,t)));return Promise.all([r,a])}).then(([t,r])=>new Bw(t,r)):Promise.reject(new Error("Missing keyset for decrypting provisioned user keyset"))});var iwj="parser/recoverable_keys",YZ=rj(iwj),swj=async(A,j)=>YZ("recoverableVaultKeyFromAPI",async()=>{let e=u6(A,j.encryptedBy);return e?$t().decryptWithKeyset(e,j.encVaultKey).then(t=>(t.sn=j.vaultKeySN,new gw(j.vaultUuid,t))):Promise.reject(new Error("Could not find keyset"))}),lwj=async(A,j)=>YZ("recoverableGroupKeysetFromAPI",async()=>{let e=u6(A,j.keyset.encryptedBy);return e?La.decryptWithKeyset(e,j.keyset).then(t=>new hw(j.groupUuid,t)):Promise.reject(new Error("Could not find keyset"))}),cwj=async(A,j)=>YZ("recoverablePackageKeyFromAPI",async()=>{let e=u6(A,j.key.kid);return e?$t().decryptWithKeyset(e,j.key).then(t=>new qw(j.packageUuid,t)):Promise.reject(new Error("Could not find keyset"))}),dwj=async(A,j)=>{let[e,t,r]=await Promise.all([Promise.all(j.vaultKeys.map(async a=>swj(A,a))),Promise.all(j.groupKeysets.map(async a=>lwj(A,a))),Promise.all(j.packageKeys.map(async a=>cwj(A,a)))]);return new vw(e,t,r)},QZ=async(A,j)=>{let e=j.keys.map(async r=>dwj(A,r)),t=await Promise.all(e);return new xw(t)};var kwj="parser/vault_item",DIA=rj(kwj),vT=async(A,j)=>{if(j.itemUsages.length===0)return[];let e=Lr(l6(j.vaults)),t=Ia(await Promise.all(pn(e,async n=>bs(A,n))),"uuid"),r={};return(await Promise.all(j.itemUsages.map(async n=>{let o=j.vaultItems[n.itemUuid];if(!o)return;let i=t[n.vaultUuid];if(i&&!r[n.itemUuid])return MB(o,i)}))).forEach(n=>{n&&(r[n.uuid]=n)}),Lr(j.itemUsages.map(n=>{let o=r[n.itemUuid];if(o!==void 0)return{...n,vaultItem:o}}))},SB=async(A,j)=>DIA("vaultItemsFromAPI",async()=>Promise.all(A.map(async e=>MB(e,j)))),MB=async(A,j)=>DIA("vaultItemFromAPI",async()=>{let e=j instanceof ej?new dA(j,void 0,A.uuid):j;return e.templateUuid=A.templateUuid,e.faveIndex=A.faveIndex||0,e.state=A.trashed||"",e.createdAt=mr(A.createdAt),e.updatedAt=mr(A.updatedAt),e.changerUuid=A.changerUuid||"",e.itemVersion=A.itemVersion,e.encryptedBy=A.encryptedBy,e.decrypt(A.encOverview,A.encDetails)}),Dw=async A=>{let j=await A.encrypt();if(!j.templateUuid)throw new Error("Missing templateUuid");if(!j.encryptedBy)throw new Error("Missing encryptedBy");if(!j.encOverview)throw new Error("Missing encOverview");let e={uuid:j.uuid,templateUuid:j.templateUuid,packageUuid:j.packageUuid,itemVersion:j.itemVersion,encryptedBy:j.encryptedBy,encOverview:j.encOverview,encDetails:j.encDetails,trashed:j.state};j.updatedAt&&(e.updatedAt=ec(j.updatedAt)),j.createdAt&&(e.createdAt=ec(j.createdAt)),typeof j.faveIndex=="number"&&j.faveIndex>0&&(e.faveIndex=j.faveIndex);let t=Oc(A.details.sections??[],r=>Lr((r.fields??[]).map(a=>dA.getDocumentAttributesFromField(a))));return e.fileReferences=UE([j.details.documentAttributes,j.overview?.icons?.detail,...t].map(r=>{if(!r)return;if(!r.signingKey){console.error(new Error("Cannot handle file with no signing key"));return}let a=new ow(xT(r),r.signingKey);return{fileId:a.fileId,signature:a.signReference(j.uuid,j.itemVersion)}})),e},xT=A=>A.documentId||A.fileId;var uwj="parser/report",tq=rj(uwj),pwj=pn,mwj=async(A,j,e)=>tq("parseUserOverview",async()=>j?ck(A,j.user,void 0,e).then(t=>({user:t,groupCount:j.groupCount,vaultCount:j.vaultCount,itemCount:j.itemCount})):Promise.resolve(void 0)),Ewj=async(A,j)=>tq("parseVaultOverview",async()=>j?bs(A,j.vault).then(e=>({vault:e,userCount:j.userCount,groupCount:j.groupCount,currentUserUuids:j.currentUserUuids})):Promise.resolve(void 0)),Bwj=async(A,j)=>tq("parseUserItemUsage",async()=>j?KB(A,j.vaults).then(async e=>{let t=Ia(e,"uuid"),r=pwj(j.vaultItemsByVault,async(a,n)=>{let o=t[n];if(o&&a&&a.length>0)return SB(a,o)});return UE(await Promise.all(r))}).then(e=>{let t=Pd(e);return{itemUsages:OIA(t,j.itemUsages)}}):Promise.resolve(void 0)),gwj=async(A,j)=>tq("parseVaultItemUsage",async()=>j?bs(A,j.vault).then(async e=>e?SB(j.vaultItems,e):Promise.reject(new Error("Server vault is empty"))).then(e=>({itemUsages:OIA(e,j.itemUsages),usersByUserUuid:j.usersByUserUuid})):Promise.resolve(void 0)),ZZ=async(A,j,e)=>tq("userReportFromAPI",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));let{overview:t,itemUsage:r}=j,[a,n]=await Promise.all([mwj(A,t,e),Bwj(A,r)]);return{overview:a,itemUsage:n}}),AAA=async(A,j)=>tq("vaultReportFromAPI",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));let{overview:e,itemUsage:t}=j,[r,a]=await Promise.all([Ewj(A,e),gwj(A,t)]);return{overview:r,itemUsage:a}}),jAA=async(A,j)=>tq("vaultsReportFromAPI",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));let e=j.items.map(async t=>{let r=await bs(A,t.vault);return{...t,vault:r}});return Promise.all(e)}),OIA=(A,j)=>{let e=Ia(A,"uuid");return j.map(t=>{let r=e[t.itemUuid];if(r===void 0)throw new Error("itemUsagesFromApi: vaultItem not found");return{...t,vaultItem:r}})};var hwj="parser/serviceaccounts",qwj=rj(hwj),rq=async(A,j=0,e)=>qwj("parseServiceAccount",async()=>{let t=vwj(A),r=e?new Ri({...e,...t}):new Ri(t);return r.addAttrMask(j),A.tokens&&A.tokens.length>0&&(r.tokens=[...A.tokens]),r}),vwj=A=>({uuid:A.uuid,name:A.name,state:A.state,type:A.type,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,language:A.language,permissions:A.permissions,avatar:A.avatar,combinedPermissions:A.combinedPermissions,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID||"",email:A.email,createdAt:mr(A.createdAt),updatedAt:mr(A.updatedAt),lastAuthAt:mr(A.lastAuthAt),creatorUuid:A.creatorUuid,serviceAccountType:A.serviceAccountType,serviceAccountVaultAccess:A.serviceAccountVaultAccess?fwj(A.serviceAccountVaultAccess):void 0,billables:A.billables,rotatedAt:mr(A.rotatedAt),expiresAt:mr(A.expiresAt)}),xwj=A=>({uuid:A.uuid,name:A.name,state:A.state,type:A.type,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,language:A.language,avatar:A.avatar,permissions:A.permissions,combinedPermissions:A.combinedPermissions,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID||"",email:A.email,creatorUuid:A.creatorUuid,serviceAccountType:A.serviceAccountType}),fwj=({totalVaults:A,displayable:j})=>({totalVaults:A,displayable:j.map(e=>new ft(e))});var eAA=A=>({availablePlans:A.availablePlans||[],completedAt:mr(A.completedAt),createdAt:mr(A.createdAt),domain:A.domain,email:A.email,expiresAt:mr(A.expiresAt),language:A.language,name:A.name,source:A.source,state:A.state,promoCode:A.promoCode,tierName:A.tierName,defaultBillingFrequency:A.defaultBillingFrequency,trialEndsAt:mr(A.trialEndsAt),type:A.type,uuid:A.uuid,stepUuid:A.stepUuid,features:A.features,duplicateAccounts:A.duplicateAccounts,flowServiceUuid:A.flowServiceUuid,setupIntentCode:A.setupIntentCode});var tAA=A=>A.map(j=>new Fw({userUuid:j.userUuid,userEmail:j.userEmail,userName:j.userName,userAvatarURL:j.userAvatarURL,usingMyDomain:!!j.usingMyDomain,accountUuid:j.accountUuid,accountType:j.accountType,accountName:j.accountName,accountDomain:j.accountDomain,accountAvatarURL:j.accountAvatarURL,hasPrioritySupport:!!j.hasPrioritySupport}));var PIA=E`parser/admin_watchtower`,Gwj=rj(PIA.str),CIA=2,rAA=async(A,j,e,t)=>{let r=!!A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy;return(await Gwj("parseAdminWatchtowerReports",async()=>Promise.all(j.map(async n=>{try{return await Fwj(A,n,e,r,t)}catch(o){if(t!==void 0)for(let i=0;i<CIA;i++)t();return}})))).filter(n=>n!==void 0)},Fwj=async(A,j,e,t,r)=>{if(!e.data)throw new Error("Admin Watchtower decryption key does not exist");let a=await bwj(e.data.ePriKey,j.encData,r),n=await ywj(A,j.vaultData,r),o=a.cw+a.rp+(a.vp??0)+a.wp+(a.uw??0)+a.i2fa+a.exp+(t&&a.wa||0);return{uuid:j.uuid,vaultUuid:j.vaultUuid,vaultType:j.vaultType,vaultName:j.vaultName,combinedAcl:j.vaultData?.combinedAcl,updatedAt:j.updatedAt,isOutdated:j.isOutdated,reportData:a,totalIssues:o,vaultAttrs:n}},bwj=async(A,j,e)=>{let t=await kw(A,j),r=sj(t.content,Ue.pipe(MQ)).unwrap();return e?.(),r},ywj=async(A,j,e)=>{if(j===void 0){e?.();return}let t=u6(A,j.encVaultKey.kid);if(!t)throw new Error("No vault access keyset found");let n=await(await $t().decryptWithKeyset(t,j.encVaultKey)).decrypt(j.encVaultAttrs),o=sj(n,Ue).unwrap(),i=sj(o,nT,{mode:"unsafe_report_only",file:PIA,func:E`parseAndDecryptVaultAttrs`}).unwrap();return e?.(),i};var bDA=W(Io());var um=W(aA());var HIA=1e3,$wj=3e4,wwj=3e5,TIA=um.readonly(um.type({account:um.string,user:um.string,device:um.string,session:um.string}),"ServerNotification"),fT=class{constructor(j,e){this.connect=t=>{if(!t){console.warn("Notifier not available");return}""+t,this.websocket=new WebSocket(t),this._closing=!1,this.websocket.addEventListener("open",()=>{""+t,(this._disconnected===void 0||this._disconnected&&Date.now()-this._disconnected>wwj)&&this.connectHandler(),this._disconnected=void 0}),this.websocket.addEventListener("close",()=>{if(""+t,this.websocket=void 0,!this._closing){this._notifierReconnectDelay*=1.3;let r=this._notifierReconnectDelay;if(!this._disconnected){this._disconnected=Date.now();let a=F6(0,this._notifierReconnectJitter);r+=a}`${r}`,setTimeout(()=>this.connect(t),r)}}),this.websocket.addEventListener("message",r=>{this._notifierReconnectDelay=HIA,this.eventHandler(r)})},this.disconnect=()=>{this._closing=!0,this.websocket?.close(),this.websocket=void 0},this.eventHandler=j,this.connectHandler=e,this._notifierReconnectDelay=HIA,this._notifierReconnectJitter=$wj,this._closing=!1}};var KIA=zl,Iwj=l6,ys=()=>({contexts:{},getAllEntries(A){return Dwj(this,A)},getEntry(A,j,e){return Pwj(this,A,j,e)},withEntries(A,j,e){return Cwj(this,A,j,e)},withOnlyEntries(A,j,e){return Hwj(this,A,j,e)},withoutEntries(A,j){return Twj(this,A,j)},withoutContext(A){return Kwj(this,A)}}),nAA=A=>{aAA={...aAA,[A]:Date.now()}},Dwj=(A,j)=>{let e=A.contexts[j];if(e&&e.timestamp>MIA(j))return pn(Iwj(e.entries),t=>t.value)},Owj=A=>({attrMask:0,...A}),Pwj=(A,j,e,t)=>{let{attrMask:r}=Owj(t),a=A.contexts[j],n=a&&a.entries[e];if(n&&n.timestamp>MIA(j)&&(n.attrMask&r)===r)return n.value},SIA=A=>({attrMask:0,timestamp:Date.now(),...A}),Cwj=(A,j,e,t)=>{let{attrMask:r,timestamp:a}=SIA(t),n=A.contexts[j],o=n&&n.entries||{},i=KIA(e,l=>({attrMask:r,value:l,timestamp:a})),s={...o,...i};return oAA(A,j,{entries:s})},Hwj=(A,j,e,t)=>{let{attrMask:r,timestamp:a}=SIA(t),n=KIA(e,o=>({attrMask:r,value:o,timestamp:a}));return oAA(A,j,{entries:n,timestamp:a})},Twj=(A,j,e)=>{let t=A.contexts[j],r=t&&t.entries||{},a=ei(r,e);return oAA(A,j,{entries:a})},Kwj=(A,j)=>({...A,contexts:ei(A.contexts,j)}),oAA=(A,j,e)=>{let t=A.contexts[j]||{};return{...A,contexts:{...A.contexts,[j]:{entries:{},timestamp:0,...t,...e}}}},aAA={},MIA=A=>aAA[A]||0;var NB=W(aA());var aq=W(so()),ADA=W(YIA());var PT,nIj="action/Session",OT=rj(nIj),jDA="v1",oIj="He never wears a Mac, in the pouring rain. Very strange.",iIj=6e5,sIj=21e5,lIj=A=>{[`\u2B06\uFE0F ${A.method} ${A.url}`,`Session: ${A.sessionUuid}`,`Request: ${A.requestId instanceof oj?A.requestId.str:A.requestId}`].join(`
`)},kAA=(A,j,e)=>{[`\u2705 ${A.method} ${A.url}`,`Session: ${A.sessionUuid}`,`Request: ${A.requestId instanceof oj?A.requestId.str:A.requestId}`,`Time: ${Math.round(j-A.start)} ms`,typeof e=="number"&&`Bytes: ${e}`].filter(r=>typeof r=="string").join(`
`)},uAA=(A,j,e)=>{[`\u274C (${e}) ${A.method} ${A.url}`,`Session: ${A.sessionUuid}`,`Request: ${A.requestId instanceof oj?A.requestId.str:A.requestId}`,`Time: ${Math.round(j-A.start)} ms`].join(`
`)},LB=class{constructor(j,e,t,r={}){this.setOpUserAgent=async a=>{await _E(navigator.userAgent).then(n=>this._opuaStr=xf(a,n))},this.clearSessionKey=()=>{this._sessionKey=void 0},this.refreshSession=()=>{if(!this.isSignedIn)return;let a=this._lastSessionExtension?Date.now()-this._lastSessionExtension:void 0;if(a!==void 0&&a>sIj){this.nc.emit(Lt.SessionExpired);return}(a===void 0||a>iIj)&&(F$(this).catch(n=>{}),this._lastSessionExtension=Date.now())},this.setSessionUuid=a=>{this._sessionUuid=a},this.setLanguage=a=>{Cd(this._options,{headers:{"Accept-Language":a}})},this.importSessionKey=async a=>OT("importSessionKey",async()=>{let n=$t(this._sessionUuid);return n.importRawKey(Tt,a).then(async()=>(this._sessionKey=n,n.jwk?(this._sessionHmac=PT.createSessionHmac(n.jwk.k),Promise.resolve(void 0)):Promise.reject(new Error("Missing JWK"))))}),this.importAdditionalRestoreContext=a=>{this._additionalRestoreContext=a},this.importAuth=a=>{this._auth=a},this.getAdditionalRestoreContext=()=>{let a=this._additionalRestoreContext;if(this._additionalRestoreContext=void 0,a===void 0)throw new Error("Missing context restore key");return a},this.createMacHeaderValueForRequest=async(a,n)=>{if(!this._sessionHmac)throw new Error("Missing session HMAC");if(!this._sessionUuid)throw new Error("Missing session ID");if(!this.requestId)throw new Error("Missing request ID");let o=this.requestId++,i=PT.getMacMessage(this._sessionUuid,a,n,o);return[await PT.createMacHeaderValue(i,o,this._sessionHmac),o]},this.request=async a=>{let{encrypted:n,method:o,url:i,body:s,options:l,name:d}=a,k=i[0]==="/"?`https://${this._host}${i}`:i,u=new URL(k).host,m=`accounts.${ai(this._host)}`,I=u===this._host||u===m,S,f=Cd({},this._options,l),v=f.headers||{};if(I){if(v["OP-User-Agent"]=this._opuaStr||xf(this._opua,await _E(navigator.userAgent)),this._sessionUuid&&(v["X-AgileBits-Session-ID"]=this._sessionUuid,this._sessionKey)){let[h,O]=await this.createMacHeaderValueForRequest(o,k);S=O,v["X-AgileBits-MAC"]=h,this.nc.emit(Lt.SessionRequestIdChanged)}f={...f,headers:v}}let P=s;if(n&&s){if(!this._sessionKey)throw new Error("Missing session key");let h=OY(s,f.dataType);h&&(P=await this._sessionKey.encrypt(h),f.dataType="json")}S||(S=Z(Dy(8)));let D=f.responseType??"json",C=a.decryptResponse??(D==="json"&&n?"mustDecrypt":"dontDecrypt"),b={name:d,method:o,url:i,sessionUuid:this._sessionUuid||"[none]",requestId:S,start:performance.now(),responseType:D,decryptResponse:C};return lIj(b),DH(o,k,P,f).then(uIj(b,this._sessionKey,h=>{this.isSignedIn&&this.nc.emit(Lt.SessionExpired,{isReauthenticationRequired:h?.isReauthenticationRequired??!1})}),EIj(b))},this.encrypt=async a=>OT("encrypt",async()=>this._sessionKey?this._sessionKey.encrypt(lt(a)):Promise.reject(new Error("Missing session key"))),this._startAuth=async(a,n)=>{if(!Gr.device)throw new Error("Missing device identifier");if(!a.secretKey)throw new Error("Missing Secret Key");this._sessionKey&&console.warn("SessionKey already exist, will reset sessionKey and sessionUuid");let o=a.secretKey,i=Gr.device;this.requestId=0,this._sessionHmac=void 0,this.setSessionUuid(void 0),this._sessionKey=void 0;let s={email:a.email,skFormat:o.format.toString(),skid:o.id,deviceUuid:i.uuid,userUuid:a.uuid},l=await Tu(this,s);if(l.newHost)return{type:"domain_changed",newHost:l.newHost};if(l.newEmail)return{type:"email_changed",newEmail:l.newEmail};if(l.status==="device-not-registered"){this.setSessionUuid(l.sessionID),await $$(this,i);let d={email:a.email,skFormat:o.format.toString(),skid:o.id,deviceUuid:i.uuid,userUuid:a.uuid},k=await Tu(this,d);return this._handleStartAuthResponse(k,a)}if(l.status==="device-deleted")if(n){this.setSessionUuid(l.sessionID),await $J(this,i.uuid);let d={email:a.email,skFormat:o.format.toString(),skid:o.id,deviceUuid:i.uuid,userUuid:a.uuid},k=await Tu(this,d);return this._handleStartAuthResponse(k,a)}else throw new CA.ClientError(CA.ClientErrorCode.deviceDeleted,Z("This device has been deauthorized. Sign in again to reauthorize it."));return this._handleStartAuthResponse(l,a)},this._handleStartAuthResponse=async(a,n)=>{if(!a.accountKeyFormat)throw new Error("Invalid response, missing accountKeyFormat");if(!a.accountKeyUuid)throw new Error("Invalid response, missing accountKeyUuid");if(!a.sessionID)throw new Error("Invalid response, missing sessionID");if(!a.userAuth)throw new Error("Invalid response, missing userAuth");if(!n.secretKey)throw new CA.SecretKeyMissingError(a.accountKeyUuid);if(n.secretKey.id!==a.accountKeyUuid||n.secretKey.format!==a.accountKeyFormat)throw new CA.SecretKeyIdOrFormatMismatchedError(a.accountKeyUuid,n.secretKey.id,a.accountKeyFormat,n.secretKey.format.toString());return{type:"auth_success",secretKey:n.secretKey,sessionUuid:a.sessionID,authParams:a.userAuth}},this._performSrpExchange=async(a,n,o)=>{try{if(!this._sessionUuid)throw new Error("Missing session ID");let s=BIj(n,o),l=await(await Ho.fromHex(a.srpX)).beginAuth(oi.fromString(a.params.method).group,ZA(a.params.salt),s),d=await sJ(this,l.bigAhex),k=await l.recieveBigBhex(d.userB),u=await lJ(this,k.clientHash);return(await k.recieveServerHash(u.serverVerifyHash)).rawKey}catch(i){throw CA.isServerError(i,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized)?new CA.ClientError(CA.ClientErrorCode.invalidEmailOrPassword,Z("Invalid email or password")):i}},this.initialize=async(a,n=!1)=>{if(!n&&!a.rawSessionKey)throw new Error("Session key was expected but missing");if(!n&&!a.sessionUuid)throw new Error("Session UUID was expected but missing");this._isVerified=!0,this.setSessionUuid(a.sessionUuid),this._serverConfig=a.serverConfig,this.requestId=a.requestId,this._auth=a.auth,await this.importSessionKey(a.rawSessionKey)},this.signin=async(a,n,o)=>{this._isVerified=!1;let i=await this._startAuth(a,n);if(i.type!=="auth_success")return i;if(this.setSessionUuid(i.sessionUuid),a.secretKey=i.secretKey,o)this._auth={srpX:o,params:i.authParams};else if(a.password)this._auth=await Wr.generateWithParams({email:a.email,password:a.password,secretKey:a.secretKey},i.authParams);else throw new Error("Missing password or srpX");this.requestId=1;let s=await this._performSrpExchange(this._auth,a.secretKey.id,a.email);return await this.importSessionKey(s),this.complete(a)},this.signInWithCredentialBundle=async(a,n,o,i,s)=>{this._isVerified=!1,this._auth={srpX:n.exportHex(),params:a},this.requestId=1;let l=await this._performSrpExchange(this._auth,i,s);return await this.importSessionKey(l),this.complete(void 0,o)},this.complete=async(a,n)=>{if(!this._sessionUuid)return Promise.reject(new Error("Missing session ID"));let o={client:Gr.clientDescriptor,signInToken:n};Gr.device.name&&(o.device=Gr.device);try{let i=await cJ(this,o);return this._serverConfig=i,this._ssoMigrationGracePeriod=i.ssoMigrationGracePeriod,a&&i.userUuid&&(a.uuid=i.userUuid),a&&this.ssoMigrationGracePeriod?.state===Yj.State.MustMigrateAuth&&(a.state=Yj.State.MustMigrateAuth),i.mfa?{type:"mfa_required",details:i.mfa}:(this._isVerified=!0,this._lastSessionExtension=Date.now(),{type:"verified_session",session:this})}catch(i){throw this._isVerified=!1,i}},this.verifyOidc=async(a,n,o)=>{let i=await ZJ(this,a,n,o,void 0);return this.setSessionUuid(i.user.sessionUuid),i},this.verifyPasskey=async(a,n,o,i)=>{let s=await eU(this,a,n,o,i);return this.setSessionUuid(s.user.sessionUuid),s},this.registerWebauthnCredential=async()=>tU(this),this.verifyWebauthnCredentialAttestation=async(a,n)=>rU(this,a,n),this.verifyMfa=async a=>OT("verifyMfa",async()=>{if(!this._sessionUuid)return Promise.reject(new Error("Missing session ID"));let n={sessionId:this._sessionUuid,client:Gr.clientDescriptor};switch(a.type){case"dSecret":{n.dsecret={dshmac:a.dshmac};break}case"dSecretProxy":{n.dsecretProxy={deviceUuid:a.deviceUuid,dshmac:a.dshmac};break}case"totp":{n.totp={code:a.code};break}case"email":{n.code={code:a.code};break}case"webAuthn":{n.webAuthn=a.data;break}case"duo":{n.duo={sigResponse:a.sigResponse};break}case"duov4":{n.duov4={code:a.code};break}}return dJ(this,n).then(async o=>(this._isVerified=!0,this._lastSessionExtension=Date.now(),this._ssoMigrationGracePeriod=o.ssoMigrationGracePeriod,Promise.resolve(o))).catch(async o=>{throw this._isVerified=!1,CA.isServerError(o,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized)?new CA.ClientError(CA.ClientErrorCode.invalidMFA,E`MFA authentication failed`):o})}),this.enableMfaWithAuth=async a=>OT("enableMfaWithAuth",async()=>{if(!this._sessionUuid)throw new Error("Missing session ID");let n={sessionId:this._sessionUuid,client:Gr.clientDescriptor,mfa:a};try{let o=await kJ(this,n);return this._isVerified=!0,this._lastSessionExtension=Date.now(),o}catch(o){throw this._isVerified=!1,CA.isServerError(o,CA.ServerErrorCode.badRequest,CA.HTTPStatusCode.badRequest)?new CA.ClientError(CA.ClientErrorCode.invalidMFA,Z("MFA authentication failed")):o}}),this._host=j,this.nc=new Fh.EventEmitter,this._onRequestIdChange=r.onRequestIdChange,this._options={dataType:"json",responseType:"json",cache:!1,attempts:1,timeout:3e4},this._isVerified=!1,this._requestId=0,this._sessionHmac=void 0,this.setSessionUuid(void 0),this._sessionKey=void 0,this.setLanguage(e),this._opuaStr=void 0,this._opua=t,this.setOpUserAgent(t)}get auth(){return this._auth}get requestId(){return this._requestId}set requestId(j){this._requestId=j,this._sessionUuid&&this._onRequestIdChange?.(j,this._sessionUuid)}get sessionUuid(){return this._sessionUuid||""}get sessionKey(){return this._sessionKey}get serverConfig(){return this._serverConfig}get ssoMigrationGracePeriod(){return this._ssoMigrationGracePeriod}get isSignedIn(){return!!this._sessionKey&&this._isVerified}};PT=LB;LB.createSessionHmac=A=>tN(A,oIj);LB.getMacMessage=(A,j,e,t)=>{let r=new URL(e);return[A,j.toUpperCase(),`${r.hostname}/${Jx(r.pathname,"/")}?${Jx(r.search,"?")}`,jDA,t].join("|")};LB.createMacHeaderValue=async(A,j,e)=>{let t=new Uint8Array(aq.codec.bytes.fromBits(e.encrypt(A))),r=tj(t.subarray(0,12));return[jDA,j,r].join("|")};var cIj=NB.type({reason:NB.string}),dIj=NB.type({errorCode:NB.number,errorMessage:NB.string}),kIj=(A,j,e)=>{if(A===CA.HTTPStatusCode.tooManyRequests){let t=e("X-Rate-Limit-Retry-In"),r=t?Number.parseInt(t,10):void 0,a=new CA.ServerError(CA.HTTPStatusCode.tooManyRequests);return a.waitLength=r,a}return A===CA.HTTPStatusCode.deprecatedClient?new CA.ServerError(A,CA.ServerErrorReason.deprecated):dIj.is(j)?new CA.LegacyServerError(j.errorCode,j.errorMessage):cIj.is(j)?new CA.ServerError(A,j.reason):typeof j=="string"&&j.length>0?new CA.ServerError(A,j):new CA.ServerError(A)},uIj=(A,j,e)=>async t=>{let r=pIj(t.headers.get("Proxy-Status"));return r?r.error?ZIA(A,e,t):QIA(A,j,t):t.status>=200&&t.status<300?QIA(A,j,t):ZIA(A,e,t)},pIj=A=>{if(!A)return;let j=(0,ADA.parseList)(A).map(([e,t])=>({svc:e.toString(),params:t})).find(({svc:e})=>e==="B5");if(j)return{error:j.params.get("error")?.toString()}},CG;(function(A){A.ActuallyEmpty="ActuallyEmpty",A.Success1="Success1",A.EmptyArray="EmptyArray",A.EmptyDict="EmptyDict"})(CG||(CG={}));var mIj=A=>{if(A.length===0)return CG.ActuallyEmpty;switch(V6(A)){case'{"success": 1}':return CG.Success1;case"[]":return CG.EmptyArray;case"{}":return CG.EmptyDict;default:return!1}},QIA=async(A,j,e)=>{if(A.responseType!=="json")return kAA(A,performance.now()),e;let t=e.clone(),r=new Uint8Array(await e.arrayBuffer()),a=performance.now(),n=mIj(r);if((()=>{switch(A.decryptResponse){case"mustDecrypt":return!0;case"mustDecryptExceptUndefined":return!n;case"dontDecrypt":return!1}})()){if(!j)throw Nr(HG(E`handleRequestSuccess`,E`Response should be decrypted but session is missing`,A)),new Error("Response should be decrypted but session is missing");if(n){let i=s=>Z(s);Nr(HG(E`handleRequestSuccess`,E`Response should be decrypted but it wasn't present: THIS WILL FAIL IN FUTURE PLEASE FIX ME. "empty" variant: ${i(n)}`,A))}else try{let i=sj(r,Ue.pipe(Oa)).unwrap(),s=await j.decrypt(i);return kAA(A,a,s.byteLength),new Response(s,e)}catch(i){throw console.error("Failed to decrypt response",i),Nr(HG(E`handleRequestSuccess`,E`Failed to decrypt response`,A)),i}}return kAA(A,a),t},ZIA=async(A,j,e)=>{uAA(A,performance.now(),e.status);let t,r=e.headers.get("Content-Type");if(r==="text/plain; charset=utf-8")try{let n=await e.text();try{t=JSON.parse(n)}catch{t=n}}catch(n){let o=E`Failed to read ${yp(e.status)} response body as text`;throw console.error(o,n),e.status!==CA.HTTPStatusCode.unauthorized&&Nr(HG(E`handleRequestError`,o,A)),new CA.ServerError(e.status)}else if(r==="application/json"){let n=await e.text();throw JSON.parse(n)}else{let n=E`Unexpected content type for ${yp(e.status)} response: ${r?Z(r):E``}`;throw console.error(n),[407,418,450,499,502,503,504].includes(e.status)||Nr(HG(E`handleRequestError`,n,A)),new CA.ServerError(e.status)}let a=kIj(e.status,t,n=>e.headers.get(n));throw CA.isNewServerError(a,CA.ServerErrorReason.reauthenticationRequired)||CA.isLegacyServerError(a,CA.ServerErrorCode.reauthenticationRequired)||CA.isNewServerError(a,CA.ServerErrorReason.mfaRequired)||CA.isLegacyServerError(a,CA.ServerErrorCode.mfaRequired)?j({isReauthenticationRequired:!0}):CA.isServerError(a,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized)&&j(),a},EIj=A=>j=>{if(CA.isClientError(j,CA.ClientErrorCode.serverRequestTimedOut))throw uAA(A,performance.now(),"timeout"),j;uAA(A,performance.now(),"no status"),console.error("Unexpected fetch error:",j);let e=(()=>{if(j instanceof Error)switch(j.name){case"AbortError":return E`AbortError`;case"NotAllowedError":return E`NotAllowedError`;case"TypeError":return E`TypeError`;default:return E`[Unexpected error name]`}else return E`[Invalid error type]`})();throw Nr(HG(E`handleFetchError`,E`Unexpected fetch error: ${e}`,A)),new CA.ClientError(CA.ClientErrorCode.unexpectedFetchError,Z("The request failed unexpectedly. Check your Internet connection and try again."))},HG=(A,j,{name:e=E`unknown`,sessionUuid:t,requestId:r})=>new Pe({errorClass:mn.RequestError,message:E`${j}: func: ${A} req: ${e}`,metaData:{request:{name:e,sessionUuid:Z(t),requestId:typeof r=="number"?yp(r):r}}}),BIj=(A,j)=>{let e=aq.hash.sha256.hash(ia(Dj(A))),t=j.trim().normalize("NFKD").toLowerCase(),r=aq.hash.sha256.hash(ia(Dj(t))),a=new aq.hash.sha256;return a.update(e),a.update(r),tj(new Uint8Array(aq.codec.bytes.fromBits(a.finalize())))};var gIj=E`web-api/action/context.ts"`,hIj=0,nq=class{constructor(j){this.updateOpuaConfig=async r=>{this.config.opua=Cd({},this.config.opua,r),await this.session.setOpUserAgent(this.config.opua)},this.onNotifierConnected=()=>{cr(this),this.sendServerEvent(Lt.ServerConnected)},this.onNotificationReceived=r=>{let a=sj(r.data,Oo.pipe(TIA),{file:gIj,func:E`onNotificationReceived`});a.type==="ok"?a.value.session===this.session.sessionUuid?this.nc.emit(Lt.ServerChangedFromSelf):(cr(this),this.sendServerEvent(Lt.ServerChanged)):console.error(new Error("Invalid server notification"))},this.sendServerEvent=G9(async r=>{let a;try{a=await $w(this)}catch(n){console.error("Failed to refresh keysets",n)}this.nc.emit(r),a&&this.nc.emit(Lt.ServerChangedWithData,{keysets:a})},5e3,{leading:!0,trailing:!0}),this.config=i9({demoGeneratorIsEnabled:!1,host:"start.1password.com",env:"prd",internalFeaturesAreEnabled:!1,inWebView:!1,server:"1password.com",shouldResetWhenSessionExpires:!0,siblingDomains:[],txtBase:"/txt",opua:{client:{shortCode:vf.OnePasswordForWeb,buildNum:0},deviceUuid:""}},j,(r,a)=>h9(a)||typeof a=="string"&&a.length===0?r:a),this.nc=new Fh.EventEmitter,this.id=++hIj,nAA(this.id);let{notifier:e,session:t}=this.reset();this.notifier=e,this.session=t}get lang(){return this.config.lang||navigator.language||"en"}reset(){let j=this.config.lang||navigator.language||"en";return this.session=new LB(this.config.host,j,this.config.opua,{onRequestIdChange:this.config.onRequestIdChange}),this.notifier&&this.notifier.disconnect(),this.notifier=new fT(this.onNotificationReceived,this.onNotifierConnected),this.session.nc.on(Lt.SessionExpired,e=>{this.nc.emit(Lt.SessionExpired,e),this.config.shouldResetWhenSessionExpires&&this.reset()}),this.nc.on(Lt.SignedOut,()=>{this.reset()}),this.account=void 0,this.user=void 0,this.userAuth=void 0,this.accountOverview=void 0,{notifier:this.notifier,session:this.session}}get user(){return this._user}set user(j){this._user=j}setUserUUID(j){if(!this._user)throw new Error("User is not set yet");this._user.uuid=j}get account(){return this._account}set account(j){this._account=j}get domain(){if(this.account)return this.account.domain;let j=this.config.host.split(".").shift();if(!j)throw new Error("No domain found, invalid host provided.");return j}resetWithHost(j){if(!qIj(j))throw new Error("Invalid host");let e=vIj(j);if(!e)throw new Error("Invalid host");this.config.host=j,this.config.server=e,this.reset()}isSignedIn(){return this.session.isSignedIn}loadVaultReportingPubKey(){this.dvrPubKey||(this.dvrPubKey=(async()=>{try{let j=await qQ(this.session);return Pu.fromJwk(j.pubKey)}catch(j){throw console.error("Failed to retrieve Detailed Vault Reporting public key",j),j}})())}},qIj=A=>{try{let j=new URL(`https://${A}`);return A===j.host}catch{return!1}},vIj=A=>typeof A!="string"||!A?"":A.slice(A.indexOf(".")+1),cr=A=>{nAA(A.id)},to=A=>{A.nc.emit(Lt.ClientStateChanged)},xIj=A=>A.session.isSignedIn&&A.user&&A.user.uuid&&A.user.keysetVersion>0&&A.user.attrVersion>0;var NA,Ir=0,Cw=null;function TG(){return(Cw===null||Cw.byteLength===0)&&(Cw=new Uint8Array(NA.memory.buffer)),Cw}var HT=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},fIj=typeof HT.encodeInto=="function"?function(A,j){return HT.encodeInto(A,j)}:function(A,j){let e=HT.encode(A);return j.set(e),{read:A.length,written:e.length}};function ws(A,j,e){if(e===void 0){let o=HT.encode(A),i=j(o.length,1)>>>0;return TG().subarray(i,i+o.length).set(o),Ir=o.length,i}let t=A.length,r=j(t,1)>>>0,a=TG(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=TG().subarray(r+n,r+t),i=fIj(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return Ir=n,r}var sq=null;function kk(){return(sq===null||sq.buffer.detached===!0||sq.buffer.detached===void 0&&sq.buffer!==NA.memory.buffer)&&(sq=new DataView(NA.memory.buffer)),sq}function lq(A){let j=NA.__externref_table_alloc();return NA.__wbindgen_export_4.set(j,A),j}function oq(A,j){try{return A.apply(this,j)}catch(e){let t=lq(e);NA.__wbindgen_exn_store(t)}}var cDA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&cDA.decode();function Ui(A,j){return A=A>>>0,cDA.decode(TG().subarray(A,A+j))}function uk(A){return A==null}var eDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{NA.__wbindgen_export_5.get(A.dtor)(A.a,A.b)});function GIj(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(NA.__wbindgen_export_5.get(r.dtor)(o,r.b),eDA.unregister(r)):r.a=o}};return a.original=r,eDA.register(a,r,r),a}function pAA(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=pAA(A[0]));for(let n=1;n<r;n++)a+=", "+pAA(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}function $s(A,j){if(!(A instanceof j))throw new Error(`expected instance of ${j.name}`)}function TT(A,j){return A=A>>>0,TG().subarray(A/1,A/1+j)}function pk(A,j){let e=j(A.length*1,1)>>>0;return TG().set(A,e/1),Ir=A.length,e}function CT(A){let j=NA.__wbindgen_export_4.get(A);return NA.__externref_table_dealloc(A),j}function iq(A,j){let e=j(A.length*4,4)>>>0;for(let t=0;t<A.length;t++){let r=lq(A[t]);kk().setUint32(e+4*t,r,!0)}return Ir=A.length,e}function FIj(A,j,e){NA.closure136_externref_shim(A,j,e)}function bIj(A,j,e,t){NA.closure286_externref_shim(A,j,e,t)}var tDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_bookmark_free(A>>>0,1)),Ji=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,tDA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,tDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_bookmark_free(j,0)}},rDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_entrybytes_free(A>>>0,1)),KT=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,rDA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,rDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_entrybytes_free(j,0)}toBase64Url(){let j,e;try{let t=NA.entrybytes_toBase64Url(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}toBase64(){let j,e;try{let t=NA.entrybytes_toBase64(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}},aDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_entrydetails_free(A>>>0,1)),mAA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,aDA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,aDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_entrydetails_free(j,0)}get entry(){let j=NA.__wbg_get_entrydetails_entry(this.__wbg_ptr);return KT.__wrap(j)}set entry(j){$s(j,KT);var e=j.__destroy_into_raw();NA.__wbg_set_entrydetails_entry(this.__wbg_ptr,e)}get new_bookmark(){let j=NA.__wbg_get_entrydetails_new_bookmark(this.__wbg_ptr);return Ji.__wrap(j)}set new_bookmark(j){$s(j,Ji);var e=j.__destroy_into_raw();NA.__wbg_set_entrydetails_new_bookmark(this.__wbg_ptr,e)}},nDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_groupdetails_free(A>>>0,1)),Hw=class A{static __unwrap(j){return j instanceof A?j.__destroy_into_raw():0}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,nDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_groupdetails_free(j,0)}get uuid(){let j,e;try{let t=NA.__wbg_get_groupdetails_uuid(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}set uuid(j){let e=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),t=Ir;NA.__wbg_set_groupdetails_uuid(this.__wbg_ptr,e,t)}get keyset_uuid(){let j,e;try{let t=NA.__wbg_get_groupdetails_keyset_uuid(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}set keyset_uuid(j){let e=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),t=Ir;NA.__wbg_set_groupdetails_keyset_uuid(this.__wbg_ptr,e,t)}get enc_public_key_bytes(){let j=NA.__wbg_get_groupdetails_enc_public_key_bytes(this.__wbg_ptr);var e=TT(j[0],j[1]).slice();return NA.__wbindgen_free(j[0],j[1]*1,1),e}set enc_public_key_bytes(j){let e=pk(j,NA.__wbindgen_malloc),t=Ir;NA.__wbg_set_groupdetails_enc_public_key_bytes(this.__wbg_ptr,e,t)}get symmetric_key_bytes(){let j=NA.__wbg_get_groupdetails_symmetric_key_bytes(this.__wbg_ptr);var e=TT(j[0],j[1]).slice();return NA.__wbindgen_free(j[0],j[1]*1,1),e}set symmetric_key_bytes(j){let e=pk(j,NA.__wbindgen_malloc),t=Ir;NA.__wbg_set_groupdetails_symmetric_key_bytes(this.__wbg_ptr,e,t)}constructor(j,e,t,r){let a=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),n=Ir,o=ws(e,NA.__wbindgen_malloc,NA.__wbindgen_realloc),i=Ir,s=pk(t,NA.__wbindgen_malloc),l=Ir,d=pk(r,NA.__wbindgen_malloc),k=Ir,u=NA.groupdetails_new(a,n,o,i,s,l,d,k);return this.__wbg_ptr=u>>>0,nDA.register(this,this.__wbg_ptr,this),this}},oDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_recoveryauth_free(A>>>0,1)),Tw=class{__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,oDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_recoveryauth_free(j,0)}constructor(j,e){let t=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),r=Ir,a=ws(e,NA.__wbindgen_malloc,NA.__wbindgen_realloc),n=Ir,o=NA.recoveryauth_new(t,r,a,n);return this.__wbg_ptr=o>>>0,oDA.register(this,this.__wbg_ptr,this),this}},iDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_signedbookmarkbytes_free(A>>>0,1)),KG=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,iDA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,iDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_signedbookmarkbytes_free(j,0)}toBase64Url(){let j,e;try{let t=NA.signedbookmarkbytes_toBase64Url(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}toBase64(){let j,e;try{let t=NA.signedbookmarkbytes_toBase64(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}},sDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_userdetails_free(A>>>0,1)),SG=class A{static __unwrap(j){return j instanceof A?j.__destroy_into_raw():0}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,sDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_userdetails_free(j,0)}get uuid(){let j,e;try{let t=NA.__wbg_get_userdetails_uuid(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}set uuid(j){let e=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),t=Ir;NA.__wbg_set_groupdetails_uuid(this.__wbg_ptr,e,t)}get keyset_uuid(){let j,e;try{let t=NA.__wbg_get_userdetails_keyset_uuid(this.__wbg_ptr);return j=t[0],e=t[1],Ui(t[0],t[1])}finally{NA.__wbindgen_free(j,e,1)}}set keyset_uuid(j){let e=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),t=Ir;NA.__wbg_set_groupdetails_keyset_uuid(this.__wbg_ptr,e,t)}get identity_public_key_bytes(){let j=NA.__wbg_get_userdetails_identity_public_key_bytes(this.__wbg_ptr);var e=TT(j[0],j[1]).slice();return NA.__wbindgen_free(j[0],j[1]*1,1),e}set identity_public_key_bytes(j){let e=pk(j,NA.__wbindgen_malloc),t=Ir;NA.__wbg_set_groupdetails_enc_public_key_bytes(this.__wbg_ptr,e,t)}get seeded_encryption_key_bytes(){let j=NA.__wbg_get_userdetails_seeded_encryption_key_bytes(this.__wbg_ptr),e;return j[0]!==0&&(e=TT(j[0],j[1]).slice(),NA.__wbindgen_free(j[0],j[1]*1,1)),e}set seeded_encryption_key_bytes(j){var e=uk(j)?0:pk(j,NA.__wbindgen_malloc),t=Ir;NA.__wbg_set_userdetails_seeded_encryption_key_bytes(this.__wbg_ptr,e,t)}constructor(j,e,t,r){let a=ws(j,NA.__wbindgen_malloc,NA.__wbindgen_realloc),n=Ir,o=ws(e,NA.__wbindgen_malloc,NA.__wbindgen_realloc),i=Ir,s=pk(t,NA.__wbindgen_malloc),l=Ir;var d=uk(r)?0:pk(r,NA.__wbindgen_malloc),k=Ir;let u=NA.userdetails_new(a,n,o,i,s,l,d,k);return this.__wbg_ptr=u>>>0,sDA.register(this,this.__wbg_ptr,this),this}},lDA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>NA.__wbg_wasmtrustlogclient_free(A>>>0,1)),ST=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,lDA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,lDA.unregister(this),j}free(){let j=this.__destroy_into_raw();NA.__wbg_wasmtrustlogclient_free(j,0)}static new(j,e,t,r){let a=ws(e,NA.__wbindgen_malloc,NA.__wbindgen_realloc),n=Ir,o=pk(t,NA.__wbindgen_malloc),i=Ir,s=pk(r,NA.__wbindgen_malloc),l=Ir,d=NA.wasmtrustlogclient_new(j,a,n,o,i,s,l);if(d[2])throw CT(d[1]);return A.__wrap(d[0])}require_signatures(){return NA.wasmtrustlogclient_require_signatures(this.__wbg_ptr)}create_add_users_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_add_users_entry(this.__wbg_ptr,t,r,a)}create_update_users_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_update_users_entry(this.__wbg_ptr,t,r,a)}create_remove_users_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_remove_users_entry(this.__wbg_ptr,t,r,a)}create_remove_seeded_encryption_keys_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_remove_seeded_encryption_keys_entry(this.__wbg_ptr,t,r,a)}create_add_groups_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_add_groups_entry(this.__wbg_ptr,t,r,a)}create_update_groups_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_update_groups_entry(this.__wbg_ptr,t,r,a)}create_remove_groups_entry(j,e){let t=iq(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();return NA.wasmtrustlogclient_create_remove_groups_entry(this.__wbg_ptr,t,r,a)}get_bookmark(){return NA.wasmtrustlogclient_get_bookmark(this.__wbg_ptr)}fast_forward(j){$s(j,Ji);var e=j.__destroy_into_raw();return NA.wasmtrustlogclient_fast_forward(this.__wbg_ptr,e)}sign_bookmark(j){$s(j,Ji);var e=j.__destroy_into_raw();let t=NA.wasmtrustlogclient_sign_bookmark(this.__wbg_ptr,e);if(t[2])throw CT(t[1]);return KG.__wrap(t[0])}sign_bookmark_with_key(j,e){let t=pk(j,NA.__wbindgen_malloc),r=Ir;$s(e,Ji);var a=e.__destroy_into_raw();let n=NA.wasmtrustlogclient_sign_bookmark_with_key(this.__wbg_ptr,t,r,a);if(n[2])throw CT(n[1]);return KG.__wrap(n[0])}sign_and_submit_bookmark(j){$s(j,Ji);var e=j.__destroy_into_raw();return NA.wasmtrustlogclient_sign_and_submit_bookmark(this.__wbg_ptr,e)}create_recovery_bookmark(j){$s(j,Tw);var e=j.__destroy_into_raw();return NA.wasmtrustlogclient_create_recovery_bookmark(this.__wbg_ptr,e)}write_local_bookmark(j){$s(j,KG);var e=j.__destroy_into_raw();let t=NA.wasmtrustlogclient_write_local_bookmark(this.__wbg_ptr,e);if(t[1])throw CT(t[0])}};async function yIj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function $Ij(){let A={};return A.wbg={},A.wbg.__wbg_String_8f0eb39a4a4c2f66=function(j,e){let t=String(e),r=ws(t,NA.__wbindgen_malloc,NA.__wbindgen_realloc),a=Ir;kk().setInt32(j+4*1,a,!0),kk().setInt32(j+4*0,r,!0)},A.wbg.__wbg_bookmark_new=function(j){return Ji.__wrap(j)},A.wbg.__wbg_buffer_609cc3eee51ed158=function(j){return j.buffer},A.wbg.__wbg_call_672a4d21634d4a24=function(){return oq(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_7cccdd69e0791ae2=function(){return oq(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_done_769e5ede4b31c67b=function(j){return j.done},A.wbg.__wbg_entrydetails_new=function(j){return mAA.__wrap(j)},A.wbg.__wbg_error_f1c7f60980cd4558=function(j,e){console.error(Ui(j,e))},A.wbg.__wbg_getItem_17f98dee3b43fa7e=function(){return oq(function(j,e,t,r){let a=e.getItem(Ui(t,r));var n=uk(a)?0:ws(a,NA.__wbindgen_malloc,NA.__wbindgen_realloc),o=Ir;kk().setInt32(j+4*1,o,!0),kk().setInt32(j+4*0,n,!0)},arguments)},A.wbg.__wbg_getTime_46267b1c24877e30=function(j){return j.getTime()},A.wbg.__wbg_get_67b2ba62fc30de12=function(){return oq(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_get_b9b93047fe3cf45b=function(j,e){return j[e>>>0]},A.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(j,e){return j[e]},A.wbg.__wbg_groupdetails_unwrap=function(j){return Hw.__unwrap(j)},A.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(j){let e;try{e=j instanceof ArrayBuffer}catch{e=!1}return e},A.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(j){let e;try{e=j instanceof Uint8Array}catch{e=!1}return e},A.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(j){let e;try{e=j instanceof Window}catch{e=!1}return e},A.wbg.__wbg_isArray_a1eab7e0d067391b=function(j){return Array.isArray(j)},A.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(j){return Number.isSafeInteger(j)},A.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},A.wbg.__wbg_length_a446193dc22c12f8=function(j){return j.length},A.wbg.__wbg_length_e2d2a49132c1b256=function(j){return j.length},A.wbg.__wbg_localStorage_1406c99c39728187=function(){return oq(function(j){let e=j.localStorage;return uk(e)?0:lq(e)},arguments)},A.wbg.__wbg_new0_f788a2397c7ca929=function(){return new Date},A.wbg.__wbg_new_23a2665fac83c611=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return bIj(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},A.wbg.__wbg_new_78feb108b6472713=function(){return new Array},A.wbg.__wbg_new_a12002a7f91c75be=function(j){return new Uint8Array(j)},A.wbg.__wbg_newnoargs_105ed471475aaf50=function(j,e){return new Function(Ui(j,e))},A.wbg.__wbg_next_25feadfc0913fea9=function(j){return j.next},A.wbg.__wbg_next_6574e1a8a62d1055=function(){return oq(function(j){return j.next()},arguments)},A.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_d3219def82552485=function(j){return j.queueMicrotask},A.wbg.__wbg_resolve_4851785c9c5f573d=function(j){return Promise.resolve(j)},A.wbg.__wbg_setItem_212ecc915942ab0a=function(){return oq(function(j,e,t,r,a){j.setItem(Ui(e,t),Ui(r,a))},arguments)},A.wbg.__wbg_set_37837023f3d740e8=function(j,e,t){j[e>>>0]=t},A.wbg.__wbg_set_3f1d0b984ed272ed=function(j,e,t){j[e]=t},A.wbg.__wbg_set_65595bdd868b3009=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_signedbookmarkbytes_new=function(j){return KG.__wrap(j)},A.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let j=typeof global>"u"?null:global;return uk(j)?0:lq(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let j=typeof globalThis>"u"?null:globalThis;return uk(j)?0:lq(j)},A.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let j=typeof self>"u"?null:self;return uk(j)?0:lq(j)},A.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let j=typeof window>"u"?null:window;return uk(j)?0:lq(j)},A.wbg.__wbg_then_44b73946d2fb3e7d=function(j,e){return j.then(e)},A.wbg.__wbg_then_48b406749878a531=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_userdetails_unwrap=function(j){return SG.__unwrap(j)},A.wbg.__wbg_value_cd1ffa7b1ab794f1=function(j){return j.value},A.wbg.__wbindgen_as_number=function(j){return+j},A.wbg.__wbindgen_boolean_get=function(j){let e=j;return typeof e=="boolean"?e?1:0:2},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper519=function(j,e,t){return GIj(j,e,137,FIj)},A.wbg.__wbindgen_debug_string=function(j,e){let t=pAA(e),r=ws(t,NA.__wbindgen_malloc,NA.__wbindgen_realloc),a=Ir;kk().setInt32(j+4*1,a,!0),kk().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(Ui(j,e))},A.wbg.__wbindgen_in=function(j,e){return j in e},A.wbg.__wbindgen_init_externref_table=function(){let j=NA.__wbindgen_export_4,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_jsval_loose_eq=function(j,e){return j==e},A.wbg.__wbindgen_memory=function(){return NA.memory},A.wbg.__wbindgen_number_get=function(j,e){let t=e,r=typeof t=="number"?t:void 0;kk().setFloat64(j+8*1,uk(r)?0:r,!0),kk().setInt32(j+4*0,!uk(r),!0)},A.wbg.__wbindgen_number_new=function(j){return j},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=uk(r)?0:ws(r,NA.__wbindgen_malloc,NA.__wbindgen_realloc),n=Ir;kk().setInt32(j+4*1,n,!0),kk().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return Ui(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(Ui(j,e))},A}function wIj(A,j){return NA=A.exports,dDA.__wbindgen_wasm_module=j,sq=null,Cw=null,NA.__wbindgen_start(),NA}async function dDA(A){if(NA!==void 0)return NA;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof A>"u"&&(A=new URL("b5_trustlog_bg.wasm",import.meta.url));let j=$Ij();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await yIj(await A,j);return wIj(e,t)}var kDA=dDA;var pm,mm=class{constructor(j,e){this.isPkvEnabled=async()=>{if(this.pkvEnabled===void 0){let t=await this.client.get_bookmark();this.pkvEnabled=!!t}return this.pkvEnabled},this.requireSignatures=async()=>{if(!await this.isPkvEnabled())try{let t=await this.client.require_signatures();await HZ(this.session,{trustLogEntry:t.entry.toBase64Url()}),await this.signAndSubmitBookmark(t.new_bookmark),this.pkvEnabled=!0}catch(t){throw console.error("requireSignatures failed:",t),t}},this.createAddUsersEntry=async(t,r)=>{let a=await Promise.all(t.map(async n=>{if(!n.identityPublicKey.key)throw new Error("Missing identity public key.");let o=new Uint8Array(await we.exportKey("spki",n.identityPublicKey.key));if(!n.encryptionPublicKey?.key)throw new Error("Missing encryption public key.");let i=new Uint8Array(await we.exportKey("spki",n.encryptionPublicKey.key));return new SG(n.uuid,n.keysetUuid,o,i)}));try{return await this.client.create_add_users_entry(a,r)}catch(n){throw console.error("createAddUsersEntry failed:",n),n}},this.createUpdateUsersEntry=async(t,r)=>{let a=await Promise.all(t.map(async n=>{if(!n.identityPublicKey.key)throw new Error("Missing identity public key.");let o=new Uint8Array(await we.exportKey("spki",n.identityPublicKey.key)),i=n.encryptionPublicKey?.key&&new Uint8Array(await we.exportKey("spki",n.encryptionPublicKey.key));return new SG(n.uuid,n.keysetUuid,o,i)}));try{return await this.client.create_update_users_entry(a,r)}catch(n){throw console.error("createUpdateUsersEntry failed: ",n),n}},this.createRemoveUsersEntry=async(t,r)=>{try{return await this.client.create_remove_users_entry(t,r)}catch(a){throw console.error("createRemoveUsersEntry failed: ",a),a}},this.createAddGroupsEntry=async(t,r)=>{let a=await Promise.all(t.map(async n=>{if(!n.encryptionPublicKey.key)throw new Error("Missing encryption public key.");let o=new Uint8Array(await we.exportKey("spki",n.encryptionPublicKey.key));if(!n.symmetricKey.key)throw new Error("Missing symmetric key.");let i=new Uint8Array(await we.exportKey("raw",n.symmetricKey.key));return new Hw(n.uuid,n.keysetUuid,o,i)}));try{return this.client.create_add_groups_entry(a,r)}catch(n){throw console.error("createAddGroupsEntry failed:",n),n}},this.createRemoveGroupsEntry=async(t,r)=>{try{return await this.client.create_remove_groups_entry(t,r)}catch(a){throw console.error("createRemoveGroupsEntry failed: ",a),a}},this.getBookmark=async()=>{try{return await this.client.get_bookmark()}catch(t){throw console.error("getBookmark failed: ",t),t}},this.fastForward=async t=>{try{return await this.client.fast_forward(t)}catch(r){throw console.error("fastForward failed: ",r),r}},this.signBookmark=async t=>{try{return this.client.sign_bookmark(t)}catch(r){throw console.error("signBookmark failed: ",r),r}},this.signBookmarkWithKey=async(t,r)=>{if(!t.key)throw new Error("Missing symmetric key.");let a=new Uint8Array(await we.exportKey("raw",t.key));try{return this.client.sign_bookmark_with_key(a,r)}catch(n){throw console.error("signBookmarkWithKey failed: ",n),n}},this.signAndSubmitBookmark=async t=>{try{return await this.client.sign_and_submit_bookmark(t)}catch(r){throw console.error("signAndSubmitBookmark failed: ",r),r}},this.getLatestBookmark=async()=>{let t=await this.getBookmark();if(!t)throw new Error("Bookmark not found");return this.fastForward(t)},this.createRecoveryBookmark=async t=>{let r=new Tw(t.userUuid,t.token);try{return await this.client.create_recovery_bookmark(r)}catch(a){throw console.error("createRecoveryBookmark failed:",a),a}},this.writeLocalBookmark=t=>this.client.write_local_bookmark(t),this.client=j,this.session=e}static async getInstance(j){return pm.instance?await pm.instance:(pm.instance=pm.init(j),pm.instance)}static async getInstanceIfEnabled(j){if(!j.account?.hasUnleashFeature["b5-public-key-verification"])return;let e=await pm.getInstance(j);if(await e.isPkvEnabled())return e}static clearInstance(){pm.instance=void 0}};pm=mm;mm.instance=void 0;mm.init=async A=>{await OIj();let j=A.user?.uuid;if(!j)throw new Error("Missing user UUID.");let e=A.user?.activeKeyset?.skeyPair?.priKey?.key;if(!e)throw new Error("Missing identity key.");let t=new Uint8Array(await we.exportKey("pkcs8",e)),r=A.user?.activeKeyset?.symKey.key;if(!r)throw new Error("Missing symmetric key.");let a=new Uint8Array(await we.exportKey("raw",r)),n=ST.new(CZ(A.session),j,t,a);return new pm(n,A.session)};var OIj=My(kDA,async()=>{let{default:A}=await Promise.resolve().then(()=>W(uDA()));return A}),Xu=async(A,j,e,t=3)=>{let r=await mm.getInstanceIfEnabled(A);return r?MT(async()=>{let a=await r.getLatestBookmark(),n=await j(r,a),o=await e(n.entry.toBase64Url());try{await r.signAndSubmitBookmark(n.new_bookmark)}catch(i){console.error("Failed to save bookmark.",i)}return o},t):e()},MT=async(A,j=3)=>{let e=1;for(;;)try{return await A()}catch(t){if(q.errors.isServerError(t,q.errors.ServerErrorReason.trustLogConflict,q.errors.HTTPStatusCode.preconditionFailed)&&e<j){console.warn("Failed to update trust log due to conflict",t),e+=1;continue}throw t}};var PIj="action/pub_key",CIj=rj(PIj),pDA=195,MG=(A,j)=>{let e=Ia(A,"uuid");return j.map(t=>{let r=e[t.uuid];if(r===void 0)throw new Error("mergeInPubKeys: accessor not found");return{...r,pubKey:t.pubKey,spubKey:t.spubKey}})},ac=async(A,j)=>{let e=Lr(j.map(ko));return e.length===0?[]:K6(async r=>CX(A.session,r),pDA,e)},EAA=async(A,j)=>CIj("getGroupPubKeys",async()=>{let e=Lr(j.map(zd));return e.length===0?[]:K6(async r=>Jz(A.session,r),pDA,e)});var HIj="action/group_membership",_T=rj(HIj),Kw=100,zB=async(A,j,e,t)=>_T("createGroupMembership",async()=>Vu(A,e).then(async r=>e.createMembership(r,j,t))),TIj=async(A,j)=>_T("updateGroupMembershipRole",async()=>Zz(A.session,j.memberUuid,j.groupUuid,j.role).then(()=>cr(A))),cq=async(A,j)=>_T("updateGroupMemberships",async()=>{let{add:e,remove:t,group:r}=j;if(e.length+t.length===0)return{currentUserMustResetPassword:!1};let a=await Na(A,r),n=await Vu(A,a),o=async l=>{let d=await ac(A,e.map(u=>u.uuid)),k=Ia(d,"uuid");return Promise.all(l.map(async u=>{let m=k[u.uuid];if(m===void 0)throw new Error("updateGroupMemberships: userPubKey undefined");return{memberUuid:u.uuid,keyset:await KIj(n,m),role:u.role||sr.Role.Member}}))},i=FO(wo(e,Kw),wo(t,Kw),(l,d)=>({add:l&&o(l)||[],remove:d&&d.map(ko)||[]})),s=[];for(let l of i){let k={add:await l.add,remove:l.remove},u=await AR(A.session,a.uuid,k);s=[...s,u]}return a.hasPermission(rt.Recover)&&A.account&&(A.account.hasRecoveryMembers=!0),cr(A),{currentUserMustResetPassword:s.some(l=>!!l.currentUserMustResetPassword)}}),LT=async(A,j)=>_T("updateUserMemberships",async()=>{let{add:e,remove:t,user:r}=j;if(e.length+t.length===0)return{currentUserMustResetPassword:!1};let a=ko(r),[n]=await ac(A,[a]);if(!n||n.uuid!==a)throw new Error("Missing user's public key.");let o=async l=>{let d=await Na(A,l.uuid);return zB(A,n,d,{role:l.role||sr.Role.Member})},i=FO(wo(e,Kw),wo(t,Kw),(l,d)=>({add:l&&l.map(o)||[],remove:d&&d.map(zd)||[]})),s=[];for(let l of i){let k={add:await Promise.all(l.add),remove:l.remove},u=await jR(A.session,a,k);s=[...s,u]}return cr(A),{currentUserMustResetPassword:s.some(l=>!!l.currentUserMustResetPassword)}}),KIj=async(A,j)=>{let e=await Uh(j.pubKey);return A.encryptWithKey(e)};var _G="action/vault",kq=rj(_G),mDA={attrs:ej.Attr.None,mustReload:!1},SIj={mustReload:!1,withAccessorPreviews:!1},mk=ys(),dq=ys(),MIj=async(A,j)=>{let{hasClientAccess:e,permissions:t,types:r,usePostRequest:a=!1}=j,n=!!(t&&Xj.includes(t,le.ReadItem)),o={...mDA,...j,permission:n?"read":void 0};return(await jo([_G,"getVaultsV2",A.id,JSON.stringify(o)],async()=>{let s=a?await Bz(A.session,o):await AC(A.session,o);return await KB(A,s)},j.cacheAllowanceMs)).filter(s=>(!e||s.hasClientAccess(Zh.Web))&&(!r||r.includes(s.type))&&(!t||ej.activeUserHasAcl(s,t))&&!wvA(s.name,A.account?.features["hide-lastpass-importer-metadata-vault"]))};var _Ij=async(A,j,e,t)=>jo([_G,"getVaultsV2",A.id,JSON.stringify({...t,date:j,direction:e})],async()=>{let{vaults:r,hasMoreData:a}=await hz(A.session,j,e,t||{}),n=await KB(A,r);return{hasMoreData:a,vaults:n}}),RB=async(A,j)=>kq("getVaults",async()=>{let e={...SIj,...j},{mustReload:t,withAccessorPreviews:r}=e;if(!t){let a=r?dq.getAllEntries(A.id):mk.getAllEntries(A.id)||dq.getAllEntries(A.id);if(a)return a}return jo([_G,"getVaults",A.id],async()=>AC(A.session,{withAccessorPreviews:r}).then(async a=>Promise.all([KB(A,a),Date.now()])).then(([a,n])=>{let o=Ia(a,"uuid");return r?dq=dq.withOnlyEntries(A.id,o,{timestamp:n}):mk=mk.withOnlyEntries(A.id,o,{timestamp:n}),a}))}),Yu=async(A,j,e)=>kq("getVault",async()=>{let t=Iy(j);if(!t)throw new Error("Invalid vault reference");let{attrs:r,mustReload:a}={...mDA,...e},n=a?void 0:mk.getEntry(A.id,t,{attrMask:r});return n&&n.hasAttrMask(r)?n:jo([_G,"getVault",A.id,t],async()=>qz(A.session,t,r).then(async o=>Promise.all([bs(A,o,r,n),Date.now()])).then(([o,i])=>(mk=mk.withEntries(A.id,{[t]:o},{attrMask:r,timestamp:i}),o)))}),LIj=new Map([[ej.TypePersonal,fz],[ej.TypeEveryone,Gz],[ej.TypeSystem,vz],[ej.TypeManagedApplications,xz],[ej.TypeGeneratedPasswords,Fz]]),Wu=ys(),Sw=async(A,j,e)=>{let t=LIj.get(j);if(!t)throw new Error("Unsupported vault type.");if(!e||!e.mustReload){let n=Wu.getEntry(A.id,j);if(n)return n}let r=await t(A.session);if(!r)return;let a=await bs(A,r);return Wu=Wu.withEntries(A.id,{[j]:a}),a},Em=async(A,j)=>Sw(A,ej.TypeEveryone,j),Bm=async(A,j)=>Sw(A,ej.TypePersonal,j),NIj=async A=>jo([_G,"getVaultsForAccountTransfer",A.id],async()=>{let j=await gz(A.session);return KB(A,j)}),zIj=A=>Wu.getEntry(A.id,ej.TypePersonal),Ek=async A=>Sw(A,ej.TypeSystem),uq=async A=>kq("createSystemVault",async()=>{if(!A.user)throw new Error("Missing user");let{mandatoryGroupUuids:j}=await zT(A,ej.TypeSystem),e=new ej({desc:ej.DefaultDescMarker,name:"System",type:ej.TypeSystem});await e.generateNewKey();let t=await EDA(A,e,j),{uuid:r}=await pq(A,e,t),a=await Yu(A,r,{attrs:ej.Attr.All,mustReload:!0});return Wu=Wu.withEntries(A.id,{[ej.TypeSystem]:a}),a}),RIj=async A=>kq("createManagedVault",async()=>{if(!A.user)throw new Error("Missing user");let{mandatoryGroupUuids:j}=await zT(A,ej.TypeManagedApplications),e=new ej({desc:ej.DefaultDescMarker,name:"Managed",type:ej.TypeManagedApplications});await e.generateNewKey();let t=await JIj(A,e,j),r=await pq(A,e,t);return Wu=Wu.withEntries(A.id,{[ej.TypeManagedApplications]:r}),r}),NT=async A=>Sw(A,ej.TypeGeneratedPasswords),Mw=async A=>kq("createGeneratedPasswordsVault",async()=>{if(!A.user)throw new Error("Missing user");let{mandatoryGroupUuids:j}=await zT(A,ej.TypeGeneratedPasswords),e=new ej({desc:ej.DefaultDescMarker,name:"Generated Passwords",type:ej.TypeGeneratedPasswords});await e.generateNewKey();let t=await EDA(A,e,j),r=await pq(A,e,t);return Wu=Wu.withEntries(A.id,{[ej.TypeGeneratedPasswords]:r}),r}),EDA=async(A,j,e)=>{if(!A.user)throw new Error("Missing user");return Promise.all([ft.generate(j,A.user,{acl:le.DEFAULT_VAULT_CREATION_ACL}),...e.map(JT(A,j))])},JIj=async(A,j,e)=>{if(!A.user)throw new Error("Missing user");return Promise.all([ft.generate(j,A.user,{acl:le.MANAGED_VAULT_ACL}),...e.map(JT(A,j))])},zT=async(A,j)=>kq("getCreateVaultPreflight",async()=>$z(A.session,j)),BAA=async A=>wz(A.session),UIj=async(A,j,e)=>{let t=new ej(j);if(await t.generateNewKey(),!A.user)throw new Error("Missing user");let r=A.user.type!==Yj.Type.ExternalAccountManagement,a=await Promise.all([...r?[ft.generate(t,A.user,{acl:le.ALL})]:[],...e.map(JT(A,t))]);return pq(A,t,a)},RT=async A=>{let{user:j,account:e}=A;if(!j)throw new Error("Missing user.");if(!e)throw new Error("Missing account.");let t=mq(e.type),r=await ro(A,{attrs:wA.Attr.PubKey});await t.generateNewKey();let a=[ft.generate(t,j,{acl:le.RWE|le.Manage}),ft.generate(t,r,{acl:le.Recover})],n=await Promise.all(a);return lk(t,n)},gAA=async(A,j,e)=>{let t={...j,type:ej.TypeUserCreated},r=new ej(t);if(await r.generateNewKey(),!A.user)throw new Error("Missing user");let a=await Promise.all([ft.generate(r,A.user,{acl:le.ALL}),...e.map(JT(A,r))]);return VIj(A,r,a)},XIj={[wA.TypeRecovery]:le.Recover,[wA.TypeOwners]:le.Manage,[wA.TypeAdmins]:le.Manage,[wA.TypeExternalAccountManagers]:le.Manage},JT=(A,j)=>async e=>{let t=await Na(A,e,{attrs:wA.Attr.PubKey}),r=XIj[t.type];if(typeof r!="number"||r===0)throw new Error("System group ACL is not defined for this group");return ft.generate(j,t,{acl:r})},_w=async(A,j,e)=>{if(await j.encryptAttrs(),!A.user)throw new Error("Missing user");if(!A.user.activeKeyset)throw new Error("Missing user");if(!j.activeKey)throw new Error("Missing active key");return await j.activeKey.encryptWithKey(A.user.activeKeyset.ekeyPair),lk(j,e)},BDA=(A,j)=>{A.getCombinedAcl()===void 0&&A.setCombinedAcl(j.reduce((e,t)=>e|t.acl,0))},pq=async(A,j,e)=>{let t=await _w(A,j,e);return await Iz(A.session,t),BDA(j,e),j},VIj=async(A,j,e)=>{let t=await _w(A,j,e);return await Dz(A.session,t),BDA(j,e),j},WIj=async(A,j)=>Oz(A.session,j.uuid),YIj=async(A,j)=>{await Pz(A.session,j.uuid),mk=mk.withoutEntries(A.id,[j.uuid])},UT=async(A,j)=>kq("updateVault",async()=>j.encryptAttrs().then(async e=>bz(A.session,lk(e)))),QIj=async(A,j,e)=>{await yz(A.session,j,e)},ZIj=async(A,j)=>{await Sz(A.session,j.uuid),cr(A)},ADj=async(A,j)=>{await Mz(A.session,j.uuid),cr(A)},jDj=async(A,j)=>{await _z(A.session,j.uuid),cr(A)},eDj=async(A,j)=>{await Lz(A.session,j.uuid),cr(A)},hAA=()=>{mk=ys()},qAA=A=>{mk=mk.withoutContext(A.id)},vAA=()=>{dq=ys()},xAA=A=>{dq=dq.withoutContext(A.id)};var gDA="action/user",No=rj(gDA),NG=15,Bk=ys(),tDj=async(A,j)=>No("updateUser",async()=>{let e=j||A.user;return e?zX(A.session,Iw(e)):Promise.reject(new Error("Missing user"))}),Lw=(A,j)=>Bk.getEntry(A.id,j),rDj=(A,j)=>{Bk=Bk.withOnlyEntries(A.id,Ia(j,"uuid"))},fAA=()=>{Bk=ys()},GAA=A=>{Bk=Bk.withoutContext(A.id)},FAA=(A,j)=>{Bk=Bk.withEntries(A.id,{[j.uuid]:j})},aDj={attrs:Hr.Attr.None,mustReload:!1},Qu=async(A,j,e)=>No("getPerson",async()=>{let t=ko(j);if(!t)throw new Error("Invalid user reference");let{attrs:r,mustReload:a,excludeGroupVaultAccess:n}={...aDj,...e},o=a?void 0:Bk.getEntry(A.id,t,{attrMask:r});return o&&o.hasAttrMask(r)?o:jo([gDA,"getPerson",A.id,t,r],async()=>PX(A.session,t,r,{excludeGroupVaultAccess:n}).then(async i=>{let s=Date.now();return Promise.all([ck(A,i,r,o),s])}).then(([i,s])=>{let l=n?r^Hr.Attr.VaultAccess:r;return Bk=Bk.withEntries(A.id,{[t]:i},{attrMask:l,timestamp:s}),i}))}),hDA=async(A,j)=>{let e=await ac(A,j);return MG(j,e)},nDj=async(A,j,e)=>No("confirmUsers",async()=>{if(!f0(j)){if(A.account&&A.account.hasFeature.members)A.account.teamMembersGroup?await iDj(A,j,e):await kDj(A,j);else throw new Error("Cannot confirm members for this account");cr(A),A.nc.emit(Lt.UsersChanged)}}),oDj=25,iDj=async(A,j,e)=>No("confirmWithTeamMembersGroup",async()=>{let t=await gk(A);await K6(async a=>{let n=await hDA(A,a),o=n.filter(s=>s.type===Yj.Type.Regular),i=await lDj(A,o,t);return e?await dDj(A,n,i,e):await cDj(A,n,i),[]},oDj,j)}),sDj=async(A,j)=>{if(!A.account)throw new Error("Failed to get account.");let e=mq(A.account.type,j.avatar),t=ro(A,{attrs:wA.Attr.PubKey}),r=gk(A,{attrs:wA.Attr.PubKey}),a=e.generateNewKey(),[n,o]=await Promise.all([t,r,a]),i=zB(A,j,o,{role:sr.Role.Member}),s=ft.generate(e,j,{acl:le.RWE|le.Manage}),l=ft.generate(e,n,{acl:le.Recover}),[d,k,u]=await Promise.all([i,s,l]),m=await _w(A,e,[k,u]);return RX(A.session,j.uuid,m,d)},lDj=async(A,j,e)=>No("addMembersToGroup",async()=>{let t=await Vu(A,e);return Promise.all(j.map(async r=>e.createMembership(t,r,{role:sr.Role.Member})))}),bAA=A=>async(j,e)=>{let t=await vDA(A);return j.createAddUsersEntry(t,e)},cDj=async(A,j,e)=>No("confirmWithGroupMemberships",async()=>{let t=Lr(j.map(ko));return Xu(A,bAA(j),r=>TX(A.session,t,e,r))}),dDj=async(A,j,e,t)=>No("confirmWithGroupMembershipsAndVaults",async()=>{let r=Lr(j.map(o=>ko(o.uuid))),a=wL(o=>o.uuid,o=>o,j),n=[];for(let o of t){let i=await Yu(A,o.vaultUuid,{attrs:ej.Attr.All});if(!i)throw new Error(`Missing vault for ${o.vaultUuid}`);let s=a[o.accessorUuid];s?.type===Yj.Type.Regular&&n.push(await ft.generate(i,{...s,accessorType:o.accessorType},{acl:o.acl}))}return Xu(A,bAA(j),o=>SX(A.session,r,e,n,o))}),kDj=async(A,j)=>No("confirmWithEveryoneVault",async()=>{let e=await Em(A,{attrs:ej.Attr.All});if(!e)throw new Error("Missing Everyone vault");let t=await hDA(A,j),r=t.filter(i=>i.type===Yj.Type.Regular).map(async i=>ft.generate(e,{...i,accessorType:"user"},{acl:le.RWE})),n=(await Promise.all(r)).map(Bl),o=Lr(t.map(ko));return Xu(A,bAA(t),i=>KX(A.session,o,n,i))}),qDA=async(A,j)=>No("suspendUsers",async()=>{await K6(async t=>(await MX(A.session,t),[]),NG,j.map(ko)),cr(A),A.nc.emit(Lt.UsersChanged)}),uDj=async(A,j)=>No("markAwayForTravel",async()=>_X(A.session,j.map(ko)).then(()=>{cr(A),A.nc.emit(Lt.UsersChanged)})),pDj=async(A,j)=>No("markBackFromTravel",async()=>LX(A.session,j.map(ko)).then(()=>{cr(A),A.nc.emit(Lt.UsersChanged)})),mDj=async(A,j)=>No("beginUserRecovery",async()=>{await K6(async t=>(await oW(A.session,t),[]),NG,j.map(ko)),cr(A),A.nc.emit(Lt.UsersChanged)}),XT=async(A,j)=>No("cancelUserRecovery",async()=>{await K6(async t=>(await iW(A.session,t),[]),NG,j.map(ko)),cr(A),A.nc.emit(Lt.UsersChanged)}),EDj=async(A,j)=>No("completeUserRecovery",async()=>{let e=await ac(A,j);await K6(async r=>{let a=r.map(s=>s.uuid),n=await lW(A.session,a),i=await(await QZ(A,n)).encryptForPeople(r);try{await Xu(A,async(s,l)=>{let d=await vDA(r);return s.createUpdateUsersEntry(d,l)},async s=>cH(A.session,a,{...i,trustLogEntry:s}))}catch{await cH(A.session,a,{...i})}return[]},NG,e),cr(A),A.nc.emit(Lt.UsersChanged)}),vDA=async A=>Promise.all(A.map(async j=>{let e=await new k6().import(j.spubKey),t=await Ni(j.pubKey);return{uuid:j.uuid,keysetUuid:e.uuid,identityPublicKey:e,encryptionPublicKey:t}})),BDj=async(A,j)=>No("reactivateUsers",async()=>{await K6(async t=>(await NX(A.session,t),[]),NG,j.map(ko)),cr(A),A.nc.emit(Lt.UsersChanged)}),yAA=async(A,j)=>No("deleteUsers",async()=>{let e=j.filter(a=>a.state===Yj.State.RecoveryStarted),t=j.filter(a=>!Yj.canBeDeleted(a)),r=Promise.resolve();return e.length>0&&(r=r.then(async()=>XT(A,e))),t.length>0&&(r=r.then(async()=>qDA(A,t))),r.then(async()=>K6(async a=>{let n=a.filter(Yj.mustBeRecordedToTrustLogWhenDeleted).map(i=>i.uuid),o=async i=>{let s=a.map(l=>l.uuid);return HX(A.session,{uuids:s,trustLogEntry:i})};return n.length>0?await Xu(A,(i,s)=>i.createRemoveUsersEntry(n,s),o):await o(),[]},NG,j)).then(()=>{cr(A),A.nc.emit(Lt.UsersChanged)})}),gDj=async(A,j,e)=>{let t={...Iw(j),imageId:e};return _$(A.session,t)},hDj=async(A,j,e)=>No("changeUserName",async()=>{let t=p0(Iw(j),{name:e});return M$(A.session,t)}).then(()=>{cr(A),A.nc.emit(Lt.UsersChanged)}),qDj=async(A,j,e)=>No("getRecoveryDetails",async()=>tW(A.session,j,{token:e})),vDj=async(A,j,e)=>rW(A.session,j,{token:e}),xDj=async(A,j,e)=>aW(A.session,j,{token:e}),LG;(function(A){A.INCORRECT_CODE="INCORRECT_CODE",A.ATTEMPT_LIMIT_REACHED="ATTEMPT_LIMIT_REACHED",A.CODE_EXPIRED="CODE_EXPIRED"})(LG||(LG={}));var fDj=async(A,j,e,t)=>nW(A.session,j,{token:e,emailVerificationChallenge:t}).catch(r=>{if(CA.isNewServerError(r))switch(r.reason){case CA.ServerErrorReason.maximumAttemptsReached:return LG.ATTEMPT_LIMIT_REACHED;case CA.ServerErrorReason.incorrectValue:return LG.INCORRECT_CODE;case CA.ServerErrorReason.expired:return LG.CODE_EXPIRED;case void 0:default:throw r}else throw r}),Nw=async(A,j,e,t)=>{let r={email:j,secretKey:await Ba.generate(),password:fe()},a=new eo({...r,uuid:t,name:e,language:A.user?.language||"en",newsletterPrefs:0}),n=await Wr.generate(r);return a.masterKey=await Zt.deriveDefaultKdf(r),await a.generateNewKeyset(),{user:a,userAuth:n}};var VT="Hosted Provisioning";var GDj="action/provision",nc=rj(GDj),$AA=async(A,j,e)=>nc("createProvisionUser",async()=>{let t=A.user;if(!t)return Promise.reject(new Error("Missing user."));if(!t.activeKeyset)return Promise.reject(new Error("Missing active keyset."));let a=j.activeKeyset;if(!a)return Promise.reject(new Error("Missing provision user's active keyset"));let n=A.account;if(!n)return Promise.reject(new Error("Missing account."));let o=n.teamMembersGroup;if(!o)return Promise.reject(new Error("No Team Members group found."));j.uuid=Hr.UUIDNewlyCreatedProvisionUser;let i=new ej({name:"Private",type:ej.TypeProvision,desc:ej.DefaultDescMarker,avatar:j.avatar}),s=ro(A,{attrs:wA.Attr.PubKey}),l=i.generateNewKey(),d=Em(A,{attrs:ej.Attr.All}),k=zw(A,{attrs:wA.Attr.PubKey}),u=zB(A,j,o,{role:sr.Role.Member});return Promise.all([s,l,d,k,u]).then(async([m,I,S,f,v])=>{if(f===void 0)return Promise.reject(new Error("Provision Managers group not found."));let P=f.activeKeysetUuid?u6(A,f.activeKeysetUuid):void 0;if(!P)return Promise.reject(new Error("Provision Managers group keyset not found."));let D=ft.generate(i,j,{acl:le.RWE|le.Manage}),C=ft.generate(i,f,{acl:le.RWE}),b=ft.generate(i,m,{acl:le.Recover}),h=a.encryptWithKey(P.symKey);return Promise.all([D,C,b,v,h])}).then(async([m,I,S,f,v])=>{let P={vaults:[Bl(m)],groups:[f]};if(!j.secretKey)return Promise.reject(new Error("Missing Secret Key."));let D={user:{email:j.email,language:j.language,name:j.name,newsletterPrefs:j.newsletterPrefs,externalGUID:j.externalGUID,accountKeyFormat:j.secretKey.format.toString(),accountKeyUuid:j.secretKey.id,avatar:j.avatar},keyset:v,userAuth:Wr.getForUpload(e),vault:lk(i,[I,S]),access:P};return CV(A.session,D)}).then(async m=>{let I=Hr.Attr.VaultAccess|Hr.Attr.PubKey|Hr.Attr.Keysets;return ck(A,m,I,Lw(A,m.uuid))})}),wAA=async(A,j,e)=>nc("startUserProvision",async()=>{let t=j.uuid;await HV(A.session,t,e||{}),cr(A),A.nc.emit(Lt.UsersChanged)}),FDj=async(A,j)=>nc("suspendUserProvision",async()=>{let e=j.uuid;await TV(A.session,e),cr(A),A.nc.emit(Lt.UsersChanged)}),bDj=async(A,j,e)=>nc("getProvisionDetailsV2",async()=>LV(A.session,j,e)),yDj=async(A,j,e)=>nc("sendProvisionStartedConfirmation",async()=>NV(A.session,j,e)),$Dj=async(A,j)=>nc("finishUserConfirmation",async()=>AW(A.session,A.config.host,j)),wDj=async A=>{let j=A.user;if(!j)throw new Error("Missing user.");if(!j.secretKey)throw new Error("Missing Secret Key.");let e=await j.encryptActiveKeysetWithMasterKey(),t=A.userAuth;if(!t)throw new Error("Missing auth for user.");let r=await RT(A),a={accountKeyFormat:j.secretKey.format.toString(),accountKeyUuid:j.secretKey.id,keyset:e,authRegistration:Wr.getForUpload(t),vault:r};return jW(A.session,a)},IDj=async(A,j,e)=>nc("sendProvisionedConfirmation",async()=>zV(A.session,j,e)),DDj=async(A,j,e,t)=>JV(A.session,j,e,t),ODj=async(A,j,e)=>UV(A.session,j,e),PDj=async(A,j,e)=>nc("resendProvisioningEmailVerification",async()=>RV(A.session,j,e)),CDj=async(A,j)=>nc("completeUserProvision",async()=>{let e=VV(A.session,j.uuid).then(async r=>bs(A,r,ej.Attr.None,void 0)).then(async r=>A.account?(r.name=YT(A.account.type),r.type=ej.TypePersonal,r.encryptAttrs()):Promise.reject(new Error("Missing account."))).then(r=>lk(r)),t=YV(A.session,j.uuid).then(async r=>WZ(A,r)).then(async r=>r.encryptForPerson(j));return Promise.all([e,t]).then(async([r,a])=>{let n={provisionedKeys:a,personalVault:r};return WV(A.session,j.uuid,n)}).then(()=>{cr(A),A.nc.emit(Lt.UsersChanged)})}),HDj=async(A,j,e)=>nc("resendUserProvision",async()=>{let t={userUuids:j.map(r=>r.uuid),useToken:e};await KV(A.session,t),cr(A),A.nc.emit(Lt.UsersChanged)}),TDj=async A=>nc("resendAllUsersProvision",async()=>{await SV(A.session),cr(A),A.nc.emit(Lt.UsersChanged)}),KDj=async A=>nc("getResendDetails",async()=>{let j=await MV(A.session);return{lastResendAt:H6(j.lastResendAt),resendAllCooldown:j.resendAllCooldown}}),zw=async(A,j)=>{let e=A.account;if(!e)throw new Error("Missing account.");let t=e.groups.find(r=>!r.isTypeOwners&&!r.isTypeAdmins&&r.hasPermission(rt.ProvisionPeople));if(t)return Na(A,t,j)},SDj=async(A,j,e,t,r,a,n,o)=>{if(!e.ekeyPair.priKey.jwk||!e.symKey.jwk||!e.skeyPair?.priKey?.jwk)throw new Error("Provisioning Service plaintext keyset is missing values");let i={uuid:e.uuid,sn:e.sn,priKey:e.ekeyPair.priKey.jwk,symKey:e.symKey.jwk,signingKey:e.skeyPair?.priKey?.jwk},s=km(t,wA.Attr.PubKey).pubKey;if(!s)throw new Error("Provisioning Group public key not found.");return QV(A.session,A.config.host,{psaKeyset:i,provisioningGroupPublicKey:s,emailDomains:r.split(","),recoveryGroupUuid:a,notificationEmails:n,identityProvider:o},j)},IAA=async(A,j,e)=>ZV(A.session,j,e),MDj=async(A,j,e)=>{if(!A.account||!A.user)throw new Error("Missing account or user.");if(!Yj.isOwner(A.user)&&!Yj.isAdmin(A.user))throw new Error("Must be in the Administrators or Owners group to edit.");return J$(A.session,j,{state:e})},_Dj=async(A,j,e)=>{if(!A.account||!A.user)throw new Error("Missing account or user.");if(!Yj.isOwner(A.user)&&!Yj.isAdmin(A.user))throw new Error("Must be in the Administrators or Owners group to edit.");return await J$(A.session,j,{notificationEmails:e})},LDj=async(A,j,e)=>{if(!A.account||!A.user)throw new Error("Missing account or user.");if(!Yj.isOwner(A.user)&&!Yj.isAdmin(A.user))throw new Error("Must be in the Administrators or Owners group to edit.");if(!A.user.hasPermission(rt.ProvisionPeople))throw new Error("Must be in the Provisioning Managers group to edit.");let[t,r]=await Promise.all([IAA(A,j,[z$.EncryptedPuk]),zw(A,{attrs:wA.Attr.All,mustReload:!0})]);if(!t?.integration?.encryptedPuk)throw new Error("Missing encrypted PUK in integration response.");if(!r?.activeKeysetUuid)throw new Error("Unable to get active keyset from provisioning managers group.");let a=t.integration.encryptedPuk,n=u6(A,r.activeKeysetUuid);if(!n)throw new Error("Unable to find provisioning manager group keyset");let o=await n.decrypt(a),i=Dj("sign"),l=await Q6.rawHkdf(Q6.Sha2Mode.Sha256,new Uint8Array(o),i,new Uint8Array,32),d=V4(e),k=JSON.stringify(d),u=Mp(l,k),m=tj(u),I=await J$(A.session,j,{emailDomains:{list:e,signature:m}});return A.account.attrVersion++,cr(A),to(A),I},NDj=async(A,j,e,t)=>{if(!A.user)throw new Error("Missing user.");let r=await t.encryptCredentialBundle(j),a=await RT(A),n=await t.decryptCredentialBundle(r);A.user.masterKey=n.auk;let o={device:e,deviceCredentials:{v:2,encCredentials:r},vault:a};await XV(A.session,o)},WT=async A=>{let e=(await Y$(A.session)).serviceAccounts.filter(r=>r.serviceAccountType===gt.Provisioning);if(!e)return;let t=e.find(r=>r.name===VT);if(t)return t},zDj=async A=>{let j=await WT(A);return j?(await IAA(A,j.uuid,[])).integration.state:void 0},RDj=async A=>nc("hostedProvisioningIntegrationExists",async()=>_V(A.session)),xDA="opp_",fDA="v1_",GDA=100,JDj=async(A,j,e,t,r)=>{if(e.length===0)return{failedBatches:[]};let a=j.replace(xDA,"").replace(fDA,""),n=0,o=[];return await K6(async s=>{n++;try{await eW(A.session,A.config.host,{apiSecret:a,userUuids:s},t)}catch{o.push([...s])}return r&&r(n),[]},GDA,e),{failedBatches:o}};var DAA="action/group",Rw=gr(DAA),zG=rj(DAA),OAA={attrs:wA.Attr.None},UDj=async(A,j)=>zG("getGroups",async()=>{let{attrs:e,groupUuids:t=[],limit:r,offset:a,search:n,user:o,vault:i,types:s,sort:l,sortDir:d,membershipsOnly:k}={...OAA,...j};return Hh(j?.search)?[]:eC(A.session,e,{groupUuids:t,limit:r,membershipsOnly:k||!1,offset:a,search:n,types:s,sort:l,sortDir:d,user:o,vault:i}).then(async u=>DG(A,u))}),XDj=async(A,j)=>zG("searchGroupsCount",async()=>{let{attrs:e,search:t,user:r,vault:a}={...OAA,...j};return Hh(j?.search)?0:zz(A.session,e,{search:t,user:r,vault:a}).then(async n=>n)}),PAA=async(A,j,e)=>zG("getManagableGroups",async()=>{let{attrs:t}={...OAA,...j};return eC(A.session,t).then(async r=>DG(A,r.filter(a=>e?a.type!==wA.TypeRecovery:a.type!==wA.TypeRecovery&&a.type!==wA.TypeExternalAccountManagers)))}),VDj={attrs:wA.Attr.None,mustReload:!1},Na=async(A,j,e)=>zG("getGroup",async()=>{let t=zd(j);if(!t)throw new Error("Invalid group reference");let{attrs:r,mustReload:a}={...VDj,...e},n=A.account&&A.account.findGroup(t);return n&&!a&&n.hasAttrMask(r)?n:Rz(A.session,t,r).then(async o=>BT(A,o,r,n))}),ro=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.recoveryGroup;if(!e)throw new Error("Missing recovery group");return Na(A,e,j)}).catch(Rw("getRecoveryGroup")),QT=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.administratorsGroup;if(!e)throw new Error("Missing administrators group");return Na(A,e,j)}).catch(Rw("getAdministratorsGroup")),ZT=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.ownersGroup;if(!e)throw new Error("Missing owners group");return Na(A,e,j)}).catch(Rw("getOwnersGroup")),gk=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.teamMembersGroup;if(!e)throw new Error("Missing members group");return Na(A,e,j)}).catch(Rw("getTeamMembersGroup")),WDj=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.securityGroup;if(!e)throw new Error("Missing security group");return Na(A,e,j)}).catch(Rw("getSecurityGroup")),hk=async(A,j,e)=>zG("generateNewKeysetForGroup",async()=>La.generateWithoutSigningKeys().then(async t=>(mT(A,[t]),Promise.resolve().then(async()=>{if(j.activeKeysetUuid){let r=u6(A,j.activeKeysetUuid);return r?(t.sn=r.sn+1,r.encryptWithKey(t.symKey).then(a=>{j.archivedKeysets=[a,...j.archivedKeysets]})):Promise.reject(new Error("Missing current active keyset."))}return t.sn=1,Promise.resolve()}).then(async()=>t.ekeyPair.pubKey?(j.pubKey=t.ekeyPair.pubKey,j.activeKeysetUuid=t.uuid,j.enableKeysetRecovery(t,e)):(Nr(new Pe({errorClass:mn.ValidationError,userUuid:A.user?.uuid?Z(A.user.uuid):void 0,message:E`Missing public key`})),Promise.reject(new Error("Missing public key.")))).then(()=>t)))),CAA=async(A,j)=>{let e=new wA(j),t=await ro(A,{attrs:wA.Attr.PubKey}),r=await hk(A,e,t);return A.user?(A.user.isExternalAccountManagement||await e.addMembership(r,A.user,{role:sr.Role.Manager}),await Xu(A,YDj([{uuid:e.uuid,activeKeyset:r}]),async a=>Zu(A,e,a))):Promise.reject(new Error("Missing user"))},Zu=async(A,j,e)=>{let t=km(j,wA.Attr.All);if(await Vz(A.session,{...t,trustLogEntry:e}),A.account&&A.account.pushGroup(j),A.user){let r=j.getMembership(A.user.uuid);r&&A.user.pushGroupMembership(r)}return j},YDj=A=>async(j,e)=>{let t=await Promise.all(A.map(async r=>({uuid:r.uuid,keysetUuid:r.activeKeyset.uuid,encryptionPublicKey:r.activeKeyset.ekeyPair.pubKey,symmetricKey:r.activeKeyset.symKey})));return j.createAddGroupsEntry(t,e)},QDj=async(A,j)=>{await Xu(A,(e,t)=>e.createRemoveGroupsEntry([j.uuid],t),async e=>Wz(A.session,j.uuid,{trustLogEntry:e})),cr(A),A.account&&A.account.removeGroup(j)},ZDj=async(A,j)=>{await Yz(A.session,j.uuid),cr(A),A.account&&A.account.removeGroup(j)},A8j=async(A,j)=>{let e=await Na(A,j);e!==j&&A.account&&(A.account.removeGroup(e),A.account.pushGroup(j),console.warn(new Error("Stale group reference."))),await Uz(A.session,km(j,wA.Attr.None)),j.attrVersion++,to(A)},RG=async A=>{let j=await ro(A);if(!j.activeKeysetUuid)throw new Error("Missing group's active keyset UUID.");return u6(A,j.activeKeysetUuid)},j8j=async(A,j,e)=>{j=await Na(A,j);let r=(await FDA(A)).includes(j.uuid);if(Xj.includesAny(e,KU)&&r)throw new Error("Cannot add permission to a group managed by a provisioning integration");if(Xj.includesAny(e,zC)&&!j.recoveryKeyset){let a=await RG(A);if(!a)throw new Error("Failed to find Recovery keyset");await JG(A,j,a)}return j.permissions=e,await Xz(A.session,j.uuid,e),j},FDA=async A=>{let j=await WT(A);return j?(await Qu(A,j?.uuid,{attrs:Hr.Attr.Groups,mustReload:!0})).groupMemberships.filter(r=>r.role===sr.Role.Manager).map(r=>r.groupUuid):[]},JG=async(A,j,e)=>{if(j=await Na(A,j,{attrs:wA.Attr.PubKey}),!j.pubKey)throw new Error("Missing group's public key");let t=await e.encryptWithKey(j.pubKey);j.recoveryKeyset=t;let r=km(j,wA.Attr.None);return await eR(A.session,r),j},e8j=async(A,j)=>jo([DAA,"getGroupMemberCSV",A.id],async()=>tR(A.session,j.uuid)),Vu=async(A,j)=>zG("getActiveKeysetForGroup",async()=>{let e=j.activeKeysetUuid;if(!e)return Promise.reject(new Error("Missing group's active keyset UUID."));let t=u6(A,e);return t?Promise.resolve(t):ET(A).then(async()=>{let r=u6(A,e);return r?Promise.resolve(r):Na(A,j,{attrs:wA.Attr.RecoverableKeyset}).then(async a=>{if(a.recoverableKeyset){let n=u6(A,a.recoverableKeyset.encryptedBy);if(n)return a.decryptRecoverableKeyset(n).then(o=>(mT(A,[o]),o))}return Promise.reject(new Error("Missing group's active keyset."))})})}),t8j=async(A,j)=>rR(A.session,{groupUuids:j}),r8j=async(A,j,e)=>aR(A.session,j,{applicationUuids:e});var Eq=async(A,j)=>(await lX(A.session,j)).combinedAccess,Jw;(function(A){A[A.Fulfilled=0]="Fulfilled",A[A.Rejected=1]="Rejected"})(Jw||(Jw={}));var a8j=async A=>yDA(A,Object.values(Li)),yDA=async(A,j)=>{let e=await Promise.all(j.map(async r=>{try{return{status:Jw.Fulfilled,value:await Eq(A,r)}}catch{return{status:Jw.Rejected}}})),t=[];return e.forEach(r=>{r.status===Jw.Fulfilled&&t.push(r.value)}),t},n8j=async(A,j,e,t)=>mX(A.session,j,e,t||{}),HAA=async(A,j,e)=>{let t=j.find(a=>a.uuid===A.encryptedBy);if(!t)throw new Error("None of the keysets match this object data");let r;if(A.data.dataType!==qn.None&&A.data.dataType!==qn.UserManagedServiceAccountCreator){let n=await(await $t().decryptWithKeyset(t,A.data.encKey)).decrypt(A.data.encData);r=sj(n,Ue.pipe(e)).unwrap()}return{objectUuid:A.objectUuid,data:r,acl:A.acl}},XG=async(A,j,e,t)=>{let r=j.data.find(n=>n.objectUuid===e&&n.data.dataType!==qn.None);if(!r)throw new Error("Unable to find object data for uuid");if(SAA(r)){let n=await sk(A,j.keysets);return HAA(r,n,t)}let a=sj(r.data,t).unwrap();return{objectUuid:r.objectUuid,data:a,acl:r.acl}},TAA=async(A,j,e)=>{let t=await eG(A.session,j,e);for(let r of t.requiredGroups){let a=await Na(A,r,{attrs:wA.Attr.PubKey});await Uw(A,j,ui.Manage,a,[],t)}return await VC(A.session,j)},KAA=async(A,j,e,t,r,a=[])=>{let n=await VC(A.session,j);if(n||(n=await TAA(A,j,t)),!n)throw new Error("Unable to get or bootstrap object data preflight.");let o=await UG(j,r.objectUuid,e,r,[...n.accessors,...a]);await uX(A.session,j,{objectUuid:r.objectUuid,data:o})},o8j=async(A,j)=>{let e=[...j.accessors],t=Li.ServiceAccountUserManaged;if(!j.accessors?.length){let r=await TAA(A,t,ui.Manage);if(!r)throw new Error("Unable to get or bootstrap object data preflight.");e=[...r.accessors]}return e.map(r=>({objectType:t,objectUuid:j.uuid,data:{dataType:qn.UserManagedServiceAccountCreator},encryptedBy:r.kid,acl:[_o.ServiceAccountCreatorManaged]}))},$DA=async(A,j,e,t,r)=>{await EX(A.session,j,e,r,t)},UG=async(A,j,e,t,r)=>Promise.all(r.map(async a=>{let n;if(t.data&&i8j(e,t.acl,a.acl)){let o=a.encKeyset?.pubKey||a.pubKey;if(!o)throw new Error("missing encryption public key for ODA");let i=$t();await i.generate(Tt);let s=await i.encrypt(lt(t.data)),l=await Ni(o),d=await i.encryptWithKey(l);n={dataType:e,encKey:d,encData:s}}else n={dataType:qn.None};return{objectType:A,objectUuid:j,data:n,encryptedBy:a.kid,acl:t.acl}})),i8j=(A,j,e)=>A===qn.ConnectCredentialsSigningPrivateKeyToken||A===qn.ConnectCredentialsFull?j.some(r=>r===_o.ServiceAccountTokenCreate)||e.some(r=>r===_o.ServiceAccountTokenCreate||r===ui.Manage):!0,s8j=A=>{let j;switch(A.accessorType){case"group":{j=sl.Group;break}case"user":{j=sl.User;break}default:throw new Error("Accessor type not supported")}return j},Uw=async(A,j,e,t,r,a)=>{if(!t.pubKey)throw new Error("Unable to add object data access for group.");let n=(0,bDA.default)().toISOString(),o=await La.generateWithSigningKeys();o.sn+=1;let i=await o.encryptWithKey(t.pubKey),s={state:AG.Active,objectType:j,accessorUuid:t.uuid,accessorType:s8j(t),kid:o.uuid,pubKey:i.pubKey,encKeyset:i,encryptedBy:t.pubKey.uuid,acl:[e,...r],createdAt:n,updatedAt:n},l=await wDA(A,a,s),d={access:s,data:l};return await cX(A.session,d),s},l8j=async(A,j,e,t)=>dX(A.session,j,e,t),wDA=async(A,j,e)=>{if(!j.keyset)return[];if(!e.encKeyset)throw new Error("Missing encKeyset");let[t]=await sk(A,[j.keyset]);if(t===void 0)throw new Error("reEncryptRequiredData: Error decrypting ODA preflight keyset");return Promise.all(j.data.map(async r=>{if(!SAA(r))return{objectType:r.objectType,objectUuid:r.objectUuid,data:r.data,encryptedBy:e.kid,acl:r.acl};let a=await HAA(r,[t],jZ),[n]=await UG(r.objectType,r.objectUuid,r.data.dataType,a,[e]);if(n===void 0)throw new Error("Error encrypting ODA");return n}))},SAA=A=>"encKey"in A.data&&"encData"in A.data,IDA=async(A,j)=>pX(A.session,j),DDA=async(A,j,e,t)=>eG(A.session,j,e,t),c8j=async(A,j,e,t,r)=>{let a=await Promise.all(j.map(async s=>{let l=await DDA(A,e,ui.Some,s);if(l.existingAccess)return l.existingAccess;let d=await Na(A,s,{attrs:wA.Attr.PubKey});return Uw(A,e,ui.Some,d,[],l)})),n=await Eq(A,e),o=await XG(A,n,t,r),i=await UG(e,t,qn.ConnectCredentialsSigningPrivateKeyToken,o,a);await S$(A.session,e,{objectUuid:t,data:i})},d8j=async(A,j,e,t,r,a)=>{let o=(await kX(A.session,e,sl.Group,j)).access[0];if(o){let i=await Eq(A,e),s=await XG(A,i,t,r);await $DA(A,e,t,j,sl.Group);let l={...s,acl:a},d=await UG(e,t,qn.ConnectCredentialsSigningPrivateKeyToken,l,[o]);try{await S$(A.session,e,{objectUuid:t,data:d})}catch(k){let u=await UG(e,t,qn.ConnectCredentialsSigningPrivateKeyToken,s,[o]);throw await S$(A.session,e,{objectUuid:t,data:u}),k}}},k8j=async(A,j)=>{try{return await gX(A.session,j)}catch(e){let t=CA.getError(e);if(CA.isNewServerErrorWithStatus(t,CA.HTTPStatusCode.notFound))return;if(CA.isNewServerErrorWithStatus(t,CA.HTTPStatusCode.forbidden)){console.warn("Not enough access for getAllObjectDataWithDataSpec1.",t);return}console.error("Failed to getAllObjectDataRecordsWithDataSpec1:",t)}},u8j=async(A,{objectData:j,objectType:e})=>{let t=await Eq(A,e),r=await IDA(A,e);j.map(async a=>{let n=await XG(A,t,a.objectUuid,rT),o=r.access.find(s=>s.kid===a.encryptedBy);if(o===void 0)throw new Error("Error finding matching accessor for ObjectData");let[i]=await UG(e,a.objectUuid,qn.ConnectCredentialsSigningPrivateKeyToken,n,[o]);if(i===void 0)throw new Error("Error encrypting ODA");await BX(A.session,e,a.objectUuid,o.accessorType,o.accessorUuid,{data:i})})};var MAA=async A=>XX(A.session),p8j=async A=>VX(A.session),m8j=async(A,j)=>(j=j||{enabled:!1,lockAfterIdleTimeMin:480},WX(A.session,j));var _AA=async A=>oV(A.session),E8j=async A=>iV(A.session),B8j=async(A,j)=>(j=j||{restrictTo:eH},sV(A.session,j));var g8j=async A=>jV(A.session),h8j=async(A,j)=>(j=j||{enabled:!1},eV(A.session,j));var q8j=async A=>YX(A.session),v8j=async(A,j)=>(j=j||{hideDeveloperTools:!1,hideIntegrations:!1,updatedAt:new Date(Date.now())},QX(A.session,j));var x8j=async A=>ZX(A.session),f8j=async(A,j)=>(j=j||{enabled:!1,allowedAttempts:AH,lockoutPeriodMin:jH},AV(A.session,j));var G8j=A=>A.account?A.account.hasFeature["b5-policies-auto-delete-suspended-users"]:!1,F8j=async A=>tV(A.session),b8j=async(A,j)=>(j=j||{enabled:!1,daysUntilDelete:30},rV(A.session,j));var y8j=async A=>dV(A.session),$8j=async(A,j)=>kV(A.session,j);var w8j=async A=>lV(A.session),I8j=async(A,j)=>(j=j||{mapsEnabled:!1},cV(A.session,j));var D8j=async A=>cA.getExtensionAllowedPolicy(A.session),O8j=async(A,j)=>(j=j||{enabled:!0},cA.updateExtensionAllowedPolicy(A.session,j)),P8j=async A=>cA.getExtensionAllowedPolicyLocked(A.session);var C8j=async A=>cA.getAppLauncherAllowedPolicy(A.session),H8j=async(A,j)=>(j=j||{appLauncherPolicyEnabled:!0,appCatalogUrl:""},cA.updateAppLauncherAllowedPolicy(A.session,j)),T8j=async A=>cA.getAppLauncherAllowedPolicyLocked(A.session);var K8j=async A=>mV(A.session),S8j=async(A,j)=>(j=j||{allowSshBookmarksSyncToDisk:!0},EV(A.session,j));var M8j=async A=>BV(A.session),_8j=async(A,j)=>(j=j||{enabled:!0,enableCliIntegration:!0},gV(A.session,j));var ODA=async A=>cA.getReportingPolicy(A.session),L8j=async(A,j)=>(j=j||{allowedEmailDomains:[],appDiscoveryEnabled:!1},cA.updateReportingPolicy(A.session,j)),LAA=async A=>{let j=!!A.account?.hasUnleashFeature["b5-policies-framework"],e=!!A.account?.hasUnleashFeature["b2b-reporting-policy"],t=!!A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy,r={allowedEmailDomains:[],appDiscoveryEnabled:!1};if(j&&e)r=(await ODA(A)).definition;else if(t){let a=A.account?.settings?.teamMemberPolicies?.allowedWatchtowerDomains?A.account?.settings.teamMemberPolicies.allowedWatchtowerDomains.split(","):[];r={...r,allowedEmailDomains:a}}return r};var YQe={[Se.AutoLock]:MAA,[Se.ReleaseChannels]:_AA},N8j=async(A,j)=>{let e={[Se.AutoLock]:()=>Promise.resolve({enabled:!1,lockAfterIdleTimeMin:10}),[Se.ReleaseChannels]:()=>({restrictTo:200})};if(j in e){let t=e[j];return t()}return Promise.resolve({})},z8j=async A=>qV(A.session),R8j=async(A,{availableInTemplates:j})=>vV(A.session,{availableInTemplates:j});var ed=W(aA());var NAA="action/text",AK,Xw,Vw,Ww,Yw,PDA={},zAA=async A=>rj(NAA)("checkPwnedPasswords",async()=>CDA(A,PY)),CDA=async(A,j)=>{let e=await $A.unsafeHashStringSha1UpperHex(A),t=PDA[e];if(t!==void 0)return t;{let r=e.slice(0,5),a=await j(r),n=Br(a,e);return PDA[e]=n,n}},RAA=()=>Vw||{},JAA=()=>Ww||{},UAA=()=>Yw||{},J8j=async A=>{AK||(AK=await CY(A.config.txtBase),iP(AK))},U8j=()=>{AK=void 0,iP(void 0)},X8j=async A=>(Xw||(Xw=await HY(A.config.txtBase),sP(Xw)),Xw),Qw=async()=>{await HDA(),await KDA(),await MDA()},Zw=()=>{TDA(),SDA(),_DA()},V8j=()=>{Xw=void 0,sP(void 0)},HDA=async()=>{Vw||(Vw=await TY())},W8j=A=>{try{Vw=sj(JSON.parse(A),ed.record(ed.string,ed.number)).unwrap()}catch(j){throw console.error("Unable to import Watchtower data, provided JSON has invalid format.",j),new Error("Provided JSON has invalid format.")}},TDA=()=>{Vw=void 0},KDA=async()=>rj(NAA)("loadTwoFactorSitesList",async()=>{if(!Ww)return KY().then(A=>{Ww=A})}),Y8j=A=>{try{Ww=sj(JSON.parse(A),ed.record(ed.string,ed.string)).unwrap()}catch(j){throw console.error("Unable to import two-factor sites, provided JSON has invalid format.",j),new Error("Provided JSON has invalid format.")}},SDA=()=>{Ww=void 0},MDA=async()=>rj(NAA)("loadPasskeySitesList",async()=>{if(!Yw)return SY().then(A=>{Yw=A})}),Q8j=A=>{try{Yw=sj(JSON.parse(A),ed.record(ed.string,ed.string)).unwrap()}catch(j){throw console.error("Unable to import passkey sites, provided JSON has invalid format.",j),new Error("Provided JSON has invalid format.")}},_DA=()=>{Yw=void 0};var jK=W(Io());var XAA;(function(A){A.Passwords="Passwords"})(XAA||(XAA={}));var LDA="action/hibp",Z8j=rj(LDA),NDA,A1j=async(A,j)=>VY(A.session,j),j1j=async(A,j)=>{let e=await UY(A.session,j);return{...e,users:e.users,breaches:e.breaches.map(t=>({...t,addedDate:mr(t.addedDate),notifiedDate:mr(t.notifiedDate)})),lastRunAt:mr(e.lastRunAt),isTruncated:e.isTruncated,numActive:e.numActive,numInactive:e.numInactive}},e1j=async(A,j,e)=>jo([LDA,"getHibpDomainReportCSV",A.id],async()=>XY(A.session,j,e)),VAA=()=>NDA,t1j=async A=>Z8j("getHibpReport",async()=>JY(A.session).then(j=>{let e=j.map(t=>({...t,addedDate:mr(t.addedDate),notifiedDate:mr(t.notifiedDate)}));NDA=Ia(e,t=>t.domain)}));var r1j="action/vault_item_watchtower",zDA=rj(r1j),a1j=23328e3,n1j=5184e3,o1j=5184e3,i1j=5184e3,s1j=A=>({compromisedDomain:A.compromisedDomain,expired:A.expired,expiringSoon:A.expiringSoon,inactivePasskey:A.inactivePasskey,inactiveTwoFactor:A.inactiveTwoFactor,itemsInWrongAccount:A.itemsInWrongAccount,passwordStrength:A.passwordStrength,reusedPassword:A.reusedPassword,unsecuredWebsite:A.unsecuredWebsite,vulnerablePassword:A.vulnerablePassword}),l1j=async A=>{try{let j=await Promise.all(A.map(zAA));return Br(j,!0)}catch(j){return console.error("Failed to check pwned passwords.",j),!1}},RDA=async(A,j,e,t,r)=>zDA("generateWatchtowerReportForItem",async()=>{let a={};if(A.overview.b5UserUUID)return a;let n=j?l1j:async()=>Promise.resolve(!1),o=r||JDA(A);return n(o).then(i=>{let s=c1j(A);if(s){a.compromisedDomain=s;let u=VAA();u&&u[s]&&(a.hibpReport=u[s])}e&&dN(A,t)&&(a.itemsInWrongAccount=!0),i&&(a.vulnerablePassword=!0);let l=A.username?A.username.value:"";for(let u of o){let m=ff(u,l);(!a.passwordStrength||a.passwordStrength>m)&&(a.passwordStrength=m)}if(A.overview.URLs){for(let u of A.overview.URLs)if(Fp(u.u.toLowerCase(),"http://")){a.unsecuredWebsite=!0;break}}if(A.templateUuid===yj.LoginUuid&&A.overview.URLs&&!k1j(A))for(let u of A.overview.URLs){let m=d1j(u.u);if(m){a.inactiveTwoFactor=m;break}}if(A.templateUuid===yj.LoginUuid&&A.overview.URLs&&!p1j(A))for(let u of A.overview.URLs){let m=u1j(u.u);if(m){a.inactivePasskey=m;break}}let d,k=0;switch(A.templateUuid){case yj.PassportUuid:{let u=dA.findFieldWithName(dA.FieldName.Passport.Expiry,A);u&&(d=dA.getNumberValue(u),k=a1j);break}case yj.DriverLicenseUuid:{let u=dA.findFieldWithName(dA.FieldName.DriverLicense.Expiry,A);u&&(d=(0,jK.default)(dA.getNumberValue(u),"YYYYMM").unix(),k=o1j);break}case yj.CreditCardUuid:{let u=dA.findFieldWithName(dA.FieldName.CreditCard.Expiry,A);u&&(d=(0,jK.default)(dA.getNumberValue(u),"YYYYMM").endOf("month").unix(),k=n1j);break}case yj.MembershipUuid:{let u=dA.findFieldWithName(dA.FieldName.Membership.Expiry,A);u&&(d=(0,jK.default)(dA.getNumberValue(u),"YYYYMM").endOf("month").unix(),k=i1j);break}case void 0:default:break}if(typeof d=="number"&&!Number.isNaN(d)){let u=Math.floor(Date.now()/1e3);u>d?a.expired=!0:u>d-k&&(a.expiringSoon=!0)}return a})}),WAA=async(A,j,e,t)=>zDA("generateWatchtowerReportForItems",async()=>{let r={},a=A.filter(l=>l.state===dA.ItemState.Active),n=zl(Ia(a,"uuid"),l=>JDA(l)),o=p9(l6(n)),i=[];for(;a.length>0;)i.push(a.splice(0,10));let s=Promise.resolve([]);for(let l of i)s=s.then(async()=>{let d=[];for(let k of l)d.push(RDA(k,j,e,t,n[k.uuid]).then(u=>{let m=n[k.uuid];if(m)for(let I of m)(o[I]??0)>1&&(u.reusedPassword=!0);r[k.uuid]=u}));return Promise.all(d)});return s.then(()=>r)}),c1j=A=>{let j=RAA();if(!A.getPassword())return;let e=A.overview?A.overview.URLs:void 0;if(!e)return;let t={};for(let a of e){let n;try{n=new URL(Tp(a.u)).hostname,n=n.replace(/^www\./,"")}catch{continue}let o=j[n];o&&(t[n]=o)}if(Object.keys(t).length===0)return;let r=A.passwordUpdatedAt;if(r)return g9(t,a=>typeof a=="number"&&a>r)},JDA=A=>{let j=[];if(A.templateUuid===yj.LoginUuid||A.templateUuid===yj.PasswordUuid){let e=A.getPassword();e&&(A.overview.url||e.length>6||/\D/.test(e))&&j.push(e)}else if(A.details&&A.details.sections)for(let e of A.details.sections){if(!e.fields)continue;let t=e.fields.filter(r=>r.k===dA.FieldType.Concealed&&Br(r.n,"password"));for(let r of t)r.v&&j.push(dA.getStringValue(r))}return j},d1j=A=>{if(!A)return;let j=JAA();try{let t=new URL(Tp(A)).hostname;if(j[t])return j[t];let r=t.split(".");r.shift();let a=r.join(".");return j[a]?j[a]:void 0}catch{return}},k1j=A=>{if(A.tags.some(j=>!!j&&j.toLowerCase()==="2fa"))return!0;if(!A.details||!A.details.sections)return!1;for(let j of A.details.sections){let e=X6(j.fields,t=>dA.isTotpField(t));if(e&&e.v)return!0}return!1},u1j=A=>{if(!A)return;let j=UAA();try{let t=new URL(Tp(A)).hostname;if(j[t])return j[t];let r=t.split(".");r.shift();let a=r.join(".");return j[a]?j[a]:void 0}catch{return}},p1j=A=>!!A.details.passkey;var UDA=A=>{let j=0,e=0,t=0,r=0,a=0,n=0,o=0,i=0,s=0;return l6(A).forEach(l=>{l&&(t=l.reusedPassword?t+1:t,j=l.compromisedDomain?j+1:j,e=l.vulnerablePassword?e+1:e,l.passwordStrength&&(r=OL(l.passwordStrength,0,t$.WEAK)?r+1:r),a=l.unsecuredWebsite?a+1:a,n=l.inactiveTwoFactor?n+1:n,o=l.expiringSoon?o+1:o,o=l.expired?o+1:o,i=l.itemsInWrongAccount?i+1:i,s+=1)}),{cw:j,vp:e,rp:t,wp:r,uw:a,i2fa:n,exp:o,tot:s,wa:i}},m1j=async(A,j,e,t,r)=>{if(!A.account?.hasBackOfficeFeature.keepAdminWatchtowerReports)return;let a=await bw(A),n=a.watchtowerReportVersion&&a.watchtowerReportVersion===QH&&a.vaults?a.vaults.filter(d=>d.watchtowerReportNeedsUpdating):[];if(n.length===0){r?.(n.length);return}let o;try{o=await mC(A.session)}catch(d){if(ah(d,rh.resourceNotFound,Rl.notFound))return;throw d}let i=A.account.hasBackOfficeFeature.itemsInWrongAccountPolicy,s=(await LAA(A)).allowedEmailDomains;await Qw();let l=async d=>{let k=await e(A,d);if(!k){console.warn("Unable to find vault with uuid:",d);return}let u=["U","E"];if(sN(A.account)&&u.push("P"),u.includes(k.type)){let m=await t(A,k);if(m.length===0)return;let I=await WAA(m,!0,i,s),S=UDA(I),f=await dw(o.pubKey,lt(S)),v={version:QH,vaultContentVersion:k.contentVersion,encData:f};await YR(A.session,k.uuid,v),j&&await Qn(1e3)}};for(let d of n)await l(d.uuid),r?.(n.length);Zw()},YAA=async(A,j,e)=>AJ(A.session,j,e),E1j=async A=>mC(A.session),B1j=async(A,j,e,t)=>{let r=await XDA(A,j);if(e?.(r.reports.length),r.reports.length===0)return{reports:[]};let a=await Eq(A,Li.AdminWatchtowerKeyset),n=a.data.find(s=>s.objectType===Li.AdminWatchtowerKeyset);if(!n?.data)throw new Error("Admin watchtower keyset oda does not exist.");let o=await XG(A,a,n.objectUuid,tT);return{reports:await rAA(A,r.reports,o,t)}},XDA=async(A,j)=>{let e=[],t;do{let r=await QR(A.session,j,t);e.push(...r.reports),t=r.nextStartUuid}while(t);return{reports:e}},g1j=async(A,j)=>ZR(A.session,j),h1j=(A,j)=>{if(j<=0||A<=0)return 0;let e=Math.floor(A/j*100);return Math.min(Math.max(e,1),100)};var VDA="action/msp",Bq=gr(VDA),gq=rj(VDA),WDA=new Set([wA.TypeOwners,wA.TypeAdmins]),q1j=new Set([wA.TypeMSPAdministrators,...Array.from(WDA)]),QAA=async A=>{let j=await ao(A,[Dt.Groups]),e=A.account?.hasBackOfficeFeature.managedServiceProvider?q1j:WDA,t=await La.generateWithSigningKeys();t.sn=1;let r=await Promise.all(j.groups.filter(a=>e.has(a.type)).map(async a=>{if(a=await Na(A,a,{attrs:wA.Attr.PubKey,mustReload:!0}),!a.pubKey)throw new Error("Missing public key");let n=await t.encryptWithKey(a.pubKey);return{accessorUuid:a.uuid,accessorType:sl.Group,encKey:n,encryptedBy:n.encryptedBy}}));return WU(A.session,{access:r})},v1j=async(A,j,e)=>{let t=await hs.generate(),r=await ZDA();return MU(A.session,{companyDetails:j,managedAccountKey:await AI(t,e.pubKey),eamUserKeyset:await r.encryptWithKey(t)})},x1j=async(A,j,e)=>{await _U(A.session,j,e)},YDA=async A=>gq("getUserMspPermissions",async()=>YU(A.session).catch(Bq("getUserMspPermissions"))),f1j=async(A,j)=>{let e=await NU(A.session,{managedAccountUuid:j}),[t]=await sk(A,[e.encryptedByKey]);if(!t)throw new Error("Keyset missing");if(!e.managedAccountKey)throw new Error("Managed Account Keyset missing");let r=await $t(e.managedAccountKey.kid).decryptWithKeyset(t,e.managedAccountKey.encKey);if(!r.jwk)throw new Error("Managed Account Keyset missing");return{type:"transfer_credentials",accountUuid:j,...e,managedAccountKey:r.jwk,languageCode:A.user?.language??"en"}},G1j=(A,j,e,t)=>{let a=`${QDA(A,j)}/launch-ma`;return e?`${a}?landing-page=${e}&l=${t}`:`${a}?l=${t}`},QDA=(A,j)=>`https://${j}.${A.config.server}`,F1j=async(A,j)=>gq("getGroupMspPermissions",async()=>QU(A.session,j).catch(Bq("getGroupMspPermissions"))),b1j=async(A,j,e,t)=>{let r={acl:e};if(e.length!==0){if(!j.pubKey)return Promise.reject(new Error("Missing public key"));let[a]=await sk(A,[t]);if(!a)return Promise.reject(new Error("Keyset missing"));a.sn=1,r.encKey=await a.encryptWithKey(j.pubKey),r.encryptedBy=j.pubKey.uuid}return gq("updateGroupMspPermissions",async()=>AX(A.session,j.uuid,r).catch(Bq("updateGroupMspPermissions")))},y1j=async(A,j)=>gq("getMspLinkRequest",async()=>jX(A.session,j).catch(Bq("getMspLinkRequest"))),$1j=async A=>gq("getLinkRequests",async()=>VU(A.session).catch(Bq("getLinkRequests"))),w1j=async(A,j,e,t)=>{let r=await hs.generate(),a=await ZDA(),n=await La.generateWithoutSigningKeys();n.sn=1;let o=await t.sign(n.ekeyPair.pubKey);return gq("acceptLinkRequest",async()=>eX(A.session,j,{eamGroupKeyset:await n.encryptWithKey(a),eamUserKeyset:await a.encryptWithKey(r),encManagedAccountKey:await AI(r,e.pubKey),groupPublicKeyMac:o}).catch(Bq("acceptLinkRequest")))},I1j=async(A,j)=>gq("declineLinkRequest",async()=>tX(A.session,j).catch(Bq("declineLinkRequest"))),AI=async(A,j)=>{let e=await A.encryptSelfWithKeyset(j);return{kid:A.KID(),encryptedBy:e.kid,encKey:e}},ZDA=async()=>{let A=await La.generateWithSigningKeys();return A.sn=1,A},ZAA=async(A,j,e)=>{try{if(!j||!j.managedAccountKey)throw new Error("Managed account key not found.");let r=(await YDA(A))?.encKeyset;if(!r)throw new Error("No MSP Keyset detected.");let[a]=await sk(A,[r]);if(!a)throw new Error("Failed to decrypt MSP keyset.");let n=await $t(j.managedAccountKey.kid).decryptWithKeyset(a,j.managedAccountKey.encKey);if(!n.jwk)throw new Error("Failed to decrypt managed account key.");let o=await hs.fromJwk(n.jwk);if(!e.pubKey||!e.pubKey.jwk)throw new Error("Missing group public key");return AI(o,e.pubKey.jwk)}catch{throw new Error("Error encrypting managed account key")}},D1j=async(A,j,e)=>{if(!j||!j.managedAccountKey)throw new Error("Managed account key not found.");let t=await $t(j.managedAccountKey.kid).decryptWithKeyset(A,j.managedAccountKey.encKey);if(!t.jwk)throw new Error("Failed to decrypt managed account key.");let r=await hs.fromJwk(t.jwk);if(!e.pubKey||!e.pubKey.jwk)throw new Error("Missing group public key");return AI(r,e.pubKey.jwk)},O1j=async(A,j,e,t)=>{let r={},a=t.filter(n=>n!==Ac.ViewConsole&&n!==Ac.Add);if(a.length===0)return r.remove=[{groupUuid:e.uuid,managedAccountUuid:j.uuid}],r;if(!j||!j.managedAccountKey)throw new Error("Managed account key not found.");if(!e.pubKey||!e.pubKey.jwk)throw new Error("Missing group public key");return r.update=[{groupUuid:e.uuid,managedAccountUuid:j.uuid,acl:a,managedAccountKey:await ZAA(A,j,e)}],r},P1j=async(A,j,e,t)=>{let r={};return t.length>0?r.update=[{groupUuid:j.uuid,managedAccountUuid:e.uuid,acl:t,managedAccountKey:await ZAA(A,e,j)}]:r.remove=[{groupUuid:j.uuid,managedAccountUuid:e.uuid}],r};var A8A="action/vault_item",C1j=gr(A8A),AjA=rj(A8A),j8A=async(A,j,e,t)=>{let r=(await pW(A.session,j.uuid,e)).item;return MB(r,t||j)},e8A=async(A,j)=>Promise.resolve().then(async()=>{if(!j)throw new Error("Missing vault");let e=j.uuid;return kW(A.session,e).then(async t=>SB(t.items||[],j))}).catch(C1j("getVaultItemsOverviews")),td=async(A,j)=>AjA("getVaultItems",async()=>t8A(A,j,0,[]).then(async e=>SB(e,j))),t8A=async(A,j,e,t)=>AjA("getVaultItemsBatch",async()=>uW(A.session,j.uuid,e).then(async r=>{let a=r.items?t.concat(r.items):t;return r.batchComplete?Promise.resolve(a):t8A(A,j,r.contentVersion,a)})),r8A=async(A,j,e)=>{try{let t=await DC(A.session,e,j.uuid,j.vault.uuid);return hT(e,t)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.missingFileId))return a8A(A,j.uuid,j.vault.uuid,e);throw new Error(`Failed to retrieve document: ${t}`)}},a8A=async(A,j,e,t)=>{let r=await MJ(A.session,j,e);for(let a of r)try{let n={...t,..."fileId"in t?{fileId:a}:{documentId:a}},o=await SJ(A.session,n,j,e);return"fileId"in t?OG(t,o):hT(t,o)}catch(n){console.error(`Decryption failed for file ${a}: ${n}. Moving to next file `);continue}throw new Error(`Unable to decrypt any files linked to item ${j}`)},H1j=async(A,j,e)=>{let t=await r8A(A,j,e);return new Blob([t],{type:"application/octet-stream"})},T1j=async(A,j,e)=>{let{data:t,attributes:r}=await zZ(j,e),{fileId:a,signingKey:n}=await PC(A.session,t);if(a)return{...r,documentId:a,signingKey:n};throw new Error("Session did not provide file ID.")},n8A=async(A,j,e)=>{try{let t=await DC(A.session,e,j.uuid,j.vault.uuid);return OG(e,t)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.missingFileId))return a8A(A,j.uuid,j.vault.uuid,e);throw new Error(`Failed to retrieve file: ${t}`)}},K1j=async(A,j)=>{let{data:e,attributes:t}=await JZ(j),{fileId:r,signingKey:a}=await PC(A.session,e);if(r)return{...t,fileId:r,signingKey:a};throw new Error("Session did not provide file ID.")},S1j=async(A,j)=>{if(!j.overview.icons||!j.overview.icons.detail)throw new Error("Missing icon");let e=await n8A(A,j,j.overview.icons.detail);return Eh(new Blob([e]))},gl=async(A,j,e)=>{let t=await Yu(A,e.uuid),r=wo(j,100),a={contentVersion:0,updatedItems:{},failedItems:{}};for(let n of r){let o=await M1j(A,n,t);for(let i of n)o.failedItems&&o.failedItems[i.uuid]||i.itemVersion++;t.contentVersion=o.contentVersion,a.contentVersion=o.contentVersion,a.updatedItems=Cd(a.updatedItems,o.updatedItems),a.failedItems=Cd(a.failedItems,o.failedItems)}if(Pc(a.updatedItems)===0&&Pc(a.failedItems)>0)throw new Error("Failed to patch vault items.");return a},M1j=async(A,j,e)=>{let t=await _1j(A,j),r=await Promise.all(t.map(Dw)),a=await vW(A.session,e.uuid,e.contentVersion,r),n=Pc(a.updatedItems),o=Pc(a.failedItems);if(n===0&&o===1){let i=Object.keys(a.failedItems)[0];if(i!==void 0&&a.failedItems[i]===CA.ItemStatusCode.incorrectItemVersion)throw new Error("This item has been edited by someone else. Refresh and make your edits again.")}else o>0&&console.error(`${o} item(s) failed to save. ${n} item(s) saved successfully.`);return a},_1j=async(A,j)=>{let e=[],t={};for(let a of j){let n=a.details.documentAttributes;if(n&&!n.signingKey){if(!n.documentId)throw new Error("Invalid document item, missing document ID.");t[n.documentId]=n,e.push(OC(A.session,n.documentId))}let o=a.overview&&a.overview.icons&&a.overview.icons.detail;o&&!o.signingKey&&(o.fileId?(t[o.fileId]=o,e.push(OC(A.session,o.fileId))):delete a.overview.icons)}let r=await Promise.all(e);for(let a of r){let n=t[a.fileId];if(!n)throw new Error("Missing file attributes.");n.signingKey=a.signingKey}return j},L1j=async(A,j)=>{if(ej.activeUserHasAcl(j,Xj.combine([le.ViewHistory,le.UpdateItem]))){let{items:t}=await gW(A.session,j.uuid);return SB(t,j)}return[]},N1j=async(A,j,e)=>{await hW(A.session,j.uuid,[e])},z1j=async(A,j)=>await EW(A.session,j.vault.uuid,j.uuid),R1j=async(A,j)=>{await qW(A.session,j.vault.uuid,j.uuid)},J1j=async(A,j,e,t)=>{let r=j.uuid,a=await BW(A.session,r,e.uuid,t);return MB(a,j)},U1j=async A=>AjA("getAllCreditCardItems",async()=>Bm(A)).then(async j=>j?e8A(A,j):Promise.reject(new Error("Missing Personal vault"))).then(async j=>{let t=du(j,r=>r.templateUuid===yj.CreditCardUuid&&r.state===dA.ItemState.Active).map(async r=>j8A(A,r.vault,r.uuid,r));return Promise.all(t)});var o8A="action/package",jjA=gr(o8A),i8A=rj(o8A),ejA=async A=>Promise.resolve().then(async()=>{if(A.account&&!A.account.hasPackages)return Promise.resolve(void 0);let j;return s8A(A,{mustReload:!0}).then(async e=>(j=e,xX(A.session))).then(async e=>Promise.all(pn(e,async t=>fX(A.session,t.uuid)))).then(async e=>Promise.all(pn(e,async t=>qT(A,j,t,async r=>ac(A,r))))).then(async e=>{let t=await Promise.all(pn(e,X1j(A,j))),[r,a]=t.reduce(([n,o],i)=>typeof i=="string"?[[...n,i],o]:[n,[...o,i]],[[],[]]);if(r.length>0&&(await YC(A.session,r),console.warn(`Removed ${r.length} invalid packages`)),a.length>0){let n=await gl(A,a,j);return`${a.length}`,n}})}).catch(jjA("processIncomingPackages")),X1j=(A,j)=>async e=>{if(!e.uuid)throw new Error("Really messed up package, missing UUID");if(!e.item)return console.warn(`Removing package with no item: ${e.uuid}`),e.uuid;let t=e.item.details.documentAttributes;if(t&&!t.documentId)return console.warn(`Removing package with no document ID: ${e.uuid}`),e.uuid;let r=e.item;return r.itemVersion=await mW(A.session,j.uuid,r.uuid),r},V1j=async(A,j,e)=>i8A("sendPackages",async()=>{let t=await ro(A,{attrs:wA.Attr.PubKey}),r=await ac(A,e),a=await W1j(A,j,r,t),n=a.map(XZ);return await vX(A.session,n),a}),W1j=async(A,j,e,t)=>i8A("createPackagesForPeople",async()=>{let r=A.user;if(!r)throw new Error("Missing user");let a=Pd(e.map(n=>j.map(async o=>new Aq(r,n,o).encryptAndSign(t))));return Promise.all(a)}),Y1j=async(A,j)=>{let e=j.map(t=>{if(!t.uuid)throw new Error("Missing package UUID");return t.uuid});return YC(A.session,e)},Q1j=async(A,j)=>Promise.resolve().then(async()=>GX(A.session,j.vault.uuid,j.uuid).then(async e=>UZ(A,j.vault,e,async t=>ac(A,t)))).catch(jjA("getPackagesForVaultItem")),s8A=async(A,j)=>Promise.resolve().then(async()=>A.user&&Yj.isGuest(A.user)?RB(A,{mustReload:!0}).then(e=>kO(e)):Bm(A,j)).then(e=>{if(!e)throw new Error("Current user does not have a receiving vault");return e}).catch(jjA("getReceivingVault")),Z1j=async(A,j)=>{},AOj=async A=>{},jOj=async(A,j)=>{},eOj=async(A,j)=>yX(A.session,j),tOj=async(A,j)=>$X(A.session,j);var rOj="action/account",hl=rj(rOj),Dt=q$;var ao=async(A,j)=>hl("getAccountWithAttrs",async()=>{let e=!!A.account;return(Br(j,Dt.Me)?$w(A):Promise.resolve()).then(async()=>BR(A.session,j)).then(async r=>NZ(A,r)).then(async({account:r,activeUser:a})=>(a&&FAA(A,a),A.user?nOj(A,r,A.user,e).then(()=>(to(A),r)):Promise.reject(new Error("Missing user"))))}),VG=async(A,j)=>hl("getEntireAccount",async()=>ao(A,[Dt.AccountFlags,Dt.Billing,Dt.Counts,Dt.Invite,Dt.Me,Dt.MeMemberships,Dt.Meta,Dt.Promotions,Dt.Settings,Dt.Tier,Dt.UserFlags,Dt.GatedFeatureTrials,...j]).then(e=>(A.nc.emit(Lt.UniverseReloaded),e))),l8A=async A=>hl("loadUniverse",async()=>VG(A,[Dt.Groups,Dt.Users])),aOj=l8A,nOj=async(A,j,e,t)=>hl("performGetAccountChecks",async()=>{if(j.state===dt.StateActive&&Br([Yj.State.Active,Yj.State.PendingActivation],e.state))return ejA(A).then(()=>{oOj()}).catch(r=>{console.error("Failed to process incoming packages",r)});if(e.state===Yj.State.RecoveryStarted&&t)return b$(A.session).catch(()=>{}).then(()=>{A.nc.emit(Lt.RecoveryStarted)})}),oOj=()=>{globalThis.document&&document.dispatchEvent(new CustomEvent("B5ProcessIncomingPackagesCompleted",{bubbles:!1,cancelable:!1}))},tjA=async(A,j,e,t,r)=>hl("performSignInAccountChecks",async()=>{if(j.state===dt.StateRegistered)return gOj(A,t,r);if(e.state===Yj.State.VerifiedIncomplete)return hOj(A,r);if(e.state===Yj.State.Registered)throw new CA.ClientError(CA.ClientErrorCode.mustVerifyEmail,Z("Account not verified"));if(e.state===Yj.State.RecoveryStarted&&(await XT(A,[e]),await ao(A,[Dt.Me])),j.state===dt.StateActive&&Br([Yj.State.Active,Yj.State.PendingActivation,Yj.State.MustMigrateAuth,Yj.State.Provisioned],e.state))return Promise.resolve();throw new Error("Unsupported account state")}),iOj=async(A,j,e)=>hl("checkDomainAvailability",async()=>!j||!e?Promise.resolve(!1):FR(A.session,j,e).then(t=>t.result).catch(async t=>{if(CA.isServerError(t,CA.ServerErrorCode.badRequest,CA.HTTPStatusCode.badRequest))return!1;throw t})),hq=async(A,j)=>hl("getDomain",async()=>j?(await bR(A.session,j)).domain:pl),sOj=async A=>hl("updateAccount",async()=>{let j=A.account;if(!j)throw new Error("Missing account");await qR(A.session,gT(j)),j.attrVersion++,cr(A),to(A)}),lOj=async A=>hl("updateBillingSettings",async()=>{let j=A.account;if(!j)throw new Error("Missing account");await vR(A.session,gT(j)),j.attrVersion++,cr(A),to(A)}),cOj=async(A,j)=>hl("changeDomain",async()=>{let e=A.account;if(!e)throw new Error("Missing account");await yR(A.session,j),e.attrVersion++,cr(A),to(A)}),dOj=async A=>hl("deleteAccount",async()=>A.account?xR(A.session):Promise.reject(new Error("Missing account"))),kOj=async(A,j,e)=>{await fR(A.session,j,e)},uOj=async(A,j,e)=>{await GR(A.session,j,e)},rjA=async(A,j)=>$R(A.session,j),pOj=()=>new ej({desc:ej.DefaultDescMarker,name:"System",type:ej.TypeSystem}),mOj=()=>new ej({desc:ej.DefaultDescMarker,name:"Generated Passwords",type:ej.TypeGeneratedPasswords}),mq=(A,j)=>new ej({type:ej.TypePersonal,name:YT(A),desc:ej.DefaultDescMarker,avatar:j}),YT=A=>A===dt.Type.Individual?"Personal":"Private",eK=()=>new ej({type:ej.TypeEveryone,name:"Shared",desc:ej.DefaultDescMarker}),c8A=async A=>{let j=await fw.Keyset.generate(),e={objectUuid:j.uuid,data:{ePriKey:j.encryptionKeyPair.priKey,sPriKey:j.signingKeyPair.priKey},acl:[]};await KAA(A,Li.AdminWatchtowerKeyset,qn.AdminWatchtowerKeysetPrivateKey,ui.Manage,e),await YAA(A,j.uuid,j.encryptionKeyPair.pubKey)},EOj=async(A,j)=>{j.pubKey||(j=await Na(A,j,{attrs:wA.Attr.PubKey,mustReload:!0}));let e=await eG(A.session,Li.AdminWatchtowerKeyset,ui.Manage);await Uw(A,Li.AdminWatchtowerKeyset,ui.Manage,j,[],e)},BOj={[wA.TypeRecovery]:!0,[wA.TypeOwners]:!0,[wA.TypeAdmins]:!0,[wA.TypeExternalAccountManagers]:!0},gOj=async(A,j,e=!0)=>hl("setupAccount",async()=>{let t=A.account;if(!t)return Promise.reject(new Error("Missing account"));let r=A.user;if(!r)return Promise.reject(new Error("Missing user"));let a="setupAccount";console.time(a);let n=new wA({name:"Recovery",type:wA.TypeRecovery,desc:"Can reset user passwords if account recovery is enabled."}),o=new wA({name:"Owners",type:wA.TypeOwners,desc:"Access to billing and account administration."}),i=new wA({name:"Administrators",type:wA.TypeAdmins,desc:"Administration of users, groups, and vaults."}),s=new wA({name:"Team Members",type:wA.TypeTeamMembers,desc:"All team members."}),l="Access to security reports and account activity.",d=new wA({name:"Security",type:wA.TypeSecurity,desc:j?j[l]():l}),k=new wA({name:"MSP Administrators",type:wA.TypeMSPAdministrators,desc:"Access to add, view, administer, and unlink managed companies as an external account manager."}),u=new wA({name:"External Account Managers",type:wA.TypeExternalAccountManagers,desc:"Administration of users, groups, and vaults as external account managers."}),m=[n,o,i];t.hasFeature.members&&m.push(s),t.hasFeature.members&&A.config.internalFeaturesAreEnabled&&m.push(d),t.hasFeature.managedServiceProvider&&m.push(k),t.isAccountManaged&&m.push(u),t.domain==="backoffice"&&m.push(new wA({name:"Backoffice Users",type:wA.TypeBackofficeUsers,desc:""}),new wA({name:"Backoffice Billing",type:wA.TypeBackofficeBilling,desc:""}),new wA({name:"Backoffice Security",type:wA.TypeBackofficeSecurity,desc:""}),new wA({name:"Backoffice Developers",type:wA.TypeBackofficeDevelopers,desc:""}),new wA({name:"Backoffice Finance",type:wA.TypeBackofficeFinance,desc:""}),new wA({name:"Backoffice Content",type:wA.TypeBackofficeContent,desc:""}),new wA({name:"Backoffice Owners",type:wA.TypeBackofficeOwners,desc:""}),new wA({name:"Backoffice Advanced",type:wA.TypeBackofficeAdvanced,desc:""}));let I=async(O,V,Y)=>{let rA=[];return O.type===wA.TypeRecovery||O.type===wA.TypeMSPAdministrators||t.isAccountManaged&&O.type!==wA.TypeExternalAccountManagers||rA.push(O.addMembership(V,r,{role:sr.Role.Manager})),BOj[O.type]&&rA.push(O.enableRecoverCapability(Y)),Promise.all(rA)},S=hk(A,n,n).then(async O=>{let V=m.slice(1);return Promise.all([I(n,O,O),...V.map(async Y=>hk(A,Y,n).then(async rA=>I(Y,rA,O)))])}),f=mq(t.type),v=eK(),P=mOj(),D=pOj(),C=!t.isAccountManaged,b=[];C&&(b.push(f),e&&b.push(P,D)),t.hasFeature.members&&b.push(v);let h=[S];for(let O of b)h.push(O.generateNewKey());return Promise.all(h).then(async()=>{let O=[];C&&(O.push(ft.generate(f,r,{acl:le.RWE|le.Manage}),ft.generate(f,n,{acl:le.Recover})),e&&O.push(ft.generate(D,r,{acl:le.DEFAULT_VAULT_CREATION_ACL}),ft.generate(D,n,{acl:le.Recover}),ft.generate(P,r,{acl:le.DEFAULT_VAULT_CREATION_ACL}),ft.generate(P,n,{acl:le.Recover})));let V=[];return t.hasFeature.members&&(V.push(ft.generate(v,o,{acl:le.Manage}),ft.generate(v,i,{acl:le.Manage}),ft.generate(v,n,{acl:le.Recover}),ft.generate(v,s,{acl:le.ALL_READ|le.ALL_WRITE|le.ALL_EXPORT})),t.isAccountManaged&&V.push(ft.generate(v,u,{acl:le.Manage}))),Promise.all([...O,...V])}).then(async O=>qOj(A,b,O,m)).then(async()=>{if(A.account?.hasBackOfficeFeature.managedServiceProvider||dt.hasLinkedAccountsFeature(A.account))return QAA(A)}).then(async()=>{if(A.config.internalFeaturesAreEnabled){if(!o.activeKeysetUuid)throw new Error("Missing owners group");return c8A(A)}}).then(async()=>(console.timeEnd(a),VG(A,[Dt.Groups]))).then(async()=>Promise.resolve(void 0))}),hOj=async(A,j=!0)=>hl("setupUser",async()=>{let e=A.user;if(!e)return Promise.reject(new Error("Missing user"));let t=A.account;if(!t)return Promise.reject(new Error("Missing account"));let r=mq(t.type),a=ro(A,{attrs:wA.Attr.PubKey}),n=r.generateNewKey();return Promise.all([a,n]).then(async o=>{let i=o[0],s=[ft.generate(r,e,{acl:le.RWE|le.Manage}),ft.generate(r,i,{acl:le.Recover})];return Promise.all(s)}).then(async o=>vOj(A,r,o)).then(async()=>{if(j)return Promise.all([Mw(A),uq(A)])}).then(async()=>t.hasFeature.accountTransfer?ao(A,[Dt.UserFlags]):void 0).then(()=>{e.state=Yj.State.PendingActivation})}),qOj=async(A,j,e,t)=>hl("activateAccount",async()=>gR(A.session,LZ(j,e),t.map(r=>km(r,wA.Attr.PubKey|wA.Attr.Memberships)))),vOj=async(A,j,e)=>{await hR(A.session,lk(j,e))},xOj=async A=>IR(A.session).then(j=>({activeMembers:j.activeMembers,activeGuests:j.activeGuests,billedGuests:j.billedGuests,billedMembers:j.billedMembers})),fOj=async A=>A.account?OR(A.session):Promise.reject(new Error("Missing account")),GOj=async(A,j)=>{if(!A.account)return Promise.reject(new Error("Missing account"));if(!A.account.ownersGroup)throw new Error("Missing owners group");let e=await Vu(A,A.account.ownersGroup),r=await(await Xd.generate()).encryptSelfWithOwnersGroupKeyset(e);return HR(A.session,{encAuthenticationKey:r,signInAddress:j})},FOj=async(A,j)=>{await PR(A.session,j)},bOj=async(A,j)=>{await TR(A.session,j)},yOj=async(A,j)=>{let e=await Ni(j.pubKey),t=new wA({name:"External Account Managers",type:wA.TypeExternalAccountManagers,desc:"Administration of users, groups, and vaults as external account managers."}),r=await RG(A);if(!r)throw new Error("Missing recovery keyset");t.pubKey=e,t.activeKeysetUuid=j.uuid,await t.enableRecoverCapability(r),await Zu(A,t,void 0)},$Oj=async A=>A.account?KR(A.session):Promise.reject(new Error("Missing account")),wOj=async A=>{await SR(A.session)},IOj=async A=>CR(A.session);var DOj=async(A,j)=>LR(A.session,j),OOj=async(A,j)=>NR(A.session,j),POj=async(A,j)=>zR(A.session,j);var COj=async(A,j)=>RR(A.session,j),HOj=async(A,j)=>JR(A.session,j),TOj=async A=>UR(A.session),KOj=async A=>XR(A.session);var SOj=async(A,j)=>VR(A.session,j),MOj=async(A,j)=>WR(A.session,j);var _Oj=async(A,j,e,t,r,a,n,o,i,s)=>{let l=t||gC().toISOString();return t=j?void 0:l,r=j?void 0:r||new Date().toISOString(),e=j?void 0:e,rJ(A.session,j,e,t,r,s,a,n,o,i).then(d=>({auditEvents:d?d.auditEvents.map(xG.fromApi):[],cursor:d.cursor,hasMore:d.hasMore,totalCount:d.totalCount}),d=>{throw console.error("getFilteredActivityLogReports failed:",d),d})},LOj=async(A,j,e,t,r)=>{let a={objectType:j,objectUUID:t,action:e,reportType:r};try{await nJ(A.session,a)}catch(n){throw console.error("reportAuditEvent failed:",n),n}},NOj=async(A,j,e,t,r,a,n)=>aJ(A.session,j||gC().toISOString(),e||new Date().toISOString(),t,r,a,n).then(o=>({count:o.count,hasMore:o.hasMore}),o=>{throw console.error("getFilteredActivityLogTotalReports failed:",o),o}),zOj=async(A,j,e)=>oJ(A.session,j,e).then(t=>t?t.map(xG.fromApi):[],t=>{throw console.error("getActivityFeed failed:",t),t});var go=W(aA());var ROj=AA("web-api/internal/user.ts"),d8A=ROj(A=>({name:"migrateKeyset",method:"POST",url:"/internal/v1/user/keyset",body:{keyset:A},responseType:J}));var tK="action/partial_user",k8A=rj(tK),UOj=async(A,{scopes:j={},attrs:e=[],...t})=>{let r={...t,vault:j?.vaultUuid,group:j?.groupUuid,attrs:e};return jo([tK,"getPartialUsersV2",A.id,JSON.stringify(r)],async()=>{let{serviceAccounts:a=[],...n}=await uB(A.session,r);return{...n,serviceAccounts:a}})},WG=ys(),ajA=async(A,j={},e={})=>k8A("getPartialUsers",async()=>{let{mustReload:t,limit:r,offset:a}={mustReload:!1,...e},n=!r&&f0(j);if(!t&&n){let i=WG.getAllEntries(A.id);if(i)return l6(i)}let o={attrs:[],emails:j.emails,states:Lr([j.state]),types:Lr([j.type]),limit:r,offset:a,search:j.search,sort:j.sort,sortDir:j.sortDir};return jo([tK,"getPartialUsers",A.id,JSON.stringify(o)],async()=>uB(A.session,o).then(({users:i})=>{if(!i)throw new Error("Missing users from getPartialUsers");return n&&(WG=WG.withOnlyEntries(A.id,Ia(i,"uuid"),{timestamp:Date.now()})),i}))}),XOj=async(A,{scopes:j={},attrs:e=[],...t})=>k8A("getPartialUsersCount",async()=>{let r={...t,group:j?.groupUuid,vault:j?.vaultUuid,attrs:e};return Hh(r?.search)?0:EC(A.session,r).then(async a=>a)}),jI=async(A,j)=>jo([tK,"getGroupUsersWithPermissions",A.id,j],async()=>uB(A.session,{group:j,attrs:["combinedPermissions"]}).then(({users:e,serviceAccounts:t=[]})=>{if(!e&&!t)throw new Error("Missing users.");return{users:e,serviceAccounts:t}})),njA=()=>{WG=ys()},ojA=A=>{WG=WG.withoutContext(A.id)};var VOj=async(A,j,e)=>LW(A.session,j,e),WOj=async(A,j,e,t)=>{let r={name:t};return _W(A.session,j,e,r)},YOj=async A=>NW(A.session),QOj=async(A,j,e,t,r)=>{let{saJwt:a,registerTokenRequest:n}=await eI(A,j,t,r,e.token,e.sPriKey.kid,e.sPriKey);return await BH(A.session,n),a},ZOj=async(A,j,e,t,r)=>{let{saJwt:a,registerTokenRequest:n}=await eI(A,j,t,r,void 0,e.signingKey.kid,e.signingKey);return await BH(A.session,n),a},eI=async(A,j,e,t,r,a,n)=>{if(!A.account)throw new Error("Cannot register token without Account information");let o=await nZ({signingKey:n,accountUuid:A.account.uuid,serviceAccountUuid:j,createTokenInfo:t,bearerToken:r}),i=await oZ(o),s={kid:a,subject:j,name:e,account_uuid:A.account.uuid,token_info:{...t,signatureHash:i}};return{saJwt:o,registerTokenRequest:s}};var A4j="action/serviceaccounts",ijA=async(A,j)=>XW(A.session,j),YG=ys(),sjA=async(A,j,e,t)=>{let{user:r,userAuth:a}=await Nw(A,j,e,t);if(!r.masterKey)throw new Error("Missing master key");if(!r.secretKey)throw new Error("Missing secret key");let n=await r.encryptActiveKeysetWithMasterKey(),o={email:r.email,muk:await r.masterKey.exportJwk(),secretKey:r.secretKey.exportSensitiveReadableString(),srpX:a.srpX,signInAddress:A.account&&A.account.urlHost(A.config.server)||"",userAuth:a.params};return{user:r,encKeyset:n,creds:o}},ljA=async(A,{encKeyset:j,user:e,preflightResponse:t,userAuth:r,serviceAccountType:a,permissions:n,access:o,serviceAccountToken:i,serviceAccountAvatar:s,serviceAccountThrottleKeyData:l,isRotated:d,uuid:k,ods:u})=>{let m,I;if(i&&({saJwt:m,registerTokenRequest:I}=await eI(A,i.serviceAccountUuid,i.tokenName,i.tokenInfo,i.bearerToken,i.kid,i.signingKey),I.subject!==t.uuid))throw new Error("Token subject must match Service Account UUID from preflight response.");let S=e.getCredentials(),f=C=>JW(A.session,{access:o,serviceAccountType:a,keyset:j,preflightToken:t.token,permissions:n,userAuth:Wr.getForUpload(r),userRegistration:{uuid:t.uuid,email:t.email,name:e.name,avatar:s,accountKeyFormat:S.secretKey.format.toString(),accountKeyUuid:S.secretKey.id,newsletterPrefs:0,language:e.language},registerSAToken:I,throttleKeyData:l,rotated:d,uuid:k,objectData:u,trustLogEntry:C?.trustLogEntry,trustLogBookmark:C?.trustLogBookmark}),v=await mm.getInstanceIfEnabled(A),P=await(v?MT(async()=>{let C=e.activeKeyset;if(!C)throw new Error("Service Account keyset not found.");let b=C.skeyPair?.pubKey;if(!b)throw new Error("Service Account Keyset has no identity key.");let h=C.ekeyPair.pubKey,O=C.symKey,V=await v.getLatestBookmark(),Y=await v.createAddUsersEntry([{uuid:t.uuid,keysetUuid:C.uuid,identityPublicKey:b,encryptionPublicKey:h}],V),rA=await v.signBookmarkWithKey(O,Y.new_bookmark),yA=await f({trustLogEntry:Y.entry.toBase64Url(),trustLogBookmark:rA.toBase64Url()});return await v.signAndSubmitBookmark(Y.new_bookmark),yA}):f());return{person:await ck(A,P,0,void 0),saJwt:m}},cjA=async(A,j)=>UW(A.session,j),j4j=async A=>Y$(A.session),djA=async(A,j,e,t)=>{t=t||a4j();let r=[];for(let a of e){let n=await zB(A,j,a,t);r.push(n)}return r},e4j=async(A,j,e)=>{let t={...A,accessorType:"user"};e=e||n4j();let r=[];for(let a of j){let n=await ft.generate(a,t,e),o=Bl(n);r.push(o)}return r},t4j={attrs:Ri.Attr.None,mustReload:!1},r4j=async(A,j,e)=>{let{attrs:t,mustReload:r}={...t4j,...e},a=r?void 0:YG.getEntry(A.id,j,{attrMask:t});return a&&a.hasAttrMask(t)?a:jo([A4j,"getServiceAccount",A.id,j,t],async()=>{let n=await VW(A.session,j,Ri.translateAttrMaskNames(t)),o=await rq(n,t,a);return YG=YG.withEntries(A.id,{[j]:o},{attrMask:t,timestamp:Date.now()}),o})},a4j=()=>({role:sr.Role.Member,state:sr.State.Active}),n4j=()=>({acl:le.RWE,leaseTimeout:0}),o4j=async(A,j,e)=>{let t={uuid:j.uuid,...gO(j,["type","attrVersion","state","email"]),name:e};await M$(A.session,t),cr(A),A.nc.emit(Lt.UsersChanged)},i4j=async(A,j,e)=>{let t={uuid:j.uuid,...gO(j,["type","attrVersion","state","email"]),imageId:e};await _$(A.session,t),cr(A),A.nc.emit(Lt.UsersChanged)},s4j=async(A,j,e)=>{let a=e*3600*1e9;await WW(A.session,j,{expiresIn:a})},kjA=()=>{YG=ys()},ujA=A=>{YG=YG.withoutContext(A.id)};var pjA=()=>{KZ(),fAA(),hAA(),vAA(),kjA(),njA()},mjA=A=>{pT(A.id),GAA(A),qAA(A),xAA(A),ujA(A),ojA(A)};var QG=async(A,j,e,t)=>BQ(A.session,j,e,t),EjA=async(A,j,e,t)=>gQ(A.session,j,e,t),BjA=async(A,j,e,t,r)=>hQ(A.session,j,e,t,r);var l4j=3e3,tI=async A=>{let j=Object.keys(hf);try{return(await Promise.race([QG(A,j),new Promise((t,r)=>{setTimeout(()=>r(new Error("Timeout")),l4j)})])).features.reduce((t,r)=>(t[r.name]=!0,t),{})}catch(e){return console.error("Failed to retrieve feature flags:",e),{}}},gjA=async(A,j)=>{try{let e=await QG(A,[j]);return e?.features?.length>0?e.features[0]?.name===j:!1}catch(e){return console.error("Failed to retrieve account feature flags enabled:",e),!1}};var rI=W(Dn()),qk=W(aA());var Xi=W(aA()),u8A=Xi.exact(Xi.type({name:Xi.literal("testVariant"),value:Xi.intersection([Xi.type({description:Xi.string,showButton:Xi.boolean}),Xi.partial({optionalField:Xi.string})])}));var p8A={testVariant:u8A};var c4j=new qk.Type("NonEmptyVariantPayload",qk.unknown.is,(A,j)=>{let e=qk.string.validate(A,j);if((0,rI.isLeft)(e))return e;try{let t=JSON.parse(e.right);return Object.keys(t).length>0?qk.success(t):qk.failure(A,j,"Failed to decode: Variant object must have at least 1 key/value pair.")}catch(t){return qk.failure(A,j,JSON.stringify(t))}},JSON.stringify),rK=A=>(0,rI.isRight)(c4j.decode(A)),m8A=(A,j)=>{let e=p8A[A],t={name:j.name,value:JSON.parse(j.value)},r=e.decode(t);if((0,rI.isLeft)(r))throw new Error(`Failed to validate variant: ${r.left.join(", ")}`);return r.right};var d4j=3e3,E8A=async(A,j,e=!1,t)=>{try{let r=e?BjA(j,A,t):EjA(j,A);return(await Promise.race([r,new Promise((n,o)=>{setTimeout(()=>o(new Error("Timeout")),d4j)})])).features.reduce((n,o)=>{if(Object.keys(ZL).includes(o.name)){let i={enabled:!0};rK(o.variantPayload?.value)&&(i.variantPayload=o.variantPayload),n[o.name]=i}return n},{})}catch(r){return console.error("Failed to retrieve pre-registration feature flags:",r),{}}},aK=async(A,j=!1,e)=>{let t=Object.keys(ZL);return E8A(t,A,j,e)},nK=async(A,j,e=!1,t)=>E8A([A],j,e,t);var k4j=async A=>{if(!navigator.cookieEnabled)return[];let j=Nl(A.config.siblingDomains);j.push(A.config.server);let e=j.map(async a=>{try{return await _Y(A.session,a)}catch{return[]}}),t=await Promise.all(e),r=Pd(t);return tAA(r)},hjA=async A=>{navigator.cookieEnabled&&await LY(A.session,A.config.server)},u4j=async(A,j)=>{navigator.cookieEnabled&&await NY(A.session,A.config.server,j)},p4j=async(A,j)=>{navigator.cookieEnabled&&await zY(A.session,A.config.server,j)};var m4j="action/auth",aI=rj(m4j),qjA;(function(A){A.Password="PASSWORD",A.TrustedDevice="TRUSTED_DEVICE"})(qjA||(qjA={}));var E4j=go.type({accountKey:go.string,masterPassword:go.string},"PasswordAccountCredentials"),wjt=go.type({type:go.literal(qjA.Password),data:E4j},"AccountCredentials"),vjA=!1,B4j=()=>vjA,g4j=A=>{vjA=A},xjA=!1,h4j=()=>xjA,q4j=A=>{xjA=A},B8A=!1,v4j=()=>B8A,x4j=A=>{B8A=A},fjA=!1,f4j=()=>fjA,G4j=A=>{fjA=A},nI=(A,j,e)=>new Pe({errorClass:mn.RequestError,userUuid:e?Z(e):void 0,message:E`${A}: func: ${j}`}),F4j=async(A,j)=>{await A.session.initialize({rawSessionKey:ZA(j.sessionKey.k),requestId:1,serverConfig:{notifier:j.notifier},sessionUuid:j.sessionUuid}),A.config.initializedWithExistingSession=!0,A.user=new eo({}),A.user.masterKey=await hs.fromJwk(j.managedAccountKey),await gm(A,{shouldLoadUniverse:!0,isDesignatedAsPublic:!0,shouldAddAccountToExtension:!1}),await gk(A).then(e=>{Vu(A,e)})},qq=async(A,j,e)=>{A.account=void 0,A.userAuth=void 0,A.user=void 0,A.accountOverview=void 0;let t="muk"in j?await O4j(A,j,e):await D4j(A,j,e);if(t.type==="verified_session")return await gm(A,e),{type:"verified_context",context:A};if(t.type==="email_changed"){let r=t.newEmail;return qq(A,{...j,email:r},e)}else return t},b4j=async(A,j,e,t)=>{A.userAuth||(A.userAuth=Wr.createFromPreComputedX(j.credentialBundle.srpx.exportBytes()));let r=A.user?.secretKey;r||(r=await Ba.forTrustedDevice(j.secretKeyUuid)),A.user=new eo({email:j.email,uuid:j.userUuid,secretKey:r});let a=await Tu(A.session,{email:A.user.email,skFormat:j.secretKeyFormat,skid:j.secretKeyUuid,signInToken:e,deviceUuid:Gr.device.uuid,userUuid:j.userUuid});if(!a.userAuth)throw new Error("Did not receive userAuth params from startAuth");A.session.setSessionUuid(a.sessionID),A.user.masterKey=j.credentialBundle.auk;let n=await A.session.signInWithCredentialBundle(a.userAuth,j.credentialBundle.srpx,e,j.secretKeyUuid,j.email);return n.type==="verified_session"?(await gm(A,t),{type:"verified_context",context:A}):n},y4j=async(A,j,e)=>{let t=await Ba.forTrustedDevice(j.secretKeyUuid);A.user=new eo({email:j.email,uuid:j.userUuid,secretKey:t});let r=await Tu(A.session,{email:j.email,deviceUuid:Gr.device.uuid,userUuid:j.userUuid,skFormat:j.secretKeyFormat,skid:j.secretKeyUuid});if(r.status==="device-not-registered"&&(A.session.setSessionUuid(r.sessionID),await $$(A.session,Gr.device),r=await Tu(A.session,{email:j.email,deviceUuid:Gr.device.uuid,userUuid:j.userUuid,skFormat:j.secretKeyFormat,skid:j.secretKeyUuid})),!r.userAuth)throw new Error("Did not receive userAuth params from startAuth");A.user.masterKey=j.credentialBundle.auk,A.session.setSessionUuid(r.sessionID);let a=await A.session.signInWithCredentialBundle(r.userAuth,j.credentialBundle.srpx,"",j.secretKeyUuid,j.email);return a.type==="verified_session"?(await gm(A,e),{type:"verified_context",context:A}):a},$4j=async(A,j,e)=>qq(A,j,{...e,shouldLoadUniverse:!0}),GjA=async(A,j,e,t)=>{A.account=void 0,A.userAuth=void 0,A.user=void 0,A.accountOverview=void 0;let{userAuth:r}=j;if(!r){let i=await Tu(A.session,{signInToken:e,deviceUuid:Gr.device.uuid,userUuid:j.userUuid});if(!i.userAuth)throw new Error("Did not receive userAuth params from startAuth");r=i.userAuth}let a=await Ba.forTrustedDevice(j.secretKeyUuid),n=j.credentialBundle.srpx;A.user=new eo({email:j.email,uuid:j.userUuid,secretKey:a}),A.user.masterKey=j.credentialBundle.auk;let o=await A.session.signInWithCredentialBundle(r,n,e,j.secretKeyUuid,j.email);return o.type==="verified_session"?(await gm(A,t),{type:"verified_context",context:A}):o},w4j=async(A,j,e)=>{if(!A.config.lang)throw new Error("Missing language");let[t,r,a]=await Promise.all([ii.generateForTrustedDevice(),vs.generate(),Ba.generateForTrustedDevice()]),n=Wr.createFromPreComputedX(t.srpx.exportBytes()),o;try{o=await j.completeRecovery(Gr.device,t,a,n.params,A.config.lang,r),await e(o.details.accountUuid,o.details.userUuid,r)}catch(i){throw console.error("signInWithRecoveryCodePasskeys Failed to save device key:",i),new Error(`There was an issue saving the device key: ${z0(i)}`)}try{return o.signIn(A,{shouldLoadUniverse:!0,isDesignatedAsPublic:!1})}catch(i){throw console.error("signInWithRecoveryCodePasskeys Failed to sign in:",i),new Error(`There was an issue while signing in to your account: ${z0(i)}`)}},I4j=async(A,j,e,t)=>{let r=await Ba.generate();A.user=new eo({email:e.aux.email,language:t,name:e.aux.name,secretKey:r}),A.userAuth=await Wr.generate({email:e.aux.email,password:j,secretKey:r}),A.user.masterKey=await Zt.deriveDefaultKdf({email:e.aux.email,password:j,secretKey:r});let a=await Ho.fromHex(A.userAuth.srpX),n=await ii.new({srpx:a,auk:A.user.masterKey});return(await e.completeRecovery(Gr.device,n,r,A.userAuth.params,t,void 0)).signIn(A,{shouldLoadUniverse:!0,isDesignatedAsPublic:!1})},D4j=async(A,j,e)=>{let t=new eo({email:j.email,password:j.password,secretKey:j.secretKey,uuid:j.uuid});return A.user=t,A.session.signin(t,e.allowReauthorization)},O4j=async(A,j,e)=>{let{email:t,secretKey:r,muk:a,srpX:n,uuid:o}=j;if(!a.alg)throw new Error("Missing MUK alg.");if(!n)throw new Error("Missing SRP-x.");let i=r?Ba.fromInput(r):void 0;if(r&&!i)throw new Error("Secret Key is invalid");let s=new eo({email:t,secretKey:i,uuid:o});return A.user=s,A.user.masterKey=await Zt.fromJwk(a),A.session.signin(s,e.allowReauthorization,n)},oK=async(A,j,e)=>{try{let t=await A.session.verifyMfa(j);t.dsecret&&A.user&&(A.user.dSecret=t.dsecret)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidMFA))return FjA(A,t);throw t}return gm(A,e)},P4j=async(A,j,e,t)=>oK(A,{type:e,code:j},t),C4j=async(A,j,e,t)=>oK(A,{type:"dSecretProxy",dshmac:j,deviceUuid:e},t),H4j=async(A,j,e)=>oK(A,{type:"webAuthn",data:j},e),T4j=async(A,j,e)=>{try{A.user&&(A.user.dSecret=j);let t=RH(j,A.session.sessionUuid);await A.session.verifyMfa({type:"dSecret",dshmac:t})}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidMFA)&&A.user)return A.user.dSecret=void 0,FjA(A,t);throw t}return gm(A,e)},K4j=async(A,j,e)=>oK(A,j,e),S4j=async(A,j,e)=>{try{let t=await A.session.enableMfaWithAuth(j);t.dsecret&&A.user&&(A.user.dSecret=t.dsecret)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidMFA)||CA.isServerError(t,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized))return FjA(A,t);throw t}return gm(A,e)},FjA=async(A,j)=>{if(!A.session||!A.session.auth||!A.user)throw new Error("Missing auth or user data.");let e=A.session.auth.srpX,t=await A.session.signin(A.user,!1,e);throw t.type==="mfa_required"?j:new Error(`Unexpected sign-in response ${t.type}`)},gm=async(A,j)=>aI("handleSignInSuccess",async()=>{let e=A.user;if(!e)return Promise.reject(new Error("Missing user"));let r=(async()=>j.shouldLoadUniverse?VG(A,[Dt.Groups]):ao(A,[Dt.Me,Dt.MeMemberships,Dt.UserFlags,Dt.AccountFlags,Dt.Billing,Dt.Tier,Dt.Promotions,Dt.GatedFeatureTrials]))().then(async n=>tjA(A,n,e,j.translators,j.setupWithSystemVaults)).then(async()=>j.shouldLoadUniverse?_4j(A):Promise.resolve()).then(async()=>{if(A.session.ssoMigrationGracePeriod?.state===Yj.State.MustMigrateAuth)return{notifierEnabled:!1};if(!A.session.serverConfig)throw new Error("Missing server config");return A.notifier.connect(A.session.serverConfig.notifier),{notifierEnabled:!0}}).then(async({notifierEnabled:n})=>{n&&A.nc.emit(Lt.SignedIn),vjA&&A.account&&A.user&&!j.suppressClientNotifications&&(fjA?await $jA(A,j):await g8A(A,j)),e.password=void 0}),a=tI(A);return Promise.all([a,r]).then(([n,o])=>{A.account!==void 0&&(A.account.features=n)})}),bjA=(A,j)=>{if(A.account&&A.user)return{accountUuid:A.account.uuid,domain:A.account.urlHost(A.config.server),email:A.user.email,userUuid:A.user.uuid,deviceIsPublic:j.isDesignatedAsPublic?"true":"false"}},yjA=(A,j,e)=>{e?hjA(j).catch(t=>{console.error("Setting account cookie failed.",t)}).then(()=>{A()}).catch(()=>{}):A()},g8A=async(A,j)=>{if(!A.account||!A.user)return;let e=bjA(A,j);if(!e)return;let t=A.user.secretKey&&A.user.secretKey.exportSensitiveReadableString();Gr.device&&Gr.device.fromDeviceInit&&A.user.dSecret&&(e.dSecret=A.user.dSecret),j.authOnly&&(e.authOnly=!0);let r=t&&A.user.password,a=A.user?.secretKey&&A.user.secretKey.isTrustedDeviceFormat();if(r){if(!A.user.password)return;let n=await gjA(A,"extension-first-for-scim"),o={...e,accountKey:t,masterPassword:A.user.password,shouldAddAccountToExtension:j.shouldAddAccountToExtension||n,isSsoAccount:j.isSsoAccount};yjA(()=>{document.dispatchEvent(new CustomEvent("B5SignInSucceeded",{bubbles:!1,cancelable:!1,detail:o}))},A,j.authOnly)}else if(a)return $jA(A,j)},$jA=async(A,j,e)=>{let t=bjA(A,j);if(!t||!A.user||!A.user.masterKey)return;if(j.authOnly&&(t.authOnly=!0),!(A.user.masterKey instanceof Zt))throw Nr(nI(E`Master key is not a valid Auk`,E`handleDelegatedSessionSignInSuccess`,A.user.uuid)),new TypeError("Master key is not a valid Auk");let r={...t,shouldAddAccountToExtension:j.shouldAddAccountToExtension,isSsoAccount:j.isSsoAccount,masterKey:await A.user.masterKey.exportJwkJSON()};if(!xjA||j.authOnly)try{let n=await y$(A.session,wjA(_4()),!1);r.session=n}catch(n){console.error("Could not create delegated session:",n);return}let a=await gjA(A,"extension-first-for-sso");a&&A.account&&(A.account.features["extension-first-for-sso"]=!0),r.shouldAddAccountToExtension=a,yjA(()=>{if(e){let n={...r,extraCredentials:e};document.dispatchEvent(new CustomEvent("B5MyceliumDelegatedSignInSucceeded",{bubbles:!1,cancelable:!1,detail:n}))}else document.dispatchEvent(new CustomEvent("B5DelegatedSignInSucceeded",{bubbles:!1,cancelable:!1,detail:r}))},A,j.authOnly)},M4j=async(A,j)=>{if(j.account&&j.user?.masterKey&&A.accountUuid===j.account?.uuid){let e=await y$(j.session,wjA(_4()),!1),t=bjA(j,{});if(!t)return;if(!(j.user.masterKey instanceof Zt))throw Nr(nI(E`Master key is not a valid Auk`,E`handleDelegatedSessionRequest`,j.user.uuid)),new TypeError("Master key is not a valid Auk");let r={...t,accountUuid:j.account.uuid,requestId:A.requestId,sessionDetail:{masterKey:await j.user.masterKey.exportJwkJSON(),session:e}};yjA(()=>{document.dispatchEvent(new CustomEvent("B5RequestDelegatedSessionResponse",{bubbles:!1,cancelable:!1,detail:r}))},j,!1)}},_4j=async A=>aI("addSigningKeysIfNeeded",async()=>{let j=A.user;if(!j)throw new Error("Missing user.");let e=j.activeKeyset;if(!e)throw new Error("Missing user's active keyset.");if(!e.hasSigningKeys())return e.generateSigningKeys().then(async()=>j.encryptActiveKeysetWithMasterKey()).then(async t=>d8A(A.session,t)).then(()=>{})}),L4j=async A=>aI("signOut",async()=>(mjA(A),b$(A.session).catch(j=>{console.error("signout failed:",j)}).then(()=>{A.nc.emit(Lt.SignedOut)}))),N4j=go.intersection([go.type({accountKey:ij(go.string),email:go.string,requestID:go.number,serverConfig:yC,sessionKey:$A.JwkSymKey}),go.partial({masterKey:$A.JwkSymKey,derivationInfo:kP,dSecret:go.string,password:go.string,auth:_Q})],"ContextInitialization"),h8A=async(A,{allowMissingAuk:j=!1,hydratedSecretKey:e=void 0}={allowMissingAuk:!1,hydratedSecretKey:void 0})=>{if(!A||!A.email||!A.serverConfig||!A.serverConfig.notifier)throw new Error("Invalid details object");if(!j&&(!A.masterKey||!A.masterKey.alg||!A.masterKey.k))throw new Error("Invalid details object (missing AUK)");let t=A.accountKey?Ba.fromInput(A.accountKey):e;if(A.accountKey&&!t)throw new Error("Invalid Secret Key");let r=new eo({email:A.email,secretKey:t});return A.masterKey&&(A.masterKey.kid==="mp"?r.masterKey=await Zt.fromJwk(A.masterKey,A.derivationInfo):r.masterKey=await hs.fromJwk(A.masterKey)),A.dSecret&&(r.dSecret=A.dSecret),A.password&&(r.password=A.password),r},z4j=async(A,j,e,{includeFeatureFlags:t=!1,deviceKey:r=void 0,secretKey:a=void 0}={})=>{if(j!==1)throw new Error("Invalid API version");if(!e||!e.email||!e.masterKey||!e.masterKey.alg||!e.masterKey.k||!e.serverConfig||!e.serverConfig.notifier)throw new Error("Invalid details object");if(!e.sessionKey||!e.sessionKey.k||!e.sessionKey.kid)throw new Error("Invalid details object (missing key)");A.user=await h8A(e,{hydratedSecretKey:a});try{if(await A.session.initialize({rawSessionKey:ZA(e.sessionKey.k),requestId:e.requestID,serverConfig:e.serverConfig,sessionUuid:e.sessionKey.kid,auth:e.auth}),await F$(A.session),await VG(A,[Dt.Groups]),t){let n=await tI(A);A.account!==void 0&&(A.account.features=n)}if(!A.session.serverConfig)throw new Error("Missing server config");if(r){let n=await R4j(A,r);n&&A.session.importAuth(n)}return A.notifier.connect(A.session.serverConfig.notifier),A.config.initializedWithExistingSession=!0,A.nc.emit(Lt.SessionInitialized),A}catch(n){throw A.nc.emit(Lt.SessionInitError,n),n}},R4j=async(A,j)=>{try{let e=await LA.getEncryptedCredentialBundle(A,j.kid),{srpx:t}=await j.decryptCredentialBundle(e.encCredentials);return Wr.createFromPreComputedX(t.exportBytes())}catch{Nr(nI(E`Failed to get auth params using the device key`,E`getAuthParamsFromDeviceKey`,A.user?.uuid));return}},J4j=async A=>aI("getInitializationExportFromNewContext",async()=>v8A(A).then(async j=>q8A(j))),q8A=async(A,{allowMissingAuk:j=!1,includeAuth:e=!1}={})=>{let{user:t,session:r}=A;if(!t)throw new Error("Missing user");let a=t.secretKey&&t.secretKey.exportSensitiveReadableString();if(!t.masterKey&&!j)throw new Error("Missing master key");if(!r.sessionKey||!r.sessionKey.jwk)throw new Error("Missing session key");if(!r.serverConfig)throw new Error("Missing server config");let n={accountKey:a,email:t.email,masterKey:void 0,derivationInfo:void 0,requestID:r.requestId,serverConfig:{notifier:r.serverConfig.notifier},sessionKey:r.sessionKey?.jwk,dSecret:t.dSecret,password:t.password};return e&&(n.auth=r.auth),t.masterKey&&(n.masterKey=await t.masterKey.exportJwk(),t.masterKey instanceof Zt&&(n.derivationInfo=t.masterKey.derivationInfo)),n},wjA=A=>{let j=Number.parseInt(A.clientVersion,10).toString();return{...A,clientVersion:j}},U4j=async(A,j,e)=>{let t=A.user;if(!t)throw new Error("Missing user");let r=t.secretKey&&t.secretKey.exportSensitiveReadableString();if(t.secretKey&&!r)throw new Error("Invalid Secret Key");if(!t.masterKey)throw new Error("Missing master key");let a=await y$(A.session,wjA(j),e);if(!(t.masterKey instanceof Zt))throw Nr(nI(E`Master key is not a valid Auk`,E`delegateSession`,t.uuid)),new TypeError("Master key is not a valid Auk");return{accountKey:r,email:t.email,masterKey:await t.masterKey.exportJwk(),derivationInfo:t.masterKey.derivationInfo,requestID:1,serverConfig:{notifier:a.notifier,userUuid:t.uuid,accountUuid:A.account?.uuid},sessionKey:a.sessionKey,dSecret:void 0}},v8A=async A=>{let j=new nq(A.config),e=A.user;if(!e)throw new Error("Missing current user");if(j.user=new eo({email:e.email,secretKey:e.secretKey,uuid:e.uuid}),j.user.dSecret=e.dSecret,j.user.masterKey=e.masterKey,!A.session||!A.session.auth)throw new Error("Auth info not available.");let t=A.session.auth.srpX,r=await j.session.signin(j.user,!1,t);if(r.type==="mfa_required")if(r.details.dsecret?.enabled){let n=j.user?.dSecret;if(!n)throw new Error("No dSecret available.");await j.session.verifyMfa({type:"dSecret",dshmac:RH(n,j.session.sessionUuid)})}else throw new Error("Unable to complete MFA, dSecret option not available.");return j},IjA=async A=>!A.isSignedIn()||A.user===void 0||A.user.masterKey===void 0||!A.session.auth?void 0:{email:A.user.email,muk:await A.user.masterKey.exportJwk(),secretKey:A.user.secretKey?A.user.secretKey.exportSensitiveReadableString():void 0,srpX:A.session.auth.srpX},x8A=async(A,{currentPassword:j,newPassword:e,generateNewSecretKey:t=!1,checkCurrentPassword:r=!0})=>{if(!A.user)throw new Error("Active user is missing");let a=A.user;if(!A.user.secretKey)throw new Error("Active user is missing secretKey");if(!e&&!t)throw new Error("Nothing to do");let n={oldSecretKey:A.user.secretKey,oldMasterKey:A.user.masterKey,oldActiveKeyset:A.user.activeKeyset,oldUserAuth:A.userAuth};try{r&&await DjA(A,j);let o=t?await Ba.generate():n.oldSecretKey;a.secretKey=o,a.password=e,A.userAuth=await Wr.generate({email:a.email,password:e,secretKey:o}),a.masterKey=await Zt.deriveDefaultKdf({email:a.email,password:e,secretKey:o});let i=await a.encryptActiveKeysetWithMasterKey();return a.password=void 0,[i,n]}catch(o){throw G8A(A,a,n),o}},X4j=async(A,j)=>{let[e,t]=await x8A(A,j);await f8A(A,e,t)},f8A=async(A,j,e)=>{if(!A.user)throw new Error("Active user is missing");let t=A.user;try{let r=A.userAuth;if(!r)throw new Error("User's auth info is missing");let a={email:t.email,auth:Wr.getForUpload(r),activeKeyset:j},n=t.secretKey;if(!n)throw new Error("Missing user's Secret Key");return n.id!==e.oldSecretKey.id&&(a.accountKeyFormat=n.format.toString(),a.accountKeyUuid=n.id),t.archivedKeysets.length>0&&(a.archivedKeyset=t.archivedKeysets[0]),uJ(A.session,a)}catch(r){throw G8A(A,t,e),r}},G8A=(A,j,e)=>{j.password=void 0,j.masterKey=e.oldMasterKey,j.activeKeyset=e.oldActiveKeyset,j.secretKey=e.oldSecretKey,A.userAuth=e.oldUserAuth},DjA=async(A,j)=>{let e=A.user;if(!e)throw new Error("User is missing");let t=e.masterKey;if(!t)throw new Error("Missing current master key");if(!(t instanceof Zt))throw Nr(nI(E`Master key is not a valid Auk`,E`verifyMasterPassword`,e.uuid)),new TypeError("Master key is not a valid Auk");let r=t.derivationInfo;if(r===void 0)throw new Error("Missing current derivation info");if(e.secretKey===void 0)throw new Error("Missing secret key");if(!await t.verifyMasterPassword(r,{email:e.email,secretKey:e.secretKey,password:j}))throw new CA.ClientError(CA.ClientErrorCode.incorrectMasterPassword,Z("Your email address, Secret Key, or password is incorrect."))},V4j=async(A,j)=>{await uR(A.session,j)},W4j=async A=>{try{await mR(A.session)}catch(j){throw console.error("[promptConfirmChangeEmail] Failed to send email change token:",j),j}},Y4j=async(A,j)=>{await pR(A.session,j)},Q4j=async(A,j,e,t)=>aI("completeChangeEmailForPasswordUser",async()=>{if(!A.user)throw new Error("User is missing");let r=A.user,a=r.email,n=A.userAuth,o=r.masterKey,i=r.activeKeyset;return DjA(A,e).then(async()=>(r.email=j,r.password=e,r.secretKey?(A.userAuth=await Wr.generate({email:j,password:e,secretKey:r.secretKey}),r.masterKey=await Zt.deriveDefaultKdf({email:j,password:e,secretKey:r.secretKey}),Promise.resolve()):Promise.reject(new Error("Missing Secret Key")))).then(async()=>r.encryptActiveKeysetWithMasterKey()).then(async s=>{if(!A.userAuth)throw new Error("User's auth info is missing");let l={email:j,auth:Wr.getForUpload(A.userAuth),activeKeyset:s};return aC(A.session,l,t)}).then(()=>{r.password=void 0}).catch(s=>{throw r.email=a,r.masterKey=o,r.activeKeyset=i,r.password=void 0,A.userAuth=n,s})}),Z4j=async(A,j,e)=>{if(!A.user)throw new Error("User is missing");let t=A.user;if(!A.session?.auth)throw new Error("User's auth info is missing");let r=A.session.auth;if(!t.secretKey)throw new Error("Missing Secret Key");let a=t.email;try{t.email=j;let n=await t.encryptActiveKeysetWithMasterKey(),o={email:j,auth:Wr.getForUpload(r),activeKeyset:n};await aC(A.session,o,e)}catch(n){throw t.email=a,n}},APj=async(A,j,e)=>bJ(A.session,j.uuid,e),jPj=async A=>yJ(A.session),ePj=async(A,j)=>wJ(A.session,j.uuid);var tPj=async(A,j)=>BJ(A.session,j),rPj=async(A,j,e)=>{let r=(await $C(A.session,j,Xf.Accept)).snooze.find(a=>a.group===e);if(r)return H6(r.until)},aPj=async(A,j,e)=>{let r=(await $C(A.session,j,Xf.Dismiss)).snooze.find(a=>a.group===e);if(r)return H6(r.until)};var A7=W(aA());var nPj=AA("web-api/api/billing/tax_jurisdiction.ts"),oPj=A7.type({country_name:A7.string,province_name:A7.string||void 0,tax_type:A7.string,effective_date:A7.string}),F8A=nPj((A,j)=>({name:"getNotifiableTaxJurisdictions",method:"POST",url:"/api/v1/tax-jurisdictions/notifiable",body:{country:A.toUpperCase(),province:j?j.toUpperCase():void 0},responseType:A7.type({data:A7.array(oPj)}),encrypted:!1}));var iPj="action/billing",rd=rj(iPj),Is=async A=>rd("getSubscription",async()=>{let j=A.account;return j?Ve.getSubscription(A.session).then(e=>{let t=Uu.subscriptionDetailAttrsFromAPI(e);return j.subscription={...j.subscription,...t},j.subscription}):Promise.reject(new Error("Missing account"))}),sPj=async(A,j=0,e=20)=>Ve.getInvoices(A.session,j,e),lPj=async(A,j)=>Ve.getInvoiceDetails(A.session,j),cPj=async(A,j)=>Ve.getInvoicePDF(A.session,j),dPj=async A=>rd("MspNfrSeats",async()=>Ve.getMspNfrInfo(A.session)),kPj=async(A,j)=>rd("MspDistributorLinkPreview",async()=>Ve.getMspDistributorLinkPreview(A.session,j)),uPj=async A=>rd("getMspLastInvoiceData",async()=>Ve.getMspLastInvoiceData(A.session)),pPj=async A=>rd("getMspProjectedInvoiceData",async()=>Ve.getMspProjectedInvoiceData(A.session)),mPj=async(A,j,e,t,r)=>rd("updateSubscription",async()=>{let a=A.account;if(!a)return Promise.reject(new Error("Missing account"));let n=j||a.subscription.tier,o=e||a.subscription.plan;if(!n)return Promise.reject(new Error("Missing tier"));if(!o)return Promise.reject(new Error("Missing plan"));let i={frequency:o.frequency,tierName:n.name,taxNumber:"",isTaxExempt:!1,country:"",provinceOrState:"",zip:""};return t&&(i.taxNumber=t.taxNumber,i.isTaxExempt=t.isTaxExempt),r&&(i.country=r.country,i.provinceOrState=r.provinceOrState,i.zip=r.zip),Ve.updateStripeSubscription(A.session,i).then(async()=>(a.subscription={...a.subscription,tier:n,plan:o},ao(A,[]))).then(async()=>Is(A)).then(s=>(to(A),s))}),EPj=async(A,j,e)=>rd("getValidPromotionFromCode",async()=>DL(j)?Ve.getValidPromotionFromCode(A.session,j,e):Promise.reject(new Error("Promo code format is invalid."))),BPj=async(A,j)=>rd("getIsValidPurchaseOrderToken",async()=>J4(j)?Ve.getIsValidPurchaseOrderToken(A.session,j):Promise.reject(new Error("Purchase order token format is invalid."))),gPj=async(A,j)=>rd("getIsValidStripePurchaseOrderToken",async()=>J4(j)?Ve.getIsValidStripePurchaseOrderToken(A.session,j):Promise.reject(new Error("Stripe purchase order token format is invalid."))),hPj=async(A,j)=>Ve.requestInvoiceEmail(A.session,j),b8A=A=>b0(A.cards,j=>j.isDefault),qPj=async(A,j)=>{await Ve.addCard(A.session,j);let e=await Is(A),t=e.cards[0];return t!==void 0&&!b8A(e)?OjA(A,t):e},vPj=async(A,j,e)=>Ve.updateCard(A.session,j,e).then(async()=>Is(A)),xPj=async(A,j)=>{let e=Ve.deleteCard;Cy(j.stripeCardUid)&&(e=Ve.deletePaymentMethod),await e(A.session,j.stripeCardUid);let t=await Is(A),r=t.cards[0];return r!==void 0&&!b8A(t)?OjA(A,r):t},fPj=async(A,j)=>(await Ve.deletePendingPaymentMethod(A.session,j.setupIntentUid),await Is(A)),GPj=async(A,j)=>Cy(j)?Ve.getPaymentMethod(A.session,j):Ve.getCard(A.session,j),OjA=async(A,j)=>Cy(j.stripeCardUid)?y8A(A,j.stripeCardUid):Ve.changeDefaultCard(A.session,j).then(async()=>Is(A)),y8A=async(A,j)=>Ve.changeDefaultPaymentMethod(A.session,j).then(async()=>Is(A)),PjA=async A=>rd("getAvailableTiers",async()=>{let j=A.account;return j?Ve.getAvailableTiers(A.session).then(e=>{let t=Uu.parseAvailableTiersFromAPI(e,j.subscription);return j.subscription={...j.subscription,availableTiers:t},j.subscription}):Promise.reject(new Error("Missing account"))}),FPj=async A=>rd("getAvailableTiersV3",async()=>A.account?Ve.getAvailableTiersV3(A.session).then(e=>Uu.parseAvailableTiersV3(e)):Promise.reject(new Error("Missing account"))),bPj=async A=>Ve.getUpgradeTiers(A.session).then(j=>Uu.parseTiersFromAPI(j)).catch(j=>{throw console.error("getUpgradeTiers failed:",j),j}),yPj=async A=>Ve.getDefaultTiers(A.session).then(j=>Uu.parseTiersFromAPI(j)).catch(j=>{throw console.error("getDefaultTiers failed:",j),j}),$Pj=async(A,j)=>rd("subscribeWithStripe",async()=>{let e=A.account;return e?Ve.activateStripeBilling(A.session,{setupIntentUid:j.token,tierName:j.tier?j.tier.name:"",frequency:j.plan?j.plan.frequency:"",country:j.country,province:j.province?j.province:"",postalCode:j.postalCode?j.postalCode:"",giftCardCode:j.giftCardCode?j.giftCardCode:""}).then(async()=>(e.subscription={...e.subscription,tier:j.tier},ao(A,[Dt.Billing]))).then(async()=>Is(A)).then(t=>(to(A),t)):Promise.reject(new Error("Missing account"))}),wPj=async A=>Ve.cancelStripeSubscription(A.session).then(async()=>ao(A,[Dt.Billing])).then(async()=>Is(A)).then(j=>(to(A),j)),IPj=async A=>Ve.endTrialPeriod(A.session),CjA=async(A,j,e,t,r,a)=>Ve.getTaxAdvice(A.session,{country:e,province:t,postalCode:r,price:j,tierName:a}).then(n=>({countryCode:n.countryCode.toLowerCase(),provinceOrStateCode:n.provinceCode?n.provinceCode.toLowerCase():"",postalCode:n.postalCode,taxRate:n.taxRate,taxRateString:n.taxRateString,effectiveTaxRate:n.effectiveTaxRate,effectiveTaxRateString:n.effectiveTaxRateString,taxName:n.taxName,isTaxed:n.originalPrice===0&&n.taxRate>0||n.totalTax>0,totalPrice:n.totalPrice,originalPrice:n.originalPrice,useTaxData:n.useTaxData})),DPj=async(A,j)=>Ve.createPlayStoreSubscription(A.session,j),OPj=async({session:A},j)=>Ve.createAppleSubscription(A,j),PPj=async(A,j)=>(await Ve.addOrUpdateAddress(A.session,j),Is(A)),CPj=async(A,j)=>{await Ve.activateStripeBilling(A.session,j)},HPj=async A=>Ve.getBillingStats(A.session).then(j=>({activeMembers:j.activeMembers,activeGuests:j.activeGuests,billedGuests:j.billedGuests,billedMembers:j.billedMembers})),TPj=async(A,j)=>{await Ve.linkAccountToPartner(A.session,j)},KPj=async(A,j)=>Ve.getRemainingAmount(A.session,j).then(e=>({remainingAmount:e.remainingAmount,isPartialRefund:e.isPartialRefund})),SPj=async(A,j,e)=>F8A(A.session,j,e);var HjA={};Yt(HjA,{deobfuscate:()=>_Pj,obfuscate:()=>LPj});var $8A="klp4y2ywpkpczwhhutf2fqy5ri",MPj="This value works around an OAuth implementation limitation. It has no other value or permissions.",w8A=async()=>Q6.rawHkdf(Q6.Sha2Mode.Sha256,Dj(MPj),new Uint8Array,Dj("brex-oauth-obfuscation"),32),_Pj=async A=>{if(!A)return"";let j=$t($8A);await j.importRawKey(Tt,await w8A());let e=await j.decrypt(A);return V6(e)},LPj=async A=>{let j=$t($8A);return await j.importRawKey(Tt,await w8A()),j.encrypt(Dj(A))};var KjA={};Yt(KjA,{createOrUpdateBrexAccess:()=>JPj,deleteBrexItemByUuid:()=>UPj,findBrexCredentials:()=>zPj,findBrexItemByRefreshToken:()=>D8A,findBrexItemByUuid:()=>O8A,getBrexRedirectUri:()=>TjA,getOrCreateSystemVault:()=>I8A});var I8A=async A=>{let j=await Ek(A);return j||await uq(A)},NPj=(A,j,e)=>{let t=new dA(A);return t.overview.integration="brex",t.details.sections=[{name:"brex",title:"brex",fields:[{k:"string",n:"accountId",t:"accountId",v:j},{k:"string",n:"refreshToken",t:"refreshToken",v:e}]}],t.templateUuid="800",t},zPj=A=>{let j=A.details.sections?.find(r=>r.name==="brex"),e=j?.fields?.find(r=>r.n==="refreshToken")?.v,t=j?.fields?.find(r=>r.n==="accountId")?.v;if(!e||typeof e!="string")throw new Error("Brex Integration Item is malformed: missing refreshToken");if(!t||typeof t!="string")throw new Error("Brex Integration Item is malformed: missing accountId");return{refreshToken:e,accountId:t}},D8A=(A,j)=>A.find(e=>e.templateUuid==="800"&&e.state===dA.ItemState.Active&&e.overview.integration==="brex"&&e.details.sections?.find(t=>t.name==="brex"&&t.fields?.some(r=>r.n==="refreshToken"&&r.v===j))),O8A=(A,j)=>A.find(e=>e.overview.integration==="brex"&&e.uuid===j),RPj=(A,j)=>{let t=A.details.sections?.find(r=>r.name==="brex")?.fields?.find(r=>r.n==="refreshToken");if(!t)throw new Error("Expected refresh token in existing Brex item");return t.v=j,A.updatedAt=new Date,A},JPj=async(A,j,e,t)=>{let r=await I8A(A),a=await td(A,r),n=t||D8A(a,e),o;return n?o=RPj(n,e):o=NPj(r,j,e),await gl(A,[o],r)},UPj=async(A,j)=>{let e=await Ek(A);if(!e)throw new Error("The system vault was expected but missing during Brex deletion");let t=await td(A,e),r=O8A(t,j);if(!r)throw new Error("The Brex record was expected but missing during Brex deletion");r.state=dA.ItemState.Deleted;let a=await gl(A,[r],e);if(a.failedItems[j])throw new Error("The Brex record was unable to be deleted");return a},TjA=A=>`https://${pl}.${A.server}/api/v1/brex/redirect`;var XPj={...KjA,...HjA},VPj=async A=>sQ(A.session),P8A=async(A,j)=>lQ(A.session,j),WPj=async A=>cQ(A.session),YPj=async(A,j,e)=>{let t=e.get("code")||"",r=e.get("state")||"";if(!t)throw new Error("OAuth code is missing");if(!r)throw new Error("OAuth state is missing");return P8A(A,{code:t,redirect:TjA(j),nonce:r})},QPj=async(A,j)=>dQ(A.session,j);var ZPj="action/child_account",SjA=rj(ZPj),ACj=async A=>SjA("createChildAccountRelationship",async()=>Ve.createChildAccountRelationship(A.session).then(Wh.create)),jCj=async A=>SjA("getChildAccountRelationship",async()=>{try{let j=await Ve.getChildAccountRelationship(A.session);return Wh.create(j)}catch(j){let e=N0(j);if(ah(e,rh.resourceNotFound))return Wh.create({});throw e}}),eCj=async(A,j)=>Ve.checkChildAccountCode(A.session,j),tCj=async A=>Ve.detachChildAccount(A.session),rCj=async(A,j)=>SjA("attachAsChildAccount",async()=>Ve.attachAsChildAccount(A.session,j).then(async()=>ao(A,[Dt.Billing])).then(async()=>Is(A)).then(e=>(to(A),e)));var aCj=async A=>gJ(A.session);var nCj="2",oCj=async(A,j)=>{if(!A.account)throw new Error("Account is missing.");if(!j.userAuth)throw new Error("Missing credential auth information.");let[e,t]=await Promise.all([Ju.generate(j),$t().generate(Tt)]),r={...e.localAuth,version:nCj,deviceUuid:fe(),uniqueKey:t};return{bearerToken:e.bearerToken,fileContents:JSON.stringify(r)}};var iCj="action/vault_access",vq=rj(iCj),C8A=async(A,j)=>vq("getAccessorsWithPubKeys",async()=>{let[e,t]=F0(j,n=>n.accessorType==="group"),r=await EAA(A,e),a=await ac(A,t);return[...MG(e,r),...MG(t,a)]}),MjA=async(A,j,e,t)=>vq("addAccessorsToVault",async()=>{let a=(await C8A(A,j)).map(async s=>ft.generate(e,s,t.byUuid&&t.byUuid[s.uuid]||t.default)),o=(await Promise.all(a)).map(Bl);await K6(async s=>(await jC(A.session,e.uuid,s),[]),100,o)}),sCj=async(A,j,e,t)=>vq("addAccessorToVaults",async()=>{let[r]=await C8A(A,[j]);if(!r)throw new Error("Missing accessor with public key.");let a=e.map(async n=>(n.defaultAcl!==void 0&&(t.acl=n.defaultAcl),ft.generate(n,r,t).then(async o=>{let i=Bl(o);return jC(A.session,n.uuid,[i])})));return Promise.all(a).then(()=>{})}),lCj=async(A,j)=>vq("updateVaultAccessPermissions",async()=>{if(le.isEffectivelyZero(j.acl))await LjA(A,j);else return j.accessorType==="group"?Tz(A.session,j.vaultUuid,j.accessorUuid,j.acl):Hz(A.session,j.vaultUuid,j.accessorUuid,j.acl)}),_jA=async(A,j)=>{if(j.some(e=>e.accessorType!=="group"))throw new Error("Some of the vaultAccess objects in updateBulkGroupVaultAccessPermissions were not groups");return vq("updateBulkGroupVaultAccessPermissions",async()=>(await Promise.all(j.filter(e=>le.isEffectivelyZero(e.acl)).map(async e=>LjA(A,e))),Kz(A.session,j.map(e=>({vaultUuid:e.vaultUuid,groupUuid:e.accessorUuid,permission:e.acl})))))},H8A=async(A,j,e,t)=>vq("deleteAccessorFromVault",async()=>{let r=t==="group",a=r?zd(j):ko(j);if(!a)return Promise.reject(new Error("Invalid accessor reference"));let n=Iy(e);return n?Cz(A.session,n,a,r).then(async()=>{let o=r?Na(A,a,{attrs:wA.Attr.VaultAccess,mustReload:!0}):Qu(A,a,{attrs:Hr.Attr.VaultAccess,mustReload:!0});return Promise.all([Yu(A,n,{attrs:ej.Attr.Accessors,mustReload:!0}),o])}):Promise.reject(new Error("Invalid vault reference"))}),LjA=async(A,j)=>vq("revokeVaultAccess",async()=>H8A(A,j.accessorUuid,j.vaultUuid,j.accessorType));var oI=rj("action/convert_account"),cCj=async A=>{if(!A.user)throw new Error("Missing user");let{user:j}=A;await iK(A,dt.Type.Individual,async()=>v$(A.session,{type:dt.Type.Individual,accountName:j.name}))},dCj=async(A,j,e)=>{await iK(A,dt.Type.Family,async()=>v$(A.session,{type:dt.Type.Family,accountName:j,childAccountCode:e}))},kCj=async(A,j)=>{let e=await hq(A,j);await iK(A,dt.Type.Business,async()=>v$(A.session,{type:dt.Type.Business,accountName:j,domain:e}))},uCj=async(A,j,e,t,r)=>{let a;j.accountType===dt.Type.Business&&(a=await hq(A,t)),await iK(A,j.accountType,async()=>wR(A.session,{tierName:e,accountName:t,domain:a,childAccountCode:r}))},pCj=async(A,j,e)=>{try{await ez(A.session,{newTierName:j}),await NjA(A),await T8A(A,e),await K8A(A)}catch{throw new Error("Failed to change tier")}},iK=async(A,j,e)=>{mCj(A),await NjA(A),await ECj(A,j),await e(),await T8A(A,j),await K8A(A)},mCj=A=>{let{account:j,user:e}=A;if(!j)throw new Error("Missing account");if(!e)throw new Error("Missing user")},T8A=async(A,j)=>{let{account:e}=A;e&&(e.type=j,await NjA(A))},K8A=async A=>{let{account:j}=A;if(!j)return;let{subscription:{availableTiers:e}}=j;e&&e.length>0&&await PjA(A),to(A)},NjA=async A=>oI("reload",async()=>{let j=ao(A,[Dt.Billing,Dt.Invite,Dt.Settings,Dt.Tier,Dt.UserFlags,Dt.Groups]),e=RB(A);return Promise.all([j,e])}),ECj=async(A,j)=>{switch(j){case dt.Type.Business:return BCj(A);case dt.Type.Family:return gCj(A);case dt.Type.Individual:return;default:throw new Error("Unknown account type")}},BCj=async A=>oI("convertToBusiness",async()=>{let j=A.user;if(!j)return Promise.reject(new Error("Missing user"));let e={attrs:wA.Attr.Memberships|wA.Attr.PubKey};return Promise.all([QT(A,e),ZT(A,e),ro(A,e)]).then(async t=>{let[r,a,n]=t;return S8A(A,j,n).then(async o=>M8A(A,a,r,n,o))}).then(()=>{})}),gCj=async A=>oI("convertToFamily",async()=>{let j=A.user;if(!j)return Promise.reject(new Error("Missing user"));let e,t,r,a={attrs:wA.Attr.Memberships|wA.Attr.PubKey};return Promise.all([QT(A,a),ZT(A,a),ro(A,a)]).then(async n=>([e,t,r]=n,uB(A.session,{attrs:["combinedPermissions"]}))).then(async({users:n})=>{let o=n.filter(s=>Yj.isOwner(s)&&!Yj.isAdmin(s)).map(s=>({uuid:s.uuid,role:sr.Role.Manager})),i=n.filter(s=>Yj.isAdmin(s)&&!Yj.isOwner(s)).map(s=>({uuid:s.uuid,role:sr.Role.Manager}));return Promise.all([cq(A,{group:e,add:o,remove:[]}),cq(A,{group:t,add:i,remove:[]})])}).then(async()=>RB(A)).then(async n=>{let o=[],i=n.filter(k=>k.type!==ej.TypePersonal&&ej.activeUserHasAcl(k,le.Manage)),s=Oc(i,k=>{let u=!1,m=!1,I=k.accessList.filter(f=>f.accessorType==="group").map(f=>{let v=A.account&&A.account.findGroup(f.accessorUuid);if(!v)throw new Error("Missing group "+f.accessorUuid);switch(v.type){case wA.TypeOwners:return u=!0,f.acl=le.Manage,f;case wA.TypeAdmins:return m=!0,f.acl=le.Manage,f;default:{let P=(f.acl&le.RWE)>(f.acl&le.ALL_READ);return f.acl=P?le.RWE:le.ALL_READ,f}}}),S=[];if(u||S.push(t),m||S.push(e),S.length>0){let f=S.map(v=>({accessorType:v.accessorType,uuid:v.uuid}));o.push(MjA(A,f,k,{default:{acl:le.Manage}}))}return I}),l=100,d=1;return await K6(async k=>(`${Math.min(s.length,d++*l)}${s.length}`,await _jA(A,k),[]),l,s),Promise.all(o)}).then(async()=>S8A(A,j,r)).then(async n=>M8A(A,t,e,r,n)).then(()=>{})}),S8A=async(A,j,e)=>oI("createTeamMembersGroupIfNeeded",async()=>{if(A.account&&A.account.teamMembersGroup)return gk(A,{attrs:wA.Attr.PubKey});let t=new wA({desc:"All team members.",name:"Team Members",type:wA.TypeTeamMembers});return hk(A,t,e).then(async r=>t.addMembership(r,j,{role:sr.Role.Member})).then(async()=>Zu(A,t,void 0))}),M8A=async(A,j,e,t,r)=>oI("createTeamVaultIfNeeded",async()=>Em(A).then(async a=>{if(a)return a;let n=eK();return n.generateNewKey().then(async()=>Promise.all([ft.generate(n,j,{acl:le.Manage}),ft.generate(n,e,{acl:le.Manage}),ft.generate(n,t,{acl:le.Recover}),ft.generate(n,r,{acl:le.ALL_READ|le.ALL_WRITE|le.ALL_EXPORT})])).then(async o=>pq(A,n,o))}));var iI=W(aA());var zjA=W(Io());var hCj=AA("web-api/action/demo_vault_items.ts"),qCj=["wendy","wendyappleseed","wendy@appleseed.com"],vCj=["has_credit_card","has_address"],xCj=iI.record(iI.string,iI.string),fCj=async(A,j,e,t)=>{let r=await GCj(A.session),a=Nl(r),n=X6(t,s=>s.uuid===yj.LoginUuid),o=[],i=1;for(let s=0;s<j;s++){let l=new dA(e,n),d=Pc(a);d===0&&(a=Nl(r),d=Pc(a),i++);let k=F6(0,d-1),u=Object.keys(a)[k];if(u===void 0)continue;delete a[u];let m=i>1?` (${i.toString()})`:"";l.title=r[u]+m,l.overview.URLs=[{l:"website",u:"https://"+u}],l.overview.url="https://"+u;let I=qCj[F6(0,2)];I!==void 0&&l.setUsername(I);let[S,f]=sK();l.setPassword(S,!0,f);let v=F6(1,40)===1;l.faveIndex=v?1:0;let P=F6((0,zjA.default)().unix()-31536e3,(0,zjA.default)().unix());if(l.createdAt=new Date(P*1e3),l.updatedAt=new Date(P*1e3),F6(1,10)===1){let C={time:P-F6(2e6,6e6),value:sK()[0]};l.details.passwordHistory=[C]}let D=[];if(F6(1,15)===1){let C={k:dA.FieldType.Concealed,n:dA.TOTP_PREFIX+fe(),v:fe(),t:"one-time password"},b={name:fe(),title:"",fields:[C]};D.push(b)}if(F6(1,15)===1){let C={k:dA.FieldType.Concealed,n:fe(),v:sK()[0],t:"First pet's name?"},b={k:dA.FieldType.Concealed,n:fe(),v:sK()[0],t:"Mother's maiden name?"},h={name:fe(),title:"Security Questions",fields:[C,b]};D.push(h)}if(F6(1,15)===1){let C={k:dA.FieldType.Email,n:fe(),v:"support@"+u,t:"email"},b={k:dA.FieldType.Phone,n:fe(),v:"1-800-"+F6(100,999).toString()+"-"+F6(1e3,9999).toString(),t:"phone"},h={name:fe(),title:"Contact Info",fields:[C,b]};D.push(h)}if(l.details.sections=D,F6(1,15)===1){let C=vCj[F6(0,1)];C!==void 0&&(l.tags=[C])}F6(1,15)===1&&(l.notes="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suam denique cuique naturam esse ad vivendum ducem."),o.push(l)}await gl(A,o,e)},sK=()=>{if(F6(0,1)===1){let[A,j]=aN(F6(4,5));return[A.join(" "),j]}else{let A=$u.UPPERCASE+$u.LOWERCASE+$u.DIGITS;return Lp(A,F6(15,25))}},GCj=hCj(()=>({name:"getDemoWebsites",method:"GET",url:"/demo-data/websites.json",responseType:xCj,encrypted:!1}));var FCj=async(A,j)=>hJ(A.session,j),bCj=async(A,j,e,t,r,a)=>qJ(A.session,j,e,t,r,a),yCj=async(A,j,e,t)=>vJ(A.session,j,e,t),$Cj=async(A,j,e,t,r,a)=>{let{numSharedVaults:n,sharedVaults:o}=await xJ(A.session,j,e,t,r,a),i=await Promise.all(o.map(async({developerItems:s,uuid:l,vault:d})=>{if(!d)return{developerItems:s,uuid:l};let k=await bs(A,d);return{developerItems:s,vault:k,uuid:l}}));return{numSharedVaults:n,sharedVaults:i}},wCj=async(A,j,e,t)=>fJ(A.session,j,e,t),ICj=async(A,j,e,t,r)=>GJ(A.session,j,e,t,r),DCj=async(A,j,e)=>FJ(A.session,j,e);var OCj="action/distributors",_8A=rj(OCj),PCj=async(A,j)=>_8A("getDistributorEntitlementFromCode",async()=>R4(j)?jq.getDistributorEntitlementFromCode(A.session,j):Promise.reject(new Error("Distributor entitlement code format is invalid."))),CCj=async A=>jq.getDistributor(A.session),HCj=async(A,j)=>_8A("linkDistributorByEntitlementCode",async()=>{if(!R4(j))return Promise.reject(new Error("Distributor entitlement code format is invalid."));await jq.linkDistributorByEntitlementCode(A.session,j)});var TCj=async A=>await IJ(A.session),KCj=async(A,j)=>DJ(A.session,j);var SCj=async A=>OJ(A.session),MCj=async(A,j)=>PJ(A.session,j),_Cj=async(A,j)=>HJ(A.session,j),LCj=async(A,j)=>CJ(A.session,j);var NCj=async A=>oQ(A.session),zCj=async(A,j)=>iQ(A.session,j);var RjA=class{constructor(){this.accountBasedFeatures=new Map,this.preRegistrationFeatures=new Map}hasAccountBasedFeature(j){let e=this.accountBasedFeatures.get(j);return e?e.enabled:!1}hasPreRegistrationFeature(j){let e=this.preRegistrationFeatures.get(j);return e?e.enabled:!1}async updateAccountBasedFeatures(j){let e=j.account?.hasUnleashFeature;e&&Object.keys(e).length&&Object.keys(e).forEach(t=>{this.accountBasedFeatures.set(t,{enabled:!0})});try{let t=Object.keys(hf);(await QG(j,t)).features.forEach(a=>{let n={enabled:!0};rK(a.variantPayload?.value)&&(n.variantPayload=a.variantPayload),this.accountBasedFeatures.set(a.name,n)})}catch(t){console.error("failed to update account-based flags",t)}ps()&&console.info(`\u26F3\uFE0F Feature flags -  Loaded account features:
				${JSON.stringify([...this.accountBasedFeatures.keys()])}`)}async updatePreRegistrationFeatures(j){try{let e=await RCj(j);e&&(ps()&&console.info("\u26F3\uFE0F Feature flags - Feature Rollout service traffic enabled."),await this.populateBaseFeatureContext(j));let t=await aK(j,e,this.baseFeatureContext);for(let[r,a]of Object.entries(t))this.preRegistrationFeatures.set(r,a)}catch(e){console.error("failed to update preregistration flags",e)}ps()&&console.info(`\u26F3\uFE0F Feature flags -  Loaded pre-registration features:
				${JSON.stringify([...this.preRegistrationFeatures.keys()])}`)}getPreRegistrationVariant(j,e){let t=this.preRegistrationFeatures.get(j)?.variantPayload;return L8A(j,t,e)}getAccountBasedFeatureVariant(j,e){let t=this.accountBasedFeatures.get(j)?.variantPayload;return L8A(j,t,e)}async populateBaseFeatureContext(j){try{let e=uh(),t=await _E(navigator.userAgent);this.baseFeatureContext={app:e.clientName,browserType:t.name,buildNumber:j.config.opua.client.buildNum.toString(),deviceUuid:e.uuid,platform:e.osName,subEnvironment:j.config.env}}catch(e){console.error("Failed to populate base feature context",e)}}},L8A=(A,j,e)=>{try{return j?m8A(e,j):void 0}catch(t){console.error(`Failed to validate variant payload for feature ${A}`,t);return}},RCj=async A=>((await nK("b5web-feature-rollout-service-traffic-enabled",A))["b5web-feature-rollout-service-traffic-enabled"]?.enabled??!1)&&A.config.env!=="lcl";var JCj=async(A,j)=>LJ(A.session,j),UCj=async A=>NJ(A.session).then(async j=>RZ(j));var XCj=async(A,j)=>TJ(A.session,j);var VCj="action/gift_card",N8A=rj(VCj),WCj=async A=>N8A("getGiftCards",async()=>Ve.getGiftCards(A.session).then(j=>j.map(Py.create))),YCj=async(A,j)=>N8A("redeemGiftCard",async()=>Ve.redeemGiftCard(A.session,j)),QCj=async(A,j)=>Ve.checkGiftCard(A.session,j);var xeA={};Yt(xeA,{BoundCellType:()=>vm,CCHeader:()=>M6,CellAttr:()=>WB,HeaderType:()=>mI,ImportFormat:()=>xl,ItemKind:()=>od,LoginHeader:()=>nd,SecureNoteHeader:()=>VB,createVaultItems:()=>nOA,csvToVaultItems:()=>heA,findLongestRowLength:()=>dK,importVaultItems:()=>oOA,parse:()=>oc,removeEmptyColumns:()=>VjA});var ZCj="action/vault_item_template",AHj=rj(ZCj),z8A=async(A,j=!1)=>(await pz(A.session,j)).templates.map(TB),Vi=async A=>z8A(A,!0),jHj=async A=>{let j=await ZP(A.session,yj.IdentityUuid);return TB(j)},eHj=async(A,j)=>AHj("getDefaultTemplate",async()=>{let e=await ZP(A.session,j);return TB(e)}),tHj=async(A,j)=>mz(A.session,{...ei(j,"sidebarIcon"),sourceIcon:j.sidebarIcon}),rHj=async(A,j,e)=>{let t=j.map(r=>r.uuid);return Ez(A.session,t,e)},sI=async A=>{let j=await Vi(A),e=j.find(n=>n.uuid===yj.LoginUuid);if(!e)throw new Error("login template not found");let t=j.find(n=>n.uuid===yj.CreditCardUuid);if(!t)throw new Error("credit card template not found");let r=j.find(n=>n.uuid===yj.SecureNoteUuid);if(!r)throw new Error("secure note template not found");let a=j.find(n=>n.uuid===yj.IdentityUuid);if(!a)throw new Error("identity template not found");return{loginTemplate:e,creditCardTemplate:t,secureNoteTemplate:r,identityTemplate:a}};var oe;(function(A){A.populateVaultItemSectionField=(e,t,r,a,n,o)=>{typeof a<"u"?j(e,r,a,n):A.addFieldToOtherFieldsSection(e,t,r,o)};let j=(e,t,r,a)=>{let n=X6(e.details.sections,i=>i.name===r.section||i.title===r.section);n||(n={name:q.generateUUID(),title:r.section,fields:[]},e.details.sections.push(n));let o=n?.fields?.find(i=>i.n===r.field);if(o){r.v?o.v=r.v(o,t):o.v=t;let i=A.getItemOverview(a,o,e);i!==""&&(e.overview.ainfo=i)}else{n.fields||(n.fields=[]);let i=A.createSectionField({kind:r.kind||dA.FieldType.String,title:r.field,value:t,attributes:r.attributes||void 0,inputTraits:r.inputTraits||void 0,menuItems:r.menuItems||void 0});r.v&&(i.v=r.v(i,t)),n.fields.push(i)}};A.addFieldToOtherFieldsSection=(e,t,r,a)=>{let n=X6(e.details.sections,o=>o.title===a["Other Fields"]());n?(n.fields||(n.fields=[]),n.fields.push(A.createSectionField({kind:dA.FieldType.String,title:t,value:r}))):e.details.sections.push({name:q.generateUUID(),title:a["Other Fields"](),fields:[A.createSectionField({kind:dA.FieldType.String,title:t,value:r})]})},A.createSectionField=e=>({k:e.kind,v:e.value,t:e.title,n:q.generateUUID(),a:e.attributes,inputTraits:e.inputTraits,m:e.menuItems}),A.getItemOverview=(e,t,r)=>{if(e&&e.attrs.subtitle===t.n)return dA.getStringValue(t);if(r.templateUuid===fA.VaultItemTemplate.CreditCardUuid&&t.n===dA.FieldName.CreditCard.CreditCardNumber){let a=dA.getStringValue(t);return dA.getCreditCardSubtitle(a)}return""},A.getVaultItemTemplate=(e,t)=>{let r=t.find(a=>a.uuid===e);if(!r)throw new Error(`Could not find template with ID "${e}"`);return r},A.getValueFromRecord=(e,t)=>{let r=e[t];return r===void 0?"":r}})(oe||(oe={}));var ZG=async(A,j,e)=>Vi(A).then(t=>{let r=oe.getVaultItemTemplate(yj.LoginUuid,t);return j.map(a=>{let n=new dA(e),[o,i,s,l]=a;return n.templateUuid=yj.LoginUuid,n.title=o||r.singularName,i&&(n.url=i),s&&n.setUsername(s),l&&n.setPassword(l),n})}).catch(t=>{throw t});var lK=W(XjA());var oc=A=>{let j=R8A(A,{skipEmptyLines:!0}),e=j.errors.length>0;return e&&console.error("Possible errors importing data:",j.errors),{parsedData:j.data,hasErrors:e}},cK=A=>R8A(A,{skipEmptyLines:!0,header:!0}).data;var R8A=(A,j)=>(aHj(),lK.parse(A,j));var aHj=()=>{if(typeof lK>"u")throw new TypeError("Papa Parse must be loaded first.")};var VjA=A=>{let j=dK(A),e=[];for(let t=0;t<j;t++){let r=A.some(a=>a[t]);e.push(r)}return A.map(t=>t.filter((r,a)=>e[a]))};var dK=A=>A.reduce((j,e)=>e.length>j?e.length:j,0),nHj=(A,j)=>{if(!(!A.details||!A.details.sections))return X6(A.details.sections,e=>e.title.toLowerCase()===j.toLowerCase())},gi=(A,j,e)=>{if(A.length===0)return;A.indexOf("apple-otpauth://")===0&&(A=A.slice(6));let t={k:dA.FieldType.Concealed,n:dA.TOTP_PREFIX+fe(),v:A,t:e["one-time password"]()},r=nHj(j,e.security());if(r)r.fields?r.fields.push(t):r.fields=[t];else{let a={name:"Section_"+fe(),title:e.security(),fields:[t]};j.details&&j.details.sections?j.details.sections.push(a):j.details.sections=[a]}};var oHj="action/import/apple",iHj=rj(oHj),J8A=async(A,j,e)=>iHj("parseAppleExport",async()=>{let t=oc(j).parsedData;return t.length===0?[]:(t[0]&&t[0][0]==="Title"&&t.shift(),ZG(A,t,e))});var zj=W(aA()),V8A=W(Io());var sHj="action/import/bitwarden",lHj=rj(sHj),JB;(function(A){A.BadEncType="bad encType attribute",A.BadData="the encrypted data has a different format than expected",A.BadMac="failed to verify mac"})(JB||(JB={}));var W8A=(A,j,e,t,r)=>lHj("parseBitwardenExport",async()=>{let a,n=sj(Dj(j),Ue.pipe(mHj));switch(n.type){case"ok":{a=n.value;break}case"err":throw new Error(t.unsupportedBitwardenExport())}if(!a.encrypted||!a.passwordProtected)throw new Error(t.unsupportedBitwardenExport());if(a.kdfType!==WjA.Pbkdf2Sha256)throw new Error(t.unsupportedBitwardenKdfType(a.kdfType));let o=await cHj(a,r.bitwardenExportPasssword);r.bitwardenExportPasssword="";try{await X8A(o,a.encKeyValidation_DO_NOT_EDIT)}catch{throw new Error(t.bitwardenBadPassword())}let i;try{i=await X8A(o,a.data)}catch{throw new Error(t.bitwardenFailedToDecrypt())}let s=sj(i,Oo.pipe(xHj)),l;switch(s.type){case"ok":{if(l=s.value,l.collections&&l.collections.length>0)throw new Error(t.bitwardenSharedItemsImportedError());break}case"err":throw Bs(s.value,E`action/import/bitwarden`,E`parseBitwardenExport`),new Error(t.unsupportedBitwardenExport())}return await dHj(A,e,t,l)}),kK={name:"HMAC",hash:"SHA-256"},cHj=async(A,j)=>{let e=await we.importKey("raw",Dj(j),"PBKDF2",!1,["deriveBits"]),t=await we.deriveBits({name:"PBKDF2",hash:"SHA-256",salt:Dj(A.salt),iterations:A.kdfIterations},e,256),r=await we.importKey("raw",t,kK,!1,["sign"]),a=await U8A(r,Dj("enc"),32),n=await U8A(r,Dj("mac"),32);return{enc:await we.importKey("raw",a,"AES-CBC",!1,["decrypt"]),mac:await we.importKey("raw",n,kK,!1,["verify"])}},U8A=async(A,j,e)=>{let t=Math.ceil(e/32),r=new Uint8Array,a=new Uint8Array(e),n=0;for(let o=1;o<=t&&n<e;++o){let i=new Uint8Array(r.byteLength+j.byteLength+1);i.set(r),i.set(j,r.byteLength),i.set([o],r.byteLength+j.byteLength),r=new Uint8Array(await we.sign(kK,A,i)),a.set(r,n),n+=r.byteLength}return a},X8A=async(A,j)=>{let e=j.split("."),t=e[0],r=e[1],a=cI.AesCbc256WithHmacSha256;if(t!==void 0){let s=parseInt(t,10);if(!(s in cI))throw new Error(JB.BadEncType);a=s}else throw new Error(JB.BadEncType);if(r===void 0)throw new Error(JB.BadData);let n=r.split("|");if(n[0]===void 0||n[1]===void 0)throw new Error(JB.BadData);let o=ZA(n[0]),i=ZA(n[1]);switch(a){case cI.AesCbc256WithHmacSha256:{if(n[2]===void 0)throw new Error(JB.BadData);let s=ZA(n[2]),l=new Uint8Array(o.byteLength+i.byteLength);if(l.set(o,0),l.set(i,o.byteLength),!await we.verify(kK,A.mac,s,l))throw new Error(JB.BadMac);return V6(await we.decrypt({name:"AES-CBC",iv:o},A.enc,i))}default:return""}},cI;(function(A){A[A.AesCbc256WithHmacSha256=2]="AesCbc256WithHmacSha256"})(cI||(cI={}));var WjA;(function(A){A[A.Pbkdf2Sha256=0]="Pbkdf2Sha256"})(WjA||(WjA={}));var dHj=async(A,j,e,t)=>{let{loginTemplate:r,creditCardTemplate:a,secureNoteTemplate:n,identityTemplate:o}=await sI(A),i={};t.folders&&t.folders.forEach(d=>i[d.id]=d.name);let s=[];return(t.items?t.items:[]).forEach(d=>{if(d.deletedDate||d.collectionId)return;let k=new dA(j);if(k.isNewItem=!0,d.folderId){let m=i[d.folderId];m&&k.addTag(m)}k.title=d.name,d.notes&&(k.notes=d.notes),k.faveIndex=d.favorite?1:0,d.creationDate&&(k.createdAt=new Date(d.creationDate)),d.revisionDate&&(k.updatedAt=new Date(d.revisionDate));let u=[];if(d.fields)for(let m of d.fields){let I=m.type===YjA.Boolean?"C":"T";u.push({value:m.value?m.value:"",type:I,name:m.name?m.name:""})}if(k.webFormFields=u,d.passwordHistory)for(let m of d.passwordHistory)k.details.passwordHistory||(k.details.passwordHistory=[]),k.details.passwordHistory.push({time:m.lastUsed?.getTime(),value:m.password});switch(d.type){case dI.Card:{kHj(k,a,e,d);break}case void 0:case null:case dI.Login:{uHj(k,r,e,d);break}case dI.Identity:{pHj(k,o,e,d);break}default:{k.parseTemplate(n);break}}s.push(k)}),s},kHj=(A,j,e,t)=>{A.parseTemplate(j);let r=t.card;if(r)for(let a of[{key:"cardholder",value:r.cardholderName},{key:"type",value:r.brand},{key:"ccnum",value:r.number},{key:"cvv",value:r.code},{key:"expiry",value:(0,V8A.default)(`${r.expMonth}/${r.expYear}`,["MM/YYYY","M/YYYY"]).format("YYYYMM")}])a.value&&oe.populateVaultItemSectionField(A,a.key,a.value,{section:"",field:a.key},j,e)},uHj=(A,j,e,t)=>{A.parseTemplate(j);let r=t.login;if(r){if(r.username&&A.setUsername(r.username),r.password&&A.setPassword(r.password),r.uris)for(let a of r.uris)a.uri&&(A.url=a.uri);r.totp&&gi(r.totp,A,e)}},pHj=(A,j,e,t)=>{A.parseTemplate(j);let r=t.identity;if(r)for(let a of[{section:"name",key:"title",value:r.title},{section:"name",key:"firstname",value:r.firstName},{section:"name",key:"middle name",value:r.middleName},{section:"name",key:"lastname",value:r.lastName},{section:"name",key:"company",value:r.company},{section:"name",key:"ssn",value:r.ssn,kind:dA.FieldType.Concealed},{section:"name",key:"passportnumber",value:r.passportNumber,kind:dA.FieldType.Concealed},{section:"name",key:"licensenumber",value:r.licenseNumber,kind:dA.FieldType.Concealed},{section:"address",key:"address",v:{street:[r.address1,r.address2,r.address3].join(`
`),city:r.city,state:r.state,zip:r.postalCode,country:r.country}},{section:"address",key:"defphone",value:r.phone},{section:"internet",key:"email",value:r.email},{section:"internet",key:"username",value:r.username}])oe.populateVaultItemSectionField(A,a.key,a.value?a.value:"",{section:a.section,field:a.key,kind:a.kind,v:a.value?void 0:(n,o)=>a.v},j,e)},mHj=zj.readonly(zj.type({encrypted:zj.boolean,passwordProtected:zj.boolean,salt:zj.string,kdfType:zj.number,kdfIterations:zj.number,encKeyValidation_DO_NOT_EDIT:zj.string,data:zj.string}),"EncryptedFileFormat"),EHj=zj.readonly(zj.type({id:zj.string,name:zj.string}),"Folder"),kt=A=>GA(zj.union([A,zj.undefined,zj.null]),void 0),BHj=zj.readonly(zj.type({id:zj.string,organizationId:kt(zj.string),name:zj.string,externalId:kt(zj.string)}),"Collection"),dI;(function(A){A[A.Login=1]="Login",A[A.SecureNote=2]="SecureNote",A[A.Card=3]="Card",A[A.Identity=4]="Identity"})(dI||(dI={}));var gHj=zj.readonly(zj.type({uris:kt(zj.readonlyArray(zj.type({uri:kt(zj.string)}))),username:kt(zj.string),password:kt(zj.string),totp:kt(zj.string)}),"LoginItemType"),hHj=zj.readonly(zj.type({cardholderName:kt(zj.string),brand:kt(zj.string),number:kt(zj.string),expMonth:kt(zj.string),expYear:kt(zj.string),code:kt(zj.string)}),"CardItemType"),qHj=zj.readonly(zj.type({title:kt(zj.string),firstName:kt(zj.string),middleName:kt(zj.string),lastName:kt(zj.string),address1:kt(zj.string),address2:kt(zj.string),address3:kt(zj.string),city:kt(zj.string),state:kt(zj.string),postalCode:kt(zj.string),country:kt(zj.string),company:kt(zj.string),email:kt(zj.string),phone:kt(zj.string),ssn:kt(zj.string),username:kt(zj.string),passportNumber:kt(zj.string),licenseNumber:kt(zj.string)}),"IdentityItemType"),YjA;(function(A){A[A.Text=0]="Text",A[A.Hidden=1]="Hidden",A[A.Boolean=2]="Boolean",A[A.Linked=3]="Linked"})(YjA||(YjA={}));var vHj=zj.readonly(zj.type({id:zj.string,organizationId:kt(zj.string),folderId:kt(zj.string),collectionId:kt(zj.string),type:kt(zj.number),name:zj.string,notes:kt(zj.string),fields:kt(zj.readonlyArray(zj.type({name:kt(zj.string),value:kt(zj.string),type:kt(zj.number),linkedId:kt(zj.number)}))),favorite:kt(zj.boolean),login:kt(gHj),card:kt(hHj),identity:kt(qHj),reprompt:kt(zj.number),passwordHistory:kt(zj.readonlyArray(zj.type({password:zj.string,lastUsed:kt(Yn)}))),revisionDate:kt(Yn),creationDate:kt(Yn),deletedDate:kt(Yn)}),"Item"),xHj=zj.readonly(zj.type({folders:kt(zj.readonlyArray(EHj)),collections:kt(zj.readonlyArray(BHj)),items:kt(zj.readonlyArray(vHj))}),"FileFormat");var fHj="action/import/chrome",GHj=rj(fHj),Y8A=async(A,j,e)=>GHj("parseChromeExport",async()=>{let t=oc(j).parsedData;return t.length===0?[]:(t[0]&&t[0][0]==="name"&&t.shift(),ZG(A,t,e))});var QjA=W(Io());var Q8A=async(A,j,e,t)=>{let r=await Vi(A),a=cK(j),n=!1;if(a[0]){let o=Object.keys(a[0]);Object.values(UB).forEach(i=>{let s=OHj[i];s?.[0]===o[0]&&s?.[1]===o[1]&&o[0]===en.UsernameOne&&(n=!0)})}return a.map(o=>n?FHj(o,e,oe.getVaultItemTemplate(yj.LoginUuid,r),t):bHj(o,e,r,t))},FHj=(A,j,e,t)=>{let r=new dA(j,e);r.title=oe.getValueFromRecord(A,en.Title)||e.singularName,r.url=oe.getValueFromRecord(A,en.Url),r.notes=oe.getValueFromRecord(A,en.Note);let a=oe.getValueFromRecord(A,en.Category);r.tags=a.length>0?[a]:[];let n=oe.getValueFromRecord(A,en.OtpSecret);n.length>0&&gi(n,r,t),r.setPassword(oe.getValueFromRecord(A,en.Password));let o=oe.getValueFromRecord(A,en.UsernameOne),i=oe.getValueFromRecord(A,en.UsernameTwo),s=oe.getValueFromRecord(A,en.UsernameThree),l=Z8A[tt.Login];i.length===0&&s.length===0?r.setUsername(o):i.length>0&&s.length===0?(r.setUsername(i),oe.populateVaultItemSectionField(r,"email",o,l?.email,e,t)):s.length>0&&(r.setUsername(i),oe.populateVaultItemSectionField(r,"email",o,l?.email,e,t),oe.populateVaultItemSectionField(r,"secondary login",s,l?.secondaryLogin,e,t));let d=new Set(Object.values(en).map(k=>k.toString()));return Object.entries(A).filter(([k,u])=>!d.has(k)).forEach(([k,u])=>{oe.populateVaultItemSectionField(r,k,u,void 0,e,t)}),r},bHj=(A,j,e,t)=>{let r=oe.getValueFromRecord(A,"type")||tt.SecureNote,a=oe.getVaultItemTemplate(PHj[r]??yj.SecureNoteUuid,e),n=new dA(j,a);n.title=yHj(A,r,a);let o=oe.getValueFromRecord(A,wHj(r))||"";n.notes=o;let i=Z8A[r];if(Object.entries(A).forEach(([s,l])=>{IHj(r,s,l)&&oe.populateVaultItemSectionField(n,s,l,i?.[s],a,t)}),r===tt.CreditCard){let s=oe.getValueFromRecord(A,za.ExpirationYear)+oe.getValueFromRecord(A,za.ExpirationMonth);oe.populateVaultItemSectionField(n,"expirationDate",s,i?.expirationDate,a,t)}else if(r===tt.Address){let s=JSON.stringify({region:"",city:oe.getValueFromRecord(A,Me.City),country:oe.getValueFromRecord(A,Me.Country),street:oe.getValueFromRecord(A,Me.Address),zip:oe.getValueFromRecord(A,Me.Zip),state:oe.getValueFromRecord(A,Me.State)});oe.populateVaultItemSectionField(n,Me.Address,s,i?.[Me.Address],a,t)}return n},yHj=(A,j,e)=>j===tt.TaxNumber?"Tax Number":j===tt.Name?oe.getValueFromRecord(A,Me.FirstName)+" "+oe.getValueFromRecord(A,Me.LastName):oe.getValueFromRecord(A,$Hj(j))||e.singularName,$Hj=A=>{switch(A){case tt.Bank:case tt.CreditCard:return za.AccountName;case tt.IdCard:case tt.Passport:case tt.DriverLicense:case tt.SocialSecurityNumber:return Za.Name;case tt.SecureNote:return fq.Title;case tt.Address:case tt.Company:case tt.Email:case tt.Number:case tt.Website:return Me.ItemName}return""},wHj=A=>A===tt.SecureNote?fq.Notes:"",IHj=(A,j,e)=>!(e===""||j==="type"||A===tt.CreditCard&&(j===za.ExpirationMonth||j===za.ExpirationYear)||A===tt.Bank&&j===za.AccountName||A===tt.SecureNote&&(j===fq.Title||j===en.Note)||A===tt.Email&&j===Me.ItemName||A===tt.Number&&j===Me.ItemName||A===tt.Address&&(j===Me.ItemName||j===Me.Address||j===Me.Country||j===Me.State||j===Me.City||j===Me.Zip)||A===tt.Website&&j===Me.ItemName),xq=(A,j)=>{if(A.k===dA.FieldType.Date){let e=QjA.default.utc(j.trim(),["YYYY-MM-DD","YYYY-M-DD","YYYY-MM-D","YYYY-M-D"],!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return q.isValidNumber(e)?e:j}else return Number((0,QjA.default)(j,["YYYY-MM-DD","YYYY-M-DD","YYYY-MM-D","YYYY-M-D"],!0).format("YYYYMM"))||0},DHj=(A,j)=>{switch(j){case"MR":return"Mr.";case"MME":return"Mrs.";case"MLLE":return"Miss.";case"MS":return"Ms.";case"MX":return"Mx.";default:return}},UB;(function(A){A.Ids="ids.csv",A.Payments="payments.csv",A.Credentials="credentials.csv",A.PersonalInfo="personalInfo.csv",A.SecureNotes="securenotes.csv"})(UB||(UB={}));var za;(function(A){A.Type="type",A.AccountName="account_name",A.AccountHolder="account_holder",A.CreditCardNumber="cc_number",A.Code="code",A.ExpirationMonth="expiration_month",A.ExpirationYear="expiration_year",A.RoutingNumber="routing_number",A.AccountNumber="account_number",A.Country="country",A.IssuingBank="issuing_bank"})(za||(za={}));var Za;(function(A){A.Type="type",A.Number="number",A.Name="name",A.IssueDate="issue_date",A.ExpirationDate="expiration_date",A.PlaceOfIssue="place_of_issue",A.State="state"})(Za||(Za={}));var en;(function(A){A.UsernameOne="username",A.UsernameTwo="username2",A.UsernameThree="username3",A.Title="title",A.Password="password",A.Note="note",A.Url="url",A.Category="category",A.OtpSecret="otpSecret"})(en||(en={}));var Me;(function(A){A.Type="type",A.Title="title",A.FirstName="first_name",A.MiddleName="middle_name",A.LastName="last_name",A.Login="login",A.DateOfBirth="date_of_birth",A.PlaceOfBirth="place_of_birth",A.Email="email",A.EmailType="email_type",A.ItemName="item_name",A.PhoneNumber="phone_number",A.Address="address",A.Country="country",A.State="state",A.City="city",A.Zip="zip",A.AddressRecipient="address_recipient",A.AddressBuilding="address_building",A.AddressApartment="address_apartment",A.AddressFloor="address_floor",A.AddressDoorCode="address_door_code",A.JobTitle="job_title",A.Url="url"})(Me||(Me={}));var fq;(function(A){A.Title="title",A.Notes="note"})(fq||(fq={}));var OHj={[UB.Ids]:[Za.Type,Za.Number,Za.Name,Za.IssueDate,Za.ExpirationDate,Za.PlaceOfIssue,Za.State],[UB.Payments]:[za.Type,za.AccountName,za.AccountHolder,za.CreditCardNumber,za.Code,za.ExpirationMonth,za.ExpirationYear,za.RoutingNumber,za.AccountNumber,za.Country,za.IssuingBank],[UB.Credentials]:[en.UsernameOne,en.UsernameTwo,en.UsernameThree,en.Title,en.Password,en.Note,en.Url,en.Category,en.OtpSecret],[UB.PersonalInfo]:[Me.Type,Me.Title,Me.FirstName,Me.MiddleName,Me.LastName,Me.Login,Me.DateOfBirth,Me.PlaceOfBirth,Me.Email,Me.EmailType,Me.ItemName,Me.PhoneNumber,Me.Address,Me.Country,Me.State,Me.City,Me.Zip,Me.AddressRecipient,Me.AddressBuilding,Me.AddressApartment,Me.AddressFloor,Me.AddressDoorCode,Me.JobTitle,Me.Url],[UB.SecureNotes]:[fq.Title,fq.Notes]},tt;(function(A){A.Login="login",A.Bank="bank",A.CreditCard="credit_card",A.IdCard="card",A.Passport="passport",A.DriverLicense="license",A.SocialSecurityNumber="social_security",A.TaxNumber="tax_number",A.Name="name",A.Email="email",A.Number="number",A.Address="address",A.Company="company",A.Website="website",A.SecureNote="secure_note"})(tt||(tt={}));var PHj={[tt.Bank]:yj.BankAccountUuid,[tt.CreditCard]:yj.CreditCardUuid,[tt.IdCard]:yj.IdentityUuid,[tt.Passport]:yj.PassportUuid,[tt.DriverLicense]:yj.DriverLicenseUuid,[tt.SocialSecurityNumber]:yj.SocialSecurityNumberUuid,[tt.TaxNumber]:yj.SecureNoteUuid,[tt.Name]:yj.IdentityUuid,[tt.Email]:yj.IdentityUuid,[tt.Number]:yj.IdentityUuid,[tt.Address]:yj.IdentityUuid,[tt.Company]:yj.IdentityUuid,[tt.Website]:yj.IdentityUuid,[tt.SecureNote]:yj.SecureNoteUuid},Z8A={[tt.Login]:{email:{field:"email",section:"additional logins"},secondaryLogin:{field:"secondary login",section:"additional logins"}},[tt.CreditCard]:{[za.AccountName]:{field:"cardholder",section:""},[za.CreditCardNumber]:{field:"ccnum",section:""},[za.Code]:{field:"cvv",section:""},[za.Country]:{field:"country",section:"details",inputTraits:{autocapitalization:"Words",keyboard:"Default"}},expirationDate:{field:"expiry",section:""}},[tt.Bank]:{[za.IssuingBank]:{field:"bankName",section:""},[za.AccountHolder]:{field:"owner",section:""},[za.RoutingNumber]:{field:"swift",section:""},[za.AccountNumber]:{field:"iban",section:""},[za.Country]:{field:"country",section:"branchInfo",inputTraits:{autocapitalization:"Words",keyboard:"Default"}}},[tt.SecureNote]:{},[tt.Passport]:{[Za.Name]:{field:"fullname",section:""},[Za.Number]:{field:"number",section:""},[Za.IssueDate]:{field:"issue_date",section:"",v:xq},[Za.ExpirationDate]:{field:"expiry_date",section:"",v:xq},[Za.PlaceOfIssue]:{field:"issuing_country",section:""}},[tt.DriverLicense]:{[Za.Name]:{field:"fullname",section:""},[Za.Number]:{field:"number",section:""},[Za.IssueDate]:{field:"issue date",section:"",kind:dA.FieldType.MonthYear,v:xq},[Za.ExpirationDate]:{field:"expiry_date",section:"",v:xq},[Za.State]:{field:"state",section:""}},[tt.SocialSecurityNumber]:{[Za.Name]:{field:"name",section:""},[Za.Number]:{field:"number",section:""}},[tt.TaxNumber]:{[Za.Number]:{field:"number",section:"",kind:dA.FieldType.Concealed,inputTraits:{keyboard:"NamePhonePad"}}},[tt.IdCard]:{[Za.Name]:{field:"full name",section:"",inputTraits:{autocapitalization:"Words"}},[Za.Number]:{field:"number",section:"",inputTraits:{keyboard:"NamePhonePad"}},[Za.IssueDate]:{field:"issue date",section:"",kind:dA.FieldType.Date,v:xq},[Za.ExpirationDate]:{field:"expiry date",section:"",kind:dA.FieldType.Date,v:xq}},[tt.Name]:{[Me.Title]:{field:"title",section:"name",menuItems:["Mr","Mme","Mlle","Ms","Mx"],v:DHj},[Me.FirstName]:{field:"firstname",section:"name"},[Me.MiddleName]:{field:"middle name",section:"name",attributes:{guarded:"yes"},inputTraits:{autocapitalization:"Words"}},[Me.LastName]:{field:"lastname",section:"name"},[Me.Login]:{field:"username",section:"internet"},[Me.DateOfBirth]:{field:"birthdate",section:"name",v:xq},[Me.PlaceOfBirth]:{field:"place of birth",section:"name",attributes:{guarded:"yes"},inputTraits:{autocapitalization:"Words"}}},[tt.Email]:{[Me.Email]:{field:"email",section:"internet"},[Me.EmailType]:{field:"email type",section:"internet"}},[tt.Number]:{[Me.PhoneNumber]:{field:"defphone",section:"address"}},[tt.Address]:{[Me.Address]:{field:"address",section:"address",v:(A,j)=>JSON.parse(j)},[Me.AddressRecipient]:{field:"recipient",section:"address",inputTraits:{autocapitalization:"Words"}},[Me.AddressBuilding]:{field:"building",section:"address"},[Me.AddressApartment]:{field:"apartment",section:"address"},[Me.AddressFloor]:{field:"floor",section:"address"},[Me.AddressDoorCode]:{field:"door code",section:"address"}},[tt.Company]:{[Me.ItemName]:{field:"company",section:"name"},[Me.JobTitle]:{field:"jobtitle",section:"name"}},[tt.Website]:{[Me.Url]:{field:"website",section:"internet"}}};var P1A=W(ieA()),ka=W(aA());var pK=A=>{let j=A.toLowerCase();return j.includes("electron")?"visaelectron":j.includes("visa")?"visa":j.includes("maestro")||j.includes("m\xE6stro")?"maestro":j.includes("mastercard")||j.includes("master card")||j.includes("mc")?"mc":j.includes("amex")||j.includes("american express")?"amex":j.includes("discover")?"discover":j.includes("diner")?"diners":j.includes("unionpay")||["cup","upi"].includes(j)?"unionpay":j.includes("japan credit bureau")||j==="jcb"?"jcb":j.includes("interac")?"interac":j.includes("laser")?"laser":""};var D1A=W(Io()),O1A=A=>{let j=(0,D1A.default)(A,["MMYY","MM/YY","MM-YY","MMYYYY","MM/YYYY","MM-YYYY","YYYY/MM","YYYY-MM"]);return j.isValid()?j.format("YYYYMM"):""};var mK=A=>(j,e,t,r)=>A.some(a=>{if(j===a.tagName){let n=e.split(".").reverse();return n.length<2?!1:n[1]===a.parentTagName}else return!1});var C1A=async(A,j,e,t)=>{let r=new P1A.XMLParser(jKj()),a=sj(r.parse(j,!0),AKj).unwrap(),n=VTj(a),{loginTemplate:o,creditCardTemplate:i,secureNoteTemplate:s}=await sI(A),l=[];return n.vaultItems.forEach(d=>{switch(d.templateName){case"Credit Card":{l.push(JTj(d,i,e,t));break}case"Web Password":{l.push(T1A(d,o,e,t));break}case"Password":{l.push(UTj(d,o,e,t));break}default:{l.push(XTj(d,s,e,t));break}}}),await Promise.all(l)},JTj=async(A,j,e,t)=>{let r=new dA(e);r.parseTemplate(j),r.templateUuid=j.uuid,r.title=A.name||j.singularName,r.tags=A.tags;let a={"full-name":{templateField:"cardholder",transform:o=>o},"card-number":{templateField:"ccnum",transform:o=>o},"card-type":{templateField:"type",transform:pK},"expiration-date":{templateField:"expiry",transform:O1A}},n=[];return A.fields.forEach(o=>{let i=!1,s=a[o.slug];if(s){let l=dA.findFieldWithName(s.templateField,r);l&&(l.v=s.transform(o.value),i=!0)}else o.slug==="notes"&&(r.notes=o.value,i=!0);i||n.push(o)}),n.length>0&&r.details.sections.push(seA(t,n)),r},seA=(A,j)=>{let e=new Set(["client-secret","group-auth-password","passphrase","password","private-key-passphrase","secret-key",EK]),t=new Set([EK]),r=j.map(a=>({k:e.has(a.slug)?dA.FieldType.Concealed:dA.FieldType.String,n:fe(),v:a.value||"",t:a.name,a:{multiline:t.has(a.slug)?"yes":"no"}}));return{name:fe(),title:A["Other Fields"](),fields:Lr(r)}},EK="totp-backup-codes",H1A="totp backup codes",T1A=async(A,j,e,t)=>{let r=new dA(e);r.templateUuid=j.uuid,r.title=A.name||j.singularName,r.tags=A.tags;let a=[];return A.fields.forEach(n=>{switch(n.slug){case"username":{r.setUsername(n.value);break}case"password":{r.setPassword(n.value);break}case"url":{r.url=n.value;break}case"notes":{r.notes=n.value;break}default:{a.push(n);break}}}),A.totpBackupCodes&&a.push({name:H1A,value:A.totpBackupCodes,slug:EK}),r.details.sections.push(seA(t,a)),A.totpKey&&A.totpKey.length>0&&gi(A.totpKey,r,t),r},UTj=async(A,j,e,t)=>{let r=A.fields.filter(n=>n.slug==="resource"),a=A.fields.filter(n=>n.slug==="url");if(r.length===1&&a.length===0){let n=r[0];n&&(n.name="URL",n.slug="url")}return T1A(A,j,e,t)},XTj=async(A,j,e,t)=>{let r=new dA(e);r.templateUuid=j.uuid,r.title=A.name||j.singularName,r.tags=A.tags;let a=[];return A.fields.forEach(n=>{n.slug==="notes"?r.notes=n.value:a.push(n)}),A.totpBackupCodes&&a.push({name:H1A,value:A.totpBackupCodes,slug:EK}),r.details.sections.push(seA(t,a)),A.totpKey&&A.totpKey.length>0&&gi(A.totpKey,r,t),r},VTj=A=>({vaultItems:A.ImportFile.Secrets.Secret.map(j=>{let t={fields:(typeof j.SecretItems=="string"?[]:j.SecretItems.SecretItem).map(r=>({name:r.FieldName,slug:r.Slug,value:r.Value})),folderPath:j.FolderPath,name:j.SecretName,tags:WTj(j.FolderPath),templateName:j.SecretTemplateName};return j.TotpKey&&(t.totpKey=j.TotpKey),j.TotpBackupCodes&&(t.totpBackupCodes=j.TotpBackupCodes),t})}),WTj=A=>A?[ABA(Jx(A,"\\")).replace(/\\/g,"/")]:[],YTj=ka.type({FieldName:ka.string,Slug:GA(ka.string,""),Value:ka.string},"SecretItem"),QTj=ka.intersection([ka.readonly(ka.type({FolderPath:ka.string,SecretItems:ka.union([ka.type({SecretItem:ka.array(YTj)}),ka.string]),SecretName:ka.string,SecretTemplateName:ka.string},"Secret"),"ReadonlySecret"),ka.readonly(ka.partial({TotpBackupCodes:ka.string,TotpKey:ka.string},"TotpSection"),"ReadonlyTotpSection")]),ZTj=ka.readonly(ka.type({Secrets:ka.type({Secret:ka.array(QTj)},"Secrets")},"ImportFile"),"ReadonlyImportFile"),AKj=ka.readonly(ka.type({ImportFile:ZTj},"XmlImport"),"ReadonlyXmlImport"),jKj=()=>({parseTagValue:!1,parseAttributeValue:!1,isArray:mK(eKj)}),eKj=[{parentTagName:"Secrets",tagName:"Secret"},{parentTagName:"SecretItems",tagName:"SecretItem"}];var K1A=W(Io());var tKj="action/import/dropbox",rKj=rj(tKj),S1A=async(A,j,e,t)=>rKj("parseDropboxExport",async()=>{let r=oc(j).parsedData;return r.length===0?[]:(r[0]&&r[0][0]?.toLowerCase()==="title"&&r.shift(),aKj(A,r,e,t))}),aKj=async(A,j,e,t)=>{let r=await Vi(A),a=oe.getVaultItemTemplate(yj.LoginUuid,r),n=oe.getVaultItemTemplate(yj.CreditCardUuid,r);return j.map(o=>{let[i,s,l,d,k,u,m,I,S,f,v,P]=o;if(m==="card"){let D={cardName:I||"",cardNumber:S||"",cardExpirationDate:f?(0,K1A.default)(f,"MM/YY",!0).format("YYYYMM"):"",cardSecurityCode:v||"",cardholderName:P||"",notes:k||""};return oKj(D,n,e,t)}else{let D={title:i||a.singularName,website:s||"",login:l||"",password:d||"",notes:k||"",otpSecret:u||void 0};return nKj(D,e,t)}})},nKj=(A,j,e)=>{let t=new dA(j);return t.templateUuid=yj.LoginUuid,t.title=A.title,t.url=A.website,t.notes=A.notes,t.setUsername(A.login),t.setPassword(A.password),A.otpSecret&&gi(A.otpSecret,t,e),t},oKj=(A,j,e,t)=>{let r=new dA(e);r.templateUuid=yj.CreditCardUuid,r.title=A.cardName,r.notes=A.notes,r.parseTemplate(j);for(let a of[{key:"cardholder",value:A.cardholderName},{key:"ccnum",value:A.cardNumber},{key:"cvv",value:A.cardSecurityCode},{key:"expiry",value:A.cardExpirationDate}])a.value&&oe.populateVaultItemSectionField(r,a.key,a.value,{section:"",field:a.key},j,t);return r};var iKj="action/import/firefox",sKj=rj(iKj),_1A=async(A,j,e)=>sKj("parseFirefoxExport",async()=>{let t=oc(j).parsedData;if(t.length===0)return[];t[0]&&t[0][0]==="url"&&t.shift();let r=0;for(let a of t)t[r]=[a[0]?lKj(a[0]):"Login",...a],r++;return ZG(A,t,e)}),lKj=A=>{let j="Login";try{/^[A-Za-z]+:\/\//.test(A)||(A="https://"+A);let t=new URL(A).hostname;t.length!==0&&t.at(-1)==="."&&(t=t.slice(0,-1));let r=t.split(".").filter(n=>n.length>0),a=r.at(-2);if(a!==void 0)j=M1A(a);else{let n=r.at(-1);n!==void 0&&(j=M1A(n))}}catch{}return j},M1A=A=>!A||!A[0]?A:A[0].toUpperCase()+A.slice(1).toLowerCase();var leA=W(ieA()),Tr=W(aA());var z1A=async(A,j,e,t)=>Vi(A).then(async r=>{let a;try{let i=new leA.XMLParser(N1A(!1));a=sj(i.parse(j,!0),L1A).unwrap()}catch{let i=new leA.XMLParser(N1A(!0));a=sj(i.parse(j,!0),L1A).unwrap()}let o=oe.getVaultItemTemplate(yj.LoginUuid,r);return Oc(a.KeePassFile.Root.Group,i=>{let s=i.Name;return R1A(i,s,e,t,o,!0)})}),R1A=(A,j,e,t,r,a)=>{let n=A.Entry,o=A.Group,i=[];return i=i.concat(n.map(s=>dKj(s,j,e,t,r,a))),i.concat(Oc(o,s=>R1A(s,j+"/"+s.Name,e,t,r,a)))},cKj=A=>{let j=qm(A,ad.TotpDigits),e=qm(A,ad.TotpIssuer),t=qm(A,ad.TotpPeriod),r=qm(A,ad.TotpSecret);if(r!==""){let a=`otpauth://totp/keepass?secret=${r}`;return j!==""&&(a+=`&digits=${j}`),e!==""&&(a+=`&issuer=${e}`),t!==""&&(a+=`&period=${t}`),a}else return""},dKj=(A,j,e,t,r,a)=>{let n=new dA(e,r);n.title=qm(A,ad.Title)||r.singularName,n.notes=qm(A,ad.Notes),n.url=qm(A,ad.Url),n.tags=A.Tags.length>0?A.Tags.split(";").concat([j]):[j],n.setUsername(qm(A,ad.Username)),n.setPassword(qm(A,ad.Password));let o=cKj(A);return o!==""&&gi(o,n,t),A.OverrideURL.length>0&&oe.populateVaultItemSectionField(n,t["override url"](),A.OverrideURL,void 0,r,t),uKj(A).forEach(s=>{let l="",d=!0;typeof s.Value!="string"?(l=ceA(s.Value)?s.Value.contents:"",d=kKj(s)):(d=!a,l=s.Value),l.length>0&&oe.populateVaultItemSectionField(n,s.Key,l,d?{section:t["Other Fields"](),field:s.Key,kind:dA.FieldType.Concealed}:void 0,r,t)}),n},kKj=A=>ceA(A.Value)?pKj.is(A.Value.attr)?A.Value.attr.ProtectInMemory.toLowerCase()==="true":!1:!0,qm=(A,j)=>{let e=A.String,t="";return e.forEach(r=>{j===r.Key&&(typeof r.Value!="string"?t=ceA(r.Value)?r.Value.contents:"":t=r.Value)}),t},uKj=A=>{let j=A.String,e=new Set(Object.values(ad).map(t=>t.toString()));return j.filter(t=>!e.has(t.Key))},pKj=Tr.type({ProtectInMemory:Tr.string},"KnownAttributes"),mKj=Tr.type({contents:Tr.string,attr:Tr.unknown},"AttributeValue"),ceA=A=>mKj.is(A),ad;(function(A){A.Title="Title",A.Username="UserName",A.Password="Password",A.Url="URL",A.Notes="Notes",A.TotpDigits="TOTPDigits",A.TotpIssuer="TOTPIssuer",A.TotpPeriod="TOTPPeriod",A.TotpSecret="TOTPSecret"})(ad||(ad={}));var EKj=Tr.type({Key:Tr.string,Value:Tr.union([GA(Tr.string,""),Tr.record(Tr.string,Tr.unknown)])},"EntryStringField"),BKj=Tr.readonly(Tr.type({OverrideURL:Tr.string,Tags:Tr.string,String:GA(Tr.array(EKj),[])},"Entry"),"ReadonlyEntry"),J1A=Tr.recursion("RecursiveGroup",()=>Tr.type({Name:Tr.string,Entry:GA(Tr.array(BKj),[]),Group:GA(Tr.array(J1A),[])},"Group")),gKj=Tr.readonly(Tr.type({Root:Tr.type({Group:GA(Tr.array(J1A),[])},"Root")},"KeePassFile"),"ReadonlyKeePassFile"),L1A=Tr.readonly(Tr.type({KeePassFile:gKj},"XmlImport"),"ReadonlyXmlImport"),N1A=A=>({attributeNamePrefix:"",attributesGroupName:"attr",textNodeName:"contents",ignoreAttributes:A,parseTagValue:!1,parseAttributeValue:!1,isArray:mK(hKj)}),hKj=[{parentTagName:"Root",tagName:"Group"},{parentTagName:"Group",tagName:"Group"},{parentTagName:"Group",tagName:"Entry"},{parentTagName:"Entry",tagName:"String"}];var Yi=W(aA());var peA=W(Io());var U1A={AFG:"93",ALB:"355",DZA:"213",ASM:"1-684",AND:"376",AGO:"244",AIA:"1-264",ATA:"672",ATG:"1-268",ARG:"54",ARM:"374",ABW:"297",AUS:"61",AUT:"43",AZE:"994",BHS:"1-242",BHR:"973",BGD:"880",BRB:"1-246",BLR:"375",BEL:"32",BLZ:"501",BEN:"229",BMU:"1-441",BTN:"975",BOL:"591",BIH:"387",BWA:"267",BRA:"55",IOT:"246",VGB:"1-284",BRN:"673",BGR:"359",BFA:"226",BDI:"257",KHM:"855",CMR:"237",CAN:"1",CPV:"238",CYM:"1-345",CAF:"236",TCD:"235",CHL:"56",CHN:"86",CXR:"61",CCK:"61",COL:"57",COM:"269",COK:"682",CRI:"506",HRV:"385",CUB:"53",CUW:"599",CYP:"357",CZE:"420",COD:"243",DNK:"45",DJI:"253",DMA:"1-767",DOM:"1",TLS:"670",ECU:"593",EGY:"20",SLV:"503",GNQ:"240",ERI:"291",EST:"372",ETH:"251",FLK:"500",FRO:"298",FJI:"679",FIN:"358",FRA:"33",PYF:"689",GAB:"241",GMB:"220",GEO:"995",DEU:"49",GHA:"233",GIB:"350",GRC:"30",GRL:"299",GRD:"1-473",GUM:"1-671",GTM:"502",GGY:"44-1481",GIN:"224",GNB:"245",GUY:"592",HTI:"509",HND:"504",HKG:"852",HUN:"36",ISL:"354",IND:"91",IDN:"62",IRN:"98",IRQ:"964",IRL:"353",IMN:"44-1624",ISR:"972",ITA:"39",CIV:"225",JAM:"1-876",JPN:"81",JEY:"44-1534",JOR:"962",KAZ:"7",KEN:"254",KIR:"686",XKX:"383",KWT:"965",KGZ:"996",LAO:"856",LVA:"371",LBN:"961",LSO:"266",LBR:"231",LBY:"218",LIE:"423",LTU:"370",LUX:"352",MAC:"853",MKD:"389",MDG:"261",MWI:"265",MYS:"60",MDV:"960",MLI:"223",MLT:"356",MHL:"692",MRT:"222",MUS:"230",MYT:"262",MEX:"52",FSM:"691",MDA:"373",MCO:"377",MNG:"976",MNE:"382",MSR:"1-664",MAR:"212",MOZ:"258",MMR:"95",NAM:"264",NRU:"674",NPL:"977",NLD:"31",ANT:"599",NCL:"687",NZL:"64",NIC:"505",NER:"227",NGA:"234",NIU:"683",PRK:"850",MNP:"1-670",NOR:"47",OMN:"968",PAK:"92",PLW:"680",PSE:"970",PAN:"507",PNG:"675",PRY:"595",PER:"51",PHL:"63",PCN:"64",POL:"48",PRT:"351",PRI:"1",QAT:"974",COG:"242",REU:"262",ROU:"40",RUS:"7",RWA:"250",BLM:"590",SHN:"290",KNA:"1-869",LCA:"1-758",MAF:"590",SPM:"508",VCT:"1-784",WSM:"685",SMR:"378",STP:"239",SAU:"966",SEN:"221",SRB:"381",SYC:"248",SLE:"232",SGP:"65",SXM:"1-721",SVK:"421",SVN:"386",SLB:"677",SOM:"252",ZAF:"27",KOR:"82",SSD:"211",ESP:"34",LKA:"94",SDN:"249",SUR:"597",SJM:"47",SWZ:"268",SWE:"46",CHE:"41",SYR:"963",TWN:"886",TJK:"992",TZA:"255",THA:"66",TGO:"228",TKL:"690",TON:"676",TTO:"1-868",TUN:"216",TUR:"90",TKM:"993",TCA:"1-649",TUV:"688",VIR:"1-340",UGA:"256",UKR:"380",ARE:"971",GBR:"44",USA:"1",URY:"598",UZB:"998",VUT:"678",VAT:"379",VEN:"58",VNM:"84",WLF:"681",ESH:"212",YEM:"967",ZMB:"260",ZWE:"263"};var V1A=E`action/import/lastpass`,qKj=rj(V1A.str),Wi;(function(A){A.url="url",A.username="username",A.password="password",A.otp="totp",A.notes="extra",A.title="name",A.tags="grouping",A.fav="fav"})(Wi||(Wi={}));var W1A=async(A,j,e,t,r)=>qKj("parseLastPassExportNew",async()=>{let a=cK(j);if(a[0]&&a[0].profilename!==void 0)throw new Error(t["Form Fill importing is not supported. Use a normal LastPass export file."]());return Vi(A).then(n=>{let o=oe.getVaultItemTemplate(yj.LoginUuid,n);return r.lastPassIncludeSharedItems||(a=a.filter(i=>i[Wi.tags]?.indexOf("Shared-")!==0)),a.map(i=>i[Wi.url]==="http://sn"?vKj(i,e,n,t):FKj(i,e,o,t))})}),vKj=(A,j,e,t)=>{let r=oe.getValueFromRecord(A,Wi.notes),a=fKj(e,r),n=new dA(j,a),{notes:o,fieldValues:i}=GKj(a,r),s=oe.getValueFromRecord(A,Wi.title),l=oe.getValueFromRecord(A,Wi.tags),d=oe.getValueFromRecord(A,Wi.fav)==="1"?1:0;n.title=s||a.singularName,n.notes=o,n.tags=Z1A(l),n.faveIndex=d;let k=BeA(r),u=k.length===2&&k[1]||br.SecureNote,m=X1A[u]||X1A[br.SecureNote];if(typeof m>"u")return n;for(let I of Sa(i)){let S=i[I]||"",f=m[I];typeof f<"u"?f.field==="username"&&a.uuid===yj.LoginUuid?n.setUsername(S):f.field==="password"&&a.uuid===yj.LoginUuid?n.setPassword(S):xKj(n,S,f,a,t):oe.addFieldToOtherFieldsSection(n,I,S,t)}return n},xKj=(A,j,e,t,r)=>{let a=X6(A.details.sections,o=>o.name===e.section||o.title===e.section);a||(a={name:fe(),title:e.section,fields:[]},A.details.sections.push(a));let n=a?.fields?.find(o=>o.n===e.field);if(n){e.v?n.v=e.v(n,j):n.v=EeA(j,n.k),n.k===dA.FieldType.Concealed&&DKj(n,A,t,r);let o=oe.getItemOverview(t,n,A);o!==""&&(A.overview.ainfo=o)}else{a.fields||(a.fields=[]);let o=oe.createSectionField({kind:e.kind||dA.FieldType.String,title:e.field,value:j});e.v?o.v=e.v(o,j):o.v=EeA(j,o.k),a.fields.push(o)}},BeA=A=>{let j=/^NoteType:(.+)/.exec(A);return j?.[0]!==void 0&&j?.[1]!==void 0?[j[0],j[1]]:["",""]},fKj=(A,j)=>{let e=BeA(j),t=e.length===2&&OKj[e[1]]||yj.SecureNoteUuid;return oe.getVaultItemTemplate(t,A)},GKj=(A,j)=>{let e=BeA(j);if(A.uuid===yj.SecureNoteUuid&&e[0]==="")return{notes:j,fieldValues:{}};let[t,r]=j.slice(e[0].length).split(`
Notes:`),a={};if(t!==void 0){let n=/-{5}BEGIN(.+)PRIVATE KEY(.+)(\n.+)*END(.+)PRIVATE KEY-{5}/.exec(t),o=/-{5}BEGIN(.+)PUBLIC KEY(.+)(\n.+)*END(.+)PUBLIC KEY-{5}/.exec(t),i=t.trim().split(`
`);for(let s of i){let[l,d]=s.split(/:(.+)?/,2);l!==void 0&&d!==void 0&&l!=="Language"&&(a[l]=d),l==="Private Key"&&n&&(a[l]=String(n[0])),l==="Public Key"&&o&&(a[l]=String(o[0]))}}return{notes:r?r.trim():"",fieldValues:a}},FKj=(A,j,e,t)=>{let r=new dA(j,e),a=oe.getValueFromRecord(A,Wi.url),n=oe.getValueFromRecord(A,Wi.username),o=oe.getValueFromRecord(A,Wi.password),i=oe.getValueFromRecord(A,Wi.otp),s=oe.getValueFromRecord(A,Wi.notes),l=oe.getValueFromRecord(A,Wi.title),d=oe.getValueFromRecord(A,Wi.tags),k=oe.getValueFromRecord(A,Wi.fav)==="1"?1:0;r.templateUuid=yj.LoginUuid,r.title=l||e.singularName,r.url=a,r.notes=s,r.tags=Z1A(d),r.faveIndex=k,i.length>0&&gi(i,r,t);let u=meA(n),m=meA(o),I=Lr([u!==n&&$Kj(e,n),m!==o&&Q1A(e,o)]);return I.length>0&&(r.details.sections=[...r.details.sections,Y1A(I,t)]),r.setUsername(u),r.setPassword(m),r},meA=A=>{let j=bKj(A)||A;return yKj(j)||A},bKj=A=>{if(!A)return;let j=A.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(A!==j)return j},yKj=A=>A&&(/^ [+=-]/.test(A)&&!/^ [+=-][\d.]+$/.test(A)?A.slice(1):A),Y1A=(A,j)=>({name:fe(),title:j["Original Values"](),fields:[...A,oe.createSectionField({kind:dA.FieldType.Url,title:j["what's this?"](),value:"https://support.1password.com/import-lastpass/#get-help"})]}),$Kj=(A,j)=>oe.createSectionField({kind:dA.FieldType.String,title:A.attrs.localizedStrings.username||"username",value:j}),Q1A=(A,j)=>oe.createSectionField({kind:dA.FieldType.Concealed,title:A.attrs.localizedStrings.password||"password",value:j}),Z1A=A=>A?[A.replace(/\\/g,"/")]:[],deA=A=>(j,e)=>{let t=j.v;return Yi.record(Yi.string,Yi.string).is(t)&&(t[A]=e),t},keA=(A,j)=>{let e=A.v;return Yi.record(Yi.string,Yi.string).is(e)&&(e.street=[e.street,j].join(" ")),e},wKj=(A,j)=>{let e=A.v;return Yi.record(Yi.string,Yi.string).is(e)&&(e.country=j.toLowerCase()),e},IKj=A=>{if(typeof A>"u"||A==="")return"";if(A[0]!=="{")return A;let j=Yi.type({cc3l:GA(Yi.string,""),num:GA(Yi.string,""),ext:GA(Yi.string,"")}),e;try{e=sj(A,Oo.pipe(j),{file:V1A,func:E`convertLastPassPhoneNumber`}).unwrap()}catch{return""}if(typeof e>"u")return"";let{cc3l:t,num:r,ext:a}=e,n=[];if(typeof t=="string"&&t!==""){let o=U1A[t];typeof o=="string"&&n.push(`+${o}`)}return typeof r=="string"&&r!==""&&n.push(r),typeof a=="string"&&a!==""&&n.push(a),n.join(" ")},ueA=(A,j)=>EeA(j,dA.FieldType.Gender),DKj=(A,j,e,t)=>{let r=meA(dA.getStringValue(A));r!==A.v&&(j.details.sections=[...j.details.sections,Y1A([Q1A(e,dA.getStringValue(A))],t)]),A.v=r},EeA=(A,j)=>{let e=A.toLowerCase();switch(j){case dA.FieldType.MonthYear:return Number((0,peA.default)(A).format("YYYYMM"))||0;case dA.FieldType.Date:{let t=peA.default.utc(A.trim(),"MMMM,D,YYYY",!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return hy(t)?t:void 0}case dA.FieldType.Gender:return e==="m"||e==="male"?"male":e==="f"||e==="female"?"female":e;case dA.FieldType.CreditCardType:return Br(e,"visa")?"visa":Br(e,"mastercard")?"mc":Br(e,"amex")||Br(e,"american express")?"amex":Br(e,"discover")?"discover":"";case dA.FieldType.Menu:return e;case dA.FieldType.Phone:return IKj(A);default:return A}},br;(function(A){A.BankAccount="Bank Account",A.CreditCard="Credit Card",A.DriverLicense="Driver's License",A.SocialSecurity="Social Security",A.SoftwareLicense="Software License",A.WifiPassword="Wi-Fi Password",A.Passport="Passport",A.Database="Database",A.EmailAccount="Email Account",A.Membership="Membership",A.Server="Server",A.Address="Address",A.SshKey="SSH Key",A.Insurance="Insurance",A.HealthInsurance="Health Insurance",A.InstantMessagingAccount="Instant Messenger",A.SecureNote="secure_note"})(br||(br={}));var OKj={[br.BankAccount]:yj.BankAccountUuid,[br.CreditCard]:yj.CreditCardUuid,[br.DriverLicense]:yj.DriverLicenseUuid,[br.SocialSecurity]:yj.SocialSecurityNumberUuid,[br.SoftwareLicense]:yj.SoftwareUuid,[br.WifiPassword]:yj.RouterUuid,[br.Passport]:yj.PassportUuid,[br.Database]:yj.DatabaseUuid,[br.EmailAccount]:yj.EmailUuid,[br.Membership]:yj.MembershipUuid,[br.Server]:yj.ServerUuid,[br.Address]:yj.IdentityUuid,[br.SshKey]:yj.SecureNoteUuid,[br.Insurance]:yj.SecureNoteUuid,[br.HealthInsurance]:yj.SecureNoteUuid,[br.InstantMessagingAccount]:yj.LoginUuid,[br.SecureNote]:yj.SecureNoteUuid},X1A={[br.SecureNote]:{},[br.CreditCard]:{"Name on Card":{field:"cardholder",section:""},Type:{field:"type",section:""},Number:{field:"ccnum",section:""},"Security Code":{field:"cvv",section:""},"Start Date":{field:"validFrom",section:""},"Expiration Date":{field:"expiry",section:""}},[br.BankAccount]:{"Bank Name":{field:"bankName",section:""},"Account Type":{field:"accountType",section:""},"Routing Number":{field:"routingNo",section:""},"Account Number":{field:"accountNo",section:""},"SWIFT Code":{field:"swift",section:""},"IBAN Number":{field:"iban",section:""},Pin:{field:"telephonePin",section:""},"Branch Address":{field:"branchAddress",section:"branchInfo"},"Branch Phone":{field:"branchPhone",section:"branchInfo"}},[br.DriverLicense]:{Number:{field:"number",section:""},"Expiration Date":{field:"expiry_date",section:""},"License Class":{field:"class",section:""},Name:{field:"fullname",section:""},Address:{field:"address",section:""},"City / Town":{field:"city",section:""},State:{field:"state",section:""},"ZIP / Postal Code":{field:"zip / postal code",section:""},Country:{field:"country",section:""},"Date of Birth":{field:"birthdate",section:""},Sex:{field:"gender",section:"",v:ueA},Height:{field:"height",section:""}},[br.SocialSecurity]:{Name:{field:"name",section:""},Number:{field:"number",section:""}},[br.SoftwareLicense]:{"License Key":{field:"reg_code",section:""},Licensee:{field:"reg_name",section:"customer"},Version:{field:"product_version",section:""},Publisher:{field:"publisher_name",section:"publisher"},"Support Email":{field:"support_email",section:"publisher"},Website:{field:"publisher_website",section:"publisher"},Price:{field:"retail_price",section:"publisher"},"Purchase Date":{field:"purchase date",section:"order"},"Order Number":{field:"order_number",section:"order"},"Number of Licenses":{field:"number of licenses",section:"order"},"Order Total":{field:"order_total",section:"order"}},[br.WifiPassword]:{SSID:{field:"network_name",section:""},Password:{field:"wireless_password",section:""},"Connection Type":{field:"connection type",section:""},"Connection Mode":{field:"connection mode",section:""},Authentication:{field:"authentication",section:""},Encryption:{field:"encryption",section:""},"Use 802.1X":{field:"use 802.1X",section:""},"FIPS Mode":{field:"FIPS mode",section:""},"Key Type":{field:"key type",section:""},Protected:{field:"protected",section:""},"Key Index":{field:"key index",section:""}},[br.Passport]:{Type:{field:"type",section:""},Name:{field:"fullname",section:""},Country:{field:"issuing_country",section:""},Number:{field:"number",section:""},Sex:{field:"gender",section:"",v:ueA},Nationality:{field:"nationality",section:""},"Issuing Authority":{field:"issuing_authority",section:""},"Date of Birth":{field:"birthdate",section:""},"Issued Date":{field:"issue_date",section:""},"Expiration Date":{field:"expiry_date",section:""}},[br.Database]:{Type:{field:"database_type",section:""},Hostname:{field:"hostname",section:""},Port:{field:"port",section:""},Database:{field:"database",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""},SID:{field:"sid",section:""},Alias:{field:"alias",section:""}},[br.EmailAccount]:{Username:{field:"pop_username",section:""},Password:{field:"pop_password",section:""},Server:{field:"pop_server",section:""},Port:{field:"pop_port",section:""},Type:{field:"pop_type",section:""},"SMTP Server":{field:"smtp_server",section:"SMTP"},"SMTP Port":{field:"smtp_port",section:"SMTP"}},[br.Membership]:{Organization:{field:"org_name",section:""},"Membership Number":{field:"membership_no",section:""},"Member Name":{field:"member_name",section:""},"Start Date":{field:"member_since",section:""},"Expiration Date":{field:"expiry_date",section:""},Website:{field:"website",section:""},Telephone:{field:"phone",section:""},Password:{field:"pin",section:""}},[br.Server]:{Hostname:{field:"url",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""}},[br.Address]:{Title:{field:"title",section:"name"},"First Name":{field:"firstname",section:"name"},"Middle Name":{field:"middle name",section:"name"},"Last Name":{field:"lastname",section:"name"},Username:{field:"username",section:"internet"},Gender:{field:"gender",section:"name",v:ueA},Birthday:{field:"birthdate",section:"name"},Company:{field:"company",section:"name"},"Address 1":{field:"address",section:"address",v:keA},"Address 2":{field:"address",section:"address",v:keA},"Address 3":{field:"address",section:"address",v:keA},"City / Town":{field:"address",section:"address",v:deA("city")},County:{field:"county",section:"address"},State:{field:"address",section:"address",v:deA("state")},"Zip / Postal Code":{field:"address",section:"address",v:deA("zip")},Country:{field:"address",section:"address",v:wKj},Timezone:{field:"timezone",section:"address"},"Email Address":{field:"email",section:"internet"},Phone:{field:"defphone",section:"address"},"Evening Phone":{field:"homephone",section:"address"},"Mobile Phone":{field:"cellphone",section:"address"},Fax:{field:"fax",section:"address"}},[br.SshKey]:{Format:{field:"key type",section:""},"Private Key":{field:"private key",section:"",kind:dA.FieldType.Concealed},"Public Key":{field:"public key",section:""},Passphrase:{field:"passphrase",section:"additional info",kind:dA.FieldType.Concealed},"Bit Strength":{field:"bit strength",section:""},Hostname:{field:"hostname",section:"additional info"},Date:{field:"date",section:"additional info",kind:dA.FieldType.Date}},[br.Insurance]:{Company:{field:"company",section:"policy"},"Policy Type":{field:"policy type",section:"policy"},"Policy Number":{field:"policy number",section:"policy"},Expiration:{field:"expiration date",section:"policy",kind:dA.FieldType.Date},URL:{field:"website",section:"policy"},"Agent Name":{field:"agent name",section:"agent"},"Agent Phone":{field:"agent phone",section:"agent"}},[br.HealthInsurance]:{"Policy Type":{field:"policy type",section:"policy"},"Policy Number":{field:"policy number",section:"policy"},"Group ID":{field:"group id",section:"policy"},"Member Name":{field:"member name",section:"policy"},"Member ID":{field:"member id",section:"policy"},"Co-pay":{field:"co-pay",section:"policy"},Company:{field:"company",section:"company"},"Company Phone":{field:"company phone",section:"company"},"Physician Name":{field:"physician name",section:"physician"},"Physician Phone":{field:"physician phone",section:"physician"},"Physician Address":{field:"physician address",section:"physician"}},[br.InstantMessagingAccount]:{Type:{field:"type",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""},Server:{field:"server",section:""},Port:{field:"port",section:""}}};var PKj="action/import/roboform",CKj=rj(PKj),pI;(function(A){A[A.Title=0]="Title",A[A.Url=1]="Url",A[A.MatchUrl=2]="MatchUrl",A[A.Username=3]="Username",A[A.Password=4]="Password",A[A.Notes=5]="Notes",A[A.Tags=6]="Tags",A[A.RfExtraFields=7]="RfExtraFields"})(pI||(pI={}));var geA={Name:"title",Url:"url",Login:"username",Pwd:"password",Note:"notes",Folder:"tags",RfFieldsV2:"rfExtraFields"},jOA=async(A,j,e,t)=>CKj("parseRoboFormExport",async()=>{let r=oc(j).parsedData;if(r.length===0)return[];let a;return r[0]&&r[0].includes("Name")&&r[0].includes("Url")?(a=AOA(r[0]),r.shift()):a=AOA(["Name","Url","MatchUrl","Login","Pwd","Note","Folder","RfFieldsV2"]),Vi(A).then(n=>{let o=oe.getVaultItemTemplate(yj.LoginUuid,n),i=oe.getVaultItemTemplate(yj.SecureNoteUuid,n);return r.map(s=>HKj(s[pI.MatchUrl],s[pI.Username],s[pI.Password])?TKj(i,s,e,a,t):KKj(o,s,e,a,t))}).catch(n=>{throw n})}),AOA=A=>{let j={};return A.forEach((e,t)=>{let r=geA[e];r&&(j[r]=t)}),j},HKj=(A,j,e)=>A===""&&j===""&&e==="",eOA=(A,j)=>{let e={title:"",url:"",username:"",password:"",notes:"",tags:[],rfExtraFields:[]};return Object.keys(j).reduce((t,r)=>{let a=j[r];if(a===void 0)return t;if(r===geA.RfFieldsV2)return{...t,rfExtraFields:A.slice(a)};if(r===geA.Folder){let n=A[a];return{...t,[r]:n?[n.replace(/^(\/)/,"")]:[]}}else return{...t,[r]:A[a]}},e)},TKj=(A,j,e,t,r)=>{let a=new dA(e,A),{title:n,url:o,notes:i,tags:s}=eOA(j,t);return a.title=n||A.singularName,a.notes=i,a.tags=s,a.url=o,a.notes===""&&a.url&&(a.notes=r.bookmark(),a.tags=[r.bookmark()],oe.populateVaultItemSectionField(a,r.website(),a.url,void 0,A,r)),a},KKj=(A,j,e,t,r)=>{let a=new dA(e,A),{title:n,url:o,username:i,password:s,notes:l,tags:d,rfExtraFields:k}=eOA(j,t);if(a.title=n||A.singularName,a.notes=l,a.tags=d,a.url=o,!k||k.length===0)return a.setUsername(i),a.setPassword(s),a;let u=k.map(v=>v.split(","));u.forEach(v=>{if(v[ql.Identifier]==="TOTP KEY$"&&v[ql.Value]){let P=v[ql.Value]??"";gi(P,a,r)}else if(v[ql.Value]&&i!==v[ql.Value]&&s!==v[ql.Value]&&v[ql.Format]!==vl.Check&&v[ql.Format]!==vl.Radio){let P=v[ql.Name]||"";oe.populateVaultItemSectionField(a,P,v[ql.Value]??"",void 0,A,r)}});let m=UE(u.map(v=>{if(!(v[ql.Identifier]==="TOTP KEY$"&&v[ql.Value]))return SKj(i,s,v)})),{username:I=[],password:S=[],undefined:f=[]}=Gp(m,"designation");return a.webFormFields=UE([...a.webFormFields,ME(I),ME(S),...f]),a.setUsername(i),a.setPassword(s),a},SKj=(A,j,e)=>{if(e.length<5)return;let[t,r,a,n,o]=e;if(!o)return;let i=n?MKj(n):"T",s,l;return A===o&&n===vl.Text?(s=vl.Username,l=r===""?vl.Username:void 0):j===o&&n===vl.Password&&(s=vl.Password,l=r===""?vl.Password:void 0),{designation:s,name:l||r,type:i,value:o}},vl;(function(A){A.Username="username",A.Password="pwd",A.Check="chk",A.Radio="rad",A.Text="txt"})(vl||(vl={}));var ql;(function(A){A[A.Identifier=0]="Identifier",A[A.Name=1]="Name",A[A.Unknown=2]="Unknown",A[A.Format=3]="Format",A[A.Value=4]="Value"})(ql||(ql={}));var MKj=A=>{switch(A){case vl.Password:return"P";case vl.Radio:return"R";case vl.Check:return"C";case vl.Text:return"T";default:return"T"}};var tOA=W(Io());var _Kj="action/import/csv",LKj=gr(_Kj),heA=async(A,j)=>{let e=await Vi(j.context);try{switch(A.kind){case od.Login:return NKj(A,j,oe.getVaultItemTemplate(yj.LoginUuid,e));case od.CreditCard:return JKj(A,j,oe.getVaultItemTemplate(yj.CreditCardUuid,e));case od.SecureNote:return RKj(A,j,oe.getVaultItemTemplate(yj.SecureNoteUuid,e))}}catch(t){return LKj("csvToVaultItems",t)}},NKj=(A,j,e)=>A.rows.map(t=>zKj(j.vault,e,j.translators,t)),zKj=(A,j,e,t)=>{let r=new dA(A);r.templateUuid=j.uuid;let a=t.filter(o=>o.type===vm.Template),n=qeA(t);return a?.forEach(o=>{let{cellValue:i,headerValue:s}=o;switch(s){case nd.Title:{r.title=i||j.singularName;break}case nd.Username:{r.setUsername(i);break}case nd.Password:{i.length>0&&r.setPassword(i);break}case nd.Website:{i.length>0&&(r.url=i);break}case nd.Tags:{i.length>0&&(r.tags=aOA(o));break}case nd.Notes:{i.length>0&&(r.notes=i);break}case nd.OneTimePassword:{i.length>0&&gi(i,r,e);break}}}),n&&n.length!==0&&veA(r,n,j,e),r},RKj=(A,j,e)=>A.rows.map(t=>{let r=new dA(j.vault,e),a=t.filter(o=>o.type===vm.Template),n=qeA(t);return rOA(r,VB.Title,VB.Tags,VB.Notes,a,e),n&&n.length!==0&&veA(r,n,e,j.translators),r}),JKj=(A,j,e)=>A.rows.map(t=>UKj(t,j.vault,e,j.translators)),UKj=(A,j,e,t)=>{let r=new dA(j,e),a=A.filter(i=>i.type===vm.Template),n=qeA(A),o=rOA(r,M6.Title,M6.Tags,M6.Notes,a,e);return o&&XKj(r,o,od.CreditCard,e,t),n&&n.length!==0&&veA(r,n,e,t),r},rOA=(A,j,e,t,r,a)=>{let n=r.find(s=>s.headerValue===j);A.title=n?.cellValue||a.singularName;let o=r.find(s=>s.headerValue===e);o&&(A.tags=aOA(o));let i=r.find(s=>s.headerValue===t);return i&&(A.notes=i.cellValue),r.filter(s=>s.headerValue!==t&&s.headerValue!==e&&s.headerValue!==j)},qeA=A=>A.filter(j=>j.type===vm.Custom),veA=(A,j,e,t)=>{j.forEach(r=>{oe.populateVaultItemSectionField(A,r.headerValue,r.cellValue||"",void 0,e,t)})},XKj=(A,j,e,t,r)=>{let a=YKj[e];j.forEach(n=>{oe.populateVaultItemSectionField(A,n.headerValue,n.cellValue||"",a[n.headerValue]?.v?a[n.headerValue]:WKj(a[n.headerValue],n.cellAttrs?.[WB.Date]||""),t,r)})},aOA=A=>A.cellAttrs?.[WB.Tag]===void 0?[A.cellValue]:A.cellValue.split(A.cellAttrs[WB.Tag]).map(j=>j.trim()),VKj=A=>(j,e)=>{e||(e="");let t=e.toLowerCase();switch(j.k){case dA.FieldType.MonthYear:{let r=Number((0,tOA.default)(e,A).format("YYYYMM"));return r||(r=0),r}case dA.FieldType.Gender:return t==="m"||t==="male"?"male":t==="f"||t==="female"?"female":t;case dA.FieldType.CreditCardType:return pK(t);case dA.FieldType.Menu:return t;default:return e}},WKj=(A,j)=>{if(A!==void 0)return{...A,v:VKj(j)}},od;(function(A){A.Login="login",A.CreditCard="credit card",A.SecureNote="secure note"})(od||(od={}));var nd;(function(A){A.Title="title",A.Username="username",A.Password="password",A.Website="website",A.Notes="notes",A.OneTimePassword="otp",A.Tags="tags"})(nd||(nd={}));var M6;(function(A){A.Title="title",A.CardHolder="cardholder",A.CardType="type",A.CardNumber="ccnum",A.Cvv="cvv",A.Expiry="expiry",A.ValidFrom="validFrom",A.Notes="notes",A.BankName="bank",A.BankPhoneLocal="phoneLocal",A.BankPhoneTollfree="phoneTollFree",A.BankPhoneIntl="phoneIntl",A.Website="website",A.Pin="pin",A.CashWithdrawalLimit="cashLimit",A.InterestRate="interestRate",A.IssueNumber="issueNumber",A.CreditLimit="creditLimit",A.Tags="tags"})(M6||(M6={}));var VB;(function(A){A.Title="title",A.Notes="notes",A.Tags="tags"})(VB||(VB={}));var mI;(function(A){A[A.Template=0]="Template",A[A.Custom=1]="Custom",A[A.NotImported=2]="NotImported",A[A.NotDefined=3]="NotDefined"})(mI||(mI={}));var vm;(function(A){A[A.Template=0]="Template",A[A.Custom=1]="Custom"})(vm||(vm={}));var WB;(function(A){A.Date="Date",A.Tag="Tag"})(WB||(WB={}));var YKj={[od.Login]:{},[od.SecureNote]:{},[od.CreditCard]:{[M6.CardHolder]:{field:"cardholder",section:""},[M6.CardType]:{field:"type",section:""},[M6.CardNumber]:{field:"ccnum",section:""},[M6.Cvv]:{field:"cvv",section:""},[M6.Expiry]:{field:"expiry",section:""},[M6.ValidFrom]:{field:"validFrom",section:""},[M6.BankName]:{field:"bank",section:"contactInfo"},[M6.BankPhoneLocal]:{field:"phoneLocal",section:"contactInfo"},[M6.BankPhoneTollfree]:{field:"phoneTollFree",section:"contactInfo"},[M6.BankPhoneIntl]:{field:"phoneIntl",section:"contactInfo"},[M6.Website]:{field:"website",section:"contactInfo"},[M6.Pin]:{field:"pin",section:"details"},[M6.CreditLimit]:{field:"creditLimit",section:"details"},[M6.CashWithdrawalLimit]:{field:"cashLimit",section:"details"},[M6.InterestRate]:{field:"interest",section:"details"},[M6.IssueNumber]:{field:"issuenumber",section:"details"}}};var QKj="action/import/index",ZKj=rj(QKj),xl;(function(A){A.OnePassword="1pif",A.LastPass="lastpass",A.Dashlane="dashlane",A.Bitwarden="bitwarden",A.SplashID="splashid",A.RoboForm="roboform",A.Chrome="chrome",A.Firefox="firefox",A.KeePassXC="keepassxc",A.KeePass="keepass",A.Apple="apple",A.CSV="csv",A.Delinea="delinea",A.Memorized="memorized",A.PenPaper="pen-paper",A.Safari="safari",A.Edge="edge",A.Brave="brave",A.Spreadsheet="spreadsheet",A.DropboxPasswords="dropbox"})(xl||(xl={}));var nOA=async(A,j,e,t,r,a,n)=>ZKj("importData",async()=>await A5j(j)(A,e,t,r,a,n)),oOA=async(A,j,e)=>{let t=[];for(let a of e)j5j(a)&&t.push(a);if(t.length===0)throw new Error("No importable items were found in the selected file.");let r=await gl(A,t,j);return cr(A),r.updatedItems},A5j=A=>{switch(A){case xl.LastPass:return W1A;case xl.Dashlane:return Q8A;case xl.RoboForm:return jOA;case xl.Chrome:return Y8A;case xl.Firefox:return _1A;case xl.Apple:return J8A;case xl.Delinea:return C1A;case xl.KeePass:return z1A;case xl.Bitwarden:return W8A;case xl.DropboxPasswords:return S1A;default:throw new Error("Invalid import format.")}},j5j=A=>{let j=JSON.stringify(A.overview);if(j&&j.length>dA.MaxOverviewSize)return!1;let e=JSON.stringify(A.details);return!!e&&e.length<=dA.MaxDetailSize};var e5j=async(A,j)=>uz(A.session,j);var t5j=async A=>VJ(A.session),r5j=async(A,j,e,t,r,a)=>WJ(A.session,j,e,t,r,a),a5j=async(A,j,e,t)=>YJ(A.session,j,e,t?"asc":"desc");var n5j=(A,j)=>{switch(A){case gt.Provisioning:return j===VT?"hosted-provisioning/managed-groups":"provisioning";case gt.Connect:return"infrastructure-secrets/connect";case gt.DataStreaming:return"events_reporting";case gt.Cli:return"cli";case gt.Slack:return"slack";case gt.Duo:return"duo";case gt.MaskedEmails:return"fastmail";case gt.Brex:return"brex";case gt.PrivacyCom:return"privacycom";case gt.UserManaged:return"infrastructure-secrets/serviceaccount";default:return"na"}};var iOA=async({sa:A,devices:j,usersVaults:e})=>{let t=await rq(A,Ri.Attr.Tokens|Ri.Attr.VaultAccess),r=o5j(t.tokens).length,a=i5j(t.tokens).length,n=()=>!t.displayableVaultAccess||!e?[]:t.displayableVaultAccess.map(s=>{let l=e.find(d=>d.uuid===s.vaultUuid);if(!l)throw new Error(`Could not find vault "${s.vaultUuid}"`);return{uuid:s.accessorUuid,avatar:l.avatar,type:l.type}}),o=()=>t.totalAccessibleVaults,i=j&&j.filter(l5j).sort(cl.compareAuthDates).shift();return{title:t.name,icon:t.avatar,active:r,tokens:void 0,expiredTokens:a,groups:[],syncActivity:t.lastAuthAt,createdAt:t.createdAt,version:i?.clientVersion,vaults:{displayable:n(),total:o()}}},sOA=iOA,lOA=iOA,o5j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&!t})},i5j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&t})},s5j="1passwordconnect",l5j=({clientName:A})=>A.replace(/\s+/g,"").toLowerCase()===s5j;var cOA=async({sa:A})=>{let j=await rq(A,Ri.Attr.Tokens|Ri.Attr.VaultAccess),e=c5j(j.tokens),t=e.length,r=d5j(j.tokens).length;return{title:A.name,icon:A.avatar,groups:[],active:t,expiredTokens:r,tokens:e,createdAt:H6(A.createdAt),syncActivity:void 0,version:"",vaults:{displayable:[],total:0}}},c5j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&!t})},d5j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&t})};var dOA=async({CTX:A,sa:j,releases:e})=>{let t=()=>{switch(A.account?.settings.provisioning?.identityProvider){case"Microsoft Entra ID":return"/entra-logo.svg";case"Okta":return"/okta-logo.svg";case"OneLogin":return"/onelogin-logo.svg";case"Rippling":return"/rippling-logo.svg";case"JumpCloud":return"/jumpcloud-logo.svg";case"Google Workspace":return"/google-workspace-logo.svg";case void 0:default:return"/icon-provisioning.svg"}},r=async()=>{if(!j.memberships)return[];let a=await PAA(A);return j.memberships.filter(o=>o.role===sr.Role.Manager).map(o=>{let i=a.find(s=>s.uuid===o.groupUuid);if(!i)throw new Error(`Could not find group "${o.groupUuid}"`);return{uuid:o.groupUuid,avatar:i.avatar,type:i.type}})};return{title:j.name,icon:t(),groups:await r(),active:void 0,expiredTokens:void 0,tokens:void 0,syncActivity:void 0,createdAt:H6(j.createdAt),version:"",buildNumber:e?.SCIM?.release?.buildnum,vaults:{displayable:[],total:0}}};var vk=async({serviceAccount:A,devices:j,releases:e,slackApp:t,type:r,CTX:a,usersVaults:n,vaultItem:o})=>{let i,s="",l,d;switch(r){case gt.Connect:{if(A)return await sOA({sa:A,devices:j,usersVaults:n});break}case gt.UserManaged:{if(A)return await lOA({sa:A,devices:j,usersVaults:n});break}case gt.Provisioning:{if(A)return await dOA({CTX:a,sa:A,releases:e});break}case gt.DataStreaming:{if(A)return await cOA({sa:A});break}case gt.Duo:{l="icon-duo.svg";break}case gt.Slack:{s=t?t.teamName:"",l="slack-icon-v2.svg";break}case gt.MaskedEmails:{l="icon-fastmail-60.svg";break}case gt.Brex:{l="icon-brex.svg";break}case gt.PrivacyCom:{l="icon-privacycom.svg";break}case gt.Cli:case gt.Na:break}return{title:s,active:i,expiredTokens:d,icon:l,groups:[],syncActivity:void 0,createdAt:void 0,tokens:void 0,version:"",vaults:{displayable:[],total:0},vaultItem:o}};var kOA=async A=>{let j=A.account?.settings,e=A.user?.hasPermission(rt.ChangeTeamSettings);if(!(!j?.duo?.isEnabled||!e))return{type:"S",uuid:"",name:"Duo",createdAt:"",state:"",creatorUuid:"",serviceAccountType:gt.Duo,email:"",avatar:"",summary:await vk({type:gt.Duo,CTX:A})}};var uOA=async A=>{if(!A.account?.hasFeature?.integrationHubEmailAlias)return[];let e=await Ek(A);if(!e)return[];let r=(await td(A,e)).filter(a=>a.overview.integration==="fastmail");return await Promise.all(r.map(async a=>({type:"S",uuid:a.uuid,name:"Fastmail",createdAt:"",state:"",creatorUuid:"",serviceAccountType:gt.MaskedEmails,email:"",avatar:"",summary:await vk({type:gt.MaskedEmails,vaultItem:a,CTX:A})})))};var pOA=async A=>{let{integrations:j,releases:e}=await cjA(A,["vault-access","groups","devices","app-releases","tokens"]),t=j.filter(({serviceAccount:a})=>a.serviceAccountType!==gt.Cli);if(t.length===0)return[];t.sort(ni.strings(({serviceAccount:a})=>a.serviceAccountType));let r=await RB(A);return Promise.all(t.map(async({serviceAccount:a,devices:n})=>({...a,devices:n,type:"S",creatorUUID:"",serviceAccountSubtype:"na",serviceAccountType:a.serviceAccountType,summary:await vk({serviceAccount:a,devices:n,releases:e,usersVaults:r,type:a.serviceAccountType,CTX:A})})))};var k5j="action/slack",AF=gr(k5j),feA=async A=>{try{return{type:"slack-app",slackApp:await dY(A.session)}}catch(j){return CA.isNewServerError(j)?{type:"server-error",error:j}:{type:"error",error:j}}},u5j=async(A,j)=>{let e=[],t="";do try{let r=await nY(A.session,t);e.push(...r.channels),t=r.cursor??""}catch(r){return AF("getSlackChannels",r)}while(t!==""&&(!j||e.length<j));return e},p5j=async(A,j)=>{try{return(await iY(A.session,j)).userGroups}catch(e){return AF("getSlackGroups",e)}},m5j=async(A,j,e)=>{let t=[],r="";do try{let a=await oY(A.session,j,r);t.push(...a.channels),r=a.cursor??""}catch(a){return AF("getGridSlackChannels",a)}while(r!==""&&(!e||t.length<e));return t},E5j=async(A,j)=>{try{return{type:"slack_users_response",slackUsers:await sY(A.session,j)}}catch(e){return CA.isServerError(e,CA.ServerErrorReason.slackUserLimitReached)?{type:"slack_users_response_large_team_error"}:{type:"slack_users_response_other_error"}}},B5j=async A=>{try{return(await lY(A.session)).teams}catch(j){return AF("getGridSlackTeams",j)}},g5j=async A=>{try{return(await cY(A.session)).userGroups}catch(j){return AF("getSlackGroups",j)}},h5j=async(A,j)=>{let e=Nl(j);return kY(A.session,e).catch(AF("updateSlackApp"))},q5j=async A=>{try{return{type:"slack_users_response",slackUsers:await aY(A.session)}}catch(j){return CA.isServerError(j,CA.ServerErrorReason.slackUserLimitReached)?{type:"slack_users_response_large_team_error"}:{type:"slack_users_response_other_error"}}},v5j=async A=>{try{let{nonce:j}=await uY(A.session);return j}catch(j){return console.error("Failed to get nonce:",j),CA.isNewServerError(j)?{type:"server-error",error:j}:{type:"error",error:j}}},x5j=async(A,j)=>{await pY(A.session,j)};var mOA=async A=>{if(!A.account?.hasFeature.slack)return;let j=await feA(A),e=sZ(jk.Inactive);if(j.type!=="slack-app"||j.slackApp.state===jk.Inactive)return;let t=j.type==="slack-app"?j.slackApp:e;return{type:"S",uuid:"",name:"Slack",createdAt:"",state:t.state,creatorUuid:"",serviceAccountType:gt.Slack,email:"",avatar:"",summary:await vk({slackApp:t,type:gt.Slack,CTX:A})}};var EOA=async A=>{let j=await Ek(A);if(!j)return[];let e=await td(A,j),r=[...e.filter(n=>n.overview.integration==="privacy").map(async n=>({type:"S",uuid:n.uuid,name:"Privacy.com",createdAt:"",state:"",creatorUuid:"",serviceAccountType:gt.PrivacyCom,email:"",avatar:"",summary:await vk({type:gt.PrivacyCom,vaultItem:n,CTX:A})}))];if(A.account?.hasFeature?.integrationHubBrex){let n=e.filter(o=>o.overview.integration==="brex").map(async o=>({type:"S",uuid:o.uuid,name:"Brex",createdAt:"",state:"",creatorUuid:"",serviceAccountType:gt.Brex,email:"",avatar:"",summary:await vk({type:gt.Brex,vaultItem:o,CTX:A})}));r.push(...n)}return await Promise.all(r)};var f5j=async A=>{let[j,e,t,r,a]=await Promise.all([pOA(A),mOA(A),kOA(A),uOA(A),EOA(A)]);return e&&j.push(e),t&&j.push(t),[...j,...r,...a]};var G5j=15,BK=A=>A.filter(j=>j.email).map(j=>new Ru(j)),F5j=async A=>{let j=await uU(A.session);return BK(j)},b5j=async(A,j)=>(await xU(A.session,j)).map(t=>new CB(t)),y5j=async(A,j)=>{await fU(A.session,j)},$5j=async(A,j)=>{await GU(A.session,j)},w5j=async(A,j,e,t,r)=>{let n=await K6(async s=>{let l=s.map(d=>({email:d,language:"en",vaults:t}));return mU(A.session,l,e,r)},100,j),i=(s=>{let l=s.reduce((d,k)=>({successfulInvites:[...d.successfulInvites,...k.successfulInvites],failedInvites:[...d.failedInvites,...k.failedInvites]}),{successfulInvites:[],failedInvites:[]});return{successfulInvites:BK(l.successfulInvites),failedInvites:l.failedInvites}})(n);if(i.failedInvites.length===1&&i.successfulInvites.length===0&&i.failedInvites[0]?.reason)throw new CA.ClientError(i.failedInvites[0]?.reason==="is_existing_guest"?CA.ClientErrorCode.emailAlreadyInUseByGuest:CA.ClientErrorCode.emailAlreadyInUseByMember);return i},I5j=async(A,j)=>{let e=await pU(A.session,j);return BK(e)},D5j=async(A,j)=>{let e=j.map(a=>a.uuid),r=await K6(async a=>(await BU(A.session,a),[]),G5j,e);return BK(r)},O5j=async(A,j,e)=>await dU(A.session,j,e),P5j=async(A,j)=>await kU(A.session,j),C5j=async(A,j)=>await EU(A.session,j),H5j=async A=>{let j=await vU(A.session);return A.account&&(A.account.inviteSecret=j.inviteSecret,A.account.attrVersion++,to(A)),j},T5j=async(A,j)=>{let e=j.map(t=>t.uuid);await gU(A.session,e)},K5j=async(A,j)=>await hU(A.session,j),S5j=async(A,j,e)=>await qU(A.session,j,e);var xm;(function(A){A[A.OneHour=3600]="OneHour",A[A.OneDay=86400]="OneDay",A[A.SevenDays=604800]="SevenDays",A[A.FourteenDays=1209600]="FourteenDays",A[A.ThirtyDays=2592e3]="ThirtyDays"})(xm||(xm={}));var BOA=[xm.OneHour,xm.OneDay,xm.SevenDays,xm.FourteenDays,xm.ThirtyDays],gOA=[Lu.AnyoneWithTheLink,Lu.OnlySomePeople],M5j=async(A,j)=>{let e=await bU(A.session,j.vault.uuid,j.uuid);return{shares:await Promise.all(e.shares.map(async t=>_5j(t,j)))}},_5j=async(A,j)=>{let e=j.vault.activeKey;if(!e)throw new Error("Missing vault key");let t=A.encShareSecret?V6(await e.decrypt(A.encShareSecret)):"",r=t?`${A.url}#${t}`:void 0;return{uuid:A.uuid,state:A.state,itemVersion:A.itemVersion,createdAt:A.createdAt,expiresAt:A.expiresAt,sharedBy:A.sharedBy,shareLink:r,type:A.type,recipients:A.recipients,viewCount:A.viewCount,maxViews:A.maxViews,canDelete:A.canDelete}},L5j=async(A,j,e)=>{try{let t=await yU(A.session,j.vault.uuid,j.uuid),r=t.files.allowed&&hOA(j,t.files.maxSize,!!e).length>0,{allowedRecipientTypes:a,allowedTypes:n,maxExpiry:o,defaultExpiry:i,maxViews:s}=N5j(t,r),l=gOA.find(d=>n.includes(d));if(!l)throw new Error("No allowed availability options found");return{type:"settings",allowedRecipientTypes:a,expirationMenu:{entries:BOA.filter(z5j(o)),default:BOA.includes(i)?i:xm.OneHour},availabilityMenu:{entries:gOA.filter(d=>n.includes(d)),default:l},maxExpiry:o,maxViews:s,includeFiles:r}}catch(t){if(CA.isNewServerError(t,CA.ServerErrorReason.unsupported,CA.HTTPStatusCode.forbidden))return{type:"unsupported"};if(CA.isNewServerError(t,CA.ServerErrorReason.accountPolicy,CA.HTTPStatusCode.forbidden))return{type:"accountPolicy"};throw t}},N5j=(A,j)=>{let e=j&&A.files.allowedRecipientTypes?A.files.allowedRecipientTypes:A.allowedRecipientTypes,t=j&&A.files.allowedTypes?A.files.allowedTypes:A.allowedTypes,r=j&&A.files.maxExpiry?A.files.maxExpiry:A.maxExpiry,a=j&&A.files.defaultExpiry?A.files.defaultExpiry:A.defaultExpiry,n=j&&"maxViews"in A.files?A.files.maxViews:A.maxViews;return{allowedRecipientTypes:e,maxExpiry:r,allowedTypes:t,defaultExpiry:a,maxViews:n}},hOA=(A,j,e)=>{if(A.details.documentAttributes&&!A.details.documentAttributes.signingKey)throw new Error("Document doesn't have signing key.");let t=e?Oc(A.details.sections??[],a=>Lr((a.fields??[]).map(n=>dA.getDocumentAttributesFromField(n)))):[];return Lr([A.details.documentAttributes,...t]).filter(a=>a.signingKey).map(a=>{if(j&&a.encryptedSize>j)throw new CA.ClientError(CA.ClientErrorCode.fileTooLarge,Z("File is too large to share."));return{fileUuid:xT(a)}})},z5j=A=>j=>j<=A,gK=class extends Error{constructor(j){super(),this.name="ItemShareRejectedRecipientsError",this.message="Item share contains rejected recipients.",this.recipients=j}},R5j=A=>CA.isErrorLike(A)&&A.name==="ItemShareRejectedRecipientsError",J5j=async(A,j,e)=>{let{secret:t,uuid:r,token:a,rawKey:n}=await xOA(),o=$t(r);await o.importRawKey(Tt,n);let i=new ej({name:"Fake Vault",type:"",desc:""});i.activeKey=o;let s=qOA(j.clone(),e.includeFiles);s.vault=i,await s.encrypt();let l=await Dw(s);if(!l.encDetails)throw new Error("Missing item details");let d=e.includeFiles?hOA(j,void 0,!!e.includeAttachments):[],k=e.recipients.map(f=>{if(Bh(f))return{type:Qd.Email,email:f};if(qy(f))return{type:Qd.Domain,domain:f};throw new Error("Invalid recipient")});if(k.length>0){let{rejectedRecipients:f}=await wU(A.session,{recipients:k});if(f.length>0)throw new gK(f)}if(!j.vault.activeKey)throw new Error("Missing vault key");let u=await j.vault.activeKey.encrypt(Dj(t)),m={uuid:r,token:a,vaultUuid:j.vault.uuid,itemUuid:j.uuid,itemVersion:j.itemVersion,encOverview:l.encOverview,encDetails:l.encDetails,encShareSecret:u,fileReferences:d,type:e.availability,recipients:k,expiry:e.expiration,maxViews:e.maxViews||void 0},{url:I}=await $U(A.session,m),S=[I,t].join("#");try{new URL(S)}catch(f){throw new Error(`Could not construct share link: ${G6(f)}`)}return S},qOA=(A,j)=>(A.details.passwordHistory=void 0,A.overview.icons=void 0,j&&A.details.documentAttributes?.signingKey?A.details.documentAttributes.signingKey=void 0:A.details.documentAttributes=void 0,A.details.sections=A.details.sections.map(e=>({...e,fields:(e.fields??[]).filter(X5j(j)).map(t=>{let r=dA.getDocumentAttributesFromField(t);return r?{...t,v:{...r,signingKey:void 0}}:t})})),A),U5j=pe(dA.FieldType,"VaultItem.FieldType"),X5j=A=>j=>{if(!U5j.is(j.k))return!1;if(j.k===dA.FieldType.File)return dA.getDocumentAttributesFromField(j)?.signingKey?A:!1;switch(j.k){case dA.FieldType.String:case dA.FieldType.Concealed:case dA.FieldType.Date:case dA.FieldType.Phone:case dA.FieldType.Address:case dA.FieldType.Url:case dA.FieldType.Email:case dA.FieldType.MonthYear:case dA.FieldType.Gender:case dA.FieldType.CreditCardType:case dA.FieldType.Menu:case dA.FieldType.Country:case dA.FieldType.Month:case dA.FieldType.OneTimePassword:case dA.FieldType.SshKey:return!0;case dA.FieldType.Reference:case dA.FieldType.SsoLogin:case dA.FieldType.ManagedApplication:return!1;case dA.FieldType.PasskeyType:return!1}},V5j=async(A,j)=>{let e={...A,itemVersion:1,encryptedBy:A.encOverview.kid},t=$t(A.uuid);await t.importRawKey(Tt,j);let r=new ej({name:"Fake Vault",type:"",desc:""});return r.activeKey=t,await MB(e,r)},W5j=async A=>{let j;try{j=ZA(A)}catch{throw new Error("invalid base64")}return await vOA(j)},vOA=async A=>{if(A.byteLength!==32)throw new Error("Incorrect secret byte length: "+A.byteLength.toString(10));let j=VE(await Q6.rawHkdf(Q6.Sha2Mode.Sha256,A,Dj("share_item_uuid"),new Uint8Array,16)),e=VE(await Q6.rawHkdf(Q6.Sha2Mode.Sha256,A,Dj("share_item_token"),new Uint8Array,16)),t=await Q6.rawHkdf(Q6.Sha2Mode.Sha256,A,Dj("share_item_encryption_key"),new Uint8Array,32);return{uuid:j,token:e,rawKey:t}},xOA=async()=>{let A=Vr(32),{uuid:j,token:e,rawKey:t}=await vOA(A);return{secret:tj(A),uuid:j,token:e,rawKey:t}},Y5j=async(A,j)=>{let e=await IU(A.session,j);return Q5j(e)},Q5j=A=>{let{events:j,accessType:e}=A;if(e===Lu.OnlySomePeople){let t=Z5j(A.recipients),r=A.recipients.map(a=>a.type===Qd.Email?{type:"email",value:a.email,events:j.filter(n=>n.accessorEmail===a.email)}:{type:"domain",value:a.domain,events:j.filter(n=>ASj(n.accessorEmail,a.domain)&&!t.includes(n.accessorEmail))}).sort(ni.strings(a=>a.value));return{...A,accessType:e,sortedEvents:r}}else{let t=Gp(j,a=>a.timestamp.toISOString().slice(0,10)),r=pn(t,(a,n)=>({dateString:n,events:a})).sort(ni.desc.dates(a=>new Date(a.dateString)));return{...A,accessType:e,sortedEvents:r}}},Z5j=A=>A.filter(e=>e.type===Qd.Email).map(e=>e.email),ASj=(A,j)=>A.slice(A.indexOf("@")+1)===j,jSj=async A=>DU(A.session),eSj=async(A,j,e,t)=>OU(A.session,j,e,t),tSj=async(A,j)=>PU(A.session,j),rSj=async A=>CU(A.session);var fOA="action/managed_account",EI=gr(fOA),BI=rj(fOA),aSj=async(A,j)=>BI("getManagedAccounts",async()=>SU(A.session,j).catch(EI("getManagedAccounts"))),nSj=async(A,j)=>BI("unlinkManagedAccount",async()=>LU(A.session,j).catch(EI("unlinkManagedAccount"))),oSj=async(A,j)=>BI("getManagedAccountDetails",async()=>zU(A.session,j).catch(EI("getManagedAccountDetails"))),iSj=async(A,j)=>BI("getManagedAccountAccessDetails",async()=>RU(A.session,j).catch(EI("getManagedAccountAccessDetails"))),sSj=async(A,j)=>BI("updateManagedCompanyMspPermissions",async()=>ZU(A.session,j).catch(EI("updateManagedCompanyMspPermissions")));var lSj="action/managed_account_net_seats",cSj=rj(lSj),dSj=async(A,j)=>cSj("getManagedAccountsNetSeats",async()=>JU(A.session,j));var GOA="action/managed_credential",GeA=gr(GOA),FeA=rj(GOA),kSj=async A=>FeA("getManagedCredentials",async()=>KN(A.session).catch(GeA("getManagedCredentials"))),uSj=async(A,j)=>FeA("createManagedCredentials",async()=>SN(A.session,j).catch(GeA("createManagedCredentials"))),pSj=async(A,j)=>FeA("updateManagedCredential",async()=>MN(A.session,j).catch(GeA("updateManagedCredential")));var FOA="action/managed_credential_policies",mSj=gr(FOA),ESj=rj(FOA),BSj=async A=>ESj("getManagedCredentialPolicies",async()=>CN(A.session).catch(mSj("getManagedCredentialPolicies")));var gSj=async(A,j,e,t)=>{if(e.find(i=>i.type!==ej.TypeUserCreated))throw new Error("Unsupported vault type included in selected vaults.");let r=[await bOA(A),await NT(A),...e],a=e.length>0?await BAA(j):void 0,n=await X4(async i=>({vaultItems:await td(A,i),vault:i.type===ej.TypeUserCreated?await Yu(A,i,{attrs:ej.Attr.Accessors,mustReload:!0}):i}),10,r.filter(i=>!!i));await ao(A,[Dt.Groups]);let o={successfulVaults:[],failedVaults:[],failedItems:{}};return await X4(async i=>{try{let s=await hSj(j,a,A,i.vault,t),l=i.vaultItems.map(d=>dA.importFromJson(s,d.exportToJson()));return gl(j,l,s).then(d=>{o.successfulVaults.push(i.vault);let k=Object.keys(d.failedItems);k.length>0&&(console.error("Failed to patch some vault items",s.uuid,d.failedItems),o.failedItems[s.uuid]=k)}).catch(d=>{o.failedVaults.push(s.uuid),console.error("Failed to patch vault items",s.uuid,d)})}catch(s){return console.error("Failed to migrate vault",i.vault.uuid,s),o.failedVaults.push(i.vault.uuid),Promise.resolve()}},10,n),o},hSj=async(A,j,e,t,r)=>{let a=e.account?.administratorsGroup?.uuid;switch(t.type){case ej.TypePersonal:return await bOA(A);case ej.TypeGeneratedPasswords:return await NT(A)||await Mw(A);case ej.TypeUserCreated:{if(!j)throw new Error("Missing destination preflight.");return await gAA(A,{name:t.name,desc:t.desc,type:ej.TypeUserCreated,avatar:await vSj(e,A,t,r)},qSj(t,a,j))}default:throw new Error("Can't get destination vault for unsupported type.")}},qSj=(A,j,e)=>{let t=[...e.mandatoryGroupUuids];if(!j)return t;for(let r of e.adminGroupUuids)r&&!e.mandatoryGroupUuids.includes(r)&&A.accessList.find(a=>a.accessorType==="group"&&a.accessorUuid===j)&&t.push(r);return[...t]},bOA=async A=>{let j=await Bm(A);if(!j)throw new Error("Missing personal vault.");return j},vSj=async(A,j,e,t)=>{if(!e.avatar)return"";let r=t(e.avatar,A.account),a=await fetch(r,{cache:"no-store"}).then(async n=>n.arrayBuffer());return await rjA(j,a)};var xSj="action/monitoring",fSj=rj(xSj),GSj=async(A,j)=>fSj("createMonitoringCheck",async()=>await T$(A.session,j)),FSj=async A=>await UU(A.session);var bSj=async A=>(await nX(A.session)).notifications,ySj=async(A,j)=>{await oX(A.session,{uuid:j})},$Sj=async(A,j)=>{await iX(A.session,{token:j})};var wSj=async(A,j,e)=>A.isSignedIn()?Ve.createSetupIntent(A.session):Ve.createUnverifiedSetupIntent(A.session,j,e),ISj=async(A,j,e)=>Ve.updatePaymentMethod(A.session,j,e).then(async()=>Is(A)),DSj=async(A,j)=>Ve.getPaymentMethod(A.session,j);var OSj=async(A,j={})=>{let e;try{e=await QJ(A.session,j)}catch(t){throw CA.isNewServerError(t)&&t.reason===CA.ServerErrorReason.oidcGenericDomainNotAllowed||Nr(new Pe({message:E`StartOIDC failed to get redirect URL`,errorClass:mn.RequestError,userUuid:j.userUuid?Z(j.userUuid):void 0,stackOverrideError:t,severityLevel:"error",metaData:{request:{accountUuidPresent:j.accountUuid?E`true`:E`false`,keyIdPresent:j.keyId?E`true`:E`false`}},tags:yOA(t)})),t}if(!e||!e.authRedirect)throw new Error("expected an IdP redirect URL");return e.authRedirect},PSj=async(A,j,e,t)=>{try{return await A.session.verifyOidc(j,e,t)}catch(r){throw Nr(new Pe({message:E`VerifyOIDC failed to get user identity`,errorClass:mn.RequestError,stackOverrideError:r,severityLevel:"error",tags:yOA(r)})),r}},yOA=A=>{let j={};return CA.isNewServerError(A)&&A.reason&&Object.values(CA.ServerErrorReason).includes(A.reason)&&(j={...j,serverErrorReason:Z(A.reason)}),j};var CSj=async(A,j)=>hX(A.session,j).catch(e=>{console.error("Failed to report outdated browser:",e)});var beA;(function(A){A.Asc="ASC",A.Desc="DESC"})(beA||(beA={}));var yeA;(function(A){A.Name="Name",A.CreatedAt="Created",A.UpdatedAt="Updated"})(yeA||(yeA={}));var HSj=async(A,j)=>wX(A.session,j);var $eA={};Yt($eA,{deletePrivacyComItemByUuid:()=>KSj,findPrivacyComItemByUuid:()=>$OA,getOrCreateSystemVault:()=>TSj});var TSj=async A=>{let j=await Ek(A);return j||await uq(A)},$OA=(A,j)=>A.find(e=>e.overview.integration==="privacy"&&e.uuid===j),KSj=async(A,j)=>{let e=await Ek(A);if(!e)throw new Error("The system vault was expected but missing during Privacy.com deletion");let t=await td(A,e),r=$OA(t,j);if(!r)throw new Error("The Privacy.com record was expected but missing during Privacy.com deletion");r.state=dA.ItemState.Deleted;let a=await gl(A,[r],e);if(a.failedItems[j])throw new Error("The Privacy.com record was unable to be deleted");return a};var SSj={...$eA};var wOA="action/report",Fq=gr(wOA);var MSj=async A=>Promise.resolve().then(async()=>cW(A.session)).catch(Fq("getDashboardReport")),_Sj=async(A,j,e)=>Promise.resolve().then(async()=>fW(A.session,j,e)).then(async t=>ZZ(A,t,Lw(A,j))).catch(Fq("getUserReport")),LSj=async(A,j,e)=>{if(!kH(j))throw new Error("report params are invalid");try{let t=await FW(A.session,j,e),r=await vT(A,t);return{apiReportItem:t,itemUsages:r}}catch(t){return Fq("getUsageReportsWithFilters",t)}},NSj=async(A,j,e)=>{if(!kH(j))throw new Error("report params are invalid");try{let t=await GW(A.session,j,e),r=await vT(A,t);return{apiReportItem:t,itemUsages:r}}catch(t){return Fq("getUsageReportsWithCursors",t)}},zSj=async(A,j,e)=>bW(A.session,j,e),RSj=async(A,j,e)=>Promise.resolve().then(async()=>yW(A.session,j,e)).then(async t=>AAA(A,t)).catch(Fq("getVaultReport")),JSj=async(A,j,e)=>{try{let t=await $W(A.session,j,e);return jAA(A,t)}catch(t){return Fq("getVaultsReport",t)}},USj=async(A,j)=>j.length===0?{}:wW(A.session,j),XSj=async A=>IW(A.session,[U$.ExtendedOverview]).catch(Fq("getOverviewReport")),VSj=async A=>DW(A.session),WSj=async A=>jo([wOA,"getAccountReportCSV",A.id],async()=>OW(A.session)),jF=A=>A.map(j=>({uuid:j})),YSj=async(A,j)=>{let e=jF(j),t=wo(e,W$);try{for(let r of t)await PW(A.session,r),await Qn(1500)}catch(r){throw console.error("Failed to send unused private vault email.",r),r}},QSj=async(A,j)=>{let e=jF(j),t=wo(e,W$);try{for(let r of t)await CW(A.session,r),await Qn(1500)}catch(r){throw console.error("Failed to send unredeemed family account email.",r),r}},ZSj=async(A,j)=>{let e=jF(j),t=wo(e,W$);try{for(let r of t)await HW(A.session,r),await Qn(1500)}catch(r){throw console.error("Failed to send no signin past month email.",r),r}},AMj=async A=>TW(A.session),IOA=10,jMj={currentPage:1,itemsPerPage:IOA,itemsReturned:0,totalItems:0,totalPages:1},eMj={activeUsersLastWeek:0,activeUsersWithExtensionInstalls:0,totalActiveUsers:0},tMj=async(A,{itemsPerPage:j,currentPage:e,extensionStatus:t,search:r,sortBy:a,sortDirection:n})=>{let o={itemsPerPage:j,currentPage:e,extensionStatus:t,search:r,sortBy:a,sortDirection:n};return KW(A.session,o)},rMj=async A=>SW(A.session),aMj=async A=>MW(A.session);var nMj=async A=>{let e={name:"Provision Managers",type:wA.TypeProvisioning,desc:"",avatar:void 0},t=await CAA(A,e),r=await Na(A,t.uuid,{attrs:wA.Attr.PubKey|wA.Attr.Memberships});return await ao(A,[Dt.Me]),r},DOA=async(A,j,e,t)=>{let r=await ijA(A,gt.Provisioning),{user:a,encKeyset:n,creds:o}=await sjA(A,r.email,e);if(!a.activeKeyset)throw new Error("Missing user active keyset.");let i={uuid:Hr.UUIDNewlyCreatedServiceAccount,pubKey:n.pubKey},s=await gk(A),l=await djA(A,i,[j,s],t),d={srpX:o.srpX,params:o.userAuth};return{user:(await ljA(A,{encKeyset:n,user:a,preflightResponse:r,userAuth:d,serviceAccountType:gt.Provisioning,permissions:Xj.empty(),access:{groups:l}})).person,creds:o,keyset:a.activeKeyset}},oMj=async(A,j,e)=>{let{user:t,userAuth:r}=await Nw(A,j,"Provision Manager");await t.encryptActiveKeysetWithMasterKey();let a=await $AA(A,t,r);return await LT(A,{user:a,add:[{uuid:e.uuid,role:sr.Role.Member}],remove:[]}),await wAA(A,a,{token:!0}),{user:a,creds:t.getCredentials()}},iMj=async(A,j)=>{let t=(await jI(A,j.uuid)).users.filter(r=>Yj.isProvisionManager(r)&&Yj.isActive(r)&&!Yj.isServiceAccount(r));if(t.length!==0)return t},sMj=async(A,j)=>{let t=(await jI(A,j.uuid)).users.find(r=>!Yj.isOwner(r)&&!Yj.isAdmin(r));if(t)return Qu(A,t.uuid,{attrs:Hr.Attr.PubKey,mustReload:!1})},lMj=async(A,j)=>{if(!A.user)throw new Error("User is missing");(await jI(A,j.uuid)).users.find(r=>r.uuid===A.user?.uuid)||await cq(A,{group:j,add:[{uuid:A.user.uuid,role:sr.Role.Manager}],remove:[]})},cMj=A=>async()=>{let j=await zw(A,{attrs:wA.Attr.Memberships,mustReload:!0});if(!j)throw new Error("Provision Managers group is missing");if(!j.memberships)throw new Error("Provision Managers group is empty");let e=j.memberships.find(t=>t.memberUuid===A.user?.uuid);e&&await cq(A,{group:j,add:[],remove:[e.memberUuid]})},OOA=async(A,j,e)=>{try{await T$(A.session,{domain:j,bearerToken:e})}catch{throw new Error("Couldn\u2019t turn on SCIM bridge health monitoring.")}},dMj=(A,j)=>async(e,t,r,a)=>{if(!A.account)throw new Error("Account is missing.");let n=new nq(A.config),o={allowReauthorization:!0,suppressClientNotifications:!0,isDesignatedAsPublic:!1},i=t.type===Yj.Type.ServiceAccount,s;if(i)if("userAuth"in e){if(s=e,s.userAuth===void 0)throw new Error("Missing credential auth information")}else throw new Error("srpCredentials are missing.");else{await qq(n,e,o).catch(P=>{throw new Error(`Failed to authenticate the Provision Manager: ${G6(P)}`)});let f=await IjA(n);if(f===void 0)throw new Error("srpCredentials are missing.");let v=n.session.auth?.params;if(v===void 0)throw new Error("Missing session auth information");s={...f,signInAddress:A.account&&A.account.urlHost(A.config.server)||"",userAuth:v}}let l=await Ju.generate(s),{bearerToken:d,...k}=await Ju.generateVerifierAndToken();if(a){if(!r)throw new Error("Enter the address where the SCIM bridge will be available.");await OOA(A,r,d)}let u={version:"2",...l.localAuth,healthVerifier:k,deviceUuid:fe(),domain:j},m=l.bearerToken,I=JSON.stringify(u);return{bearerToken:m,healthVerifierBearerToken:d,fileContents:I}},kMj=async(A,j,e)=>{if(!A.account)throw new Error("Account is missing.");if(!j.userAuth)throw new Error("Missing credential auth information.");let t=await Ju.generate(j),{bearerToken:r,...a}=await Ju.generateVerifierAndToken(),n={version:"2",...t.localAuth,healthVerifier:a,deviceUuid:fe(),domain:e},o=t.bearerToken,i=JSON.stringify(n);return{bearerToken:o,healthVerifierBearerToken:r,fileContents:i}},uMj=async(A,j,e,t)=>{let r=await Qu(A,j.uuid,{attrs:Hr.Attr.Groups}),a=await gk(A),n=r.groupMemberships.filter(s=>s.groupUuid!==e.uuid&&s.groupUuid!==a.uuid).map(s=>s.groupUuid),{user:o,creds:i}=await DOA(A,e,t);if(n.length>0){let s=n.map(d=>({uuid:d,role:sr.Role.Manager})),l={user:o.uuid,add:s,remove:[]};await LT(A,l)}return await yAA(A,[j]),{user:o,creds:i}};var pMj=async(A,j)=>{if(!A.user)throw new Error("Missing user.");if(!A.account)throw new Error("Missing account.");if(!A.config.env)throw new Error("Missing env.");let e={...j,userUuid:A.user.uuid,email:A.user.email,name:A.user.name,env:A.config.env,accountUuid:A.account.uuid,timestamp:new Date().toISOString()};return mMj(A,e)},mMj=async(A,j)=>{if(!A.user)throw new Error("Missing user.");if(!A.user.activeKeyset)throw new Error("User does not have active keyset.");if(!A.user.activeKeyset.hasSigningKeys||!A.user.activeKeyset.skeyPair?.priKey?.jwk)throw new Error("User does not have signing keys.");return rZ(A.user.activeKeyset.skeyPair.priKey.jwk,lt(j))};var eF;(function(A){A[A.Invite=1]="Invite",A[A.Recovery=2]="Recovery",A[A.Provision=3]="Provision"})(eF||(eF={}));var EMj=async(A,j,e,t)=>qH(A.session,`${j}?email=${encodeURIComponent(e)}`).then(r=>{let a=r.type===dt.Type.Business?r.domain:pl;return t.set("l",r.language),`https://${a}.${A.config.server}/register-account/${r.uuid}?${t}`}),BMj=async(A,j,e,t)=>jY(A.session,j,e,t).then(async r=>{let a=r.defaultBillingFrequency||Ve.Frequency.Yearly,n=r.availablePlans.find(i=>i.frequency===a);if(!n)throw new Error("Could not find default plan");let o={uuid:r.uuid,domain:r.domain,plan:n,tierName:r.tierName,trialEndsAt:H6(r.trialEndsAt),taxAdvice:void 0,features:r.features,duplicateAccounts:r.duplicateAccounts||[],accountCreationDisabled:r.accountCreationDisabled,promoCode:r.promoCode,setupIntentCode:r.setupIntentCode};return CjA(A,n.display.amount,"",r.tierName).then(i=>(o.taxAdvice=i,o)).catch(()=>o)}),gMj=async(A,j)=>{let e={email:j.email,domain:j.domain,name:j.accountName,type:j.accountType,language:j.language,promoCode:j.promoCode,referrer:j.referrer,source:j.source||bu.Web,tierName:j.tierName},t=j.accountType===dt.Type.Business?await hq(A,j.accountName):pl;e.domain=t,j.accountType===dt.Type.Individual&&(e.name=e.email),await YW(A.session,e)},hMj=async(A,j)=>{let e={email:j.email,domain:"",name:j.accountName||j.userName,type:j.accountType,language:j.language,promoCode:j.promoCode,purchaseOrderToken:j.purchaseOrderToken,stripePurchaseOrderToken:j.stripePurchaseOrderToken,referrer:j.referrer,source:j.source||bu.Web,tierName:j.tierName,companySize:j.companySize,phoneNumber:j.phoneNumber,distributorCode:j.distributorCode},t=j.accountType===dt.Type.Business?await hq(A,j.accountName):pl;e.domain!==pl&&(e.domain=t);let a=(await QW(A.session,e)).emailResendToken||void 0;return{domain:t,emailResendToken:a}},qMj=async(A,j)=>{let e=await qH(A.session,j);return eAA(e)},vMj=async(A,j,e)=>ZW(A.session,j,e),xMj=async(A,j,e)=>{try{return AY(A.session,j,e)}catch(t){throw console.error("[updateServerSignup] Failed to update signup details:",t),t}},hK={},fMj=async(A,j)=>(await POA(A,j),HOA(A)),GMj=async(A,j)=>(await COA(A,j),TOA(A,j.challenge,j.encryptedDeviceCredential,j.auth)),POA=async(A,j)=>{if(hK[A.id]=j.signupUuid,A.account=new dt({uuid:"",type:j.accountType,state:dt.StateRegistered,name:j.accountName,domain:j.domain,avatar:j.accountAvatar||"",attrVersion:1,createdAt:$p(new Date)}),!j.name)throw new Error("Name is missing");if(!A.account)throw new Error("Unexpected error, missing account.");let e=j.secretKey||await Ba.generate();A.user=new eo({email:j.email,password:j.password,language:j.language,name:j.name,newsletterPrefs:j.newsletterPrefs,secretKey:e,avatar:j.avatar}),A.userAuth=await Wr.generate({email:j.email,password:j.password,secretKey:e}),A.user.masterKey=await Zt.deriveDefaultKdf({email:j.email,password:j.password,secretKey:e}),await A.user.generateNewKeyset()},COA=async(A,j)=>{if(hK[A.id]=j.signupUuid,A.account=new dt({uuid:"",type:j.accountType,state:dt.StateRegistered,name:j.accountName,domain:j.domain,avatar:j.accountAvatar||"",attrVersion:1,createdAt:$p(new Date)}),!j.name)throw new Error("Name is missing");if(!A.account)throw new Error("Unexpected error, missing account.");let e;j.accountKeyUuid?e=await Ba.forTrustedDevice(j.accountKeyUuid):e=await Ba.generateForTrustedDevice(),A.user=new eo({email:j.email,language:j.language,name:j.name,newsletterPrefs:j.newsletterPrefs,avatar:j.avatar,secretKey:e}),A.user.masterKey=j.auk,await A.user.generateNewKeyset()},HOA=async A=>{if(!Gr.device)throw new Error("Missing device identifier");let j=Gr.device,e=A.user;if(!e)throw new Error("Missing user.");if(!e.secretKey)throw new Error("Missing Secret Key.");let t=await e.encryptActiveKeysetWithMasterKey(),r=A.userAuth;if(!r)throw new Error("Missing auth for user.");let a=A.account;if(!a)throw new Error("Missing account.");let n=hK[A.id];if(!n)throw new Error("Missing signup identifier.");let o={signupUuid:n,user:{email:e.email,language:e.language,name:e.name,newsletterPrefs:e.newsletterPrefs,accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,avatar:e.avatar},account:{name:a.name,domain:a.domain,type:a.type,avatar:a.avatar},device:j,keyset:t,userAuth:Wr.getForUpload(r)};if(!o.user.name)throw new Error("Name is missing");return vH(A.session,o)},TOA=async(A,j,e,t)=>{if(!Gr.device)throw new Error("Missing device identifier");let r=Gr.device,a=A.user;if(!a)throw new Error("Missing user.");if(!a.name)throw new Error("Name is missing");if(!a.secretKey)throw new Error("Missing Secret Key.");let n=await a.encryptActiveKeysetWithMasterKey();if(!A.account)throw new Error("Missing account.");let o=hK[A.id];if(!o)throw new Error("Missing signup identifier.");let i={signupUuid:o,user:{email:a.email,language:a.language,name:a.name,newsletterPrefs:a.newsletterPrefs,accountKeyFormat:a.secretKey.format.toString(),accountKeyUuid:a.secretKey.id,avatar:a.avatar,challenge:j,deviceCredential:{v:2,encCredentials:e}},account:{name:A.account.name,domain:A.account.domain,type:A.account.type,avatar:A.account.avatar},device:r,keyset:n,userAuth:t};return vH(A.session,i)},weA={},IeA=async A=>{let j=new eo({language:A.language,avatar:A.avatar,newsletterPrefs:A.newsletterPrefs,secretKey:await Ba.generateForTrustedDevice()});return j.masterKey=A.credentialBundle.auk,await j.generateNewKeyset(),{user:j,userAuth:Wr.createFromPreComputedX(A.credentialBundle.srpx.exportBytes())}},FMj=async(A,j,e,t)=>{let{user:r,userAuth:a}=await IeA(j);if(A.user=r,A.userAuth=a,!r.secretKey)throw new Error("User does not have a Secret Key");let[n,o]=await Promise.all([r.encryptActiveKeysetWithMasterKey(),t.encryptCredentialBundle(j.credentialBundle)]),i={invite:{uuid:j.uuid,token:j.token},user:{identity:j.identity,accountKeyFormat:r.secretKey.format.toString(),accountKeyUuid:r.secretKey.id,email:"",name:"",language:r.language,newsletterPrefs:r.newsletterPrefs,avatar:r.avatar},device:e,keyset:n,userAuth:Wr.getForUpload(a),deviceCredentials:{v:2,encCredentials:o}},s=await hH(A.session,i);if(!s.sessionUuid)throw new Error("signUpUser did not return sessionUuid");return A.session.setSessionUuid(s.sessionUuid),s},bMj=async(A,j,e,t,r,a,n)=>{if(A.user=r,A.userAuth=a,!r.secretKey)throw new Error("User does not have a Secret Key");let[o,i]=await Promise.all([r.encryptActiveKeysetWithMasterKey(),t.encryptCredentialBundle(j.credentialBundle)]),s={token:j.token,uuid:j.uuid,accountKeyFormat:r.secretKey.format.toString(),accountKeyUuid:r.secretKey.id,language:r.language,userAuth:Wr.getForUpload(a),identity:j.identity,deviceCredentials:{v:2,encCredentials:i},device:e,keyset:o,trustLogBookmark:n};return lH(A.session,s)},yMj=async(A,j,e,t)=>{let{user:r,userAuth:a}=await IeA(j);if(A.user=r,A.userAuth=a,!r.secretKey)throw new Error("User does not have a Secret Key");let[n,o]=await Promise.all([r.encryptActiveKeysetWithMasterKey(),t.encryptCredentialBundle(j.credentialBundle)]),i={token:j.token,uuid:j.uuid,accountKeyFormat:r.secretKey.format.toString(),accountKeyUuid:r.secretKey.id,language:r.language,userAuth:Wr.getForUpload(a),identity:j.identity,deviceCredentials:{v:2,encCredentials:o},device:e,keyset:n};return sH(A.session,i)},$Mj=async(A,j)=>{weA[A.id]=j;let e=j.secretKey||await Ba.generate();A.user=new eo({uuid:j.uuid,email:j.email,password:j.password,language:j.language,name:j.name,secretKey:e,avatar:j.avatar,newsletterPrefs:j.newsletterPrefs,meta:j.meta}),A.userAuth=await Wr.generate({email:j.email,password:j.password,secretKey:e}),A.user.masterKey=await Zt.deriveDefaultKdf({email:j.email,password:j.password,secretKey:e}),await A.user.generateNewKeyset()},wMj=async(A,j)=>{if(weA[A.id]=j,!A.user?.activeKeyset)throw new Error("beginProvisionedUserSignup - User does not have an active keyset");let e=await Ba.generate();A.user.password=j.password,A.user.secretKey=e,A.userAuth=await Wr.generate({email:j.email,password:j.password,secretKey:e}),A.user.masterKey=await Zt.deriveDefaultKdf({email:j.email,password:j.password,secretKey:e})},IMj=async(A,j)=>{if(!Gr.device)throw new Error("Missing device identifier");let e=A.user;if(!e)throw new Error("Missing user.");if(!e.secretKey)throw new Error("Missing Secret Key.");let t=await e.encryptActiveKeysetWithMasterKey(),r=A.userAuth;if(!r)throw new Error("Missing auth for user.");let a=weA[A.id];if(!a)throw new Error("Missing signup.");switch(a.source){case eF.Invite:{let n={invite:{uuid:a.uuid,token:a.token},user:{email:e.email,language:e.language,name:e.name,newsletterPrefs:e.newsletterPrefs,accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,avatar:e.avatar,meta:e.meta},device:Gr.device,keyset:t,userAuth:Wr.getForUpload(r)};return hH(A.session,n)}case eF.Recovery:{if(a.emailVerification===void 0)throw new Error("Missing email verification success token");let n={accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,device:Gr.device,keyset:t,language:e.language,token:a.token,emailVerificationSuccessToken:a.emailVerification,userAuth:Wr.getForUpload(r),uuid:a.uuid,trustLogBookmark:j};return lH(A.session,n)}case eF.Provision:{let n={accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,device:Gr.device,keyset:t,language:e.language,token:a.token,userAuth:Wr.getForUpload(r),uuid:a.uuid,userMfa:a.userMfa,emailVerification:a.emailVerification};return sH(A.session,n)}default:throw new Error("Invalid signup source")}},DMj=async(A,j)=>eY(A.session,j);var fm=W(aA());var OMj=async(A,j,e)=>{try{let t=await iU(A.session,j,e);return KOA(t.authMethods)&&hL(),t}catch{return{authMethods:[]}}},KOA=A=>gI(A)||hI(A),gI=A=>A===void 0||A.length===0?!1:A.some(j=>j.type===D$),PMj=A=>gI(A)&&A.length===1,qK=A=>A===void 0||A.length===0?!1:A.some(j=>j.type===_C),CMj=A=>qK(A)&&A.length===1,hI=A=>A===void 0||A.length===0?!1:A.some(j=>j.type===O$),HMj=A=>hI(A)&&A.length===1,TMj=A=>A.type===D$?A:void 0,KMj=A=>A.type===O$?A:void 0,SMj=A=>{if(A)return A.map(KMj).find(j=>j)},SOA=A=>{if(A)return A.map(TMj).find(j=>j)},MMj=A=>{let j=SOA(A);if(j&&j.provider)return j.provider},_Mj=async(A,j,e,t)=>{let r=await e.encryptCredentialBundle(j);return sU(A.session,{encCredentials:r,v:2},e.kid,t)},LMj=async(A,j)=>cU(A.session,j),NMj=async(A,j,e,t)=>lU(A.session,j,e,t),Pnt=fm.intersection([Am,fm.readonly(fm.type({accountKeyFormat:fm.string,accountKeyUuid:fm.string,userAuth:Uf}),"extra")],"CredentialBundleAuthResponse"),zMj=async(A,j)=>{let e=await A.decryptCredentialBundle(j.encCredentials);return{type:"found",secretKeyFormat:j.accountKeyFormat,secretKeyUuid:j.accountKeyUuid,spec:j.v,credentialBundle:e,userAuth:j.userAuth}};var RMj=async(A,j)=>{let e=await nz(A.session,j);return qI(A,e)},JMj=async(A,j)=>{let e=await oz(A.session,j);return qI(A,e)},UMj=async A=>{let j=await YP(A.session);return qI(A,j)},XMj=async A=>{try{let j=await YP(A.session);return qI(A,j)}catch(j){if(CA.isNewServerErrorWithStatus(j,CA.HTTPStatusCode.notFound)||CA.isNewServerErrorWithStatus(j,CA.HTTPStatusCode.forbidden))return;throw j}},VMj=async(A,j)=>(await iz(A.session,j)).authRedirect,WMj=async(A,j,e)=>sz(A.session,{code:j,state:e}),YMj=async(A,j)=>lz(A.session,j),QMj=async(A,j)=>cz(A.session,j),qI=(A,j)=>(j.federationSettings.oidcSettings.clientSecret!==void 0&&(Nr(new Pe({errorClass:mn.ContextError,message:E`unexpected non-nil clientSecret returned`,userUuid:A.user?Z(A.user?.uuid):void 0})),delete j.federationSettings.oidcSettings.clientSecret),ZMj(j.federationSettings.oidcSettings.identityProvider)||j.federationSettings.oidcSettings.privateApp&&(Nr(new Pe({errorClass:mn.ContextError,message:E`unexpected truthy privateApp returned`,userUuid:A.user?Z(A.user?.uuid):void 0})),j.federationSettings.oidcSettings.privateApp=!1),j),ZMj=A=>{switch(A){case fs.Generic:case fs.Unknown:case fs.Ping:case fs.JumpCloud:case fs.OneLogin:case fs.Okta:case fs.Auth0:case fs.Duo:return!1;case fs.Azure:case fs.Google:return!0;default:throw new Error("unexpected identity provider")}};var A2j=async A=>cA.getSsoMigrationReportOverview(A.session),j2j=async A=>cA.getSsoMigrationReportGroups(A.session),e2j=async(A,j)=>{let e=jF(j),t=wo(e,cA.MAX_EMAIL_BATCH_SIZE),r=t.length,a=0;try{for(let n of t)await cA.sendSsoMigrationReminderEmail(A.session,n),a++,a<r&&await Qn(1500)}catch(n){throw console.error("Failed to send SSO reminder emails.",n),n}},t2j=async(A,j)=>(await cA.getSsoMigrationPendingReport(A.session,j)).pendingRecords,r2j=async(A,j)=>(await cA.getSsoMigrationExpiredReport(A.session,j)).expiredRecords,a2j=async(A,j)=>(await cA.getSsoMigrationSuccessfulReport(A.session,j)).successfulRecords;var n2j=async(A,j)=>mY(A.session,j),o2j=async(A,j)=>BY(A.session,j),i2j=async(A,j,e)=>gY(A.session,j,e),s2j=async A=>(await hY(A.session)).enrollments,l2j=async(A,j)=>xY(A.session,j),c2j=async(A,j)=>qY(A.session,j),d2j=async(A,j,e)=>vY(A.session,j,e),k2j=async(A,j)=>fY(A.session,j);var u2j="action/support",DeA=rj(u2j),p2j=async(A,j)=>DeA("requestSupportEmail",async()=>bY(A.session,j)),m2j=async(A,j,e)=>DeA("getSupportAccountsList",async()=>{let{accounts:t}=await yY(A.session,j,e);return t}),E2j=async(A,j,e,t)=>DeA("requestAccountDeletion",async()=>$Y(A.session,j,e,t));var B2j="action/survey",g2j=rj(B2j),h2j=async(A,j)=>g2j("submitDepartureSurvey",async()=>DY(A.session,j));var q2j=async A=>MY(A.session);var v2j=async(A,j)=>WY(A.session,j);var x2j=async(A,j,e,t)=>YY(A.session,j,e,t||""),f2j=async(A,j,e,t)=>QY(A.session,j,e,t),G2j=async A=>ZY(A.session),F2j=async(A,j)=>AQ(A.session,j),b2j=async(A,j)=>jQ(A.session,j);var $2j=W(MOA(),1),PeA=(A,j,e)=>new Promise((t,r)=>{var a=i=>{try{o(e.next(i))}catch(s){r(s)}},n=i=>{try{o(e.throw(i))}catch(s){r(s)}},o=i=>i.done?t(i.value):Promise.resolve(i.value).then(a,n);o((e=e.apply(A,j)).next())}),y2j=(A,j)=>PeA(void 0,null,function*(){let e,t=new Promise(r=>{e=setTimeout(r,j)});return Promise.race([A,t]).then(r=>(clearTimeout(e),r))}),OeA=class{static encodeBytes(A){let j=btoa(String.fromCharCode(...new Uint8Array(A))).replace(/\+/g,"-").replace(/\//g,"_");return _OA(j)}static decodeBytes(A){let j=A.replace(/-/g,"+").replace(/_/g,"/"),e=_OA(j);return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}},_OA=A=>{let j=A.indexOf("=");return A.slice(0,j===-1?A.length:j)},LOA=class{static createCredentialAvailable(){return PeA(this,null,function*(){let A={securityKey:!1,platform:!1,isAvailable:!1};return window.PublicKeyCredential&&(A.securityKey=!0,A.isAvailable=!0,yield y2j(window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(j=>{A.platform=j}).catch(()=>console.log("Something went wrong.")),500)),A})}static parsePublicKey(A){if(A.challenge=OeA.decodeBytes(A.challenge.toString()),A.user.id=OeA.decodeBytes(A.user.id.toString()),A.excludeCredentials)for(let j=0;j<A.excludeCredentials.length;j++){let e=A.excludeCredentials[j];e.id=OeA.decodeBytes(e.id.toString())}return A}static getTransports(A){let j=[];return A.response.getTransports&&typeof A.response.getTransports=="function"&&(j=A.response.getTransports()),j}static createCredential(A){return PeA(this,null,function*(){let j={credential:null,transports:[]},e=this.parsePublicKey(A),t=yield navigator.credentials.create({publicKey:e}).then(r=>r);return t==null||(j.credential=t,j.transports=this.getTransports(t)),j})}};var xK=W(aA());var w2j=async(A,j,e,t,r)=>A.session.verifyPasskey(j,t,e,r),NOA=async A=>A.session.registerWebauthnCredential(),zOA=async(A,j,e)=>A.session.verifyWebauthnCredentialAttestation(j,e),ROA=async A=>{if(!(await LOA.createCredentialAvailable()).isAvailable)throw new Error("Browser does not support WebAuthn.");if(!A?.publicKey)throw new Error("included credential options do not include the passkey challenge");let{publicKey:e}=A,t={publicKey:{...e,challenge:ZA(e.challenge),user:{...e.user,id:ZA(e.user.id)}}},r=await navigator.credentials.create(t);if(!r)throw new Error("Unable to create webauthn credentials. Credentials not present");if(!("response"in r))throw new Error("Missing response field in rawCredentialFromBrowser");let a=r.response;if(a===null||typeof a!="object")throw new TypeError("attestationResponse has no properties");if(!("clientDataJSON"in a&&a.clientDataJSON instanceof ArrayBuffer)||!("attestationObject"in a&&a.attestationObject instanceof ArrayBuffer))throw new TypeError("Attestation response has incorrect format");if(!("rawId"in r&&r.rawId instanceof ArrayBuffer))throw new TypeError("Credential raw id has incorrect format");let n;return"getTransports"in a&&typeof a.getTransports=="function"&&(n=sj(a.getTransports(),xK.array(xK.string)).unwrap()),{id:r.id,rawId:tj(new Uint8Array(r.rawId)),type:r.type,response:{clientDataJSON:tj(new Uint8Array(a.clientDataJSON)),attestationObject:tj(new Uint8Array(a.attestationObject)),transports:n}}},I2j=async(A,j)=>{let e=await NOA(A),t=await ROA(e.challenge);return zOA(A,j,t)},D2j=async(A,j)=>aU(A.session,j),O2j=async(A,j,e)=>nU(A.session,j,e),P2j=async(A,j,e)=>oU(A.session,j,e);var C2j=async(A,j)=>await eQ(A.session,j);var tF=W(aA());var CeA=W(XjA());var H2j=async A=>tQ(A.session),T2j=500,K2j=async(A,j)=>{await K6(async t=>(await rQ(A.session,{emails:t}),[]),T2j,j)},JOA=tF.readonly(tF.array(tF.string)),S2j=A=>{if(typeof CeA>"u")throw new TypeError("Papa Parse must be loaded first.");try{let j=CeA.parse(A,{skipEmptyLines:!0}),e=Pd(j.data);if(j.data.length!==e.length)throw new Error("Unexpected columns in row.");let r=sj(e,JOA).unwrap().filter(a=>Bh(a));if(r.length===0)throw new Error("No valid emails.");return r}catch(j){throw console.error("Failed to parse, CSV is not in expected format.",j),j}};var M2j=async(A,j)=>{await aQ(A.session,j),A.account&&(A.account.mustMigrate=!1)},_2j=async A=>nQ(A.session);var Qi;(function(A){A.Filled="filled-login-with-provider",A.Linked="linked-item-to-provider",A.SavingPasskeySuccess="saving-passkey-success",A.UsingPasskeySuccess="using-passkey-success",A.SavingPasskeyFailureInternal="saving-passkey-failure-internal",A.SavingPasskeyFailureTimeout="saving-passkey-failure-timeout",A.SavingPasskeyFailureUnknown="saving-passkey-failure-unknown",A.SavingPasskeyFailureBadinput="saving-passkey-failure-badinput",A.UsingPasskeyFailureInternal="using-passkey-failure-internal",A.UsingPasskeyFailureMissingItem="using-passkey-failure-missing-item",A.UsingPasskeyFailureTimeout="using-passkey-failure-timeout",A.UsingPasskeyFailureUnknown="using-passkey-failure-unknown",A.UsingPasskeyFailureBadinput="using-passkey-failure-badinput",A.AutoSaveSaveItem="autosave-save-item",A.AutoSaveSaveItemSpg="autosave-save-item-spg",A.AutoSaveSaveItemCreditCard="autosave-save-item-credit-card",A.AutoSaveSaveItemIdentity="autosave-save-item-identity",A.AutoSaveUpdateItem="autosave-update-item",A.AutoSaveUpdateItemSpg="autosave-update-item-spg",A.AutoSaveUpdateItemCreditCard="autosave-update-item-credit-card",A.AutoSaveUpdateItemIdentity="autosave-update-item-identity",A.AutoSaveUpdateItem2fa="autosave-update-item-2fa",A.AutoSaveEditItem="autosave-edit-item",A.AutoSaveDismiss="autosave-dismiss",A.SaveDialogSaveItem="save-dialog-save-item",A.SaveDialogUpdateItem="save-dialog-update-item"})(Qi||(Qi={}));var L2j=async(A,j)=>kQ(A.session,j);var N2j=3,xI=10,z2j=xI*10,HeA=(A,j)=>async e=>cA.sendMsgA(A.session,e,j),R2j=(A,j,e)=>{let t=async(r=0)=>{let a=await cA.receiveMsgA(A.session,j,e);if(a?.msga)return a.msga;if(r>=xI)throw new Error("receiveMsgA timed out");return await Qn(1e3),t(r+1)};return t},J2j=(A,j,e)=>async t=>cA.sendMsgB(A.session,t,j,e),TeA=(A,j)=>{let e=async(t=0)=>{let r=await cA.receiveMsgB(A.session,j);if(r?.msgb)return r.msgb;if(t===z2j)throw new Error("receiveMsgB timed out");return await Qn(1e3),e(t+1)};return e},KeA=(A,j)=>async e=>cA.sendTagA(A.session,e,j),U2j=(A,j,e)=>{let t=async(r=0)=>{let a=await cA.receiveTagA(A.session,j,e);if(a?.taga)return a.taga;if(r===xI)throw new Error("receiveTagA timed out");return await Qn(1e3),t(r+1)};return t},X2j=(A,j,e)=>async t=>cA.sendTagB(A.session,t,j,e),SeA=(A,j)=>{let e=async(t=0)=>{let r=await cA.receiveTagB(A.session,j);if(r?.tagb)return r.tagb;if(t===xI)throw new Error("receiveTagB timed out");return await Qn(1e3),e(t+1)};return e},V2j=(A,j,e)=>{let t=async(r=0)=>{let a=await cA.receiveSharedCredentialBundle(A.session,e,j);if(a)return a;if(r===xI)throw new Error("receiveSharedCredentials timed out");return await Qn(1e3),t(r+1)};return t},MeA=(A,j)=>async e=>cA.shareCredentialBundle(A.session,j,e);var W2j=async A=>(await pQ(A.session)).acl,Y2j=async(A,j)=>mQ(A.session,{acl:j});var Q2j=async A=>{let j=await Wp.generate(),e=LE.pipe(Kf).encode(await j.exportSensitiveJwk());await xQ(A.session,A.config.host,{dvrPrivateKey:e})},Z2j=async A=>vQ(A.session),A_j=async A=>fQ(A.session),j_j=100,_eA=async(A,j,e,t,r)=>{let a=wo(t,j_j),n=Pc(t),o=0;for(let i of a){o+=Pc(i);let s={scope:r,contentVersion:e,isFinal:o===n,vaultUuid:j,snapshots:i};await GQ(A.session,s)}},e_j=async(A,j,e,t)=>{if(!A.account||!A.accountOverview||!A.accountOverview.vaults||!fI(A.accountOverview)||!A.accountOverview.vaults.some(i=>i.snapshotContentVersion===void 0||i.snapshotContentVersion<i.contentVersion))return;let a;try{let i=await A.dvrPubKey;if(i!==void 0)a=i;else return}catch{return}let n=A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy,o=(await LA.getReportingPolicyWrapper(A)).allowedEmailDomains;for(await Qw();;){let i;try{i=await LA.getVaultReportingSync(A)}catch(m){console.error("Error retrieving vault reporting assignment",m);break}if(i===void 0)break;let s=await e(A,i.vaultUuid,{mustReload:!0});if(s===void 0)break;let l=await t(A,s);if(i.items?.length===0)continue;let d=i.items===void 0?l:l.filter(m=>i?.items?.includes(m.uuid)),k;try{k=await LA.generateWatchtowerReportForItems(d,!0,n,o)}catch(m){console.error("Error generating Watchtower reports on vault items",m);break}let u=await Promise.all(d.map(async m=>{let I=k[m.uuid],S=I!==void 0?LA.toWatchtowerReportForApi(I):void 0,f=await sT(m,o,S);return a.encrypt(f)}));try{await _eA(A,s.uuid,s.contentVersion,u,bG.Full)}catch(m){console.error("Error saving vault item snapshots",m);break}j&&await q.wait(1e3)}Zw()},t_j=async(A,j,e,t,r)=>{if(!A.account||!A.accountOverview||!A.dvrPubKey)return;let a;try{let l=await A.dvrPubKey;if(l!==void 0)a=l;else return}catch{return}let n=A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy;if(!(lZ.includes(j.vault.type)&&fI(A.accountOverview)))return;let o;try{o=LA.toWatchtowerReportForApi(r??await LA.generateWatchtowerReportForItem(j,!0,n,t))}catch(l){console.error("Error generating Watchtower report on vault item",l);return}let i=await sT(j,t,o),s=await a.encrypt(i);try{await _eA(A,j.vault.uuid,e,[s],bG.Patch)}catch(l){console.error("Error saving vault item snapshots",l)}},fI=A=>!A||!A.detailedVaultReporting?!1:A.detailedVaultReporting.isEnabled&&Sf===A.detailedVaultReporting.serverItemSnapshotPayloadVersion;var r_j=async A=>dZ(A.session).then(async j=>j);var Ga=W(aA());var bq=class{constructor(j,e,t){this.uuid=j,this.recoveryKeyUuid=e,this.policy=t}};(function(A){let j;(function(a){a.V1="1"})(j=A.SpecVersion||(A.SpecVersion={}));let e;(function(a){a.PaperKey="PAPER_KEY"})(e=A.Feature||(A.Feature={}));let t;(function(a){a.Email="EMAIL",a.CustomerSupport="CUSTOMER_SUPPORT"})(t=A.UserVerification||(A.UserVerification={}));let r;(function(a){a.Self="SELF"})(r=A.Custody||(A.Custody={})),A.newForRecoveryCode=()=>({feature:e.PaperKey,specVersion:j.V1,custody:r.Self,configuration:{userVerification:[t.Email,t.CustomerSupport],delaySecs:0}}),A.Codec=Ga.exact(Ga.type({feature:Ga.string,specVersion:Ga.string,custody:Ga.string,configuration:Ga.exact(Ga.type({userVerification:Ga.array(Ga.string),delaySecs:Ga.number}))}))})(bq||(bq={}));var Fot=Ga.exact(Ga.type({uuid:Ga.string,label:Ga.union([Ga.string,Ga.null]),state:Ga.string,enc:Ga.string,encryptedBy:Ga.string,cryptoVersion:Ga.string,verifierParam:Ga.string,createdAt:Ga.string,updatedAt:Ga.string})),fK=class{constructor(j,e){this.policy=j,this.keyDetails=e}},Gm=class{constructor(j,e,t,r,a,n){this.uuid=j,this.policyUuid=e,this.state=t,this.createdAt=r,this.updatedAt=a,this.expiresAt=n}};Gm.fromParts=A=>new Gm(A.uuid,A.policyUuid,n_j(Gm.KnownState,A.state),A.createdAt,A.updatedAt,A.expiresAt);(function(A){let j;(function(e){e.KeyVerifierAccepted="KEY_VERIFIER_ACCEPTED",e.Aborted="ABORTED",e.EmailVerificationPending="EMAIL_VERIFICATION_PENDING",e.MaterialReleased="MATERIAL_RELEASED"})(j=A.KnownState||(A.KnownState={}))})(Gm||(Gm={}));var a_j=A=>{let j=Object.values(A);return e=>j.includes(e)},n_j=(A,j)=>a_j(A)(j)?Bu(j):Jl(j);var o_j=async(A,j,e,t)=>{let[r,a]=await Promise.all([e.encryptSelfAndKeyset(t),e.exportVerifier()]);await cA.createRecoveryKey(A.session,{uuid:e.kid,label:j,enc:tj(lt(r.encRecoveryKey)),encryptedBy:r.encRecoveryKey.kid,cryptoVersion:e.version,verifierParam:tj(lt(a))});let n=bq.newForRecoveryCode();await cA.createRecoveryPolicy(A.session,{recoveryKeyUuid:e.kid,...n});let o=await cA.addRecoverableMaterial(A.session,e.kid,{encryptedKeyMaterial:tj(lt(r.encKeysetSymKey))}),i=await cA.getRecoveryKey(A.session,e.kid).then(s=>{let l=ZA(s.enc);return sj(l,Ue.pipe(Oa)).unwrap()});await e.checkIntegrity(t,r.encKeysetSymKey,o.integrity,i),await cA.activateRecoveryKey(A.session,e.kid)},i_j=async(A,j)=>{await cA.deleteRecoveryKey(A.session,j)},s_j=async(A,j,e)=>cA.getRecoveryPolicies(A.session,j,e).then(t=>t.policyUuids),UOA=async(A,j)=>{let e=await cA.getRecoveryPolicy(A.session,j);return new bq(j,e.recoveryKeyUuid,e)},l_j=async(A,j)=>{let e=await UOA(A,j),t=await XOA(A,e.recoveryKeyUuid);return new fK(e,t)},XOA=async(A,j)=>cA.getRecoveryKey(A.session,j),c_j=async A=>(await cA.getRecoveryAttempts(A.session).then(j=>j.recoveryAttempts)).map(Gm.fromParts);var d_j=6,GK=class{constructor(j,e,t){this.startEmailVerification=async r=>{try{let a=await cA.recoveryKeyStartEmailVerification(this.session,!1,{email:r});return Bu(new FK(this.key,this.session,a.sentToEmail))}catch(a){if(Kc(a)&&a.reason===Ci.maximumAttemptsReached)return Jl(FI.ResendLimitReached);throw a}},this.proceedToVerified=async r=>new GI(this.key,this.session,r),this.key=j,this.session=e,this.state=t}},FK=class{constructor(j,e,t){this.verifyEmail=async r=>{try{await cA.recoveryKeySubmitEmailVerification(this.session,{emailVerificationChallenge:r})}catch(n){if(Kc(n))switch(n.reason){case Ci.incorrectValue:return Jl(rF.IncorrectCode);case Ci.maximumAttemptsReached:return Jl(rF.AttemptLimitReached);case Ci.expired:return Jl(rF.CodeExpired);case void 0:default:throw n}else throw n}let a=await cA.recoveryKeyGetAttemptStatus(this.session);if(a.attemptState!=="ID_VERIFICATION_COMPLETE")throw new Error(`recovery attempt not in expected state (${a.attemptState})`);return Bu(new GI(this.key,this.session,a.aux))},this.resendEmailVerificationCode=async()=>{try{await cA.recoveryKeyStartEmailVerification(this.session,!0,{email:void 0})}catch(r){if(Kc(r)&&r.reason===Ci.maximumAttemptsReached)return Jl(FI.ResendLimitReached);throw r}return Bu(void 0)},this.key=j,this.session=e,this.emailToDisplay=t}},GI=class{constructor(j,e,t){this.decryptKeyset=async(r,a)=>{let n=await this.key.decryptKeysetSymKey(r).then(async s=>si.newFromJwkSymKey(s)),[o,i]=await Promise.all([ul.decryptWithKey(n,{pubKey:a.pubKey,encPriKey:a.encPriKey}),XH(n,{pubKey:a.spubKey,encPriKey:a.encSPriKey})]);return new La(a.uuid,n,o,i,a.sn)},this.encryptKeyset=async(r,a)=>a.encryptWithKey(r),this.completeRecovery=async(r,a,n,o,i,s)=>{let l={...o,v:await a.srpx.verifier(oi.fromString(o.method).group).then(async C=>C.exportServerHex())},{encMaterial:d,encKeyset:k}=await cA.recoveryKeyGetMaterial(this.session).then(async C=>{let b=ZA(C.encryptedKeyMaterial);return{encMaterial:sj(b,Ue.pipe(Oa)).unwrap(),encKeyset:C.encryptedKeyset}}),u=await this.decryptKeyset(d,k),m=await this.encryptKeyset(a.auk,u),I=s?await s.encryptCredentialBundle(a):void 0,{sessionUuid:S,signInTokenDetails:f,email:v,userUuid:P,accountUuid:D}=await cA.recoveryKeyPostRegistration(this.session,{accountKeyFormat:n.format.toString(),accountKeyUuid:n.id,language:i,device:r,keyset:m,userAuth:l,deviceCredentials:I?{v:2,encCredentials:I}:void 0});return new bK(S,f?.token,a,{email:v,userUuid:P,accountUuid:D},n)},this.key=j,this.session=e,this.aux=t}},bK=class{constructor(j,e,t,r,a){this.signIn=async(n,o)=>{n.session.clearSessionKey(),n.session.setSessionUuid(this.sessionUuid);let i=await cA.getAuthMethods(n.session,void 0,this.details.userUuid);if(gI(i.authMethods))throw new Error("Not implemented");if(hI(i.authMethods)){if(this.signInToken===void 0)throw new Error("Missing sign in token");return GjA(n,{email:this.details.email,userUuid:this.details.userUuid,credentialBundle:this.credentialBundle,secretKeyFormat:this.secretKey.unwrapFormatAsKnown(),secretKeyUuid:this.secretKey.id},this.signInToken,o)}if(qK(i.authMethods))return qq(n,{email:this.details.email,muk:await this.credentialBundle.auk.exportJwk(),secretKey:this.secretKey.exportSensitiveReadableString(),srpX:this.credentialBundle.srpx.exportHex()},o);throw new Error("Could not auth with any auth methods")},this.sessionUuid=j,this.signInToken=e,this.credentialBundle=t,this.details=r,this.secretKey=a}},k_j=async(A,j)=>{let e;try{e=await cA.recoveryKeyBeginAttempt(A.session,{recoveryKeyUuid:j.kid})}catch(k){if(Kc(k)&&k.code===Rl.notFound)return Jl(yq.NotFound);throw k}let{sessionUuid:t,cryptoVersion:r}=e;if(r!==al.V1)throw new Error("unknown crypto version");let a=await j.toRecoveryKey(r),n=await a.beginAuth();A.session.setSessionUuid(t);let o=await cA.recoveryKeyAuthV1Begin(A.session,{bigA:n.bigAhex}),i=await n.recieveBigBhex(o.bigB),s;try{s=await cA.recoveryKeyAuthV1ConfirmKey(A.session,{clientHash:i.clientHash})}catch(k){if(Kc(k)){if(k.code===Rl.unauthorized)return Jl(yq.AuthenticationFailed);switch(k.reason){case Ci.recentRecoveryAborted:return Jl(yq.RecentAbortedAttempt);case Ci.recentLogin:return Jl(yq.RecentLogin);case void 0:default:throw k}}else throw k}let l=await i.recieveServerHash(s.serverHash);A.session.setSessionUuid(t),await A.session.importSessionKey(l.rawKey),A.session.requestId=1;let d=await cA.recoveryKeyGetAttemptStatus(A.session);return Bu(new GK(a,A.session,d))},yq;(function(A){A.RecentAbortedAttempt="RECENT_ABORTED_ATTEMPT",A.RecentLogin="RECENT_LOGIN",A.AuthenticationFailed="AUTHENTICATION_FAILED",A.NotFound="NOT_FOUND"})(yq||(yq={}));var rF;(function(A){A.IncorrectCode="INCORRECT_CODE",A.AttemptLimitReached="ATTEMPT_LIMIT_REACHED",A.CodeExpired="CODE_EXPIRED"})(rF||(rF={}));var FI;(function(A){A.ResendLimitReached="RESEND_LIMIT_REACHED"})(FI||(FI={}));var u_j=async(A,j)=>{let e=(()=>{if(!(!A.account||!A.user)&&A.account.uuid===j.accountUuid&&A.user.uuid===j.userUuid&&A.user.secretKey?.isTrustedDeviceFormat())return A.session.auth?.srpX})();return{requestId:j.requestId,srpx:e}};var p_j=A=>uZ(A.session),m_j=A=>pZ(A.session),E_j=A=>mZ(A.session),B_j=(A,j)=>EZ(A.session,j),g_j=(A,j)=>BZ(A.session,j),h_j=(A,j,e)=>gZ(A.session,j,e),q_j=(A,j=!1)=>hZ(A.session,j),v_j=(A,j)=>qZ(A.session,j),x_j=(A,j,e)=>vZ(A.session,j,e),f_j=(A,j,e)=>VOA(A,{[j]:e}),VOA=(A,j)=>xZ(A.session,j),G_j=async A=>(await fZ(A.session)).certificate;var F_j=async(A,j)=>GZ(A.session,j),b_j=async(A,j)=>FZ(A.session,j);var y_j=A=>!!(A.user?.hasPermission(fA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(fA.Permission.BelongsToExternalAccountManagersGroup)),$_j=A=>!!(A.user?.hasPermission(fA.Permission.BelongsToSecurityGroup)||A.user?.hasPermission(fA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(fA.Permission.BelongsToExternalAccountManagersGroup)),w_j=A=>!!(A.user?.hasPermission(fA.Permission.BelongsToSecurityGroup)||A.user?.hasPermission(fA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(fA.Permission.BelongsToAdminsGroup));var I_j=async(A,j)=>yZ(A.session,j),D_j=async(A,j)=>$Z(A.session,j);var O_j=async A=>DZ(A.session),P_j=async A=>IZ(A.session);var C_j=async A=>PZ(A.session);var WOA=[{name:"North America",templateUuid:"125d57d5-0096-4777-a85c-27d0b567c739",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:"North America",state:So.Active,domain:"northamerica",country:"US",region:"CA",startedManagingDate:"2025-06-23T16:18:09Z"},{uuid:"4DGGKT3CAAF9VGTGJLF014WY7L",name:"Mexico",state:So.Active,domain:"mexico",country:"MX",region:"VA",startedManagingDate:"2025-02-08T16:18:09Z"},{uuid:"1DRGKH0CNAF9VULGJWF418WV7X",name:"Canada",state:So.Active,domain:"canada",country:"CA",region:"NA",startedManagingDate:"2025-05-11T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalPages:1,totalItems:5}},{name:"Europe",templateUuid:"9684fcb0-5eba-4c5c-b7fa-7d68766c0cfd",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:"France",state:So.Active,domain:"france",country:"FR",region:"EU",startedManagingDate:"2025-06-23T16:18:09Z"},{uuid:"4DGGKT3CAAF9VGTGJLF014WY7L",name:"European Union",state:So.Active,domain:"europeanunion",country:"CH",region:"EU",startedManagingDate:"2025-02-08T16:18:09Z"},{uuid:"1DRGKH0CNAF9VULGJWF418WV7X",name:"Spain",state:So.Active,domain:"spain",country:"ES",region:"EU",startedManagingDate:"2025-05-11T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalPages:1,totalItems:5}},{name:"Asia",templateUuid:"8ec28d78-62ec-456f-92c3-d6f6e5b38003",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:"Japan",state:So.Active,domain:"japan",country:"JP",region:"AS",startedManagingDate:"2025-06-23T16:18:09Z"},{uuid:"4DGGKT3CAAF9VGTGJLF014WY7L",name:"South Korea",state:So.Active,domain:"southkorea",country:"SK",region:"AS",startedManagingDate:"2025-02-08T16:18:09Z"},{uuid:"1DRGKH0CNAF9VULGJWF418WV7X",name:"Taiwan",state:So.Active,domain:"taiwan",country:"TW",region:"AS",startedManagingDate:"2025-05-11T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalPages:1,totalItems:5}}];var H_j=async(A,j)=>await cA.getPolicyTemplates(A.session,j),T_j=async(A,j)=>cA.getPolicyTemplatePolicies(A.session,j),K_j=async(A,j)=>cA.createPolicyTemplate(A.session,j),S_j=async(A,j,e)=>(A.session,`${j}`,{name:j,templateUuid:e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),numChildAccounts:0}),M_j=async(A,j,e)=>{let t=Object.keys(e).map(r=>{`${r}`;let a=e[r];return cA.updateTemplatePolicyDefinition(A.session,{policyTemplateUuid:j,policyContext:hV[r],policyName:r,definition:a,enforced:!0})});return await Promise.all(t)},__j=async(A,j)=>WOA.find(e=>e.templateUuid===j)??{name:"New template",templateUuid:j,childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:`Linked Child Account for ${A.account?.name}`,state:So.Active,domain:"northamerica",country:"US",region:"CA",startedManagingDate:"2025-06-23T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalItems:0,totalPages:1}};var YOA=async A=>{if(!A.user||!A.account)return;let j=A.user.isOwner()||Yj.isAdmin(A.user),e=A.account.hasBackOfficeFeature.members&&A.account.hasBackOfficeFeature.managedServiceProvider;if(!(A.account.mspAdministratorsGroup||!j||!e))return async()=>{let t=new wA({name:"MSP Administrators",type:wA.TypeMSPAdministrators,desc:"Access to add, view, administer, and unlink managed companies as an external account manager."}),r=await ro(A,{attrs:wA.Attr.PubKey});await hk(A,t,r),await Zu(A,t,void 0)}};var QOA=async A=>{if(!(!A.user||!A.account||!A.user.hasPermission(rt.ManageGroups)||A.account.teamMembersGroup||!A.account.hasFeature.members))return async()=>{let j=new wA({name:"Team Members",type:wA.TypeTeamMembers,desc:"All team members."}),e=await ro(A,{attrs:wA.Attr.PubKey}),[t,r]=await Promise.all([hk(A,j,e),ajA(A)]),a=r.filter(n=>n.type===Yj.Type.Regular).map(async n=>{let o=await Qu(A,n,{attrs:Hr.Attr.PubKey});await j.addMembership(t,o,{role:sr.Role.Member})});await Promise.all(a),await Zu(A,j,void 0)}};var ZOA=async A=>{if(!A.user||!A.account||!A.user.hasPermission(rt.BelongsToRecoveryGroup))return;let j=A.account.recoveryGroup,e=A.account.ownersGroup,t=A.account.administratorsGroup,r=await RG(A).catch(i=>{});if(!j||!r)return;let a=!!j.recoveryKeyset,n=!e||e.hasPermission(rt.Recover),o=!t||t.hasPermission(rt.Recover);if(!(a&&n&&o))return async()=>{console.warn("Running keyset migration!"),a||(console.warn("Running RecoveryGroup keyset migration!"),await JG(A,j,r)),e&&!n&&(console.warn("Running OwnersGroup keyset migration!"),await JG(A,e,r)),t&&!o&&(console.warn("Running AdminGroup keyset migration!"),await JG(A,t,r))}};var A4A=async A=>{let j=new Date(2017,4,10),e=A.account?.createdAt||new Date,t=A.user?.createdAt||new Date;if(e>j)return;let[r,a]=await Promise.all([t<j?Bm(A):Promise.resolve(void 0),A.user?.hasPermission(rt.ViewAdminConsole)?Em(A):Promise.resolve(void 0)]),n=r&&r.desc!==ej.DefaultDescMarker,o=a&&A.user&&A.user.canManageVault(a)&&a.desc!==ej.DefaultDescMarker;if(!n&&!o)return;let i=[];return r&&n&&(r.desc=ej.DefaultDescMarker,i.push(UT(A,r))),a&&o&&(a.desc=ej.DefaultDescMarker,i.push(UT(A,a))),Promise.all(i).then(()=>{})};var L_j=async A=>Promise.resolve(),N_j=async A=>{let j=await Promise.all([A4A(A),ZOA(A),QOA(A),YOA(A)]);await Promise.all(Lr(j).map(async e=>e()))};typeof window<"u"&&(window.b5={action:LA,api:cA,crypto:Ya,model:fA,util:q,shared:OX,parser:xa},window.sjcl=z_j,window.moment=j4A.default);cZ();var Zi=W(aA()),R_j=Zi.type({deviceUuid:Zi.string,userInfo:Zi.record(Zi.string,Zi.string),deviceKeys:Zi.record(Zi.string,Zi.string),lastUserUuid:Zi.union([Zi.string,Zi.undefined])},"BackupCredentials"),LeA=Do(Oo.pipe(R_j),()=>({deviceUuid:"",userInfo:{},deviceKeys:{},lastUserUuid:void 0}));var yK=class A{constructor(j){this.isExcluded=(j,e)=>{let t=this.excluded[j];return t===void 0?!1:e?t.includes(e):t.includes("all")};this.toggle=(j,e)=>{let t=this.excluded[j];if(t===void 0)t=e?[e]:["all"],this.excluded[j]=t;else if(e===null)t.indexOf("all")===-1?t.push("all"):t.splice(t.indexOf("all"),1);else if(t.indexOf(e)===-1)t.push(e),this.excluded[j]=t;else{let r=t.indexOf(e);t.splice(r,1),this.excluded[j]=t}};this.clone=()=>new A(Object.assign({},this.excluded));this.excluded=j}};var ht=class{constructor(j=""){this.log=(j,...e)=>{this.isPermitted()&&(this.message(j),[...e])};this.debug=(j,...e)=>{this.isPermitted()&&(this.message(j),[...e])};this.info=(j,...e)=>{this.isPermitted()&&console.info(this.message(j),...e)};this.warn=(j,...e)=>{this.isPermitted()&&console.warn(this.message(j),...e)};this.error=(j,...e)=>{this.isPermitted()&&console.error(this.message(j),...e)};this.isPermitted=()=>!1;this.message=j=>this._prependMessage?`${this._prependMessage}: ${j}`:j;this._prependMessage=j}};var $q=new Map,$K,e4A=A=>{$K=A};var hi=W(aA()),NeA=hi.union([hi.type({type:hi.literal("Success"),data:hi.unknown}),hi.type({type:hi.literal("Error"),message:hi.unknown}),hi.type({type:hi.literal("NoListener")})]),t4A=hi.type({name:hi.string,data:hi.unknown});var J_j=A=>{let j=$q.get(A);j?(chrome.runtime.onMessage.removeListener(j),$q.delete(A)||console.warn(`Failed to remove listener <${A}> from LISTENERS`)):console.warn(`Attempting to remove listener <${A}>, but it does not exist.`)},r4A=()=>{$q.forEach((A,j)=>{J_j(j)})},zeA=A=>$q.has(A);var ReA=(A,j=Promise.resolve())=>{e4A(j),[1,2,5].includes(A)&&addEventListener("pagehide",r4A,{once:!0})};var JeA=class{constructor(j){this.storage=j;this.storageKey="performance-traces";this.storage=j}getMap(){try{let j=this.storage.getItem(this.storageKey);return j?new Map(JSON.parse(j)):new Map}catch{return new Map}}set(j,e){let t=this.getMap(),r=t.get(j)||[];t.set(j,[...r,e]),this.storage.setItem(this.storageKey,JSON.stringify([...t]))}getValues(){return[...this.getMap().values()]}clear(){this.storage.removeItem(this.storageKey)}size(){return this.storage.getItem(this.storageKey)?.length||0}},wK=class{constructor(j,e,t){this.addToBatch=j=>{this.shouldSendBatch(this.getSpanSize(j))&&this.sendBatch(),this.traceMap.set(j.traceId,j)};if(t.maxBytes<=0)throw new Error("Invalid batch configuration");this.maxBytes=t.maxBytes,this.maxSendInternval=t.maxSendInterval,this.sender=e,this.storage=j,this.traceMap=new JeA(this.storage),this.lastSendTime=Date.now()}shouldSendBatch(j){let t=Date.now()-this.lastSendTime>=this.maxSendInternval,r=this.traceMap.size()+j>this.maxBytes,a=this.traceMap.size()>0;return r||a&&t}sendBatch(){this.sender(this.traceMap.getValues()),this.traceMap.clear(),this.lastSendTime=Date.now()}getSpanSize(j){return JSON.stringify(j).length}};var n4A=A=>typeof A=="object"&&A!==null&&"enableTracing"in A||typeof A=="object"&&A!==null&&"span"in A;function xk(A,j,e){let t=e.value;return e.value=function(...r){let a=r.find(n4A);return a&&a.span?A6.syncObserve(j,a.componentName,n=>t.call(this,...r,n),a.span):a&&a.componentName?A6.syncObserve(j,a.componentName,n=>t.call(this,...r,n)):t.call(this,...r)},e}function IK(A,j,e){let t=e.value;return e.value=async function(...r){let a=r.find(n4A);return a&&a.span?await A6.asyncObserve(j,a.componentName,n=>t.call(this,...r,n),a.span):a&&a.componentName?await A6.asyncObserve(j,a.componentName,n=>t.call(this,...r,n)):await t.call(this,...r)},e}var UeA=()=>Number(crypto.getRandomValues(new Uint32Array(1))[0]),o4A=()=>crypto.getRandomValues(new Uint32Array(1))[0].toString(36);var A6=class A{constructor(j,e){this.appName=j;this.traceReporter=e;this.appName=j,this.observerId=String(o4A()),this.performanceObserver=new PerformanceObserver(t=>{t.getEntries().filter(r=>!!r.detail?.spanId).forEach(r=>{let a=this.buildDataDogPayload(r);if(a.meta.entryType==="measure")try{this.traceReporter(a)}catch(n){console.error("Error in sending trace",n)}})})}startObserver(){this.performanceObserver.observe({type:"measure",buffered:!0}),`${this.appName}${this.observerId}`}stopObserver(){this.performanceObserver.disconnect()}calculateEpochTime(j){return Math.round(j+performance.timeOrigin)}static humanReadableTimestamp(j){return Math.round(j*100)/100}buildDataDogPayload(j){return{name:j.name,traceId:j.detail.traceId,spanId:j.detail.spanId,parentId:j.detail.parentSpanId,start:this.calculateEpochTime(j.startTime),duration:Math.round(j.duration*1e6),service:this.appName,resource:j.name,type:"web",error:j.detail.error?1:0,meta:{observerId:this.observerId,entryType:j.entryType,component:j.detail.componentName,operation:j.detail.componentName}}}static createActiveSpan(j,e,t){let r={name:j,componentName:e,spanId:UeA(),traceId:t?t.traceId:UeA(),parentSpanId:t?t.spanId:void 0,error:!1};return performance.mark(`start-${j}`,{detail:r}),r}static endActiveSpan(j,e=!1,t=!1){let r=performance.measure(j.name,{start:`start-${j.name}`,detail:{...j,error:e}});t&&console.info(`Performance diagnostic: "${j.name}" took ${this.humanReadableTimestamp(r.duration)}ms to execute.`)}static syncObserve(j,e,t,r,a=!1){let n=this.createActiveSpan(j,e,r);try{let o=t(n);return this.endActiveSpan(n,!1,a),o}catch(o){throw this.endActiveSpan(n,!0,a),o}}static async asyncObserve(j,e,t,r,a=!1){let n=this.createActiveSpan(j,e,r);try{let o=await t(n);return this.endActiveSpan(n,!1,a),o}catch(o){throw this.endActiveSpan(n,!0,a),o}}static async conditionalObserve(j,...e){let[t,r,a,n]=e,o=a;return j?A.asyncObserve(t,r,o,n):a({name:"",componentName:"",spanId:0,traceId:0,parentSpanId:void 0,error:!1})}};var XeA=()=>!1,DK=()=>!1,i4A=A=>{let j=chrome.runtime.getURL("");if(j.endsWith("/")&&(j=j.slice(0,-1)),XeA())return!0;if(DK()){if(!A.url)return!1;let e=new URL(A.url),t=e.protocol+"//"+e.host;return t.endsWith("/")&&(t=t.slice(0,-1)),t===j}return!!A.origin&&A.origin===j};var VeA=W(Dn());var bI=U_j;function U_j(A,j){var e={};typeof j=="string"&&(j=[].slice.call(arguments,1));for(var t=j.length,r=0;r<t;r++){var a=j[r];a in A&&(e[a]=A[a])}return e}var s4A=async(A,j)=>new Promise((e,t)=>chrome.runtime.sendMessage(A,j,r=>{if(chrome.runtime.lastError){let a=chrome.runtime.lastError?.message||"Unable to send message with chrome.runtime.sendMessage";t(new Error(a))}else e(r)})),l4A=async(A,j,e)=>new Promise((t,r)=>chrome.tabs.sendMessage(A,j,e,a=>{if(chrome.runtime.lastError){let n=chrome.runtime.lastError?.message||"Unable to send message with chrome.tabs.sendMessage";r(new Error(n))}else t(a)}));var X_j=A=>typeof A=="object"&&A!==null&&"name"in A&&typeof A.name=="string"&&"message"in A&&typeof A.message=="string",OK=A=>X_j(A)?A.message:"An unknown error occurred";var WeA=async(A,j)=>j.tabId===void 0?V_j(A,j):W_j(A,j),V_j=async(A,j)=>{let e;try{e=await s4A(A,j)}catch(r){let a=OK(r);if(c4A(a))`${A.name}`;else if(d4A(a))`${A.name}`;else if(!a)`${A.name}`;else throw new Error(`Unhandled error response received for message <${A.name}>`);return{type:"NoListener"}}if(!e)return{type:"Success",data:void 0};let t=NeA.decode(e);if((0,VeA.isLeft)(t))throw Error(`Unable to decode response for message <${A.name}>`);return t.right},W_j=async(A,{tabId:j,...e})=>{let t;try{let a=bI(e,["documentId","frameId"]),n=bI(e,["targetParent"]);t=await l4A(j,{...A,...n},a)}catch(a){let n=a instanceof Error?a.message:String(a);if(c4A(n))`${A.name}`;else if(d4A(n))`${A.name}`;else if(!n)`${A.name}`;else throw new Error(`Unhandled error response received for tab message <${A.name}>`);return{type:"NoListener"}}if(!t)return{type:"Success",data:void 0};let r=NeA.decode(t);if((0,VeA.isLeft)(r))throw Error(`Unable to decode response for tab message <${A.name}>`);return r.right},c4A=A=>A.includes("Receiving end does not exist"),d4A=A=>A.includes("The message port closed");var Y_j=(async()=>await Promise.resolve().then(()=>W($_())).catch(()=>globalThis.chrome))(),Rj=async(A,j,e={enableTracing:!DK()})=>{let t;try{let{enableTracing:r,...a}=e;t=r&&!DK()?await A6.asyncObserve(`invoke-${A}`,"messaging",async n=>WeA({name:A,data:j,span:n},a)):await WeA({name:A,data:j},a)}catch(r){return{ok:!1,type:"error",error:r instanceof Error?r:Error(`Unhandled response type when receiving response to <${A}>`)}}switch(t.type){case"Success":return{ok:!0,data:t.data};case"Error":return{ok:!1,type:"error",error:Error(`Error response received for message <${A}>`)};case"NoListener":return{ok:!1,type:"nolistener"};default:return{ok:!1,type:"error",error:Error(`Unhandled response type when receiving response to <${A}>`)}}},aF=async(A,j)=>{if(XeA()){Rj(A,j);return}let t=(await Y_j).tabs??(typeof chrome<"u"?chrome.tabs:null);if(!t)return;let r;try{r=await t.query({})}catch(a){`${A}`;return}if(r)try{let a=r.filter(n=>n.id).map(async n=>Rj(A,j,{tabId:n.id}));await Promise.allSettled(a)}catch(a){`${A}`}};var k4A=W(Dn());var X=(A,j,e=!1)=>{if($K===void 0)throw new Error(`Attempting to register a listener <${A}> before 'initialize()' has			 been called. Please call 'initialize()' from '@1password/b5x-messaging'			 before attempting to register listeners.`);if(zeA(A))throw new Error(`Attempting to register the listener <${A}>. A listener by that name already exists.`);let t=Q_j(A,j,e);chrome.runtime.onMessage.addListener(t),$q.set(A,t)},Q_j=(A,j,e=!1)=>(t,r,a)=>{let n=t4A.decode(t);return!(0,k4A.isRight)(n)||n.right.name!==A?!1:e&&!i4A(r)?(a({type:"Error",message:"Invalid origin for request"}),!1):(A9j(j,n.right,r).then(o=>a({type:"Success",data:o})).catch(o=>Z_j(o,A,a)),!0)},Z_j=(A,j,e)=>{let t=OK(A);console.error(`Exception while handling request <${j}>: ${t}`),e({type:"Error",message:t})},A9j=async(A,j,e)=>{if(await $K,j9j(A)){let{tab:t,frameId:r,url:a}=e;if(!t||!t.id||typeof r!="number")throw new Error(`Unable to respond to request <${j.name}> due to lack of tab and frame information.`);return A(j,{tab:t,frameId:r,url:a})}else return A(j)},j9j=A=>A.length===2;var PK=class{constructor(){this._cache=new Map}clear(){return this._cache.clear()}get(j){return this._cache.get(j)}set(j,e){this._cache.set(j,e)}};var yI=()=>{let A=new Date;return`${A.getFullYear()}-${A.getMonth()+1}-${A.getDate()}`},YeA=()=>{let A=new Date;return`${A.getHours()}-${A.getMinutes()}-${A.getSeconds()}`},u4A=A=>!p4A(A),p4A=A=>new Date(A.startTime).getTime()+A.duration-Date.now()>0;function nF(A){return JSON.stringify([...A])}function oF(A){return new Map(JSON.parse(A))}var QeA=A=>{`${A.str}`};var j6={};Yt(j6,{getRejectingTimeout:()=>wI,getResolvingTimeout:()=>As,makePromiseCompleter:()=>js,withTimeout:()=>$I});var $I=async(A,j=5e3,e,t)=>{let r,a=new Promise((n,o)=>{r=globalThis.setTimeout(()=>{console.warn(`Promise timed out.${e?` ${e}`:""}`),o(t)},j)});return Promise.race([A,a]).finally(()=>clearTimeout(r))},As=async A=>new Promise(j=>{!A||A<=0||setTimeout(()=>j({type:"timeout"}),A)}),wI=async A=>new Promise((j,e)=>{!A||A<=0||setTimeout(()=>e("timeout"),A)}),js=(A=!1)=>{let j=1,e,t=!1,r=new Promise(o=>{e=o}),a={resolve:e,promise:r,finished:t,extendable:A,extend:()=>{if(!A)throw new Pe({errorClass:E`PromiseCompleter`,message:E`cannot extend a promise marked as un-extendable`});return j++,n}},n=o=>{j--,(j<1||!A)&&(a.finished=!0,e(o))};return a.resolve=n,a};var YB={};Yt(YB,{fqURL:()=>ic,isHttp:()=>m4A,isHttpOrHttps:()=>wq,isHttps:()=>E4A,matchesHostUrl:()=>AtA,parseLoose:()=>iF,subdomainFromSignInAddress:()=>t9j,urlComponentsForUnsafeURL:()=>fl,usoProviderFromUrl:()=>ZeA});function m4A(A){return!!A&&A.protocol==="http:"}function E4A(A){return!!A&&A.protocol==="https:"}function wq(A){return m4A(A)||E4A(A)}function fl(A){if(!(A==null||A.length===0))try{return new URL(A)}catch{try{return new URL("https://"+A)}catch{return}}}function t9j(A){return new URL(A).host.split(".")[0]}function iF(A){let j=A.trim();try{return new URL(j)}catch{try{return new URL(`https://${j}`)}catch{}}}function ic(A){return A?A.indexOf("http://")===0||A.indexOf("https://")===0?A:`https://${A}`:""}function ZeA(A){if(A.length===0)return;let j;try{j=new URL(ic(A))}catch{return}switch(j.host.toLowerCase().split(".").slice(-2).join(".")){case"amazon.com":return J6.Amazon;case"apple.com":return J6.Apple;case"discord.com":return J6.Discord;case"facebook.com":return J6.Facebook;case"github.com":return J6.GitHub;case"google.com":case"youtube.com":return J6.Google;case"live.com":case"microsoft.com":case"microsoftonline.com":case"hotmail.com":case"office.com":return J6.Microsoft;case"okta.com":return J6.Okta;case"slack.com":return J6.Slack;case"twitter.com":return J6.Twitter;default:return}}function AtA(A,j,e){return A.urls.some(r=>r.mode===$d.Host?iF(r.url)?.host===j:r.mode===$d.Never?!1:A.urlToNakedDomains[r.url]===e)}var sc={};Yt(sc,{createLoggableId:()=>sF,createNumericId:()=>CK,createUniqueId:()=>QB});function QB(){return CK().toString(36)}function CK(){return globalThis.crypto.getRandomValues(new Uint32Array(1))[0]}function sF(){return oj.assertLogSafe(QB())}async function B4A(A,j,e,t){let r=crypto.subtle,a=await r.importKey("raw",A,{name:"PBKDF2"},!1,["deriveBits"]);return r.deriveBits({name:"PBKDF2",salt:j,iterations:e,hash:"SHA-256"},a,t*8)}var bj,v4A=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&v4A.decode();var II=null;function lF(){return(II===null||II.byteLength===0)&&(II=new Uint8Array(bj.memory.buffer)),II}function Ca(A,j){return A=A>>>0,v4A.decode(lF().subarray(A,A+j))}function Dq(A){let j=bj.__externref_table_alloc();return bj.__wbindgen_export_2.set(j,A),j}function xr(A,j){try{return A.apply(this,j)}catch(e){let t=Dq(e);bj.__wbindgen_exn_store(t)}}function Iq(A){return A==null}function fk(A,j){return A=A>>>0,lF().subarray(A/1,A/1+j)}var Fa=0,HK=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},r9j=typeof HK.encodeInto=="function"?function(A,j){return HK.encodeInto(A,j)}:function(A,j){let e=HK.encode(A);return j.set(e),{read:A.length,written:e.length}};function es(A,j,e){if(e===void 0){let o=HK.encode(A),i=j(o.length,1)>>>0;return lF().subarray(i,i+o.length).set(o),Fa=o.length,i}let t=A.length,r=j(t,1)>>>0,a=lF(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=lF().subarray(r+n,r+t),i=r9j(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return Fa=n,r}var Oq=null;function ZB(){return(Oq===null||Oq.buffer.detached===!0||Oq.buffer.detached===void 0&&Oq.buffer!==bj.memory.buffer)&&(Oq=new DataView(bj.memory.buffer)),Oq}var g4A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{bj.__wbindgen_export_6.get(A.dtor)(A.a,A.b)});function a9j(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(bj.__wbindgen_export_6.get(r.dtor)(o,r.b),g4A.unregister(r)):r.a=o}};return a.original=r,g4A.register(a,r,r),a}function jtA(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=jtA(A[0]));for(let n=1;n<r;n++)a+=", "+jtA(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}function x4A(A){let j=es(A,bj.__wbindgen_malloc,bj.__wbindgen_realloc),e=Fa;return bj.wasmMessage(j,e)}function Gk(A,j){let e=j(A.length*1,1)>>>0;return lF().set(A,e/1),Fa=A.length,e}function f4A(A,j,e,t,r,a,n,o,i,s,l){let d=es(A,bj.__wbindgen_malloc,bj.__wbindgen_realloc),k=Fa,u=es(j,bj.__wbindgen_malloc,bj.__wbindgen_realloc),m=Fa,I=es(e,bj.__wbindgen_malloc,bj.__wbindgen_realloc),S=Fa,f=es(t,bj.__wbindgen_malloc,bj.__wbindgen_realloc),v=Fa,P=es(r,bj.__wbindgen_malloc,bj.__wbindgen_realloc),D=Fa,C=Gk(a,bj.__wbindgen_malloc),b=Fa;return bj.enrollTrustedDevice(d,k,u,m,I,S,f,v,P,D,C,b,n,o,i,s,l)}function G4A(A){let j,e;try{let t=es(A,bj.__wbindgen_malloc,bj.__wbindgen_realloc),r=Fa,a=bj.richIconBackgroundColor(t,r);return j=a[0],e=a[1],Ca(a[0],a[1])}finally{bj.__wbindgen_free(j,e,1)}}function F4A(A){let j,e;try{let t=es(A,bj.__wbindgen_malloc,bj.__wbindgen_realloc),r=Fa,a=bj.nakedDomainForUrlString(t,r);return j=a[0],e=a[1],Ca(a[0],a[1])}finally{bj.__wbindgen_free(j,e,1)}}function b4A(){return bj.onLock()}function DI(A){let j=bj.__wbindgen_export_2.get(A);return bj.__externref_table_dealloc(A),j}function y4A(A,j,e){let t=Gk(A,bj.__wbindgen_malloc),r=Fa,a=es(j,bj.__wbindgen_malloc,bj.__wbindgen_realloc),n=Fa,o=es(e,bj.__wbindgen_malloc,bj.__wbindgen_realloc),i=Fa,s=bj.openNaClJwk(t,r,a,n,o,i);if(s[3])throw DI(s[2]);var l=fk(s[0],s[1]).slice();return bj.__wbindgen_free(s[0],s[1]*1,1),l}function $4A(A,j,e){let t=Gk(A,bj.__wbindgen_malloc),r=Fa,a=Gk(j,bj.__wbindgen_malloc),n=Fa,o=Gk(e,bj.__wbindgen_malloc),i=Fa,s=bj.lessSafeOpenNaCl(t,r,a,n,o,i);if(s[3])throw DI(s[2]);var l=fk(s[0],s[1]).slice();return bj.__wbindgen_free(s[0],s[1]*1,1),l}function w4A(A,j){let e=Gk(A,bj.__wbindgen_malloc),t=Fa,r=es(j,bj.__wbindgen_malloc,bj.__wbindgen_realloc),a=Fa,n=bj.sealNaClJwk(e,t,r,a);if(n[2])throw DI(n[1]);return TK.__wrap(n[0])}function I4A(A,j){let e=Gk(A,bj.__wbindgen_malloc),t=Fa,r=Gk(j,bj.__wbindgen_malloc),a=Fa,n=bj.lessSafeSealNaCl(e,t,r,a);if(n[2])throw DI(n[1]);return TK.__wrap(n[0])}function D4A(A,j){let e=Gk(A,bj.__wbindgen_malloc),t=Fa,r=es(j,bj.__wbindgen_malloc,bj.__wbindgen_realloc),a=Fa,n=bj.p256Sign(e,t,r,a);if(n[3])throw DI(n[2]);var o=fk(n[0],n[1]).slice();return bj.__wbindgen_free(n[0],n[1]*1,1),o}function n9j(A,j,e){bj.closure4410_externref_shim(A,j,e)}function o9j(A,j,e,t){bj.closure4611_externref_shim(A,j,e,t)}var i9j=["omit","same-origin","include"],s9j=["same-origin","no-cors","cors","navigate"],Xct=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bj.__wbg_intounderlyingbytesource_free(A>>>0,1));var Vct=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bj.__wbg_intounderlyingsink_free(A>>>0,1));var Wct=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bj.__wbg_intounderlyingsource_free(A>>>0,1));var h4A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bj.__wbg_wasmsealed_free(A>>>0,1)),TK=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,h4A.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,h4A.unregister(this),j}free(){let j=this.__destroy_into_raw();bj.__wbg_wasmsealed_free(j,0)}ciphertext(){let j=bj.wasmsealed_ciphertext(this.__wbg_ptr);var e=fk(j[0],j[1]).slice();return bj.__wbindgen_free(j[0],j[1]*1,1),e}pub_key_jwk(){let j,e;try{let t=bj.wasmsealed_pub_key_jwk(this.__wbg_ptr);return j=t[0],e=t[1],Ca(t[0],t[1])}finally{bj.__wbindgen_free(j,e,1)}}pub_key_bytes(){let j=bj.wasmsealed_pub_key_bytes(this.__wbg_ptr);var e=fk(j[0],j[1]).slice();return bj.__wbindgen_free(j[0],j[1]*1,1),e}static less_safe_new(j,e){let t=Gk(j,bj.__wbindgen_malloc),r=Fa,a=Gk(e,bj.__wbindgen_malloc),n=Fa,o=bj.wasmsealed_less_safe_new(t,r,a,n);return A.__wrap(o)}},q4A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bj.__wbg_wasmx25519key_free(A>>>0,1)),KK=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,q4A.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,q4A.unregister(this),j}free(){let j=this.__destroy_into_raw();bj.__wbg_wasmx25519key_free(j,0)}static generate(){let j=bj.wasmx25519key_generate();return A.__wrap(j)}pub_jwk(){let j,e;try{let t=bj.wasmx25519key_pub_jwk(this.__wbg_ptr);return j=t[0],e=t[1],Ca(t[0],t[1])}finally{bj.__wbindgen_free(j,e,1)}}pub_key_bytes(){let j=bj.wasmx25519key_pub_key_bytes(this.__wbg_ptr);var e=fk(j[0],j[1]).slice();return bj.__wbindgen_free(j[0],j[1]*1,1),e}less_safe_pri_jwk(){let j,e;try{let t=bj.wasmx25519key_less_safe_pri_jwk(this.__wbg_ptr);return j=t[0],e=t[1],Ca(t[0],t[1])}finally{bj.__wbindgen_free(j,e,1)}}less_safe_pri_key_bytes(){let j=bj.wasmx25519key_less_safe_pri_key_bytes(this.__wbg_ptr);var e=fk(j[0],j[1]).slice();return bj.__wbindgen_free(j[0],j[1]*1,1),e}};async function l9j(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function c9j(){let A={};return A.wbg={},A.wbg.__wbg_abort_775ef1d17fc65868=function(j){j.abort()},A.wbg.__wbg_append_299d5d48292c0495=function(){return xr(function(j,e,t,r,a){j.append(Ca(e,t),Ca(r,a))},arguments)},A.wbg.__wbg_append_8c7dd8d641a5f01b=function(){return xr(function(j,e,t,r,a){j.append(Ca(e,t),Ca(r,a))},arguments)},A.wbg.__wbg_append_b2d1fc16de2a0e81=function(){return xr(function(j,e,t,r,a,n){j.append(Ca(e,t),r,Ca(a,n))},arguments)},A.wbg.__wbg_append_b44785ebeb668479=function(){return xr(function(j,e,t,r){j.append(Ca(e,t),r)},arguments)},A.wbg.__wbg_arrayBuffer_d1b44c4390db422f=function(){return xr(function(j){return j.arrayBuffer()},arguments)},A.wbg.__wbg_buffer_09165b52af8c5237=function(j){return j.buffer},A.wbg.__wbg_buffer_609cc3eee51ed158=function(j){return j.buffer},A.wbg.__wbg_byobRequest_77d9adf63337edfb=function(j){let e=j.byobRequest;return Iq(e)?0:Dq(e)},A.wbg.__wbg_byteLength_e674b853d9c77e1d=function(j){return j.byteLength},A.wbg.__wbg_byteOffset_fd862df290ef848d=function(j){return j.byteOffset},A.wbg.__wbg_call_672a4d21634d4a24=function(){return xr(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_7cccdd69e0791ae2=function(){return xr(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_call_833bed5770ea2041=function(){return xr(function(j,e,t,r){return j.call(e,t,r)},arguments)},A.wbg.__wbg_close_304cc1fef3466669=function(){return xr(function(j){j.close()},arguments)},A.wbg.__wbg_close_5ce03e29be453811=function(){return xr(function(j){j.close()},arguments)},A.wbg.__wbg_close_a17af48266bd9942=function(j){j.close()},A.wbg.__wbg_crypto_dd1b8f71596b161a=function(j){return j.crypto},A.wbg.__wbg_debug_3cb59063b29f58c1=function(j){},A.wbg.__wbg_derivePbkdf2_035f98379c7596be=function(j,e,t,r,a){return B4A(j,fk(e,t),r>>>0,a)},A.wbg.__wbg_done_769e5ede4b31c67b=function(j){return j.done},A.wbg.__wbg_enqueue_bb16ba72f537dc9e=function(){return xr(function(j,e){j.enqueue(e)},arguments)},A.wbg.__wbg_error_524f506f44df1645=function(j){console.error(j)},A.wbg.__wbg_error_7534b8e9a36f1ab4=function(j,e){let t,r;try{t=j,r=e,console.error(Ca(j,e))}finally{bj.__wbindgen_free(t,r,1)}},A.wbg.__wbg_exportKey_d8fbe6e8de2fbb6a=function(){return xr(function(j,e,t,r){return j.exportKey(Ca(e,t),r)},arguments)},A.wbg.__wbg_fetch_094979620990dda8=function(j){return fetch(j)},A.wbg.__wbg_fetch_509096533071c657=function(j,e){return j.fetch(e)},A.wbg.__wbg_flush_1a680a66b21c53d7=function(){return xr(function(j){j.flush()},arguments)},A.wbg.__wbg_generateKey_24819cf5d2ade0ec=function(){return xr(function(j,e,t,r){return j.generateKey(e,t!==0,r)},arguments)},A.wbg.__wbg_getEntriesByType_5d2deec4d4dcff89=function(j,e,t){return j.getEntriesByType(Ca(e,t))},A.wbg.__wbg_getFullYear_17d3c9e4db748eb7=function(j){return j.getFullYear()},A.wbg.__wbg_getRandomValues_5754b82ca6952f9b=function(){return xr(function(j,e,t){return j.getRandomValues(fk(e,t))},arguments)},A.wbg.__wbg_getRandomValues_760c8e927227643e=function(){return xr(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_getSize_e7dbd5ffa0b43df1=function(){return xr(function(j){return j.getSize()},arguments)},A.wbg.__wbg_getTimezoneOffset_6b5752021c499c47=function(j){return j.getTimezoneOffset()},A.wbg.__wbg_get_67b2ba62fc30de12=function(){return xr(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_get_7245ae8a86ca6b21=function(){return browser.storage.session.get()},A.wbg.__wbg_get_b9b93047fe3cf45b=function(j,e){return j[e>>>0]},A.wbg.__wbg_has_a5ea9117f258a0ec=function(){return xr(function(j,e){return Reflect.has(j,e)},arguments)},A.wbg.__wbg_headers_9cb51cfd2ac780a4=function(j){return j.headers},A.wbg.__wbg_info_3daf2e093e091b66=function(j){console.info(j)},A.wbg.__wbg_instanceof_Crypto_437466a97e9010b9=function(j){let e;try{e=j instanceof Crypto}catch{e=!1}return e},A.wbg.__wbg_instanceof_Performance_0ac1286c87171f57=function(j){let e;try{e=j instanceof Performance}catch{e=!1}return e},A.wbg.__wbg_instanceof_Response_f2cc20d9f7dfd644=function(j){let e;try{e=j instanceof Response}catch{e=!1}return e},A.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(j){let e;try{e=j instanceof Window}catch{e=!1}return e},A.wbg.__wbg_instanceof_WorkerGlobalScope_dbdbdea7e3b56493=function(j){let e;try{e=j instanceof WorkerGlobalScope}catch{e=!1}return e},A.wbg.__wbg_isArray_a1eab7e0d067391b=function(j){return Array.isArray(j)},A.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},A.wbg.__wbg_languages_2420955220685766=function(j){return j.languages},A.wbg.__wbg_languages_d8dad509faf757df=function(j){return j.languages},A.wbg.__wbg_length_a446193dc22c12f8=function(j){return j.length},A.wbg.__wbg_log_c222819a41e063d3=function(j){},A.wbg.__wbg_mark_001da84b098c950f=function(){return xr(function(j,e,t){j.mark(Ca(e,t))},arguments)},A.wbg.__wbg_measure_36bc93e7be4ed1bb=function(){return xr(function(j,e,t,r,a,n,o){j.measure(Ca(e,t),Ca(r,a),Ca(n,o))},arguments)},A.wbg.__wbg_msCrypto_60a4979188f6b80b=function(j){return j.msCrypto},A.wbg.__wbg_navigator_0a9bf1120e24fec2=function(j){return j.navigator},A.wbg.__wbg_navigator_1577371c070c8947=function(j){return j.navigator},A.wbg.__wbg_new0_f788a2397c7ca929=function(){return new Date},A.wbg.__wbg_new_018dcc2d6c8c2f6a=function(){return xr(function(){return new Headers},arguments)},A.wbg.__wbg_new_23a2665fac83c611=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return o9j(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_31a97dac4f10fab7=function(j){return new Date(j)},A.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},A.wbg.__wbg_new_78feb108b6472713=function(){return new Array},A.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},A.wbg.__wbg_new_9fd39a253424609a=function(){return xr(function(){return new FormData},arguments)},A.wbg.__wbg_new_a12002a7f91c75be=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_c68d7209be747379=function(j,e){return new Error(Ca(j,e))},A.wbg.__wbg_new_e25e5aab09ff45db=function(){return xr(function(){return new AbortController},arguments)},A.wbg.__wbg_newnoargs_105ed471475aaf50=function(j,e){return new Function(Ca(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_a381634e90c276d4=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_newwithlength_b93fcdb8050ed017=function(j){return new Int32Array(j>>>0)},A.wbg.__wbg_newwithstrandinit_06c535e0a867c635=function(){return xr(function(j,e,t){return new Request(Ca(j,e),t)},arguments)},A.wbg.__wbg_newwithu8arraysequenceandoptions_068570c487f69127=function(){return xr(function(j,e){return new Blob(j,e)},arguments)},A.wbg.__wbg_next_25feadfc0913fea9=function(j){return j.next},A.wbg.__wbg_next_6574e1a8a62d1055=function(){return xr(function(j){return j.next()},arguments)},A.wbg.__wbg_node_0deadde112ce24bb=function(j){return j.node},A.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},A.wbg.__wbg_now_d18023d54d4e5500=function(j){return j.now()},A.wbg.__wbg_parse_def2e24ef1252aff=function(){return xr(function(j,e){return JSON.parse(Ca(j,e))},arguments)},A.wbg.__wbg_process_0caa4f154b97e834=function(j){return j.process},A.wbg.__wbg_push_737cfc8c1432c2c6=function(j,e){return j.push(e)},A.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_d3219def82552485=function(j){return j.queueMicrotask},A.wbg.__wbg_randomFillSync_82e8b56b81896e30=function(){return xr(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_read_f8fdd4b410209222=function(){return xr(function(j,e,t,r){return j.read(fk(e,t),r)},arguments)},A.wbg.__wbg_require_1a22b236558b5786=function(){return xr(function(){return module.require},arguments)},A.wbg.__wbg_resolve_4851785c9c5f573d=function(j){return Promise.resolve(j)},A.wbg.__wbg_respond_1f279fa9f8edcb1c=function(){return xr(function(j,e){j.respond(e>>>0)},arguments)},A.wbg.__wbg_self_6afa9654edd50769=function(){return xr(function(){return self.self},arguments)},A.wbg.__wbg_set_65595bdd868b3009=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return xr(function(j,e,t){return Reflect.set(j,e,t)},arguments)},A.wbg.__wbg_set_bdf16194fa59737d=function(j){browser.storage.session.set(j)},A.wbg.__wbg_setat_2a071a392643c10e=function(j,e){j.at=e},A.wbg.__wbg_setbody_5923b78a95eedf29=function(j,e){j.body=e},A.wbg.__wbg_setcredentials_c3a22f1cd105a2c6=function(j,e){j.credentials=i9j[e]},A.wbg.__wbg_setheaders_834c0bdb6a8949ad=function(j,e){j.headers=e},A.wbg.__wbg_setmethod_3c5280fe5d890842=function(j,e,t){j.method=Ca(e,t)},A.wbg.__wbg_setmode_5dc300b865044b65=function(j,e){j.mode=s9j[e]},A.wbg.__wbg_setsignal_75b21ef3a81de905=function(j,e){j.signal=e},A.wbg.__wbg_settype_39ed370d3edd403c=function(j,e,t){j.type=Ca(e,t)},A.wbg.__wbg_signal_aaf9ad74119f20a4=function(j){return j.signal},A.wbg.__wbg_stack_0ed75d68575b0f3c=function(j,e){let t=e.stack,r=es(t,bj.__wbindgen_malloc,bj.__wbindgen_realloc),a=Fa;ZB().setInt32(j+4*1,a,!0),ZB().setInt32(j+4*0,r,!0)},A.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let j=typeof global>"u"?null:global;return Iq(j)?0:Dq(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let j=typeof globalThis>"u"?null:globalThis;return Iq(j)?0:Dq(j)},A.wbg.__wbg_static_accessor_PERFORMANCE_ab5616b64edfaf69=function(){return performance},A.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let j=typeof self>"u"?null:self;return Iq(j)?0:Dq(j)},A.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let j=typeof window>"u"?null:window;return Iq(j)?0:Dq(j)},A.wbg.__wbg_static_accessor_performance_da77b3a901a72934=function(){return performance},A.wbg.__wbg_status_f6360336ca686bf0=function(j){return j.status},A.wbg.__wbg_stringify_f7ed6987935b4a24=function(){return xr(function(j){return JSON.stringify(j)},arguments)},A.wbg.__wbg_subarray_aa9065fa9dc5df96=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_subtle_d0614193a0b7a626=function(j){return j.subtle},A.wbg.__wbg_then_44b73946d2fb3e7d=function(j,e){return j.then(e)},A.wbg.__wbg_then_48b406749878a531=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_toLocaleDateString_e5424994746e8415=function(j,e,t,r){return j.toLocaleDateString(Ca(e,t),r)},A.wbg.__wbg_truncate_29261a6365c72b01=function(){return xr(function(j,e){j.truncate(e>>>0)},arguments)},A.wbg.__wbg_url_ae10c34ca209681d=function(j,e){let t=e.url,r=es(t,bj.__wbindgen_malloc,bj.__wbindgen_realloc),a=Fa;ZB().setInt32(j+4*1,a,!0),ZB().setInt32(j+4*0,r,!0)},A.wbg.__wbg_value_cd1ffa7b1ab794f1=function(j){return j.value},A.wbg.__wbg_values_99f7a68c7f313d66=function(j){return j.values()},A.wbg.__wbg_versions_134d8f3c6de79566=function(j){return j.versions},A.wbg.__wbg_view_fd8a56e8983f448d=function(j){let e=j.view;return Iq(e)?0:Dq(e)},A.wbg.__wbg_wait_c19065fad9b95713=function(){return xr(function(j,e,t,r){return Atomics.wait(j,e>>>0,t,r)},arguments)},A.wbg.__wbg_warn_4ca3906c248c47c4=function(j){console.warn(j)},A.wbg.__wbg_window_ef5723d5ef2e972e=function(){return xr(function(){return window.window},arguments)},A.wbg.__wbg_write_530d3c84df874f53=function(){return xr(function(j,e,t,r){return j.write(fk(e,t),r)},arguments)},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper13722=function(j,e,t){return a9j(j,e,4411,n9j)},A.wbg.__wbindgen_debug_string=function(j,e){let t=jtA(e),r=es(t,bj.__wbindgen_malloc,bj.__wbindgen_realloc),a=Fa;ZB().setInt32(j+4*1,a,!0),ZB().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(Ca(j,e))},A.wbg.__wbindgen_init_externref_table=function(){let j=bj.__wbindgen_export_2,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_memory=function(){return bj.memory},A.wbg.__wbindgen_number_new=function(j){return j},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=Iq(r)?0:es(r,bj.__wbindgen_malloc,bj.__wbindgen_realloc),n=Fa;ZB().setInt32(j+4*1,n,!0),ZB().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return Ca(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(Ca(j,e))},A}function d9j(A,j){return bj=A.exports,O4A.__wbindgen_wasm_module=j,Oq=null,II=null,bj.__wbindgen_start(),bj}async function O4A(A){if(bj!==void 0)return bj;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead"));let j=c9j();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await l9j(await A,j);return d9j(e,t)}var P4A=O4A;var C4A="/assets/wasm/op_wasm_b5x_bg-RQ3Q4FCK.wasm";var cF=class{constructor(j,e,t=!1){this.localizedPluralName=()=>{let j=this.template;if(!j)return this.uuid;if(j.attrs&&j.attrs.localizedStrings){let e=j.attrs.localizedStrings.__pluralTitle__;if(e)return e}return j.pluralName};this.uuid=j,this.template=e,this.hasItems=t}localizedSingularName(){let j=this.template;if(!j)return this.uuid;if(j.attrs&&j.attrs.localizedStrings){let e=j.attrs.localizedStrings.__title__;if(e)return e}return j.pluralName}get hasHiddenTemplate(){return!this.template}};var SK=A=>A.type==="managedCredential";var Ra={uuid:A=>typeof A=="string"&&A.length===26,boolean:A=>typeof A=="boolean",string:A=>typeof A=="string",nonEmptyString:A=>Ra.string(A)&&A.length>0,array:A=>Array.isArray(A),number:A=>typeof A=="number",stringOrNumber:A=>typeof A=="string"||typeof A=="number",date:A=>Ra.stringOrNumber(A)&&!isNaN(Number(new Date(A)))};function Ja(A,j,e){if(A(j))return j;if(e!==void 0)return e;throw new Error(`The "${A.name}" validator found an invalid value.`)}var H4A=(A={})=>({uuid:Ja(Ra.string,A.uuid,"001"),title:Ja(Ra.string,A.title,"Unknown"),pluralTitle:Ja(Ra.string,A.pluralTitle,"Unknown"),hasHiddenTemplate:Ja(Ra.boolean,A.hasHiddenTemplate,!0),disableCreation:Ja(Ra.boolean,A.disableCreation,!1),hasItems:Ja(Ra.boolean,A.hasItems,!1),localizedStrings:A.localizedStrings??{}});var _K=(A,j)=>j.some(e=>A instanceof e),T4A,K4A;function p9j(){return T4A||(T4A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m9j(){return K4A||(K4A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var S4A=new WeakMap,ttA=new WeakMap,M4A=new WeakMap,etA=new WeakMap,OI=new WeakMap;function E9j(A){let j=new Promise((e,t)=>{let r=()=>{A.removeEventListener("success",a),A.removeEventListener("error",n)},a=()=>{e(Fk(A.result)),r()},n=()=>{t(A.error),r()};A.addEventListener("success",a),A.addEventListener("error",n)});return j.then(e=>{e instanceof IDBCursor&&S4A.set(e,A)}).catch(()=>{}),OI.set(j,A),j}function B9j(A){if(ttA.has(A))return;let j=new Promise((e,t)=>{let r=()=>{A.removeEventListener("complete",a),A.removeEventListener("error",n),A.removeEventListener("abort",n)},a=()=>{e(),r()},n=()=>{t(A.error||new DOMException("AbortError","AbortError")),r()};A.addEventListener("complete",a),A.addEventListener("error",n),A.addEventListener("abort",n)});ttA.set(A,j)}var rtA={get(A,j,e){if(A instanceof IDBTransaction){if(j==="done")return ttA.get(A);if(j==="objectStoreNames")return A.objectStoreNames||M4A.get(A);if(j==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fk(A[j])},set(A,j,e){return A[j]=e,!0},has(A,j){return A instanceof IDBTransaction&&(j==="done"||j==="store")?!0:j in A}};function LK(A){rtA=A(rtA)}function g9j(A){return A===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(j,...e){let t=A.call(dF(this),j,...e);return M4A.set(t,j.sort?j.sort():[j]),Fk(t)}:m9j().includes(A)?function(...j){return A.apply(dF(this),j),Fk(S4A.get(this))}:function(...j){return Fk(A.apply(dF(this),j))}}function h9j(A){return typeof A=="function"?g9j(A):(A instanceof IDBTransaction&&B9j(A),_K(A,p9j())?new Proxy(A,rtA):A)}function Fk(A){if(A instanceof IDBRequest)return E9j(A);if(etA.has(A))return etA.get(A);let j=h9j(A);return j!==A&&(etA.set(A,j),OI.set(j,A)),j}var dF=A=>OI.get(A);function NK(A,j,{blocked:e,upgrade:t,blocking:r,terminated:a}={}){let n=indexedDB.open(A,j),o=Fk(n);return t&&n.addEventListener("upgradeneeded",i=>{t(Fk(n.result),i.oldVersion,i.newVersion,Fk(n.transaction),i)}),e&&n.addEventListener("blocked",i=>e(i.oldVersion,i.newVersion,i)),o.then(i=>{a&&i.addEventListener("close",()=>a()),r&&i.addEventListener("versionchange",s=>r(s.oldVersion,s.newVersion,s))}).catch(()=>{}),o}function L4A(A,{blocked:j}={}){let e=indexedDB.deleteDatabase(A);return j&&e.addEventListener("blocked",t=>j(t.oldVersion,t)),Fk(e).then(()=>{})}var q9j=["get","getKey","getAll","getAllKeys","count"],v9j=["put","add","delete","clear"],atA=new Map;function _4A(A,j){if(!(A instanceof IDBDatabase&&!(j in A)&&typeof j=="string"))return;if(atA.get(j))return atA.get(j);let e=j.replace(/FromIndex$/,""),t=j!==e,r=v9j.includes(e);if(!(e in(t?IDBIndex:IDBObjectStore).prototype)||!(r||q9j.includes(e)))return;let a=async function(n,...o){let i=this.transaction(n,r?"readwrite":"readonly"),s=i.store;return t&&(s=s.index(o.shift())),(await Promise.all([s[e](...o),r&&i.done]))[0]};return atA.set(j,a),a}LK(A=>({...A,get:(j,e,t)=>_4A(j,e)||A.get(j,e,t),has:(j,e)=>!!_4A(j,e)||A.has(j,e)}));var x9j=["continue","continuePrimaryKey","advance"],N4A={},ntA=new WeakMap,R4A=new WeakMap,f9j={get(A,j){if(!x9j.includes(j))return A[j];let e=N4A[j];return e||(e=N4A[j]=function(...t){ntA.set(this,R4A.get(this)[j](...t))}),e}};async function*G9j(...A){let j=this;if(j instanceof IDBCursor||(j=await j.openCursor(...A)),!j)return;j=j;let e=new Proxy(j,f9j);for(R4A.set(e,j),OI.set(e,dF(j));j;)yield e,j=await(ntA.get(e)||j.continue()),ntA.delete(e)}function z4A(A,j){return j===Symbol.asyncIterator&&_K(A,[IDBIndex,IDBObjectStore,IDBCursor])||j==="iterate"&&_K(A,[IDBIndex,IDBObjectStore])}LK(A=>({...A,get(j,e,t){return z4A(j,e)?G9j:A.get(j,e,t)},has(j,e){return z4A(j,e)||A.has(j,e)}}));var J4A="b5x",e6="accounts",Pq="keysets",ho="vaults",lc="items",bm="item-details",bk="item-usage",ym="item-templates",Cq="device",PI="icons",Hq="cache",id="policies",yk="managed-credentials",Tq="managed-credentials-policies",cc="kolide-apps",Kq="kolide-agent-creds",CI="a_by_uuid",zK="k_by_account_id",otA="v_by_uuid",itA="v_by_account_id",stA="v_by_account_id_and_type",U4A="i_by_uuid",ltA="i_by_account_id",ctA="i_by_vault_id",X4A="d_by_account_id",dtA="u_by_account_id",RK="t_by_account_id",ktA="f_by_file_id",V4A="c_by_account_id",utA="c_by_account_id_type",ptA="p_by_account_uuid",JK="k_a_by_account_uuid",UK="mc_by_account_uuid",mtA="mcp_by_account_uuid",kF=class A{constructor(j){this.saveEncryptedCache=async j=>{let t=this.db.transaction(Hq,"readwrite").objectStore(Hq),a=await t.index(utA).getKey([j.account_id,j.type]);return a?t.put(j,a):t.put(j)};this.getEncryptedCache=async(j,e)=>this.db.transaction(Hq,"readonly").objectStore(Hq).index(utA).get([j,e]);this.saveAccount=async j=>{let r=await this.db.transaction(e6,"readwrite").objectStore(e6).put(j);j.id=r};this.getAllAccounts=async()=>(await this.db.transaction(e6,"readonly").objectStore(e6).getAll()).sort((r,a)=>(r.id??0)-(a.id??0));this.findAccountByUUID=async j=>this.db.transaction(e6,"readonly").objectStore(e6).index(CI).get(j);this.deleteAccountWithUUID=async(j,e)=>{let t=await this.findAccountByUUID(j);if(t){if(!t?.id)return Promise.reject(new Error("Unable to delete account. Account id is undefined."))}else return Promise.reject(new Error("Unable to delete account. Account with the given UUID could not be found."));let r=this.db.transaction([e6,Pq,ho,lc,bm,ym,bk,Hq,cc,yk],"readwrite");r.objectStore(e6).delete(t.id);let n=r.objectStore(Pq),o=n.index(zK);for await(let V of o.iterate(IDBKeyRange.only(t.id))){if(!V)break;n.delete(V.primaryKey)}let i=r.objectStore(ho),s=i.index(itA);for await(let V of s.iterate(IDBKeyRange.only(t.id))){if(!V)break;i.delete(V.primaryKey)}let l=r.objectStore(lc),d=l.index(ltA),k=[];d.getAllKeys(IDBKeyRange.only(t.id)).then(V=>{for(let Y of V)l.delete(Y),k.push(Y)});let u=r.objectStore(bm);u.index(X4A).getAllKeys(IDBKeyRange.only(t.id)).then(V=>{for(let Y of V)u.delete(Y),k.push(Y)});let I=r.objectStore(ym);I.index(RK).getAllKeys(IDBKeyRange.only(t.id)).then(V=>{for(let Y of V)I.delete(Y)});let f=r.objectStore(bk);f.index(dtA).getAllKeys(IDBKeyRange.only(t.id)).then(V=>{for(let Y of V)f.delete(Y)});let P=r.objectStore(Hq),D=P.index(V4A);for(let V of await D.getAllKeys(IDBKeyRange.only(t.id)))P.delete(V);let C=r.objectStore(cc);C.index(JK).getAllKeys(IDBKeyRange.only(t.uuid)).then(V=>{for(let Y of V)C.delete(Y)});let h=r.objectStore(yk);h.index(UK).getAllKeys(IDBKeyRange.only(t.uuid)).then(V=>{for(let Y of V)h.delete(Y)}),await r.done,e?.({deletedItemIds:k,accountId:t.id})};this.getKeysetsForAccount=async j=>this.db.transaction(Pq,"readonly").objectStore(Pq).index(zK).getAll(j);this.replaceAccountKeysets=async(j,e)=>{let t=this.db.transaction([e6,Pq],"readwrite"),r=t.objectStore(e6),a=t.objectStore(Pq);a.index(zK).getAllKeys(IDBKeyRange.only(j.id)).then(o=>{for(let i of o)a.delete(i)});for(let o of e.keysets)o.account_id=j.id,a.put(o);return j.keysetVersion=e.version,r.put(j),t.done};this.resetAccountKeysets=async j=>this.replaceAccountKeysets(j,{version:0,keysets:[]});this.getAllVaultsForAccount=async j=>this.db.transaction(ho,"readonly").objectStore(ho).index(itA).getAll(j);this.getVaultWithUUID=async(j,e)=>this.db.transaction(ho,"readonly").objectStore(ho).index(otA).get([j,e]);this.getGeneratedPasswordVault=async j=>{let a=await this.db.transaction(ho,"readonly").objectStore(ho).index(stA).get([j,"G"]);if(a)return Array.isArray(a)?a[0]:a};this.getSystemVault=async j=>{let t=await this.db.transaction(ho,"readonly").objectStore(ho).index(stA).get([j,fA.Vault.TypeSystem]);if(t)return Array.isArray(t)?t[0]:t};this.getAccountUUIDForVaultUUID=async j=>{let e=this.db.transaction([e6,ho],"readonly"),t=e.objectStore(e6),a=e.objectStore(ho).index(otA),n=await t.getAllKeys();for(let o of n){if(!await a.get([o,j]))continue;let s=await t.get(o);return s?s.uuid:void 0}};this.hasGeneratedPasswordVault=async j=>!!await this.getGeneratedPasswordVault(j);this.hasSystemVault=async j=>!!await this.getSystemVault(j);this.saveVault=async j=>{let r=await this.db.transaction(ho,"readwrite").objectStore(ho).put(j);return j.id=r,j};this.deleteVault=async(j,e)=>{let t=this.db.transaction([ho,lc,bm],"readwrite");t.objectStore(ho).delete(j);let a=t.objectStore(lc),n=t.objectStore(bm),o=a.index(ctA),i=[];o.getAllKeys(IDBKeyRange.only(j)).then(s=>{for(let l of s)a.delete(l),n.delete(l),i.push(l)}),await t.done,e?.({deletedItemIds:i})};this.getItem=async j=>{let e=this.db.transaction([lc,bm],"readonly"),t=e.objectStore(lc),r=e.objectStore(bm),[a,n]=await Promise.all([t.get(j),r.get(j)]);if(a)return a.encDetails=n,a};this.updateItemsFromServer=async(j,e,t)=>{let r=this.db.transaction([ho,lc,bm],"readwrite"),a=r.objectStore(ho),n=r.objectStore(lc),o=r.objectStore(bm),i=n.index(U4A);if(!j?.id)return Promise.reject(new Error("Unable to update items from server. Given vault has undefined ID."));let s=[];if(e.deletedItemUuids)for(let d of e.deletedItemUuids){let k=await i.getKey([j.id,d]);k&&(await n.delete(k),await o.delete(k),s.push(k))}let l=[];if(e.items)for(let d of e.items){let k={account_id:j.account_id,vault_id:j.id,...d};if(k.packageUuid===""&&delete k.packageUuid,!k.encDetails)continue;let u={account_id:k.account_id,...k.encDetails};delete k.encDetails;let m=await i.getKey([j.id,k.uuid]);m&&(k.id=m),m=await n.put(k),await o.put(u,m),l.push(m)}j.contentVersion=e.contentVersion,await a.put(j),await r.done,t?.({deletedItemIds:s,upsertedItemIds:l})};this.getItemOverviewsForAccount=async j=>this.db.transaction(lc,"readonly").objectStore(lc).index(ltA).getAll(j);this.getItemOverviewsForVault=async j=>this.db.transaction(lc,"readonly").objectStore(lc).index(ctA).getAll(j);this.markItemUsed=async(j,e,t,r)=>{let n=this.db.transaction([bk],"readwrite").objectStore(bk),o={account_id:j,item_uuid:e.uuid,vault_uuid:t.uuid,used_at:Date.now(),used_version:e.itemVersion,action:r};await n.put(o)};this.findItemUsageRequiringSync=async j=>{let r=this.db.transaction([bk],"readonly").objectStore(bk).index(dtA),a=[];for await(let n of r.iterate(IDBKeyRange.only(j))){if(!n)break;let o=n.value;o.id=n.primaryKey,a.push(o)}return a};this.markItemUsageSynced=async j=>{let t=this.db.transaction([bk],"readwrite").objectStore(bk);for(let r of j)r?.id&&await t.delete(r.id)};this.saveTemplates=async(j,e)=>{let t=this.db.transaction([e6,ym],"readwrite"),r=t.objectStore(e6),a=t.objectStore(ym),n=a.index(RK),o=e.templates,i=await n.getAll(j.id),s=[],l=i.filter(d=>!o.find(k=>k.uuid===d.uuid));for(let d of l)d?.id&&s.push(a.delete(d.id));for(let d of o){d.account_id=j.id;let k=i.find(u=>d.uuid===u.uuid);k?(d.id=k.id,d.account_id=k.account_id,s.push(a.put(d))):(d.account_id=j.id,s.push(a.put(d)))}return await Promise.all(s),tn({languageChanged:!1}),j.templateVersion=e.version,await r.put(j),t.done};this.getTemplates=async j=>this.db.transaction(ym,"readonly").objectStore(ym).index(RK).getAll(j);this.getAllTemplates=async()=>this.db.transaction(ym,"readonly").objectStore(ym).getAll();this.getDeviceUUID=async()=>{let e=this.db.transaction(Cq,"readwrite").objectStore(Cq),t=await e.getAll();if(t&&t.length>0)return t[0].uuid;let r=q.generateUUID();return await e.put({uuid:r}),r};this.setDeviceUUID=async j=>{let e=this.db.transaction(Cq,"readwrite");return await e.objectStore(Cq).put({uuid:j}),e.done};this.getSWEDeviceUUID=async()=>{let t=await this.db.transaction(Cq,"readonly").objectStore(Cq).getAll();if(t&&t.length>0)return t[0].uuid};this.saveIcon=async(j,e)=>{let r=this.db.transaction(PI,"readwrite").objectStore(PI);await r.index(ktA).count(j)<1&&r.put({fileId:j,encryptedFile:e})};this.getIcon=async j=>{let a=await this.db.transaction(PI,"readonly").objectStore(PI).index(ktA).get(j);return a?a.encryptedFile:null};this.saveAccountPolicies=async(j,e)=>{let r=this.db.transaction(id,"readwrite").objectStore(id);for(let a of e)await r.put({...a,account_uuid:j})};this.getAccountPolicies=async j=>this.db.transaction(id,"readonly").objectStore(id).index(ptA).getAll(j);this.savePoliciesVersionForAccount=async(j,e)=>{let r=this.db.transaction(e6,"readwrite").objectStore(e6),n=await r.index(CI).get(j);n&&(n.policiesVersion=e,await r.put(n))};this.getAllPolicies=async()=>this.db.transaction(id,"readonly").objectStore(id).getAll();this.getAllDeviceTrustConfigs=async()=>{let e=this.db.transaction(cc,"readonly").objectStore(cc),t;try{t=await e.getAll()}catch{throw new Pe({errorClass:E`db-getAll-failed`,message:E`could not get app list from DB`})}let r={};for(let a of t)r[a.accountUuid]||(r[a.accountUuid]={account:{uuid:a.accountUuid,name:a.accountName},enabled:await this.getDeviceTrustEnabledForAccount(a.accountUuid),appList:[]}),r[a.accountUuid].appList.push(a);return Object.values(r)};this.getDeviceTrustEnabledForAccount=async j=>(await this.db.transaction(e6,"readonly").objectStore(e6).index(CI).get(j))?.deviceTrustEnabled??!1;this.getKolideAppsForAccount=async j=>this.db.transaction(cc,"readonly").objectStore(cc).index(JK).getAll(j);this.removeKolideAppsForAccount=async j=>{let e=this.db.transaction(cc,"readwrite"),r=e.objectStore(cc).index(JK),a=new Set(j.appList.map(n=>n.name));for await(let n of r.iterate(j.account.uuid)){let o=n.value;if(!a.has(o.name))try{await n.delete()}catch(i){console.error(`\u{1F4E5} Failed to delete Device Trust app ${o.name} for account: ${j.account.uuid}:`,i)}}await e.done};this.saveKolideAppsForAccount=async(j,e,t)=>{let a=this.db.transaction(cc,"readwrite").objectStore(cc);for(let n of e.appList)try{await a.put({...n,accountName:j.name,accountUuid:j.uuid})}catch(o){console.error(`Failed to store app ${n.name} for account: ${j.uuid}:`,o)}t&&await this.saveKolideAppsMetadataForAccount(j.uuid,t,e.enabled)};this.saveKolideAppsMetadataForAccount=async(j,e,t)=>{let a=this.db.transaction(e6,"readwrite").objectStore(e6),o=await a.index(CI).get(j);o&&(o.kolideAppsVersion=e,o.deviceTrustEnabled=t,await a.put(o))};this.getKolideCredentialsForAccount=async({accountUUID:j,userUUID:e})=>this.db.transaction(Kq,"readonly").objectStore(Kq).get([j,e]);this.saveKolideCredentials=async j=>{await this.db.transaction(Kq,"readwrite").objectStore(Kq).put(j)};this.clearKolideCredentialsForAccount=async({accountUUID:j,userUUID:e})=>{await this.db.transaction(Kq,"readwrite").objectStore(Kq).delete([j,e])};this.resetDatabase=async()=>{this.db.close(),await L4A(J4A)};this.db=j}static{this.open=async(j,e)=>{let r=await NK(J4A,17,{upgrade:(a,n)=>{switch(console.info(`Upgrading database from version ${n} to 17.`,a),e&&e(!0),n){case 0:{let o=a.createObjectStore(e6,{keyPath:"id",autoIncrement:!0}),i=a.createObjectStore(Pq,{keyPath:"id",autoIncrement:!0}),s=a.createObjectStore(ho,{keyPath:"id",autoIncrement:!0}),l=a.createObjectStore(lc,{keyPath:"id",autoIncrement:!0}),d=a.createObjectStore(bm);o.createIndex(CI,"uuid",{unique:!0}),i.createIndex(zK,"account_id"),s.createIndex(otA,["account_id","uuid"],{unique:!0}),s.createIndex(itA,"account_id"),s.createIndex(stA,["account_id","type"]),l.createIndex(U4A,["vault_id","uuid"],{unique:!0}),l.createIndex(ctA,"vault_id"),l.createIndex(ltA,"account_id"),d.createIndex(X4A,"account_id")}case 2:a.createObjectStore(ym,{keyPath:"id",autoIncrement:!0}).createIndex(RK,"account_id");case 3:a.createObjectStore(Cq,{keyPath:"id",autoIncrement:!0});case 4:a.createObjectStore(PI,{keyPath:"id",autoIncrement:!0}).createIndex(ktA,"fileId",{unique:!0});case 8:{let o=a;o.objectStoreNames.contains("device-keys")&&o.deleteObjectStore("device-keys"),o.objectStoreNames.contains("public-device-keys")&&o.deleteObjectStore("public-device-keys")}case 9:{let o=a.createObjectStore(Hq,{autoIncrement:!0});o.createIndex(V4A,"account_id"),o.createIndex(utA,["account_id","type"],{unique:!0})}case 10:a.objectStoreNames.contains(bk)&&a.deleteObjectStore(bk),a.createObjectStore(bk,{autoIncrement:!0}).createIndex(dtA,"account_id");case 11:a.objectStoreNames.contains(id)&&a.deleteObjectStore(id),a.createObjectStore(id,{keyPath:["policyContext","policyName"]}).createIndex(ptA,"account_uuid");case 12:a.objectStoreNames.contains(id)&&a.deleteObjectStore(id),a.createObjectStore(id,{keyPath:["account_uuid","policyContext","policyName"]}).createIndex(ptA,"account_uuid");case 13:a.objectStoreNames.contains(cc)&&a.deleteObjectStore(cc),a.createObjectStore(cc,{keyPath:["name","accountUuid"]}).createIndex(JK,"accountUuid");case 14:{let o=Kq;a.objectStoreNames.contains(o)&&a.deleteObjectStore(o),a.createObjectStore(o,{keyPath:["accountUUID","userUUID"]})}case 15:a.objectStoreNames.contains(yk)&&a.deleteObjectStore(yk),a.createObjectStore(yk,{keyPath:["uuid","accountUuid"]}).createIndex(UK,"accountUuid");case 16:a.objectStoreNames.contains(Tq)&&a.deleteObjectStore(Tq),a.createObjectStore(Tq,{keyPath:["uuid","accountUuid"]}).createIndex(mtA,"accountUuid")}e&&e(!1)},terminated(){console.error("\u{1F494} The browser closed our database connection for reasons beyond our control."),j&&j()},blocked(){console.error("\u{1F494} The database connection was blocked by a lower version connection still being open.")}});return r.addEventListener("versionchange",a=>{console.error("\u{1F494} This database connection is blocking newer versions from connecting."),console.error("event.dataLoss:",a.dataLoss),console.error("event.dataLossMessage:",a.dataLossMessage)}),new A(r)}}async checkThatDatabaseIsAvailable(){try{return await this.db.transaction(e6,"readonly").objectStore(e6).count(),!0}catch{return!1}}async replaceManagedCredentialsForAccount(j,e,t){let r=this.db.transaction([yk,e6],"readwrite"),a=r.objectStore(yk),n=r.objectStore(e6),i=await a.index(UK).getAllKeys(IDBKeyRange.only(e.uuid));await Promise.all(i.map(async s=>a.delete(s))),await Promise.all(t.map(async s=>a.add(s))),e.managedCredentialsVersion=j,await n.put(e),await r.done}async getManagedCredential(j,e){return this.db.transaction(yk).objectStore(yk).get(IDBKeyRange.only([e,j]))}async getManagedCredentialsForAccount(j){return this.db.transaction(yk,"readonly").objectStore(yk).index(UK).getAll(IDBKeyRange.only(j))}async replaceManagedCredentialsPolicies(j,e,t){let r=this.db.transaction([Tq,e6],"readwrite"),a=r.objectStore(Tq),n=r.objectStore(e6),i=await a.index(mtA).getAllKeys(IDBKeyRange.only(e.uuid));await Promise.all(i.map(async s=>a.delete(s))),await Promise.all(t.map(async s=>a.add(s))),e.managedCredentialsPolicyVersion=j,await n.put(e),await r.done}async getManagedCredentialsPolicies(j){return this.db.transaction(Tq).objectStore(Tq).index(mtA).getAll(IDBKeyRange.only(j))}};var EtA;(function(A){A[A.Transient=0]="Transient",A[A.Singleton=1]="Singleton",A[A.ResolutionScoped=2]="ResolutionScoped",A[A.ContainerScoped=3]="ContainerScoped"})(EtA||(EtA={}));var rn=EtA;var EPA=W(mPA(),1),{__extends:pF,__assign:bdt,__rest:F9j,__decorate:ydt,__param:$dt,__metadata:wdt,__awaiter:BPA,__generator:gPA,__exportStar:Idt,__createBinding:Ddt,__values:HI,__read:TI,__spread:$k,__spreadArrays:Odt,__await:Pdt,__asyncGenerator:Cdt,__asyncDelegator:Hdt,__asyncValues:Tdt,__makeTemplateObject:Kdt,__importStar:Sdt,__importDefault:Mdt,__classPrivateFieldGet:_dt,__classPrivateFieldSet:Ldt}=EPA.default;var gtA="injectionTokens";function htA(A){var j=Reflect.getMetadata("design:paramtypes",A)||[],e=Reflect.getOwnMetadata(gtA,A)||{};return Object.keys(e).forEach(function(t){j[+t]=e[t]}),j}function KI(A,j){return function(e,t,r){var a=Reflect.getOwnMetadata(gtA,e)||{};a[r]=j?{token:A,transform:j.transformToken,transformArgs:j.args||[]}:A,Reflect.defineMetadata(gtA,a,e)}}function SI(A){return!!A.useClass}function mF(A){return!!A.useFactory}var YK=function(){function A(j){this.wrap=j,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return A.prototype.createProxy=function(j){var e=this,t={},r=!1,a,n=function(){return r||(a=j(e.wrap()),r=!0),a};return new Proxy(t,this.createHandler(n))},A.prototype.createHandler=function(j){var e={},t=function(r){e[r]=function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];a[0]=j();var o=Reflect[r];return o.apply(void 0,$k(a))}};return this.reflectMethods.forEach(t),e},A}();function Ag(A){return typeof A=="string"||typeof A=="symbol"}function qtA(A){return typeof A=="object"&&"token"in A&&"multiple"in A}function QK(A){return typeof A=="object"&&"token"in A&&"transform"in A}function hPA(A){return typeof A=="function"||A instanceof YK}function Sq(A){return!!A.useToken}function Mq(A){return A.useValue!=null}function qPA(A){return SI(A)||Mq(A)||Sq(A)||mF(A)}var b9j=function(){function A(){this._registryMap=new Map}return A.prototype.entries=function(){return this._registryMap.entries()},A.prototype.getAll=function(j){return this.ensure(j),this._registryMap.get(j)},A.prototype.get=function(j){this.ensure(j);var e=this._registryMap.get(j);return e[e.length-1]||null},A.prototype.set=function(j,e){this.ensure(j),this._registryMap.get(j).push(e)},A.prototype.setAll=function(j,e){this._registryMap.set(j,e)},A.prototype.has=function(j){return this.ensure(j),this._registryMap.get(j).length>0},A.prototype.clear=function(){this._registryMap.clear()},A.prototype.ensure=function(j){this._registryMap.has(j)||this._registryMap.set(j,[])},A}(),MI=b9j;var y9j=function(A){pF(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j}(MI),vPA=y9j;var $9j=function(){function A(){this.scopedResolutions=new Map}return A}(),vtA=$9j;function w9j(A,j){if(A===null)return"at position #"+j;var e=A.split(",")[j].trim();return'"'+e+'" at position #'+j}function I9j(A,j,e){return e===void 0&&(e="    "),$k([A],j.message.split(`
`).map(function(t){return e+t})).join(`
`)}function xtA(A,j,e){var t=TI(A.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=t[1],a=r===void 0?null:r,n=w9j(a,j);return I9j("Cannot inject the dependency "+n+' of "'+A.name+'" constructor. Reason:',e)}function xPA(A){if(typeof A.dispose!="function")return!1;var j=A.dispose;return!(j.length>0)}var D9j=function(A){pF(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j}(MI);var O9j=function(A){pF(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j}(MI);var P9j=function(){function A(){this.preResolution=new D9j,this.postResolution=new O9j}return A}(),fPA=P9j;var ftA=new Map,C9j=function(){function A(j){this.parent=j,this._registry=new vPA,this.interceptors=new fPA,this.disposed=!1,this.disposables=new Set}return A.prototype.register=function(j,e,t){t===void 0&&(t={lifecycle:rn.Transient}),this.ensureNotDisposed();var r;if(qPA(e)?r=e:r={useClass:e},Sq(r))for(var a=[j],n=r;n!=null;){var o=n.useToken;if(a.includes(o))throw new Error("Token registration cycle detected! "+$k(a,[o]).join(" -> "));a.push(o);var i=this._registry.get(o);i&&Sq(i.provider)?n=i.provider:n=null}if((t.lifecycle===rn.Singleton||t.lifecycle==rn.ContainerScoped||t.lifecycle==rn.ResolutionScoped)&&(Mq(r)||mF(r)))throw new Error('Cannot use lifecycle "'+rn[t.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(j,{provider:r,options:t}),this},A.prototype.registerType=function(j,e){return this.ensureNotDisposed(),Ag(e)?this.register(j,{useToken:e}):this.register(j,{useClass:e})},A.prototype.registerInstance=function(j,e){return this.ensureNotDisposed(),this.register(j,{useValue:e})},A.prototype.registerSingleton=function(j,e){if(this.ensureNotDisposed(),Ag(j)){if(Ag(e))return this.register(j,{useToken:e},{lifecycle:rn.Singleton});if(e)return this.register(j,{useClass:e},{lifecycle:rn.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var t=j;return e&&!Ag(e)&&(t=e),this.register(j,{useClass:t},{lifecycle:rn.Singleton})},A.prototype.resolve=function(j,e){e===void 0&&(e=new vtA),this.ensureNotDisposed();var t=this.getRegistration(j);if(!t&&Ag(j))throw new Error('Attempted to resolve unregistered dependency token: "'+j.toString()+'"');if(this.executePreResolutionInterceptor(j,"Single"),t){var r=this.resolveRegistration(t,e);return this.executePostResolutionInterceptor(j,r,"Single"),r}if(hPA(j)){var r=this.construct(j,e);return this.executePostResolutionInterceptor(j,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},A.prototype.executePreResolutionInterceptor=function(j,e){var t,r;if(this.interceptors.preResolution.has(j)){var a=[];try{for(var n=HI(this.interceptors.preResolution.getAll(j)),o=n.next();!o.done;o=n.next()){var i=o.value;i.options.frequency!="Once"&&a.push(i),i.callback(j,e)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.interceptors.preResolution.setAll(j,a)}},A.prototype.executePostResolutionInterceptor=function(j,e,t){var r,a;if(this.interceptors.postResolution.has(j)){var n=[];try{for(var o=HI(this.interceptors.postResolution.getAll(j)),i=o.next();!i.done;i=o.next()){var s=i.value;s.options.frequency!="Once"&&n.push(s),s.callback(j,e,t)}}catch(l){r={error:l}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(j,n)}},A.prototype.resolveRegistration=function(j,e){if(this.ensureNotDisposed(),j.options.lifecycle===rn.ResolutionScoped&&e.scopedResolutions.has(j))return e.scopedResolutions.get(j);var t=j.options.lifecycle===rn.Singleton,r=j.options.lifecycle===rn.ContainerScoped,a=t||r,n;return Mq(j.provider)?n=j.provider.useValue:Sq(j.provider)?n=a?j.instance||(j.instance=this.resolve(j.provider.useToken,e)):this.resolve(j.provider.useToken,e):SI(j.provider)?n=a?j.instance||(j.instance=this.construct(j.provider.useClass,e)):this.construct(j.provider.useClass,e):mF(j.provider)?n=j.provider.useFactory(this):n=this.construct(j.provider,e),j.options.lifecycle===rn.ResolutionScoped&&e.scopedResolutions.set(j,n),n},A.prototype.resolveAll=function(j,e){var t=this;e===void 0&&(e=new vtA),this.ensureNotDisposed();var r=this.getAllRegistrations(j);if(!r&&Ag(j))throw new Error('Attempted to resolve unregistered dependency token: "'+j.toString()+'"');if(this.executePreResolutionInterceptor(j,"All"),r){var a=r.map(function(o){return t.resolveRegistration(o,e)});return this.executePostResolutionInterceptor(j,a,"All"),a}var n=[this.construct(j,e)];return this.executePostResolutionInterceptor(j,n,"All"),n},A.prototype.isRegistered=function(j,e){return e===void 0&&(e=!1),this.ensureNotDisposed(),this._registry.has(j)||e&&(this.parent||!1)&&this.parent.isRegistered(j,!0)},A.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},A.prototype.clearInstances=function(){var j,e;this.ensureNotDisposed();try{for(var t=HI(this._registry.entries()),r=t.next();!r.done;r=t.next()){var a=TI(r.value,2),n=a[0],o=a[1];this._registry.setAll(n,o.filter(function(i){return!Mq(i.provider)}).map(function(i){return i.instance=void 0,i}))}}catch(i){j={error:i}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(j)throw j.error}}},A.prototype.createChildContainer=function(){var j,e;this.ensureNotDisposed();var t=new A(this);try{for(var r=HI(this._registry.entries()),a=r.next();!a.done;a=r.next()){var n=TI(a.value,2),o=n[0],i=n[1];i.some(function(s){var l=s.options;return l.lifecycle===rn.ContainerScoped})&&t._registry.setAll(o,i.map(function(s){return s.options.lifecycle===rn.ContainerScoped?{provider:s.provider,options:s.options}:s}))}}catch(s){j={error:s}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(j)throw j.error}}return t},A.prototype.beforeResolution=function(j,e,t){t===void 0&&(t={frequency:"Always"}),this.interceptors.preResolution.set(j,{callback:e,options:t})},A.prototype.afterResolution=function(j,e,t){t===void 0&&(t={frequency:"Always"}),this.interceptors.postResolution.set(j,{callback:e,options:t})},A.prototype.dispose=function(){return BPA(this,void 0,void 0,function(){var j;return gPA(this,function(e){switch(e.label){case 0:return this.disposed=!0,j=[],this.disposables.forEach(function(t){var r=t.dispose();r&&j.push(r)}),[4,Promise.all(j)];case 1:return e.sent(),[2]}})})},A.prototype.getRegistration=function(j){return this.isRegistered(j)?this._registry.get(j):this.parent?this.parent.getRegistration(j):null},A.prototype.getAllRegistrations=function(j){return this.isRegistered(j)?this._registry.getAll(j):this.parent?this.parent.getAllRegistrations(j):null},A.prototype.construct=function(j,e){var t=this;if(j instanceof YK)return j.createProxy(function(a){return t.resolve(a,e)});var r=function(){var a=ftA.get(j);if(!a||a.length===0){if(j.length===0)return new j;throw new Error('TypeInfo not known for "'+j.name+'"')}var n=a.map(t.resolveParams(e,j));return new(j.bind.apply(j,$k([void 0],n)))}();return xPA(r)&&this.disposables.add(r),r},A.prototype.resolveParams=function(j,e){var t=this;return function(r,a){var n,o,i;try{return qtA(r)?QK(r)?r.multiple?(n=t.resolve(r.transform)).transform.apply(n,$k([t.resolveAll(r.token)],r.transformArgs)):(o=t.resolve(r.transform)).transform.apply(o,$k([t.resolve(r.token,j)],r.transformArgs)):r.multiple?t.resolveAll(r.token):t.resolve(r.token,j):QK(r)?(i=t.resolve(r.transform,j)).transform.apply(i,$k([t.resolve(r.token,j)],r.transformArgs)):t.resolve(r,j)}catch(s){throw new Error(xtA(e,a,s))}}},A.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},A}(),qe=new C9j;function H9j(A){return KI(A)}var _q=H9j;function T9j(){return function(A){ftA.set(A,htA(A))}}var ZK=T9j;function K9j(){return function(A){ZK()(A),qe.registerSingleton(A)}}var dc=K9j;if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);function GtA(A){let j=`${A} not yet initialized. Try awaiting for this.init() to resolve before calling.`,e=new q.LoggableError({errorClass:E`BrowserStorage`,message:q.logsafe.assertLogSafe(j)});return It()||lj(e),e}var A5=class{constructor(j,e){this._getStorage=()=>{switch(this._storageType){case"PersistentStorage":return browser.storage.local;default:return browser.storage.session}};this._storageType=j,this._initError=e}async init(){return this._initPromise?this._initPromise.then(()=>this):(this._initPromise=(async()=>{console.info(`[BackgroundStorage] Using browser.storage.${this._storageType.replace("Storage","").toLowerCase()}`);let j=this._getStorage();this._memoryStore=await j.get(),j.setAccessLevel&&j.setAccessLevel({accessLevel:"TRUSTED_CONTEXTS"})})(),this._initPromise.then(()=>this))}async reconcileItems(){this._memoryStore=await this._getStorage().get()}getItem(j){if(!this._memoryStore)throw this._initError(this._storageType);return this._memoryStore[j]??void 0}setItem(j,e){if(!this._memoryStore)throw this._initError(this._storageType);let t=this._memoryStore[j];this._memoryStore[j]=e,this._getStorage().set({[j]:e}).catch(()=>{this._memoryStore={...this._memoryStore,[j]:t}})}removeItem(j){if(!this._memoryStore)throw this._initError(this._storageType);let e=this._memoryStore[j];this._memoryStore[j]=void 0,this._getStorage().remove(j).catch(()=>{this._memoryStore={...this._memoryStore,[j]:e}})}clear(){if(!this._memoryStore)throw this._initError(this._storageType);let j={...this._memoryStore};this._memoryStore={},this._getStorage().clear().catch(()=>{this._memoryStore=j})}},j5=class extends A5{constructor(){super("PersistentStorage",GtA)}},e5=class extends A5{constructor(){super("SessionStorage",GtA)}};var t5=class{constructor(){this._inited=!1;this._storage=new Map}async init(){return this._inited||(this._inited=!0,console.info("[BackgroundStorage] Using MemoryStorage")),Promise.resolve(this)}async reconcileItems(){return Promise.resolve()}getItem(j){return this._storage.get(j)}setItem(j,e){this._storage.set(j,e)}removeItem(j){this._storage.delete(j)}clear(){this._storage.clear()}};var GPA=A=>({init:async()=>A().init(),reconcileItems:async()=>A().reconcileItems(),getItem:j=>A().getItem(j),setItem:(j,e)=>A().setItem(j,e),removeItem:j=>A().removeItem(j),clear:()=>A().clear()}),vj=GPA(()=>qe.resolve("PersistentStorage")),ce=GPA(()=>qe.resolve("SessionStorage"));var ya={};Yt(ya,{activeTab:()=>Gt,activeTabs:()=>_k,addAccountPrompt:()=>T2,addAccountPromptNotification:()=>lzA,allTabs:()=>t7,blurActiveField:()=>X6A,captureVisibleTab:()=>nzA,closeMigration:()=>_nA,closeSsoTab:()=>u8,collectUsoProviders:()=>zF,computeSuggestions:()=>j8,createTabSpecificContextMenus:()=>G6A,currentWindow:()=>GrA,decodeTotpQrCode:()=>ozA,downloadData:()=>yb,executeScript:()=>EzA,getFrameInfoFromContentScript:()=>d8,getTab:()=>an,getTabForB5AccountCreation:()=>XnA,handleCollectedPageDetails:()=>CnA,handleOpenB5UnlockScreen:()=>WnA,handleOpenImportPage:()=>VnA,handleOpenSettings:()=>KnA,handleOpenSupportLink:()=>TnA,handleOpenTab:()=>znA,injectInlineCSS:()=>izA,isBrowserFocused:()=>ynA,isCreditCardField:()=>JnA,isEmptyPageURL:()=>$rA,isIdentityField:()=>UnA,isInAccountCreationOnboarding:()=>E8,notifyActiveTabsCanRequestUnlockChanged:()=>FaA,notifyActiveTabsInlineMenuRefresh:()=>zk,notifyActiveTabsLockStateChanged:()=>i8,notifyFrozenAccountInfoChanged:()=>wnA,notifySettingsChanged:()=>P6A,onTabUpdated:()=>uzA,openAccountInOpb:()=>C6A,openAccountProfilePage:()=>TM,openB5Tab:()=>sp,openBenchmarking:()=>SnA,openBrowserTab:()=>AD,openChangelog:()=>maA,openContactFormWithDiagnostics:()=>HnA,openEmailPreferencesPage:()=>BaA,openErrorMessage:()=>Tg,openExtensionFirstSurvey:()=>EaA,openHelp:()=>paA,openHomePageInB5Web:()=>BzA,openImportPage:()=>PS,openIntegrationsPage:()=>H6A,openItemForSharing:()=>QaA,openItemInB5:()=>Q7,openItemUrl:()=>ID,openMfaTab:()=>BnA,openMigration:()=>MnA,openMigrationEnforcement:()=>W6A,openNewItemPage:()=>V6A,openSettings:()=>mb,openWatchtowerSection:()=>z5,openWithData:()=>szA,removeInlineExclusionOnActiveTab:()=>RnA,reportFeedback:()=>m8,requestFillAuthorization:()=>uv,scanTotpQrCode:()=>wD,showInlineInFirstLoginField:()=>$nA,showPrivacyIntegrationPage:()=>Pee,showReadyToGoPage:()=>LnA,showWelcomePage:()=>sE,showWelcomePageInOnboardingTab:()=>NnA,showWhatsNewPrivacyBlogPost:()=>Cee});var S9j={withStackTrace:!1},yPA=(A,j,e=S9j)=>{let t=j.isOk()?{type:"Ok",value:j.value}:{type:"Err",value:j.error},r=e.withStackTrace?new Error().stack:void 0;return{data:t,message:A,stack:r}};function Lq(A,j,e,t){function r(a){return a instanceof e?a:new e(function(n){n(a)})}return new(e||(e=Promise))(function(a,n){function o(l){try{s(t.next(l))}catch(d){n(d)}}function i(l){try{s(t.throw(l))}catch(d){n(d)}}function s(l){l.done?a(l.value):r(l.value).then(o,i)}s((t=t.apply(A,j||[])).next())})}function FPA(A){var j=typeof Symbol=="function"&&Symbol.iterator,e=j&&A[j],t=0;if(e)return e.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&t>=A.length&&(A=void 0),{value:A&&A[t++],done:!A}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}function j7(A){return this instanceof j7?(this.v=A,this):new j7(A)}function bPA(A,j,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(A,j||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",n),r[Symbol.asyncIterator]=function(){return this},r;function n(u){return function(m){return Promise.resolve(m).then(u,d)}}function o(u,m){t[u]&&(r[u]=function(I){return new Promise(function(S,f){a.push([u,I,S,f])>1||i(u,I)})},m&&(r[u]=m(r[u])))}function i(u,m){try{s(t[u](m))}catch(I){k(a[0][3],I)}}function s(u){u.value instanceof j7?Promise.resolve(u.value.v).then(l,d):k(a[0][2],u)}function l(u){i("next",u)}function d(u){i("throw",u)}function k(u,m){u(m),a.shift(),a.length&&i(a[0][0],a[0][1])}}function M9j(A){var j,e;return j={},t("next"),t("throw",function(r){throw r}),t("return"),j[Symbol.iterator]=function(){return this},j;function t(r,a){j[r]=A[r]?function(n){return(e=!e)?{value:j7(A[r](n)),done:!1}:a?a(n):n}:a}}function _9j(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j=A[Symbol.asyncIterator],e;return j?j.call(A):(A=typeof FPA=="function"?FPA(A):A[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(a){e[a]=A[a]&&function(n){return new Promise(function(o,i){n=A[a](n),r(o,i,n.done,n.value)})}}function r(a,n,o,i){Promise.resolve(i).then(function(s){a({value:s,done:o})},n)}}var Rn=class A{constructor(j){this._promise=j}static fromSafePromise(j){let e=j.then(t=>new kc(t));return new A(e)}static fromPromise(j,e){let t=j.then(r=>new kc(r)).catch(r=>new uc(e(r)));return new A(t)}static fromThrowable(j,e){return(...t)=>new A(Lq(this,void 0,void 0,function*(){try{return new kc(yield j(...t))}catch(r){return new uc(e?e(r):r)}}))}static combine(j){return L9j(j)}static combineWithAllErrors(j){return N9j(j)}map(j){return new A(this._promise.then(e=>Lq(this,void 0,void 0,function*(){return e.isErr()?new uc(e.error):new kc(yield j(e.value))})))}andThrough(j){return new A(this._promise.then(e=>Lq(this,void 0,void 0,function*(){if(e.isErr())return new uc(e.error);let t=yield j(e.value);return t.isErr()?new uc(t.error):new kc(e.value)})))}andTee(j){return new A(this._promise.then(e=>Lq(this,void 0,void 0,function*(){if(e.isErr())return new uc(e.error);try{yield j(e.value)}catch{}return new kc(e.value)})))}orTee(j){return new A(this._promise.then(e=>Lq(this,void 0,void 0,function*(){if(e.isOk())return new kc(e.value);try{yield j(e.error)}catch{}return new uc(e.error)})))}mapErr(j){return new A(this._promise.then(e=>Lq(this,void 0,void 0,function*(){return e.isOk()?new kc(e.value):new uc(yield j(e.error))})))}andThen(j){return new A(this._promise.then(e=>{if(e.isErr())return new uc(e.error);let t=j(e.value);return t instanceof A?t._promise:t}))}orElse(j){return new A(this._promise.then(e=>Lq(this,void 0,void 0,function*(){return e.isErr()?j(e.error):new kc(e.value)})))}match(j,e){return this._promise.then(t=>t.match(j,e))}unwrapOr(j){return this._promise.then(e=>e.unwrapOr(j))}safeUnwrap(){return bPA(this,arguments,function*(){return yield j7(yield j7(yield*M9j(_9j(yield j7(this._promise.then(e=>e.safeUnwrap()))))))})}then(j,e){return this._promise.then(j,e)}[Symbol.asyncIterator](){return bPA(this,arguments,function*(){let e=yield j7(this._promise);return e.isErr()&&(yield yield j7(BF(e.error))),yield j7(e.value)})}};function r5(A){return new Rn(Promise.resolve(new kc(A)))}function BF(A){return new Rn(Promise.resolve(new uc(A)))}var o7t=Rn.fromPromise,i7t=Rn.fromSafePromise,s7t=Rn.fromThrowable,$PA=A=>{let j=Oj([]);for(let e of A)if(e.isErr()){j=TA(e.error);break}else j.map(t=>t.push(e.value));return j},L9j=A=>Rn.fromSafePromise(Promise.all(A)).andThen($PA),wPA=A=>{let j=Oj([]);for(let e of A)e.isErr()&&j.isErr()?j.error.push(e.error):e.isErr()&&j.isOk()?j=TA([e.error]):e.isOk()&&j.isOk()&&j.value.push(e.value);return j},N9j=A=>Rn.fromSafePromise(Promise.all(A)).andThen(wPA),sd;(function(A){function j(r,a){return(...n)=>{try{let o=r(...n);return Oj(o)}catch(o){return TA(a?a(o):o)}}}A.fromThrowable=j;function e(r){return $PA(r)}A.combine=e;function t(r){return wPA(r)}A.combineWithAllErrors=t})(sd||(sd={}));function Oj(A){return new kc(A)}function TA(A){return new uc(A)}var kc=class{constructor(j){this.value=j}isOk(){return!0}isErr(){return!this.isOk()}map(j){return Oj(j(this.value))}mapErr(j){return Oj(this.value)}andThen(j){return j(this.value)}andThrough(j){return j(this.value).map(e=>this.value)}andTee(j){try{j(this.value)}catch{}return Oj(this.value)}orTee(j){return Oj(this.value)}orElse(j){return Oj(this.value)}asyncAndThen(j){return j(this.value)}asyncAndThrough(j){return j(this.value).map(()=>this.value)}asyncMap(j){return Rn.fromSafePromise(j(this.value))}unwrapOr(j){return this.value}match(j,e){return j(this.value)}safeUnwrap(){let j=this.value;return function*(){return j}()}_unsafeUnwrap(j){return this.value}_unsafeUnwrapErr(j){throw yPA("Called `_unsafeUnwrapErr` on an Ok",this,j)}*[Symbol.iterator](){return this.value}},uc=class{constructor(j){this.error=j}isOk(){return!1}isErr(){return!this.isOk()}map(j){return TA(this.error)}mapErr(j){return TA(j(this.error))}andThrough(j){return TA(this.error)}andTee(j){return TA(this.error)}orTee(j){try{j(this.error)}catch{}return TA(this.error)}andThen(j){return TA(this.error)}orElse(j){return j(this.error)}asyncAndThen(j){return BF(this.error)}asyncAndThrough(j){return BF(this.error)}asyncMap(j){return BF(this.error)}unwrapOr(j){return j}match(j,e){return e(this.error)}safeUnwrap(){let j=this.error;return function*(){throw yield TA(j),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(j){throw yPA("Called `_unsafeUnwrap` on an Err",this,j)}_unsafeUnwrapErr(j){return this.error}*[Symbol.iterator](){let j=this;return yield j,j}},l7t=sd.fromThrowable;function $m(A){if(!A)return!1;A=A.toLowerCase();let j=["1password.ca","1password.com","1password.eu","b5dev.ca","b5dev.com","b5dev.eu","b5local.com","b5staging.com","b5test.ca","b5test.com","b5test.eu","b5rev.com"];for(let e of j)if(A===e||A.endsWith("."+e))return!0;return!1}var FtA=(...A)=>{if(A.length===0)return"";if(A.length===1)return A[0];let j=A.shift();if(j){for(let e of A)e.length!==0&&(j.slice(-1)==="/"&&e.charAt(0)==="/"?j=j+e.slice(1):j.slice(-1)==="/"||e.charAt(0)==="/"?j=j+e:j=j+"/"+e);return j}return""},z9j=A=>{let j=atob(A.split(",")[1]),e=A.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(j.length),r=new Uint8Array(t);for(let a=0;a<j.length;a++)r[a]=j.charCodeAt(a);return new Blob([t],{type:e})};async function IPA(A){let j=z9j(A);return na()?R9j(j):J9j(j)}async function R9j(A){let j=await createImageBitmap(A),t=new OffscreenCanvas(j.width,j.height).getContext("2d");if(!t)throw Error("Unable to retrieve 2d context");return t.drawImage(j,0,0),{imageData:t.getImageData(0,0,j.width,j.height),width:j.width,height:j.height}}async function J9j(A){let j=URL.createObjectURL(A);return new Promise(e=>{let t=document.createElement("canvas"),r=t.getContext("2d");if(r){let a=new Image;a.addEventListener("load",()=>{t.width=a.width,t.height=a.height,r.drawImage(a,0,0,t.width,t.height),e({imageData:r.getImageData(0,0,t.width,t.height),width:t.width,height:t.height})},!1),a.src=j}})}function _I(A){try{let j=new URL(A);return j.protocol===`${tu.OtpAuth}:`||j.protocol===`${tu.Yjotp}:`||j.protocol===`${tu.AppleOtpAuth}:`}catch{return!1}}var DPA=()=>{let e=0;return It()?e=25:e=22,{width:600,height:450+e}};async function btA(A,j){for(let e of A)if(await j(e))return e}function OPA(A){let j=[];for(let e of A){if(e.isErr())return TA(e.error);j.push(e.value)}return Oj(j)}var PPA=Object.values(J6);var CPA={addAccount:{notificationManagerEnabled:!0},autosave:{notificationManagerEnabled:!0,maximumPageChangeCount:4},autosaveTotp:{notificationManagerEnabled:!0},passkeySigningIn:{},passkeySavePrompt:{fullscreen:!0},passkeyGenericError:{notificationManagerEnabled:!0},saveSocialLogin:{notificationManagerEnabled:!0,maximumPageChangeCount:4},suggestSocialLogin:{notificationManagerEnabled:!0},sshOnboardingNextSteps:{notificationManagerEnabled:!0,maximumPageChangeCount:4},shellPlugins:{notificationManagerEnabled:!0},shellPluginsSuccess:{notificationManagerEnabled:!0},shellPluginsFallback:{notificationManagerEnabled:!0},signInTo1Password:{notificationManagerEnabled:!0},generatedPasswordUserOffline:{notificationManagerEnabled:!0},generatedPasswordNoDefaultSavingLocation:{notificationManagerEnabled:!0},generatedPasswordAccountIsLocked:{notificationManagerEnabled:!0},generatedPasswordNotSignedIn:{notificationManagerEnabled:!0},generatedPasswordNoVaultFound:{notificationManagerEnabled:!0},generatedPasswordUnexpectedError:{notificationManagerEnabled:!0},watchtowerBreachDetected:{notificationManagerEnabled:!0},deviceTrustBlocking:{fullscreen:!0,blurBackground:!0,disableKeyboardClose:!0,blockPageElements:!0,notificationManagerEnabled:!0},deviceTrustNoKolide:{fullscreen:!0,blurBackground:!0,disableKeyboardClose:!0,blockPageElements:!0,notificationManagerEnabled:!0},deviceTrustNeedsUnlock:{fullscreen:!0,blurBackground:!0,disableKeyboardClose:!0,blockPageElements:!0,notificationManagerEnabled:!0},deviceTrustNonBlocking:{notificationManagerEnabled:!0},deviceTrustSuccess:{notificationManagerEnabled:!0,autoFocus:!0},notificationManager:{}};var HPA={disabled:!0,"fallback-requested":!0,"missing-url":!0,"missing-public-key":!0,"unexpected-response":!0,"port-error":!0,timeout:!0,unauthorized:!0,unknown:!0,"user-cancelled":!0,"vault-data-failed":!0,"messenger-error":!0,"internal-error":!0},TPA={...HPA,"create-passkey-failed":!0,duplicate:!0,"preview-failed":!0,"save-passkey-failed":!0},KPA={...HPA,"authenticating-failed":!0,"bad-rp-id":!0,"conflicting-state":!0,"corrupted-item":!0,"missing-cached-id":!0,"missing-item":!0,"vault-icons-failed":!0};var ytA={"test-pre-reg-feature":!1,"b5x-sso-unlock":!1,"b5x-safari-biometry":!1,"b5x-account-hydration":!1,"b5x-firefox-data-collection-ui":!1,"b5x-pre-auth-tracing":!1,"b5x-notification-manager":!1},gF=Object.keys(ytA);var wm={"account-test-feature":!1,"b2b-individual-vault-reporting":!1,"xam-dvr-hpke-encryption":!1,"b2b-reporting-policy":!1,"b5x-autosave-identities":!1,"b5x-autosave-suggested-password":!1,"b5x-autosave-totp":!1,"b5x-b2b-telemetry-data-collection":!1,"b5x-equal-inline-width":!1,"b5x-next-gen-inline":!1,"b5x-recollect-fields-for-identities":!1,"b5x-telemetry-data-collection":!1,"core-date-time-localization":!1,"hide-lastpass-importer-metadata-vault":!1,"b5x-fix-filling-events":!1,"b2b-complete-trust-identity":!1,"b5x-filling-saving-telemetry":!1,"b5x-watchtower-breach-notification":!0,"securityDevelopment-passkeyPRF":!1,"securityDevelopment-autolock-extendedDurationOptions":!1,"core-securityDevelopment-openAndFill-enforcement":!1,"b5x-single-pane-popup":!1,"core-securityDevelopment-sync-notifierConnection":!1,"frameworks-autolock-longerDefault":!1,"frameworks-telem-applock-event":!1,"b5x-trusted-mouse-down-events":!1,"b5x-client-performance-tracing":!1,"auth-self-serve-migration-v1":!1,"b5x-metric-gate-inline-menu-render":!1,"b5x-a-a-test":!1,"b5x-inline-menu-prominent-cta":!1,"b5x-auto-lock-policies":!1,"b5x-restrict-failed-login-attempts":!1,"oph-empty-states-item-details-import-nudge":!1,"core-help-menu-consistency":!1,"telemetry-data-collection":!1,"telemetry-high-volume-events-denied":!1,"authx-autolock_settings-profiles":!1,"experiment-b5x-a-a-test-all-users-20241128":!1,"experiment-b5x-inline-menu-prominent-cta-all-users-20241128":!1,"b5x-authx-unlock-notifications":!1,"b5x-kolide-device-trust-for-all":!1,"b5x-launchpad":!1,"b5x-sign-in-with-improvements":!1,"frameworks-kolide-apps-sync":!1,"frameworks-dt4a-allow-disabled":!1,"extension-first-for-sso":!1,"extension-first-survey":!1,"extension-first-for-sso-scim":!1,"b2b-extension-first-guided-setup":!1,"b5x-login-detection":!1,"app-launcher-shortcuts":!1,"b5x-popup-catalog-apps":!1,"b5x-trelica-activity-reporting":!1,"b5x-extension-feedback-loop":!1,"managed-credentials":!1,"b5x-universal-sign-on":!1,"b5x-unified-panel":!1},e7=Object.keys(wm);var $tA,SPA=async()=>{if($tA)return $tA;let A;try{A=await $I(browser.runtime.sendNativeMessage("",{name:"request-os-version"}),500)}catch(j){console.error(j)}if(!(!A||typeof A!="string"))return $tA=A,A};function U9j(A){return[A1,j1].includes(A)}function ItA(A){return A===e1}var wtA={},ipt=new ht("[BROWSER]"),He=class{static async downloadFile(j,e){let t=await Eh(e);return browser.downloads.download({url:t,filename:j}).then(r=>{let a=n=>{n.id===r&&n.filename?.current&&browser.downloads.onChanged.removeListener(a)};browser.downloads.onChanged.addListener(a)})}static async getShortcuts(){return browser.commands.getAll().then(j=>{let e={browserAction:"",lock:""};try{let t=j.find(({name:a})=>a&&U9j(a)),r=j.find(({name:a})=>a&&ItA(a));e={browserAction:this.normalizeCtrlOnMac(t?.shortcut)??"",lock:this.normalizeCtrlOnMac(r?.shortcut)??""}}catch{}return e})}static async updateShortcut(j,e){return await browser.commands.update({name:j,shortcut:e}),this.normalizeCtrlOnMac(e)??""}static normalizeCtrlOnMac(j){return VgA(j)}static async getBrowserInfo(){let j=await bp();if(f6()){let e=await SPA();e&&(j.osVersion=e)}return j}static async openTab(j){if(j.ignoreIfDuplicate){let r=(await t7()).filter(a=>a.id!==0).filter(typeof j.ignoreIfDuplicate=="object"&&j.ignoreIfDuplicate?.customDuplicateCheck?j.ignoreIfDuplicate.customDuplicateCheck:a=>a.url===j.url);if(r.length>0){let a=r[0].id;return typeof j.ignoreIfDuplicate=="object"&&j.ignoreIfDuplicate?.activateExisting===!0&&await browser.tabs.update(a,{active:!0}),Promise.reject({message:"Did not open a new tab since existing tabs already open",firstDuplicateTabId:a})}}let e,t=new Promise(r=>{chrome.tabs.create({url:j.url,openerTabId:j.openerTabId},a=>{!a.openerTabId&&j.openerTabId&&a.id&&(wtA[a.id]=j.openerTabId),j.waitForLoad?chrome.tabs.onUpdated.addListener(e=(n,{status:o})=>{n===a.id&&o==="complete"&&(chrome.tabs.onUpdated.removeListener(e),r(a))}):r(a)})});try{return await j6.withTimeout(t,5e3,"openTab")}finally{e&&chrome.tabs.onUpdated.removeListener(e)}}static async sendNativeMessage(j,e){try{return Oj(await chrome.runtime.sendNativeMessage("",JSON.stringify({name:j,data:e})))}catch(t){return TA(t)}}static registerSuspensionListener(j,e=3e3){let t=async()=>{let r;try{r=j()}catch(a){console.error(`${j.name} failed to gracefully finish`,a);return}r instanceof Promise&&await Promise.race([r,wI(e)])};if(Oe()){if(typeof browser>"u"||!browser.runtime){console.warn("Unable to register suspension listener in Safari");return}browser.runtime.onSuspend?.addListener(()=>{try{t()}catch(r){console.error("Error in Safari runtime suspension listener",r)}})}else chrome.runtime.onSuspend.addListener(()=>{try{t()}catch(r){console.error("Error in Chrome/Firefox runtime suspension listener",r)}})}};function X9j(A,j){let e=wtA[A];e&&(chrome.tabs.update(e,{active:!0}),delete wtA[A])}chrome.tabs.onRemoved.addListener(X9j);var Nq=class{initialize(...j){return this}subscribe(j,e,t){return globalThis.addEventListener(j,e,t),this}unsubscribe(j,e){return globalThis.removeEventListener(j,e),this}};Nq=n6([dc()],Nq);var LI="[GlobalListener]",MPA=new ht(LI),zq=class{constructor(){this.options=new Map;this.subscriptions=new Map;this.initialized=!1;this.initialize=this.initialize.bind(this),this.listener=this.listener.bind(this)}getOptions(j,e){let t=this.options.get(j);if(!t)throw new Error(`${LI}: No event registered with type ${j}. Global events must be registered at initial runtime.`);return t.get(e)}getSubscription(j){let e=this.subscriptions.get(j);if(!e)throw new Error(`${LI}: No event registered with type ${j}. Global events must be registered at initial runtime.`);return e}listener(j){let e=this.subscriptions.get(j.type);e&&e.forEach(t=>{t(j),this.getOptions(j.type,t)?.once&&this.unsubscribe(j.type,t)})}initialize(...j){return this.initialized?(MPA.warn(`Attempted to initialize with events: ${j.join()}, but was already initialized`),this):(j.forEach(e=>{this.subscriptions.has(e)||(this.subscriptions.set(e,new Set),this.options.set(e,new WeakMap),globalThis.addEventListener(e,this.listener))}),this.initialized=!0,this)}subscribe(j,e,t){let r=this.subscriptions.get(j);if(!r)throw new Error(`${LI}: No event registered with type ${j}. Global events must be registered at initial runtime.`);return r.has(e)?MPA.warn(`Duplicate listener attempted to register for event ${j}`):(r.add(e),t&&this.options.get(j)?.set(e,t)),this}unsubscribe(j,e){let t=this.getSubscription(j);if(!t.has(e))throw new Error(`${LI}: Cannot unsubscribe listener to event ${j}: listener is not subscribed to event ${j}`);return t.delete(e),this.options.get(j)?.delete(e),this}};zq=n6([dc()],zq);var qi="GlobalListener",DtA=()=>qe.resolve(qi),nr={initialize:(...A)=>DtA().initialize(...A),subscribe:(A,j,e)=>DtA().subscribe(A,j,e),unsubscribe:(A,j)=>DtA().unsubscribe(A,j)};function Kt(){return _.allAccountHandlersAreLocked}var a5=class extends Error{constructor(j,e){super(),this.code=j,this.message=e||"",this.name="B5XClientError"}toString(){return`B5XClientError: ${this.message} (${this.code})`}},_PA=(A,j)=>Td(A)&&A.name==="B5XClientError"&&(!j||j===A.code);var mNA=W(Ik());var Gzj="SessionStorage",PtA="context-initialization",CtA=A=>UI().get(A),B5=A=>{if(!A){console.warn("Missing data when attempting to set cache");return}let j=UI(),e=CtA(A.accountUuid),t={...A,session:A.session||e?.session,srpX:A.srpX||e?.srpX};j.set(t.accountUuid,t),eHA(j)},QCA=(A,j,e)=>{let t=CtA(A);t&&(t.session=j,t.srpX=e,B5(t))},ZCA=(A,j)=>{let e=CtA(A);e&&e.session&&(e.session={...e.session,requestID:j},B5(e))},AHA=A=>{let j=UI();j.delete(A),eHA(j)},jHA=()=>HtA().removeItem(PtA),UI=()=>{let A=HtA().getItem(PtA);return A?new Map(JSON.parse(atob(A))):new Map},eHA=A=>{HtA().setItem(PtA,btoa(JSON.stringify([...A])))},HtA=()=>qe.resolve(Gzj);function bzj(){let A=Xo();return Number.parseInt(A,10)||0}function Uo(A,j){let{host:e}=new URL(A),t="beta",r=!1;return new LA.Context({host:e,shouldResetWhenSessionExpires:!1,server:e.split(".").slice(1).join("."),inWebView:!0,lang:YA().language,opua:{client:{shortCode:q.ClientShortCode.OnePasswordExtension,buildNum:bzj(),channel:r?"dev":t,commitHash:"096f51fd3813".substring(0,7)},deviceUuid:j}})}var ts=new ht("\u26F3\uFE0F Feature flags"),GF=class A{constructor(){this.compileTimeFlags=A.getCompileTimeFlags()}static getCompileTimeFlags(){return new Set}};var TtA="account-feature-flags",g5=class extends GF{constructor(){super();this.storage=vj;this.accountBasedCompileTimeFlags=new Set;this.cache=new Map,e7.forEach(e=>{this.compileTimeFlags.has(e)&&this.accountBasedCompileTimeFlags.add(e)})}async initializeCache(){(await this.getFeaturesFromStorage()).forEach((t,r,a)=>{this.cache.set(r,t)})}updateFlag(e,t){let r=this.cache.get(t);if(r===void 0)r=[e];else{let a=r.findIndex(n=>n.name===e.name);a<0?r.push(e):r[a]=e}this.cache.set(t,r),this.updateStorage()}getFlag(e,t){if(this.accountBasedCompileTimeFlags.has(e))return{name:e,enabled:!0,metadata:{isOverridden:!0}};let r=this.cache.get(t)?.find(a=>a.name===e);return r||null}removeFlag(e,t){let r=this.cache.get(t);if(r){let a=r.findIndex(n=>n.name===e);a>=0&&r.splice(a,1),r.length===0?this.cache.delete(t):this.cache.set(t,r),this.updateStorage()}}getAllFlags(e){let t={};for(let a of this.compileTimeFlags.values())t[a]={name:a,enabled:!0,metadata:{isOverridden:!0}};let r=this.cache.get(e)||[];for(let a of r)Object.prototype.hasOwnProperty.call(t,a.name)||(t[a.name]=a);return Object.values(t)}removeAllFlags(e){this.cache.delete(e),this.updateStorage()}get accounts(){return this.cache.keys()}async getFeaturesFromStorage(){await this.storage.init();let e=this.storage.getItem(TtA);return e?new Map(JSON.parse(e)):new Map}updateStorage(){this.cache.size===0?this.storage.removeItem(TtA):this.storage.setItem(TtA,JSON.stringify([...this.cache]))}getCache(){return this.cache}};var KtA="pre-registration-features",tHA="pre-registration-feature-updates",h5=class extends GF{constructor(){super();this.storage=vj;this.preRegCompileTimeFlags=new Set;this.cache=new Map,gF.forEach(e=>{this.compileTimeFlags.has(e)&&this.preRegCompileTimeFlags.add(e)})}async initializeCache(){let e=await this.getFeaturesFromStorage();this.cache=e;let t=Array.from(e.keys());ts.info(`Loading pre-registration flags from persistent storage:
			${t.join(", ")}`)}getFlag(e){if(this.preRegCompileTimeFlags.has(e))return{name:e,enabled:!0,metadata:{isOverridden:!0}};let t=this.cache.get(e);return t||null}updateFlag(e){this.cache.set(e.name,e),this.updateStorage()}removeFlag(e){this.cache.delete(e),this.updateStorage()}removeAllFlags(){this.cache.clear(),this.updateStorage()}async getFeaturesFromStorage(){await this.storage.init();let e=this.storage.getItem(KtA);return e?new Map(JSON.parse(e)):new Map}getLastUpdated(){let e=this.storage.getItem(tHA);if(e){let t=parseInt(e,10);return Number.isInteger(t)?t:null}else return null}setLastUpdated(){this.storage.setItem(tHA,Date.now().toString())}getCache(){return this.cache}updateStorage(){this.cache.size===0?this.storage.removeItem(KtA):this.storage.setItem(KtA,JSON.stringify([...this.cache]))}};var rs=W(aA()),rHA=rs.exact(rs.type({name:rs.literal("testVariant"),value:rs.intersection([rs.type({description:rs.string,showButton:rs.boolean}),rs.partial({optionalField:rs.string})])}));var aHA={testVariant:rHA};var q5=W(Dn()),Dk=W(aA()),Rmt=new Dk.Type("NonEmptyVariantPayload",Dk.unknown.is,(A,j)=>{let e=Dk.string.validate(A,j);if((0,q5.isLeft)(e))return e;try{let t=JSON.parse(e.right);return Object.keys(t).length>0?Dk.success(t):Dk.failure(A,j,"Failed to decode: Variant object must have at least 1 key/value pair.")}catch(t){return Dk.failure(A,j,JSON.stringify(t))}},JSON.stringify);var nHA=(A,j)=>{let e=aHA[A],t={name:j.name,value:JSON.parse(j.value)},r=e.decode(t);if((0,q5.isLeft)(r))throw new Error(`Failed to validate variant: ${r.left.join(", ")}`);return r.right};var yzj=1e3*60*60*6,xi=class{constructor(){this.hasPreRegistrationFlag=j=>{let e=this.preRegStore.getFlag(j);return e?e.enabled:!1};this.accountBasedStore=new g5,this.preRegStore=new h5,ts.info("Initialized feature flags manager.")}anyAccountHasFlag(j,e){return this.firstAccountWithFlag(j)!==void 0}firstAccountWithFlag(j){let e=this.accountBasedStore.accounts;for(let t of e){let r=this.accountBasedStore.getFlag(j,t);if(r&&r.enabled)return t}}accountHasFlag(j,e,t){let r=this.accountBasedStore.getFlag(e,j);return r?r.enabled:!1}getAllFlagsForAccount(j,e){return this.accountBasedStore.getAllFlags(j)}async updateFlagsForAccount(j,e,t){let r=await this.accountBasedStore.getFeaturesFromStorage(),a=new Set(r.get(j)?.map(o=>o.name)),n=new Set;this.accountBasedStore.removeAllFlags(j);for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;a.delete(o)||n.add(o);let i=e[o];this.accountBasedStore.updateFlag({name:o,enabled:i?.enabled??!1,metadata:{isOverridden:!1,...i?.variant&&{variantPayload:i?.variant}}},j)}ts.info(`Updating account-based flags in persistent storage:
			AccountUuid: ${j}
			Downloaded Flags: ${JSON.stringify(e)}
			Updated Flags:
			  - Removed: ${JSON.stringify([...a])}
			  - Added: ${JSON.stringify([...n])}`)}async updatePreRegistrationFlags(j,e){let t=await this.preRegStore.getFeaturesFromStorage(),r=new Set(t.keys()),a=new Set;this.preRegStore.removeAllFlags();for(let n in j){if(!Object.prototype.hasOwnProperty.call(j,n))continue;r.delete(n)||a.add(n);let o=j[n];this.preRegStore.updateFlag({name:n,enabled:o?.enabled??!1,metadata:{isOverridden:!1,...o?.variant&&{variantPayload:o?.variant}}})}this.preRegStore.setLastUpdated(),ts.info(`Updating pre-registration flags in persistent storage:
					Downloaded Flags: ${JSON.stringify(j)}
					Updated Flags:
						- Removed: ${JSON.stringify([...r])}
						- Added: ${JSON.stringify([...a])}`)}shouldUpdatePreRegFeatures(j){let e=this.preRegStore.getLastUpdated();return Date.now()-(e??0)>yzj}removeAccount(j,e){ts.info(`Cleared flags for account ${j}`),this.accountBasedStore.removeAllFlags(j),globalThis.dispatchEvent(new Event(On))}devToggleAccountFeature(j,e){let t=!this.anyAccountHasFlag(j);for(let r of this.accountBasedStore.accounts){let a=this.accountBasedStore.getFlag(j,r);this.accountBasedStore.updateFlag({name:j,enabled:t,metadata:{isOverridden:!0,...a?.metadata?.variantPayload&&{variantPayload:a?.metadata?.variantPayload}}},r)}globalThis.dispatchEvent(new Event(On)),ts.info(`Toggled flag ${j} for all accounts. New value: ${t}`)}devTogglePreRegFeature(j,e){let t=this.preRegStore.getFlag(j),r=!t?.enabled||!1;this.preRegStore.updateFlag({name:j,enabled:r,metadata:{isOverridden:!0,...t?.metadata?.variantPayload&&{variantPayload:t?.metadata?.variantPayload}}}),globalThis.dispatchEvent(new Event(On)),ts.info(`Toggled pre-registration flag ${j}. New value: ${r}`)}async initializeFeatureFlagsCache(j){await this.accountBasedStore.initializeCache(),await this.preRegStore.initializeCache()}getAllAccountBasedFlags(j){return this.accountBasedStore.getCache()}getAllPreRegistrationFlags(j){return this.preRegStore.getCache()}getAccountBasedFeatureVariant(j,e,t){let r=this.accountBasedStore.getFlag(e,j)?.metadata?.variantPayload;return oHA(e,r,t)}getPreRegistrationVariant(j,e){let t=this.preRegStore.getFlag(j)?.metadata?.variantPayload;return oHA(j,t,e)}};n6([xk],xi.prototype,"anyAccountHasFlag",1),n6([xk],xi.prototype,"firstAccountWithFlag",1),n6([xk],xi.prototype,"accountHasFlag",1),n6([xk],xi.prototype,"getAllFlagsForAccount",1),n6([IK],xi.prototype,"updateFlagsForAccount",1),n6([IK],xi.prototype,"updatePreRegistrationFlags",1),n6([xk],xi.prototype,"shouldUpdatePreRegFeatures",1),n6([xk],xi.prototype,"removeAccount",1),n6([xk],xi.prototype,"devToggleAccountFeature",1),n6([xk],xi.prototype,"devTogglePreRegFeature",1),n6([IK],xi.prototype,"initializeFeatureFlagsCache",1),n6([xk],xi.prototype,"getAllAccountBasedFlags",1),n6([xk],xi.prototype,"getAllPreRegistrationFlags",1);var oHA=(A,j,e)=>{try{return j?nHA(e,j):void 0}catch(t){ts.error(`Failed to validate variant payload for feature ${A}`,t);return}};var hj=new xi,iHA=async(A,j)=>A6.asyncObserve("collectFeatureFlags","featureFlags",async e=>Promise.all(A.map(async t=>{let r=t.uuid;await A6.asyncObserve("getFeatureFlags","featureFlags",async a=>t.getFeatureFlags(a).then(async n=>hj.updateFlagsForAccount(r,n,{componentName:"featureFlags",span:a})).catch(n=>{ts.error(`Failed to retrieve flags from server: ${n}`)}),e)})).then(()=>{globalThis.dispatchEvent(new Event(On))}),j),sHA=async(A,j)=>{try{if(hj.shouldUpdatePreRegFeatures()){let e=await A6.asyncObserve("downloadPreRegFlagsFromServer","featureFlags",async t=>$zj(gF,A,t),j);await hj.updatePreRegistrationFlags(e,{componentName:"featureFlags"})}}catch(e){ts.error(`Failed to retrieve preregistration flags from server: ${e instanceof Error?e.message:"unknown error"}`)}};function X7(){let A=Object.keys(wm),j=Object.keys(ytA),e={};for(let t of A){let r=hj.anyAccountHasFlag(t);e[t]=r}for(let t of j){let r=hj.hasPreRegistrationFlag(t);e[t]=r}return e}function StA(){let A={accountBased:{},preRegistration:{}};return gF.forEach(j=>{A.preRegistration[j]=hj.hasPreRegistrationFlag(j)}),e7.forEach(j=>{A.accountBased[j]=hj.anyAccountHasFlag(j,{componentName:"featureFlags"})}),A}var lHA=()=>hj.getAllAccountBasedFlags(),$zj=async(A,j,e)=>{let t=Uo("https://my.1password.com",j);return(await A6.asyncObserve("b5.action.getPreAuthFeatures","featureFlags",async a=>LA.getPreAuthFeatures(t,A,a.traceId,a.spanId),e)).features.reduce((a,n)=>(gF.includes(n.name)?a[n.name]={enabled:!0,variant:n.variantPayload}:ts.warn("Non-preregistration feature returned from pre-auth endpoint!"),a),{})},v5=()=>{let A=hj.getAllAccountBasedFlags();if(A.size===0)return[];let j=Array.from(A.values()).map(r=>new Set(r.filter(a=>a.enabled).map(a=>a.name))),e=j[0];if(j.length===1)return Array.from(e);let t=j.slice(1);for(let r of t)e=new Set([...e].filter(a=>r.has(a)));return Array.from(e)};var erA=W(ArA());var Hm=class{constructor(){this.policies={},this.listeners=[]}async initializePolicies(j,e){for(let t of j)try{let r;if(!t.client||e?.skipFetch)r=await _A.getDatabase().getAccountPolicies(t.uuid);else{let a=await t.client.fetchPolicies();r=a.policies,await _A.getDatabase().saveAccountPolicies(t.uuid,r),this.setPolicyVersion(t.uuid,a.version)}this.policies[t.uuid]=r.map(a=>({policyName:a.policyName,definition:a.definition}))}catch(r){console.error("Failed to initialize policies for account",{account:t.uuid,err:r})}return await this.notifyListeners(),Object.values(this.policies).flat()}async effectivePolicies(){let j={};for(let[e,t]of Object.entries(this.policies)){j[e]=[];for(let r of t){switch(r=(0,erA.default)(r),r.policyName){case"auto-lock":r.definition.enabled=r.definition.enabled&&hj.accountHasFlag(e,"b5x-auto-lock-policies");break;case"extension-allowed":r.definition.enabled=r.definition.enabled&&hj.accountHasFlag(e,"b2b-extension-first-guided-setup");break;case"reporting":case"release-channels":case"ssh-bookmarks":case"cli-integration":case"allow-maps":case"app-launcher-allowed":case"restrict-failed-login-attempts":case"Unsupported":break;default:ue(r)}j[e].push(r)}}return(await tA.calculateEffectivePolicies(j)).filter(e=>e.policy.definition?.enabled===!0)}getAllPoliciesForAccount(j){return this.policies[j]||[]}getPolicyForAccount(j,e){return this.getAllPoliciesForAccount(j).find(t=>t.policyName===e)}async resolveSettings(j){let e=(0,erA.default)(j),t={},r=await this.effectivePolicies();for(let{account_uuid:a,policy:n}of r){let{policyName:o}=n;switch(o){case"auto-lock":e.autoLockMinutes=n.definition.lockAfterIdleTimeMin,e.autoLockEnabled=!0,t.autoLockMinutes=a,t.autoLockEnabled=a;break;case"reporting":case"release-channels":case"ssh-bookmarks":case"cli-integration":case"allow-maps":case"app-launcher-allowed":case"restrict-failed-login-attempts":case"extension-allowed":case"Unsupported":continue;default:ue(o)}}return Object.keys(t).length>0&&(e.managedSettings=t),e}subscribe(j){this.listeners.push(j)}unsubscribe(j){this.listeners=this.listeners.filter(e=>e!==j)}async notifyListeners(){let j=await this.effectivePolicies();this.listeners.forEach(e=>e(j))}async setPolicyVersion(j,e){await _A.getDatabase().savePoliciesVersionForAccount(j,e)}async getPoliciesVersion(j){return(await _A.getDatabase().findAccountByUUID(j))?.policiesVersion??0}async isEmpty(){return Object.keys(this.policies).length!==0?!1:(await _A.getDatabase().getAllPolicies()).length===0}static isValidAccountType(j){return j===dt.Type.Business}},jrA,bn=()=>(jrA||(jrA=new Hm),jrA);var ZHA=W(Dn()),ATA=W(Yk()),V7=W(aA());var trA="lastUserActivity";async function rrA(){if(ut()){let A=await He.sendNativeMessage("Safari-iOS-Lock-Monitor",{message:"getSystemBootTime"});if(A.isOk())return JSON.parse(A.value)}return Date.now()}async function B6(){vj.setItem(trA,(await rrA()).toString())}function I5(){vj.removeItem(trA)}function arA(){return parseInt(vj.getItem(trA)??"0",10)}var nrA=V7.type({state:V7.union([V7.literal("active"),V7.literal("idle"),V7.literal("locked")]),ts:V7.number}),D5="lockMonitor",orA="lastIdleQueryTime",irA="cachedQueryState",Tm=6e4,QHA=Tm;var Ok=A=>[`%c[LM] ${A}`,"color:orange"],Pk=class{constructor(){this.autoLockOnDeviceSleep=!0;this.autoLockTimeInMinutes=1;this.currentUserState="active";this.alarmIntervalInMinutes=1;this.heartbeatIntervalInMs=15*1e3;this.monitorHeartbeat=null;this.hasPostedNotification=!1;this.postShouldLockNotification=()=>{this.hasPostedNotification||(this.hasPostedNotification=!0,console.info(...Ok("User went Idle. Posting lock notification.")),globalThis.dispatchEvent(new Event(zg)))};this.queryState=async(j=QHA)=>{let e=Date.now(),t=await this.shouldLock(j,e);t&&this.postShouldLockNotification();let r=t?"locked":"active";return this.setCachedQueryState(r),r};this.queryCachedState=()=>this.getCachedQueryState()?.state??"locked";this.shouldLock=async(j=QHA,e=Date.now())=>{let t=!1;if(j===ks*Tm)return t;await this.getCurrentUserStatus()!=="active"&&(t=!0,console.info(...Ok(`User deemed inactive due to system inactivity at ${new Date().toString()}.`)));let a=e-this.getLastIdleQueryTime(e),n=j*2;return!t&&this.autoLockOnDeviceSleep&&a>n&&(console.info(...Ok(`User deemed inactive due to last idle query timeout at ${new Date().toString()}. timeSinceLastIdleQuery: ${a} = intervalTime: ${j}`)),t=!0),this.setLastIdleQueryTime(e),t};this.handleAlarm=j=>{j.name===D5&&this.queryState(this.alarmIntervalInMinutes*Tm)};this.configInfo=()=>`minutes=${this.autoLockTimeInMinutes}, lock on sleep=${this.autoLockOnDeviceSleep}`;this.getStorage=()=>ce}async start(){let j=Date.now();this.setCachedQueryState("active"),this.hasPostedNotification=!1,this.queryState(this.autoLockTimeInMinutes*Tm),this.startHeartbeat(),await this.startAlarm(),console.info(...Ok(`Started ${this.name} at ${j} (${this.configInfo()}).`))}async stop(){await this.stopAlarm(),this.stopHeartbeat(),I5(),this.clearCachedQueryState(),this.clearLastIdleQueryTime(),console.info(...Ok("Stopped."))}updateAutoLockSettings(j,e){this.autoLockTimeInMinutes=j,this.autoLockOnDeviceSleep=e,console.info(...Ok(`Updated autolock settings (${this.configInfo()})`))}async startAlarm(){await browser.alarms.get(D5).then(j=>{j||browser.alarms.create(D5,{delayInMinutes:this.alarmIntervalInMinutes,periodInMinutes:this.alarmIntervalInMinutes})}),browser.alarms.onAlarm.hasListener(this.handleAlarm)||browser.alarms.onAlarm.addListener(this.handleAlarm)}async stopAlarm(){return browser.alarms.clear(D5).then(j=>{j?console.info(...Ok("Lock monitor alarm cleared")):console.error("[LM] Lock monitor stopped, without clearing alarm. \u{1F6A8}")}).then(()=>{browser.alarms.onAlarm.removeListener(this.handleAlarm)})}startHeartbeat(){this.monitorHeartbeat||(this.monitorHeartbeat=globalThis.setInterval(()=>{this.queryState(this.heartbeatIntervalInMs)},this.heartbeatIntervalInMs))}stopHeartbeat(){this.monitorHeartbeat&&globalThis.clearInterval(this.monitorHeartbeat)}getLastIdleQueryTime(j=Date.now()){let e=this.getStorage().getItem(orA);return e?parseInt(e,10):j}setLastIdleQueryTime(j=Date.now()){this.getStorage().setItem(orA,j.toString())}clearLastIdleQueryTime(){this.getStorage().removeItem(orA)}getCachedQueryState(){let j=this.getStorage().getItem(irA);if(j)try{return(0,ATA.pipe)(j,JSON.parse,nrA.decode,ZHA.fold(()=>{throw new Error},nrA.encode))}catch{console.error("[LM] CachedQueryState is corrupt, discarding."),this.clearCachedQueryState();return}}setCachedQueryState(j){let e=nrA.encode({state:j,ts:Date.now()});this.getStorage().setItem(irA,JSON.stringify(e))}clearCachedQueryState(){this.getStorage().removeItem(irA)}};var YI=class extends Pk{constructor(e){super();this.desktopApp=e;this.name="Desktop Lock Monitor";this.configInfo=()=>"Connected to desktop app";this.updateAutoLockSettings=()=>{};this.getCurrentUserStatus=async()=>(await this.desktopApp.lockState())?.lockState===qp.Unlocked?"active":"locked";this.queryState=async()=>{let e=await this.getCurrentUserStatus();return this.setCachedQueryState(e),e!=="active"&&(console.info(...Ok("User went inactive. Posting lock notification.")),this.postShouldLockNotification()),e}}async start(){this.setLastIdleQueryTime(),await super.start()}},jTA=A=>A instanceof YI;var QI="LAST_KNOWN_ACTIVITY_TIMESTAMP",O5=4*60,P5=60,C5=class extends Pk{constructor(e,t){super();this.autoLockTimeInMinutes=e;this.autoLockOnDeviceSleep=t;this.name="Extension Lock Monitor";this.getCurrentUserStatus=async()=>{if(this.autoLockTimeInMinutes===ks)return"active";let e=Date.now();if(this.autoLockTimeInMinutes>O5){let r=parseInt(ce.getItem(QI)??"0",10);if(r===0)return ce.setItem(QI,e.toString()),"active";if((e-r)/Tm>=this.autoLockTimeInMinutes)return"idle"}if(typeof browser?.idle?.queryState!="function")return"active";let t=await browser.idle.queryState(Math.min(this.autoLockTimeInMinutes,O5)*P5);switch(t){case"active":return ce.setItem(QI,e.toString()),t;case"idle":return t;case"locked":return this.autoLockOnDeviceSleep?t:parseInt(ce.getItem(QI)??"0",10)+this.autoLockTimeInMinutes*Tm<=e?"idle":"active";default:ue(t)}};this.idleListener=this.idleListener.bind(this),this.autoLockTimeInMinutes=e,this.updateAutoLockSettings(e,t)}async start(){return typeof browser?.idle?.setDetectionInterval=="function"&&(this.autoLockTimeInMinutes!==ks&&browser.idle.setDetectionInterval(this.autoLockTimeInMinutes*P5),browser.idle.onStateChanged.addListener(this.idleListener)),super.start()}async stop(){return ce.removeItem(QI),typeof browser?.idle?.onStateChanged?.removeListener=="function"&&browser.idle.onStateChanged.removeListener(this.idleListener),super.stop()}updateAutoLockSettings(e,t){if(typeof browser?.idle?.setDetectionInterval!="function"){this.autoLockTimeInMinutes=e,super.updateAutoLockSettings(e,t);return}e!==this.autoLockTimeInMinutes&&e!==ks&&browser.idle.setDetectionInterval(e*P5),this.autoLockTimeInMinutes=e;let r=e>O5?O5:e;r!==ks&&browser.idle.setDetectionInterval(r*P5),super.updateAutoLockSettings(e,t)}idleListener(e){e!=="active"&&this.autoLockOnDeviceSleep&&this.postShouldLockNotification()}};var H5=class extends Pk{constructor(e){super();this.autoLockTimeInMinutes=e;this.name="Safari iOS Lock Monitor";this.autoLockOnDeviceSleep=!1;this.getCurrentUserStatus=async()=>{if(this.autoLockTimeInMinutes===ks)return"active";let t=await rrA()-arA(),n=this.autoLockTimeInMinutes*60*1e3,o=n-t;return console.warn("[LM] Lock countdown: "+o+"ms"),t<n?(B6(),"active"):(I5(),"idle")};this.queryState=async(e=Tm)=>{await this.updateSettingsFromApp();let t=await this.shouldLock(e);t?this.postShouldLockNotification():srA();let r=t?"locked":"active";return this.setCachedQueryState(r),r};this.updateSettingsFromApp=this.updateSettingsFromApp.bind(this)}async start(){await this.updateSettingsFromApp(),arA()||B6(),await super.start()}startHeartbeat(){}async updateSettingsFromApp(){(await Km()).match(({settings:{requireAuthenticationAfter:t}})=>{t!==this.autoLockTimeInMinutes&&this.updateAutoLockSettings(t,this.autoLockOnDeviceSleep)},()=>{console.warn("[LM] Unable to connect to OPI; autolock settings may be stale.")})}};var tJj=60,T5=class A extends Pk{constructor(e,t){super();this.autoLockTimeInMinutes=e;this.autoLockOnDeviceSleep=t;this.name="Safari macOS Lock Monitor";this.getCurrentUserStatus=async()=>this.autoLockTimeInMinutes===ks?"active":browser.runtime.sendNativeMessage("",{name:"query-active-status",data:JSON.stringify({maximumIdleTimeInSeconds:this.autoLockTimeInMinutes*tJj})}).then(e=>e).catch(()=>(console.error("[LM] Unable to communicate with native app, locking."),"locked"));this.port=browser.runtime.connectNative(""),this.onSweMessage=this.onSweMessage.bind(this)}async start(){this.port.onMessage.addListener(this.onSweMessage),await super.start()}async stop(){this.port.onMessage.removeListener(this.onSweMessage),await super.stop()}startHeartbeat(){}onSweMessage(e){A.isLockMonitorNotification(e)&&(console.info(...Ok(`Received lock notification. Lock reason: ${e.userInfo.message.type}`)),this.postShouldLockNotification())}static isLockMonitorNotification(e){return!!(e&&typeof e=="object"&&"name"in e&&e.name&&e.name==="lockMonitorNotification"&&"userInfo"in e&&typeof e.userInfo=="object"&&e.userInfo&&"message"in e.userInfo&&typeof e.userInfo.message=="object")}};async function eTA(A,j,e){let t=j;return t!==ks&&(t=Math.max(j,WO)),A&&await A.hasAccounts()?new YI(A):f6()?new T5(t,e):ut()?new H5(t):new C5(t,e)}var ZI=class{constructor(){this._lockMonitor=null,this._logger=new ht("\u{1F512} Lock monitor"),bn().subscribe(j=>{(async()=>{let e=j.find(r=>r.policy.policyName==="auto-lock");if(!e)return;this._lockMonitor||await this.startAutoLockMonitor();let t=YA();this._lockMonitor?.updateAutoLockSettings(e.policy.definition.lockAfterIdleTimeMin,t.autoLockOnDeviceSleep)})()})}get lockMonitor(){return this._lockMonitor}async startAutoLockMonitor(){let j=YA();if(!j.autoLockEnabled)return;let e=ie.desktopConnectionManager?.getDesktopApp();this._lockMonitor&&e&&!jTA(this._lockMonitor)&&await this.stopAutoLockMonitor(),this._lockMonitor||(this._lockMonitor=await eTA(e,j.autoLockMinutes,j.autoLockOnDeviceSleep)),this._logger.debug("Starting auto lock monitor"),this._lockMonitor.start()}async stopAutoLockMonitor(){this._lockMonitor&&(this._logger.debug("Stopping auto lock monitor"),await this._lockMonitor.stop(),this._lockMonitor=null)}},Fl=qe.resolve(ZI);var W7=()=>!It(),lrA=async(A,j,e,t)=>{let r=e?`${e.str}: `:"",a=t?` (${t.str})`:"";`${r}${j.str}${a}`;let n;try{n=await A()}catch(o){let i=`${r}function "${j.str}": failed${a}`;throw o}return`${r}${j.str}${a}`,n};function rJj(A){return Math.round(A*100)/100}async function tTA(A,j){if(j.length===0)return TA(new Error("A description of the function to execute, measure and log was not found."));let e=j.toLowerCase().replace(" ","-");performance.mark(e);let t;try{t=await A()}catch(a){return performance.clearMarks(e),TA(a)}let r=performance.measure(j,e).duration;return console.info(`Performance diagnostic: "${j}" took ${rJj(r)}ms to execute.`),Oj(t)}var crA=5*60*1e3,K5;function rTA(A){K5=aJj(A)}function drA(A){if(K5)return K5(A)}function aJj(A){let j={password:A};return setTimeout(()=>{j.password=void 0},crA),e=>{let t=j.password;return e&&t?!0:(j.password=void 0,t)}}var S5=class{constructor(){this._resolveAuthCompleted=j=>({});this._rejectAuthCompleted=()=>({});this._authCompleted=new Promise((j,e)=>{this._resolveAuthCompleted=j,this._rejectAuthCompleted=t=>e(t?.reason)}),this._timeout=setTimeout(()=>{this._removeDuoTab(),this._rejectAuthCompleted({reason:`Did not receive code within ${crA}ms time out`})},crA)}async beginAuth(j){this._initTabListeners(),await this._spawnDuoTab(j)}cancelAuth(){this._removeDuoTab(),this._rejectAuthCompleted({reason:"Duo Auth cancelled"}),K5=void 0}_initTabListeners(){let j=this._signinCallback.bind(this),e=this._removedCallback.bind(this);browser.tabs.onUpdated.addListener(j),browser.tabs.onRemoved.addListener(e),this._removeTabListeners=()=>{browser.tabs.onUpdated.removeListener(j),browser.tabs.onRemoved.removeListener(e)}}async _spawnDuoTab(j){let e=j.duo?.authURL;if(!e)throw new Error("No auth URL present in MFA response");this._tabId=await AD(e)}_signinCallback(j,e){if(j===this._tabId&&e.url?.includes("duo-sign-in")){this._removeTabListeners&&this._removeTabListeners(),this._removeDuoTab();try{let t=new URL(e.url),r=nJj(t);this._resolveAuthCompleted(r)}catch{this._rejectAuthCompleted({reason:"Could not parse duo_code from tab"})}finally{clearTimeout(this._timeout)}}}_removedCallback(j){j===this._tabId&&(this._tabId=void 0,this._rejectAuthCompleted({reason:"Duo MFA tab closed before code was returned"}))}async completed(){return this._authCompleted}async _removeDuoTab(){if(this._tabId){try{await browser.tabs.remove(this._tabId)}catch(j){console.warn("[Duo MFA] Failed to close Duo MFA tab:",j)}this._tabId=void 0}}};function nJj(A){return A.searchParams.get("duo_code")||""}var jD={UnhandledSLSMessage:"UnhandledSLSMessage",PasswordTimeboxUnavailable:"PasswordTimeboxUnavailable",DuoAuthenticatorUndefined:"DuoAuthenticatorUndefined"};async function urA(){let j=(await Promise.all(_.getAccountHandlers.map(async e=>{try{return e.shouldShowFreeFamilyAccountNotification()}catch{return!1}}))).indexOf(!0);return j!==-1?_.getAccountHandlers[j]:void 0}function prA(){return _.getAccountHandlers.find(A=>{try{return A.shouldShowEmailPreferencesNotification()}catch{return!1}})}function aTA(){Promise.all(_.getAccountHandlers.filter(A=>A.isUnlocked).map(async A=>A.waitForClient().catch(()=>{}))).then(async()=>{let A=await urA();krA("free-family",!!A);let j=prA();krA("email-preferences",!!j)})}var oJj=/\s/g,iJj=/\W/g,mrA={plain(A){return A},hyphens(A){return A.trim().replace(oJj,"-").replace(iJj,"-")}};var sJj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lJj=A=>A.replace(/[&<>"']/g,j=>sJj[j]),nTA=A=>{let j={},e={};for(let t in A)if(A.hasOwnProperty(t)){let r=A[t];typeof r=="function"?e[t]=r:typeof r=="string"?j[t]=lJj(r):j[t]=r}return[j,e]},ErA=(A,j)=>{let e=Object(A);for(let t in j)Object.prototype.hasOwnProperty.call(j,t)&&(e[t]=j[t]);return e};var BrA={short:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},dateTime:{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}},grA={currency:{style:"currency",currency:"USD"},decimal:{style:"decimal"},percent:{style:"percent"}};function M5(A){let j={};return function(e,t){let r=Array.prototype.slice.call(arguments),a=e+"-"+JSON.stringify(t);if(a in j)return j[a];let n=new(Function.prototype.bind.call(A,null,...r));return j[a]=n,n}}var oTA={OPEN:"{",CLOSE:"}"};function hrA(A,j){if(!j)return A;let e="",t=[];for(let r=0;r<A.length;r++)switch(A.charAt(r)){case oTA.OPEN:t.push(e),e="";break;case oTA.CLOSE:t.push(j[e]),e="";break;default:e+=A.charAt(r)}return t.push(e),t.join("")}var qrA="wrap",vrA;function xrA(A,j){typeof vrA>"u"&&(vrA=new DOMParser);let e=vrA.parseFromString(`<${qrA}>${A}</${qrA}>`,"text/xml");if(!e.firstChild||e.firstChild.nodeName!==qrA)throw new Error("Could not parse XML string");return iTA(e.firstChild,j,!0)}var cJj=1,dJj=3;function iTA(A,j,e=!1){if(A.nodeType===dJj)return A.nodeValue?[A.nodeValue]:[];if(A.nodeType===cJj){let r=Array.prototype.slice.call(A.childNodes).reduce((a,n)=>[...a,...iTA(n,j)],[]);return e||!j[A.nodeName]?r:[j[A.nodeName](...r)]}else return[]}var sTA="en",kJj=(A,j,e)=>{let t=A[j],r=A[sTA];return t&&t[e]?t[e]:r&&r[e]?r[e]:""},uJj=A=>{if(typeof Intl>"u"){let n=()=>{throw new Error("Missing Intl")};return{date:n,number:n}}let j=()=>{let n=Intl.DateTimeFormat;function o(){var i;let s=Array.prototype.slice.apply(arguments),l=typeof s?.[0]=="string"?s[0]:"en-US",d=typeof((i=s?.[1])===null||i===void 0?void 0:i.timeZone)=="string"?s[1].timeZone:"America/Toronto";return n.apply(this,[l,d])}return o.prototype=n.prototype,o};try{Intl.DateTimeFormat(),new Date().toLocaleString(),new Date().toLocaleDateString(),new Date().toLocaleTimeString()}catch{Date.prototype.toLocaleString=Date.prototype.toString,Date.prototype.toLocaleDateString=Date.prototype.toDateString,Date.prototype.toLocaleTimeString=Date.prototype.toTimeString,Intl.DateTimeFormat=j()}let e=M5(Intl.DateTimeFormat),t=M5(Intl.NumberFormat);return{date:(n,o="long",i=A())=>{let s=BrA[o]||BrA.long;return e(i,s).format(n)},number:(n,o="decimal",i=A())=>{let s=grA[o]||grA.decimal;return t(i,s).format(n)}}},lTA=()=>{let A={},j=sTA,e=mrA.hyphens,t=(s={})=>(A=s.messages||A,j=s.locale||j,e=s.idGenerator||e,{messages:A,locale:j,idGenerator:e}),r=s=>e(s),a=(s,l={},d="")=>{let k=kJj(A,j,s)||d||s;return typeof k=="string"?hrA(k,l):k(l)},n=(s,l={},d="")=>a(d||r(s),l,s);return ErA(n,{$:(s,l={},d="")=>{let[k,u]=nTA(l),m=n(s,k,d);return xrA(m,u)},generateId:r,locale:()=>j,lookup:a,set:t})},cTA=()=>{let A=lTA(),j=uJj(A.locale);return ErA(A,j)};var nA=cTA();var dTA={type:"free-family",limit:{type:"ONCE"},onClick:()=>{as({id:"free-family-alert",title:nA("Do you have an existing account?"),text:nA("You can choose to link an existing family account or create a new one."),primaryAction:{id:"free-family-sign-up",label:nA("Sign Up"),destructive:!1,action:{type:"RedeemFreeFamily",content:Wg.SignUp}},secondaryAction:{id:"free-family-link-existing",label:nA("Link Existing"),destructive:!1,action:{type:"RedeemFreeFamily",content:Wg.LinkExisting}},cancelAction:nA("Cancel")})},hideOnClick:!1};async function kTA(A){let j=await urA();if(j&&j.client?.CTX){let e=await j.getFreeFamilyCode();switch(A.data.option){case Wg.LinkExisting:await He.openTab({url:`https://start.${j.client.CTX.config.server}/billing?ref=inproduct-b5x-business-family&f=${e}`});break;case Wg.SignUp:await He.openTab({url:`https://start.${j.client.CTX.config.server}/sign-up/family?ref=inproduct-b5x-business-family&f=${e}`});break}ng("free-family")}}var ua=W(Ik());var uTA="/assets/png/avatar-business-default-OYJAR4FY.png";var pTA="/assets/png/avatar-family-default-HYPXNDYE.png";var mTA="/assets/png/avatar-individual-default-NHZIYQUS.png";var frA="/assets/png/avatar-vault-default-3MEYO6T2.png";function _5(A,j,e){if(A&&e.baseAvatarURL){if(A.avatar)return og(e.baseAvatarURL,e.uuid,A.avatar);if(A.type===Q_&&j&&j.avatar)return og(e.baseAvatarURL,e.uuid,j.avatar);if(A.type===Z_&&e.avatar)return og(e.baseAvatarURL,e.uuid,e.avatar)}return frA}function ETA(A){return A.avatar&&A.baseAvatarURL?og(A.baseAvatarURL,A.uuid,A.avatar):gTA(A.type)}function BTA(A,j,e,t,r,a){return A&&a?og(a,r,A):t===Q_&&j&&a?og(a,r,j):t===Z_&&e&&a?og(a,r,e):frA}function eD(A,j,e,t){return e&&j?og(j,A,e):gTA(t)}function gTA(A){return A===nx?uTA:A===ox?pTA:mTA}function og(A,j,e){return e[0]==="/"?FtA(A,e):FtA(A,j,e)}var Y7=(A,j)=>{if(!j&&(j=_.getAccountHandlers.find(e=>e.uuid===A),!j))throw new Error("Failed to get account while getAllowedEmailDomainsFromPolicy");return hj.accountHasFlag(A,"b2b-reporting-policy")?bn().getPolicyForAccount(A,"reporting")?.definition?.allowedEmailDomains??[]:j.serveraccount.teamMemberPolicies?.allowedWatchtowerDomains?j.serveraccount.teamMemberPolicies.allowedWatchtowerDomains.split(","):[]};var naA=W(Ik());function IF(A){let j;return j="onepassword8://",A?j+A:j}async function hTA(A){if(A.templateUuid===LsA)return;if(A.cacheInformation?.provider==="brex")return qTA(A);(await gJj(A,"edit-item")).isOk()||(await N5(A,"edit")).isOk()||Q7(A,"edit")}async function L5(A,j){if(ut())return Q7(A);let e=()=>{browser.windows.create({url:chrome.runtime.getURL("/popup/index.html#detached"),type:"popup",...DPA()})};if(A.cacheInformation?.provider==="brex")return e();if((await N5(A,"view")).isErr())switch(j){case"notification":return Q7(A);case"openInNewWindow":return e();default:ue(j)}}async function gJj(A,j){if(ut()){let e=Ij.itemCache?.accountForVaultID(Ua(A.vault));if(!e)return TA("Unable to find account with vault ID");let t=await Gt();return await He.openTab({url:IF(`${j}/?a=${e.uuid}&v=${A.vault.uuid}&i=${A.uuid}`),openerTabId:t?.id}),Oj(void 0)}else return TA("cannot open item in OPI when not on iOS")}async function N5(A,j){let e=Ij.itemCache?.accountForVaultID(Ua(A.vault));if(!e)return TA(void 0);let t=ie.desktopConnectionManager?.getDesktopApp();if(t&&ie.getDesktopAppState().type==="Connected"){let r={accountUuid:e.uuid,vaultUuid:A.vault.uuid,itemUuid:A.uuid},a=!1;if(j==="edit"?a=await t.editItem(r):j==="view"&&(a=await t.viewItem(r)),a)return Oj(void 0)}return TA(void 0)}var Cs="/assets/png/onepassword-128-47NWBQHU.png";var ov={},vTA=(A,j,e)=>{let t=ov[A+j];t&&(t.callback(e),delete ov[A+j]),chrome.notifications.clear(j)};function Sm(A,j,e){ov[A+j]={id:j,type:A,callback:e}}Oe()||(chrome.notifications.onClicked.addListener(A=>vTA("click",A)),chrome.notifications.onButtonClicked.addListener((A,j)=>vTA("buttonClick",A,j)),chrome.notifications.onClosed.addListener(A=>{Object.prototype.hasOwnProperty.call(ov,"click"+A)?delete ov["click"+A]:Object.prototype.hasOwnProperty.call(ov,"buttonClick"+A)&&delete ov["buttonClick"+A]}));async function xTA(A){if(!YA().showNotifications||Oe())return;let t=(await GrA()).incognito?nA("New item saved in 1Password."):nA('"{itemName}" was saved in "{vaultName}".',{itemName:A.title,vaultName:A.vault.name}),r={[Ur]:nA("Credit card"),[q6]:nA("Identity"),[Tl]:nA("API Key"),[Je]:nA("Login")},a=(A.templateUuid&&r[A.templateUuid])??nA("Item"),n="item-saved-"+globalThis.crypto.getRandomValues(new Uint32Array(1)).toString();chrome.notifications.create(n,{type:"basic",iconUrl:Cs,title:nA("{itemType} saved",{itemType:a}),message:t}),Sm("click",n,()=>{L5(A,"notification")})}function fTA(A){if(!YA().showNotifications||Oe())return;let{items:j}=A,e=`watchtower-compromised-item-${new Date().getTime()}`;chrome.notifications.create(e,{type:"basic",iconUrl:Cs,title:nA("Watchtower Alert"),message:nA("A website has been added to Watchtower in {count} of your accounts.",{count:new Set(j.map(t=>t.accountUUID)).size})}),Sm("click",e,async()=>{let t=0;for(let r of new Set(j.map(a=>a.accountUUID))){let a=j.filter(n=>n.accountUUID===r);for(let n of new Set(a.map(o=>o.vaultUUID))){let o=a.filter(i=>i.vaultUUID===n);if(o.length===1){let i=o[0];await z5(n,r,"compromised-logins",i.itemUUID)}else await z5(n,r,"compromised-logins");if(++t===5)return}}})}var GTA="/assets/png/ramp-TWWGW3RM.png";async function $a(A,j=!0,e,t){if(Kt())throw new q.LoggableError({errorClass:E`SaveItemError`,message:E`Unable to save item. 1Password was locked.`});let r;if(e?r=_.findAccountHandlerByUuid(e):r=_.findAccountHandlerByVault(A.vault),!r)throw new q.LoggableError({errorClass:E`SaveItemError`,message:q.logsafe.assertLogSafe(`Unable to save item. Unable to find account for vault: <${A.vault.uuid}>`)});A.itemVersion&&A.itemVersion>0&&(A.updatedAt=new Date);let a=await r.saveItem(A,t);return j&&xTA(a),a}async function FTA(A,j){let e=_.findAccountHandlerByUuid(A);if(!e)throw new q.LoggableError({errorClass:E`SaveItemError`,message:q.logsafe.assertLogSafe(`Unable to find handler for account <${A}> to save new ramp item`)});let t=new Request(GTA),a=await(await fetch(t)).arrayBuffer(),n=await e.client?.uploadFile(a);return j.overview.icons={detail:n},$a(j)}async function ld(A,j,e){let t=_.findAccountHandlerByUuid(A);if(t)return t.getIntegrationProviderAccessToken(j,e)}function R5(A,j,e){_.findAccountHandlerByUuid(A)?.removeProviderAccessToken(j,e)}var vJj={apiUrl:"https://platform.staging.brexapps.com/v2",tokenUrl:"https://accounts.staging.brexapps.com/oauth2/v1/token",dashboardUrl:"https://dashboard.staging.brexapps.com",type:a0.Staging},xJj={apiUrl:"https://platform.brexapis.com/v2",tokenUrl:"https://accounts.brex.com/oauth2/v1/token",dashboardUrl:"https://dashboard.brex.com",type:a0.Production};function fJj(A){return A.endsWith("d0f")}function Mm(A){return fJj(A)?vJj:xJj}async function $TA(){return(await DF()).some(j=>j.canCreateVendorCard)}async function wTA(A,j){try{let e=await LA.getBrexClientInfo(A),t=await LA.requestBrexAccessToken(A,{refreshToken:j}),{accessToken:r,expiresIn:a,refreshToken:n}=t;return Oj({refreshToken:n,accessToken:r,expiresIn:a,context:{clientId:e.clientId,clientSecret:e.clientSecret}})}catch{return console.error("Unable to get an access token for Brex"),TA({type:"RequestError"})}}async function ITA(A,j,e,t){for(let r of j)r.details.sections=[{name:"brex",title:"brex",fields:[{k:"string",n:"accountId",t:"accountId",v:e},{k:"string",n:"refreshToken",t:"refreshToken",v:t}]}],await new Promise(a=>void $a(r,!1,A,a))}async function DTA(A,j,e){try{let t=await fetch(`${A.apiUrl}${j}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return Oj(t)}catch(t){return TA({type:"RequestError",data:t})}}async function OTA(A,j){let e=await tA.getCurrentBrexUser({access_token:j,environment:A.type});return e.type==="Error"?(console.error("Unable to make request:",e.content),TA({type:"RequestError",data:e.content})):Oj(e.content)}async function PTA(A,j,e){let t=await tA.getAllCardsForBrexUser({access_token:j,user_id:e,environment:A.type});return t.type==="Error"?(console.error("Unable to make request for getAllUserCards:",t.content.type),TA({type:"RequestError",data:t.content})):Oj(t.content.filter(r=>r.status==="ACTIVE"))}async function CTA(A,j,e){let t=await OTA(A,j);return t.isErr()?(console.error("Unable to get information about the current user when requesting cards"),TA({type:"RequestError",data:t.error})):Oj((await Promise.all(e.map(async r=>GJj(A,r,t.value.first_name,t.value.last_name,j)))).filter(r=>!!r))}function bTA(A){return A==="CARD"?"vendor":"corporate"}function yTA(A){return`$${A>0?A.toString().slice(0,-2):0}.00`}async function GJj(A,j,e,t,r){try{let a=await FJj(A,j.id,r);if(a.isErr())throw console.error("Failed to get card number details for brex card:",a.error.type),new Error;let{cvv:n,number:o,expiration_date:i}=a.value,s=await tA.getCreditCardType(o),l=parseInt(`${i.year}${i.month.toString().padStart(2,"0")}`,10),d=j.spend_controls?.lock_after_date?Math.floor(new Date(`${j.spend_controls?.lock_after_date} 00:00:00`).getTime()/1e3):null,k=bTA(j.limit_type)==="vendor"?nA("Vendor Card"):nA("Corporate Card"),u="lock after date",m="spend limit",I="billing address",S="None",f=d?{t:u,n:q.generateUUID(),k:"date",v:d.toString(),inputTraits:{autocorrection:"no",autocapitalization:"none"}}:{t:u,n:q.generateUUID(),k:"string",v:S,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}},v=j?.spend_controls?.spend_limit?.amount&&j?.spend_controls?.spend_available?.amount&&j?.spend_controls?.spend_duration?{t:m,n:q.generateUUID(),k:"string",v:`${yTA(j?.spend_controls?.spend_limit?.amount-j?.spend_controls?.spend_available.amount)} / ${yTA(j?.spend_controls?.spend_limit?.amount)} ${(j?.spend_controls?.spend_duration).toLowerCase().replace(/_/g," ")}`,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}}:{t:m,n:q.generateUUID(),k:"string",v:S,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}},P=[{t:"cardholder name",v:`${e} ${t}`,k:"string",n:"cardholder",a:{guarded:"yes"},inputTraits:{keyboard:"Default",autocapitalization:"Words"}},{t:"type",v:s,k:"cctype",n:"type",a:{guarded:"yes"}},{t:"number",v:o,k:"string",n:"ccnum",a:{guarded:"yes",clipboardFilter:"0123456789"},inputTraits:{keyboard:"NumberPad"}},{t:"verification number",v:n,k:"concealed",n:"cvv",a:{guarded:"yes",generate:"off"},inputTraits:{keyboard:"NumberPad"}},{t:"expiry date",v:l,k:"monthYear",n:"expiry",a:{guarded:"yes"}},{t:"valid from",v:"",k:"monthYear",n:"validFrom",a:{guarded:"yes"}},{t:"type",n:q.generateUUID(),k:"string",v:k,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}},f,v],D=[{t:I,n:q.generateUUID(),k:"address",v:{street:j.billing_address?.line2?`${j.billing_address.line1??""} ${j.billing_address?.line2}`:`${j.billing_address?.line1??""}`,city:j.billing_address?.city??"",state:j.billing_address?.state??"",zip:j.billing_address?.postal_code??"",country:j.billing_address?.country??""},inputTraits:{autocorrection:"no",autocapitalization:"Words"}}];return{id:j.id,category:bTA(j.limit_type),card:{templateUuid:Ur,overview:{title:j.card_name??nA("Physical Card"),url:"",ainfo:o,ps:0,pbe:0,pgrng:!1},details:{sections:[{name:"",title:"",fields:P},{name:"",title:"",fields:D}]}}}}catch{console.warn("Unable to create card for brex card",j.id);return}}async function FJj(A,j,e){let t=await DTA(A,`/cards/${j}/pan`,e);if(t.isErr())return console.error("Unable to make request:",t.error.type),TA(t.error);let r=await t.value.json();return Oj(r)}async function HTA(A,j,e){let t=await DTA(A,`/cards/${j}`,e);if(t.isErr())return console.error("Unable to make request:",t.error.type),TA(t.error);try{let r=await t.value.json();return Oj(r)}catch{return console.warn("Unable to parse JSON when getting the card"),TA({type:"RequestError",data:"Unable to parse card JSON"})}}async function TTA(A,j,e,t,r,a,n,o,i){let s=parseInt(`${r}`,10),l=await tA.createBrexVendorCardForUser({access_token:j,card_name:t,account_id:e,limit:s,duration:a.toUpperCase(),reason:n,lock_after_date:i,idempotency_key:o,environment:A});return l.type==="Error"?(console.error("Could not generate new vendor card."),TA({type:"RequestError",data:"Unable to parse card JSON"})):Oj({cardId:l.content.id})}async function qTA(A){let j=_.findAccountHandlerByUuid(ig(A));if(!j)return;let e=await j.getIntegrationCredentials("brex");if(!e||e.length===0)return;let t=await j.getIntegrationProviderAccessToken(e[0].accountId,"brex");if(!t||!t.context)return;if(!A.cacheInformation){console.error("Item was missing cacheInformation in handleEditBrexCard");return}let r=btoa(`Card:${A.cacheInformation.cardId}`),a=Mm(t.context.clientId);He.openTab({url:`${a.dashboardUrl}/card/transactions/yours?card=${r}`})}async function J5(A,j){let e=_.findAccountHandlerByUuid(A);if(!e){console.error("Unable to get account handler");return}return await e.syncBrexCards(),e.items?.find(t=>t.cacheInformation?.provider==="brex"&&t.cacheInformation?.cardId===j)}async function DF(){return(await Promise.all(_.getAccountHandlers.map(async A=>{let[j]=await A.getIntegrationCredentials("brex");if(!j)return;let e=await ld(A.uuid,j.accountId,"brex");if(!e||!e.context)return;let t=await OTA(Mm(e.context.clientId),e.accessToken);if(!t.isErr())return{accountUuid:A.uuid,accountId:j.accountId,refreshToken:j.refreshToken,canCreateVendorCard:t.value.permissions?.create_vendor_cards===s1.Granted}}))).filter(A=>!!A)}function sg(A,j,e){let t=_.findAccountHandlerByUuid(A);if(!t)return TA(new Error(`Attempted to create item for non-existent account: <${A}>`));let r=t.findVaultWithUUIDAndCreatePermission(j);if(!r)return TA(new Error(`Attempted to create item for non-existent vault <${j}> in account <${A}>`));let a=new dA(r);return a.details=e.details,a.overview=e.overview,a.overview.b5AccountUUID=t.uuid,a.templateUuid=e.templateUuid,a.vault=r,Oj(a)}function OF(A,j){let e=A.overview.b5AccountUUID;return A.details=j.details,A.overview=j.overview,A.overview.b5AccountUUID=e,A}var KTA=A=>A instanceof Error;var STA=A=>A.filter(j=>!(typeof j=="string"&&j.includes("color:"))).map(j=>typeof j=="string"?j.replace("%c",""):JSON.stringify(j)).join(" ").replace(/(\r\n|\n|\r)/gm," ").trim();var MTA="b5x-diagnostics",lg="logs";var bJj="cl_by_date",yJj=7,tD=class A{constructor(j){this.getConsoleLogs=async()=>this.db.transaction(lg,"readonly").objectStore(lg).getAll();this.saveConsoleLog=async j=>{await this.db.transaction(lg,"readwrite").objectStore(lg).put(j)};this.purgeOutdatedConsoleLogs=async(j=yJj)=>{let e=new Date;e.setDate(e.getDate()-j);let t=e.getTime(),a=this.db.transaction(lg,"readwrite").objectStore(lg);for await(let n of a)n.value.timestamp<t&&await a.delete(n.primaryKey)};this.db=j}static{this.open=async()=>{let e=await NK(MTA,1,{upgrade:(t,r)=>{switch(console.info(`Upgrading diagnostics database from version ${r} to 1.`,t),r){case 0:t.createObjectStore(lg,{keyPath:"id",autoIncrement:!0}).createIndex(bJj,"date")}},terminated(){console.error("\u{1F494} The browser closed our diagnostics database connection for reasons beyond our control.")},blocked(){console.error("\u{1F494} The diagnostics database connection was blocked by a lower version connection still being open.")}});return e.addEventListener("versionchange",t=>{console.error("\u{1F494} This diagnostics database connection is blocking newer versions from connecting."),console.error("diagnostics.event.dataLoss:",t.dataLoss),console.error("diagnostics.event.dataLossMessage:",t.dataLossMessage)}),new A(e)}}};var Z7=class{constructor(){this._preInitializationQueue=[];this.openDatabase=async(j=Symbol())=>{for(let e=0;e<5;e++){let t=2e3+e*1e3;try{return await j6.withTimeout(tD.open(),t,`Opening the diagnostics database timed out using a ${t/1e3} second limit.`,j)}catch(r){if(r!==j)throw r}}return j6.withTimeout(tD.open(),6e4,"Opening the diagnostics database timed out using a 60 second limit.")};this.initDatabase=async()=>{if(!W7())return!1;try{return this._database=await this.openDatabase(),await this._database.purgeOutdatedConsoleLogs(),!0}catch{return console.error("We were unable to open the diagnostics database."),!1}};this.isInitialized=j=>!!j;this.getConsoleLogs=async()=>this._database?.getConsoleLogs()??[];this.saveConsoleLog=async(j,e)=>{let t={date:yI(),timestamp:Date.now(),message:STA(j),type:e,origin:"Background"};if(!this.isInitialized(this._database)){this._preInitializationQueue.push(t);return}if(this._preInitializationQueue.length>0){let r=this._preInitializationQueue;this._preInitializationQueue=[];for(let a of r)await this._database?.saveConsoleLog(a)}await this._database.saveConsoleLog(t)};this.purgeOutdatedConsoleLogs=async j=>{if(!this.isInitialized(this._database)){console.warn("Unable to clear the logs. The diagnostics database was not initialized.");return}await this._database.purgeOutdatedConsoleLogs(j)}}},cd=qe.resolve(Z7);var We=A=>A instanceof q.LoggableError,U5=(A,j)=>W7()?(...t)=>{for(let r=0;r<t.length;r++){let a=t[r];KTA(a)&&!We(a)&&(t[r]="<redacted>")}A.apply(console,t);try{cd.saveConsoleLog(t,j)}catch{}}:A;var _TA="privacy-key-updated",FrA="privacy-key-sandbox-api-key",$Jj="privacy-force-sandbox";async function X5(){return rD()!==null?!0:IJj()}async function LTA(A,j,e,t){let r=sg(j,e,A);if(r.isErr())return r;let a=r.value;return t&&(a.addTag("privacy.com"),a=await $a(a,!0)),Oj(a)}function brA(){return!!rD()||!!vj.getItem($Jj)}function rD(){return vj.getItem(FrA)??null}function NTA(A){A?vj.setItem(FrA,A):vj.removeItem(FrA),globalThis.dispatchEvent(new Event(_TA))}async function zTA(){let A=rD(),j=A?[A]:await RTA();return tA.getPrivacyFundingAccounts({apiKeys:j,useSandboxApi:brA()})}async function wJj(A){let j=_.findAccountHandlerByUuid(A);if(j)try{let e=(await j.loadSystemVaultItems()).filter(t=>t.overview.integration==="privacy");return e.length>1&&console.error("Multiple Privacy integration items in user's system vault."),e[0]}catch(e){We(e)&&lj(e);return}}async function yrA(){let A=[];for(let j of _.getAccountHandlers)try{if(!j.isLocked&&j._vaults){let t=(await j.loadSystemVaultItems()).filter(r=>r.templateUuid==="800"&&r.overview.integration==="privacy"&&r.state===dA.ItemState.Active);A.push(...t)}}catch(e){We(e)&&lj(e)}return A}async function RTA(){return(await yrA()).map(j=>j.details.fields?.find(e=>e.designation==="password")?.value).filter(j=>!!j)}async function IJj(){return(await RTA()).length>0}async function JTA(A,j){let{vault:e}=await _.getSystemVaultForAccount(A),t=await wJj(A);t||(t=new dA(e)),t.vault=e,t.templateUuid="800",t.overview=j.overview,t.state=dA.ItemState.Active,t.overview.integration="privacy",t.details=j.details,await $a(t,!1,A,()=>globalThis.dispatchEvent(new Event(_TA)))}async function aD(){let[A,j]=await Promise.all([X5(),$TA()]);return[j?yd.Brex:void 0,A?yd.Privacy:void 0].filter(e=>!!e)}function V5(A){if(A.provider==="brex")switch(A.category){case"vendor":return rr.BrexVendor;case"corporate":return rr.BrexCorporate;default:ue(A.category)}}function UTA(A){if(A.provider==="brex")return rr.BrexVault}async function OJj(A,j){let e=await OG(A,j),t=new Blob([e]);return Eh(t)}function XTA(A){return A.overview.icons?.detail?.fileId}async function W5(A){try{if(!(A.overview.icons&&A.overview.icons.detail))return Oj(void 0);let j=A.overview.icons.detail,e=await _A.getDatabase().getIcon(j.fileId);if(!e){let t=Ij.itemCache?.accountForVaultID(Ua(A.vault));if(!t)throw console.error("getCustomIconForItem: Unable to find account by vault localId"),new Error;let r=t.uuid,a=_.getAccountHandlers.find(n=>n.b5account.uuid===r);if(!a)throw console.error(`getCustomIconForItem: Unable to find account handler for UUID <${r}>`),new Error;if(e=await a.client?.getFile(A,j).catch(()=>{}),!e)return TA({type:"FailedToLoadFile"});_A.getDatabase().saveIcon(j.fileId,e)}return Oj(await OJj(j,e))}catch{return TA({type:"UnknownError"})}}async function xo(A,j,e,t){let r=A.templateUuid==="912",a=(A.faveIndex??0)>0&&A.state===dA.ItemState.Active?r1.Favorite:void 0,n=[];if(XTA(A)&&n.push({type:"CustomIcon",content:{fileId:JSON.stringify(_m(A))}}),e){let l=fA.VaultItem.getRichIconUrl({templateUuid:r?"001":A.templateUuid,title:A.title,url:A.url??""},j);l!==""&&n.push({type:"RichIcon",content:{url:l,masked:A.templateUuid!==Qb,description:void 0}})}if(A.templateUuid===Je&&!t){let l=A.overview.title?.replace(/\s+/g,"")??"";n.push({type:"MonogramIcon",content:{value:l.length>1?l.slice(0,2):l.charAt(0),color:A.uuid?tA.generateRichIconBackgroundColor(A.uuid):""}})}let i,s=A;return s.cacheInformation?.provider!==void 0&&(i=V5(s.cacheInformation)),i=i??await Y5(A.subtitle,A.templateUuid),n.push({type:"DefaultIcon",content:{file:i,masked:!1,description:void 0}}),{id:"",sources:n,badge:a,shape:Kl.RoundedRect}}async function Y5(A,j){switch(j){case Je:return rr.Login;case Ur:switch(await tA.getCreditCardType(A)){case Ml.Visa:return rr.CreditCardVisa;case Ml.Mastercard:return rr.CreditCardMastercard;case Ml.AmericanExpress:return rr.CreditCardAmex;case Ml.Discover:return rr.CreditCardDiscover;default:return rr.CreditCard}case $sA:return rr.SecureNote;case q6:return rr.Identity;case Js:return rr.Password;case V8:return rr.Document;case wsA:return rr.Tombstone;case CsA:return rr.Placeholder;case Qb:return rr.SoftwareLicense;case IsA:return rr.BankAccount;case DsA:return rr.Database;case W8:return rr.DriverLicense;case OsA:return rr.OutdoorLicense;case PsA:return rr.Membership;case Y8:return rr.Passport;case HsA:return rr.Rewards;case Q8:return rr.SocialSecurityNumber;case TsA:return rr.Router;case KsA:return rr.Server;case SsA:return rr.Email;case Tl:return rr.ApiCredentials;case MsA:return rr.MedicalRecord;case Ii:return rr.Ssh;case ax:return rr.CryptoWallet;case _sA:return rr.Snippet;default:return rr.UnknownCategory}}var aaA=W(Ik());function WTA(A,j){try{let e=QTA(j);e&&YTA(e,A)}catch(e){We(e)?console.error("Unable to parse open and fill details:",e):console.error("Unable to parse open and fill details")}}async function YTA(A,j){if(_.allAccountHandlersAreLocked){console.warn("Asked to open and fill but nobody's unlocked");return}let e=A.itemUuid;if(A.uuidIsEncrypted){let o=Date.now(),i=await PJj(e,o);if(i)e=i,CJj();else{console.error(`Unable to decrypt item uuid ${A.itemUuid} for open and fill.`);return}}let t=await Rr(e);if(!t){console.error(`Unable to load item uuid ${e} for open and fill.`);return}let r=t.overview.URLs&&t.overview.URLs.length>0;if(!(t.overview.url||r)){console.error(`Item uuid ${e} is not eligible for open and fill.`);return}let n=await an(j);if(!n){console.error("Unable to load tab for open and fill.");return}await pc(n,t,"OPEN_AND_FILL")}function QTA(A){try{let j=new URL(A),e=VTA(j,0),t=!0;if(e||(e=VTA(j,1),t=!1),!e)return;if(!t&&HJj()){console.error("Open and fill URL contains unencrypted UUID, but the 'ratchet' flag has been set.");return}return{itemUuid:e,uuidIsEncrypted:t,url:j.href}}catch{return}}function VTA(A,j){let r=j===0?72:26,[,a]=Array.from(A.searchParams.entries()).find(([n,o])=>typeof n=="string"&&n.length===26&&typeof o=="string"&&o.length===r)??[];return a}async function PJj(A,j){let e=ZA(A),t=_.getAccountHandlers.filter(a=>a.isUnlocked),r;for(let a of t){let n=a.masterKey;if(!n||!(n instanceof Zt))continue;let o=await Ya.UrlAutofillParentKey.fromAuk(n),i=await o.deriveSessionKey(j);try{r=await i.decrypt(e),r||(i=await o.deriveSessionKey(j-10*1e3),r=await i.decrypt(e))}catch(s){if(s instanceof Error){""+s.message;continue}}if(r)break}return r}var ZTA="b5x-encrypted-uuid-autofill-ratchet";function CJj(){vj.setItem(ZTA,"Y")}function HJj(){return hj.anyAccountHasFlag("core-securityDevelopment-openAndFill-enforcement")&&vj.getItem(ZTA)==="Y"}async function AKA(){let A=await Gt();if(!A){console.info("Failed to get active tab when checking for an open and fill tab");return}if(!A.unparsedUrl||!A.id)return;let j=QTA(A.unparsedUrl);j&&await YTA(j,A.id)}async function jKA(A){let j=await Gt(),e=await browser.tabs.create({url:ic(A)});return $rA(j?.unparsedUrl)&&j?.id&&browser.tabs.remove(j.id),e}async function PF(A){return browser.webNavigation.getAllFrames({tabId:A}).then(j=>j??[]).then(j=>j.filter(({url:e})=>{try{return wq(new URL(e))}catch{return!1}}))}async function CF(A,j){let e=await PF(A.id);(await Promise.all(e.map(async r=>Rj("sign-in-with-click-provider-button",j,{tabId:A.id,frameId:r.frameId})))).some(r=>r.ok&&r.data)&&globalThis.dispatchEvent(new CustomEvent(X8,{detail:{tab:A,provider:j}}))}async function Yr(A,j){if(fi(A)){let t=await wrA(A);if(t.isOk())return t.value}let e=await PF(A.id).then(async t=>Promise.all(t.map(async r=>tKA(A.id,r.frameId,r.url,{excludeValues:j})))).then(t=>{let r=t.filter(a=>a.isOk());return r.length<t.length&&console.warn("Could not collect all frames that were initially found."),sd.combine(r).unwrapOr([])});return{unparsedUrl:A.unparsedUrl,title:A.title,frames:e}}var Q5={timeout:500,errorMessage:"Could not collect frame details",timeoutMessage:"Timed out while collecting frame details"};async function tKA(A,j,e,t={}){let r=async()=>{let{version:a}=await bp();return Oe()&&parseInt(a,10)<16};return j6.withTimeout(r().then(async a=>browser.tabs.sendMessage(A,{name:"collect-frame-details",data:{options:t,frameUrl:e,checkFrame:a}},{frameId:j})).then(async a=>a?Oj(a):Promise.reject()).catch(()=>TA(new Error(Q5.errorMessage))),Q5.timeout,"Collect Frame").catch(a=>a||TA(Q5.timeoutMessage))}async function wrA(A){return j6.withTimeout(tKA(A.id,0,A.unparsedUrl).then(j=>j.isOk()?(j.value.fields=[...(j.value.fields??[]).map(e=>({...e,tabIndex:void 0}))],Oj({unparsedUrl:A.unparsedUrl,title:A.title,frames:[j.value]})):Oj([])).catch(j=>j||TA(Q5.timeoutMessage)))}function fi(A){let j=A.URL();return(j?chrome.runtime.getURL("").toLowerCase().startsWith(j.origin):!1)&&j?.pathname==="/inline/tutorial/tutorial.html"}var hKA=W(Ik());var HF=()=>{let{firefoxDataCollection:A}=YA();return A};var mc=W(Ik());function rKA(A){return{watchtowerNotifications:A.watchtowerEnabled,showRichIcons:A.showRichIcons,language:A.language,autoLockEnabled:!0,autoLockMinutes:A.requireAuthenticationAfter}}function aKA(A){let j=/Code=(\d+)/,e=A.match(j)?.[1];if(!e)return ru.Unknown;switch(Number(e)){case 0:return ru.Unknown;case 1:return ru.InvalidRequest;case 2:return ru.CannotEncodeResponse;default:return ru.Unknown}}async function nKA(){return Ap("request-app-data")}async function IrA(A){return Ap("request-unlocked-accounts",A)}async function oKA(A){return Ap("decrypt-credential-bundle",A)}async function iKA(A){return Ap("delete-device-key",A)}async function sKA(A){return Ap("encrypt-credential-bundle",A)}async function lKA(){return Ap("get-b5x-device-uuid")}async function cKA(A){return Ap("d-secret-proxy",A)}async function dKA(){return Ap("notify-unlocked")}async function kKA(A){return Ap("log-message",A)}async function uKA(){return Ap("notify-locked")}async function Ap(A,j){let e=await He.sendNativeMessage(A,j);if(e.isErr())return TA(aKA(e.error.message));let t=JSON.parse(e.value);return t.type==="error"?TA(t.data):t.data.name!==A?TA(ru.CannotEncodeResponse):Oj(t.data.data)}function pKA(){if(f6())return new OrA;if(ut())return new PrA;throw new Error("Extension not running in Safari")}var OrA=class{constructor(){this.logger=new ht("\u{1F34E} DesktopSafariDeviceUUIDAccessor")}async getDeviceUUID(){let j=await this.invoke({type:"GetB5xDeviceUUID",data:void 0});if(j.isOk())return{deviceUUID:j.value.deviceUuid};throw new q.LoggableError({errorClass:E`B5XSafariDesktopGetDeviceUUID`,message:E`SafariWebExtension failed to get Device UUID`,tags:{invocationError:q.logsafe.assertLogSafe(j.error.type)}})}async invoke(j){let e=browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"SweDeviceMessage",data:{type:j.type,data:j.data}})}).then(r=>r.data.type==="Error"?(this.logger.error(`Invocation <${j.type}> failed with error <${r.data.content}>`),TA({type:r.data.content})):r.type===j.type.toString()?Oj(r.data.content.content):TA({type:"UnexpectedResponse"})),t=new Promise(r=>{setTimeout(()=>{r(TA({type:"Timeout"}))},2e3)});return this.logger.info(`Invoking SafariWebExtension <${j.type}>`),Promise.race([e,t]).catch(r=>{throw this.logger.warn("Invocation failed to send."),r})}},PrA=class{constructor(){this.logger=new ht("\u{1F34E} MobileSafariUserDefaultsAccessor")}async getDeviceUUID(){this.logger.info("Invoking iOS SafariWebExtension <getDeviceUUID>");let j=await lKA();if(j.isOk())return{deviceUUID:j.value.content.deviceUuid};throw this.logger.warn("<getDeviceUUID> message failed to return a deviceUUID."),new q.LoggableError({errorClass:E`B5XSafariMobileGetDeviceUUID`,message:E`iOS SafariWebExtension failed to get Device UUID`,tags:{invocationError:E`iOS SafariWebExtension failed to get Device UUID`}})}};var CrA="1Password Extension";async function L6(){let A=ce.getItem("device-json");if(A)return JSON.parse(A);let j=await He.getBrowserInfo(),e={uuid:await Hk(),clientName:CrA,clientVersion:Xo(),name:j.name,model:j.version,osName:j.osName,osVersion:j.osVersion,userAgent:navigator.userAgent};return ce.setItem("device-json",JSON.stringify(e)),e}async function Hk(){if(Oe()){let A=await _A.getDatabase().getSWEDeviceUUID();if(A)return A;try{let j=await pKA().getDeviceUUID();return await _A.getDatabase().setDeviceUUID(j.deviceUUID),j.deviceUUID}catch(j){console.warn("Failed to invoke UserDefaults: ",j)}}return await _A.getDatabase().getDeviceUUID()}var mKA=async()=>{let{language:A}=YA(),j=await L6();return{contextType:"AppContext",data:{version:mc.TelemetryString.assertSafeForTelemetry(j.clientVersion),name:mc.TelemetryString.assertSafeForTelemetry(j.clientName),app_default_locale:mc.TelemetryString.assertSafeForTelemetry(Hd.language),app_used_locale:mc.TelemetryString.assertSafeForTelemetry(A)}}},EKA=async()=>{let A=await L6(),j=A.osName?A.osName:"N/A",e=A.osVersion?A.osVersion:"N/A";return{contextType:"DeviceContext",data:{device_uuid:mc.TelemetryString.assertSafeForTelemetry(A.uuid),os_name:mc.TelemetryString.assertSafeForTelemetry(j),os_version:mc.TelemetryString.assertSafeForTelemetry(e),os_locale:navigator?mc.TelemetryString.assertSafeForTelemetry(navigator.language):void 0}}},TJj=async A=>{let j=await _A.getDatabase().findAccountByUUID(A);if(!j)throw new Error("Account handler not found.");return{contextType:"AccountContext",data:{account_uuid:mc.TelemetryString.assertSafeForTelemetry(j.uuid),account_type:j.type,billing_status:j.billingStatus,user_uuid:mc.TelemetryString.assertSafeForTelemetry(j.userUUID)}}},KJj=A=>{let j=[];for(let e of hj.getAllFlagsForAccount(A))j.push(mc.TelemetryString.assertSafeForTelemetry(e.name));return{contextType:"FeatureFlagContext",data:{assigned_flags:j}}},HrA=new Map;HrA.set("experiment-b5x-a-a-test-all-users-20241128","b5x-a-a-test");HrA.set("experiment-b5x-inline-menu-prominent-cta-all-users-20241128","b5x-inline-menu-prominent-cta");var SJj=()=>HrA,MJj=(A,j)=>{let e=`${A}:${j}`;return mc.TelemetryString.assertSafeForTelemetry(e)},_Jj=A=>{let j=[];for(let[e,t]of SJj())if(hj.accountHasFlag(A,e)){let n=hj.accountHasFlag(A,t)?"enabled":"disabled";j.push(MJj(e,n))}return{contextType:"ExperimentationContext",data:{assigned_experiments:j}}},BKA=async A=>Promise.all([TJj(A),mKA(),EKA(),KJj(A),_Jj(A)]),gKA=async()=>Promise.all([mKA(),EKA()]);var cg=class{constructor(j){this.tracker=j;this.TELEMETRY_LOGGER=new ht("\u{1F4CA} B5x Telemetry Dev Env Log");this.checkTelemetryHighVolume=(j,e)=>(0,hKA.isHighVolumeEventType)(j)?!hj.accountHasFlag(e,"telemetry-high-volume-events-denied"):!0;this.recordEvent=(j,e,t)=>{let r=this.checkTelemetryFlag(t);(!It()||HF())&&r&&this.checkUserTelemetryPreference(t)&&this.checkTelemetryHighVolume(j,t)&&BKA(t).then(async a=>Promise.all([a,this.tracker.record(j,e,a)])).then(([a])=>{this.TELEMETRY_LOGGER.info("EventType:",j,"Data:",e,"Contexts:",a,`
					----------------------------------------------`)}).catch(a=>{this.TELEMETRY_LOGGER.error("Telemetry Error - event not recorded: ",a)})};this.recordPreAuthEvent=(j,e)=>{(!It()||HF())&&gKA().then(async t=>Promise.all([t,this.tracker.record(j,e,t)])).then(([t])=>{this.TELEMETRY_LOGGER.info("Pre-Auth EventType:",j,"Data:",e,"Contexts:",t,`
					----------------------------------------------`)}).catch(t=>{this.TELEMETRY_LOGGER.error("Telemetry Error - event not recorded: ",t)})};this.tracker=j,this.TELEMETRY_LOGGER.info("TelemetryProvider created")}checkTelemetryFlag(j){let e=_.findAccountHandlerByUuid(j);return e?tA.parseAccountType(e.b5account.type)===Au.Team?hj.accountHasFlag(j,"b5x-b2b-telemetry-data-collection")||hj.accountHasFlag(j,"telemetry-data-collection"):hj.accountHasFlag(j,"b5x-telemetry-data-collection")||hj.accountHasFlag(j,"telemetry-data-collection"):!1}checkUserTelemetryPreference(j){let e=_.findAccountHandlerByUuid(j);return e?tA.parseAccountType(e.b5account.type)===Au.Team?!e.serveraccount.teamMemberPolicies?.telemetryOptOut:e.getPreference("TelemetryOptIn"):!1}};cg=n6([dc(),Zv(0,_q("SnowplowTracker"))],cg);var St=(A,j,e)=>qe.resolve(cg).recordEvent(A,j,e),qKA=(A,j)=>qe.resolve(cg).recordPreAuthEvent(A,j);var nD=(t=>(t.Login="login",t.CreditCard="creditCard",t.Identity="identity",t))(nD||{}),bl={login:{priority:0,setting:"autoSaveEnabled",templateUuid:Je,triggers:[Nj.CurrentPassword,Nj.NewPassword]},creditCard:{priority:1,setting:"autoSaveCreditCardsEnabled",templateUuid:Ur,triggers:[Nj.CcNumber]},identity:{featureFlag:"b5x-autosave-identities",priority:2,setting:"autoSaveIdentitiesEnabled",templateUuid:q6,triggers:[Nj.AddressLine1,Nj.StreetAddress]}};var vKA=W(Dn()),dg=W(aA()),LJj=dg.array(dg.tuple([dg.number,dg.any])),oD=class{constructor(j){this.storageKey=j,this.lockName=`session-manager_${j}_${QB()}`}async with(j){return navigator.locks.request(this.lockName,async e=>{if(!this.cachedSessions)try{let t=ce.getItem(this.storageKey);if(t){let r=JSON.parse(t),a=LJj.decode(r);if(!(0,vKA.isRight)(a))throw new Error("Malformed SessionManager");this.cachedSessions=new Map(a.right)}else this.cachedSessions=new Map}catch{console.error("[SessionManager] SessionManager contained malformed data."),this.cachedSessions=new Map}try{return await j(this.cachedSessions)}finally{ce.setItem(this.storageKey,JSON.stringify(Array.from(this.cachedSessions.entries())))}})}},Z5=oD;var TrA=class{constructor(j,e,t,r){this.id=j,this.unparsedUrl=e,this.title=t,this.openerTabId=r}isHttpOrHttps(){return wq(this.URL())}nakedDomain(){let j=this.unparsedUrl;if(this.cachedNakedDomain&&this.cachedNakedDomain.unparsedUrl===j)return this.cachedNakedDomain.nakedDomain;let e=tA.nakedDomainForUrl(j);return this.cachedNakedDomain={unparsedUrl:j,nakedDomain:e},e}URL(){return this.cachedUrl||(this.cachedUrl=fl(this.unparsedUrl)),this.cachedUrl}};function Ft(A){if(A&&A.id&&A.url)return kg(A.id,A.url,A.title,A.openerTabId)}function xKA(A){if(!A||!A.tab)return;let j=Ft(A.tab);if(j)return j}function fKA(A){return kg(A.tabId,A.url)}function kg(A,j,e="",t){return new TrA(A,j,e,t)}var KrA=[Nj.Name,Nj.GivenName,Nj.AdditionalName,Nj.FamilyName,Nj.StreetAddress,Nj.AddressLine1,Nj.AddressLine2,Nj.AddressLevel1,Nj.AddressLevel2,Nj.Country,Nj.PostalCode],Yvt=[Nj.Username,Nj.CurrentPassword,Nj.NewPassword,Nj.CcName,Nj.CcGivenName,Nj.CcAdditionalName,Nj.CcFamilyName,Nj.CcCsc,Nj.CcExp,Nj.CcExpMonth,Nj.CcExpYear,Nj.CcType,Nj.CcNumber,...KrA];var SrA=()=>{let A=[];for(let j of Object.values(nD))JJj(j)&&A.push(j);return A},ug=()=>SrA().length!==0,NJj=async(A,j)=>{let e=await Ij.loadItemCache();if(!e)return[];let t=e.fillableItems(se.combine(se.template(A),se.userSelected(hr(),void 0,void 0,e),a=>j?se.nakedDomain(j)(a):!0));return(await Promise.all(t.map(r6))).filter(a=>!!a)};function GKA(A,j){switch(A){case"creditCard":{let e=jp(j,Nj.CcNumber),t=8,r=/\d/.test(e??"");return!!e&&e.length>=t&&r}case"identity":{let e=0,t=2;for(let r of j.fields)if(KrA.includes(r.designation.autofillType)&&(e++,e>=t))return!0;return!1}default:return!0}}var iD=async(A,j)=>{let e=j?.urls?.length>0?tA.nakedDomainForUrl(j.urls[0]):void 0,t=await NJj(A,e),r=a=>{if(a.templateUuid!==A)return!1;switch(A){case Je:{let n=zJj(a,"password"),o=jp(j,Nj.CurrentPassword)??jp(j,Nj.NewPassword);return n&&o&&n===o}case Ur:{let n=l=>l?.replace(/[^a-zA-Z0-9]/g,""),o=RJj(a,"ccnum"),i=typeof o=="string"?n(o):void 0,s=n(jp(j,Nj.CcNumber));return i&&s&&i===s}case q6:{let n=fA.VaultItem.findFieldWithName("address",a),o=n?fA.VaultItem.getAddressValue(n):void 0,i=d=>{let k=/\b(ave|avenue|blvd|boulevard|ct|court|dr|drive|hwy|highway|ln|lane|pkwy|parkway|pl|place|rdg|ridge|rd|road|st|str|street|ter|terrace)\b/i;if(!d)return;let u=d.toLowerCase().split(","),m=u[0].search(k);return{line1:(m>0?u[0].substring(0,m):d).trim(),line2:u[1]?.trim()}},s=i(o?.street),l=i(jp(j,Nj.StreetAddress));return!n||!o||!s?.line1||!l?.line1||s?.line1!==l?.line1?!1:!l.line2||l.line2===s.line2}default:return!1}};return t?.find(r)};function jp(A,j){let e=A.fields.find(t=>t.designation.autofillType===j);return e?e.value:void 0}function zJj(A,j){if(!A.details?.fields)return;let e=A.details.fields.find(t=>t.designation===j);return e?e.value:void 0}var RJj=(A,j)=>{if(A.details?.sections){for(let e of A.details.sections)if(e.fields){for(let t of e.fields)if(t.n===j)return t.v}}},JJj=A=>{let j=YA(),e=bl[A],t=!!j[e.setting];return e.featureFlag?t&&hj.anyAccountHasFlag(e.featureFlag):t},sD=()=>!!YA().showLockedStateNotifications&&hj.anyAccountHasFlag("b5x-authx-unlock-notifications"),AS=async A=>{let{showRichIcons:j}=YA();return{title:A.title,subtitle:A.subtitle,icon:await xo(A,120,j)}};var UJj=4,yl=new Z5("autosave-sessions");function FKA(){qe.resolve(qi).subscribe(Or,AUj).subscribe(Rs,QJj).subscribe(Zk,XJj).subscribe(qE,VJj)}var bKA=async A=>yl.with(async j=>{let e=j.get(A);return e?Promise.resolve(!!e.notificationState):Promise.resolve(!1)}),XJj=A=>A.detail.notifications.filter(j=>j.type==="autosave").forEach(j=>{j.tabId&&iv(j.tabId)});async function yKA(A,j){let e=A.data,t=Ft(j.tab);if(!t){console.error("Failed to create TabInfo for Tab.");return}e&&Rj("autosave-notify-capture",!0,{tabId:t.id});let r=await Yr(t);return yl.with(async a=>{let n=a.get(t.id);if(n)n.collectedPageDetails=r,e&&bl[e].priority<bl[n.saveType].priority&&(n.saveType=e);else{if(!e)return Promise.resolve();a.set(t.id,{saveType:e,collectedPageDetails:r,notificationState:void 0})}})}function MrA(A,j){return{hasBeenCheckedAfterUnlock:!1,readyTimestamp:Date.now(),saveObject:j,expirationNavigationCount:UJj,notificationId:void 0,isTutorial:fi(A)}}async function $KA(A,j){let e=Ft(j.tab);if(!e){console.error("Failed to create TabInfo for Tab.");return}let t=await yl.with(async r=>{let a=r.get(e.id);if(!a)return;let{templateUuid:n,triggers:o}=bl[a.saveType],i=await tA.createSaveObject(n,a.collectedPageDetails,a.generatePasswordDetails);if(i.fields.some(l=>o.includes(l.designation.autofillType))){if(_.allAccountHandlersAreLocked)return a.notificationState=MrA(e,i),sD()?a:void 0;{if(await iD(n,i))return;let d=a.saveType;return GKA(d,i)?(a.notificationState=MrA(e,i),a):void 0}}});t&&jS(e,t)}function VJj(A){yl.with(async j=>Promise.resolve(WJj(j,A.detail.tabId)))}function WJj(A,j){Rj("autosave-notify-capture",!1,{tabId:j});let e=A.get(j);if(e){if(!e.notificationState){A.delete(j);return}if(e.notificationState.isTutorial){A.delete(j);return}nn("autosave")||(e.notificationState.expirationNavigationCount-=1,e.notificationState.expirationNavigationCount<=0&&(A.delete(j),e.notificationState.notificationId&&(eS(j,e.notificationState.notificationId),e.notificationState.notificationId=void 0)))}}function wKA(A){ug()&&yl.with(async e=>{let t=e.get(A.id);if(!t)return Promise.resolve();if(!t.notificationState)return Promise.resolve(e.delete(A.id));if(_.allAccountHandlersAreLocked&&!sD())return Promise.resolve();jS(A,t)})}function IKA(A,j){yl.with(async e=>YJj(A,e,j))}async function YJj(A,j,e){Rj("autosave-notify-capture",!0,{tabId:A.id});let t=await Yr(A),r=await tA.createSaveObject(Je,t,e),a={generatePasswordDetails:e,collectedPageDetails:t,saveType:"login",notificationState:MrA(A,r)};j.set(A.id,a),jS(A,a)}async function jS(A,j){if(!j.notificationState)return;let e=A.URL()?.host||"",t=A.nakedDomain(),r=[];for(let i of _.getAccountHandlers){let s=await i.getManagedVaultFromDb();if(typeof s<"u"&&typeof s.localId<"u"){let l=await i.getVaultItems(s.localId);r.push(...l)}}if(r.some(i=>AtA({urls:_rA(i),urlToNakedDomains:i.urlToNakedDomains||{}},e,t)))return;let n=await Lm(A.id);if(!nn("autosave")&&n.length>0)return;let o=await ta(A.id,{type:"autosave",params:{tutorialMode:fi(A)}});o&&(j.notificationState.notificationId=o)}function QJj(){yl.with(async A=>Promise.resolve(ZJj(A)))}function ZJj(A){ug()&&A.forEach(e=>{e.notificationState&&(e.notificationState.hasBeenCheckedAfterUnlock=!1)})}function AUj(){yl.with(async A=>eUj(A))}var jUj=A=>Date.now()-A>12e4;async function eUj(A){if(ug()){for(let[e,t]of A)if(t.notificationState){if(t.notificationState.hasBeenCheckedAfterUnlock)return;t.notificationState.hasBeenCheckedAfterUnlock=!0;let r=await an(e);if(!r){A.delete(e);return}if(!nn("autosave")&&(await Lm(e)).length>0)return;if(jUj(t.notificationState.readyTimestamp)){A.delete(e);return}let{templateUuid:a}=bl[t.saveType];if(await iD(a,t.notificationState.saveObject)){t.notificationState=void 0;return}jS(r,t)}}}function iv(A){yl.with(async j=>Promise.resolve(j.delete(A))),nn("autosave")&&KF("autosave",A)}var DKA={autosave:{isNotificationValidForTab:bKA}};var tS=A=>CPA[A],nn=A=>hj.hasPreRegistrationFlag("b5x-notification-manager")&&!!tS(A).notificationManagerEnabled,OKA=A=>A!=="notificationManager",LrA=async(A,j)=>{let e=DKA[j];return e?.isNotificationValidForTab?e.isNotificationValidForTab(A):Promise.resolve(!0)};var rS="notification-manager",NrA="notification-page-change-history",ep=async A=>{let j=JSON.parse(ce.getItem(rS)??"[]");if(!A)return j;let e=j.filter(r=>r.tabId===A||r.tabId===void 0);return(await Promise.allSettled(e.map(async r=>await LrA(A,r.type)?r:null))).filter(r=>r.status==="fulfilled").map(r=>r.value).filter(r=>r!==null)},lD=async(A,j)=>{let e=await ep(A);return(j?e.filter(r=>r.type===j):e).length>0},PKA=async(A,j,e)=>{let t=tS(A);if(j&&j>0&&await lD(j,A)&&!t.allowMultiple)return;let r={id:QB(),type:A,params:e,created:new Date};j&&(r={...r,tabId:j}),ce.setItem(rS,JSON.stringify((await ep()).concat([r])))},aS=async A=>{ce.setItem(rS,JSON.stringify((await ep()).filter(j=>j.id!==A))),ce.setItem(NrA,JSON.stringify(CKA().filter(j=>j.id!==A)))},KF=async(A,j)=>{let e=(await ep()).filter(t=>t.tabId===j&&t.type===A);e.forEach(async t=>aS(t.id)),e.length>0&&Rj("clear-notifications",{ids:e.map(t=>t.id)})},CKA=()=>JSON.parse(ce.getItem(NrA)??"[]"),HKA=async A=>{let j=await ep(A);if(j.length===0)return;let e=CKA(),t=[],r=[];for(let a of j){if(!await LrA(A,a.type)){await aS(a.id);continue}let n=tS(a.type).maximumPageChangeCount??1,o=e.filter(i=>i.id===a.id&&i.tabId===A);if(o.length>0){let i=o[o.length-1];if(i&&i.timestamp&&Date.now()-new Date(i.timestamp).getTime()<2e3)return}if(n===1||o.length>n-1){t.push(a);continue}r.push({id:a.id,tabId:A,timestamp:new Date})}(r.length>0||t.length>0)&&(r.length>0&&(e=e.concat(r)),t.length>0&&(e=e.filter(a=>!t.map(n=>n.id).includes(a.id)),ce.setItem(rS,JSON.stringify((await ep()).filter(a=>!t.map(n=>n.id).includes(a.id)))),globalThis.dispatchEvent(new CustomEvent(Zk,{detail:{notifications:t.map(a=>({id:a.id,tabId:a.tabId,type:a.type}))}})),Rj("clear-notifications",{ids:t.map(a=>a.id)})),ce.setItem(NrA,JSON.stringify(e)))};var TKA=()=>{qe.resolve(qi).subscribe(qE,async A=>{hj.hasPreRegistrationFlag("b5x-notification-manager")&&await HKA(A.detail.tabId)})},tUj=async A=>{let j=js();try{chrome.tabs.sendMessage(A,{name:"active-notification-type"},j.resolve)}catch{console.error("Failed to get active notification");return}return j.promise},Lm=async A=>{let j=await tUj(A);return j?j==="notificationManager"?(await ep(A)).map(e=>e.type):[j]:[]},cD=async(A,j,e)=>{if(e<=0)throw new Error("showNotificationWithRetries expects a positive integer for retries");let t=e+1,r;for(let a=0;a<t&&typeof r>"u";a++)r=await ta(A,j),r||(await As(500),a+1);return r||console.error(`Could not show notification after ${t} attempts`),r},ta=async(A,j)=>{let e=js();nn(j.type)&&OKA(j.type)&&(await PKA(j.type,A,j.params),j={type:"notificationManager"});try{chrome.tabs.sendMessage(A,{name:"show-notification",data:{type:j.type,requiresExplicitHide:!0,params:j.params}},e.resolve)}catch{console.error("Failed to show-notification");return}let t=await e.promise;return t?oj.assertLogSafe(t):void 0},eS=async(A,j)=>{let e=js();chrome.tabs.sendMessage(A,{name:"hide-notification",data:{id:j}},e.resolve);let t=await e.promise;return t?oj.assertLogSafe(t):void 0},SF=async(A,j,e)=>{let t=js();try{chrome.tabs.sendMessage(A,{name:"replace-notification",data:{id:j,type:e.type,params:e.params,requiresExplicitHide:!0}},t.resolve)}catch{return}let r=await t.promise;return r?oj.assertLogSafe(r):void 0};async function KKA(A){try{let j=await rUj(A);if(j&&j.compromisedDomain)return!0}catch(j){console.error("Error during breach check:",j)}return!1}async function rUj(A){let{newHibpEnabled:j}=YA(),e=await r6(A);if(!e)throw new Error("Failed to find decrypted item.");let t=A.vault,r=await Ij.loadItemCache();if(!r)return;let a=Ua(t),n=r.accountForVaultID(a);if(!n)throw new Error("failed to find an account or vault overview");let o=Y7(n.uuid);return await LA.generateWatchtowerReportForItem(e,j,!!n.hasFeature.itemsInWrongAccountPolicy,o)}var SKA={async handleWatchtowerBreach(A,j){let e=await Ij.loadItemCache();if(!e)return;let t=e.itemWithUUID(j);!t||!await KKA(t)||ta(A,{type:"watchtowerBreachDetected",params:{itemUuid:t.uuid}})}};var _KA=W(Dn()),MF=W(aA());function zrA(A,j){if(!A||A.length===0)return 0;let e=0;for(let t of A){if(!t)continue;let r=0,a=fl(t.u);if(!a)continue;let n=a.hostname.split("."),o=n.length-1;for(let i=j.length-1;i>-1&&o>-1&&j[i]===n[o];i--){r++;o--}if(e<r&&(e=r),r===j.length)break}return e}function MKA(A){let j=new URL(A);return j.protocol+"//"+j.host}function nS(A){return A.origin+A.pathname}var JrA="page-exclusion-list",aUj=MF.record(MF.string,MF.boolean),XrA=class{constructor(){this._pageExclusionList={}}init(){this.#j()}async checkPermission(j){if(Object.keys(this._pageExclusionList).length>0)return Promise.resolve(!0);let e=js();return chrome.tabs.sendMessage(j.id,{name:"get-hide-on-this-page-permission",data:nA(`1Password will no longer make autofill suggestions on this page.

The list of hidden pages is remembered in this web browser. You can clear the list at any time in settings.`)},e.resolve),e.promise}append(j){this._pageExclusionList[UrA(j.unparsedUrl)]=!0,this._onChange(j)}has(j){return!!this._pageExclusionList[UrA(j.unparsedUrl)]}remove(j){delete this._pageExclusionList[UrA(j.unparsedUrl)],this._onChange(j)}clear(){this._pageExclusionList={},this.#A()}_onChange(j){this.#A();let e=this.has(j);chrome.tabs.sendMessage(j.id,{name:"page-excluded",data:e})}#j(){try{let j=vj.getItem(JrA);if(!j)throw new Error;let e=aUj.decode(JSON.parse(j));if((0,_KA.isLeft)(e))throw new Error;this._pageExclusionList=e.right}catch{vj.setItem(JrA,JSON.stringify({}))}}#A(){vj.setItem(JrA,JSON.stringify(this._pageExclusionList))}};function UrA(A){let j=new URL(A);return nS(j)}var Jn=new XrA;async function on(A,j,e,t={name:"suggested-item",data:void 0}){try{iv(A.id)}catch{}let r=await Ts(j);if(!r){console.error(`Unable to load template with UUID ${j} when attempting to open the save dialog.`);return}let{showRichIcons:a,language:n}=YA(),o=await iS(A,j);return await tA.saveManagerCreate(A,!1,r,o,e,t,a,n).catch(i=>console.error("Failed to start save session",i)),Kk(A.id,{name:"save-dialog"})}async function LKA(A,j,e={name:"suggested-item",data:void 0}){let t=await Ts(A);if(!t){console.error(`Unable to load template with UUID ${A} in showSavePromptInNewTab`);return}return NKA("save-dialog",async r=>{let{showRichIcons:a,language:n}=YA();await tA.saveManagerCreate(r,!0,t,void 0,j,e,a,n).catch(o=>console.error("Failed to start save session",o))})}async function oS(A){if(Kt())return;let j=await Gt();j?.isHttpOrHttps()&&await on(j,A,{name:"collected-page-details",data:{collectedPageDetails:await Yr(j)}})}var bt,Sk=0,kD=null;function uD(){return(kD===null||kD.byteLength===0)&&(kD=new Uint8Array(bt.memory.buffer)),kD}var lS=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},nUj=typeof lS.encodeInto=="function"?function(A,j){return lS.encodeInto(A,j)}:function(A,j){let e=lS.encode(A);return j.set(e),{read:A.length,written:e.length}};function Nm(A,j,e){if(e===void 0){let o=lS.encode(A),i=j(o.length,1)>>>0;return uD().subarray(i,i+o.length).set(o),Sk=o.length,i}let t=A.length,r=j(t,1)>>>0,a=uD(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=uD().subarray(r+n,r+t),i=nUj(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return Sk=n,r}var sv=null;function N6(){return(sv===null||sv.buffer.detached===!0||sv.buffer.detached===void 0&&sv.buffer!==bt.memory.buffer)&&(sv=new DataView(bt.memory.buffer)),sv}function dd(A){let j=bt.__externref_table_alloc();return bt.__wbindgen_export_4.set(j,A),j}function de(A,j){try{return A.apply(this,j)}catch(e){let t=dd(e);bt.__wbindgen_exn_store(t)}}var XKA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&XKA.decode();function Ha(A,j){return A=A>>>0,XKA.decode(uD().subarray(A,A+j))}function Vo(A){return A==null}function zKA(A,j){return A=A>>>0,uD().subarray(A/1,A/1+j)}var RKA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{bt.__wbindgen_export_6.get(A.dtor)(A.a,A.b)});function _F(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(bt.__wbindgen_export_6.get(r.dtor)(o,r.b),RKA.unregister(r)):r.a=o}};return a.original=r,RKA.register(a,r,r),a}function VrA(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=VrA(A[0]));for(let n=1;n<r;n++)a+=", "+VrA(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}function VKA(A,j){return bt.xamBackendInit(A,j)}function WKA(A){let j=bt.__wbindgen_export_4.get(A);return bt.__externref_table_dealloc(A),j}function oUj(A,j,e,t){bt.closure37_externref_shim(A,j,e,t)}function iUj(A,j,e){let t=bt.closure819_externref_shim_multivalue_shim(A,j,e);if(t[1])throw WKA(t[0])}function sUj(A,j){bt._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h2b230835f10020d8(A,j)}function lUj(A,j){bt._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hcbc79b0be6ac5cc0(A,j)}function cUj(A,j,e){bt.closure4984_externref_shim(A,j,e)}function dUj(A,j,e){bt.closure6029_externref_shim(A,j,e)}function kUj(A,j,e,t){bt.closure6194_externref_shim(A,j,e,t)}var uUj=["pending","done"],JKA=["readonly","readwrite","versionchange","readwriteflush","cleanup"],pUj=["omit","same-origin","include"],mUj=["same-origin","no-cors","cors","navigate"],UKA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_defaultxambackendserver_free(A>>>0,1)),WrA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,UKA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,UKA.unregister(this),j}free(){let j=this.__destroy_into_raw();bt.__wbg_defaultxambackendserver_free(j,0)}sendCallback(j,e){let t=bt.defaultxambackendserver_sendCallback(this.__wbg_ptr,j,e);if(t[1])throw WKA(t[0])}},Bft=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_intounderlyingbytesource_free(A>>>0,1));var gft=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_intounderlyingsink_free(A>>>0,1));var hft=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_intounderlyingsource_free(A>>>0,1));async function EUj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function BUj(){let A={};return A.wbg={},A.wbg.__wbg_String_8f0eb39a4a4c2f66=function(j,e){let t=String(e),r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},A.wbg.__wbg_Window_41559019033ede94=function(j){return j.Window},A.wbg.__wbg_WorkerGlobalScope_d324bffbeaef9f3a=function(j){return j.WorkerGlobalScope},A.wbg.__wbg_abort_775ef1d17fc65868=function(j){j.abort()},A.wbg.__wbg_abort_99fc644e2c79c9fb=function(){return de(function(j){j.abort()},arguments)},A.wbg.__wbg_addListener_b04fec4433d9c2da=function(j,e){j.addListener(e)},A.wbg.__wbg_add_4315fd553d714c24=function(){return de(function(j,e){return j.add(e)},arguments)},A.wbg.__wbg_append_299d5d48292c0495=function(){return de(function(j,e,t,r,a){j.append(Ha(e,t),Ha(r,a))},arguments)},A.wbg.__wbg_append_8c7dd8d641a5f01b=function(){return de(function(j,e,t,r,a){j.append(Ha(e,t),Ha(r,a))},arguments)},A.wbg.__wbg_append_b2d1fc16de2a0e81=function(){return de(function(j,e,t,r,a,n){j.append(Ha(e,t),r,Ha(a,n))},arguments)},A.wbg.__wbg_append_b44785ebeb668479=function(){return de(function(j,e,t,r){j.append(Ha(e,t),r)},arguments)},A.wbg.__wbg_arrayBuffer_d1b44c4390db422f=function(){return de(function(j){return j.arrayBuffer()},arguments)},A.wbg.__wbg_bound_f2afc3766d4545cf=function(){return de(function(j,e,t,r){return IDBKeyRange.bound(j,e,t!==0,r!==0)},arguments)},A.wbg.__wbg_buffer_09165b52af8c5237=function(j){return j.buffer},A.wbg.__wbg_buffer_609cc3eee51ed158=function(j){return j.buffer},A.wbg.__wbg_byobRequest_77d9adf63337edfb=function(j){let e=j.byobRequest;return Vo(e)?0:dd(e)},A.wbg.__wbg_byteLength_e674b853d9c77e1d=function(j){return j.byteLength},A.wbg.__wbg_byteOffset_fd862df290ef848d=function(j){return j.byteOffset},A.wbg.__wbg_call_29726b1dad289bba=function(){return de(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_call_672a4d21634d4a24=function(){return de(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_7cccdd69e0791ae2=function(){return de(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_clearTimeout_5a54f8841c30079a=function(j){return clearTimeout(j)},A.wbg.__wbg_clear_f450db7eeb71163f=function(){return de(function(j){return j.clear()},arguments)},A.wbg.__wbg_close_304cc1fef3466669=function(){return de(function(j){j.close()},arguments)},A.wbg.__wbg_close_5ce03e29be453811=function(){return de(function(j){j.close()},arguments)},A.wbg.__wbg_close_a17af48266bd9942=function(j){j.close()},A.wbg.__wbg_commit_a54edce65f3858f2=function(){return de(function(j){j.commit()},arguments)},A.wbg.__wbg_continue_c46c11d3dbe1b030=function(){return de(function(j){j.continue()},arguments)},A.wbg.__wbg_createIndex_873ac48adc772309=function(){return de(function(j,e,t,r,a){return j.createIndex(Ha(e,t),r,a)},arguments)},A.wbg.__wbg_createIndex_fcfd513cf4581834=function(){return de(function(j,e,t,r){return j.createIndex(Ha(e,t),r)},arguments)},A.wbg.__wbg_createObjectStore_d2f9e1016f4d81b9=function(){return de(function(j,e,t,r){return j.createObjectStore(Ha(e,t),r)},arguments)},A.wbg.__wbg_crypto_dd1b8f71596b161a=function(j){return j.crypto},A.wbg.__wbg_debug_3cb59063b29f58c1=function(j){},A.wbg.__wbg_defaultxambackendserver_new=function(j){return WrA.__wrap(j)},A.wbg.__wbg_deleteDatabase_b8f234aeb7ad3452=function(){return de(function(j,e,t){return j.deleteDatabase(Ha(e,t))},arguments)},A.wbg.__wbg_delete_200677093b4cf756=function(){return de(function(j,e){return j.delete(e)},arguments)},A.wbg.__wbg_done_769e5ede4b31c67b=function(j){return j.done},A.wbg.__wbg_enqueue_bb16ba72f537dc9e=function(){return de(function(j,e){j.enqueue(e)},arguments)},A.wbg.__wbg_entries_3265d4158b33e5dc=function(j){return Object.entries(j)},A.wbg.__wbg_error_524f506f44df1645=function(j){console.error(j)},A.wbg.__wbg_error_7534b8e9a36f1ab4=function(j,e){let t,r;try{t=j,r=e,console.error(Ha(j,e))}finally{bt.__wbindgen_free(t,r,1)}},A.wbg.__wbg_error_ff4ddaabdfc5dbb3=function(){return de(function(j){let e=j.error;return Vo(e)?0:dd(e)},arguments)},A.wbg.__wbg_fetch_094979620990dda8=function(j){return fetch(j)},A.wbg.__wbg_fetch_509096533071c657=function(j,e){return j.fetch(e)},A.wbg.__wbg_flush_1a680a66b21c53d7=function(){return de(function(j){j.flush()},arguments)},A.wbg.__wbg_getAllKeys_b11d8835dc4be0e8=function(){return de(function(j){return j.getAllKeys()},arguments)},A.wbg.__wbg_getAll_1de5635a99f2dae8=function(){return de(function(j){return j.getAll()},arguments)},A.wbg.__wbg_getAll_304e868beec2021f=function(){return de(function(j){return j.getAll()},arguments)},A.wbg.__wbg_getAll_a5c537de02c25968=function(){return de(function(j,e){return j.getAll(e)},arguments)},A.wbg.__wbg_getEntriesByType_5d2deec4d4dcff89=function(j,e,t){return j.getEntriesByType(Ha(e,t))},A.wbg.__wbg_getRandomValues_760c8e927227643e=function(){return de(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_getSize_e7dbd5ffa0b43df1=function(){return de(function(j){return j.getSize()},arguments)},A.wbg.__wbg_getTime_46267b1c24877e30=function(j){return j.getTime()},A.wbg.__wbg_getTimezoneOffset_6b5752021c499c47=function(j){return j.getTimezoneOffset()},A.wbg.__wbg_get_67b2ba62fc30de12=function(){return de(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_get_8da03f81f6a1111e=function(){return de(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_get_93e54e8e166fbcab=function(){return de(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_get_b9b93047fe3cf45b=function(j,e){return j[e>>>0]},A.wbg.__wbg_get_dd357822de02dfec=function(){return de(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(j,e){return j[e]},A.wbg.__wbg_global_f5c2926e57ba457f=function(j){return j.global},A.wbg.__wbg_has_a5ea9117f258a0ec=function(){return de(function(j,e){return Reflect.has(j,e)},arguments)},A.wbg.__wbg_headers_9cb51cfd2ac780a4=function(j){return j.headers},A.wbg.__wbg_index_e00ca5fff206ee3e=function(){return de(function(j,e,t){return j.index(Ha(e,t))},arguments)},A.wbg.__wbg_indexedDB_54f01430b1e194e8=function(){return de(function(j){let e=j.indexedDB;return Vo(e)?0:dd(e)},arguments)},A.wbg.__wbg_indexedDB_b1f49280282046f8=function(){return de(function(j){let e=j.indexedDB;return Vo(e)?0:dd(e)},arguments)},A.wbg.__wbg_indexedDB_f6b47b0dc333fd2f=function(){return de(function(j){let e=j.indexedDB;return Vo(e)?0:dd(e)},arguments)},A.wbg.__wbg_info_3daf2e093e091b66=function(j){console.info(j)},A.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(j){let e;try{e=j instanceof ArrayBuffer}catch{e=!1}return e},A.wbg.__wbg_instanceof_CursorSys_4b6a8aba0e823e75=function(j){let e;try{e=j instanceof IDBCursorWithValue}catch{e=!1}return e},A.wbg.__wbg_instanceof_DomException_ed1ccb7aaf39034c=function(j){let e;try{e=j instanceof DOMException}catch{e=!1}return e},A.wbg.__wbg_instanceof_Error_4d54113b22d20306=function(j){let e;try{e=j instanceof Error}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbCursor_4f02b0cddf69c141=function(j){let e;try{e=j instanceof IDBCursor}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbDatabase_a3ef009ca00059f9=function(j){let e;try{e=j instanceof IDBDatabase}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbRequest_4813c3f207666aa4=function(j){let e;try{e=j instanceof IDBRequest}catch{e=!1}return e},A.wbg.__wbg_instanceof_Map_f3469ce2244d2430=function(j){let e;try{e=j instanceof Map}catch{e=!1}return e},A.wbg.__wbg_instanceof_Navigator_1a0ee377f1057fd4=function(j){let e;try{e=j instanceof Navigator}catch{e=!1}return e},A.wbg.__wbg_instanceof_Performance_0ac1286c87171f57=function(j){let e;try{e=j instanceof Performance}catch{e=!1}return e},A.wbg.__wbg_instanceof_Promise_935168b8f4b49db3=function(j){let e;try{e=j instanceof Promise}catch{e=!1}return e},A.wbg.__wbg_instanceof_Response_f2cc20d9f7dfd644=function(j){let e;try{e=j instanceof Response}catch{e=!1}return e},A.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(j){let e;try{e=j instanceof Uint8Array}catch{e=!1}return e},A.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(j){let e;try{e=j instanceof Window}catch{e=!1}return e},A.wbg.__wbg_instanceof_WorkerGlobalScope_dbdbdea7e3b56493=function(j){let e;try{e=j instanceof WorkerGlobalScope}catch{e=!1}return e},A.wbg.__wbg_instanceof_WorkerNavigator_16d0429e2f608fc9=function(j){let e;try{e=j instanceof WorkerNavigator}catch{e=!1}return e},A.wbg.__wbg_isArray_a1eab7e0d067391b=function(j){return Array.isArray(j)},A.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(j){return Number.isSafeInteger(j)},A.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},A.wbg.__wbg_key_29fefecef430db96=function(){return de(function(j){return j.key},arguments)},A.wbg.__wbg_languages_2420955220685766=function(j){return j.languages},A.wbg.__wbg_languages_d8dad509faf757df=function(j){return j.languages},A.wbg.__wbg_length_a446193dc22c12f8=function(j){return j.length},A.wbg.__wbg_length_e2d2a49132c1b256=function(j){return j.length},A.wbg.__wbg_local_2fa3ac41e476a539=function(j){return j.local},A.wbg.__wbg_log_c222819a41e063d3=function(j){},A.wbg.__wbg_lowerBound_1872d19f5bcf83c6=function(){return de(function(j,e){return IDBKeyRange.lowerBound(j,e!==0)},arguments)},A.wbg.__wbg_mark_001da84b098c950f=function(){return de(function(j,e,t){j.mark(Ha(e,t))},arguments)},A.wbg.__wbg_measure_36bc93e7be4ed1bb=function(){return de(function(j,e,t,r,a,n,o){j.measure(Ha(e,t),Ha(r,a),Ha(n,o))},arguments)},A.wbg.__wbg_message_5c5d919204d42400=function(j,e){let t=e.message,r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},A.wbg.__wbg_message_97a2af9b89d693a3=function(j){return j.message},A.wbg.__wbg_msCrypto_60a4979188f6b80b=function(j){return j.msCrypto},A.wbg.__wbg_name_f2d27098bfd843e7=function(j,e){let t=e.name,r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},A.wbg.__wbg_navigator_0a9bf1120e24fec2=function(j){return j.navigator},A.wbg.__wbg_navigator_1577371c070c8947=function(j){return j.navigator},A.wbg.__wbg_new0_f788a2397c7ca929=function(){return new Date},A.wbg.__wbg_newVersion_8667edf9191f7473=function(j,e){let t=e.newVersion;N6().setFloat64(j+8*1,Vo(t)?0:t,!0),N6().setInt32(j+4*0,!Vo(t),!0)},A.wbg.__wbg_new_018dcc2d6c8c2f6a=function(){return de(function(){return new Headers},arguments)},A.wbg.__wbg_new_23a2665fac83c611=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return kUj(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_31a97dac4f10fab7=function(j){return new Date(j)},A.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},A.wbg.__wbg_new_5e0be73521bc8c17=function(){return new Map},A.wbg.__wbg_new_78feb108b6472713=function(){return new Array},A.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},A.wbg.__wbg_new_9fd39a253424609a=function(){return de(function(){return new FormData},arguments)},A.wbg.__wbg_new_a12002a7f91c75be=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_c68d7209be747379=function(j,e){return new Error(Ha(j,e))},A.wbg.__wbg_new_e25e5aab09ff45db=function(){return de(function(){return new AbortController},arguments)},A.wbg.__wbg_newnoargs_105ed471475aaf50=function(j,e){return new Function(Ha(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_a381634e90c276d4=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_newwithlength_b93fcdb8050ed017=function(j){return new Int32Array(j>>>0)},A.wbg.__wbg_newwithstrandinit_06c535e0a867c635=function(){return de(function(j,e,t){return new Request(Ha(j,e),t)},arguments)},A.wbg.__wbg_newwithu8arraysequenceandoptions_068570c487f69127=function(){return de(function(j,e){return new Blob(j,e)},arguments)},A.wbg.__wbg_next_25feadfc0913fea9=function(j){return j.next},A.wbg.__wbg_next_6574e1a8a62d1055=function(){return de(function(j){return j.next()},arguments)},A.wbg.__wbg_node_0deadde112ce24bb=function(j){return j.node},A.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},A.wbg.__wbg_objectStore_21878d46d25b64b6=function(){return de(function(j,e,t){return j.objectStore(Ha(e,t))},arguments)},A.wbg.__wbg_oldVersion_e8337811e52861c6=function(j){return j.oldVersion},A.wbg.__wbg_onChanged_840eeabefdb63196=function(j){return j.onChanged},A.wbg.__wbg_openCursor_1adef2266972fb45=function(){return de(function(j){return j.openCursor()},arguments)},A.wbg.__wbg_openCursor_238e247d18bde2cd=function(){return de(function(j){return j.openCursor()},arguments)},A.wbg.__wbg_openCursor_660622f9b2e1ae10=function(){return de(function(j,e){return j.openCursor(e)},arguments)},A.wbg.__wbg_open_e0c0b2993eb596e1=function(){return de(function(j,e,t,r){return j.open(Ha(e,t),r>>>0)},arguments)},A.wbg.__wbg_process_0caa4f154b97e834=function(j){return j.process},A.wbg.__wbg_push_737cfc8c1432c2c6=function(j,e){return j.push(e)},A.wbg.__wbg_put_9ef5363941008835=function(){return de(function(j,e){return j.put(e)},arguments)},A.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_d3219def82552485=function(j){return j.queueMicrotask},A.wbg.__wbg_randomFillSync_82e8b56b81896e30=function(){return de(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_read_f8fdd4b410209222=function(){return de(function(j,e,t,r){return j.read(zKA(e,t),r)},arguments)},A.wbg.__wbg_readyState_4013cfdf4f22afb0=function(j){let e=j.readyState;return(uUj.indexOf(e)+1||3)-1},A.wbg.__wbg_removeListener_664bcfbcef870056=function(j,e){j.removeListener(e)},A.wbg.__wbg_request_5079471e06223120=function(j){return j.request},A.wbg.__wbg_request_fada8c23b78b3a02=function(j){return j.request},A.wbg.__wbg_require_1a22b236558b5786=function(){return de(function(){return module.require},arguments)},A.wbg.__wbg_resolve_4851785c9c5f573d=function(j){return Promise.resolve(j)},A.wbg.__wbg_respond_1f279fa9f8edcb1c=function(){return de(function(j,e){j.respond(e>>>0)},arguments)},A.wbg.__wbg_result_f29afabdf2c05826=function(){return de(function(j){return j.result},arguments)},A.wbg.__wbg_self_6afa9654edd50769=function(){return de(function(){return self.self},arguments)},A.wbg.__wbg_session_d52b2e0c985cab9b=function(j){return j.session},A.wbg.__wbg_setTimeout_b4ee584b3f982e97=function(){return de(function(j,e,t){return j.setTimeout(e,t)},arguments)},A.wbg.__wbg_setTimeout_db2dbaeefb6f39c7=function(){return de(function(j,e){return setTimeout(j,e)},arguments)},A.wbg.__wbg_setTimeout_f2fe5af8e3debeb3=function(){return de(function(j,e,t){return j.setTimeout(e,t)},arguments)},A.wbg.__wbg_set_37837023f3d740e8=function(j,e,t){j[e>>>0]=t},A.wbg.__wbg_set_3f1d0b984ed272ed=function(j,e,t){j[e]=t},A.wbg.__wbg_set_65595bdd868b3009=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_set_8fc6bf8a5b1071d1=function(j,e,t){return j.set(e,t)},A.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return de(function(j,e,t){return Reflect.set(j,e,t)},arguments)},A.wbg.__wbg_setat_2a071a392643c10e=function(j,e){j.at=e},A.wbg.__wbg_setautoincrement_8b4327709e9ee7d9=function(j,e){j.autoIncrement=e!==0},A.wbg.__wbg_setbody_5923b78a95eedf29=function(j,e){j.body=e},A.wbg.__wbg_setcredentials_c3a22f1cd105a2c6=function(j,e){j.credentials=pUj[e]},A.wbg.__wbg_setheaders_834c0bdb6a8949ad=function(j,e){j.headers=e},A.wbg.__wbg_setkeypath_691179e313c26ae1=function(j,e){j.keyPath=e},A.wbg.__wbg_setmethod_3c5280fe5d890842=function(j,e,t){j.method=Ha(e,t)},A.wbg.__wbg_setmode_5dc300b865044b65=function(j,e){j.mode=mUj[e]},A.wbg.__wbg_setmultientry_4c4eee871f29837a=function(j,e){j.multiEntry=e!==0},A.wbg.__wbg_setonabort_3bf4db6614fa98e9=function(j,e){j.onabort=e},A.wbg.__wbg_setonblocked_aebf64bd39f1eca8=function(j,e){j.onblocked=e},A.wbg.__wbg_setoncomplete_4d19df0dadb7c4d4=function(j,e){j.oncomplete=e},A.wbg.__wbg_setonerror_b0d9d723b8fddbbb=function(j,e){j.onerror=e},A.wbg.__wbg_setonerror_d7e3056cc6e56085=function(j,e){j.onerror=e},A.wbg.__wbg_setonsuccess_afa464ee777a396d=function(j,e){j.onsuccess=e},A.wbg.__wbg_setonupgradeneeded_fcf7ce4f2eb0cb5f=function(j,e){j.onupgradeneeded=e},A.wbg.__wbg_setsignal_75b21ef3a81de905=function(j,e){j.signal=e},A.wbg.__wbg_settype_39ed370d3edd403c=function(j,e,t){j.type=Ha(e,t)},A.wbg.__wbg_signal_aaf9ad74119f20a4=function(j){return j.signal},A.wbg.__wbg_stack_0ed75d68575b0f3c=function(j,e){let t=e.stack,r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},A.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let j=typeof global>"u"?null:global;return Vo(j)?0:dd(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let j=typeof globalThis>"u"?null:globalThis;return Vo(j)?0:dd(j)},A.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let j=typeof self>"u"?null:self;return Vo(j)?0:dd(j)},A.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let j=typeof window>"u"?null:window;return Vo(j)?0:dd(j)},A.wbg.__wbg_status_f6360336ca686bf0=function(j){return j.status},A.wbg.__wbg_stringify_f7ed6987935b4a24=function(){return de(function(j){return JSON.stringify(j)},arguments)},A.wbg.__wbg_subarray_aa9065fa9dc5df96=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_sync_363f9379123022fc=function(j){return j.sync},A.wbg.__wbg_target_0a62d9d79a2a1ede=function(j){let e=j.target;return Vo(e)?0:dd(e)},A.wbg.__wbg_then_44b73946d2fb3e7d=function(j,e){return j.then(e)},A.wbg.__wbg_then_48b406749878a531=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_toString_5285597960676b7b=function(j){return j.toString()},A.wbg.__wbg_transaction_7d452475ef3c3c33=function(j){return j.transaction},A.wbg.__wbg_transaction_babc423936946a37=function(){return de(function(j,e,t,r){return j.transaction(Ha(e,t),JKA[r])},arguments)},A.wbg.__wbg_transaction_d6d07c3c9963c49e=function(){return de(function(j,e,t){return j.transaction(e,JKA[t])},arguments)},A.wbg.__wbg_truncate_29261a6365c72b01=function(){return de(function(j,e){j.truncate(e>>>0)},arguments)},A.wbg.__wbg_upperBound_76a00814e81f6891=function(){return de(function(j,e){return IDBKeyRange.upperBound(j,e!==0)},arguments)},A.wbg.__wbg_url_ae10c34ca209681d=function(j,e){let t=e.url,r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},A.wbg.__wbg_userAgent_12e9d8e62297563f=function(){return de(function(j,e){let t=e.userAgent,r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},arguments)},A.wbg.__wbg_userAgent_d036e8722fea0cde=function(){return de(function(j,e){let t=e.userAgent,r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},arguments)},A.wbg.__wbg_value_68c4e9a54bb7fd5e=function(){return de(function(j){return j.value},arguments)},A.wbg.__wbg_value_cd1ffa7b1ab794f1=function(j){return j.value},A.wbg.__wbg_values_99f7a68c7f313d66=function(j){return j.values()},A.wbg.__wbg_versions_134d8f3c6de79566=function(j){return j.versions},A.wbg.__wbg_view_fd8a56e8983f448d=function(j){let e=j.view;return Vo(e)?0:dd(e)},A.wbg.__wbg_wait_c19065fad9b95713=function(){return de(function(j,e,t,r){return Atomics.wait(j,e>>>0,t,r)},arguments)},A.wbg.__wbg_warn_4ca3906c248c47c4=function(j){console.warn(j)},A.wbg.__wbg_window_ef5723d5ef2e972e=function(){return de(function(){return window.window},arguments)},A.wbg.__wbg_write_530d3c84df874f53=function(){return de(function(j,e,t,r){return j.write(zKA(e,t),r)},arguments)},A.wbg.__wbindgen_as_number=function(j){return+j},A.wbg.__wbindgen_bigint_from_i64=function(j){return j},A.wbg.__wbindgen_bigint_from_u64=function(j){return BigInt.asUintN(64,j)},A.wbg.__wbindgen_bigint_get_as_i64=function(j,e){let t=e,r=typeof t=="bigint"?t:void 0;N6().setBigInt64(j+8*1,Vo(r)?BigInt(0):r,!0),N6().setInt32(j+4*0,!Vo(r),!0)},A.wbg.__wbindgen_boolean_get=function(j){let e=j;return typeof e=="boolean"?e?1:0:2},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper11177=function(j,e,t){return _F(j,e,4981,lUj)},A.wbg.__wbindgen_closure_wrapper11179=function(j,e,t){return _F(j,e,4981,cUj)},A.wbg.__wbindgen_closure_wrapper13833=function(j,e,t){return _F(j,e,6030,dUj)},A.wbg.__wbindgen_closure_wrapper2024=function(j,e,t){return _F(j,e,820,iUj)},A.wbg.__wbindgen_closure_wrapper3864=function(j,e,t){return _F(j,e,1773,sUj)},A.wbg.__wbindgen_closure_wrapper414=function(j,e,t){return _F(j,e,38,oUj)},A.wbg.__wbindgen_debug_string=function(j,e){let t=VrA(e),r=Nm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=Sk;N6().setInt32(j+4*1,a,!0),N6().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(Ha(j,e))},A.wbg.__wbindgen_in=function(j,e){return j in e},A.wbg.__wbindgen_init_externref_table=function(){let j=bt.__wbindgen_export_4,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_bigint=function(j){return typeof j=="bigint"},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_null=function(j){return j===null},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_jsval_eq=function(j,e){return j===e},A.wbg.__wbindgen_jsval_loose_eq=function(j,e){return j==e},A.wbg.__wbindgen_memory=function(){return bt.memory},A.wbg.__wbindgen_number_get=function(j,e){let t=e,r=typeof t=="number"?t:void 0;N6().setFloat64(j+8*1,Vo(r)?0:r,!0),N6().setInt32(j+4*0,!Vo(r),!0)},A.wbg.__wbindgen_number_new=function(j){return j},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=Vo(r)?0:Nm(r,bt.__wbindgen_malloc,bt.__wbindgen_realloc),n=Sk;N6().setInt32(j+4*1,n,!0),N6().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return Ha(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(Ha(j,e))},A}function gUj(A,j){return bt=A.exports,YKA.__wbindgen_wasm_module=j,sv=null,kD=null,bt.__wbindgen_start(),bt}async function YKA(A){if(bt!==void 0)return bt;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead"));let j=BUj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await EUj(await A,j);return gUj(e,t)}var QKA=YKA;var ZKA="/assets/wasm/op_wasm_xam_bg-YZCOBEGV.wasm";var YrA=A=>{if(A)return{itemUuid:A.uuid,vaultUuid:A.vault.uuid}},A5A=async(A,j,e,t)=>{await tA.startFillSession(A,j,{signInWithProviderItem:{item:YrA(e),provider:t}}),await CF(A,t)};async function cS(A,j){return A?browser.tabs.update(A.id,{url:j}):browser.tabs.create({url:j})}async function dS(){let{appLauncherLaunchAppsInNewTab:A}=YA();return A?void 0:await Gt()}async function xUj(A){let j=await Ij.loadItemCache();if(!j){console.error("Must unlock before we can find the USO provider item.");return}let t=(await Promise.all(j.fillableItems(o=>o.urlToNakedDomains?Object.values(o.urlToNakedDomains).some(i=>i==="google.com"):!1).map(r6))).filter(o=>!!o);if(A)return t.find(o=>o.username?.value&&A.toLowerCase()===o.username.value.toLowerCase());let a=_.getAccountHandlers.filter(o=>o.serveraccount.type==="B").map(o=>o.serveraccount.email.toLowerCase()),n=t.find(o=>o.username?.value&&a.includes(o.username.value.toLowerCase()));if(n)return n;if(t.length===1)return t[0]}async function fUj(A){if(!A.providers?.some(r=>r.name?.toLowerCase()==="google"))return!1;let e=A.links.application;if(!e)return console.error("Could not find an application URL for the app."),!0;let t=await cS(await dS(),e);return t.id?(await A5A(kg(t.id,e),void 0,await xUj(A.signOnEmail),J6.Google),!0):(console.error("Failed to create tab with valid ID."),!0)}async function kS(A){if(await fUj(A))return;let e=await Ij.loadItemCache();if(!e){console.error("Must unlock before we can find the uso provider item.");return}let t=A.signOnUrl??A.links.application;if(!t){console.error("App is missing a launch URL.");return}let r=tA.nakedDomainForUrl(t),a=await Promise.all(e.fillableItems(i=>i.urlToNakedDomains?Object.values(i.urlToNakedDomains).some(s=>s===r):!1).map(r6)),[n]=a.filter(i=>!!i).sort(i=>A.signOnEmail&&i.username?.value&&A.signOnEmail.toLowerCase()===i.username.value.toLowerCase()?-1:0),o=await dS();if(!n){console.info(`Could not load item for naked domain ${r}, falling back to URL without fill.`),await cS(o,t);return}await pg(n,{url:t,tabId:o?.id})}async function LF(A,j,e,t){return A?tA.getAccountIcon(A,j,e,t):Promise.resolve({id:`account-icon-${j}`,sources:[]})}async function lv(A,j,e){return A?tA.getVaultIcon(A,j,e):Promise.resolve({id:`vault-icon-${j}`,sources:[]})}async function QrA(A){let j=await Ij.loadItemCache();return j?j.activeItems(se.combine(se.userSelected(hr(),void 0,void 0,j),se.account(A))):[]}async function uS(A,j,e){let t=await QrA(A),r=[];try{r=await bUj()}catch(a){lj(new q.LoggableError({errorClass:E`SaveItemError`,message:E`Failed to get watchtower accounts`,stackOverrideError:a instanceof Error?a:void 0}))}return{usernameSuggestions:GUj(t),tagSuggestions:FUj(t),relatedItems:MUj(t,j,e?SUj(e):[]),watchtowerAccounts:r}}function GUj(A){return A.filter(se.logins).map(j=>j.overview.ainfo).filter(j=>j&&j.trim().length)}function FUj(A){return A.reduce((j,e)=>(e.overview.tags&&j.push(...e.overview.tags),j),[])}async function bUj(){return Wo().then(A=>A.map(j=>({email:j.email,accountName:j.name,accountUuid:j.uuid,itemsInWrongAccountAllowedDomains:j.itemsInWrongAccountAllowedDomains})))}var yUj="amazon",$Uj="apple",wUj="discord",IUj="facebook",DUj="github",OUj="google",PUj="microsoft",CUj="okta",HUj="slack",TUj="twitter";function KUj(A){switch(A){case"amazon.com":return yUj;case"apple.com":return $Uj;case"discord.com":return wUj;case"facebook.com":return IUj;case"github.com":return DUj;case"google.com":return OUj;case"microsoft.com":return PUj;case"okta.com":return CUj;case"slack.com":return HUj;case"twitter.com":return TUj;default:return}}function SUj(A){if(!A.details||!A.details.sections)return[];let j=t=>t.provider!==void 0,e=[];for(let t of A.details.sections)if(t.fields){for(let r of t.fields)if(r.k==="ssoLogin"&&j(r.v)){let a=r.v.item;a&&e.push({itemUuid:a.itemUuid,vaultUuid:a.vaultUuid})}}return e}function MUj(A,j,e){if(!j&&e.length===0)return[];let t=(a,n,o)=>o.indexOf(a)===n,r=[];for(let a of A){let n=e.some(({itemUuid:s,vaultUuid:l})=>a.uuid===s&&a.vault.uuid===l),i=(j&&a.templateUuid===Je||n)&&a.urlToNakedDomains?Object.values(a.urlToNakedDomains).filter(t).map(KUj).filter(s=>!!s):[];(n||i.length>0)&&r.push({itemOverview:fo(a),itemUuid:a.uuid,vaultUuid:a.vault.uuid,accountUuid:a.overview.b5AccountUUID??"",providers:i})}return r}var cv=({msg:A,userMessage:j,logRootError:e=!1})=>t=>{let r="[Save Dialog]";throw e?console.error(`${r} ${A}`,t):console.error(`${r} ${A}`),new q.LoggableError({errorClass:E`SaveItemError`,message:q.logsafe.assertLogSafe(j??A)})},Mk=A=>{let[j,e,t]=A.split("-");return{itemUuid:j,vaultUuid:e,accountUuid:t}};var e5A=/^https?:\/\/1password\.com\/applauncher/i,tp=()=>{let A=_.getAccountHandlers.filter(r=>r.serveraccount.type==="B");if(A.length===0)return{enabled:!1,reason:"no_b_accounts"};let j=A.filter(r=>hj.accountHasFlag(r.uuid,"b5x-launchpad"));if(j.length===0)return{enabled:!1,reason:"feature_disabled"};let e=bn(),t=j.filter(r=>{let a=e.getPolicyForAccount(r.uuid,"app-launcher-allowed");return!!a&&a.policyName==="app-launcher-allowed"&&a.definition.appLauncherPolicyEnabled===!0});return t.length===0?{enabled:!1,reason:"policy_disabled"}:{enabled:!0,enabledAccountUuids:t.map(r=>r.uuid)}},ZrA=(A,j)=>{let e=chrome.runtime.getURL("launcher/apps.html");(It()||Oe())&&!j?.alwaysUpdateTab?(chrome.tabs.create({url:e,active:!0}),chrome.tabs.remove(A)):chrome.tabs.update(A,{url:e,active:!0})},AaA=async A=>{if(A.id===void 0||!await i5A(A))return;let j=tp(),e=!!A.url&&e5A.test(A.url);j.enabled&&e&&ZrA(A.id,{alwaysUpdateTab:e})},_Uj=A=>!(Oe()||ri()&&A.documentLifecycle!=="active"),t5A=A=>{if(!_Uj(A)||!o5A(A.url))return;tp().enabled&&ZrA(A.tabId,{alwaysUpdateTab:!0})},r5A=async()=>{if(tp().enabled){let j=await t7();await Promise.all(j.map(async e=>{e.id&&await i5A(e)&&ZrA(e.id)}))}};async function a5A(A){let{accountUuid:j,itemUuid:e}=A.data,t=(await QrA(j)).find(a=>a.uuid===e);if(!t)throw Error("Vault item not found");(await N5(t,"view")).isErr()&&Q7(t)}var mg=()=>{let A=tp();return A.enabled?_.getAccountHandlers.filter(j=>A.enabledAccountUuids.includes(j.uuid)):[]},n5A=()=>mg()?.[0];var o5A=A=>e5A.test(A),LUj=A=>!!A&&o5A(A),i5A=async A=>A.id===void 0?!1:[await zUj(A),A.url,A.pendingUrl].some(LUj),NUj=A=>It()?A==="about:newtab"||A==="about:home":ri()?A==="chrome://newtab/"||A==="chrome://new-tab-page/"||A==="edge://newtab/":Oe()?A==="about:blank"||A==="favorites://":A==="about:blank";async function s5A(A){let j=await dS();await cS(j,A.data)}var zUj=async A=>{if(A.id!==void 0&&A.url&&NUj(A.url)){let j=new Promise(t=>setTimeout(()=>t(null),1e3)),e=await Promise.race([Rj("get-frame-url",void 0,{tabId:A.id,frameId:0}),j]);return e&&e.ok?e.data:void 0}};var l5A=async({xamEnabledAccounts:A,syncInvocation:j,unlockAccount:e})=>{let t=A.filter(l=>l.isUnlocked),r=t.map(l=>l.uuid),a=A.filter(l=>l.isLocked).map(l=>l.uuid),n=await j({unlockedAccountUuids:r});if(n.shouldUnlockUuids.length===0)return{xamEnabledUnlockedAccountUuids:r,xamEnabledLockedAccountUuids:a};let o=t.filter(l=>n.shouldUnlockUuids.includes(l.uuid));o.length===0&&console.warn(`${Yo} failed to identify any accounts to unlock in the XAM module`);let i=o.map(async l=>await e(l));return(await Promise.all(i)).some(l=>l===!1)&&console.warn(`${Yo} some accounts failed to unlock in the XAM module after sync`),{xamEnabledUnlockedAccountUuids:r,xamEnabledLockedAccountUuids:a}};var Yo="XAM:",jaA=class{constructor(){this.initInFlight=!1;this.synchronizing=!1;this.sender=void 0,this.isReadyPromise=new Promise((j,e)=>{this.isReadyResolver=j,this.isReadyRejecter=e}),this._initState="not_initialized"}async createDelegatedRequest(j){if(j.serveraccount.type!=="B"){console.warn(`${Yo} not supported for individual or family accounts`);return}if(!j.context){console.warn(`${Yo} No context for account uuid. Is the account unlocked?`);return}let e=j.user?.uuid;if(!e){console.warn(`${Yo} No user UUID found, cannot unlock the account`);return}let t=uh();await j.waitForClient();let r=await j.client?.getDelegateSessionInit(t);if(!r){console.warn(`${Yo} Failed to create delegated session.`);return}return{clientAuth:{userUuid:j.user?.uuid||"",accountUuid:j.uuid,notifierUrl:r?.serverConfig.notifier,baseUrl:j.serveraccount.signinAddress,deviceUuid:t.uuid,sessionId:r.sessionKey.kid,jwk:JSON.stringify(r.sessionKey),opUserAgent:xf(j.context.config.opua,await bp())},userUuid:e}}get initState(){return this._initState}async onUnlock(j){let e=await this.createDelegatedRequest(j);if(!e)return!1;let{clientAuth:t,userUuid:r}=e,a=await j.masterKey?.exportJwk();if(a)try{if(await this.invoke("Unlock",{jwk:JSON.stringify(a),accountAndUserUuid:{accountUuid:j.uuid,userUuid:r},session:t}))return`${Yo}${j.uuid}`,!0;console.error(`${Yo} ${j.uuid} failed to unlock`)}catch(n){console.error(`${Yo} ${j.uuid} encountered an error while unlocking`),console.error(n)}return!1}async handleDbUpdates(j){await this.invoke("DatabaseEvents",{accountId:j.accountId.toString(16),deletedItemIds:j.deletedItemIds.map(e=>e.toString(16)),upsertedItemIds:j.upsertedItemIds.map(e=>e.toString(16))})}async syncAppLauncherAccountState(){if(this.initState==="initialized")return this.synchronizing||(this.synchronizing=(async()=>{try{await this.invoke("SyncAccountSignInState",void 0);let j=mg(),r=await l5A({xamEnabledAccounts:j,syncInvocation:async a=>await this.invoke("SyncAccountState",a),unlockAccount:async a=>this.onUnlock(a)});r&&Rj("xam-backend-account-state-synced",r);return}finally{this.synchronizing=!1,`${Yo}`}})()),this.synchronizing}async initInner(){if(!_O())return console.error(`${Yo} \u26D4 WebAssembly.instantiate not found. Is WebAssembly supported by your browser and enabled?`),this._initState="wasm_not_supported",this._initState;if(this.sender!==void 0)return this._initState="initialized",this._initState;try{await QKA(ZKA),this.sender=await VKA({level:"Info",apiPollDelayInSeconds:60*10,trelicaDatabaseName:null},j=>{switch(j.type){case"TrelicaAppCatalogUpdated":{Rj("refresh-catalog-apps",j),`${Yo}${j.content.accountUuid}`;break}case"AccountOffline":{`${Yo}${j.content.accountUuid}`;break}case"AccountExpired":{`${Yo}${j.content.accountUuid}`,this.reInitDelegatedSession(j.content);break}default:ue(j)}}),this.isReadyResolver?.(),this._initState="initialized"}catch(j){console.warn(j),`${Yo}`,this.isReadyRejecter?.(j),this._initState="failed_to_initialize"}return this._initState}async reInitDelegatedSession({accountUuid:j}){let e=mg().find(r=>r.isUnlocked&&r.uuid===j);if(!e){console.warn(`${Yo} No unlocked account for uuid ${j}. Bailing to reinitialize a delegated session`);return}let t=await this.createDelegatedRequest(e);if(!t){console.warn(`${Yo} Failed to re-create a delegated session`);return}await this.invoke("ReloadDelegatedSession",{unlockedAccount:j,session:t.clientAuth})}async init(){return this.initInFlight||(this.initInFlight=(async()=>{try{return await this.initInner()}finally{this.initInFlight=!1}})()),this.initInFlight}async invoke(j,e){return await this.isReadyPromise,new Promise((t,r)=>{if(!this.sender){r("forgot to call init?");return}this.sender.sendCallback({type:j,content:e},a=>{switch(a.type){case"Success":{let n=a.content;if(n.type!==j){r(`Mismatched response type: ${n.type} !== ${j}`);return}t(n.content);break}case"Failure":{r(a.content);break}default:return ue(a)}})})}},Xt=new jaA;function JUj(A){return PPA.find(j=>j===A)}async function pD(A){let j=await Ij.loadItemCache();if(!j)return[];let e=j.itemsForTab(A,se.combine(se.logins,se.userSelected(hr(),void 0,void 0,j)),a6.faved);return(await Promise.all(e.map(async r=>{let a=await r6(r),n=a?eaA(a):[];return{item:r,signInWithLogins:n}}))).filter(({signInWithLogins:r})=>r.length>0)}var eaA=A=>{if(!A.details||!A.details.sections||A.details.sections.length===0)return[];let j=[];for(let e of A.details.sections)if(!(!e.fields||e.fields.length===0))for(let t of e.fields){let r=fA.VaultItem.getSsoValue(t);if(!r)continue;let a=JUj(r.provider);a&&j.push({...r,provider:a})}return j},dv=async A=>{let j=n5A();if(!j?.user?.uuid){console.warn("Cannot find supported account to load managed apps");return}let e=await Xt.invoke("AppCatalog",{sort:void 0,accountAndUserUuid:{accountUuid:j.uuid,userUuid:j.user.uuid}}).then(r=>{switch(r.type){case"Ok":return r.content;case"FetchError":case"FailedToFetchDecryptionKey":case"NoApps":return[]}}).catch(r=>(console.error("Failed to obtain managed apps from the XAM backend."),[])),t=A.nakedDomain();return e.find(r=>{if(!r.links.application||!r.signOnUrl)return!1;try{let a=tA.nakedDomainForUrl(r.links.application);return t===a}catch{return console.error("Failed to get naked domain for managed app URL."),!1}})};var mD=6,kv=new Z5("sign-in-with-save-sessions"),c5A=()=>{nr.subscribe(bd,k5A).subscribe(Or,u5A).subscribe(Zk,XUj)},XUj=A=>A.detail.notifications.filter(j=>j.type==="saveSocialLogin").forEach(j=>{j.tabId&&VUj(j.tabId)}),VUj=A=>{kv.with(async j=>Promise.resolve(j.delete(A)))},d5A=()=>{nr.unsubscribe(bd,k5A).unsubscribe(Or,u5A)},k5A=async A=>{let j=await an(A.detail.tabId);if(!j){console.error("[Sign in with] Tab no longer exists for session.");return}!NF()||Jn.has(j)||await kv.with(async e=>{if(_.allAccountHandlersAreLocked){e.set(A.detail.tabId,{type:"pending",data:{...A.detail,nakedDomain:j.nakedDomain(),title:j.title,url:j.unparsedUrl}});return}await taA(j,A.detail)||(e.set(A.detail.tabId,{type:"ready",data:{...A.detail,expirationNavigationCount:mD,nakedDomain:j.nakedDomain(),title:j.title,url:j.unparsedUrl}}),await ta(A.detail.tabId,{type:"saveSocialLogin"}))})};function u5A(){NF()&&kv.with(async A=>{for(let[j,e]of A){if(e.type!=="pending")continue;let t=await an(j);if(!t){A.delete(j);continue}if(await taA(t,e.data)){A.delete(j);continue}t.nakedDomain()===e.data.nakedDomain?A.set(t.id,{type:"ready",data:{...e.data,title:t.title,expirationNavigationCount:mD}}):A.set(t.id,{type:"ready",data:{...e.data,expirationNavigationCount:mD}}),await ta(j,{type:"saveSocialLogin"})}})}async function taA(A,j){if(await dv(A))return!0;let t=await pD(A);if(!j.linkedAccount){let r=t.some(({signInWithLogins:a})=>a.some(n=>n.provider===j.provider));return r&&console.info("[Sign in with] Should skip save notification because an UsoLogin field for this provider and site already exists."),r}switch(j.linkedAccount.type){case"Username":{let r=j.linkedAccount.content,a=!!await btA(t,async({signInWithLogins:n})=>!!await btA(n,async({provider:o,item:i})=>{if(!i||o!==j.provider)return!1;let s=await Rr(i.itemUuid,i.vaultUuid);return s?r.toLowerCase()===s.username?.value.toLowerCase():!1}));return a&&console.info("[Sign in with] Should skip save notification because an item with a matching username for this provider already exists."),a}case"Item":{let{accountUuid:r,vaultUuid:a,itemUuid:n}=j.linkedAccount.content,o=t.some(({item:i,signInWithLogins:s})=>i.overview.b5AccountUUID===r&&s.find(({provider:l,item:d})=>d&&l===j.provider&&d.itemUuid===n&&d.vaultUuid===a));return o&&console.info("[Sign in with] Should skip save notification because the filled provider item has already been saved."),o}default:ue(j.linkedAccount)}}async function p5A(A){if(NF())return kv.with(async j=>{let e=j.get(A.id);if(e)switch(e.type){case"pending":{if(_.allAccountHandlersAreLocked)break;if(await taA(A,e.data)){j.delete(A.id);return}A.nakedDomain()===e.data.nakedDomain?j.set(A.id,{type:"ready",data:{...e.data,title:A.title,expirationNavigationCount:mD}}):j.set(A.id,{type:"ready",data:{...e.data,expirationNavigationCount:mD}}),await ta(A.id,{type:"saveSocialLogin"});break}case"ready":if(!nn("saveSocialLogin")&&(e.data.expirationNavigationCount-=1,e.data.expirationNavigationCount<=0)){j.delete(A.id);break}A.nakedDomain()===e.data.nakedDomain&&(e.data.title=A.title),await ta(A.id,{type:"saveSocialLogin"});break;default:ue(e)}})}async function WUj(A,j){if(A.usoAccount)switch(A.usoAccount.type){case"Username":{let e=A.usoAccount.content;return(await Promise.all(j.map(async r=>{let a=await r6(r);return{item:r,username:a?.username?.value}}))).find(r=>r.username===e)?.item}case"Item":{let e=A.usoAccount.content;return j.find(t=>t.uuid===e.itemUuid&&t.vault.uuid===e.vaultUuid&&t.overview.b5AccountUUID===e.accountUuid)}default:ue(A.usoAccount)}}async function YUj(A,j){let e=await Ij.loadItemCache();return e?e.items(se.combine(se.userSelected(hr(),void 0,void 0,e),t=>j?t.overview.b5AccountUUID?j===t.overview.b5AccountUUID&&se.usoProviderLogins(A)(t):!1:se.usoProviderLogins(A)(t)),a6.faved):[]}async function m5A(A,j){let e=j.tab.id;if(!e)throw new Error("invalidTab");let{showRichIcons:t}=YA();return kv.with(async r=>{let a=r.get(e);if(!a||a.type!=="ready")throw new Error("invalidSession");let{displayName:n,icon:o}=await tA.signInWithProviderConfig(a.data.provider),i=await tA.getRichIconForUrl(a.data.url,a.data.title,t),s=await tA.inferBestTitle(a.data.title,a.data.url)??a.data.title;return{icon:i,providerDisplayString:n,providerIcon:o,title:s}})}async function E5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("invalidTab");let t=await kv.with(async s=>{let l=s.get(e.id);if(!(!l||l.type!=="ready"))return s.delete(e.id),{provider:l.data.provider,tabId:e.id,title:l.data.title,url:l.data.url,usoAccount:l.data.linkedAccount}});if(!t)throw new Error("invalidSession");let r=await YUj(t.provider),a=await Ij.loadItemCache(),n=s=>{let l=s.overview.b5AccountUUID??a?.accountForVaultID(Ua(s.vault))?.uuid;if(l)return{type:"Item",content:{accountUuid:l,vaultUuid:s.vault.uuid,itemUuid:s.uuid}}},o=await WUj(t,r),i;o?i=n(o):r.length===0?i={type:"Provider"}:r.length===1&&(i=n(r[0])),on(e,Je,{name:"uso-context",data:{context:t,suggestedItem:i}})}function B5A(A,j){let e=j.tab.id;if(!e){console.error("[Sign in with] Invalid tab id when cancelling session.");return}kv.with(async t=>{t.delete(e)})}var h5A=()=>{nr.subscribe(Or,v5A).subscribe(hp,x5A)},q5A=()=>{nr.unsubscribe(Or,v5A).unsubscribe(hp,x5A)};async function v5A(){let A=await _k(),j=(await Promise.allSettled(A.map(async t=>({tab:t,action:await b5A(t)})))).filter(t=>t.status==="rejected"?(console.error("[Sign in with] Failed to detect whether or not to show the notification:",t.reason),!1):!0).map(t=>t.value).filter(({action:t})=>t==="show-notification").map(({tab:t})=>t);(await Promise.allSettled(j.map(async t=>ta(t.id,{type:"suggestSocialLogin"})))).forEach(t=>{t.status==="rejected"&&console.error("[Sign in with] Failed to show notification for tab:",t.reason)})}async function x5A(A){let j=Ft(A.detail.tab);if(!j)throw new Error("InvalidTab");let e=await b5A(j);if(e)switch(e){case"show-notification":{ta(j.id,{type:"suggestSocialLogin"});break}case"notify-stale":{Rj("sign-in-with-button-detected",void 0,{tabId:j.id});break}default:ue(e)}}async function f5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let t=await zF(e);if(t.length===0)return{accounts:[]};let{showRichIcons:r}=YA(),a=await Ij.loadItemCache();if(!a)return{accounts:[]};let n=[],o=await pD(e);for(let s of o){let l=[];for(let d of s.signInWithLogins){let k=t.includes(d.provider)?d.provider:void 0,u=d.item&&a.itemWithUUID(d.item.itemUuid),m=k?{provider:k,itemUuid:s.item.uuid,vaultUuid:s.item.vault.uuid,linkedItem:d.item}:void 0;u?l.push({title:u.title,subtitle:u.subtitle,icon:await xo(u,120,r),clickProvider:m}):l.push({...await QUj(d.provider),clickProvider:m})}n.push({title:s.item.title,icon:await xo(s.item,120,r),items:l})}let i=await dv(e);return{accounts:n,managedApp:i?{icon:await tA.getRichIconForUrl(e.unparsedUrl,e.title,!0),...i}:void 0}}async function G5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let{itemUuid:t,linkedItem:r,provider:a}=A.data,n=await Rr(t);if(n)return pc(e,n,"INLINE",{signInWithProviderItem:{item:r?{...r}:void 0,provider:a}})}async function F5A(A){return kS(A.data)}async function QUj(A){let{displayName:j,icon:e}=await tA.signInWithProviderConfig(A);return{title:j,icon:e}}async function b5A(A){if(_.allAccountHandlersAreLocked||Jn.has(A))return;let j=await Lm(A.id);if(!nn("suggestSocialLogin")&&j.length>0&&!j.includes("suggestSocialLogin"))return;if(j.includes("suggestSocialLogin"))return"notify-stale";if((await zF(A)).length===0)return;let t=await dv(A);if((await pD(A)).length>0||t)return"show-notification"}async function pS(A,j){let e=await tA.signInWithEvent({tabId:A,event:j});if(e)switch(e.type){case"signInWithDetected":globalThis.dispatchEvent(new CustomEvent(bd,{detail:e.content}));break;case"signInWithProviderFlowStarted":globalThis.dispatchEvent(new CustomEvent(tx,{detail:e.content}));break;case"signInWithUnexpectedNavigation":globalThis.dispatchEvent(new CustomEvent(rx,{detail:e.content}));break;default:ue(e)}}function AXj(A){A.statusCode===302&&pS(A.tabId,{type:"before-redirect",data:{url:A.url,redirectUrl:A.redirectUrl}})}function jXj(A){pS(A.tabId,{type:"committed",data:{url:A.url,transitionQualifiers:A.transitionQualifiers,transitionType:A.transitionType}})}function eXj(A){pS(A.tabId,{type:"created-navigation-target",data:{url:A.url,sourceTabId:A.sourceTabId}})}function tXj(A,j){pS(A,{type:"tab-removed",data:{isWindowClosing:j.isWindowClosing}})}async function y5A(A,j){if(!NF()||j.templateUuid!==Je)return;let e=await Ij.loadItemCache();if(!e)return;let t=j.overview.b5AccountUUID??e.accountForVaultID(Ua(j.vault))?.uuid;t&&await tA.signInWithEvent({tabId:A.id,event:{type:"link-account",data:{tabId:A.id,account:{type:"Item",content:{accountUuid:t,itemUuid:j.uuid,vaultUuid:j.vault.uuid}}}}})}function rXj(){"chromium".includes("safari")||(chrome.webNavigation.onCommitted.addListener(jXj),chrome.tabs.onRemoved.addListener(tXj),chrome.webNavigation.onCreatedNavigationTarget&&chrome.webNavigation.onCreatedNavigationTarget.addListener(eXj),chrome.webRequest?.onBeforeRedirect&&chrome.webRequest.onBeforeRedirect.addListener(AXj,{urls:["<all_urls>"],types:["main_frame"]}))}function NF(A){let j=A??YA().socialLoginsEnabled;return j&&"chromium".includes("safari")?(console.info("[Sign in with] Skipping sign in with session management because of unsupported APIs in Safari."),!1):j}function mS(){rXj();let A=YA().socialLoginsEnabled;A&&h5A(),NF(A)&&c5A()}function $5A(){q5A(),!"chromium".includes("safari")&&d5A()}async function w5A(A,j){if(!j.tab.id)throw new Error("invalidTab");let e=A.data;await tA.signInWithEvent({tabId:j.tab.id,event:{type:"link-account",data:{tabId:j.tab.id,account:e}}})}var nXj=[Y8,Q8,W8];async function pv(A,j,e){let t=await Gt();if(!t)throw new Error("Unable to find active tab");return pc(t,A,j,e)}async function pc(A,j,e,t){if(typeof A.id=="number"&&await D5A(A,j))return Promise.resolve();let r=await tA.startFillSession(A,j,t);switch(r.type){case"autofill":return ED(A,j,e,t);case"sign-in-with-provider":{let{provider:a}=r.data;return iXj(A,j,a,e)}default:return console.error(`Started fill session in state \`${r.type}\`, an invalid state.`),tA.clearFillSession(A.id)}}async function pg(A,j={},e){let t=j.url??A.url;if(!t)throw new q.LoggableError({errorClass:E`OpenAndFillItem`,message:E`No url was provided on the item or directly.`});let r=typeof j?.tabId!="number"?await jKA(t):await browser.tabs.update(j.tabId,{url:t});if(r.id===void 0)throw new q.LoggableError({errorClass:E`OpenAndFillItem`,message:E`Tab ID is undefined.`});let a=kg(r.id,t);return pc(a,A,"OPEN_AND_FILL",e)}function oXj(A){let{autoSubmitLogins:j}=YA();return j?A.overview.autosubmit!=="never":!1}async function ED(A,j,e,t){let r=await Yr(A),n=await(async()=>{if(t?.designationFilter){let{fillPayload:l}=await tA.fillItem(j,r,t);return{fillPayload:l}}else return tA.nextFill(j,r,A,{...t,postFill:t?.postFill??{type:"contextual",content:{autosubmitEnabled:oXj(j)}}})})(),o=!1,i=()=>{let l=A.URL(),{requireFillSensitivePrompt:d,requireFillCreditCardPrompt:k,requireFillLoginPrompt:u}=YA(),m=nXj.some(C=>C===j.templateUuid),I=j.templateUuid===Ur&&k,S=j.templateUuid===Je&&u,f;if(I)f=3;else if(S)f=1;else if(d||m)f=2;else return;let P=!(l&&$m(l.hostname));if(n.fillPayload.frames.some(C=>C.allowedTargets.type==="Anywhere")&&P||f===1)return f},s=sXj(r,n.fillPayload);if(s.isErr()){console.error(`Could not check for authorized protocol for frame ${s.error}`);return}if(s.value.requiresAuthorization){let{authorized:l}=await uv(A,5);if(l)o=!0;else throw new Error("User did not authorize to fill.")}else if(t?.requireAuthorization){let l=i();if(l){let{authorized:d}=await uv(A,l);if(!d)throw new Error("User did not authorize to fill.")}}Rj("autofill-perform-fill",{nextFill:n,authorizedUnsafeHttp:o},{tabId:A.id}),j.overview.b5AccountUUID&&hj.accountHasFlag(j.overview.b5AccountUUID,"b5x-watchtower-breach-notification")&&SKA.handleWatchtowerBreach(A.id,j.uuid),e&&j.templateUuid&&j.overview.b5AccountUUID&&St("ItemAutofill",{template_uuid:aaA.TelemetryString.assertSafeForTelemetry(j.templateUuid),status:"REQUEST",fill_method:e,is_default:await I5A(j),fields_filled:dXj(n)},j.overview.b5AccountUUID),t?.skipItemUsage||Ks(j,cA.ItemUsageAction.Fill),y5A(A,j)}var iXj=async(A,j,e,t)=>{Ks(j,cA.ItemUsageAction.SelectSsoProvider),j.templateUuid&&j.overview.b5AccountUUID&&(Bc(j.overview.b5AccountUUID,LA.UsoTelemetryActions.Filled),t&&St("ItemAutofill",{template_uuid:aaA.TelemetryString.assertSafeForTelemetry(j.templateUuid),status:"REQUEST",fill_method:t,social_login_type:e,is_default:await I5A(j)},j.overview.b5AccountUUID)),await CF(A,e)};function sXj(A,j){for(let e of j.frames){let t=A.frames.find(a=>a.uuid===e.uuid);if(!t)return TA(e?.uuid);if(!t.origin||t.origin.type==="appId")continue;let r=!1;try{if(t.origin?.type==="url")r=new URL(t.origin.content.origin).protocol==="https:";else continue}catch{continue}if(!(r||e.allowUnsafeHttp))return Oj({requiresAuthorization:!0})}return Oj({requiresAuthorization:!1})}async function RF(A,j,e,t,r){let a=await tA.fill(e,j,r);return Rj("autofill-perform-fill",{nextFill:{fillPayload:a.fillPayload},authorizedUnsafeHttp:t},{tabId:A.id})}var lXj=["ssh-key-title","ssh-key","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","one-time-code","organization","street-address","address-line1","address-line2","address-line3","address-level1","address-level2","address-level3","address-level4","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp","crypto-address","crypto-recovery-seed","recovery-code"];function cXj(A){return lXj.includes(A)}function dXj(A){if(!A)return[];let j=[];return A.fillPayload.filledDesignations.forEach(e=>{cXj(e)&&j.push(e)}),j}async function I5A(A){let j=await _.getPersonItemsForAccounts();return JF(A,j)}async function ES(A){let j=Ij.itemCache?.accountForVaultID(Ua(A.vault));if(!j)throw new Error("Unable to find account by vault localId");let e=await _A.getDatabase().findAccountByUUID(j.uuid);return e?tA.generateSharableItemLink({accountUuid:j.uuid,itemUuid:A.uuid,vaultUuid:A.vault.uuid,host:e.signinAddress}):Promise.reject(new Error("Unable to generate sharable item link. Account with the given UUID could not be found."))}async function BS(A){let j=_.findAccountHandlerByUuid(A);return j?j.getIntegrationCredentials("fastmail"):[]}async function mv(){for(let A of _.getAccountHandlers){if(A.isLocked)continue;if((await A.getIntegrationCredentials("fastmail")).length>0)return!0}return!1}async function P5A(A,j,e,t){let r=await ld(A,e,"fastmail");if(!r)throw new Error("Could not obtain Fastmail access token.");return tA.updateEmailAlias(r.accessToken,j,t)}async function C5A(A,j,e){let t=await ld(A,e,"fastmail");if(!t)throw new Error("Could not obtain Fastmail access token.");return tA.getEmailAliasState(t.accessToken,j)}async function H5A(A,j){let e=await tA.getOauthAccessToken({url:"https://api.fastmail.com/oauth/refresh",client_id:"35c941ae",grant_type:"refresh_token",refresh_token:j});return e.type==="Error"?(console.error("Could not generate new access token."),TA({type:"RequestError"})):Oj({refreshToken:j,accessToken:e.content.accessToken,expiresIn:e.content.expiresIn,context:void 0})}async function iS(A,j){if(j==="001"&&await mv())return(await tA.getEmailAliasSessionStatus(A.id,A.unparsedUrl))?.alias}async function T5A(A,j){try{return(await BS(A)).some(t=>t.accountId===j.fastmailAccountId)}catch(e){return lj(new q.LoggableError({errorClass:E`SaveDialogGetSaveAccountsAndVaultsFor`,message:E`Could not get fastmail credentials for account.`,userUuid:oj.assertLogSafe(A),stackOverrideError:e instanceof Error?e:void 0})),j.accountUuid===A}}async function zm(A,j,e,t){let r=await tA.getEmailAliasSessionStatus(A,j);if(!r){if(t)return t();throw new Error("There is no current Masked Email session")}let a=(await ld(r.accountUuid,r.fastmailAccountId,"fastmail"))?.accessToken;if(!a){if(t)return t();throw new Error("Could not get Fastmail access token.")}try{return await e(a,r)}catch(n){throw R5(r.accountUuid,r.fastmailAccountId,"fastmail"),n}}async function K5A(A){await gc,await mv()&&zm(A,void 0,async j=>tA.endEmailAliasSession(A,j),async()=>tA.endEmailAliasSession(A))}var gS;async function S5A(A,j){await mv()&&(gS&&await gS,gS=(async()=>{try{let e=await tA.getEmailAliasSessionStatus(A);if(!e)return;(tA.nakedDomainForUrl(j)!==e.nakedDomain||!e.enabled)&&await zm(A,void 0,async r=>tA.endEmailAliasSession(A,r),async()=>tA.endEmailAliasSession(A))}finally{gS=void 0}})())}async function hS(A,j){if(j.templateUuid==="001"&&await mv()){try{let e=await tA.getEmailAliasSessionStatus(A.id,A.unparsedUrl);if(!e?.alias||e.alias?.type!=="Fastmail")return;let t=await ES(j);await zm(A.id,A.unparsedUrl,async(r,a)=>{!a?.alias||a.alias?.type!=="Fastmail"||await tA.updateEmailAlias(r,a.alias.content.alias_id,{url:t})})}catch{console.error(`Could not set the url property on the email alias for item ${j.uuid}`)}try{await zm(A.id,A.unparsedUrl,async e=>tA.endEmailAliasSession(A.id,e),async()=>tA.endEmailAliasSession(A.id))}catch{}}}async function M5A(A){if(!A.details||!A.details.sections)return{};let j={};for(let e of A.details.sections)if(e.fields)for(let t of e.fields){if(t.k!=="email"||!t.a)continue;let r=t.a.provider;if(!(!r||r.type!=="fastmail")){if(!r.data.aliasId||!r.data.accountId){console.error("Provider data is malformed.");continue}try{let a=await C5A(ig(A),r.data.aliasId,r.data.accountId);a&&(j[r.data.aliasId]=a)}catch{continue}}}return j}async function BD(A,j){let e=await Yr(A);await RF(A,e,{fillTargets:[{type:"Url",data:A.unparsedUrl}],fields:[{designation:Nj.Username,value:j,label:"email address",htmlId:"",htmlName:"",fieldTypes:[],checked:!1,restricted:!1}]},!1,{postFill:{type:"focusNextField"}});let{shouldPrompt:t}=await tA.shouldPromptToSave(e);return t&&await on(A,Je,{name:"collected-page-details",data:{collectedPageDetails:e}}),t}var kXj=async(A,j,e,t,r)=>{switch(r.name){case"new-item":return{type:"new-item",data:await Ev(A,j,e,!0)};case"suggested-item":return t.length===1?{type:"update-item",data:await gD(A,t[0],e,!0)}:{type:"new-item",data:await Ev(A,j,e,!0)};case"update-item":{let a;try{a=await Rr(r.data.itemUuid)}catch(n){lj(new q.LoggableError({errorClass:E`ConfigureSaveSession`,message:E`Failed to load item selected for update item.`,stackOverrideError:n instanceof Error?n:void 0}))}return a?{type:"update-item",data:await gD(A,a,e,!0)}:{type:"new-item",data:await Ev(A,j,e,!0)}}default:ue(r)}},uXj=async(A,j,e,t)=>{if(t){let r;try{r=await Rr(t)}catch(a){lj(new q.LoggableError({errorClass:E`UnlockSaveSession`,message:E`Failed to load item selected for update item.`,stackOverrideError:a instanceof Error?a:void 0}))}if(r)return{type:"update-item",data:await gD(A,r,e,!0)}}return{type:"new-item",data:await Ev(A,j,e,!0)}},pXj=async(A,j,e,t)=>{if(t){let r;try{r=await Rr(t)}catch(a){lj(new q.LoggableError({errorClass:E`VerifyUnlockedSession`,message:E`Failed to load item selected for update item.`,stackOverrideError:a instanceof Error?a:void 0}))}return r?{type:"update-item",data:await gD(A,r,e,!1)}:{type:"new-item",data:await Ev(A,j,e,!0)}}return{type:"new-item",data:await Ev(A,j,e,!1)}};async function L5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let t;try{t=await tA.saveManagerStatus(e)}catch(s){return We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to load save session for tab.`,stackOverrideError:s instanceof Error?s:void 0})),{type:"error",data:void 0}}let r;try{r=await tA.getEmailAliasSessionStatus(e.id)}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to load masked email session for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}let a=[];try{a=await Lk(r)}catch(s){return We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to load account information for Save Dialog.`,stackOverrideError:s instanceof Error?s:void 0})),{type:"error",data:void 0}}let n=[];try{n=t.isUpdatable?await hD(t.templateUuid,t.associatedNakedDomains,r):[]}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to load account information for Save Dialog.`,stackOverrideError:s instanceof Error?s:void 0}))}let o=[];try{o=await mXj(e,n,t.templateUuid)}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to find matching items for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}let i;try{i=n.length>0?{hasMatchForPage:o.length>0,itemListElements:await Bv(a,n)}:void 0}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to find matching items for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}try{switch(t.state.type){case"Unconfigured":{let s=await kXj(e,a,t,o,t.state.data);return{type:"success",data:{initialView:s,updatableItems:i,showUpdatableItemList:t.state.data.name==="suggested-item"&&s.type==="new-item"&&!!i?.hasMatchForPage}}}case"Locked":return{type:"success",data:{initialView:await uXj(e,a,t,t.state.data),updatableItems:i,showUpdatableItemList:!1}};case"Unlocked":return{type:"success",data:{initialView:await pXj(e,a,t,t.state.data),updatableItems:i,showUpdatableItemList:!1}};default:ue(t.state)}}catch(s){return We(s)?lj(s):lj(new q.LoggableError({errorClass:E`SaveDialogConfiguration`,message:E`Failed to generate save dialog configuration.`,stackOverrideError:s instanceof Error?s:void 0})),{type:"error",data:void 0}}}async function mXj(A,j,e){if(j.length===0)return[];let t=await tA.saveManagerMatchingItems(A,j,e);return t.length===0?[]:j.filter(r=>t.includes(r.uuid))}async function hD(A,j,e){let t=await Ij.loadItemCache();if(!t)return[];let r=o=>!!o.urlToNakedDomains&&j.some(i=>se.nakedDomain(i)(o)),a=t.items(se.combine(se.invert(se.frozenAccountItem(t)),se.invert(se.managed),se.active,se.template(A),se.userSelected(hr(),void 0,void 0,t),se.if(vS,r)));return(await Promise.all(a.map(async o=>r6(o)))).filter(o=>o?e?o.overview.b5AccountUUID===e.accountUuid:!0:!1)}async function Bv(A,j,e){let{showRichIcons:t}=YA(),r=[];for(let a of A)for(let n of a.vaults){let o=j.filter(i=>i.vault.uuid===n.uuid);if(o.length!==0){r.length>0&&r.push({type:"separator",data:{id:`separator-${n.uuid}`}}),r.push({type:"header",data:{id:`header-${n.uuid}`,accountLabel:a.name,accountIcon:await LF(a.baseAvatarUrl,a.uuid,a.avatar,a.type),vaultLabel:n.name,vaultIcon:await lv(n.baseAvatarUrl,a.uuid,n.avatar)}});for(let i of o)r.push({type:"option",data:{id:`${i.uuid}-${n.uuid}-${a.uuid}`,label:i.title,subtitle:i.subtitle,icon:await xo(i,60,t),isDefault:e?i.localId===e:void 0}})}}return r}async function Lk(A){let j=hr(),e=[];for(let t of _.getUnlockedAccountOverviews){if(t.vaults.length===0||j.isExcluded(t.uuid)||t.vaults.every(a=>j.isExcluded(t.uuid,a.uuid)||a.type===fA.Vault.TypeManagedApplications))continue;let r=!1;A&&(r=!await T5A(t.uuid,A)),e.push({uuid:t.uuid,name:t.name,baseAvatarUrl:t.baseAvatarUrl,avatar:t.avatar,type:t.type,disabled:r,vaults:t.vaults.filter(a=>!j.isExcluded(t.uuid,a.uuid)&&a.type!==fA.Vault.TypeManagedApplications).map(a=>({uuid:a.uuid,name:a.name,baseAvatarUrl:a.baseAvatarUrl,avatar:a.avatar}))})}return e}async function N5A(A,j){let e=A.find(r=>j&&r.uuid===j.accountUuid),t=e?e.vaults.find(r=>j&&r.uuid===j.vaultUuid):void 0;if(e&&t){let r=[{icon:await LF(e.baseAvatarUrl,e.uuid,e.avatar,e.type),text:e.name},{icon:await lv(t.baseAvatarUrl,e.uuid,t.avatar),text:t.name}];return{elements:await _5A(A,j),selectedOption:r}}else return{elements:await _5A(A,void 0),selectedOption:void 0}}async function _5A(A,j){A.sort((t,r)=>t.disabled>=r.disabled?1:-1);let e=[];for(let t of A)if(t.vaults.length!==0){e.length>0&&e.push({type:"separator",data:{id:`separator-${t.uuid}`}}),e.push({type:"header",data:{id:`header-${t.uuid}`,label:t.name.toUpperCase()}});for(let r of t.vaults.filter(a=>!rp(a))){let a=j&&j.accountUuid===t.uuid&&j.vaultUuid===r.uuid;e.push({type:"option",data:{id:`${t.uuid}-${r.uuid}`,icon:await lv(r.baseAvatarUrl,t.uuid,r.avatar),label:r.name,state:a?"selected":t.disabled?"disabled":"enabled"}})}}return e}async function z5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let t=await tA.getEmailAliasSessionStatus(e.id),r=await Lk(t),a=await tA.saveManagerStatus(e);return Ev(e,r,a,!0)}async function R5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let{itemUuid:t,vaultUuid:r}=Mk(A.data.id),a=await Rr(t,r);if(!a)throw new q.LoggableError({errorClass:E`SaveDialogHandleUpdateItemView`,message:E`Could not load selected item.`});let n=await tA.saveManagerStatus(e);return gD(e,a,n,!0)}async function J5A(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let[t,r]=A.data.split("-"),a={accountUuid:t,vaultUuid:r},n=await tA.saveManagerStatus(e).catch(cv({msg:"Failed to get save session status",logRootError:!0})),o;(!n.vaultSelector.saveLocation||a.accountUuid!==n.vaultSelector.saveLocation?.accountUuid)&&(o=await uS(a.accountUuid,n.isUso).catch(cv({msg:"Failed to get related item data"})));let i=await tA.saveManagerAction({type:"vault-selector",content:{tabInfo:{tabId:e.id,tabUrl:e.unparsedUrl},saveLocation:a,relatedData:o}}).catch(cv({msg:"Failed to update vault selection in save session",logRootError:!0}));if(i.type!=="vault-selector")throw new Error("Invalid response type.");let s;try{s=await tA.getEmailAliasSessionStatus(e.id)}catch{}let l=await Lk(s);return{vaultSelector:await N5A(l,i.content.vaultSelector),viewModel:i.content.viewModel}}async function U5A(A,j){let e,t=Ft(j.tab);if(!t)throw new Error("InvalidTab");try{let{type:r,data:a}=A.data,n=await tA.saveManagerStatus(t).catch(cv({msg:"Failed to get save session status",logRootError:!0})),o=await tA.saveManagerAction({type:r,content:{saveValues:a.values,tabInfo:{tabId:t.id,tabUrl:t.unparsedUrl}}}).catch(cv({msg:`Failed to run save manager action ${r}`,logRootError:!0}));switch(e=n.vaultSelector?.saveLocation?.accountUuid,o.type){case"update":return{type:"viewModel",data:o.content};case"save":{let{item:i,isNewItem:s}=o.content,l=q.decode(i,q.json.pipe(ap),{mode:"unsafe_report_only",file:E`background/save-new-dialog/handler.ts`,func:E`handleEditItem`}).unwrap(),d;return s?d=await EXj(t,n,l):d=await BXj(l),await hS(t,d).catch(cv({msg:"Failed to update fastmail"})),n.isUso&&s&&n.vaultSelector.saveLocation&&Bc(n.vaultSelector.saveLocation.accountUuid,LA.UsoTelemetryActions.Linked),n.isShellPlugin&&await ta(t.id,{type:"shellPluginsSuccess"}),UF(t,!0),{type:"saved"}}case"vault-selector":case"clear":return{type:"error",data:{message:"Invalid action during update."}};default:ue(o)}}catch(r){let a=_.findAccountHandlerByUuid(e??"");return We(r)?lj(r):lj(new q.LoggableError({errorClass:E`HandleEditItemError`,message:oj.assertLogSafe(nA("An unexpected error occurred. Please contact support@1password.com")),userUuid:oj.assertLogSafe(a?.accountIdentifier.userUUID??""),stackOverrideError:r instanceof Error?r:void 0})),{type:"error",data:{message:nA("An unexpected error occurred. Please contact support@1password.com")}}}}async function EXj(A,j,e){let{saveLocation:t}=j.vaultSelector;if(!t)throw console.error("Could not save item, vault selector not configured."),new q.LoggableError({errorClass:E`SaveItemError`,message:E`Item not saved: problem with vault selector.`});let r=sg(t.accountUuid,t.vaultUuid,e);if(r.isErr()){console.error("Error creating item:",r.error);let a=_.findAccountHandlerByUuid(t.accountUuid);throw new q.LoggableError({errorClass:E`SaveItemError`,message:E`Item not saved: problem with item form.`,userUuid:a?.user?.uuid?Z(a?.user?.uuid):void 0})}if(fi(A))return qS(A,r.value),r.value;{let a;j.integration===cx.Ramp?a=await FTA(t.accountUuid,r.value):a=await $a(r.value);try{a.templateUuid&&St("ItemCreate",{template_uuid:naA.TelemetryString.assertSafeForTelemetry(a.templateUuid),status:"SUCCESS",create_method:"SAVE_DIALOG"},t.accountUuid)}catch{}return a}}async function BXj(A){if(!A.uuid)throw new q.LoggableError({errorClass:E`SaveItemError`,message:E`Item not saved: problem with UUID.`});let j=await Rr(A.uuid);if(!j)throw new q.LoggableError({errorClass:E`SaveNewError`,message:E`Item not saved: problem finding item.`});let e=OF(j,A);try{j.overview.b5AccountUUID&&j.templateUuid&&St("ItemUpdate",{template_uuid:naA.TelemetryString.assertSafeForTelemetry(j.templateUuid),status:"SUCCESS",update_method:"SAVE_DIALOG"},j.overview.b5AccountUUID)}catch{}return $a(e)}var Ev=async(A,j,e,t)=>{let r=i=>!j.some(s=>!s.disabled&&s.uuid===i.accountUuid&&s.vaults.some(l=>l.uuid===i.vaultUuid)),a,n=e.vaultSelector;if(!n.saveLocation||r(n.saveLocation))try{let[i,s]=_.defaultSavingLocation(),l={accountUuid:i.uuid,vaultUuid:s.uuid};n.saveLocationSuggestion&&n.saveLocationSuggestion.accountUuid!==i.uuid&&!r(n.saveLocationSuggestion)?(a={type:"set",data:{saveLocation:n.saveLocationSuggestion,isDefaultLocation:!1}},n.saveLocation=n.saveLocationSuggestion):r(l)?(a={type:"reset"},n.saveLocation=void 0):(a={type:"set",data:{saveLocation:l,isDefaultLocation:!0}},n.saveLocation=l)}catch{a={type:"reset"},n.saveLocation=void 0,console.error("[Save Dialog] Could not get default saving location, resetting location.")}let o=await tA.saveManagerConfigure(A,a,t?{type:"new"}:void 0,n.saveLocation?await uS(n.saveLocation.accountUuid,e.isUso):void 0);return{inTutorial:fi(A),vaultSelector:await N5A(j,n.saveLocation),viewModel:o}};async function gD(A,j,e,t){if(!j.overview.b5AccountUUID)throw new q.LoggableError({errorClass:E`createUpdateItemView`,message:E`Attempted to update an item without an associated b5 account.`});let r=await tA.saveManagerConfigure(A,void 0,t?{type:"existing",data:j}:void 0,await uS(j.overview.b5AccountUUID,e.isUso,j));return{itemLocation:await gXj(j),viewModel:r}}async function gXj(A){if(!A.overview.b5AccountUUID)return[];let j=_.getUnlockedAccountOverviews.find(t=>t.uuid===A.overview.b5AccountUUID);if(!j)return[];let e=j.vaults.find(t=>t.uuid===A.vault.uuid);return e?[{text:j.name,icon:await LF(j.baseAvatarUrl,j.uuid,j.avatar,j.type)},{text:A.vault.name,icon:await lv(e.baseAvatarUrl,e.accountUuid,e.avatar)}]:[]}var X5A=W(Dn());function V5A(A,j,e,t){if(!chrome.runtime.onMessageExternal)return;let r=Object.keys(e);function a(o){return o?r.indexOf(o)!==-1:!1}function n(o){if(typeof o!="string")return TA(void 0);let i=sd.fromThrowable(JSON.parse,()=>{})(o);if(i.isErr())return TA(void 0);let s=t.decode(i.value);return(0,X5A.isLeft)(s)?TA(void 0):Oj(s.right)}chrome.runtime.onMessageExternal.addListener(function(i,s,l){if(typeof s.id!="string"||!(Array.isArray(A)?A.includes(s.id):A===s.id))return!1;let k=n(i);if(k.isErr())return`${j}`,!1;let u=k.value,m=u.name;if(!a(m))return!1;try{let I=e[m],S=Rm?I({...u,data:u.data??void 0}):gc.then(async()=>I({...u,data:u.data??void 0}));return S instanceof Promise?(S.then(f=>l(f)).catch(f=>{console.error(`Exception while handling external request <${m}> from <${j}>`,f)}),!0):(l(S),!1)}catch(I){return console.error(`Exception while handling external request <${m}> from <${j}>`,I),!1}})}function qXj(){return["bfnaelmomeimhlpmgjnjophhpkkoljpa","ghdnndoidmmnfjgddnaogdjcaopnlcdm"]}function vXj(){return{buildNumber:parseInt(Xo(),10)}}var oaA,xS;async function xXj(A){let{saveRequest:j,type:e}=A.data;for(let r of j.fields)Array.isArray(r.value)&&(r.value=new TextDecoder("utf-8").decode(new Uint8Array(r.value)));let t=await LKA(e,{name:"save-request",data:{data:JSON.stringify(j),urls:[]}});return new Promise(r=>{xS=r,oaA=t?.id})}function W5A(A,j){A!==oaA||!xS||(xS({saved:j}),xS=void 0,oaA=void 0)}V5A(qXj(),"Phantom",{hello:vXj,"create-item":xXj},bsA);var fS=class A{get id(){return(async()=>{if(Oe()){let j=await this.getAllFrames(),e=j.find(r=>r.frameId===this._id)?.frameId;if(typeof e=="number")return e;if(this._id===0){let r=j.find(a=>a.parentFrameId===-1)?.frameId;if(typeof r=="number")return r}`${this._id}`;let t=j.find(r=>r.url===this.unparsedUrl)?.frameId;if(typeof t=="number")return t;throw new Error("Frame no longer exists")}return this._id})()}get parentFrameId(){return(async()=>{if(typeof this._parentFrameId=="number")return this._parentFrameId;let{parentFrameId:j}=await this.getFrameDetails();return this._parentFrameId=j,this._parentFrameId})()}constructor(j,e,t){this._id=j,this.tabId=t,this.unparsedUrl=e}static createWithRuntimeMessageSender({frameId:j,tab:e,url:t}){if(!(!e?.id||typeof e.id!="number")&&typeof j=="number")return new A(j,t??"",e.id)}async parent(){let j=await this.parentFrameId;if(j!==-1)return j}URL(){return fl(this.unparsedUrl)}async getFrameDetails(){let j=await this.id;return new Promise(e=>{chrome.webNavigation.getFrame({tabId:this.tabId,frameId:j},t=>{if(t?.url!==this.unparsedUrl&&(console.warn(`URL for frame ${j} tab ${this.tabId}`),this.unparsedUrl=t?.url),t)return e(t);throw new Error("Frame no longer exists")})})}async getAllFrames(){return new Promise((j,e)=>{chrome.webNavigation.getAllFrames({tabId:this.tabId},t=>{t?j(t):e("Frames no longer exists")})})}};async function sn(A){return A.onEvent?(A.timeStamp=Date.now(),Q5A([A.onEvent],{[A.onEvent]:()=>{Y5A(A)}},{once:typeof A.repeat=="boolean"?!A.repeat:!0,tab:A.tabId})):Y5A(A)}function qD(A){Q5A(Object.keys(A),A)}async function GXj(A,j,e){if(Rm||await gc,A.length===2){let t=xKA(e);if(!t)throw new Error(`Unable to respond to request <${j.name}> due to lack of TabInfo`);let r=fS.createWithRuntimeMessageSender(e);if(!r)throw new Error(`Unable to respond to request <${j.name}> due to lack of FrameInfo`);return A(j,{tab:t,frame:r})}else return A(j)}function FXj(A){let j=browser.runtime.getURL("");if(j.endsWith("/")&&(j=j.slice(0,-1)),Oe())return!0;if(It()){if(!A.url)return!1;let e=new URL(A.url),t=e.protocol+"//"+e.host;return t.endsWith("/")&&(t=t.slice(0,-1)),t===j}else return!!A.origin&&A.origin===j}function bXj(A){return A?Object.keys(iaA).indexOf(A)!==-1:!1}function Q5A(A,j,e={}){if(!chrome.runtime.onMessage)return;function t(r){return r?A.indexOf(r)!==-1:!1}chrome.runtime.onMessage.addListener(function r(a,n,o){let i=new ht("ChromeListener addition"),s=a.name;if(!t(s)||typeof e.tab=="number"&&n.tab?.id!==e.tab)return!1;if(bXj(s)&&!FXj(n))return console.error(`Exception while handling request <${s}>`),i.error("Invalid origin for request"),o({type:"Error",message:"Invalid origin for request"}),!1;e.once&&chrome.runtime.onMessage.removeListener(r);try{let l=GXj(j[s],a,n);return l instanceof Promise?(l.then(d=>void o({type:"Success",data:d})).catch(d=>{console.error(`Exception while handling request <${s}>`),i.error(G6(d)),o({type:"Error",message:G6(d)})}),!0):(o({type:"Success",data:l}),!1)}catch(l){console.error(`Exception while handling request <${s}>`);let d=l instanceof Error?l.message:"Unknown error occurred";return i.error(d),o({type:"Error",message:d}),!1}})}async function Y5A(A){return new Promise(j=>{chrome.tabs.sendMessage(A.tabId,A.message,e=>{j(e)})})}var Z5A="/inline/modal/modal.html",saA="DoNotSaveIn1PasswordAccountUuid",GS="DoNotSaveIn1PasswordVaultUuid",laA=new oD("privacy-integration-sessions");async function ASA(A,j){return laA.with(async e=>{let t=await Ts(Je);if(!t){console.error("Unable to load login item template in showEnablePrivacyPrompt");return}e.set(A.id,{data:JSON.parse(j),urls:[A.unparsedUrl],itemTemplate:JSON.stringify(t)}),Kk(A.id,{name:"privacy-enable-integration",data:void 0})})}async function jSA(A,j){return laA.with(async e=>{let t=e.get(A.id);if(!t){console.error("Attempted to save a privacy integration item without session.");return}e.delete(A.id);let r=await tA.createItemFromSaveRequest(t);return JTA(j,r)})}function Kk(A,j){Rj("show-modal",{sessionId:A,type:j},{tabId:A})}async function NKA(A,j){let e=chrome.runtime.getURL(Z5A),t=await He.openTab({url:`${e}#loading`,waitForLoad:!0});if(!t.id){console.error("Tab in showSavePromptInNewTab was missing an ID");return}let r=kg(t.id,e);return j(r),chrome.tabs.update(t.id,{url:`${e}#${A}`}),r}async function eSA(){let{language:A,appTheme:j}=YA(),e=X7();return{appTheme:j,locale:A,locked:Kt(),connectivityStatus:await qt.connectivityStatus(),unleashFeatures:e}}async function Bg(A,{accountsFilter:j,includeDontSaveOption:e}={includeDontSaveOption:!1}){let t=await Lk(A).then(n=>j?n.filter(o=>j(o.uuid)):n);t.sort((n,o)=>n.disabled>=o.disabled?1:-1);let r=[];e&&r.push({type:"DoNotSave",content:{id:{accountUuid:saA,vaultUuid:GS},name:nA("Don't Save in 1Password"),icon:{id:"id",sources:[{type:"ThemedIcon",content:{file:dx.Delete}}]}}});for(let n of t){let o=()=>{r.length>0&&r.push({type:"Separator",content:`separator-${n.uuid}`}),r.push({type:"SectionHeader",content:{id:n.uuid,label:n.name.toUpperCase(),accessibilityLabel:n.name}})};if(n.disabled)o(),r.push({type:"Text",content:{id:`${n.uuid}-unlinked`,text:nA("To save an item in this account you need to link it to the previously selected Masked Email account")}});else{let i=n.vaults.filter(s=>!rp(s));i.length>0&&o();for(let s of i)r.push({type:"Vault",content:{id:{vaultUuid:s.uuid,accountUuid:n.uuid},accountIcon:await LF(n.baseAvatarUrl,n.uuid,n.avatar,n.type),accountName:n.name,icon:await lv(s.baseAvatarUrl,n.uuid,s.avatar),name:s.name,accessibilityLabel:s.name}})}}let a;try{let[n,o]=_.defaultSavingLocation();t.some(s=>!s.disabled&&s.uuid===n?.uuid&&s.vaults.some(l=>l.uuid===o?.uuid))&&(a={accountUuid:n.uuid,vaultUuid:o.uuid})}catch{console.error("Could not get default saving location, resetting location.")}return{vaultListElements:r,defaultSuggestedVaultId:a}}async function FS(A,j,e){let t=!1;await gc,t=await tA.saveManagerAction({type:"clear",content:{tabId:A,tabUrl:j}}).then(r=>r.type==="clear"&&r.content).catch(r=>(console.error("Failed to clear save session",r),!1)),t&&W5A(A,e),await laA.with(async r=>Promise.resolve(r.delete(A)))}function UF(A,j){let e=A.URL();e&&nS(e).toLowerCase()===chrome.runtime.getURL(Z5A)?chrome.tabs.remove(A.id):Rj("close-modal",void 0,{tabId:A.id}),FS(A.id,void 0,j)}function tSA(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");UF(e,!1)}function rSA(A){FS(A,void 0,!1)}async function bS(A){let j=JSON.parse(A),e=await Ij.loadItemCache();if(!e)return;let t=e.accountForVaultID(Ua(j.vault));if(!t)return;let r=e.vaultWithUUID(j.vault.uuid,t.uuid);if(r){let a=new fA.VaultItem(r);return a.details=j.details,a.localId=-1,a.overview=j.overview,a.templateUuid=j.templateUuid,a}}function qS(A,j){let e=A.id,t=A.URL()?.origin;j.details.fields&&!j.details.fields[0].value?.length&&(j.details.fields[0]={designation:"username",id:"",name:"",type:"T",value:"user.name@example.com"},j.overview.ainfo="user.name@example.com"),(!j.details.password||j.details.password==="")&&j.details.fields?.push({designation:"password",id:"",name:"",type:"P",value:"SecurePass123!"}),j.title="Any Website",(!j.overview.url||j.overview.url==="")&&(j.overview={title:"Any Website",ainfo:"user.name@example.com",url:t,URLs:[{u:t||"",l:"website",m:"default"}],ps:100,pbe:84.24922180175781,pgrng:!0}),ce.setItem("tutorial-save",JSON.stringify(j)),sn({tabId:e,message:{name:"tutorial-save-finished",data:void 0}})}var aSA="/assets/png/brex_vendor_32@2x-UDSNK3PG.png";var nSA="/assets/png/privacy-TJGPEKHB.png";async function oSA(A,j,e,{showRichIcons:t,hasHiddenTemplate:r=!1,iconSize:a=A.templateUuid===Qb?128:120}){let n=A.uuid,o=A.vault.uuid,i=A.overview.b5AccountUUID,s=r?"000":A.templateUuid,l=[...A.tags].sort(),d;return s===Ur&&(d=await tA.getCreditCardType(A.overview.ainfo)),{id:_m(A),uuid:n,vaultUuid:o,accountUuid:i,version:A.itemVersion,title:A.title,secondary:s===Je?A.overview.ainfo||"\u2013":A.overview.ainfo,formattedSecondary:iSA(A,d),favorite:(A.faveIndex??0)>0,templateUuid:s,urls:_rA(A),action:DXj(A,j,e),trashed:A.state===dA.ItemState.Archived,urlToNakedDomains:A.urlToNakedDomains||{},coreIcon:await xo(A,a,t),suggested:!1,tags:l,hasCustomIcon:!!(A.overview.icons&&A.overview.icons.detail),isManagedApplication:A.templateUuid==="912"}}function _rA(A){return A.overview.URLs?A.overview.URLs.filter(j=>j.u).map(j=>{let e;switch(j.m){case"host":e=$d.Host;break;case"never":e=$d.Never;break;default:e=$d.Default}return{url:j.u,mode:e}}):[]}var iSA=(A,j)=>{let e=A.overview.ainfo;switch(A.templateUuid){case Ur:if(!e)return"";if(j===Ml.AmericanExpress&&e.length>10){let t=e.substr(0,4),r=e.substr(e.length-5);return`${t} \u2022\u2022\u2022\u2022\u2022\u2022 ${r}`}if(j===Ml.AmericanExpress&&e.length>5)return`\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022\u2022 ${e.substr(e.length-5)}`;if(e.length>8){let t=e.substr(0,4),r=e.substr(e.length-4);return`${t} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${r}`}return e.length>4?`\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${e.substr(e.length-4)}`:e;case Js:return A.createdAt?.toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"});default:return}};function wXj(A,j,e){if(!e)return"";let t=A;if(t.cacheInformation?.provider){let{provider:r,category:a}=t.cacheInformation;return`../images/${r}_${a}_32@2x.png`}else return fA.VaultItem.getRichIconUrl(A,j)}function caA(A,{title:j,secondary:e,icon:t,designationFilter:r,accessory:a}){let n=JSON.stringify(_m(A));return{name:"entry",data:{id:sc.createUniqueId(),title:j,secondary:e,icon:t,accessory:a,action:{name:"fill-item",data:{itemId:n,designationFilter:r}}}}}async function sSA(A,{showRichIcons:j,iconSize:e=60,isPersonItem:t=!1}){let r=JSON.stringify(_m(A)),a=A.templateUuid??"000",n,o;a===Ur&&(n=await tA.getCreditCardType(A.overview.ainfo)),a===Je&&A.overview.passkey?.credentialId&&(o="passkey"),t&&(o="profile");let i=()=>{let d=iSA(A,n)??A.overview.ainfo;return a===Je&&!d&&(d="\u2014"),d},s=!!(A.overview.icons&&A.overview.icons.detail),l={favorite:(A.faveIndex??0)>0,richIconUrl:wXj(A,e,j),iconColor:A.uuid?tA.generateRichIconBackgroundColor(A.uuid):"",customIcon:s?r:void 0,templateUuid:a,ccType:n};return caA(A,{title:A.title,secondary:i(),icon:l,accessory:o})}function lSA(A){return{name:"entry",data:{id:sc.createUniqueId(),title:nA("Use Suggested Password"),secondary:A.password,icon:{templateUuid:Js},action:{name:"fill-generated-password",data:A}}}}function cSA(){return{name:"action",data:{id:sc.createUniqueId(),title:nA("Create SSH Key\u2026"),icon:{templateUuid:Ii},action:{name:"show-ssh-create-dialog",data:void 0}}}}function dSA(){return{name:"action",data:{id:sc.createUniqueId(),title:nA("Create Privacy Card\u2026"),icon:{richIconUrl:nSA},action:{name:"show-privacy-dialog",data:void 0}}}}function kSA(){return{name:"action",data:{id:sc.createUniqueId(),title:nA("Create Masked Email\u2026"),action:{name:"show-email-alias-dialog",data:void 0}}}}function uSA(){return{name:"action",data:{id:sc.createUniqueId(),title:nA("Create Brex vendor card\u2026"),icon:{richIconUrl:aSA},action:{name:"show-brex-create-dialog",data:void 0}}}}function pSA(){return{name:"action",data:{id:sc.createUniqueId(),title:nA("Fill Masked Email\u2026"),action:{name:"fill-existing-alias",data:void 0}}}}function mSA(A,j){return H4A({uuid:A.uuid,title:A.localizedSingularName(),pluralTitle:A.localizedPluralName(),hasHiddenTemplate:A.hasHiddenTemplate,disableCreation:j,hasItems:A.hasItems,localizedStrings:A.template?.attrs.localizedStrings??{}})}var IXj=/^([a-z]*):\/\//;function DXj(A,j,e){let t=j?A.urlToNakedDomains&&Object.values(A.urlToNakedDomains).includes(j):!1,r;if(A.templateUuid===Je&&A.url){let a=IXj.exec(A.url.toLowerCase())?.[1];r=!a||a==="http"||a==="https"?t?R6.Autofill:R6.Go:null}else j&&(A.templateUuid===Ur||A.templateUuid===q6||A.templateUuid===Ii)?r=R6.Autofill:r=null;return e&&r&&r===R6.Autofill&&(r=null),e&&r&&r===R6.Go&&(r=R6.OpenURL),r}var OXj=A=>{switch(A?.cacheInformation?.provider){case"brex":return!0;default:return!1}};function _m(A){return OXj(A)&&A.cacheInformation?.provider==="brex"?{type:"cachedItem",data:{type:"brex",id:A.uuid}}:Jm(A)?{type:"managedCredential",data:{uuid:A.uuid}}:{type:"databaseId",data:gv(A)}}function Ua(A){if(typeof A.localId!="number")throw new Error("Vault was missing localId in getLocalIdForVault");return A.localId}function gv(A){if(typeof A.localId!="number")throw new Error("Item was missing localId in getLocalIdForItem");return A.localId}function ig(A){if(typeof A.overview.b5AccountUUID!="string")throw new Error("Item was missing b5AccountUUID in getB5AccountUUIDForItem");return A.overview.b5AccountUUID}function yS(A){if(typeof A.id!="number")throw new Error("Account was missing id in getIdForServerAccount");return A.id}function ESA(A){if(typeof A.id!="number")throw new Error("Vault was missing id in getIdForServerVault");return A.id}function $S(){return{id:"requires-1password-8-alert",title:nA("1Password 8 Required"),text:nA("Creating and editing SSH keys requires 1Password 8."),primaryAction:{id:"requires-op8-id",label:nA("Ok"),destructive:!1,action:{type:"Ok",content:void 0}}}}async function BSA(){let A=ce.getItem("tutorial-save");if(A){let j=await bS(A);if(j){let e={richIconUrl:"../images/tutorial_globe_logo.svg",iconColor:"",templateUuid:Je};return[{name:"entry",data:{id:sc.createUniqueId(),title:j.overview.title,secondary:j.overview.ainfo,icon:e,action:{name:"fill-tutorial-item",data:void 0}}}]}}return[]}async function Wo(A=!1){let j=await _A.getDatabase().getAllAccounts(),e=[];for(let t of j){let r=PXj(t);if(A&&t.id&&!r.locked){let a=await _A.getDatabase().getAllVaultsForAccount(t.id);r.vaults=a.map(n=>CXj(n)).filter(n=>!!n)}else r.vaults=[];e.push(r)}return e}async function vD(A){let j="\u2757\uFE0F LastPass Imported Shared Folders Metadata",e=A.map(t=>{let r=hj.accountHasFlag(t.uuid,"hide-lastpass-importer-metadata-vault"),a=t.isLocked?[]:[...t.vaults].sort(a6.vaultSort).map(n=>({uuid:n.uuid,name:n.name,avatar:_5(n,t.user,t.b5account),accountUuid:t.uuid,canCreate:t.user?.hasVaultACL(n,le.CreateItem)??!1})).filter(n=>r?n.name!==j:n);return{uuid:t.b5account.uuid,userUuid:t.accountIdentifier.userUUID,name:t.serveraccount.name,email:t.serveraccount.email,type:t.serveraccount.type,locked:t.isLocked,mustMigrateAuth:t.client?.CTX?.session.ssoMigrationGracePeriod?.state===Yj.State.MustMigrateAuth,avatar:eD(t.serveraccount.uuid,t.serveraccount.baseAvatarURL,t.serveraccount.avatar,t.serveraccount.type),accountUrl:t.serveraccount.signinAddress,vaults:a}});return Promise.all(e)}async function wS(){let A=hr(),j=[];for(let e of _.getAccountHandlers){await e.waitForDecrypt();let t=Y7(e.uuid),r=e.isLocked?[]:[...e.vaults].sort(a6.vaultSort).map(a=>{let n=a.isVirtualVault??a.type===fA.Vault.TypeManagedApplications;return{id:Ua(a),uuid:a.uuid,name:a.name,avatar:n&&a.type!==fA.Vault.TypeManagedApplications?`/images/popup/${rr.BrexVault}.png`:_5(a,e.user,e.b5account),type:a.type,disabled:A.isExcluded(e.uuid,a.uuid),isVirtualVault:n,isManagedCredentialVault:rp(a)}});j.push({id:yS(e.serveraccount),uuid:e.serveraccount.uuid,type:e.serveraccount.type,name:e.serveraccount.name,email:e.serveraccount.email,secretKey:e.serveraccount.secretKey,createdAt:e.serveraccount.createdAt.replace(/"/g,""),userCreatedAt:e.serveraccount.userCreatedAt,locked:e.isLocked,disabled:!1,userSuspended:e.serveraccount.userState===Yj.State.Suspended,state:e.serveraccount.state,avatar:eD(e.serveraccount.uuid,e.serveraccount.baseAvatarURL,e.serveraccount.avatar,e.serveraccount.type),signinAddress:e.serveraccount.signinAddress,vaults:r,userPreferences:e.serveraccount.userPreferences,itemsInWrongAccountAllowedDomains:t})}return j}function PXj(A){let j=!0,e=_.findAccountHandlerByUuid(A.uuid);e&&(j=e.isLocked);let t=hr(),r=Y7(A.uuid);return{id:yS(A),uuid:A.uuid,type:A.type,name:A.name,email:A.email,locked:j,disabled:t.isExcluded(A.uuid),userSuspended:A.userState===Yj.State.Suspended,state:A.state,createdAt:A.createdAt,userCreatedAt:A.userCreatedAt,avatar:eD(A.uuid,A.baseAvatarURL,A.avatar,A.type),signinAddress:A.signinAddress,userPreferences:A.userPreferences,itemsInWrongAccountAllowedDomains:r}}function CXj(A){if(!A.account_id)return null;let j=_.findAccountHandlerByID(A.account_id);if(!j)throw new Error(`No account handler found for vault ${A.uuid} in account ${A.account_id}`);let e=j.b5account,t=j._findVaultWithUUID(A.uuid),r=hr();return t?{id:ESA(A),uuid:A.uuid,name:t.name,avatar:_5(t,j.user,e),type:A.type,disabled:r.isExcluded(e.uuid,A.uuid),isVirtualVault:!1,isManagedCredentialVault:!1}:null}function gg(A=!1){return _.getAccountHandlers.map(j=>{let e=yS(j.serveraccount).toString(),t=j.isUnlocked?{type:"unlocked"}:A?{type:"failedToUnlock",content:{kolideAccountPreviewState:void 0}}:{type:"locked",content:{kolideAccountPreviewState:void 0}},r={type:"secretKey"},a,n;if(LA.CanOnlyPerformOidcAuth(j.serveraccount.authMethods)){let o=LA.getOidcAuthMethod(j.serveraccount.authMethods);if(!o){console.error(`unable to find OIDC auth method in list of auth methods for account ${j.uuid}`);return}if(!o.provider){console.error(`OIDC auth method for account ${j.uuid} did not have a provider`);return}let i=o.provider;if(!i){console.error(`OIDC auth method for account ${j.uuid} had an unknown provider string`);return}n=o.iconUrl,r={type:"sso",content:i}}else LA.canOnlyPerformWebauthnAuth(j.serveraccount.authMethods)&&(r={type:"webAuthn"});return{id:e,name:j.serveraccount.name,email:j.serveraccount.email,uuid:j.uuid,mode:t,signInProvider:r,signInProviderIconUrl:n,icon:{id:e+"-icon",sources:[{type:"RichIcon",content:{masked:!0,url:eD(j.serveraccount.uuid,j.serveraccount.baseAvatarURL,j.serveraccount.avatar,j.serveraccount.type)}}],badge:a,shape:Kl.RoundedRect}}}).filter(j=>j!==void 0)}async function gSA(A){let{componentType:j,componentName:e,source:t,category:r}=A,a;try{a=await FSA()}catch{console.error(`Failed to get account uuid to record event: ${t} - aborting`);return}if(!a){console.error(`No account uuid found to record event: ${t} - aborting`);return}St("View",{component_type:ua.TelemetryString.assertSafeForTelemetry(j),component_name:ua.TelemetryString.assertSafeForTelemetry(e),source:t?ua.TelemetryString.assertSafeForTelemetry(t):void 0,category:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0},a)}async function IS(A){let{componentType:j,componentName:e,source:t,category:r}=A,a=await Wo();Array.from(a).forEach(n=>{St("View",{component_type:ua.TelemetryString.assertSafeForTelemetry(j),component_name:ua.TelemetryString.assertSafeForTelemetry(e),source:t?ua.TelemetryString.assertSafeForTelemetry(t):void 0,category:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0},n.uuid)})}function hSA(A,j){let{componentType:e,componentName:t,source:r,category:a}=j;St("View",{component_type:ua.TelemetryString.assertSafeForTelemetry(e),component_name:ua.TelemetryString.assertSafeForTelemetry(t),source:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0,category:a?ua.TelemetryString.assertSafeForTelemetry(a):void 0},A)}function qSA(A,j){let{componentType:e,componentName:t,source:r,category:a}=j;St("Input",{component_type:ua.TelemetryString.assertSafeForTelemetry(e),component_name:ua.TelemetryString.assertSafeForTelemetry(t),source:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0,category:a?ua.TelemetryString.assertSafeForTelemetry(a):void 0},A)}async function vSA(A){let{componentType:j,componentName:e,category:t,source:r}=A,a;try{a=await FSA()}catch{console.error(`Failed to get account uuid to record event: ${r} - aborting`);return}if(!a){console.error(`No account uuid found to record event: ${r} - aborting`);return}St("Click",{component_type:ua.TelemetryString.assertSafeForTelemetry(j),component_name:ua.TelemetryString.assertSafeForTelemetry(e),source:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0,category:t?ua.TelemetryString.assertSafeForTelemetry(t):void 0},a)}function xSA(A,j){let{componentType:e,componentName:t,category:r,source:a}=j;St("Click",{component_type:ua.TelemetryString.assertSafeForTelemetry(e),component_name:ua.TelemetryString.assertSafeForTelemetry(t),source:a?ua.TelemetryString.assertSafeForTelemetry(a):void 0,category:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0},A)}async function DS(A){let{componentType:j,componentName:e,category:t,source:r}=A,a=await Wo();Array.from(a).forEach(n=>{St("Click",{component_type:ua.TelemetryString.assertSafeForTelemetry(j),component_name:ua.TelemetryString.assertSafeForTelemetry(e),source:r?ua.TelemetryString.assertSafeForTelemetry(r):void 0,category:t?ua.TelemetryString.assertSafeForTelemetry(t):void 0},n.uuid)})}async function fSA(A){let{name:j,category:e}=A,t=await Wo();Array.from(t).forEach(r=>{St("BackgroundAction",{name:ua.TelemetryString.assertSafeForTelemetry(j),category:e?ua.TelemetryString.assertSafeForTelemetry(e):void 0},r.uuid)})}async function GSA(A){let{overallStatus:j,overallDuration:e,domScanStatus:t,domScanDuration:r,analyzeFrameStatus:a,analyzeFrameDuration:n,renderMenuStatus:o,renderMenuDuration:i}=A,s=await Wo();Array.from(s).forEach(l=>{St("InlineMenuRender",{overall_status:j,overall_duration_ms:e,dom_scan_status:t,dom_scan_duration_ms:r,analyze_frame_status:a,analyze_frame_duration_ms:n,render_menu_status:o,render_menu_duration_ms:i},l.uuid)})}var FSA=async()=>{let A=await Wo();return(A.find(e=>e.type===Z8)??A.find(e=>e.type===ox)??A.find(e=>e.type===nx))?.uuid};function np(){return chrome.runtime.getManifest().version}function XF(){return np()}var bSA="notification-history",kaA=[{type:"enable-watchtower-compromised-sites",limit:{type:"ONCE"},onClick:()=>{tn({showNotifications:!0,watchtowerNotifications:!0})}},{type:"import",limit:{type:"ONCE"},onClick:()=>{PS()}},{type:"update",data:()=>({version:XF()}),onClick:()=>{maA()}},dTA,{type:"email-preferences",limit:{type:"ONCE"},onClick:()=>{let A=prA();A&&BaA(A.uuid)}},{type:"autofill-disabled",onClick:()=>{tn({inlineEnabled:!0})}},{type:"firefox-rich-icon-enable",limit:{type:"ONCE"},onClick:()=>{tn({showRichIcons:!0})}},{type:"firefox-local-data-collection-enable",limit:{type:"ONCE"},onClick:()=>{tn({firefoxDataCollection:!0}),VF()},onDismiss:()=>{tn({firefoxDataCollection:!1})}},{type:"extension-first-survey",limit:{type:"ONCE"},featureFlag:"extension-first-survey",onClick:()=>{daA("Click","take_survey"),EaA()},onDismiss:()=>{daA("Click","dismiss")}},{type:"unified-panel-update",limit:{type:"ONCE"},featureFlag:"b5x-unified-panel",expires:new Date("2025-11-01T23:59:59Z"),onClick:()=>{paA("manage-your-settings")}}],daA=(A,j)=>{let e={componentType:"button",componentName:j,source:"notification_screen",category:"extension_survey"};A==="View"?IS(e):DS(e)};function krA(A,j){j?Ss(A):hv(A)}function Ss(A){let j=kaA.find(e=>e.type===A);if(!j){console.warn("Unable to find notification with type:",A);return}if(!(j.limit?.type==="ONCE"&&xD().has(A))){if(j.expires&&j.expires<new Date){hv(A);return}if(j.featureFlag&&!hj.anyAccountHasFlag(j.featureFlag)){hv(A);return}ySA(j),HXj(A)}}function ySA(A){let{type:j,data:e}=A;j==="extension-first-survey"&&daA("View","take_survey"),Rj("show-alert",{id:j,data:e?.()||{version:""}})}function $SA(A){let{clicked:j}=A.data,e=kaA.find(o=>o.type===A.data.type);if(!e){console.warn("Unable to find notification with type:",A.data.type);return}let{type:t,onClick:r,onDismiss:a,hideOnClick:n}=e;if(j){if(r(),typeof n=="boolean"&&!n)return;ng(t),uaA(t)}else a?.(),ng(t)}function uaA(A){Rj("hide-alert",A)}function wSA(){let A=xD();for(let j of kaA){if(j.expires&&j.expires<new Date)continue;let e=A.get(j.type);e&&!e.dismissed&&ySA(j)}}function xD(){try{let A=vj.getItem(bSA);return A?oF(A):new Map}catch{return new Map}}function OS(A){vj.setItem(bSA,nF(A))}function HXj(A){let j=xD();j.set(A,{lastSeen:new Date().getTime(),dismissed:!1}),OS(j)}function ng(A){let j=xD(),e=j.get(A);e?(e.dismissed=!0,OS(j),uaA(A)):(j.set(A,{lastSeen:new Date().getTime(),dismissed:!0}),OS(j))}function hv(A){let j=xD(),e=j.get(A);e&&!e.dismissed&&(j.delete(A),OS(j),uaA(A))}function as(A){Rj("show-core-alert",A)}function Kr(A){Rj("show-core-toast",A)}function ISA(){Rj("show-mfa-offline-toast",void 0)}function fD(){DSA().then(A=>{tn({defaultPasswordManager:!0}),A&&(ri()||It())&&Ss("import")})}async function OSA(A,j){if(!A.masterKey)throw new Error("User AUK is missing");if(!(A.masterKey instanceof Zt))throw new Error("User Master key is not a valid Auk");let e=A.masterKey,t=await Ya.SrpX.fromHex(j);return Ya.CredentialBundle.new({srpx:t,auk:e})}async function PSA(A,j,e){if(!A.CTX)throw new Error("Client CTX is undefined");try{await LA.addCredentialBundle(A.CTX,j,e)}catch(t){let r=A.user()?.uuid;throw q.errors.isServerError(t)?new q.LoggableError({errorClass:E`UploadCredentialBundleError`,message:q.logsafe.assertLogSafe(`Server error (code: ${t.code}) while uploading CredentialBundle for device ${A.deviceUuid}.`),userUuid:r?q.logsafe.assertLogSafe(r):void 0}):new q.LoggableError({errorClass:E`UploadCredentialBundleError`,message:q.logsafe.assertLogSafe(`Failed to encrypt and upload CredentialBundle for device ${A.deviceUuid}`),userUuid:r?q.logsafe.assertLogSafe(r):void 0})}}async function CSA(A,j,e){if(!A.CTX?.session)throw new Error("no session");try{await cA.addCredentialBundle(A.CTX.session,{encCredentials:j,v:2},e)}catch(t){let r=A.user()?.uuid;throw q.errors.isServerError(t)?new q.LoggableError({errorClass:E`UploadEncryptedCredentialBundleError`,message:q.logsafe.assertLogSafe(`Server error (code: ${t.code}) while uploading encrypted CredentialBundle for device ${A.deviceUuid}.`),userUuid:r?q.logsafe.assertLogSafe(r):void 0}):new q.LoggableError({errorClass:E`UploadEncryptedCredentialBundleError`,message:q.logsafe.assertLogSafe(`Failed to encrypt and upload encrypted CredentialBundle for device ${A.deviceUuid}`),userUuid:r?q.logsafe.assertLogSafe(r):void 0})}}var HSA="SAFARI_KEYCHAIN";function hg(){if(f6())return new haA;if(ut())return new gaA;throw new Error("Extension not running in Safari")}var gaA=class{constructor(){this.logger=new ht("\u{1F34E} MobileSafariCredentialBundleEncryptor")}async deleteDeviceKey(j,e){let t=await iKA({accountUuid:j.uuid,deviceKeyId:e});if(t.isErr()||t.value.type==="Error")throw new q.LoggableError({errorClass:E`B5XSafariMobileDeleteDeviceKey`,message:E`SafariIOSWebExtension failed to delete DeviceKey`,userUuid:q.logsafe.assertLogSafe(j.userUUID)})}async encrypt(j,e){let t=await e.__crypto_internal.serialize(),r={accountUuid:j.uuid,credentialBundle:Array.from(t)},a=await sKA(r);if(a.isErr()||a.value.type==="Error")throw new q.LoggableError({errorClass:E`B5XSafariMobileEncryptCredentialBundle`,message:E`SafariIOSWebExtension failed to encrypt CredentialBundle`,userUuid:q.logsafe.assertLogSafe(j.userUUID)});let n=a.value.content.credentialBundle,o=q.decode(new Uint8Array(n),q.jsonBytes.pipe(q.crypto.JweB)).unwrap();return this.logger.info("Successfully encrypted CredentialBundle"),{deviceKeyId:a.value.content.deviceKeyId,encryptedCredentialBundle:o}}async decrypt(j,e,t){let r=q.json2ab(t.encCredentials),a=await oKA({accountUuid:j.uuid,deviceKeyId:e,credentialBundle:Array.from(r)});if(a.isErr()||a.value.type==="Error")throw new q.LoggableError({errorClass:E`B5XSafariMobile DecryptCredentialBundle`,message:E`SafariIOSWebExtension failed to decrypt CredentialBundle`,userUuid:q.logsafe.assertLogSafe(j.userUUID)});let n=new Uint8Array(a.value.content.credentialBundle),o=await ii.unsafeIfInputNotTrustworthyDeserialize(n);return this.logger.info("Successfully decrypted CredentialBundle"),{credentialBundle:o}}},haA=class{constructor(){this.logger=new ht("\u{1F34E} DesktopSafariCredentialBundleEncryptor")}async deleteDeviceKey(j,e){let t=await this.invoke({type:"DeleteDeviceKey",data:{accountUuid:j.uuid,deviceKeyId:e}});if(t.isErr())throw new q.LoggableError({errorClass:E`B5XSafariDesktopDeleteDeviceKey`,message:E`SafariWebExtension failed to delete Device Key`,userUuid:q.logsafe.assertLogSafe(j.userUUID),tags:{invocationError:q.logsafe.assertLogSafe(t.error.type)}})}async encrypt(j,e){let t=await e.__crypto_internal.serialize(),r={accountUuid:j.uuid,credentialBundle:Array.from(t)},a=await this.invoke({type:"EncryptCredentialBundle",data:r});if(a.isErr())throw new q.LoggableError({errorClass:E`B5XSafariDesktopEncryptCredentialBundle`,message:E`SafariWebExtension failed to encrypt CredentialBundle`,tags:{invocationError:q.logsafe.assertLogSafe(a.error.type)},userUuid:q.logsafe.assertLogSafe(j.userUUID)});let n=q.decode(new Uint8Array(a.value.credentialBundle),q.jsonBytes.pipe(q.crypto.JweB)).unwrap();return this.logger.info("Successfully encrypted CredentialBundle"),{deviceKeyId:a.value.deviceKeyId,encryptedCredentialBundle:n}}async decrypt(j,e,t){let r=q.json2ab(t.encCredentials),a=await this.invoke({type:"DecryptCredentialBundle",data:{accountUuid:j.uuid,deviceKeyId:e,credentialBundle:Array.from(r)}});if(a.isErr())throw new q.LoggableError({errorClass:E`B5XSafariDesktop DecryptCredentialBundle`,message:E`SafariWebExtension failed to decrypt CredentialBundle`,userUuid:q.logsafe.assertLogSafe(j.userUUID),tags:{invocationError:q.logsafe.assertLogSafe(a.error.type)}});let n=new Uint8Array(a.value.credentialBundle),o=await ii.unsafeIfInputNotTrustworthyDeserialize(n);return this.logger.info("Successfully decrypted CredentialBundle"),{credentialBundle:o}}async invoke(j){let e=browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"SweDeviceMessage",data:{type:j.type,data:j.data}})}).then(r=>r.type===j.type.toString()?r.data.type==="Error"?(this.logger.error(`Invocation <${j.type}> failed with error <${r.data.content}>`),TA({type:s0.InvalidRequest})):Oj(r.data.content.content):TA({type:s0.InvalidRequest})),t=new Promise(r=>{setTimeout(()=>{r(TA({type:"Timeout"}))},2e3)});return this.logger.info(`Invoking SafariWebExtension <${j.type}>`),Promise.race([e,t]).catch(r=>{throw this.logger.warn(`Invocation failed to send: ${r}`),r})}};async function TSA(){return Ya.DeviceKey.generate()}var SSA="UpgradeToTrustedDeviceError";async function CS(A,j,e){let t=A.CTX?.user;if(!t)throw new Error("User for Client instance undefined");let r=await OSA(t,e);if(Oe()){let s=await hg().encrypt(j.serveraccount,r);await CSA(A,s.encryptedCredentialBundle,s.deviceKeyId),await KSA(j,{deviceUuid:A.deviceUUID,deviceKeyId:s.deviceKeyId,deviceKey:HSA});return}let a=await TSA(),n;try{n=await a.exportObfuscated(j.serveraccount.uuid,j.serveraccount.userUUID)}catch{throw new q.LoggableError({errorClass:q.logsafe.assertLogSafe(SSA),message:q.logsafe.assertLogSafe(`Failed to export device key for device ${A.deviceUuid}`),userUuid:q.logsafe.assertLogSafe(j.serveraccount.userUUID)})}await PSA(A,r,a);let o={deviceUuid:A.deviceUUID,deviceKeyId:a.kid,deviceKey:n};await KSA(j,o)}function HS(){return ie.getDesktopAppState()}async function KSA(A,j){try{await A.saveDeviceCredentials(j)}catch{throw new q.LoggableError({errorClass:q.logsafe.assertLogSafe(SSA),message:q.logsafe.assertLogSafe(`Failed to persist DeviceKey for device ${j.deviceUuid}`),userUuid:q.logsafe.assertLogSafe(A.serveraccount.userUUID)})}}var MSA=A=>{switch(A.toLowerCase()){case"download-extension":return"download-extension";case"practice-extension":return"practice-extension";case"migrate-data":return"migrate-data";case"access-passwords":return"access-passwords";case"invite-family-members":return"invite-family-members";case"pin-extension":return"pin-extension";default:return"unknown"}},qaA={"download-extension":"AH-downloadExtension","set-up-autofill":"AH-setUpAutofill","migrate-data":"AH-migrateData","access-passwords":"AH-accessPasswords","practice-extension":"AH-practiceExtension",practice:"AH-practice","invite-family-members":"AH-inviteFamilyMembers","pin-extension":"AH-pinExtension",unknown:"AH-unknown"};var _SA=7,qv=(A,j)=>{let e=qaA[j];return vj.getItem(`${A}-${e}`)},TS=(A,j)=>{let e=qaA[j];vj.setItem(`${A}-${e}`,"true")},LSA=A=>{SXj(A),MXj(A)},SXj=A=>{let j=A?[A]:_.getAccountHandlers;for(let e of j)e.isUnlocked&&!e.mustMigrateAuth&&e.completeActivationHubTaskByName("download-extension")},MXj=async A=>{let j=A?[A]:_.getAccountHandlers;for(let e of j)if(e.isUnlocked&&!qv(e.uuid,"migrate-data")){let t=0,r=e.vaults.filter(a=>e.user?.isOwner()?a.type==="E"||a.type==="P":a.isPersonal);for(let a of r)if(a.localId){let n=await e.getVaultItems(a.localId);if(t+=n.length,t>=_SA)break}t>=_SA&&e.completeActivationHubTaskByName("migrate-data")}},NSA=()=>{let A=_.getAccountHandlers;for(let j of A)j.isUnlocked&&j.completeActivationHubTaskByName("practice-extension")};var qg="DesktopAppStateChanged",KS=class{constructor(j){if(this.canEnableFeature=j.browser!=="safari-ios",this._baseDisconnectionReason={type:"Disconnected",invalidBrowserState:2,hasEverConnectedToDesktopApp:Gi(),latestReason:0},j.useSharedLockState&&this.canEnableFeature){this.state={type:"Initial"};let e=!Gi()||!j.hasAccounts;this.connectWithDesktopApp({spawnMainApp:e}),chrome.windows.onFocusChanged.addListener(this.onBrowserWindowFocusChange.bind(this))}else this.state={type:"Disabled"}}getState(){return vaA(this.state)}getDesktopApp(){return this.state.type==="ValidConnection"?this.state.desktopApp:void 0}enableSharedLockState(){if(this.state.type==="Connecting"||this.state.type==="ValidConnection"||!this.canEnableFeature){this.canEnableFeature||console.info("Asked to enable Shared Lock State when on browser-ios");return}this.state={type:"Initial"},this.connectWithDesktopApp()}disableSharedLockState(){this.state.type!=="Disabled"&&(this.state.type==="ValidConnection"&&this.state.desktopApp.disconnect(),this.updateState({type:"Disabled"}))}async reconnectWithDesktop(j){return this.connectWithDesktopApp({spawnMainApp:j})}async lockState(){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`Lock state request failed: ${this.state.type}`);let j=this.state.desktopApp;if(!j)throw new Error("Lock state request failed: No Desktop App connection");return j.lockState()}async offlineStatus(){if(this.state.type!=="ValidConnection")throw new Error(`Offline status request failed: ${this.state.type}`);let{desktopApp:j}=this.state;if(!j)throw new Error("Offline status request failed: No Desktop App connection");return j.offlineStatus()}async requestDsecretProxy(j){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`DSecret proxy request failed: ${this.state.type}`);let e=this.state.desktopApp;if(!e)throw new Error("DSecret proxy request failed: No Desktop App connection");return e.requestDsecretHmac(j)}async requestUpgradeFromOfflineState(){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`Request to upgrade connection from offline failed: ${this.state.type}`);let j=this.state.desktopApp;if(!j)throw new Error("Request to upgrade connection from offline failed: No Desktop App connection");return j.requestUpgradeFromOfflineState()}async requestDelegatedSession(j){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`Delegated session request failed: ${this.state.type}`);let e=this.state.desktopApp;if(!e)throw new Error("Delegated session request failed: No Desktop App connection");return e.requestDelegatedSession(j)}async connectWithDesktopApp(j={spawnMainApp:!1}){let e=this.state;if(e.type==="Connecting"||e.type==="ValidConnection")return Oj({numberOfUnlockedAccounts:e.numberOfUnlockedAccounts});if(e.type==="Disabled"||!this.canEnableFeature)return this.canEnableFeature||console.info("Asked to enable Shared Lock State when on browser-ios"),TA(this._baseDisconnectionReason);this.updateState({type:"Connecting",numberOfUnlockedAccounts:0});let t=await RSA((a,n)=>{this.state.type==="ValidConnection"&&this.state.desktopApp===a&&this.updateStateFromDesktopApp(n)},j.spawnMainApp),r=this.updateState({type:"Connecting",numberOfUnlockedAccounts:t.isOk()?t.value.numberOfUnlockedAccounts:0,desktopApp:t.isOk()?t.value.desktopApp:void 0});return t.isOk()?r?!await t.value.desktopApp.init(j.spawnMainApp)||this.state.type==="Disabled"?(this.updateState({type:"Disconnected",reason:this._baseDisconnectionReason}),t.value.desktopApp.disconnect(),TA(this._baseDisconnectionReason)):(this.updateState({type:"ValidConnection",numberOfUnlockedAccounts:t.value.numberOfUnlockedAccounts,desktopApp:t.value.desktopApp}),globalThis.dispatchEvent(new Event(Jg)),Oj({numberOfUnlockedAccounts:t.value.numberOfUnlockedAccounts})):(t.value.desktopApp.disconnect(),TA(this._baseDisconnectionReason)):(t.isErr()&&t.error.latestReason===6?this.updateState({type:"Disabled"}):this.updateState({type:"Disconnected",reason:t.error}),TA(t.error))}updateStateFromDesktopApp(j){j.type==="Disconnected"?this.updateState({type:"Disconnected",reason:{type:"Disconnected",invalidBrowserState:GaA(j),hasEverConnectedToDesktopApp:j.hasEverConnectedToDesktopApp,latestReason:j.latestReason}}):j.type==="Connected"&&this.broadcastState(this.state,this.state)}updateState(j){if(this.state.type==="Disabled"&&(j.type==="Connecting"||j.type==="Disconnected"))return this.broadcastState(this.state,this.state),!1;let e=this.state;return this.state=j,this.broadcastState(e,j),!0}broadcastState(j,e){let t=vaA(j),r=vaA(e);`${JSON.stringify(r)}`,globalThis.dispatchEvent(new CustomEvent(qg,{detail:{state:r,prevState:t}})),zSA(r);let a=t.type!=="Connected"&&r.type==="Connected",n=t.type==="Connected"&&r.type!=="Connected";(a||n)&&FaA()}onBrowserWindowFocusChange(j){j!==chrome.windows.WINDOW_ID_NONE&&(this.state.type==="ValidConnection"||this.state.type==="Connecting"||this.state.type==="Disabled"||(`${j}`,this.reconnectWithDesktop(!1)))}};function vaA(A){switch(A.type){case"Initial":case"Connecting":return{type:"Connecting"};case"ValidConnection":{let j=A.desktopApp.state;return{type:"Connected",accountUuids:j.type==="Connected"?j.accountUuids:[],lockState:j.type==="Connected"?j.lockState:"Locked"}}case"Disconnected":return{type:"Disconnected",latestReason:A.reason.latestReason,invalidBrowserState:A.reason.invalidBrowserState,hasEverConnectedToDesktopApp:A.reason.hasEverConnectedToDesktopApp};case"Disabled":return{type:"Disabled"};default:ue(A)}}var Fi={};Yt(Fi,{DISABLE_BIOMETRY_AUTO_PROMPT:()=>SS,disableBiometry:()=>waA,enableBiometry:()=>$aA,getBiometryAvailabilityStatus:()=>IaA,getBiometryConfig:()=>JSA,isBiometryConfigured:()=>USA,onAccountSignInSuccess:()=>JXj,promptForBiometricsAndUnlock:()=>RXj,removeAccountFromBiometryConfig:()=>UXj,setBiometryConfig:()=>zXj});var Um={};Yt(Um,{getAuthMethod:()=>yaA,getBiometryUnlockAccounts:()=>LXj,getBiometryUnlockSecrets:()=>baA,setLockScreenStatus:()=>NXj});var baA=async A=>{let j=[];for await(let e of A.filter(t=>t.isUnlocked)){let t=await e.masterKey?.exportJwk();t?j.push({accountUuid:e.serveraccount.uuid,userUuid:e.serveraccount.userUUID,accountType:yaA(e.serveraccount.authMethods),muk:{kty:t.kty,kid:t.kid,alg:t.alg,k:t.k,ext:t.ext,key_ops:t.key_ops},srpX:e.client?.CTX?.session.auth?.srpX}):console.warn("Unable to retrieve master unlock key for account:",e.serveraccount.uuid)}return j=j.filter(e=>e.accountType===xE.SecretKey),j.length>0?console.info("Retrieved biometry unlock secrets for the account(s):",j.map(e=>e.accountUuid)):console.info("No biometry unlock secrets found."),j},LXj=A=>{let j=A.map(e=>({accountUuid:e.serveraccount.uuid,userUuid:e.serveraccount.userUUID,accountType:yaA(e.serveraccount.authMethods)}));return j=j.filter(e=>e.accountType===xE.SecretKey),j},yaA=A=>{if(A.find(j=>j.type===cA.OidcAuth))return xE.Sso;if(A.find(j=>j.type===cA.PasswordAuth))return xE.SecretKey;if(A.find(j=>j.type===cA.WebauthnAuth))return xE.WebAuthn;throw new q.LoggableError({errorClass:E`UnsupportedAuthMethodBiometryError`,message:E`Unable to find a supported auth method to use for biometry`})},NXj=async A=>Rj("set-lock-screen-status",{lockScreenStatus:A});var JSA=async()=>{let A=YA().accountsEnabledForBiometry.length>0,j=f6()&&hj.hasPreRegistrationFlag("b5x-safari-biometry"),e=j&&(await IaA(t=>{switch(t){case bo.Available:case bo.Disconnected:case bo.EnrollmentChanged:case bo.Lockout:case bo.NotInteractive:case bo.NotPaired:case bo.Unknown:case bo.WatchNotAvailable:return!0;case bo.NotEnrolled:case bo.NotAvailable:case bo.SensorUnavailable:return!1}})).isBiometryAvailable;return{isUserEnabled:A,isFeatureEnabled:j,isBiometryAvailableOnDevice:e}},zXj=async A=>A.data.isUserEnabled?$aA():waA(),$aA=async(A=_.getAccountHandlers)=>{try{let j=await baA(A);if(j.length===0)return console.warn("No biometry unlock secrets were found"),{succeeded:!1};let t=(await vg.saveBiometryUnlockSecrets(j)).filter(r=>r.succeeded).map(r=>r.accountUuid);if(t.length===0)throw new q.LoggableError({errorClass:E`SaveBiometryError`,message:E`No succeeded accounts were returned when saving the biometry unlock secrets`});return t=t.concat(YA().accountsEnabledForBiometry),tn({accountsEnabledForBiometry:t}),console.info("The following accounts are now configured to use biometry:",t),{succeeded:!0,accountsEnabledForBiometry:t}}catch(j){return j instanceof q.LoggableError&&q.reportError(j),console.error("Unable to save the biometry unlock secrets:",j),{succeeded:!1}}},waA=async()=>{try{let A=YA().accountsEnabledForBiometry;if(A.length===0)return console.warn("No enabled accounts were found in the app config to remove."),{succeeded:!0};let j=Um.getBiometryUnlockAccounts(_.getAccountHandlers.filter(e=>A.includes(e.serveraccount.uuid)));return j.length>0?await vg.removeBiometryUnlockSecrets(j):console.warn("No biometry unlock accounts were found to remove from the secure enclave."),tn({accountsEnabledForBiometry:[]}),console.info("Successfully disabled the biometry configuration."),{succeeded:!0}}catch(A){return A instanceof q.LoggableError&&q.reportError(A),console.error("Unable to remove the biometry unlock secrets:",A),{succeeded:!1}}},USA=async()=>{let A=await JSA();return A.isUserEnabled&&A.isFeatureEnabled},IaA=async(A=j=>j===bo.Available)=>{try{let j=await vg.getBiometryAvailability(),e=A(j.current_availability),t=j.current_method===o1.TouchId,r=j.current_policy===r0.BiometricsOnly||j.current_policy===r0.BiometricsOrWatch,a=e&&t&&r;return a||console.warn("Biometry is unavailable. Biometry status:",j),{isBiometryAvailable:a,currentBiometryAvailability:j.current_availability}}catch(j){j instanceof q.LoggableError&&q.reportError(j),console.error("An error occurred determining the biometry availability:",j)}return{isBiometryAvailable:!1}},SS="disable-biometry-auto-prompt",RXj=async()=>{let A=YA().accountsEnabledForBiometry;if(A.length===0)return console.warn("No enabled accounts were found in the app config to unlock."),TA({type:"NoSavedAccounts"});let j=Um.getBiometryUnlockAccounts(_.getAccountHandlers.filter(n=>A.includes(n.serveraccount.uuid)));if(j.length===0)return console.warn("No biometry unlock accounts were found."),TA({type:"NoSavedAccounts"});let e;try{e=await vg.getBiometryUnlockSecrets(j)}catch(n){return console.error("Unable to unlock account(s) using biometry:",n),TA({type:"FailedToUnlock"})}if(e.userFallback)return console.info("The user opted to enter their account password to unlock the extension."),ce.setItem(SS,"Y"),TA({type:"UserFallback"});if(e.userCancel)return console.info("The user cancelled the biometry prompt."),TA({type:"UserCancel"});if(e.secrets.length===0)return console.error("No biometry unlock secrets were found."),TA({type:"FailedToUnlock"});Um.setLockScreenStatus("working");let t=[],r=await L6();for await(let n of e.secrets){let o=await _A.getDatabase().findAccountByUUID(n.accountUuid);if(!o)console.warn(`Unable to create client for account <${n.accountUuid}>: Unable to retrieve database account.`);else if(!o.secretKey)console.warn(`Unable to create client for account <${n.accountUuid}>: No secret key found.`);else if(!n.srpX)console.warn(`Unable to create client for account <${n.accountUuid}>: No srpX found.`);else try{let i=ud(n.muk),s=await kd({credentials:{accountIdentifier:{accountUUID:n.accountUuid,userUUID:n.userUuid,server:ai(o.signinAddress)},email:o.email,muk:i,secretKey:o.secretKey,signinAddress:o.signinAddress,srpX:n.srpX,dSecret:o.dSecret},device:r}).finally(async()=>qt.updateConnectivityStatus());t.push({client:s,accountUuid:n.accountUuid,muk:i})}catch(i){console.error(`Unable to initialize a client for account <${n.accountUuid}>:`,i)}}if(t.length===0)return console.error("No delegated sessions were created to use to unlock the extension."),Um.setLockScreenStatus("error"),TA({type:"FailedToUnlock"});let a=await Xm({type:"DelegatedSession",data:t});return a.isErr()?(console.error(`Unable to unlock account(s): ${a.error.type}`),Um.setLockScreenStatus("error"),TA({type:"FailedToUnlock"})):Oj(void 0)},JXj=async()=>{if(!await USA())return;if(ce.getItem(SS)==="Y"&&ce.removeItem(SS),(await IaA()).currentBiometryAvailability===bo.EnrollmentChanged&&!(await waA()).succeeded){console.error("Unable to disable biometry and re-enroll the device");return}let A=YA().accountsEnabledForBiometry,j=_.getAccountHandlers.filter(e=>e.isUnlocked&&!A.includes(e.serveraccount.uuid));j.length!==0&&$aA(j)},UXj=async A=>{try{let j=YA().accountsEnabledForBiometry;if(j.filter(t=>t===A.serveraccount.uuid).length===0){console.info(`Unable to remove account from biometry config. Account ${A.serveraccount.uuid} is not configured for biometry`);return}let e=Um.getBiometryUnlockAccounts([A]);e.length>0?(await vg.removeBiometryUnlockSecrets(e),console.info(`Removed account ${A.serveraccount.uuid} from the secure enclave.`)):console.warn(`Unable to remove account ${A.serveraccount.uuid} from the secure enclave. No biometry unlock accounts were retrieved.`),tn({accountsEnabledForBiometry:j.filter(t=>t!==A.serveraccount.uuid)}),console.info(`Removed account ${A.serveraccount.uuid} from the B5X configuration.`)}catch(j){q.reportError(new q.LoggableError({errorClass:E`RemoveAccountBiometryError`,message:E`Unable to remove the biometry unlock secrets for an account`})),console.error("Unable to remove the biometry unlock secrets:",j)}};var vg={};Yt(vg,{getBiometryAvailability:()=>YXj,getBiometryUnlockSecrets:()=>WXj,removeBiometryUnlockSecrets:()=>XXj,saveBiometryUnlockSecrets:()=>VXj});var MS=1e4,XXj=async A=>j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"remove",data:{accounts:A,useBiometry:!0,useAppleWatch:!1,fallbackPhrase:nA("Enter Account Password"),unlockPhrase:nA("Unlock")}}})}),MS,"Unable to remove the biometry unlock secrets"),VXj=async A=>{let j=await j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"save",data:{secrets:A}}})}),MS,"Unable to save the biometry unlock secrets");if(j&&j.type==="save")return j.data.results;throw new q.LoggableError({errorClass:E`BiometryNativeMessaging`,message:E`Expected save response type incorrect`})},WXj=async A=>{let j=await j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"unlock",data:{accounts:A,useBiometry:!0,useAppleWatch:!1,fallbackPhrase:nA("Enter Account Password"),unlockPhrase:nA("Unlock")}}})}),MS,"Unable to retrieve the biometry unlock secrets");if(j&&j.type==="unlock")return j.data;throw new q.LoggableError({errorClass:E`BiometryNativeMessaging`,message:E`Expected unlock response type incorrect`})},YXj=async()=>{let A=await j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"biometryAvailability"}})}),MS,"Unable to determine if biometry is available");if(A&&A.type==="biometryAvailability")return A.data;throw new q.LoggableError({errorClass:E`BiometryNativeMessaging`,message:E`Expected biometryAvailability response type incorrect`})};async function QXj(A){let j=await new Promise(t=>chrome.tabs.create({url:A},t)),e=await j6.withTimeout(new Promise(t=>{chrome.webRequest.onHeadersReceived.addListener(function r(a){a.statusCode>=300&&a.statusCode<400||(chrome.webRequest.onHeadersReceived.removeListener(r),t(a))},{tabId:j.id,urls:["<all_urls>"]})}),5e3,"No response from tab");return{tab:j,statusCode:e.statusCode}}async function XSA(A){return await tA.getAppleChangePasswordUrl(A.toString())??A.origin}async function ZXj(A,j){await new Promise(e=>{chrome.tabs.executeScript(A,{allFrames:!1,code:`
          chrome.runtime.onMessage.addListener(function onCheckWellKnown(message, sender, sendResponse) {
            if (message.name !== "check-well-known") return;
            chrome.runtime.onMessage.removeListener(onCheckWellKnown);

            const base = message.data;

            try {
              fetch(new URL("/.well-known/resource-that-should-not-exist-whose-status-code-should-not-be-200", base), {
                mode: "no-cors",
              }).then((result) => {
                const status = result.status;
                sendResponse(status < 200 || status > 299);
              }).catch(() => sendResponse(false));
            } catch {
              sendResponse(false);
            }

            return true;
          });
        `},e)});try{let e=new Promise(t=>chrome.tabs.sendMessage(A,{name:"check-well-known",data:j.origin},t));return await j6.withTimeout(e,1500)}catch{return!1}}async function WF(A){let j=fl(A.url);if(!j)throw new Error("Unable to parse URL from item");let{tab:e,statusCode:t}=await QXj(`${j.origin}/.well-known/change-password`);if(typeof e.id!="number"){console.error("Opened tab was missing id");return}if(t<200||t>299){chrome.tabs.update(e.id,{url:await XSA(j)});return}await ZXj(e.id,j)||chrome.tabs.update(e.id,{url:await XSA(j)})}var _S=A=>async()=>Promise.reject(new Error(`clients.${A} is only available in service workers.`)),VSA=na()&&"clients"in globalThis?globalThis.clients:{claim:_S("claim"),get:_S("get"),matchAll:_S("matchAll"),openWindow:_S("openWindow")};var LS=class{constructor(){this.cache={},this.canDebug=!1,this.label="Cache",this.log=new ht(this.label)}cacheValues(){return Object.values(this.cache)}cacheIdsByTab(j){return this.cacheValues().filter(e=>e.tabId===j).map(e=>e.uuid)}cacheIdsByType(j){return this.cacheValues().filter(e=>e.grouping===j).map(e=>e.uuid)}cacheValuesByTab(j){return this.cacheIdsByTab(j).map(e=>this.cache[e])}cacheValuesByGrouping(j){return this.cacheIdsByType(j).map(e=>this.cache[e])}cacheValuesByTabAndGrouping(j,e){return this.cacheValues().filter(t=>t.tabId===j&&t.grouping===e)}debug(j){this.canDebug&&this.log.debug(j)}cacheIds(){return Object.keys(this.cache)}upsertValueToCache(j,e,t,r){let a=r||sF().str;return this.cache[a]={data:t,tabId:j,grouping:e,uuid:a},this.debug(`${r} upserted. Cache ids=${JSON.stringify(this.cacheIds())}`),a}getAllCachedData(j,e){return!j&&!e?this.cacheValues().map(t=>t.data):j&&!e?this.cacheValuesByTab(j).map(t=>t.data):!j&&e?this.cacheValuesByGrouping(e).map(t=>t.data):j&&e?this.cacheValuesByTabAndGrouping(j,e).map(t=>t.data):[]}hasCachedData(j,e){return this.getAllCachedData(j,e).length!==0}hasCachedDataForUuid(j){return!!this.cache[j]}getCachedData(j){let e=this.cache[j];if(e)return e.data}getCachedValue(j){let e=this.cache[j];if(e)return e}removeCachedData(j){let e=!!this.cache[j];delete this.cache[j],e?this.debug(`${j} removed. Cache ids=${JSON.stringify(this.cacheIds())}`):this.debug(`${j} already removed. Cache ids=${JSON.stringify(this.cacheIds())}`)}turnOnDebug(j){this.canDebug=!0,this.log=new ht(j||this.label)}turnOffDebug(){this.canDebug=!1}};var WSA={"inline-menu":!0,"passkey-save-prompt":!0,"passkey-signin-prompt":!0,"watchtower-breach":!0};var NS,xg=()=>NS||(NS=new OaA(WSA),NS);var OaA=class{constructor(j){this.debug=!1;this.onConnect=async j=>{let e=this.parsePort(j);if(!e){this.log.debug(`${j.name} connection is not formatted for support - ignoring`);return}let{portType:t,tabId:r,portId:a,params:n}=e;if(await this.closeUnhealthyPorts(r,t),n.reconnectId){let k=this.activePorts.getPort(n.reconnectId);if(k){this.log.debug(`${j.name} replacing port ${t.str}/${n.reconnectId.str}`),k.port.replace(j,a),this.activePorts.removePort(n.reconnectId),this.activePorts.upsertPort(r,t,k,a);return}}let o=this.createWrappedPort(j,a,t,n.reconnect);this.log.info(`${j.name} opened from peer but not yet tracked - ${this.oIds(r)}`);let i=this.pendingPortRequests.getPendingRequest(r,t,n),s=`${t.str}/${a.str}`;if(!i){let k={port:o,state:"Open",id:a,params:n};this.activePorts.upsertPort(r,t,k,a),this.log.info(`${s} nobody waiting in background - ${this.pIds(r)}`),this.log.info(`${s} added to open - ${this.oIds(r)}`);return}this.log.info(`${t.str}/${i.id.str} waiting in background - ${this.pIds(r)}`);let l={port:o,state:"Connected",id:a,params:n};this.activePorts.upsertPort(r,t,l,a),this.log.info(`${s} added to connected - ${this.cIds(r)}`),this.pendingPortRequests.removePort(i.id),i.resolve(o);let d=`${s} resolved pending ${i.id.str}`;this.log.info(`${d} - ${this.cIds(r)}`)};this.createWrappedPort=(j,e,t,r)=>new PaA({browserPort:j,id:e,name:t,reconnect:!!r,onDisconnect:a=>{this.activePorts.removePort(a)},onLost:a=>{let n=this.activePorts.getPortRow(a);if(!n){this.log.debug("Port lost when it's not tracked - skipping recovery setup");return}if(n.data.state==="Open"){this.log.debug("Port lost before background ever connected - prefer closing over recovery"),n.data.port.close();return}n.data.state="Recoverable",this.activePorts.upsertPort(n.tabId,t,n.data,a)}});this.sendMessage=async(j,e,t)=>{await this.closeUnhealthyPorts(j,e);let r=this.activePorts.getOpenPort(j,e);if(!r){this.log.error(`No port with given tab and type - ${this.oIds(j)}`);return}r.port.postMessage(t)};this.parsePort=j=>{let e=j.name.split("/");if(e.length!==2){this.log.debug(`${j.name} A port connection with an unformatted name was opened - ignoring`);return}let[t,r]=e,a=t;if(!this.supportedPorts[a]){this.log.debug(`${j.name} A port connection was opened with an unsupported name - ignoring`);return}let n=oj.assertLogSafe(a);if(r.length===0){this.log.debug(`${j.name} A port connection was opened with an incorrect id & query param format - ignoring`);return}let[o,i]=r.split("?");if(o.length===0){this.log.debug(`${j.name} A port connection was opened without a valid port id - ignoring`);return}let s=oj.assertLogSafe(o),l={};if(i){let d=new URLSearchParams(i),k=d.get("reqId")??void 0;l.reqId=k?oj.assertLogSafe(k):void 0;let u=d.get("reconnect");l.reconnect=u==="true";let m=d.get("reconnectId")??void 0;l.reconnectId=m?oj.assertLogSafe(m):void 0}if(!j.sender?.tab?.id){this.log.error("A port connection was opened without a tab id - ignoring");return}return{portType:n,tabId:j.sender.tab.id,portId:s,params:l}};this.oIds=j=>"open="+JSON.stringify(this.activePorts.getFilteredPortIds(j,"Open"));this.cIds=j=>"connected="+JSON.stringify(this.activePorts.getFilteredPortIds(j,"Connected"));this.pIds=j=>"pending="+JSON.stringify(this.pendingPortRequests.getFilteredPortIds(j,"Requesting"));this.activeIds=()=>"active="+JSON.stringify(this.activePorts.getAllPortIds());this.wasPortConnected=(j,e)=>!!this.activePorts.getConnectedPort(e,j);this.getPort=async(j,e,t,r={})=>{if(!this.supportedPorts[j.str])throw new Error(`${j.str} is not registered, update PortManager constructor`);r?.reqId||await this.closeUnhealthyPorts(e,j);let a=this.activePorts.getOpenPort(e,j,r);if(a){let l=`${j.str}/${a.id.str}`;return this.log.debug(`${l} background requested an open port - ${this.oIds(e)}`),a.state="Connected",this.activePorts.upsertPort(e,j,a,a.id),this.log.debug(`${l} upserted port as connected - ${this.cIds(e)}`),Promise.resolve(a.port)}let n=sF(),o=`${j.str}/${n.str}`;this.log.debug(`${o} background requested an inactive port - ${this.pIds(e)}`);let i=new Promise(l=>{this.log.debug(`${o} creating pending request to be resolved later`);let d={resolve:l,id:n,params:r,state:"Requesting"};this.pendingPortRequests.upsertPort(e,j,d,n)}),s=As(t).then(()=>{throw this.log.debug(`${o} hit getPort timeout - will remove from ${this.pIds(e)}`),this.pendingPortRequests.removePort(n),new Error("unavailable")});return Promise.race([i,s])};this.broadcast=j=>{let{type:e}=j;this.log.info(`${e} broadcasting across all ${this.activeIds()}`),this.activePorts.getAllPorts().forEach(t=>{t.port.postMessage(j)})};this.closeUnhealthyPorts=async(j,e)=>{let a=this.activePorts.getAllPorts(j,e).map(async n=>n.port.closeIfUnhealthy(100,!0));await Promise.all(a)};this.activePorts=new zS,this.pendingPortRequests=new zS,this.supportedPorts=j,this.log=new ht("PortManager"),this.debug&&(this.activePorts.turnOnDebug("PortManager: PortCache"),this.pendingPortRequests.turnOnDebug("PortManager: PendingCache")),chrome.runtime.onConnect.addListener(this.onConnect.bind(this))}},PaA=class{constructor({browserPort:j,id:e,onDisconnect:t,onLost:r,name:a,reconnect:n}){this.setConfig=(j,e,t,r)=>{this.port=j,this.id=e,this.name=t,this.logPrefix=`PortManager: ${t.str}/${e.str}`,this.reconnect=r};this.addPortListeners=()=>{this.port.onMessage.addListener(this.onMessage.bind(this)),this.port.onDisconnect.addListener(this.peerDisconnect.bind(this))};this.removePortListeners=()=>{this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.peerDisconnect)};this.setHealthCheckToDefaults=()=>{this.healthCheckCompleter=null,this.healthCheckId=null};this.closeIfUnhealthy=async(j,e=!1)=>{if(this.healthCheckCompleter!==null){`${this.logPrefix}`,await this.healthCheckCompleter.promise;return}this.healthCheckCompleter=js(),this.healthCheckId=sF();try{let r={type:"pm-health-check-request",data:{id:this.healthCheckId.str}};this.port.postMessage(r)}catch{`${this.logPrefix}`;return}let t=await Promise.race([this.healthCheckCompleter.promise,As(j)]);if(t.type==="timeout"){this.healthCheckCompleter.resolve(t);let r="did not receive health check response - closing port";console.warn(`${this.logPrefix} ${r}`),this.onDisconnect(!0,r);return}if(t.data.windowClosed!==!1){let r="sender window has been closed - closing port";console.warn(`${this.logPrefix} ${r}`),this.onDisconnect(!1,r);return}e&&`${this.logPrefix}`,this.healthCheckCompleter=null,this.healthCheckId=null};this.handleHealthCheckResponse=j=>{if(this.healthCheckId===null||this.healthCheckCompleter===null){console.error(`${this.logPrefix} received health check response when no request is in flight - ignoring`);return}if(j.data.id!==this.healthCheckId.str){console.warn(`${this.logPrefix} received health check response for stale request - ignoring`);return}this.healthCheckCompleter.resolve(j)};this.onMessage=j=>{if(`${this.logPrefix}${j.type}`,j.type==="pm-health-check-response"){this.handleHealthCheckResponse(j);return}if(this.pendingMessageResolver!==null){this.pendingMessageResolver(j),this.pendingMessageResolver=null,this.pendingMessage=null;return}this.messages.push(j)};this.postMessage=j=>{try{this.port.postMessage(j),`${this.logPrefix}${j.type}`}catch{console.warn(`${this.logPrefix} failed to send: ${j.type}`)}};this.raceDisconnect=async(j,e)=>{if(j.length===0&&(typeof e!="number"||e<0))throw new Error("raceDisconnect must include a known ending - include a positive timeout");let t,r,a;if(Oe()){let o=()=>{this.closeIfUnhealthy(50)};o(),r=setInterval(o,50)}try{t=await Promise.race([this.getResolvingDisconnect(),As(e),...j])}catch(n){a=n}if(r&&clearInterval(r),a)throw a;return t};this.getResolvingDisconnect=async()=>new Promise(j=>{this.disconnectPromise.then(e=>{j({type:"disconnected",data:{error:e}})})});this.readMessage=async()=>{if(this.messages.length>0){let j=this.messages[0];return this.messages.shift(),Promise.resolve(j)}if(this.pendingMessageResolver!==null)throw new Error("out of bounds");return this.pendingMessage=new Promise(j=>{this.pendingMessageResolver=j}),this.pendingMessage};this.readUntil=async j=>{for(;;){let e=await this.readMessage();if(j.some(t=>t===e.type))return e}};this.sendErrorAndClose=j=>{this.port.postMessage({type:"error",data:{loggableReason:j}}),this.close(j)};this.close=j=>{j?console.error(`${this.logPrefix} closed by background with error "${j}"`):`${this.logPrefix}`,this.onDisconnect(!1,j)};this.replace=(j,e)=>{this.setConfig(j,e,this.name,this.reconnect),this.addPortListeners(),this.setHealthCheckToDefaults()};this.peerDisconnect=()=>{let j=chrome.runtime.lastError?.message;j?console.error(`${this.logPrefix} closed by browser with error "${j}"`):`${this.logPrefix}`;let e=!!j;this.onDisconnect(e,j)};this.onDisconnect=(j,e)=>{if(this.reconnect&&j){this.notifyManagerOfLostPeer?.(this.id),`${this.logPrefix}`;return}this.removePortListeners();try{this.port.disconnect()}catch{}this.disconnectResolver(e),this.notifyDisconnect&&(this.notifyDisconnect(this.id),this.notifyDisconnect=void 0)};this.setConfig(j,e,a,n),this.addPortListeners(),this.notifyDisconnect=t,this.notifyManagerOfLostPeer=r,this.disconnectPromise=new Promise(o=>{this.disconnectResolver=o}),this.messages=[],this.pendingMessage=null,this.pendingMessageResolver=null,this.setHealthCheckToDefaults()}},zS=class extends LS{constructor(){super()}upsertPort(j,e,t,r){return super.upsertValueToCache(j,e.str,t,r?.str)}getAllPortIds(){return super.cacheIds()}getFilteredPortIds(j,e){return super.getAllCachedData(j).filter(r=>r.state===e).map(r=>r.id)}getAllPorts(j,e){return super.getAllCachedData(j,e?.str)}findRecord(j,e,t,r){return super.getAllCachedData(j,e.str).filter(n=>n.state===t).find(n=>r?.reqId?r.reqId.str===n.params.reqId?.str:typeof n.params?.reqId>"u")}getPendingRequest(j,e,t){return this.findRecord(j,e,"Requesting",t)}getOpenPort(j,e,t){return this.findRecord(j,e,"Open",t)}getConnectedPort(j,e,t){return this.findRecord(j,e,"Connected",t)}getPort(j){return super.getCachedData(j.str)}getPortRow(j){return super.getCachedValue(j.str)}removePort(j){return super.removeCachedData(j.str)}turnOnDebug(j){super.turnOnDebug(j)}};async function CaA(A,j){return!1}async function Nk(A,j=!1,e){if(await CaA(A,j))return!0;if(e){let r={type:"targeted-inline-message",data:{message:{name:"copy-to-clipboard-in-content-script",data:{textToCopy:A}}}};return xg().sendMessage(e.id,oj.assertLogSafe("inline-menu"),r).then(()=>!0).catch(()=>(console.error("Could not send copy event to inline menu over port"),!1))}return(await Rj("copy-to-clipboard-in-content-script",{textToCopy:A})).ok}async function RS(A){return na()?browser.action.setPopup({popup:A}):browser.browserAction.setPopup({popup:A})}async function ln(A={}){let e={...{skipIconUpdate:!1},...A},t=e.desktopAppState||ie.getDesktopAppState();if(e.skipIconUpdate||t.type==="Connecting"||JS(Kt()?"locked":"unlocked"),!e.updateIconOnly)return t.type==="Connected"||ut()?RS("/popup/index.html"):_.hasAccountHandlers?RS("/popup/index.html"):RS("")}var AVj=4;var US=class{constructor(){this.sessions=new Map}handleExpiredNotifications(j){this.complete(j)}dismisAll(){this.sessions.clear()}get(j){for(let t of this.sessions.values())if(t.secondaryTabId===j)return t;let e=this.sessions.get(j);if(e)return e}getOrCreate(j){let e=this.get(j.id);return e||this.create(j)}createOrUpdate(j,e){let t=this.get(j.id);return t?(t=Object.assign(t,e),this.sessions.set(t.id,t),t):this.create(j,e)}complete(j){if(this.sessions.has(j)){this.sessions.delete(j);return}for(let[e,t]of this.sessions)if(t.secondaryTabId===j){this.sessions.delete(e);return}}inlineNotificationExpired(j){let e=this.get(j.id);return!e||e.step!=="ssh-next-steps-notification"?!1:j.nakedDomain()!==e.nakedDomain||e.nextStepsNotificationPageCount>AVj}async cleanup(){let j=[];for(let[e,t]of this.sessions)(!t.secondaryTabId&&!await YSA(e,t.nakedDomain)||t.secondaryTabId&&!await YSA(t.secondaryTabId,t.nakedDomain))&&j.push(e);j.forEach(e=>this.sessions.delete(e))}create(j,e){let t=Object.assign({id:j.id,nakedDomain:j.nakedDomain(),step:"ssh-feature-intro",nextStepsNotificationPageCount:0},e??{});return this.sessions.set(j.id,t),t}},YSA=async(A,j)=>new Promise(e=>{try{chrome.tabs.get(A,t=>{if(!t?.url)return e(!1);let r=Ft(t);if(!r)return e(!1);e(r.nakedDomain()===j)})}catch{e(!1)}});var $l=new US,jVj=A=>{A.detail.notifications?.forEach(e=>{e.type==="sshOnboardingNextSteps"&&e.tabId&&$l.handleExpiredNotifications(e.tabId)})};function QSA(){qe.resolve(qi).subscribe(Zk,jVj)}var TaA={github:{sshCreateUrl:()=>"https://github.com/settings/ssh/new",activationUrlPattern:/^https?:\/\/github\.com/,variant:"github",nakedDomain:"github.com"},gitlab:{sshCreateUrl:()=>"https://gitlab.com/-/profile/keys",activationUrlPattern:/^https?:\/\/gitlab\.com/,variant:"gitlab",nakedDomain:"gitlab.com"},google_compute_engine:{sshCreateUrl:A=>{let j=new URL("https://console.cloud.google.com/compute/metadata?tab=sshkeys"),t=new URL(A).searchParams.get("authuser");return t&&j.searchParams.set("authuser",t),j.toString()},activationUrlPattern:/https?:\/\/console\.cloud\.google\.com\/compute/,variant:"google_compute_engine",nakedDomain:"google.com"},bitbucket:{sshCreateUrl:()=>"https://bitbucket.org/account/settings/ssh-keys/",activationUrlPattern:/https?:\/\/bitbucket\.org/,variant:"bitbucket",nakedDomain:"bitbucket.org"},azure_devops:{sshCreateUrl:A=>`https://dev.azure.com/${new URL(A).pathname.split("/").filter(Boolean)[0]??""}/_usersSettings/keys`,activationUrlPattern:/https?:\/\/dev\.azure\.com/,variant:"azure_devops",nakedDomain:"azure.com"},digitalocean:{sshCreateUrl:()=>"https://cloud.digitalocean.com/account/security",activationUrlPattern:/https?:\/\/.*\.digitalocean\.com/,variant:"digitalocean",nakedDomain:"digitalocean.com"}},ZSA="ssh_onboarding_dismissed",eVj="https://developer.1password.com/docs/ssh/agent/?utm_medium=direct&utm_source=browser_extension&utm_campaign=ssh-onboarding",tVj="onepassword://settings/developers";function rVj(){let A=YA().language.toLowerCase();return A==="ja"&&(A="jp"),A==="en"&&(A=""),`https://1password.com/${A.length>0?`${A}/`:""}downloads/?utm_medium=direct&utm_source=browser_extension&utm_campaign=ssh-onboarding`}function YF(){try{return JSON.parse(vj.getItem(ZSA)??"false")===!0}catch{return!1}}function QF(){return!ut()}async function AMA(){let A=await Ij.loadItemCache();return A?A.items(se.combine(se.invert(se.archived),se.sshKeys,se.vaultTypePersonal)).length:(console.warn("Failed to load cache checking SSH key count."),0)}function aVj(A,j){let e=Object.values(TaA).find(t=>t.nakedDomain===A);return e?e.activationUrlPattern.test(j):!1}function KaA(A){!QF()||YF()||ta(A,{type:"sshOnboardingNextSteps"})}async function XS(A,j){if(!(!QF()||YF()||Kt()||await AMA()>0)){for(let e of Object.values(TaA))if(e.nakedDomain===A&&e.activationUrlPattern.test(j))return e}}function HaA(){vj.setItem(ZSA,JSON.stringify(!0))}async function nVj(A){if(!QF()||YF())return;let j=$l.get(A.id);if(!j||j.step!=="create-ssh-key-page")return;let e=A.nakedDomain();if(!aVj(e,A.unparsedUrl))return;let t=A.URL();if(!t||!Object.values(TaA).some(o=>o.sshCreateUrl(A.unparsedUrl).includes(t.pathname)))return;let r=await Yr(A,!0),n=(await tA.analyzePage(r,!1,[])).resolvedPage.frames.map((o,i)=>{let s=o.fields.find(l=>l.designation.autofillType===Nj.SshKey);return{allowedTargets:{type:"Targets",data:[{type:"Url",data:e}]},operations:s?[{action:t1.FocusOpid,opid:s.opid,value:""}]:[],uuid:r.frames[i].uuid}});return{filledDesignations:[],frames:n}}async function VS(){if(YF()||!QF())return!1;let A=await Gt();if(!A||!await XS(A.nakedDomain(),A.unparsedUrl))return!1;let j=$l.get(A.id);return!(j&&j.step!=="ssh-feature-intro"&&j.secondaryTabId===A.id)}function jMA(){console.info("[SSH Onboarding]: Dismissing SSH onboarding flow."),$l.dismisAll(),HaA(),ln({updateIconOnly:!0})}async function eMA(){let A=await Gt();if(!A){console.warn("[SSH Onboarding]: No active tab.");return}let j=await XS(A.nakedDomain(),A.unparsedUrl);if(!j)return;let e=$l.getOrCreate(A);return{variant:j.variant,operatingSystem:(await He.getBrowserInfo()).osName,isOnSshKeyCreatePage:e.step==="create-ssh-key-page"&&A.id===e.secondaryTabId}}function tMA(A,j){if(!nn("sshOnboardingNextSteps")){if(!j.tab.id){console.warn("[SSH Onboarding]: No active tab.");return}KaA(j.tab.id)}}async function rMA(){let A=await Gt();if(!A){console.warn("[SSH Onboarding]: No active tab.");return}let j=await XS(A.nakedDomain(),A.unparsedUrl);if(!j)return;let e=new URL(j.sshCreateUrl(A.unparsedUrl));chrome.tabs.create({url:e.toString()},t=>{$l.createOrUpdate(A,{step:"create-ssh-key-page",secondaryTabId:t.id})}),Go()}async function aMA(A,{tab:j}){!QF()||YF()||Kt()||await AMA()>0||(nn("sshOnboardingNextSteps")?KaA(j.id):$l.createOrUpdate(j,{step:"ssh-next-steps-notification"}))}function nMA(){return{isConnectedToOp8:pd(),learnMoreUrl:eVj}}function oMA(A){if(!pd()){console.info("[SSH Onboarding]: Not connected to OP8, directing to download URL."),chrome.tabs.create({url:rVj(),active:!0}),$l.dismisAll(),HaA();return}chrome.tabs.create({url:tVj,active:!0}),$l.dismisAll(),HaA()}async function iMA(A){let j=await Gt();if(!j){console.warn("[SSH Onboarding]: No active tab.");return}let e=$l.get(j.id);if(e?.step!=="create-ssh-key-page"||!e?.secondaryTabId)return;let t=await an(e.secondaryTabId);if(!t)return;let r=await nVj(t);r&&Rj("autofill-perform-fill",{nextFill:{fillPayload:r},authorizedUnsafeHttp:!1},{tabId:j.id})}async function sMA(A){if(ln({updateIconOnly:!0}),!QF())return;let j=$l.get(A.id);if(j){if(console.info("[SSH Onboarding]: Step: ",j.step),$l.inlineNotificationExpired(A))$l.complete(A.id);else if(j.step==="ssh-next-steps-notification"&&!nn("sshOnboardingNextSteps"))j.nextStepsNotificationPageCount+=1,KaA(A.id);else if(j.step==="create-ssh-key-page"&&j.secondaryTabId){let e=await an(j.secondaryTabId);if(e){let t=await XS(e.nakedDomain(),A.unparsedUrl);t&&chrome.tabs.sendMessage(e.id,{name:"ssh-focus-create-form",data:t.variant})}}}$l.cleanup(),YF()}var oVj="/images/icons/app_icon-dark_bg-color-",iVj="/images/icons/app_icon-light_bg-color-",sVj="Using the dark icon.",lVj="Using the light icon.",cVj="Using the icon with notification dot.",dVj=async A=>(ut()&&(A="unlocked"),(_.anyAccountHasUnseenDeviceEnrollments||await VS())&&(A+="-notification",vv.info(cVj)),SaA()?.prefersColorSchemeDark?(vv.info(sVj),`${oVj}${A}`):(vv.info(lVj),`${iVj}${A}`)),lMA;var JS=async A=>{let j=await dVj(A);if(j===lMA)return;lMA=j;let e={path:{12:j+"-12.png",16:j+"-16.png",19:j+"-19.png",24:j+"-24.png",32:j+"-32.png",38:j+"-38.png",48:j+"-48.png",72:j+"-72.png"}};na()?browser.action.setIcon(e):browser.browserAction.setIcon(e)};var RMA=W(iM());var NWj="\u{1F9F0} Configuring content script metadata",zWj="Content script metadata updated.",RWj="Unable to update content script metadata.",JWj="Unable to retrieve content script metadata.",vv=new ht(NWj),eb=A=>{if(!(0,RMA.default)(A,SaA())){vv.info(zWj);try{ce.setItem(w_,JSON.stringify(A)),JS(Kt()?"locked":"unlocked")}catch{vv.error(RWj)}}},SaA=()=>{let A;try{A=JSON.parse(ce.getItem(w_)??"{}")}catch{vv.error(JWj),A={prefersColorSchemeDark:!1}}return A};var UWj="b5xReloaded",bv=class{constructor(j){this.isEnabled=()=>{let{devtoolsEnabled:j}=YA();return j};this.addAccountPromptEnabled=()=>this._persistentStorage.getItem("devtools-add-account-prompt")!=="N";this.sendLocalSentryEnabled=()=>{let j=this._persistentStorage.getItem("devtools-send-local-sentry");return j?j==="Y":!1};this.forceKolideDeviceTrustFailEnabled=()=>{let j=this._persistentStorage.getItem("devtools-force-kolide-device-trust-fail");return j?j==="Y":!1};this.reloadExtension=()=>{Oe()||chrome.notifications.create(UWj,this.getReloadNotification(),()=>{chrome.runtime.reload()})};this.toggleAddAccountPrompt=()=>{this._persistentStorage.setItem("devtools-add-account-prompt",this.addAccountPromptEnabled()?"N":"Y")};this.toggleSendLocalSentry=()=>{this._persistentStorage.setItem("devtools-send-local-sentry",this.sendLocalSentryEnabled()?"N":"Y")};this.toggleForceKolideDeviceTrustFail=()=>{this._persistentStorage.setItem("devtools-force-kolide-device-trust-fail",this.forceKolideDeviceTrustFailEnabled()?"N":"Y")};this.getReloadNotification=()=>({type:"basic",iconUrl:Cs,title:"1Password Reloaded \u{1F504}\u2705",message:"Don't forget to reload any open tabs before testing."});this._persistentStorage=j}};bv=n6([dc(),Zv(0,_q("PersistentStorage"))],bv);var z6=()=>qe.resolve(bv),XWj=A=>{let j=z6();j.isEnabled()&&A.url.startsWith("http://reload.1password")&&(j.reloadExtension(),chrome.tabs.remove(A.tabId))};chrome.webNavigation.onBeforeNavigate.addListener(XWj);async function JMA(){let A=await wD();if(A.isOk())return A.value;Kr({id:"scan-qr-toast-element",message:nA("No QR code found for 2FA"),behavior:fr.Ephemeral,primary:{id:"scan-qr-toast-element-open-support-article",value:{type:"text",content:nA("Learn More\u2026")},action:{type:"OpenLink",content:"https://support.1password.com/one-time-passwords/"}}})}async function sM(A){let j=await JMA();if(j){try{await VWj(A.uuid,j)}catch{if(await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"scan-qr-toast-element",message:nA("Unable to add one-time password field to item"),behavior:fr.Ephemeral});return}try{let e=await tA.generateOneTimePasswordFromUrl(j);await Nk(e)}catch{Kr({id:"scan-qr-toast-element",message:nA("Unable to generate and copy one-time password"),behavior:fr.Ephemeral});return}Kr({id:"scan-qr-toast-element",message:nA("Copied one-time password"),behavior:fr.Ephemeral})}}async function VWj(A,j){let e=await Rr(A);if(!e)throw new Error("Could not load item");let t=!1;return e.details.sections||(e.details.sections=[]),e.details.sections.push({title:nA("Security"),fields:[{k:"concealed",n:"TOTP_"+q.generateUUID(),v:j,t:nA("one-time password")}],name:"Section_"+q.generateUUID()}),$a(e,t)}async function UMA(){return B6(),JMA()}var WWj=["Edit","Favorite","Archive","Delete","Restore","Move","Share","ScanQrTotpCode"];function YWj(A){return WWj.includes(A)}async function VMA(A){if(YWj(A.action.type)&&await qt.connectivityStatus()!=="online"){Fo();return}let j=OPA(await Promise.all(A.itemIds.map(async t=>hc(t))));if(!j.isOk()){console.error("Unable to load one or more items while handling item action");return}let e=j.value.map(t=>t.cacheInformation===void 0?t:void 0).filter(t=>!!t);switch(A.action.type){case"Autosubmit":return QWj(j.value);case"Favorite":return ZWj(e);case"CopyLink":return AYj(e);case"CopyJson":return jYj(j.value);case"CopyUuid":return eYj(e);case"Archive":return tYj(A,A.action,e);case"Delete":return rYj(A,A.action,e);case"Edit":return aYj(j.value);case"Autofill":return nYj(j.value);case"OpenAndFill":return oYj(e);case"OpenUrl":return iYj(e);case"ScanQrTotpCode":return sYj(e);case"OpenInNewWindow":return XMA(j.value);case"OpenInNewWindowFromQX":return XMA(e);case"ChangePassword":return cYj(e);case"Share":return dYj(e);case"OpenInWeb":return lYj(e);case"RestoreRecentlyDeleted":case"Move":case"MoveToVault":case"Tag":case"Restore":case"Print":case"Select":case"Open":case"CopyField":case"CopyFieldFromQX":case"SharingDetails":case"Purge":case"CommitSigning":case"ToggleAppleWatch":case"OpenAgentConfigFile":case"ExpandSnippet":case"ViewItemUsageReport":case"ConnectToSshHost":return;default:ue(A.action)}}var YaA=A=>A.overview.autosubmit!=="never";async function QWj(A){let j=A.every(r=>YaA(r));try{await Promise.all(A.map(async r=>(r.overview.autosubmit=j?"never":void 0,$a(r,!1))))}catch(r){if(console.error("Failed to handleAutosubmit",r),await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"autosubmit-items-toast-element",message:nA("An error occurred. Please try again."),behavior:fr.Ephemeral});return}let e=A.length>1?nA("Disabled sign in automatically on {count} items",{count:A.length}):nA("Disabled sign in automatically on \u201C{title}\u201D",{title:A[0].title}),t=A.length>1?nA("Enabled sign in automatically on {count} items",{count:A.length}):nA("Enabled sign in automatically on \u201C{title}\u201D",{title:A[0].title});Kr({id:"autosubmit-items-toast-element",message:j?e:t,behavior:fr.Ephemeral})}async function ZWj(A){let j=A.every(r=>r.faveIndex!==0);try{await Promise.all(A.map(async r=>{await WMA(r.uuid,!j)}))}catch(r){if(console.error("Failed to handleFavoriteAction",r),await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"favorite-items-toast-element",message:nA("An error occurred. Please try again."),behavior:fr.Ephemeral});return}let e=A.length>1?nA("{count} Items removed from favorites",{count:A.length}):nA("Removed \u201C{title}\u201D from favorites",{title:A[0].title}),t=A.length>1?nA("{count} Items favorited",{count:A.length}):nA("Favorited \u201C{title}\u201D",{title:A[0].title});Kr({id:"favorite-items-toast-element",message:j?e:t,behavior:fr.Ephemeral})}async function AYj(A,j){if(A.length===0)return;let e=await ES(A[0]);Nk(e,void 0,j),Kr({id:"copy-item-link-element",message:nA("Copied item link"),behavior:fr.Ephemeral})}function jYj(A){if(A.length===0)return;let j=A[0];Nk(j.exportToJson()),Ks(j,cA.ItemUsageAction.SecureCopy),Kr({id:"copy-item-link-element",message:nA("Copied item JSON"),behavior:fr.Ephemeral})}function eYj(A){if(A.length===0)return;let j=A[0];Nk(j.uuid),Kr({id:"copy-item-uuid-element",message:nA("Copied item UUID"),behavior:fr.Ephemeral})}async function tYj(A,j,e){if(e.length===0)return;if(j.content.confirmed){try{await Promise.all(e.map(async a=>{await YMA(a.uuid)}))}catch(a){if(console.error("Failed to handleArchiveItem",a),await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"archive-item-toast-element",message:nA("An error occurred. Please try again."),behavior:fr.Ephemeral});return}Kr({id:"archive-item-toast-element",message:e.length>1?nA("{count} Items archived",{count:e.length}):nA("Archived \u201C{title}\u201D",{title:e[0].title}),behavior:fr.Ephemeral});return}let r={id:"archive-item-alert",title:e.length>1?nA("Archive {count} items?",{count:e.length}):nA("Are you sure you want to archive \u201C{itemName}\u201D?",{itemName:e[0].title}),text:nA("Archived items won\u2019t show up in filling suggestions for websites or in apps."),primaryAction:{id:"archive-action-id",label:nA("Archive"),destructive:!1,action:{type:"ItemAction",content:{itemIds:A.itemIds.map(a=>JSON.stringify(a)),collectionUuid:"",action:{type:"Archive",content:{confirmed:!0,skipAlert:!1}}}}},cancelAction:nA("Cancel")};as(r)}async function rYj(A,j,e){if(e.length!==0)if(j.content.confirmed){try{await Promise.all(e.map(async t=>{await lM(t.uuid)}))}catch(t){if(console.error("Failed to handleDeleteItem",t),await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"delete-item-toast-element",message:nA("An error occurred. Please try again."),behavior:fr.Ephemeral});return}Kr({id:"delete-item-toast-element",message:e.length>1?nA("{count} Items deleted",{count:e.length}):nA("Deleted \u201C{title}\u201D",{title:e[0].title}),behavior:fr.Ephemeral})}else{let t=e.length>1?nA("Are you sure you want to delete {count, plural, one {# item} other {# items}}?",{count:e.length}):nA("Are you sure you want to delete \u201C{itemName}\u201D?",{itemName:e[0].title}),r=e.length>1?nA("All of these items will be removed immediately. You can recover items for a limited time on 1Password.com."):nA("This item will be removed immediately. You can recover items for a limited time on 1Password.com."),a={id:"delete-action-item-id",title:t,text:r,primaryAction:{id:"delete-action-id",label:nA("Delete"),destructive:!0,action:{type:"ItemAction",content:{itemIds:A.itemIds.map(n=>JSON.stringify(n)),collectionUuid:"",action:{type:"Delete",content:{confirmed:!0}}}}},cancelAction:nA("Cancel")};as(a)}}async function aYj(A){if(A.length!==0){if(A[0].templateUuid===Ii&&!pd()){as($S());return}try{await hTA(A[0])}catch(j){if(console.error("Failed to handleEditItem",j),await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"edit-item-toast-element",message:nA("An error occurred. Please try again."),behavior:fr.Ephemeral});return}}}async function nYj(A){A.length!==0&&await pv(A[0],"POPUP")}async function oYj(A){A.length!==0&&await pg(A[0])}async function iYj(A){A.length!==0&&await ID(A[0])}function sYj(A){A.length!==0&&sM(A[0])}async function XMA(A){A.length!==0&&(await L5(A[0],"openInNewWindow"),Go())}function lYj(A){A.length!==0&&(Q7(A[0]),Go())}function cYj(A){A.length!==0&&WF(A[0])}async function dYj(A){if(A.length!==0)try{QaA(A[0])}catch(j){if(console.error("Failed to handleShareItem",j),await qt.connectivityStatus()!=="online"){Fo();return}Kr({id:"share-item-toast-element",message:nA("An error occurred. Please try again."),behavior:fr.Ephemeral});return}}async function QMA(A,j){let e=Ij.itemCache?.accountForVaultID(Ua(A.vault)),t=e&&_.getAccountHandlers.find(a=>a.uuid===e.uuid);if(!t)throw new Error("No account found with that uuid.");let r=await t.client?.getDocumentBlob(A,j);if(!r)throw new Error("No document blob found for item");return Ks(A,C$.Reveal),He.downloadFile(j.fileName,r)}async function ZMA(A){let j=await hc(A.itemId);if(!j.isOk()){console.error("Unable to load item while handling item field action");return}switch(A.action.type){case"SecureCopy":case"SecureCopyCountry":case"SecureCopyZip":case"SecureCopyRegion":case"SecureCopyState":case"SecureCopyCity":case"SecureCopyStreet":return uYj(j.value,A.action.content);case"SecureCopyFormattedString":return pYj(j.value,A.action.content);case"OpenUrl":return mYj(j.value,A.action.content);case"OpenAndAutoFillUrl":return EYj(j.value,A.action.content);case"OpenNetworkLocation":return BYj(j.value,A.action.content);case"ToggleReveal":case"ViewRelatedItem":case"ViewPasswordHistory":case"LargeType":case"LargeTypeFormattedString":return;case"Download":return gYj(j.value,A.action.content);case"ShowSshPrivateKeyExportPrompt":case"SecureCopySshPrivateKey":case"ExportSshKey":case"Preview":case"OpenFile":case"ShowInFileBrowser":case"PinFieldToMobileHomeScreen":case"UnPinFieldFromMobileHomeScreen":case"SetDefaultMobileHomeScreenActionToCopy":case"SetDefaultMobileHomeScreenActionToLargeType":case"SetDefaultMobileHomeScreenActionToShowQrCode":case"SetDefaultMobileHomeScreenActionToGoToItem":case"TypeInWindow":case"SecureCopySecretReference":case"LargeMap":case"DisplayWifiQrCode":case"ShareQrCode":case"Fill":case"ConnectToSshHost":case"SafariGetValueForClipboard":case"Decode":return;case"ToggleAlias":return hYj(j.value,A.action.content);default:ue(A.action)}}async function uYj(A,j){let e=await tA.fieldValueByIdentifier(A,j.fieldIdentifier);if(e.isOk()){let{text:t,title:r,mustRecordItemUsage:a}=e.value;try{await Nk(t);let n=r?nA("Copied {fieldTitle}",{fieldTitle:r}):nA("Copied field");Kr({id:`secure-copy-field-item${A.localId}`,message:n,behavior:fr.Ephemeral})}catch{Kr({id:`secure-copy-field-item${A.localId}`,message:nA("Failed to copy field"),behavior:fr.Ephemeral})}a&&Ks(A,cA.ItemUsageAction.SecureCopy)}else console.warn("Unable to find matching field when handling secure copy")}async function pYj(A,j){let e=await tA.fieldValueByIdentifier(A,j.fieldIdentifier);if(e.isOk()){Nk(j.clientFormattedString);let{mustRecordItemUsage:t,title:r}=e.value,a=r?nA("Copied {fieldTitle}",{fieldTitle:r}):nA("Copied field");Kr({id:`secure-copy-field-item${A.localId}`,message:a,behavior:fr.Ephemeral}),t&&Ks(A,cA.ItemUsageAction.SecureCopy)}else console.warn("Unable to find matching field when handling secure copy")}async function mYj(A,j){let e=await tA.fieldValueByIdentifier(A,j.field_identifier);if(e.isOk()){switch(j.open_type){case lx.Url:break;case lx.Email:e.value.text=`mailto:${e.value.text}`;break;case lx.Phone:e.value.text=`tel:${e.value.text}`;break}He.openTab({url:e.value.text})}}async function EYj(A,j){let e=await tA.fieldValueByIdentifier(A,j);e.isOk()&&pg(A,{url:e.value.text})}async function BYj(A,j){let e=await tA.fieldValueByIdentifier(A,j);e.isOk()&&He.openTab({url:e.value.text})}async function gYj(A,j){let e=await tA.unOpaqueFilePosition(j),t=qYj(A,e);function r(){Kr({id:"download-complete-toast",message:nA("Download failed"),behavior:fr.Ephemeral})}try{t.isOk()?(await QMA(A,t.value),Kr({id:"download-complete-toast",message:nA("{fileName} downloaded",{fileName:t.value.fileName}),behavior:fr.Ephemeral})):r()}catch{r()}}async function hYj(A,j){let e;j.state===Vg.Enabled?e=Vg.Disabled:e=Vg.Enabled;try{await P5A(ig(A),j.aliasId,j.accountId,{state:e});let t=j.state===Vg.Enabled?nA("Email blocked"):nA("Email unblocked");Kr({id:"alias-toggled-toast",message:t,behavior:fr.Ephemeral})}catch{Kr({id:"alias-toggled-toast",message:"Something went wrong toggling alias",behavior:fr.Ephemeral});return}}function qYj(A,j){switch(j.type){case"Root":return A.details.documentAttributes?Oj(A.details.documentAttributes):TA(void 0);case"Field":{let e;for(let t of A.details.sections)if(t.name===j.content.sectionId&&t.fields)for(let r of t.fields)r.n===j.content.fieldId&&(e=r.v);return e?Oj(e):TA(void 0)}case"CustomIcon":return TA(void 0)}}async function A2A(){let A=[];for(let j of _.getAccountHandlers)if(!j.isLocked)try{let e=await j.loadPasswordHistory();for(let t of e)t.state===dA.ItemState.Active&&A.push({itemUuid:t.uuid,password:t.getPassword()||t.details.fields?.find(r=>r.designation==="password")?.value||"",timestamp:t.createdAt?.toISOString()??"",url:t.url,itemId:gv(t)})}catch(e){console.error(e)}return A}async function j2A(A){let j=await _A.getDatabase().getItem(A);if(!j)return console.error("Unable to delete password history, item with the given ID could not be found."),TA({type:"ITEM_IN_DB_NOT_FOUND"});if(typeof j.account_id!="number")return console.error("Item was missing account_id"),TA({type:"MISSING_ACCOUNT_ID"});let e=_.findAccountHandlerByID(j.account_id);return e?e.getItem({type:"databaseId",data:A}).then(async t=>{if(!t)return console.error("Unable to delete password history, item with the given ID could not be found."),TA({type:"ITEM_IN_HANDLER_NOT_FOUND"});t.state=dA.ItemState.Deleted;let r=await e.saveItem(t);return Oj(r)}):(console.error(`Unable to delete password history, missing account handler with account ID <${j.account_id}>`),TA({type:"NO_ACCOUNT_HANDLER"}))}async function DD(A,j){let e;try{[e]=_.defaultSavingLocation()}catch(o){console.error("Error retrieving default saving location:",o);let i=o instanceof Pe?o.loggableMessage.str:"unknown reason";throw new q.LoggableError({errorClass:E`SavePasswordHistory`,message:q.logsafe.assertLogSafe(`Unable to save password history. Error retrieving default saving location: ${i}`)})}let t=_.findAccountHandlerByUuid(e.uuid);if(!t)throw new q.LoggableError({errorClass:E`SavePasswordHistory`,message:E`Unable to save password history. Account handler not found.`});let r;try{r=await qt.connectivityStatus()}catch{let o="Error retrieving connectivity status.";throw console.error(o),new q.LoggableError({errorClass:E`SavePasswordHistory`,message:q.logsafe.assertLogSafe(`Unable to save password history. ${o}`),userUuid:t.user?.uuid?Z(t.user?.uuid):void 0})}if(r!=="online")throw new q.LoggableError({errorClass:E`SavePasswordHistory`,message:E`Unable to save password history. Account is offline.`,userUuid:t.user?.uuid?Z(t.user?.uuid):void 0});let a;try{a=await t.getGeneratedPasswordVault()}catch(o){throw console.error("Error retrieving generated password vault:",o),new q.LoggableError({errorClass:E`SavePasswordHistory`,message:E`Unable to save password history. Error retrieving generated password vault.`,userUuid:t.user?.uuid?Z(t.user?.uuid):void 0})}if(!a)throw new q.LoggableError({errorClass:E`SavePasswordHistory`,message:E`Unable to save password history. Missing generated password vault.`,userUuid:t.user?.uuid?Z(t.user?.uuid):void 0});let n=new dA(a);return n.templateUuid=Js,n.vault=a,n.details.password=A.password,n.overview.title=j?.URL()?.hostname??"",n.overview.ainfo=new Date().toLocaleDateString(),n.overview.pgrng=!0,n.overview.pbe=A.entropy,n.overview.ps=A.strengthPercent,n.url=j?.unparsedUrl??"",$a(n,!1,e?.uuid).catch(o=>{throw console.error("Error saving new item to vault:",o),We(o)?o:new q.LoggableError({errorClass:E`SavePasswordHistory`,message:E`Unable to save password history. Error saving new item to vault.`,userUuid:t.user?.uuid?Z(t.user?.uuid):void 0})}).finally(async()=>qt.updateConnectivityStatus())}var OD=async()=>browser.management?browser.management.getAll():(console.warn("The management capability is not enabled. Unable to retrieve installed extensions"),Promise.resolve([])),e2A=async(A={ignoreDisabledExtensions:!0,ignoreCurrentExtensionVersion:!0})=>{let j=await OD();return j=j.filter(e=>NsA.map(t=>t.extensionId).includes(e.id)),A.ignoreDisabledExtensions&&(j=j.filter(e=>e.enabled)),A.ignoreCurrentExtensionVersion&&(j=j.filter(e=>browser.runtime.id!==e.id)),j},t2A=A=>A.forEach(j=>void browser.management.setEnabled(j,!1));var ZaA={};Yt(ZaA,{brexInformation:()=>o2A,clearBrexTokens:()=>bYj,clearDSecret:()=>i2A,funcsForContextMenu:()=>kM,getBrexTokens:()=>FYj,insertManagedCredentialPolicies:()=>l2A,insertManagedCredentials:()=>s2A,removePrivacyAPIKey:()=>n2A,sendNotification:()=>yYj,upliftManagedCredentialPolicies:()=>c2A});var xYj=A=>A.designation==="username"||A.designation==="password",cM=A=>{let j=A.sections.flatMap(e=>e.fields??[]).find(dA.isTotpField);return{sections:j?[{name:"add more",title:"",fields:[j]}]:[],fields:A.fields?.filter(xYj),passkey:A.passkey}};var PD=A=>({ainfo:A.ainfo,title:A.title,URLs:A.URLs??[],url:A.url,passkey:A.passkey,ps:A.ps,pbe:A.pbe,pgrng:A.pgrng});var r2A=async A=>{let j=new ej({name:"Mock Vault",type:Gc.UserCreated,desc:"A fake vault for creating mock items"}),e=_.findAccountHandlerByUuid(A);if(!e)throw new Error("Unable to get account handler for account "+A);let t=await Promise.all([new dA(j),new dA(j),new dA(j)].map(async(r,a)=>{r.details.fields=[{value:"fakeusername",id:"email",name:"email",type:"E",designation:"username"},{value:fe(),id:"password",name:"password",type:"P",designation:"password"}],r.overview.title=`Managed ${a} ${A}`,r.overview.ainfo="fakeusername",r.overview.URLs=[{u:"https://autofill.me",l:"website"},{u:"https://autofill.me/form/login-simple",l:"website"}],r.url="https://autofill.me/form/login-simple";let n=await fYj(e),o=await n.ekeyPair.pubKey.exportKey(),i={uuid:n.ekeyPair.uuid,pubKey:o};return{...await GYj(r,[i],fe()),accountUuid:A}}));return{vault:j,credentials:t}},fYj=async A=>{if(!A.serveraccount.id)throw new Error("No server account id");let j=await _A.getDatabase().getKeysetsForAccount(A.serveraccount.id),e=j[Math.floor(Math.random()*j.length)].uuid;if(!A.client?.CTX)throw new Error("No client");let t=u6(A.client.CTX,e);if(!t)throw new Error("Unable to find keyset "+e);return t};function a2A(){return[{accountUuid:q.generateUUID(),createdAt:"",sendNotifications:!0,state:"S",type:"M",updatedAt:"",urls:["https://autofill.me"],usernames:["wendy@appleseed.com"],uuid:q.generateUUID(),version:1}]}var GYj=async(A,j,e)=>{let t=new Ya.ManagedCredentialKey;await t.generate();let r=PD(A.overview),a=cM(A.details),n=await Promise.all(j.map(async i=>{let s=await new fA.RSAPublicKey("").import(i.pubKey),l=await t.wrapWithKey(s);return{uuid:fe(),accessorUuid:i.uuid,accessorType:"G",encryptedBy:s.uuid,encItemKey:l,acl:["M"]}})),o={uuid:fe(),templateUuid:yj.LoginUuid,overview:r,details:a,source:{itemUuid:A.uuid,vaultUuid:A.vault.uuid,itemVersion:A.itemVersion},policyUuid:fe(),creatorUuid:e||"",changerUuid:e||"",encryptedBy:t.uuid,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:1,accessors:n};return t.encrypt(o)};var dM=(A,j)=>A.map(e=>({...e,accountUuid:j}));var kM=[{name:"Remove Privacy.com API Key",func:n2A},{name:"View Brex Informatation",func:o2A},{name:"Clear DSecrets for 2FA",func:i2A},{name:"Insert Managed Credential in Database",func:s2A},{name:"Insert managed credential policies",func:l2A},{name:"Uplift managed credentials",func:c2A}];async function n2A(){let A=[],j=new Map;for(let e of _.getAccountHandlers){let t=await e.getSystemVault();!e.isLocked&&t&&j.set(t.uuid,e.serveraccount.uuid)}for(let e of await yrA()){let t=j.get(e.vault.uuid);e.state=dA.ItemState.Archived;let r=new Promise(a=>void $a(e,!1,t,a));A.push(r)}await Promise.all(A)}async function FYj(A){let j=_.findAccountHandlerByUuid(A);if(!j)throw new Error("Unable to find account handler for accountUuid in getBrexTokens");try{if(!j.isLocked&&j._vaults)return(await j.loadSystemVaultItems()).filter(t=>t.templateUuid==="800"&&t.overview.integration==="brex"&&t.state===fA.VaultItem.ItemState.Active)}catch(e){We(e)?lj(e):lj(new q.LoggableError({errorClass:E`BrexError`,message:E`Failed to get Brex tokens`,stackOverrideError:e instanceof Error?e:void 0}))}return[]}async function o2A(){}async function bYj(A){if(!A){console.warn("This function requires a 1Password account UUID");return}let j=_.findAccountHandlerByUuid(A);if(!j){console.error(`Unable to find 1Password account with UUID - ${A}`);return}let e=await j._getRawIntegrationCredentialItems("brex");for(let t of e)try{t.state=fA.VaultItem.ItemState.Deleted,await j.saveItem(t)}catch{console.error(`Unable to remove system vault item - ${t.uuid}`)}e.length===0?console.info("No credentials are stored"):console.info("Credentials have been cleared")}function i2A(){_.getAccountHandlers.forEach(async A=>{await _.updateAccount(A.serveraccount.uuid,{dSecret:void 0}).catch(()=>console.error(`Unable to clear dSecret for account ${A.serveraccount.uuid}`))})}var yYj=(A,j={})=>{let e=[];return chrome.tabs.query(j,t=>t.forEach(r=>{if(!r.id){console.warn("Unable to send notification to tab:",r);return}ta(r.id,{type:A}).then(()=>e.push(r))})),e};async function s2A(){let A=_A.getDatabase();for(let j of _.getAccountHandlers){let e=await r2A(j.uuid);e?.credentials&&await A.replaceManagedCredentialsForAccount(void 0,j.serveraccount,dM(e.credentials,j.uuid))}Ij.loadAndDecryptItemCache()}async function l2A(){let A=_A.getDatabase();for(let j of _.getAccountHandlers){let e=a2A(),t=await pM(j,e);await A.replaceManagedCredentialsPolicies(q.generateUUID(),j.serveraccount,t)}}async function c2A(){for(let A of _.getAccountHandlers)await uM(A)}var Ym=(u=>(u[u.unknownError=0]="unknownError",u[u.noAgentFound=1]="noAgentFound",u[u.notRegistered=2]="notRegistered",u[u.registeredDeviceMismatch=3]="registeredDeviceMismatch",u[u.reauthenticationFailed=4]="reauthenticationFailed",u[u.authenticationExpired=5]="authenticationExpired",u[u.authenticationRejected=6]="authenticationRejected",u[u.authenticationUnavailable=7]="authenticationUnavailable",u[u.logicError=8]="logicError",u[u.decryptionFailure=9]="decryptionFailure",u[u.rngFailure=10]="rngFailure",u[u.invalidResponse=11]="invalidResponse",u[u.decodingFailure=12]="decodingFailure",u))(Ym||{});(r=>(r.code=a=>Z(r[a]),r.loggableError=(a,n)=>new Pe({...n??{},errorClass:E`KolideClient: ${(0,r.code)(a)}`,message:(0,r.loggable)(a)}),r.loggable=a=>{switch(a){case 0:return E`Exception encountered during request`;case 1:return E`No local agent responded to our request`;case 4:return E`The local agent failed to refresh our credentials`;case 5:return E`The local agent signaled we need to refresh our credentials`;case 6:return E`The local agent rejected our request due to a trust issue`;case 7:return E`Our authentication is expired but we are offline and unable to refresh it`;case 8:return E`Internal logic error`;case 9:return E`Decryption failure`;case 12:return E`Decoding failure`;case 10:return E`Random number generation failure`;case 11:return E`Invalid agent response`;case 3:return E`The local agent is registered but not to the requested user's tenant`;case 2:return E`The local agent is not registered with the Kolide server`;default:ue(a)}},r.highestPriority=(a,n)=>a&&a>n?a:n))(Ym||={});var CD={};Yt(CD,{AuthenticatedEndPoint:()=>j6A,EndPoint:()=>A6A,RequestMethod:()=>$Yj});var A6A=(j=>(j.DeviceHealth="/zta",j))(A6A||{}),$Yj={"/zta":"GET"},j6A=(j=>(j.DeviceHealth="/v3/dt4a",j))(j6A||{});var yv=W(Dn());var me=W(aA()),Qm=A=>Z(V0.reportFailure(A).join(", ")),HD=me.readonly(me.type({url:me.string,required_params:me.union([me.array(me.string),me.undefined]),http_verb:me.string,authorization:me.string}),"Action"),d2A=me.readonly(me.union([me.literal("will_block"),me.literal("blocked"),me.literal("notify"),me.literal("good")]),"StatusTypes"),wYj=me.readonly(me.type({blocked_at:me.union([me.string,me.null]),hardware_image_url:me.string,id:me.number,name:me.string,registered:me.boolean,registration_blocked:me.boolean,registered_owner_email:me.union([me.string,me.null]),status:d2A}),"Device"),IYj=me.type({end_user_url:me.string,icon_url:me.string,snoozable:me.boolean,status:d2A,title:me.string,id:me.number,blocks_device_at:me.union([me.string,me.null])},"CheckStatus"),DYj=me.type({about_kolide_url:me.union([me.string,me.null]),recheck_all_issues_url:me.union([me.string,me.null]),register_device_url:me.union([me.string,me.null]),view_details_url:me.union([me.string,me.null])},"KolideUrlContent"),OYj=me.partial({clear_snoozes:HD},"DebugActionsAPI"),PYj=me.type({hint:HD,snooze:me.union([HD,me.undefined]),recheck:HD,register:HD},"ActionsAPI"),CYj=me.type({actions:PYj,device:wYj,failing_checks:me.array(IYj),generated_at:me.string,urls:DYj},"ProdDeviceHealth"),TD=me.intersection([CYj,me.partial({debug_actions:OYj})],"AllDeviceHealth");var Zm={};Yt(Zm,{CheckedDevice:()=>gM,EndPoint:()=>mM,ErrorResponse:()=>e6A,ForceSuccess:()=>EM,GetRecheckUrlResponse:()=>BM,Hinted:()=>hM});var dr=W(aA());var mM=(n=>(n.HintDevice="POST/dt4a/hints",n.StartRecheck="POST/dt4a/rechecks",n.PollRecheck="GET/dt4a/rechecks/:id",n.ForceSuccess="POST/dt4a/snoozes",n.Unsafe_ClearForcedSuccess="DELETE/dt4a/snoozes",n.RegisterDevice="POST/dt4a/registrations",n))(mM||{}),EM=dr.readonly(dr.type({success:dr.literal(!0),dt4a:TD})),BM=dr.readonly(dr.type({success:dr.boolean,recheck_id:dr.string,recheck_url:dr.string})),gM=dr.readonly(dr.type({id:dr.string,status:dr.union([dr.literal("pending"),dr.literal("completed"),dr.literal("errored")]),resolved:dr.boolean,check_ids:dr.array(dr.number),device_id:dr.number,created_at:dr.string,completed_at:dr.union([dr.string,dr.null]),dt4a:TD})),hM=dr.readonly(dr.type({success:dr.boolean})),e6A=dr.readonly(dr.type({error:dr.string,user_error:dr.union([dr.string,dr.undefined])}));var tb=A=>{if(!A)return console.warn("KolideClient: no health data to decode"),{success:!1,code:"no-decode-required",reason:E`no health data to decode`};let j=TD.decode(A);return(0,yv.isRight)(j)?{success:!0,value:j.right}:(console.error("KolideClient: could not decode device health data, reason:",Qm(j.left).str),{success:!1,code:"decode-failed",reason:Qm(j.left)})};function TYj(A){return EM.is(A)}function KYj(A){return BM.is(A)}function SYj(A){return hM.is(A)}function MYj(A){return gM.is(A)}var k2A=(A,j)=>{if(!A)return console.warn(`KolideClient: no data to decode for endpoint: ${j}`),{success:!1,code:"no-decode-required",reason:E`no health data to decode for endpoint: ${Z(j)}`};switch(j){case"POST/dt4a/snoozes":{let e=EM.decode(A);if((0,yv.isRight)(e)){let t=e.right;return TYj(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:E`response did not match expected structure for ${Z(j)}`})}return{success:!1,code:"decode-failed",reason:E`could not decode ${Z(j)}: ${Qm(e.left)}`}}case"POST/dt4a/rechecks":{let e=BM.decode(A);if((0,yv.isRight)(e)){let t=e.right;return KYj(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:E`response did not match expected structure for ${Z(j)}`})}return{success:!1,code:"decode-failed",reason:E`could not decode ${Z(j)}: ${Qm(e.left)}`}}case"POST/dt4a/hints":{let e=hM.decode(A);if((0,yv.isRight)(e)){let t=e.right;return SYj(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:E`response did not match expected structure for ${Z(j)}`})}return{success:!1,code:"decode-failed",reason:E`could not decode ${Z(j)}: ${Qm(e.left)}`}}case"GET/dt4a/rechecks/:id":{let e=gM.decode(A);if((0,yv.isRight)(e)){let t=e.right;return MYj(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:E`response did not match expected structure for ${Z(j)}`})}return{success:!1,code:"decode-failed",reason:E`could not decode ${Z(j)}: ${Qm(e.left)}`}}default:return console.warn(`KolideClient: unsupported endpoint: ${j}`),{success:!1,code:"decode-failed",reason:E`unsupported endpoint: ${Z(j)}`}}},u2A=A=>{if(A&&typeof A=="object"&&!("error"in A))return{success:!1,code:"no-decode-required",reason:E`no error to decode`};let j=e6A.decode(A);return(0,yv.isRight)(j)?{success:!0,value:j.right}:(console.error(`Could not decode error response: ${Qm(j.left).str}`),{success:!1,code:"decode-failed",reason:E`could not decode error: ${Qm(j.left)}`})};var p2A={actions:{hint:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--1542400eec20daed87605662b04d648429abde80bbd7a42457ebfa8f277e7750",http_verb:"POST",required_params:["domain"],url:"https://api.kolide.com/dt4a/hints"},recheck:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--1542400eec20daed87605662b04d648429abde80bbd7a42457ebfa8f277e7750",http_verb:"POST",required_params:["check_id"],url:"https://api.kolide.com/dt4a/rechecks"},snooze:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNloiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--066ac947dbd93e3d92bdc6b43708c0cba59cc9d3bddb79a6c7ba03f74b9110c9",http_verb:"POST",required_params:["check_id"],url:"https://api.kolide.com/dt4a/snoozes"},register:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNloiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--066ac947dbd93e3d92bdc6b43708c0cba59cc9d3bddb79a6c7ba03f74b9110c9",http_verb:"POST",required_params:["token"],url:"https://api.kolide.com/dt4a/registrations"}},device:{blocked_at:"2025-02-12T23:09:02.097Z",hardware_image_url:"https://assets1.kolide.com/assets/inventory/devices/apple-0e77c6e9.png",id:610489,name:"Test-User-Virtual-Machine",registered_owner_email:"test_user@agilebits.com",status:"blocked",registered:!0,registration_blocked:!1},failing_checks:[{end_user_url:"https://k2.kolide.com/1/my/devices/610489/checks/10?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjM4NVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--65f4f534d2e5a9a2f4517ccf043478e8e792e0e9469ecd219037d5d77b572d6c",icon_url:"https://k2.kolide.com/rails/active_storage/representations/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzIxODA0LCJwdXIiOiJibG9iX2lkIn19--64cc0ceafa833e6ee7b57740f90726f4f6191412/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOlszMDAsMzAwXX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--eeb05c9033f94fc36504417ffae11afb92488a6a/macos-sharing.png",snoozable:!0,status:"blocked",title:"File Sharing Is Not Disabled",id:1,blocks_device_at:"2025-02-12T23:09:02.097Z"},{end_user_url:"https://k2.kolide.com/1/my/devices/610489/checks/75237?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQwMFoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--fb15f5c233cf2d4d1766c2775835e569bb6223c4ed8ed8e1ed9e8c3b6247712b",icon_url:"https://k2.kolide.com/rails/active_storage/representations/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzIxODAwLCJwdXIiOiJibG9iX2lkIn19--ca964d91c427d60af67431a9dcfbf9a9e238a886/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOlszMDAsMzAwXX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--eeb05c9033f94fc36504417ffae11afb92488a6a/macos-screenlock.png",snoozable:!0,status:"blocked",title:"Screen Lock Is Not Configured Securely",id:2,blocks_device_at:"2025-02-12T23:09:02.097Z"},{end_user_url:"https://k2.kolide.com/1/my/devices/610489/checks/75659?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--8c542f3f24ea2211681ebccd52d4f2b74b5ea71fe6def0c8a622dcfe01c7c09c",icon_url:"https://k2.kolide.com/rails/active_storage/representations/proxy/eyJfcmFpbHMiOnsiZGF0YSI6ODMzNDgxLCJwdXIiOiJibG9iX2lkIn19--0c3580b333aa73c1ca2fbb736b9b0122d6c34f64/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOlszMDAsMzAwXX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--eeb05c9033f94fc36504417ffae11afb92488a6a/google_chrome.png",snoozable:!1,status:"will_block",title:"Chrome Browser Is Not Up-to-date",id:3,blocks_device_at:"2025-02-14T23:09:02.097Z"}],generated_at:"2025-02-19T21:07:59.416Z",urls:{about_kolide_url:"https://www.kolide.com/docs/users",recheck_all_issues_url:"https://app.kolide.com/1/my/devices?refresh=true&speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--8c542f3f24ea2211681ebccd52d4f2b74b5ea71fe6def0c8a622dcfe01c7c09c",register_device_url:"https://auth.kolide.com/device/registrations/menu_bar/ingress?message=eyJfcmFpbHMiOnsiZGF0YSI6eyJkZXZpY2VfaWQiOjYxMDQ4OSwib3JnYW5pemF0aW9uX2lkIjoxfSwicHVyIjoiZGV2aWNlX3JlZ2lzdHJhdGlvbiJ9fQ%3D%3D--0359eb7d407c1999818056245b0da23177aa2db3&organization_id=1",view_details_url:"https://app.kolide.com/1/my/devices?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--8c542f3f24ea2211681ebccd52d4f2b74b5ea71fe6def0c8a622dcfe01c7c09c"}},C8t={"/zta":p2A},m2A={"/v3/dt4a":p2A};var _Yj=60*60*1e3,LYj=Rn.fromThrowable(async(...A)=>fetch(...A),()=>1),NYj=Rn.fromThrowable(async A=>A.json(),()=>(console.error("KolideClient: Invalid Json response, assuming some other process has the port"),1)),zYj=sd.fromThrowable((...A)=>tA.lessSafeOpenNaCl(...A),()=>(console.error("KolideClient: Agent response failed to decrypt"),9)),RYj=Rn.fromThrowable(async A=>new fA.SigningKeyPair(A).generate(A),()=>10),JYj=Rn.fromThrowable(async()=>Promise.resolve(tA.generateX25519Key()),()=>(console.error("KolideClient: Agent response failed to decrypt"),10)),UYj=sd.fromThrowable((...A)=>tA.p256Sign(...A),()=>(console.error("KolideClient: Failed to sign P256"),8)),XYj=Rn.fromThrowable(async(A,j)=>(await A.waitForClient().catch(()=>{}),A.signDeviceTrustPublicKey(j)),()=>(console.error("KolideClient: B5 sign request failed"),7));function E2A(A){let j=JSON.stringify(A),e=new TextEncoder().encode(j);return B2A(e)}function B2A(A){let j=q.bytesToBase64url(A);switch(j.length%4){case 1:return j+"===";case 2:return j+"==";case 3:return j+"=";default:return j}}function VYj(A){let j=A;return typeof j=="object"&&typeof j?.data=="string"&&typeof j?.pubKey=="string"}function WYj(A,j){let e=[...A.entries()].map(([r,a])=>({index:r,port:a}));return[...e.splice(j),...e]}var qM=class{constructor(j){this._accountsCache=[];this.stub=j?.stub??!1}get accountClients(){let j=this._accountsCache.filter(([t])=>_.findAccountHandlerByUuid(t.accountUUID,t.userUUID)),e=_.getAccountHandlers.filter(({accountIdentifier:t})=>j.every(([r])=>r.accountUUID!==t.accountUUID||r.userUUID!==t.userUUID)).map(({accountIdentifier:t})=>[t,new t6A(t)]);return this._accountsCache=[...j,...e],this._accountsCache.map(([t,r])=>r)}async _request(j){let e=await Promise.all(this.accountClients.map(async o=>o.request({endpoint:j}))),t,r,a,n=[];for(let o of e)o.isOk()?n.push(o.value):o.error.error===Ym.highestPriority(t,o.error.error)&&(t=o.error.error,r=o.error?.accountUuid,a=o.error.reason);return n.length!==0?Oj(n[0]):!t||!a?TA({error:8,reason:E`reached impossible state`}):TA({error:t,accountUuid:r,reason:a})}async request(j){let{endpoint:e}=j,t=z6(),r=t.isEnabled()&&t.forceKolideDeviceTrustFailEnabled();return this.stub||r?(console.warn(`KolideClient: returning stubbed response from debug override - ${e}`),r5({response:m2A[e],accountUuid:"123456"})):this._request(e).catch(()=>(console.error(`KolideClient: failed to request ${e}`),TA({error:0,reason:E`unhandled exception occurred`})))}},t6A=class{constructor(j){this.accountIdentifier=j;this.host="http://127.0.0.1";this.ports=[12519,40978,52115,22287,60685,22322];this.lastUsed=0}async request(j){let e=await this._makeRequest(j);return e.isErr()&&this._shouldRetryWithFreshCredentials(e.error)&&(console.info("KolideClient: Auth expired, clearing cache and retrying..."),await this._clearCachedCredentials(),e=await this._makeRequest(j),e.isErr()&&this._shouldRetryWithFreshCredentials(e.error))?TA({error:4,accountUuid:e.error.accountUuid,reason:E`Failed to re-authenticate after credential expiry`}):e}async _makeRequest(j){let e=await Rn.combine([this.generateCommunicationKeyPair(),this.maybeCachedCredentials()]);if(e.isErr())return TA({error:e.error,reason:E`authenticated client failed to get credentials`});let[t,r]=e.value,a=this.buildAuthenticatedPayload({...r,comsKey:t});if(a.isErr())return TA({error:a.error,accountUuid:r.accountUUID,reason:E`authenticated client failed to build authenticated payload`});let n=a.value,o=[];for(let{index:d,port:k}of WYj(this.ports,this.lastUsed)){let u=await this.fetchFromPort({endpoint:j.endpoint,port:k,comsKey:t,trustPayload:n});if(u.isOk()){let m=tb(u.value);if(m.success)return this.lastUsed=d,Oj({response:m.value,accountUuid:r.accountUUID});o.push({error:12,reason:m.reason,accountUuid:r.accountUUID})}else o.push({error:u.error,accountUuid:r.accountUUID,reason:E`authenticated client failed to fetchFromPort`})}let i,s,l;for(let d of o)d.error===Ym.highestPriority(i,d.error)&&(i=d.error,s=d?.accountUuid,l=d.reason);return TA({error:i,accountUuid:s,reason:l})}_shouldRetryWithFreshCredentials(j){return j.error===5||j.error===6}async _clearCachedCredentials(){try{await _A.getDatabase().clearKolideCredentialsForAccount(this.accountIdentifier)}catch(j){console.error("KolideClient: Failed to clear kolide agent credentials",j)}}generateSigningKeyPair(){return RYj(crypto.randomUUID()).andThen(j=>!j.pubKey||!j.priKey?TA(8):Rn.fromPromise(Promise.all([j.pubKey.exportKey(),j.priKey.exportKey()]),()=>8)).map(([j,e])=>({pubKey:j,priKey:e}))}generateCommunicationKeyPair(){let j=sd.fromThrowable(JSON.parse,()=>8);return JYj().andThen(e=>j(e.pub_jwk()).map(t=>({pubKey:t,priKey:e.less_safe_pri_key_bytes()})))}signPayload(j,e){let t=E2A(j),r=new TextEncoder().encode(t),a=JSON.stringify(e);return UYj(r,a).map(n=>({signature:B2A(n),payload:t,signedBy:e.kid}))}get accountHandler(){return _.findAccountHandlerByUuid(this.accountIdentifier.accountUUID,this.accountIdentifier.userUUID)}setupFreshCredentials(){let j=this.accountHandler;return j?Rn.combine([this.generateSigningKeyPair(),this.generateSigningKeyPair()]).andThen(([e,t])=>XYj(j,e.pubKey).andThen(r=>this.signPayload({publicKey:t.pubKey},e.priKey).map(a=>{let n=Date.now()+_Yj,{accountUUID:o,userUUID:i}=this.accountIdentifier;return{accountUUID:o,userUUID:i,localKey:t.priKey,trustChain:[r,a],freshUntil:n}}))):BF(7)}maybeCachedCredentials(){return Rn.fromPromise(_A.getDatabase().getKolideCredentialsForAccount(this.accountIdentifier),()=>7).andThen(j=>{if(j){if(!this.accountHandler?.hasSignedInClient)return r5(j);if(j.freshUntil>Date.now())return r5(j)}return this.setupFreshCredentials().andTee(e=>Rn.fromPromise(_A.getDatabase().saveKolideCredentials({note:"localKey here exclusively allows retrieving device health information from the Kolide agent installed on **this** machine. While this storage isn't as isolated as methods we use, it's sufficiently isolated to fulfill it's purpose of fingerprinting prevention and it allows checking device health while locked. If this seems interesting to you, come work with us ;)",...e}),()=>(console.error("Failed to save kolide credentials"),8))).orElse(e=>j?(console.warn("Credential refresh failed, using existing cached credentials"),Oj(j)):TA(e))})}buildAuthenticatedPayload({localKey:j,trustChain:e,comsKey:t}){return this.signPayload({publicKey:t.pubKey},j).map(r=>E2A([...e,r]))}async fetchFromPort({endpoint:j,port:e,comsKey:t,trustPayload:r}){let a=new URL(this.host);a.port=e.toString(),a.pathname=j,a.search=`?payload=${r}`;let n={"Content-type":"application/json; charset=UTF-8"};return LYj(a.toString(),{headers:n}).andThen(o=>{switch(o.status){case 200:case 201:return NYj(o).map(i=>[!0,i]);case 204:return Oj([!1,void 0]);case 401:return TA(5);case 403:return TA(6);default:return console.warn(`KolideClient: Unexpected response code ${o.status}, assuming some other process has the port.`),TA(1)}}).andThen(([o,i])=>o?VYj(i)?this.openNaClBox(j,t.priKey,i).andThen(s=>s?(o||console.error("KolideClient: Kolide agent replied with a 204 **and** returned data."),Oj(s)):TA(2)):(console.error("KolideClient: Unexpected response from Kolide agent, missing json content"),TA(8)):TA(3))}openNaClBox(j,e,t){let r=sd.fromThrowable(JSON.parse,()=>(console.error("KolideClient: Agent response was not valid json"),11));return zYj(q.base64urlToBytes(t.data),q.base64urlToBytes(t.pubKey),e).andThen(a=>{if(a.length===0)return Oj(void 0);let n=new TextDecoder().decode(a);return r(n)})}};var QYj=3e3,KD=class{constructor(j,e,t=QYj,r=!1,a=0){this.onSuccess=void 0;this.onError=void 0;this.pollWrapper=async()=>{let j,e;try{j=await this.fn()}catch(t){console.error(`Poller: Error in '${this.name.str}' function:`,"<redacted>"),e=t}if(e&&this.onError)try{this.onError(e)}catch{console.error(`Poller: encountered error in onError handler for '${this.name.str}':`,"<redacted>")}if(j&&this.onSuccess)try{this.onSuccess(j)}catch{console.error(`Poller: encountered error in onSuccess handler for '${this.name.str}':`,"<redacted>")}if(!this.running){`${this.name.str}`;return}this.running={active:!0,id:globalThis.setTimeout(this.pollWrapper,this.interval)}};if(this.name=j,this.fn=e,this.interval=t,He.registerSuspensionListener(()=>this.cleanup()),!r){if(a===0){console.info(`Poller: starting '${this.name.str}' with interval ${this.interval}ms`),this._start();return}this.autoStartId=globalThis.setTimeout(()=>{console.info(`Poller: starting '${this.name.str}' with interval ${this.interval}ms`),this._start()},a)}}get isRunning(){return!!this.running}start(){if(this.autoStartId&&(console.info(`Poller: 'start' manually called for '${this.name.str}' before delay elapsed - starting early`),globalThis.clearTimeout(this.autoStartId),this.autoStartId=void 0),this.running){console.warn(`Poller: is already running for '${this.name.str}' - skipping 'start'`);return}console.info(`Poller: starting '${this.name.str}' with interval ${this.interval}ms`),this._start()}stop(){if(!this.running){console.warn(`Poller: is not running for '${this.name.str}' - ignoring 'stop'`);return}console.info(`Poller: stopping '${this.name.str}'`),this._stop()}changeInterval({interval:j,delay:e}){if(typeof e=="number"){`${this.name.str}${e}`,globalThis.setTimeout(()=>this.changeInterval({interval:j}),e);return}console.info(`Poller: changing interval for '${this.name.str}' from ${this.interval}ms to ${j}ms`),this.running&&this.stop(),this.interval=j,this._start()}addSuccessHandler(j){this.onSuccess=j}addErrorHandler(j){this.onError=j}_start(){if(this.running){console.error(`Poller: is already running for '${this.name.str}' - aborting 'stop'`);return}this.running={active:!0,id:globalThis.setTimeout(this.pollWrapper,this.interval)}}_stop(){if(!this.running){console.error(`Poller: not running for '${this.name.str}' - aborting 'stop'`);return}globalThis.clearTimeout(this.running.id),this.running=void 0}cleanup(){this.autoStartId&&clearTimeout(this.autoStartId),this.running&&clearTimeout(this.running.id)}};var r6A=(A,j)=>{let e=A;for(let[t,r]of Object.entries(j||{})){let a=A.indexOf(`:${t}`);if(a>0){let n=e.split("");n.splice(a,t.length+1,...r.split("")),e=n.join("")}}if(e.includes(":"))throw new Pe({errorClass:E`missing-query-params`,message:E`construct path from endpoint failed`});return e.toString()},g2A=(A,j)=>{if(A.startsWith("POST")){let e=A.substring(4);return{method:"POST",path:r6A(e,j)}}if(A.startsWith("GET")){let e=A.substring(3);return{method:"GET",path:r6A(e,j)}}if(A.startsWith("DELETE")){let e=A.substring(6);return{method:"DELETE",path:r6A(e,j)}}throw new Pe({errorClass:E`unsupported-method-type`,message:E`could not parse endpoint - encountered unsupported format`})};var vM=class{constructor(){this.host="https://api.kolide.com"}async request(j){let{endpoint:e,body:t,headers:r,pathParams:a}=j,{method:n,path:o}=g2A(e,a),i=this.host+o,s;try{s=t?JSON.stringify(t):void 0}catch{return{type:"failure",message:E`failed to request ${Z(e)}: could not serialize request body`,code:Z("serialize-request-fail")}}let l={"Content-type":"application/json; charset=UTF-8"};r.authorization&&(l.Authorization=r.authorization);let d;try{d=await fetch(i,{method:n,body:s,headers:l})}catch{return{type:"failure",message:E`request failed for ${Z(e)}`,code:Z("unknown-fetch-server-fail")}}if(d.status!==200&&d.status!==201&&d.status!==422)return{type:"failure",message:E`server failed request ${Z(e)}: ${Z(`${d.status}`)} - ${Z(`${d.statusText}`)}`,code:Z("unexpected-status-code")};let k;try{k=await d.json()}catch{return{type:"failure",message:E`could not deserialize response for ${Z(e)}`,code:Z("deserialize-response-fail")}}let u=u2A(k);if(u.success)return{type:"failure",message:E`server responded with error for ${Z(e)}: ${Z(u.value.error)}`,userFacingError:u?.value?.user_error,code:Z("server-reported-error")};if(u.code==="decode-failed")return{type:"failure",message:E`could not decode error response from server request to ${Z(e)}`,code:Z("decode-error-fail")};let m=k2A(k,e);return m.success?{type:"success",data:m.value}:{type:"failure",message:E`could not decode response data from server request to ${Z(e)}`,code:Z("decode-response-fail")}}};var n6A=W(iM());var AQj=["authenticationUnavailable"],qc=(A,j)=>({type:"failure",message:A,code:Z(j)}),AE=(A,j)=>{let e={...A};return e.message=Z(`${j.str}: ${e.message.str}`),e},D6=(A,j)=>{let e=new Pe({errorClass:E`DeviceTrust`,message:E`${A}: ${Z(j)}`});if(eQj(j))console.warn(e);else try{lj(e)}catch{console.error(`DeviceTrust: could not report ${A.str}`)}return qc(A,j)},wl=(A,j)=>{let e=AE(A,j);return D6(e.message,e.code.str),e},Ms=(A,j)=>{let e=jQj(A,j);return qc(e.message,e.code.str)},jQj=(A,j)=>{let e=qc(j,"unknown-reason");return A instanceof Pe&&A.loggableName instanceof oj&&A.loggableMessage instanceof oj&&(e.message=E`${j}: ${A.loggableMessage}`,e.code=E`${A.loggableName}`),e},eQj=A=>AQj.includes(A);var o6A="dt-time-warning-ignored",xM=A=>new RegExp(A,"i"),h2A=(A,j)=>!(0,n6A.default)(A,j),q2A=(A,j)=>!(0,n6A.default)(A,j),v2A=A=>{let j=JSON.stringify(A);try{vj.setItem(o6A,j)}catch{console.warn("Could not persist time warning notifications were ignored.")}},x2A=()=>{try{let A=vj.getItem(o6A);return A?JSON.parse(A):void 0}catch{console.warn("Could not retrieve time warning notifications were ignored.");return}},f2A=()=>{try{vj.removeItem(o6A)}catch{console.warn("Could not remove time warning notifications were ignored.");return}},G2A=async()=>{if((navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1)return"opera";if(navigator.userAgent.indexOf("Vivaldi")!==-1)return"vivaldi";if(navigator.userAgent.indexOf("Edg")!==-1)return"edge";if(globalThis.navigator.brave&&await globalThis.navigator.brave.isBrave().catch())return"brave";if(navigator.userAgent.indexOf("Chrome")!==-1)return"chrome";if(navigator.userAgent.indexOf("Safari")!==-1)return"safari";if(navigator.userAgent.indexOf("Firefox")!==-1)return"firefox"},i6A=A=>A.type==="success"?!1:A.code.str==="registeredDeviceMismatch",s6A=A=>A.type==="success"?!1:A.code.str==="no-available-port"||A.code.str==="noAgentFound",l6A=A=>A.type==="success"&&!A.data.device.registered;var F2A=A=>A.type==="success"&&A.data.device.registered?{state:"connected",health:A.data}:s6A(A)?{state:"kolide_not_enrolled"}:c6A(A)?{state:"kolide_not_authenticated"}:A.type==="success"&&l6A(A)?{state:"kolide_not_registered",health:A.data}:i6A(A)?{state:"kolide_tenant_mismatch"}:{state:"unknown"},c6A=A=>A.type==="success"?!1:A.code.str==="authenticationUnavailable",b2A=A=>!(!A||typeof A!="object"||!("checkIds"in A)||!(A.checkIds instanceof Array)||A.checkIds.length===0),y2A=(A,j)=>{if(A==="kolide_not_enrolled"||A==="kolide_not_authenticated")return{status:A,appName:j.app.name,accountName:j.account.name,accountUuid:j.account.uuid};if(A==="kolide_tenant_mismatch"){console.warn("DeviceTrust: local kolide agent is associated to a different tenant");return}if(A==="kolide_not_registered"){console.warn("DeviceTrust: kolide not registered - unable to register without health data");return}if(A!=="connected"){if(A==="starting"){console.error("DeviceTrust: extension client starting up - cannot determine restriction"),D6(E`kolideClientRestriction failed`,"client-not-ready");return}Ws(A,E`clientState`,E`DeviceTrust`)}},rQj=A=>A.anyAccountHasFlag("b5x-kolide-device-trust-for-all"),aQj=A=>A.filter(e=>e.hasSignedInClient?e.hasBackOfficeFeature?e.hasBackOfficeFeature.b2bXamDeviceTrustEpmIntegration:!1:e.serveraccount.tier?.features?e.serveraccount.tier?.features.find(t=>t==="b2bXamDeviceTrustEpmIntegration"):!1),nQj=async(A,j)=>(await A.getDatabase().getAllDeviceTrustConfigs()).filter(t=>j.find(r=>r.accountIdentifier.accountUUID===t.account.uuid)).some(t=>t.enabled),Fg=async(A,j,e)=>{let t={problems:[],isBlocked:()=>t.problems.length>0,isAllowed:()=>t.problems.length===0,loggableError:()=>Z(`[ ${t.problems.map(r=>r.msg.str).join(", ")} ]`)};try{return t.problems=await oQj(A,j,e),t}catch{return console.error("Could not validate device trust access:","<redacted>"),t.problems=[{type:"error",msg:E`runtime exception encountered`}],t}},oQj=async(A,j,e)=>{let t=[];rQj(j)||t.push({type:"client",msg:E`client disabled`});let r=aQj(A);return r.length===0&&t.push({type:"account",msg:E`missing backoffice permission`}),await nQj(e,r)||t.push({type:"user",msg:E`missing admin permission`}),t},$2A=A=>A?A.failingChecks.length===0&&A.device.status!=="good"?{isValid:!1,error:"conflicting-detection-state"}:{isValid:!0}:{isValid:!1,error:"missing-health-data"},d6A=(A,j)=>A.isValid?!1:A.error===j;var iQj=A=>{if(A)return SD(A)},SD=A=>({url:A.url,requiredParams:A.required_params,httpVerb:A.http_verb,authorization:A.authorization}),sQj=A=>{if(A)return SD(A)},lQj=A=>({blockedAt:A.blocked_at,hardwareImageUrl:A.hardware_image_url,id:A.id,name:A.name,registeredOwnerEmail:A.registered_owner_email,status:A.status,registered:A.registered,registrationBlocked:A.registration_blocked}),cQj=A=>({aboutKolideUrl:A.about_kolide_url,recheckAllIssuesUrl:A.recheck_all_issues_url,registerDeviceUrl:A.register_device_url,viewDetailsUrl:A.view_details_url}),dQj=A=>({endUserUrl:A.end_user_url,iconUrl:A.icon_url,canForceSuccess:A.snoozable,status:A.status,title:A.title,id:A.id,blocksDeviceAt:A.blocks_device_at}),kQj=A=>A.sort((j,e)=>j.status.localeCompare(e.status)).map(dQj);var bg=A=>({actions:{hint:SD(A.actions.hint),forceSuccess:sQj(A.actions.snooze),recheck:SD(A.actions.recheck),unsafeClearSnooze:iQj(A.debug_actions?.clear_snoozes),register:SD(A.actions.register)},device:lQj(A.device),failingChecks:kQj(A.failing_checks),generatedAt:A.generated_at,urls:cQj(A.urls)}),w2A=A=>A.type==="failure"?A:{type:"success",data:{...bg(A.data.response),accountUuid:A.data.accountUuid}},I2A=A=>({checkIds:A.check_ids,completedAt:A.completed_at,createdAt:A.created_at,deviceId:A.device_id,id:A.id,resolved:A.resolved,status:A.status,health:bg(A.dt4a)});var uQj=A=>({success:A.success,recheckUrl:A.recheck_url,recheckId:A.recheck_id}),D2A=A=>A.type==="failure"?A:{type:"success",data:uQj(A.data)},O2A=A=>A.isOk()?{type:"success",data:A.value}:{type:"failure",message:E`${Ym.loggable(A.error.error)}: ${A.error.reason}`,code:Ym.code(A.error.error),accountUuid:A.error.accountUuid};var pQj=1e3,mQj=10,fM=class{constructor(){this.remoteClient=new vM}async forceSuccess(j){let e=j?.actions.forceSuccess?.authorization;if(!e)return qc(E`no force success action authentication available`,"force-success-fail");let t=j.failingChecks.filter(n=>n.canForceSuccess).map(n=>n.id);if(t.length===0)return qc(E`all failing checks must be completed`,"force-success-fail");let r=await this.remoteClient.request({endpoint:Zm.EndPoint.ForceSuccess,body:{check_id:t},headers:{authorization:e}});return r.type==="failure"?(AE(r,E`forceSuccess failed`),r):{type:"success",data:bg(r.data.dt4a)}}async hintDevice(j,e){let t=e?.actions.hint.authorization;if(!t)return D6(E`cannot hint a device at ${Z(j)} - missing authorization`,"hint-device-fail");let r;j==="browser_startup"&&(r={type:"browser_startup",browser_name:await G2A()||"unknown"});let a=r||{type:"prompt_displayed"},n=await this.remoteClient.request({endpoint:Zm.EndPoint.HintDevice,body:a,headers:{authorization:t}});if(n.type==="failure"){let o=wl(n,E`hintDevice failed`);return console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`),n}return{type:"success",data:void 0}}async unsafeClearSnoozes(j){D6(E`unsafeClearSnoozes invoked - should only be used internally`,"unsafe-developer-setting")}async registerDevice(j,e){if(!e?.actions.register)return D6(E`cannot register a device with no health data`,"register-device-fail");if(e.device.registered)return{type:"success",data:void 0};let t=_.findAccountHandlerByUuid(j);if(!t)return qc(E`registerDevice failed, account handler not found`,"unknown-reason");await t.waitForClient();let r=await t.getKolideAgentEnrollmentToken().catch(o=>Ms(o,E`getKolideAgentEnrollmentToken failed unexpectedly`));if(r.type!=="success")return AE(r,E`registerDevice failed`);let a={token:encodeURI(r.data.token)},n=await this.remoteClient.request({endpoint:Zm.EndPoint.RegisterDevice,headers:{authorization:e.actions.register.authorization},body:a});return n.type==="failure"&&!n.message.str.includes("204")?AE(n,E`registerDevice failed`):{type:"success",data:void 0}}async recheck(j=[],e){let t=this.newRecheckStarted(),r;try{r=await this._recheck(j,e?.actions.recheck?.authorization)}catch(a){r=Ms(a,E`could not complete recheck`)}if(t(),r.type!=="success"){let a=wl(r,E`recheck failed`);console.error(`DeviceTrust: ${a.message.str}: ${a.code.str}`)}return r}async getRecheckId(j){let e=await this.remoteClient.request({endpoint:Zm.EndPoint.StartRecheck,body:{check_id:j.checkedIds},headers:{authorization:j.authorization}});return e.type==="failure"?e:D2A(e)}async pollRecheck(j){let e,t=0;for(;t<mQj;){let r=await this.remoteClient.request({endpoint:"GET/dt4a/rechecks/:id",pathParams:{id:j.id},headers:{authorization:j.authorization}});if(r.type==="failure")return r;if(e=I2A(r.data),e.status==="errored")return D6(E`kolide failed rechecking`,"server-reported-error");if(e.status==="completed")return{type:"success",data:e};t++,await As(pQj)}return{type:"success",data:e}}async _recheck(j=[],e){if(!e)return qc(E`cannot recheck device - missing authorization`,"missing-health-data");let t=await this.getRecheckId({checkedIds:j,authorization:e});if(t.type==="failure")return t;let r=await this.pollRecheck({id:t.data.recheckId,authorization:e});return r.type==="failure"?r:{type:"success",data:r.data}}get isRechecking(){return this.recheckingLock?!this.recheckingLock.finished:!1}newRecheckStarted(){if(!this.recheckingLock){this.recheckingLock=js(!0);let e=this.recheckingLock.resolve;return()=>this._newRecheckFinished(e)}let j=this.recheckingLock.extend();return()=>this._newRecheckFinished(j)}_newRecheckFinished(j){j(!0),`${this.recheckingLock?.finished}`,this.recheckingLock?.finished&&(this.recheckingLock=void 0)}};async function GM(){if(Oe()){console.info("DeviceTrust: Safari does not support URL redirection on extension uninstall - Skipping Setup");return}for(let A of _.getAccountHandlers){if(!hj.accountHasFlag(A.serveraccount.uuid,"b5x-extension-feedback-loop")||(await Fg([A],hj,_A)).isBlocked())continue;let t=`${A.serveraccount.signinAddress}/extension-uninstall`;browser.runtime.setUninstallURL(t);return}browser.runtime.setUninstallURL("")}var P2A=async()=>{let A=await la();A&&(A.anyAccountUnlocked(),GM())},C2A=async()=>{let A=await la();A&&A.ignoreWarning()},H2A=async()=>{let A=await la();if(!A)return D6(E`handleForcedSuccess failed`,"dt4a-disabled");let j=await A.forceSuccess().catch(e=>Ms(e,E`forceSuccess failed unexpectedly`));if(j.type!=="success"){let e=wl(j,E`handleForceSuccess failed`);console.error(`DeviceTrust: ${e.message.str}: ${e.code.str}`)}return j},T2A=async()=>{let A=await la();if(!A)return qc(E`recheckDeviceHandler failed`,"dt4a-disabled");if(!A.state.health?.data||A.state.health.data.failingChecks.length===0)return D6(E`cannot check device with no failing checks`,"missing-health-data");let{failingChecks:j}=A.state.health.data,e=j.map(r=>r.id),t=await A.recheck(e);if(t.type!=="success"){let r=wl(t,E`recheckDeviceHandler failed`);console.error(`DeviceTrust: ${r.message.str}: ${r.code.str}`)}return t},K2A=async A=>{if(Kt())return D6(E`enrollDeviceHandler failed`,"accounts-locked");let j=await la();if(!j)return qc(E`enrollDeviceHandler failed`,"dt4a-disabled");let e=await j.enrollDevice(A.data.accountUuid);if(e.type==="failure"){let t=wl(e,E`enrollDeviceHandler failed`);return console.error(`DeviceTrust: ${t.message.str}: ${t.code.str}`),t}return e};async function S2A(A){let j=await la();if(!j)return;let e=tb(A.data);if(!e?.success){D6(E`handleKolideFinishedRechecking failed`,"decode-response-fail");return}let t=bg(e.value);j.handleKolideRecheckFinished(t)}var M2A=async A=>{let j=await la();if(!j)return;let e=tb(A.data);if(!e.success){D6(E`handleKolideDeviceSnoozed failed`,"decode-response-fail");return}let t=bg(e.value);j.handleKolideSnooze(t)},_2A=async A=>{let j=await la();if(!j)return;let e=tb(A.data);if(!e.success){D6(E`handleKolideDeviceSignInSuccess failed`,"decode-response-fail");return}let t=bg(e.value);j.handleKolideDeviceSignInSuccess(t)},L2A=async A=>{let j=await la();j&&j.handleKolideUserStartedDownload()},N2A=async A=>{let j=await la();j&&j.handleKolideDeviceRegistered()},z2A=async({data:A})=>{let j=await la();if(!(!j||!b2A(A))){await j.hintDevice("prompt_displayed");for(let e of A.checkIds)j.recheck([e])}},R2A=async()=>{let A=await la();A&&await A.unsafeClearSnoozes()};var EQj=72e6,u6A=A=>A?u4A({startTime:A,duration:EQj}):!0;var FM=class{constructor(){this._client="starting";this.ignoreTimeLoaded=!1}get state(){return this._health?.data.device.registered?{isRegistered:!0,clientState:this._client,health:{...this._health},accounts:this._accounts}:{isRegistered:!1,clientState:this._client,health:void 0,accounts:this._accounts}}get client(){return this._client}get accounts(){return this._accounts}get health(){return this._health}get healthData(){return this._health?.data}get device(){return this._health?.data.device}get failingChecks(){return this._health?.data.failingChecks??[]}get actions(){return this._health?.data.actions}get forceSuccessAuth(){return this._health?.data.actions.forceSuccess?.authorization}get hintAuth(){return this._health?.data.actions.hint?.authorization}get recheckAuth(){return this._health?.data.actions.recheck.authorization}get unsafeClearSnoozeAuth(){return this._health?.data.actions.unsafeClearSnooze?.authorization}isDeviceRegistered(){return!!this._health?.data.device.registered}isDeviceEnrolled(){return this._client==="kolide_not_enrolled"||this._client==="starting"?!1:this._client==="connected"||this._client==="kolide_not_authenticated"||this._client==="kolide_not_registered"||this._client==="kolide_tenant_mismatch"?!0:(Ws(this._client,E`this._client`,E`DeviceTrust`),!1)}handleHealthResponse(j){let e=F2A(j);if(e.state==="unknown"){console.warn("DeviceTrust: could not determine client state - aborting");return}return(e.state==="connected"||e.state==="kolide_not_registered")&&this.updateDeviceHealth(e.health),e.state==="kolide_tenant_mismatch"&&(console.warn("DeviceTrust: agent found but associated to a different account"),this.resetDeviceHealth()),e.state==="kolide_not_enrolled"&&(console.warn("DeviceTrust: no kolide agent found - clearing health cache"),this.resetDeviceHealth()),this.updateClientState(e.state),e}updateDeviceHealth(j){let e={...j,ignoredAt:this._health?.data.ignoredAt};this.updateDeviceState(e),this.ignoreTimeLoaded||(this.loadIgnoreTimeFromStorage(),this.ignoreTimeLoaded=!0)}updateDeviceState(j){let e=this._health?.data;h2A(e,j)&&(this.isDeviceDataStale(j)||(this._health={...this._health,updatedAt:Date.now(),data:j},aF("device-health-changed",j)))}resetDeviceHealth(){this._health=void 0,aF("device-health-changed",void 0)}updateClientState(j){let e=this.hasChangedToConnected(this._client,j);return this._client=j,e&&aF("device-trust-connected",void 0),e}isDeviceDataStale(j){return this._health?new Date(j.generatedAt)<new Date(this._health.data.generatedAt):!1}async loadDeviceTrustAppList(j){j||(j=await _A.getDatabase().getAllDeviceTrustConfigs()),j.forEach(e=>{this.updateDeviceTrustAppList(e.account,e.appList)})}updateDeviceTrustAppList(j,e){if(!this._accounts){this._accounts=[{account:j,deviceTrustUrlPatterns:e}],console.info(`DeviceTrust: initialized Device Trust Cache with account ${j.uuid}`);return}let t=this._accounts.findIndex(r=>r.account?.uuid===j.uuid);if(t!==-1){if(!q2A(this._accounts[t].deviceTrustUrlPatterns,e)){console.info(`DeviceTrust: updated Device Trust Cache account ${j.uuid}`);return}this._accounts[t]={account:j,deviceTrustUrlPatterns:e}}else this._accounts.push({account:j,deviceTrustUrlPatterns:e}),console.info(`DeviceTrust: added account ${j.uuid} to Device Trust Cache`)}clearIgnoredWarning(){this._health&&this.setIgnoreTime(void 0)}isWarningIgnored(){if(!this._health)return!1;let{ignoredAt:j}=this._health.data;return u6A(j)?(this.setIgnoreTime(void 0),!1):!!j}ignoreWarning(){if(!this.healthData)return;let j=Date.now();this.setIgnoreTime(j)}hasChangedToConnected(j,e){return!e||e===j?!1:e==="connected"||e==="kolide_not_registered"}loadIgnoreTimeFromStorage(){if(!this._health)return;let j=x2A();if(u6A(j)){this.setIgnoreTime(void 0);return}this._health.data.ignoredAt=j}setIgnoreTime(j){if(!j){f2A(),this._health&&(this._health.data.ignoredAt=void 0);return}if(!this._health){console.error("DeviceTrust: cannot set ignored time without health data");return}this._health.data.ignoredAt=j,v2A(j)}};var bM=3e4,p6A=2e3,m6A=6e5,yM,la=async()=>{let A=_.getAccountHandlers,j=await Fg(A,hj,_A);if(j.isBlocked()){`${j.loggableError().str}`;return}if(yM)return yM;let e=new E6A,t=await e.init().catch(r=>Ms(r,E`preInitDeviceTrust failed unexpectedly`));if(t.type==="failure"){let r=wl(t,E`failed to init`);console.error(`DeviceTrust: ${r.message.str}: ${r.code.str}`)}return yM=e,nr.subscribe(Or,P2A),yM},E6A=class{constructor(){this.detectClient=async()=>{let j=await this.getDeviceHealth();return j.type==="failure"?j:(aF("device-trust-connected",void 0),this.localClientReady("agent-detected"),{type:"success",data:void 0})};this.deviceStatePolled=async()=>{this.actionManager.isRechecking||await this.getDeviceHealth({bustCache:!0})};this.localClient=new qM,this.stateManager=new FM,this.actionManager=new fM}get state(){return{...this.stateManager.state}}get accountData(){return this.stateManager.accounts?[...this.stateManager.accounts]:[]}async init(){let j=await this.stateManager.loadDeviceTrustAppList().then(()=>({type:"success"})).catch(r=>Ms(r,E`could not init without app list`));if(j.type!=="success")return j;let e=await this.getDeviceHealth();if(s6A(e)||l6A(e)||c6A(e)||i6A(e))return this.startDetectionPoll(),{type:"success",data:void 0};if(e.type!=="success"){let r=e.message.str;return console.warn(`DeviceTrust: init failed: ${r} - will continue to poll`),this.startDetectionPoll(),AE(e,E`init failed to get device health`)}let t=await this.localClientReady("startup").catch(r=>Ms(r,E`localClientReady failed unexpectedly at startup`));return t||{type:"success",data:void 0}}async anyAccountUnlocked(){let j=await this.getDeviceHealth({bustCache:!0});this.registerDevice(j),this.stateManager.client!=="connected"&&this.startDetectionPoll()}async getDeviceHealth(j={}){let e=z6();if(j.forceReset&&(e.isEnabled()?this.stateManager.resetDeviceHealth():D6(E`cannot reset unless debugging - skipping reset`,"unsafe-developer-setting")),!j.bustCache&&this.stateManager.healthData)return Promise.resolve({type:"success",data:this.stateManager.healthData});let t=await this.localClient.request({endpoint:CD.AuthenticatedEndPoint.DeviceHealth}),r=O2A(t),a=w2A(r);if(this.stateManager.handleHealthResponse(a),a.type!=="success")return a;let n=this.handleDeviceHealthValidation(this.stateManager.healthData);return d6A(n,"conflicting-detection-state")&&D6(E`${n.message}. Context: getDeviceHealth`,n.error),a}checkPageRestrictions(j){let e;try{e=new URL(j)}catch{D6(E`checkPageRestrictions was supplied invalid url`,"invalid-url");return}let t=this.getRestrictionDetails(e.href);if(!t)return;if(!this.stateManager.healthData)return y2A(this.stateManager.client,t);let{device:r}=this.stateManager.healthData;if(r.status==="good"){`${r.status}`;return}let a=this.handleDeviceHealthValidation(this.stateManager.healthData);if(d6A(a,"conflicting-detection-state")){D6(E`${a.message}. Context: checkPageRestrictions`,a.error);return}if(!((r.status==="will_block"||r.status==="notify")&&this.stateManager.isWarningIgnored()))return`${t.app.name}${r.status}`,{status:r.status,appName:t.app.name,accountName:t.account.name,accountUuid:t.account.uuid}}async forceSuccess(){let j=await this.actionManager.forceSuccess(this.stateManager.healthData);return j.type==="failure"||(this.stateManager.ignoreWarning(),this.stateManager.updateDeviceHealth(j.data)),j}async hintDevice(j){return this.actionManager.hintDevice(j,this.stateManager.healthData)}async unsafeClearSnoozes(){this.stateManager.clearIgnoredWarning(),await this.actionManager.unsafeClearSnoozes(this.stateManager.healthData)}async recheck(j=[]){let e=await this.actionManager.recheck(j,this.stateManager.healthData);return e.type==="failure"||this.stateManager.updateDeviceHealth(e.data.health),e}async enrollDevice(j){let e=_.findAccountHandlerByUuid(j);if(!e)return qc(E`enrollDevice failed`,"unknown-reason");await e.waitForClient().catch(o=>{let i=Ms(o,E`ah.waitForClient failed unexpectedly`),s=wl(i,E`enrollDevice failed`);console.error(`DeviceTrust: ${s.message.str}: ${s.code.str}`)});let t=await this.detectClient();if(t.type==="success"&&this.stateManager.isDeviceRegistered())return t;let r=await e.getKolideAgentEnrollmentToken().catch(o=>Ms(o,E`getKolideAgentEnrollmentToken failed unexpectedly`));if(r.type!=="success")return AE(r,E`enrollDevice failed`);let a=await fetch("https://auth.kolide.com/device/dt4a",{body:`token=${encodeURI(r.data.token)}`,method:"POST",referrer:"no-referrer",redirect:Oe()?"manual":"follow",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Accept-Charset":"UTF-8"}}).then(o=>({type:"success",data:o})).catch(o=>Ms(o,E`post to kolide failed`));if(a.type==="failure"){let o=wl(a,E`enrollDevice failed`);return console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`),o}if(Oe()&&a.data.status!==302){let o=D6(E`enrollDevice failed`,"unexpected-status-code");return console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`),o}if(!Oe()&&a.data.status!==200&&a.data.status!==201){let o=D6(E`enrollDevice failed`,"unexpected-status-code");return console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`),o}let n=Oe()?a.data.headers.get("Location"):a.data.url;return n&&await browser.tabs.create({url:n}),{type:"success",data:void 0}}async registerDevice(j){if(j.type==="success"&&j.data.accountUuid&&this.stateManager.client==="kolide_not_registered"&&this.stateManager.healthData){console.warn("DeviceTrust: Attempting silent registration");let e;try{e=await this.actionManager.registerDevice(j.data.accountUuid,this.stateManager.healthData)}catch(t){e=Ms(t,E`could not complete silent registration`)}return e.type!=="success"&&wl(e,E`silent registration failed`),e}}appListChanged(j,e){this.stateManager.updateDeviceTrustAppList(j,e)}ignoreWarning(){this.stateManager.ignoreWarning()}handleKolideRecheckFinished(j){this.stateManager.updateDeviceState(j)}handleKolideSnooze(j){this.stateManager.ignoreWarning(),this.stateManager.updateDeviceState(j)}handleKolideDeviceSignInSuccess(j){j.device.status!=="good"&&this.stateManager.ignoreWarning(),this.stateManager.updateDeviceState(j)}handleKolideUserStartedDownload(){if(this.stateManager.isDeviceRegistered()){D6(E`received download event but cache shows kolide is installed - ignoring event`,"conflicting-detection-state");return}this.startDetectionPoll()}handleKolideDeviceRegistered(){this.stateManager.isDeviceRegistered()||this.startDetectionPoll()}handleDeviceHealthValidation(j){let e=$2A(j);if(!e.isValid)switch(e.error){case"missing-health-data":e.message=E`DeviceTrust: DeviceHealth is undefined - unable to validate response`;break;case"conflicting-detection-state":e.message=E`DeviceTrust: user has no failing checks - device is in ${Z(j?.device.status??"unknown")} state.`;break;default:e.message=E`DeviceTrust: unknown validation error - unable to validate response`;break}return e}getRestrictionDetails(j){let e=this.stateManager.accounts;if(!e)return;let t=e.find(a=>a.deviceTrustUrlPatterns.some(n=>n.includeUrlPatterns.some(o=>j.match(xM(o)))&&!n.excludeUrlPatterns.some(o=>j.match(xM(o)))));if(!t)return;let r=t.deviceTrustUrlPatterns.find(a=>a.includeUrlPatterns.some(n=>j.match(xM(n))));if(!r)throw console.error("DeviceTrust: reached impossible state - previously found pattern was lost during execution"),new Pe({errorClass:E`reached-impossible-state`,message:E`previously found pattern was lost`});return{app:r,account:t.account}}startDetectionPoll(){if(this.healthPoll?.stop(),this.healthPoll=void 0,this.detectionPoll){console.warn("DeviceTrust: detection poll is already running - ignoring start request");return}this.detectionPoll=new KD(E`detectClient`,this.detectClient,p6A),this.detectionPoll.changeInterval({interval:bM,delay:m6A})}startDeviceHealthPoll(j){if(this.detectionPoll?.stop(),this.detectionPoll=void 0,this.healthPoll){console.warn("DeviceTrust: health poll is already running - ignoring start request at context: "+j);return}this.healthPoll=new KD(E`deviceHealth`,this.deviceStatePolled,bM),j==="startup"&&(this.healthPoll.changeInterval({interval:p6A}),this.healthPoll.changeInterval({interval:bM,delay:m6A})),j==="agent-detected"&&!this.stateManager.isDeviceRegistered()&&(this.healthPoll.changeInterval({interval:p6A}),this.healthPoll.changeInterval({interval:bM,delay:m6A}))}async localClientReady(j){this.startDeviceHealthPoll(j);let e=await this.getDeviceHealth();if(e.type!=="success")return AE(e,E`localClientReady could not get health data`);j==="startup"&&await this.hintDevice("browser_startup")}};var J2A="insiders-enabled",BQj=["AKHM3DPGNZFUJOY7N4UAWAMLIE","SYZR254TC5D3HOXVETU2KXJQLQ","7FNUWANXYRCEPEJ4PB3RULLBDQ"],gQj=["b5dev.ca","b5dev.com","b5dev.eu","b5local.com","b5staging.com","b5test.ca","b5test.com","b5test.eu","b5rev.com"],bi=class A{static hasInsiderAccount(){let j=BQj.some(r=>_.hasAccountHandler(r)),t=_.getAccountHandlers.map(r=>new URL(r.serveraccount.signinAddress).hostname).some(r=>gQj.some(a=>r===a||r.endsWith("."+a)));return j||t}static hasInsiderAccess(){return this.hasInsiderAccount()||vj.getItem(J2A)==="true"}static enableInsiderIfAppropriate(){this.hasInsiderAccess()&&(this.enableConsoleUtilFuncs(),console.info("\u{1F49C} Insider features enabled"))}static enableInsiderDev(){vj.setItem(J2A,"true"),A.enableInsiderIfAppropriate()}static enableConsoleUtilFuncs(){let j={core:tA,dev:ZaA,dt4a:la,invoke:Rj,tabs:ya,pm:xg,enableInsiders:A.enableInsiderDev};globalThis.bg=j}};var U2A="disable-b5x-extensions-dismissed",X2A=async()=>!ri()||!bi.hasInsiderAccess()||ce.getItem(U2A)==="Y"?Promise.resolve():(ce.setItem(U2A,"Y"),e2A().then(A=>{if(A.length===0){console.info("No other versions of B5X were detected");return}let j=(t,r)=>`${t} (${r})`,e=A.length>1?A.map(t=>j(t.name,t.version)).join(", ").trimEnd():j(A[0].name,A[0].version);as({id:"disable-b5x-extensions-alert",title:nA("Disable other versions of 1Password in the browser?"),text:nA("We have detected other versions of this extension installed. Would you like to disable {extensionNames}?",{extensionNames:e}),primaryAction:{id:"disable-b5x-extensions-action",label:nA("Disable Extensions"),destructive:!1,action:{type:"DisableExtensions",content:A.map(t=>t.id).join(",")}},cancelAction:nA("Cancel")})}));var b_A=W(Ik());var V2A="https://op8.agilebits.com/extension/report-issue";var W2A=["cisco.1password.com"];var B6A=function(A){return function(j){return j.map(function(e){return A(e)})}};var ab=W(Dn()),rb=W(Yk());var nb=(A,j,e={})=>{let{storageType:t="SessionStorage",trackErrors:r=!0}=e,a=new ht(`${t} Accessor`),n=()=>t==="SessionStorage"?ce:vj;return[()=>(0,rb.pipe)(ivA(n().getItem(A.str)),N4(JSON.parse),N4(o=>j.decode(o)),FL((0,rb.flow)(ab.mapLeft(o=>{let i=E`Invalid data cannot be accessed from ${Z(t)} at key "${A}". Errors found in the following paths: ${Y2A(o)}`;a.warn(i.str,`
Returning undefined.`),r&&lj(new Pe({errorClass:E`CodecError`,message:i}))}),bL)),ovA(()=>{})),o=>{if(o===null)return n().removeItem(A.str);(0,rb.pipe)(o,j.encode,i=>j.decode(i),ab.map(i=>JSON.stringify(i)),ab.fold(i=>{let s=E`Invalid data cannot be saved to ${Z(t)} with key "${A}". Errors found in the following paths: ${Y2A(i)}`;a.warn(s.str,`
setItem aborted.`),r&&lj(new Pe({errorClass:E`CodecError`,message:s}))},i=>n().setItem(A.str,i)))}]},Y2A=A=>(0,rb.pipe)(A,B6A(j=>j.context),B6A(j=>j.map(({key:e})=>e).filter(Boolean).join(".")),j=>Z(j.join(", ")));var wa=W(aA()),Q2A=wa.intersection([wa.type({timestamp:wa.number,tabId:wa.number,url:wa.string}),wa.partial({detectedEmail:wa.string,detectedPasswordManager:wa.string,withOtp:wa.boolean,withProvider:wa.string})]),Z2A=wa.intersection([wa.type({timestamp:wa.number,domain:wa.string,completedSteps:wa.array(wa.union([wa.literal("identifier"),wa.literal("password")])),tabId:wa.number}),wa.partial({detectedEmail:wa.string})]),ob="LoginDetected";var jE=new ht("[Login Detection]"),ib=()=>{let A=hj.anyAccountHasFlag("b5x-trelica-activity-reporting"),j=_.getAccountHandlers.find(e=>e.serveraccount.tier?.features.find(t=>t==="b2bXamTrelica"));return A?j:void 0},j_A=()=>hj.anyAccountHasFlag("b5x-login-detection")||!!ib(),qQj=()=>!j_A(),vQj=E`pendingLogin`,xQj=E`partialLogin`,g6A="purge-login-detection-data",fQj=2*60*1e3,A_A=2*60*1e3,GQj=5*1e3,e_A=()=>{browser.alarms.onAlarm.addListener(OQj),browser.tabs.onUpdated.addListener(PQj),X("login-detection-page-event",FQj),browser.alarms.get(g6A).then(A=>{if(!A)return browser.alarms.create(g6A,{delayInMinutes:1,periodInMinutes:1})})},[wM,h6A]=nb(vQj,Q2A),[t_A,$M]=nb(xQj,Z2A),FQj=({data:{name:A,payload:j}},{tab:e})=>{if(!qQj()){if(!e.id){jE.error("No tab ID collected, aborting.");return}switch(A){case"LOGIN_EVENT":return r_A({...j,tabId:e.id});case"LOGIN_STEP":return yQj({...j,tabId:e.id},t_A());default:Ws(A,Z(`Unrecognized payload type: ${A}`));break}}},$v=null,r_A=A=>{jE.debug("Received attempted login event"),$v&&(clearTimeout($v),$v=null);let j=bQj(A,wM());h6A(j),$v&&clearTimeout($v),$v=setTimeout(wQj,GQj)},bQj=(A,j)=>{let e=Date.now();return j?.tabId===A.tabId&&j.url===A.url?{...j,timestamp:e,withOtp:(j.withOtp||A.withOtp)??!1}:{withOtp:!1,timestamp:e,...A}},yQj=(A,j)=>{jE.debug("Received attempted login step");let e=$Qj(A,j);["identifier","password"].every(t=>e.completedSteps.includes(t))?(r_A({url:A.url,withOtp:!1,withProvider:void 0,tabId:e.tabId}),$M(null)):$M(e)},$Qj=({tabId:A,timestamp:j,step:e,url:t},r)=>{let a=new URL(t).hostname;return r?.domain===a&&!r.completedSteps.includes(e)&&Math.abs(j-r.timestamp)<=fQj?{...r,timestamp:j,completedSteps:r.completedSteps.concat(e)}:{domain:a,tabId:A,timestamp:j,completedSteps:[e]}},wQj=()=>{$v=null;let A=wM();A&&Rj("login-detection-background-event",{name:"CHECK_PAGE",payload:{type:A.withOtp?"NoOTPField":"NoPasswordField",for:{type:"PendingLoginEvent",tabId:A.tabId,timestamp:A.timestamp}}},{tabId:A.tabId}).then(j=>{if(!j.ok)return jE.error("Failed to check pending login event.");if(!j.data.result)return jE.warn("Login appeared to be unsuccessful.");IQj(j.data.for)})},IQj=({tabId:A,timestamp:j})=>{let e=wM();!e||e.timestamp!==j||e.tabId!==A||(DQj(e),h6A(null),$M(null))},DQj=({url:A,...j})=>{globalThis.dispatchEvent(new CustomEvent(ob,{detail:{...j,url:A}}))},OQj=A=>{if(A.name!==g6A)return;let j=wM()?.timestamp;j&&Date.now()-j>A_A&&(jE.debug("Purging stale login attempt data"),h6A(null));let e=t_A()?.timestamp;e&&Date.now()-e>A_A&&(jE.debug("Purging stale login step data"),$M(null))},PQj=(A,j)=>{if(j_A()&&j.status==="complete")try{let e="/inline/injected/heuristics.js",t;na()?t=browser.scripting.executeScript({target:{tabId:A},files:[e]}):t=browser.tabs.executeScript(A,{file:e}),t.then(()=>{jE.debug("Content script injected")})}catch{jE.error("Unable to inject content script")}};var sb=W(aA());var q6A="trelica-submit-activities",a_A=5,v6A="trelica-job",n_A=1,CQj=E`trelica-next-extension-report-time`,HQj=E`trelica-next-purge-time`,TQj=60*60*1e3,o_A=24*60*60*1e3,KQj=5,SQj=A=>A*60*1e3,ns=new ht("[Trelica]"),MQj=()=>!!ib(),lb=()=>!MQj(),IM;var wv=async()=>{let A=ib();if(A){let{uuid:j,signinAddress:e,userUUID:t}=A.serveraccount;return IM===j?void 0:(IM=j,Xt.invoke("ActivityTrackingInit",{type:"Enable",content:{accountUuid:j,userUuid:t,signinUrl:e}}))}else return IM?(IM=void 0,Xt.invoke("ActivityTrackingInit",{type:"Disable"})):void 0},_Qj=()=>{nr.subscribe(gp,wv).subscribe(wi,wv).subscribe(Fd,wv).subscribe(Qk,wv).subscribe(Or,wv).subscribe(On,wv).subscribe(ob,({detail:A})=>{c_A({detectedEmail:A.detectedEmail,detectedPasswordManager:A.detectedPasswordManager,timestamp:A.timestamp,url:A.url,withOtp:A.withOtp,withProvider:A.withProvider}).catch(j=>{ns.error("Failed to report login event",j)})}).subscribe(bd,async({detail:{linkedAccount:A,provider:j,tabId:e}})=>{let t=await an(e);if(!t){ns.warn("Tab not found for SignInWithDetected event, cannot report login");return}return ns.debug("Reporting login event from provider"),QQj(A,j,t)})},s_A=()=>{wv(),_Qj(),browser.alarms.onAlarm.addListener(A=>{A.name!==q6A||lb()||x6A()}),browser.alarms.onAlarm.addListener(UQj),browser.alarms.get(q6A).then(A=>{A||browser.alarms.create(q6A,{periodInMinutes:a_A,delayInMinutes:a_A})}),browser.alarms.get(v6A).then(A=>{A||browser.alarms.create(v6A,{periodInMinutes:n_A,delayInMinutes:n_A})}),l_A()},LQj=A=>j=>{let e=new Date().toISOString();return j.filter(({id:t,type:r,enabled:a})=>a&&r==="extension"&&t!==A).map(t=>({detected:e,extensionId:t.id,...bI(t,["homepageUrl","hostPermissions","name","permissions"])}))},[NQj,i_A]=nb(CQj,sb.type({nextReportTime:sb.number,attempts:sb.number})),l_A=async()=>{if(lb())return;let{nextReportTime:A=0,attempts:j=0}=NQj()??{};if(!(A>Date.now()))return ns.debug("Attempting to report extension info"),OD().then(LQj(browser.runtime.id)).then(async e=>{if(e.length===0){ns.debug("No extensions to report.");return}return Xt.invoke("ExtensionInfo",e).then(()=>ns.debug("Successfully reported extension info."))}).then(()=>{i_A({nextReportTime:Date.now()+o_A,attempts:0})}).catch(()=>{ns.error("Unable to report extension metadata to Trelica."),i_A({nextReportTime:Math.min(Date.now()+SQj(Math.pow(KQj,j)),Date.now()+o_A),attempts:j+1})})},[zQj,RQj]=nb(HQj,sb.number),JQj=async(A=!1)=>{if(!(A&&Date.now()<(zQj()??0)))return ns.info("Purging stale Trelica activity"),Xt.invoke("StaleDataCheck",void 0).then(()=>{ns.info("Stale activity purged"),RQj(Date.now()+TQj)}).catch(()=>{ns.error("Stale activity check failed to invoke.")})},UQj=A=>{A.name!==v6A||lb()||(l_A(),JQj(!0))},x6A=async()=>{if(!lb())try{await Xt.invoke("SubmitActivities",void 0),ns.debug("XAM Backend notified to submit activities")}catch{ns.error("Unable to notify XAM backend to submit activities")}},c_A=async({url:A,timestamp:j,detectedEmail:e,detectedPasswordManager:t,withProvider:r,withOtp:a})=>{if(!YQj(A)||!e||lb())return;let n=new URL(A),o=XQj(r),i={visited:new Date(j).toISOString(),url:`${n.origin}${n.pathname}`,detectionType:o?e0.WithProvider:e0.Interaction,usedMfa:!!a,usedPasswordManager:VQj(t),usedProvider:o,usedEmailForLogin:e};return Xt.invoke("Activity",i).then(()=>{ns.debug("Activity (login) successfully reported to XAM backend")}).catch(()=>{ns.error("Unable to report activity (login) to XAM backend")})},XQj=A=>{switch(A){case"Google":return Ug.Google;case"Microsoft":return Ug.Microsoft;case void 0:return;default:ns.warn(`Unknown detected provider: ${A}`);return}},VQj=A=>{switch(A){case"1Password":case"OnePassword":return Sl.OnePassword;case"Bitwarden":return Sl.Bitwarden;case"LastPass":return Sl.LastPass;case"Dashlane":return Sl.Dashlane;case"Keeper":return Sl.Keeper;case"Chrome":return Sl.Chrome;case"Edge":return Sl.Edge;case"Okta":return Sl.Okta;case"Unknown":return Sl.Unknown;case void 0:return;default:ns.debug(`Unknown detected password manager: ${A}`);return}},WQj=["https://","http://"],YQj=A=>WQj.some(j=>A.startsWith(j));async function QQj(A,j,e){if(lb())return;let[t,r]=(()=>{switch(j){case J6.Google:return[Ug.Google,void 0];case J6.Microsoft:return[Ug.Microsoft,void 0];case J6.Okta:return[void 0,Sl.Okta];default:return[void 0,void 0]}})(),a=(()=>{switch(A?.type){case"Item":{let n=_.findAccountHandlerByUuid(A.content.accountUuid);return Ij.itemCache?.itemWithUUID(A.content.itemUuid)?.overview.ainfo??n?.context?.user?.email}case"Username":return A.content;case void 0:return;default:ue(A)}})();return c_A({timestamp:Date.now(),url:e.unparsedUrl,detectedEmail:a,withProvider:t,detectedPasswordManager:r})}var MD=class{static createContextMenuGroup(){z6().isEnabled()&&(ut()||(md.createContextMenu({id:"clippy",title:"Clippy",contexts:["all"],parentId:"devtools"}),md.createContextMenu({id:"clippyDesignationDebugging",title:"Designation Debugging",type:"checkbox",contexts:["all"],parentId:"clippy"})))}static toggleDesignationDebugging(){console.warn("Clippy is disabled in PRODUCTION builds, ignoring request to toggle");return;try{md.updateContextMenu("clippyDesignationDebugging",{checked:this.designationListener!==void 0})}catch{}}};var d_A="watchtower_settings",f6A="watchtower-sites",DM=864e5,jZj=36e5,eZj=3e5,Iv=class A{constructor(j=!1){this.qaTesting=j;this.logger=new ht("\u{1F5FC} Watchtower events")}wait(j){browser.alarms.create(f6A,{when:Date.now()+j}),this.listener===void 0&&(this.listener=e=>{e.name===f6A&&this.updateReportAndCompare()}),browser.alarms.onAlarm.addListener(this.listener)}async updateReportAndCompare(){if(Kt()){this.clear();return}this.logger.debug("Updating report and comparing");let j=await Ij.loadItemCache();if(!j)return;let e=await this.updateWatchtowerReport();if(!e){this.wait(eZj);return}let{showNotifications:t,watchtowerNotifications:r}=YA(),a=A.loadSettings();if(this.saveReport(e),!!a){if(t&&r&&a.report){let n=await tA.compareWatchTowerDiff(a.report,e);if(Object.keys(n.compromisedWebsitesDiff).length>0){let o=[];for(let s of j.activeItems()){let l=s.overview.URLs?.filter(u=>!!u.u).map(u=>u.u)??[];if(l.length===0)continue;let d=j.accounts.find(u=>j.vaults[u.uuid].some(m=>m.uuid===s.vault.uuid));if(!d)continue;let k={accountUUID:d.uuid,itemUUID:s.uuid,lastPasswordChangeTimestamp:s.passwordUpdatedAt??0,vaultUUID:s.vault.uuid,websites:l};o.push(k)}let i=await tA.newCompromisedWebsiteItems({compromisedWebsitesDiff:n.compromisedWebsitesDiff,items:o});i.items.length>0&&fTA(i)}}this.wait(DM)}}async begin(){if(this.listener||Oe())return;this.logger.debug("Beginning watchtower events");let j=A.loadSettings(),{showNotifications:e,watchtowerNotifications:t}=YA(),r=e&&!t;if(!j&&r?Ss("enable-watchtower-compromised-sites"):r||hv("enable-watchtower-compromised-sites"),!j){let n=await this.updateWatchtowerReport();n?(this.saveReport(n),this.wait(DM)):this.wait(jZj);return}let a=j.lastUpdate?new Date().getTime()-new Date(j.lastUpdate).getTime():0;a>=DM&&(this.clear(),await this.updateReportAndCompare(),a=0),this.wait(DM-a)}clear(){this.logger.debug("Clearing watchtower events"),browser.alarms.clear(f6A),this.listener&&(browser.alarms.onAlarm.removeListener(this.listener),this.listener=void 0)}async updateWatchtowerReport(){try{return this.qaTesting?A.fakeWatchtowerData():(LA.unloadWatchtowerData(),await LA.loadWatchtowerData(),LA.getWatchtowerData())}catch(j){console.warn("Unable to update Watchtower report!",j)}}saveReport(j){if(this.qaTesting)return;let e={lastUpdate:new Date().getTime(),report:j};vj.setItem(d_A,JSON.stringify(e))}static loadSettings(){let j=vj.getItem(d_A);return j?JSON.parse(j):void 0}static async fakeWatchtowerData(){return new Promise(j=>{fetch("https://bucket.agilebits.com/qa/watchtower/compromised-sites.json").then(async e=>e.text()).then(e=>{let t=JSON.parse(e);j(t)})})}static async watchtowerQA(){let j=new A(!0);await j.updateReportAndCompare(),j.clear()}},OM=qe.resolve(Iv);var tZj=!0,_D=na()?"action":"browser_action";var md=class A{constructor(j,e,t,r,a,n,o,i,s,l,d){this.didLock=()=>{this.updateAvailableItems(!1)};this.didUnlock=()=>{this.updateAvailableItems(!0)};this.updateAvailableItems=j=>{"contextMenus"in chrome&&"removeAll"in chrome.contextMenus&&chrome.contextMenus.removeAll(async()=>{await vj.init(),this.addItems(j)})};this.onClick=(j,e)=>{let t=j.menuItemId;if(typeof t=="string"&&t.startsWith("feature_")){this.featureOnClick(t.slice(8));return}else if(typeof t=="string"&&t.startsWith("devFunc_")){this.devFuncOnClick(t.slice(8));return}switch(t){case"settings":this.onopensettings();break;case"reportFeedback":this.onReportFeedback();break;case"lock":this.onlock(),globalThis.dispatchEvent(new Event(yg));break;case"saveLogin":this.onSaveLogin();break;case"saveCreditCard":this.onSaveCreditCard();break;case"saveIdentity":this.onSaveIdentity();break;case"getHelp":this.onGetHelp();break;case"collectFields":this.onCollectPageDetails({includeValues:!1,action:"download"});break;case"collectFieldsWithValues":this.onCollectPageDetails({includeValues:!0,action:"open"});break;case"update":this.onupdatecheck();break;case"reload":z6().reloadExtension();break;case"highlightSocialLoginButtons":e?.id?Rj("uso-devtools-highlight-buttons",void 0,{tabId:e.id}):console.error("[USO][devtools] No active tab detected.");break;case"addAccountPrompt":z6().toggleAddAccountPrompt();break;case"sendLocalSentry":z6().toggleSendLocalSentry();break;case"forceKolideDisable":z6().toggleForceKolideDeviceTrustFail(),la().then(async r=>r?.getDeviceHealth({bustCache:!0,forceReset:!0}));break;case"watchtowerNotificationsQATest":Iv.watchtowerQA();break;case"benchmark":this.onopenbenchmarking();break;case"clippyDesignationDebugging":MD.toggleDesignationDebugging();break;case"tabToggleExclusion":if(e?.id){let r=Ft(e);r&&(Jn.has(r)?Jn.remove(r):Jn.checkPermission(r).then(a=>{a&&Jn.append(r)}))}break;case"report":chrome.tabs.create({url:V2A,active:!0});break;case"highlightAutosubmitElements":{if(!e?.id)return console.error("[autosubmit][devtools] No active tab detected.");if(!Ft(e))return console.error("[autosubmit][devtools] Failed to create tab info for tab.");chrome.tabs.sendMessage(e.id,{name:"autosubmit-devtools-highlight-elements"});break}case"submitTrelicaActivity":x6A();break;default:}};this.featureOnClick=j=>{hj.devToggleAccountFeature(j)};this.devFuncOnClick=async j=>{let e=kM.find(t=>t.name===j)?.func;if(e){let t=e();t instanceof Promise&&await t}};this.addItems=j=>{if(A.createContextMenu({id:"settings",title:nA("Settings"),contexts:[_D]}),j&&(A.createContextMenu({id:"lock",title:nA("Lock"),contexts:["all"]}),A.createContextMenu({id:"save",title:nA("Save"),contexts:["all"]}),A.createContextMenu({id:"saveLogin",title:nA("Login"),contexts:["all"],parentId:"save"}),A.createContextMenu({id:"saveCreditCard",title:nA("Credit Card"),contexts:["all"],parentId:"save"}),A.createContextMenu({id:"saveIdentity",title:nA("Identity"),contexts:["all"],parentId:"save"})),z6().isEnabled()?A.createContextMenu({id:"reportFeedback",title:nA("[Internal] Report feedback"),contexts:["all"]}):A.createContextMenu({id:"report",title:nA("Report Issue"),contexts:["all"]}),A.createContextMenu({id:"help",title:nA("Help"),contexts:["all"]}),A.createContextMenu({id:"getHelp",title:nA("Get Help"),contexts:["all"],parentId:"help"}),A.createContextMenu({id:"collectFields",title:nA("Collect Page Structure"),contexts:["all"],parentId:"help"}),z6().isEnabled()){A.createContextMenu({id:"devtools",title:"Developer Tools",contexts:["all"]}),A.createContextMenu({id:"featureFlags",title:"Feature Flags",contexts:["all"],parentId:"devtools"});let e=[];for(let t of Object.keys(wm)){let r=hj.anyAccountHasFlag(t);e.push({name:t,enabled:r})}for(let{name:t,enabled:r}of e)A.createContextMenu({type:"checkbox",id:`feature_${t}`,title:t,contexts:["all"],parentId:"featureFlags",checked:r});A.createContextMenu({id:"devFuncs",title:"Dev Console Funcs",contexts:["all"],parentId:"devtools"});for(let t of kM)A.createContextMenu({id:`devFunc_${t.name}`,title:t.name,contexts:["all"],parentId:"devFuncs"});A.createContextMenu({id:"reload",title:"Reload",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"elementDetection",title:"Element Detection",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"highlightSocialLoginButtons",title:"Highlight Social Login Buttons",contexts:["all"],parentId:"elementDetection"}),A.createContextMenu({id:"elementDetection",title:"Autosubmit Element Detection",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"highlightAutosubmitElements",title:"Run Autosubmit Element Detection",contexts:["all"],parentId:"elementDetection"}),A.createContextMenu({id:"collectFieldsWithValues",title:"Collect Page Details",contexts:["all"],parentId:"devtools"}),A.createContextMenu({type:"checkbox",id:"addAccountPrompt",title:"Turn on Add Account Prompt",contexts:[_D],checked:z6().addAccountPromptEnabled(),parentId:"devtools"}),A.createContextMenu({type:"checkbox",id:"sendLocalSentry",title:"Send local errors to Sentry",contexts:[_D],checked:z6().sendLocalSentryEnabled(),parentId:"devtools"}),A.createContextMenu({id:"watchtowerNotificationsQATest",title:"Trigger Watchtower Notification",contexts:[_D],parentId:"devtools"}),tZj||MD.createContextMenuGroup(),A.createContextMenu({id:"benchmark",title:nA("Benchmarking"),contexts:[_D],parentId:"devtools"}),A.createContextMenu({id:"xamDebug",title:"XAM Debug",contexts:["all"],parentId:"devtools"}),A.createContextMenu({type:"checkbox",id:"forceKolideDisable",title:"Force Kolide device trust failure",contexts:["all"],parentId:"xamDebug",checked:z6().forceKolideDeviceTrustFailEnabled()}),hj.anyAccountHasFlag("b5x-trelica-activity-reporting")&&A.createContextMenu({id:"submitTrelicaActivity",title:"Submit Trelica Activity",contexts:["all"],parentId:"xamDebug"})}G6A()};this.onlock=j,this.onSaveLogin=e,this.onSaveCreditCard=t,this.onSaveIdentity=r,this.onopensettings=a,this.onReportFeedback=n,this.onshowinline=o,this.onupdatecheck=i,this.onopenbenchmarking=s,this.onGetHelp=l,this.onCollectPageDetails=d,nr.subscribe(Rs,this.didLock).subscribe(Or,this.didUnlock),chrome.contextMenus.onClicked.addListener(this.onClick),this.updateAvailableItems(!1)}static{this.createContextMenu=j=>{"contextMenus"in chrome&&"create"in chrome.contextMenus&&chrome.contextMenus.create(j,()=>{chrome.runtime.lastError&&chrome.runtime.lastError})}}static{this.updateContextMenu=async(j,e)=>new Promise((t,r)=>{"contextMenus"in chrome&&"update"in chrome.contextMenus?chrome.contextMenus.update(j,e,()=>{chrome.runtime.lastError&&r(`Failed to update context menu ${chrome.runtime.lastError.message}`),t()}):t()})}};var F6A=class{constructor(){this.getContextMenu=()=>this._contextMenu;this.setContextMenu=(j,e,t,r,a,n,o,i,s,l,d)=>this._contextMenu=new md(j,e,t,r,a,n,o,i,s,l,d);this.initContextMenu=()=>{nr.subscribe(On,()=>{this._contextMenu&&this._contextMenu.updateAvailableItems(!Kt())})}}},LD=new F6A;async function k_A(A){let j=ie.desktopConnectionManager?.getDesktopApp();if(!j||ie.getDesktopAppState().type!=="Connected")throw new Error("Unable to check about accounts when not connected");return j.shouldPromptToAddAccount({accountUuid:A})}function cb(A){let j=ie.desktopConnectionManager?.getDesktopApp();if(!j||ie.getDesktopAppState().type!=="Connected")throw new Error("Unable to prompt to add account when not connected");j.promptDesktopAppToSignIn(A)}async function eE(){let A=ie.desktopConnectionManager?.getDesktopApp();if(!A)throw new Error("Unable to unlock Desktop app when not connected");let j=await tTA(async()=>A.showUnlock(),"Ask the desktop app to show its lock screen");j.isErr()&&console.warn("Unable to show the unlock screen",j.error)}async function u_A(A){let j=ie.desktopConnectionManager?.getDesktopApp();if(!j)throw new Error("Unable to unlock Desktop app when not connected");await j.showUnlockAccount(A)||(console.warn("Unable to show the unlock account screen"),Kr({id:"unlock-account-from-desktop",message:nA("Unlock account from the desktop app"),behavior:fr.Ephemeral}))}function p_A(){nr.subscribe(Jg,eE,{once:!0});let A=globalThis.setInterval(()=>{b6A(),clearInterval(A)},5e3)}function b6A(){try{nr.unsubscribe(Jg,eE)}catch{}}async function m_A(A){let j=ie.desktopConnectionManager?.getDesktopApp();if(!j)throw new Error("Unable to show desktop app settings page when not connected");try{await j.showDesktopSettingsPage({category:A})}catch(e){console.warn("Unable to show desktop app settings",e)}}var y6A="restore-point";function E_A(){return ce.getItem(y6A)}function B_A(A){ce.setItem(y6A,A)}function $g(){ce.removeItem(y6A)}async function g_A(A){if(!A)return A??"";let j=await crypto.subtle.digest("SHA-256",q.str2ab(A.toLowerCase()));return q.ab2str(j)}var db=W(Dn()),Il=W(aA()),aZj="webauthn",$6A=A=>`${aZj}/${A}`,w6A=async A=>(await g_A(A)).substring(0,6-1),h_A=Il.type({credentialIds:Il.array(Il.string)},"WebAuthnConfigCodec"),q_A=new Il.Type("WebAuthnStorageCodec",A=>{if(typeof A!="object"||A===null)return!1;let j=h_A.decode(A);return!(0,db.isLeft)(j)},(A,j)=>{if(typeof A!="string")return Il.failure(A,j);let e;try{e=JSON.parse(A)}catch{Il.failure(A,j)}let t=h_A.decode(e);return(0,db.isLeft)(t)?Il.failure(A,j):Il.success(t.right)},A=>JSON.stringify(A)),v_A=A=>{let j=$6A(A),e=vj.getItem(j);if(!e)return PM();let t=q_A.decode(e);return(0,db.isRight)(t)?t.right:((0,db.isLeft)(t)&&(lj(new q.LoggableError({errorClass:E`GetWebAuthnConfig`,message:E`failed to parse local storage - making new config`})),console.error("Could not parse local config - making new config")),PM())},x_A=A=>{let j=$6A(A);vj.removeItem(j)},f_A=(A,j)=>{let e=$6A(A),t=q_A.encode(j);vj.setItem(e,t)},PM=()=>({credentialIds:[]}),I6A=async(A,j)=>{let e=_.findAccountHandlerByUuid(A);if(!e)return;let t=[];e.items?.forEach(n=>{n.overview.b5AccountUUID===A&&n.state===dA.ItemState.Active&&n?.overview?.passkey&&(j.isExcluded(A,n.vault.uuid)||t.push(w6A(n.overview.passkey.credentialId)))});let r=await Promise.all(t),a=PM();a.credentialIds=r,f_A(A,a)},D6A=A=>{let j=PM();f_A(A,j)},G_A=()=>{if(_.anyAccountIsSyncing){let A=E`Could not remove passkey cache while sync is in progress`;return console.error(A.str),!1}return _.getAccountHandlers.forEach(A=>{D6A(A.accountIdentifier.accountUUID)}),!0},F_A=()=>{if(_.anyAccountIsSyncing){let j=E`Could cache passkeys while sync is in progress`;return console.error(j.str),!1}let A=hr();return _.getAccountHandlers.forEach(j=>{I6A(j.accountIdentifier.accountUUID,A)}),!0};function y_A(){qe.resolve(qi).subscribe(Rs,ND).subscribe(Or,ND).subscribe(qg,nZj).subscribe(Qk,ND).subscribe(Fd,ND).subscribe(wi,ND).subscribe(On,oZj)}async function CM(){let A=await wS(),j;try{let[,e]=_.defaultSavingLocation();j=e.uuid}catch{}return{accounts:A,defaultVault:j}}function $_A(){return _.allAccountHandlersAreLocked?{type:"app-locked",data:void 0}:{type:"app-unlocked",data:void 0}}async function ND(){let A=$_A(),{accounts:j,defaultVault:e}=await CM();Rj("settings-page-changed",{b5xAppState:A,accounts:j,defaultVault:e,hasInsiderAccess:bi.hasInsiderAccess()},{enableTracing:!1})}function nZj(){Rj("settings-page-changed",{desktopAppState:ie.getDesktopAppState()},{enableTracing:!1})}function oZj(){let A=StA();Rj("settings-page-changed",{unleashFeatures:A},{enableTracing:!1})}async function w_A(){let A=$_A(),j=YA(),e=await He.getShortcuts(),t=await LO(),{accounts:r,defaultVault:a}=await CM(),n=StA(),o={accounts:r,autoLockEnabled:j.autoLockEnabled,autoLockOnDeviceSleep:j.autoLockOnDeviceSleep,autoLockMinutes:j.autoLockMinutes,securityPreset:j.securityPreset,newHibpEnabled:j.newHibpEnabled,language:j.language,languageChanged:j.languageChanged,defaultItemList:j.defaultItemList,defaultPasswordManager:j.defaultPasswordManager,inlineEnabled:j.inlineEnabled,inlineShowAutomatically:j.inlineShowAutomatically,inlineSaveEnabled:j.inlineSaveEnabled,socialLoginsEnabled:j.socialLoginsEnabled,showNotifications:j.showNotifications,watchtowerNotifications:j.watchtowerNotifications,keyboardShortcut:e.browserAction,lockShortcut:e.lock,saveNewItemsIn:j.saveNewItemsIn,defaultVault:a,b5xAppState:A,desktopAppState:ie.getDesktopAppState(),useSharedLockState:j.useSharedLockState,slsChannel:j.slsChannel,showRichIcons:j.showRichIcons,appTheme:j.appTheme,appWidth:j.appWidth,hasInsiderAccess:bi.hasInsiderAccess(),authenticatePasskeys:j.authenticatePasskeys,shouldCachePasskeyIds:j.shouldCachePasskeyIds,devtoolsEnabled:j.devtoolsEnabled,showPasskeySetting:t,autoSaveEnabled:j.autoSaveEnabled,autoSaveCreditCardsEnabled:j.autoSaveCreditCardsEnabled,autoSaveIdentitiesEnabled:j.autoSaveIdentitiesEnabled,autoSaveTotpEnabled:j.autoSaveTotpEnabled,unleashFeatures:n,autoSubmitLogins:j.autoSubmitLogins,firefoxDataCollection:j.firefoxDataCollection,showLockedStateNotifications:j.showLockedStateNotifications,appLauncherLaunchAppsInNewTab:j.appLauncherLaunchAppsInNewTab,appLauncherShowBookmarksBar:j.appLauncherShowBookmarksBar,appLauncherUseBackgroundImage:j.appLauncherUseBackgroundImage,requireFillSensitivePrompt:j.requireFillSensitivePrompt,requireFillCreditCardPrompt:j.requireFillCreditCardPrompt,requireFillLoginPrompt:j.requireFillLoginPrompt};return await bn().resolveSettings(o)}async function I_A(A){let j=YA(),e=A.data;if(e.language&&(e.languageChanged=!0),(!e.showNotifications||e.watchtowerNotifications)&&hv("enable-watchtower-compromised-sites"),!(e.shouldCachePasskeyIds!==void 0&&!iZj(e.shouldCachePasskeyIds))){if(e.autoLockMinutes){let{accounts:t}=await CM();t.forEach(r=>{St("AutolockDurationSettingUpdate",{autolock_duration_setting_status:"REQUESTED",autolock_duration_before:j.autoLockMinutes,autolock_duration_after:e.autoLockMinutes},r.uuid)})}if(await W_A(e),Rj("settings-page-changed",e,{enableTracing:!1}),P6A(e),e.firefoxDataCollection&&VF(),e.autoLockMinutes){let{accounts:t}=await CM();t.forEach(r=>{St("AutolockDurationSettingUpdate",{autolock_duration_setting_status:"SUCCESSFUL",autolock_duration_before:j.autoLockMinutes,autolock_duration_after:e.autoLockMinutes},r.uuid)})}if(e.appWidth!==void 0&&$g(),e.devtoolsEnabled!==void 0){let t=LD.getContextMenu();t&&t.updateAvailableItems(!Kt())}e.socialLoginsEnabled===!0&&j.socialLoginsEnabled===!1?mS():e.socialLoginsEnabled===!1&&j.socialLoginsEnabled===!0&&$5A()}}function D_A(A){if(A.data.kind==="account-based"){if(!_.getUnlockedAccountOverviews[0]||!e7.includes(A.data.featureName))return;hj.devToggleAccountFeature(A.data.featureName)}else hj.devTogglePreRegFeature(A.data.featureName)}function iZj(A){return A===!0?F_A():A===!1?G_A():(Ws(A,E`shouldCachePasskeyIds`),!1)}function O_A(){return rD()}function P_A(A){NTA(A.data)}async function C_A(A){let{name:j,shortcut:e}=A.data,t;try{t=await He.updateShortcut(j,e)}catch{t=e,console.warn("Failed to set new shortcut.")}switch(j){case A1:case j1:Rj("settings-page-changed",{keyboardShortcut:t},{enableTracing:!1});break;case e1:Rj("settings-page-changed",{lockShortcut:t},{enableTracing:!1});break;default:ue(j)}}function H_A(A){let j=A.data.account,e=A.data.isEnabled,t=hr(),r=zD(t);j.vaults?.forEach(n=>{let o=r.includes(n.uuid);(!o&&e||o&&!e)&&t.toggle(j.uuid,n.uuid)}),KM(t.excluded);let a=zD(t);Rj("accounts-and-vaults-changed",a),zk()}function T_A(A){let{accountUuid:j,vaultUuid:e}=A.data,t=hr();t.toggle(j,e),KM(t.excluded),Rj("accounts-and-vaults-changed",zD(t)),zk()}function K_A(A){let j=hr();for(let e of A.data.accounts)if(e.vaults)for(let t of e.vaults){let r=j.isExcluded(e.uuid,t.uuid);(e.disabled&&!t.disabled||!t.disabled&&r||t.disabled&&!r)&&(j.toggle(e.uuid,t.uuid),Rj("accounts-and-vaults-changed",zD(j)))}KM(j.excluded),zk()}function O6A(A){qe.resolve(qi).subscribe(On,()=>{hj.accountHasFlag(A,"frameworks-autolock-longerDefault")&&(Rj("settings-page-changed",{autoLockMinutes:YgA},{enableTracing:!1}),St("BackgroundAction",{name:b_A.TelemetryString.assertSafeForTelemetry("unlock_setting_changed")},A))},{once:!0})}function HM(){return zD(hr())}function zD(A){let j=[];for(let e in A.excluded)Object.prototype.hasOwnProperty.call(A.excluded,e)&&j.push(...A.excluded[e]);return j}function S_A(A){_.removeAccount(A.data.accountUuid)}function M_A(A){let{accountUuid:j}=A.data;return _.findAccountHandlerByUuid(j)?.hasDeletePermission()||!1}function __A(A){let{accountUuid:j}=A.data;_.deleteAccountPermanently(j)}function L_A(){_A.resetDatabase()}function N_A(A){let j=A.data.accountUuid;H6A(j)}async function z_A(A){let{accountUuid:j}=A.data;return TM(j)}async function R_A(A){let{accountUuid:j}=A.data;return C6A(j)}function J_A(){let[A]=_.defaultSavingLocation();TM(A.uuid)}async function U_A(A){let{settingsCategory:j}=A.data;if(ut()){let e=await Gt();He.openTab({url:IF(`settings/${j}`),openerTabId:e?.id})}else m_A(j)}async function X_A(A){let{accountUuid:j,password:e}=A.data;return _.findAccountHandlerByUuid(j)?.verifyAccountPassword(e)||!1}function V_A(){Jn.clear()}var RD=class{constructor(j){this._cache=new Map,this._refreshTokenHandler=j}deserializeToCache(j){this._cache=oF(j)}serialize(){return nF(this._cache)}clear(){this._cache.clear()}async get(j,e,t,r){let a=this._cache.get(t),n=a&&(typeof e=="string"?a.itemUuid!==e:a.refreshToken!==r);if(a&&a.expiresIn>Date.now()&&!n)return Oj({itemUuid:a.itemUuid,accessToken:a.accessToken,refreshToken:a.refreshToken,updated:!1,context:a.context});let o=await this._refreshTokenHandler(j,r);if(o.isErr())return TA({type:"RequestError"});let i=Date.now()+o.value.expiresIn*1e3-3e3,s=typeof o.value.refreshToken<"u"?o.value.refreshToken:r;return this.set(t,{itemUuid:e,accessToken:o.value.accessToken,refreshToken:s,expiresIn:i,context:o.value.context}),Oj({itemUuid:e,accessToken:o.value.accessToken,refreshToken:s,updated:!0,context:o.value.context})}delete(j){this._cache.delete(j)}set(j,e){this._cache.set(j,e)}};var SM=class{constructor(j){this._cache=new Map,this._nakedDomainForUrl=j}deserializeToCache(j){this._cache=oF(j)}clear(){this._cache.clear()}get(j){let e=this._cache.get(j);if(e)return e;let t=this._nakedDomainForUrl(j);return this.set(j,t),t}serialize(){return nF(this._cache)}set(j,e){this._cache.set(j,e)}};var MM=class{get hasTasks(){return!!this._cache}constructor(){this._cache=void 0,this.updatedAt=void 0}async getTasks(j,e,t){if(this._cache&&!e)return this._cache;if(!j||!j.account){console.warn("No client context for account, unable to get tasks");return}let r=hj.accountHasFlag(j.account.uuid,"b2b-extension-first-guided-setup"),a=j.account.isBusiness;if(a&&!r)return;let n=await LA.getActivationHubTasks(j,{product:"password-manager",platform:"extension",audience:lZj(j.account.type,j.user?j.user.isOwner():!1),limit:10}),o=j.user?.isGuest,i={...n,tasks:n.tasks.sort((l,d)=>l.ordering-d.ordering).map(l=>({...l,name:MSA(l.name)})).filter(l=>l.name!=="unknown"&&(!(o||a&&r)||l.name!=="migrate-data"))};i.total=i.tasks.length,this._cache=i,t&&(this.updatedAt=t);let s=j.account.uuid;return i.tasks.forEach(l=>{l.completedAt&&!qv(s,l.name)&&TS(s,l.name)}),Rj("refresh-activation-hub",{accountUuid:j.account.uuid}),i}clear(){this._cache=void 0,this.updatedAt=void 0}async updateCacheIfNecessary(j,e){return this.updatedAt===void 0||e>this.updatedAt?(await this.getTasks(j,!0,e),!0):!1}},lZj=(A,j)=>{if(!j)return"individual";switch(A){case dt.Type.Individual:return"individual";case dt.Type.Family:return"family-owner";case dt.Type.Business:return"business-owner";default:return"individual"}};var Y_A=new Error("No credentials to use"),_M=class{constructor(){this._isRunning=!1;this._cache=[]}get hasCards(){return this._cache.length>0}async update(j){let e=!1;if(this._isRunning)return{itemsUpdated:e};this._isRunning=!0;try{let t=await j();if(!t)throw Y_A;let r=this._cache.reduce((i,s)=>(i[s.id]=s,i),{});this._cache=[];let a=Mm(t.clientId),n=await PTA(a,t.accessToken,t.accountId),o=[];if(n.isOk())for(let i of n.value){let s=r[i.id];s?this._cache.push(s):o.push(i)}if(o.length>0){e=!0;let i=await CTA(a,t.accessToken,o);i.isOk()&&this._cache.push(...i.value)}}catch(t){t!==Y_A&&console.warn("Unable to sync Brex cards"),e=!1}return this._isRunning=!1,{itemsUpdated:e}}clear(){this._cache=[]}cards(j,e){let t=0;return this._cache.map(r=>{let a=new fA.VaultItem(e);return a.details=r.card.details,a.overview=r.card.overview,a.templateUuid=r.card.templateUuid,a.vault=e,a.localId=t++,a.overview.b5AccountUUID=j,a.cacheInformation={provider:"brex",cardId:r.id,category:r.category},a})}};var LM=class{constructor(j){this.accountHandler=j}async getManagedApplications(){let j=this.accountHandler.client?.CTX?.session;if(!j)throw new Error("This account handler does not have a valid session and therefore cannot fetch applications");let{userApplications:e}=await cA.getUserApplications(j);return e}};var NM=class{constructor(j,e,t){this.b5Api=j;this.vaultApi=e;this.user=t}async syncManagedVaultItems(){if(!this.vaultApi.isCompleteTrustIdentityEnabled()){console.info("Managed Apps - Feature flag is NOT enabled");return}if(console.info("Managed Apps - Feature flag is enabled"),Yj.isGuest(this.user||{type:""})){console.info("Managed Apps - User is guest, managed vault will not be created");return}try{let e=await this.getManagedVaultFunc(),t=await this.b5Api.getManagedApplications(),r=await this.vaultApi.getLocalManagedApplications(e);console.info(`Managed Apps - Found ${r.length} managed apps stored locally`),await this.deleteUnassignedApplications(r,t),await this.createOrMergeVaultItems(e,r,t)}catch(e){We(e)?lj(e):console.error("Managed Apps - error in syncManagedVaultItems",e)}}async getManagedVaultFunc(){if(!this.vaultApi.hasFetchedVaults())throw new q.LoggableError({errorClass:E`VaultFetchingRaceCondition`,message:E`Attempted to check for managed vaults before vaults were fetched`});try{return await this.vaultApi.getManagedVault()||this.createManagedVaultFunc()}catch(j){return console.error("Error getting managed vault:",j),this.createManagedVaultFunc()}}async createManagedVaultFunc(){try{return await this.vaultApi.createManagedVault()}catch(j){if(console.error("Error creating managed vault:",j),q.errors.isServerError(j,q.errors.ServerErrorCode.badRequest,q.errors.HTTPStatusCode.badRequest))return await this.getManagedVaultFunc();throw new Error("Could not find or create managed vault")}}createVaultItem(j,e){let t=new dA(j);return t.vault=j,t.uuid=cZj(e.uuid),t.templateUuid=yj.ManagedApplicationUuid,t.overview.title=e.name,t.overview.url=e.service_provider_url,t.overview.URLs=[{l:"",u:e.service_provider_url}],t.state=dA.ItemState.Active,t.details.sections.push(this.createManagedAppSection(e)),t}createManagedAppSection(j){let e={applicationUuid:j.uuid,email:this.vaultApi.getAccount().email,loginInitiationUrl:j.login_initiation_url};return{name:"",title:"",fields:[{k:dA.FieldType.ManagedApplication,n:dA.FieldType.ManagedApplication,t:j.name,v:e}]}}merge(j,e){if(!e)throw console.warn("Merge should never be called when there is not a local item. You should be creating a new item instead."),new q.LoggableError({errorClass:E`InvalidManagedApplicationItemState`,message:E`Merge should never be called when there is not a local item. You should be creating a new item instead.`});let t=e;return t.overview.title=j.name,t.overview.url=j.service_provider_url,t.overview.URLs=[{l:"",u:j.service_provider_url}],t.details.sections=t.details.sections.map(r=>!r.fields?.some(n=>n.k===dA.FieldType.ManagedApplication)?r:this.createManagedAppSection(j)),t.updatedAt=new Date,t}async createOrMergeVaultItems(j,e,t){let r=[];for(let a of t){let n=e.find(o=>this.vaultItemsRepresentSameApplication(o,a));n?this.shouldUpdateItem(a,n)&&(console.info("Managed Apps - Decided to update item after finding a change in managed fields from the remote",a.uuid),r.push(this.merge(a,n))):(console.info("Managed Apps - Did not find local item with app uuid. An item will be created.",a.uuid),r.push(this.createVaultItem(j,a)))}if(r.length===0){console.info("Managed Apps - No managed applications to save. This sync operation (for managed apps) is a no-op.");return}await this.vaultApi.saveVaultItems(j,r)}shouldUpdateItem(j,e){let t=this.findManagedApplicationField(e);if(!t)return!0;let r=this.urlHasChanged(j.service_provider_url,e.url),a=this.urlHasChanged(j.login_initiation_url,t.loginInitiationUrl);return r||a||j.name!==e.overview.title?!0:t.email!==this.vaultApi.getAccount().email}async deleteUnassignedApplications(j,e){let t=j.filter(r=>!e.find(n=>this.vaultItemsRepresentSameApplication(r,n)));console.info(`Managed Apps - Found ${t.length} local items to delete`);try{await Promise.all(t.map(r=>{r.vault.contentVersion+=1,this.vaultApi.deleteVaultItem(r)}))}catch(r){We(r)?lj(r):console.error("Managed Apps",r)}}vaultItemsRepresentSameApplication(j,e){let t=this.findManagedApplicationField(j);if(!t)return!1;let{applicationUuid:r}=t;return r===e.uuid}findManagedApplicationField(j){let e=fA.VaultItem.findFieldWithName(dA.FieldType.ManagedApplication,j);if(dA.ManagedApplicationField.is(e?.v))return e?.v}urlHasChanged(j,e){let t=fl(j),r=fl(e);return!t&&!r?!1:!r&&t||r&&!t?!0:t?.hostname!==r?.hostname||t?.pathname!==r?.pathname||t?.protocol!==r?.protocol}};function cZj(A){return A.replace(/-/g,"").toLowerCase().substring(0,26)}var zM=class{constructor(j){this.accountHandler=j}async getManagedVault(){return this.accountHandler.getManagedVaultFromDb()}async createManagedVault(){let j=this.accountHandler.client?.CTX;if(!j)throw console.warn("Unable to create a managed vault because the supplied account handler's context is undefined"),new q.LoggableError({errorClass:E`NoSessionAvailableError`,message:E`Unable to create a managed vault because the supplied account handler's context is undefined`,userUuid:this.accountHandler.user?.uuid?q.logsafe.assertLogSafe(this.accountHandler.user?.uuid):void 0});let t=(await _A.getDatabase().findAccountByUUID(this.accountHandler.uuid))?.id;if(!t)throw new q.LoggableError({errorClass:E`MissingLocalAccountId`,message:q.logsafe.assertLogSafe(`Unable to find account id in local database for account uuid ${this.accountHandler.accountIdentifier.accountUUID}`),userUuid:q.logsafe.assertLogSafe(this.accountHandler.accountIdentifier.userUUID)});try{let r=await LA.createManagedVault(j),a=await cA.getManagedVault(j.session);return a.account_id=t,a.contentVersion=0,await _A.getDatabase().saveVault(a),r}catch(r){throw console.error("Error creating managed vault:",r),new q.LoggableError({errorClass:E`ManagedVaultCreationError`,message:q.logsafe.assertLogSafe(`Error creating managed vault for account ${this.accountHandler.accountIdentifier.accountUUID}`),userUuid:q.logsafe.assertLogSafe(this.accountHandler.accountIdentifier.userUUID)})}}getAccount(){return this.accountHandler.serveraccount}hasFetchedVaults(){return typeof this.accountHandler._vaults<"u"}async getLocalManagedApplications(j){let e=j.localId;return e?this.accountHandler.getVaultItems(e):Promise.resolve([])}async saveVaultItems(j,e){return e.length===0?Promise.resolve([]):this.accountHandler.saveItems(j,e)}async deleteVaultItem(j){return lM(j.uuid)}isCompleteTrustIdentityEnabled(){return hj.accountHasFlag(this.accountHandler.serveraccount.uuid,"b2b-complete-trust-identity")}};function Q_A(){if(!YA().showNotifications||Oe())return;chrome.notifications.create("storage-exceeded",{type:"basic",iconUrl:Cs,title:nA("Disk space too low"),message:nA("1Password can't open its database because there isn't enough disk space available for {browser}. To use 1Password, free up some space.",{browser:"chromium"}),requireInteraction:ri()?!0:void 0})}var Z_A=W(Dn()),Qr=E`SyncError`,JD=(m=>(m[m.all=0]="all",m[m.account=1]="account",m[m.billing=2]="billing",m[m.itemTemplates=3]="itemTemplates",m[m.itemUsage=4]="itemUsage",m[m.keysets=5]="keysets",m[m.managedApplications=6]="managedApplications",m[m.newDeviceEnrollment=7]="newDeviceEnrollment",m[m.vaults=8]="vaults",m[m.activationHub=9]="activationHub",m[m.policies=10]="policies",m[m.kolideApps=11]="kolideApps",m[m.managedCredentials=12]="managedCredentials",m[m.managedCredentialsPolicies=13]="managedCredentialsPolicies",m))(JD||{});var RM=class{constructor(j,e){this.stop=()=>{this.isRunning=!1};this.reinitializeClientIfUndefined=async()=>this.accountHandler.reinitializeClient();this.syncAccount=async j=>{let e=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync account. Account handler client could not be created. ${e}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let t=await this.accountHandler.client.getAccount(),r=this.dbAccount;if(!r)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync account. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});r.name=t.name,r.state=t.state,t.me&&t.me.email&&(r.updatedAt=t.me.updatedAt,r.email=t.me.email,r.userVersion=t.me.attrVersion,r.userState=t.me.state,r.userPreferences=t.me.preferences,r.userAvatar=t.me.avatar,r.userName=t.me.name,r.userType=t.me.type);let a=t.type===fA.Account.Type.Individual?"my":t.domain;return r.domain=a,r.signinAddress=dZj(r.signinAddress,a),r.type=t.type,r.avatar=t.avatar,r.baseAvatarURL=t.baseAvatarURL,r.baseAttachmentURL=t.baseAttachmentURL,r.tier=t.tier,r.accountVersion=t.attrVersion,r.billingStatus=j.billingOverview.status,r.freezesAt=t.billing?.freezesAt,t.settings?.teamMemberPolicies&&(r.teamMemberPolicies=t.settings.teamMemberPolicies),r.createdAt=t.createdAt,this.syncMustBeRunning(),this.accountHandler.serveraccount=r,this.accountHandler.b5account=new fA.Account(r),_A.getDatabase().saveAccount(r)};this.syncAccountBilling=async j=>{let e=this.dbAccount;if(!e)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync account billing. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return e.accountVersion=j.accountVersion,e.billingStatus=j.billingOverview.status,e.freezesAt=j.billingOverview.accountWillFreezeAt,this.syncMustBeRunning(),this.accountHandler.serveraccount=e,this.accountHandler.b5account=new fA.Account(e),_A.getDatabase().saveAccount(e)};this.syncKeysets=async()=>{let j=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync keysets. Account handler client could not be created. ${j}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return this.accountHandler.client.getKeysets().then(async e=>{if(this.syncMustBeRunning(),!this.dbAccount)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync keysets. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return _A.getDatabase().replaceAccountKeysets(this.dbAccount,e)})};this.syncVaults=async j=>{if(!this.dbAccount?.id)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync vaults. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return _A.getDatabase().getAllVaultsForAccount(this.dbAccount.id).then(async e=>{let t={};for(let n of e)t[n.uuid]=n;let r=!1,a=[];for(let n of j){let o=n.uuid,i=t[o];if(!i){r=!0,a.push(this.downloadVault(n));continue}(i.attrVersion!==n.attrVersion||i.accessVersion!==n.accessVersion)&&(r=!0,a.push(this.syncVaultAttrs(i,n.accessVersion))),i.contentVersion!==n.contentVersion&&(r=!0,a.push(this.syncVaultContent(i))),delete t[o]}for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;let o=t[n];if(!o?.id)throw new q.LoggableError({errorClass:Qr,message:E`Unable to delete vault during sync. Vault id was undefined.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});a.push(_A.getDatabase().deleteVault(o.id,({deletedItemIds:i})=>{o.account_id&&Xt.handleDbUpdates({accountId:o.account_id,deletedItemIds:i,upsertedItemIds:[]})})),r=!0}return Promise.all(a).then(()=>r)})};this.syncManagedApplications=async()=>{try{await this.managedApplicationsSyncer.syncManagedVaultItems()}catch{}};this.syncItemTemplates=async()=>{let j=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync item templates. Account handler client could not be created. ${j}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let e=await this.accountHandler.client.getItemTemplates();if(this.syncMustBeRunning(),!this.dbAccount)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync item templates. DB Account could not be found`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return _A.getDatabase().saveTemplates(this.dbAccount,e)};this.syncItemUsage=async j=>{let t=((a,n)=>a.reduce((o,i,s,l)=>s%n?o:o.concat(l.slice(s,s+n)),[]))(j,100),r=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync item usage. Account handler client could not be created. ${r}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});for(let[,a]of t.entries())await this.accountHandler.client.postItemUsage([a]),await _A.getDatabase().markItemUsageSynced([a])};this.downloadVault=async j=>{let e,t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to download vault during sync. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return this.accountHandler.client.getVault(j.uuid).then(async r=>{if(e=r,!this.dbAccount?.id)throw new q.LoggableError({errorClass:Qr,message:E`Unable to download vault during sync. DB Account could not be found`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return e.account_id=this.dbAccount.id,e.accessVersion=j.accessVersion,e.contentVersion=0,delete e.access,this.syncMustBeRunning(),_A.getDatabase().saveVault(e)}).then(async()=>this.syncVaultContent(e))};this.syncVaultAttrs=async(j,e)=>{let t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync vault attributes. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});return this.accountHandler.client.getVault(j.uuid).then(async r=>(j.accessVersion=e,j.type=r.type,j.createdAt=r.createdAt,j.updatedAt=r.updatedAt,j.encAttrs=r.encAttrs,j.combinedAccess=r.combinedAccess,j.archivedKeys=r.archivedKeys,j.attrVersion=r.attrVersion,j.clientAccess=r.clientAccess,j.activeItemCount=r.activeItemCount,this.syncMustBeRunning(),_A.getDatabase().saveVault(j)))};this.syncVaultContent=async j=>{if(this.syncMustBeRunning(),!this.accountHandler.client?.CTX)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync vault content. CTX is undefined.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let e;return cA.getVaultItems(this.accountHandler.client.CTX.session,j.uuid,j.contentVersion).then(async t=>(this.syncMustBeRunning(),e=t,_A.getDatabase().updateItemsFromServer(j,e,({deletedItemIds:r,upsertedItemIds:a})=>{j.account_id&&Xt.handleDbUpdates({accountId:j.account_id,deletedItemIds:r,upsertedItemIds:a})}))).then(async()=>{if(!e.batchComplete)return this.syncVaultContent(j)})};this.syncPolicies=async j=>{let e=bn();if(!Hm.isValidAccountType(this.accountHandler.b5account.type))return!1;let t=await e.getPoliciesVersion(this.accountHandler.uuid),r=j.policiesVersion===t&&!(t!==0&&await e.isEmpty());if((await e.initializePolicies([this.accountHandler],{skipFetch:r})).length>0){let n=await bn().resolveSettings({});Rj("settings-page-changed",n)}return!0};this.syncKolideApps=async j=>{if(!j.kolideAppsVersion)return!1;console.info(`\u{1F4E5} Syncing Device Trust Apps for account ${this.accountHandler.uuid}`);let e=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync kolide app list. Account handler client could not be created. ${e}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let t=this.dbAccount?{uuid:this.dbAccount.uuid,name:this.dbAccount.name}:void 0;if(!t)throw new q.LoggableError({errorClass:Qr,message:E`Unable to run syncer. Account could not be found`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let r=this.dbAccount?.kolideAppsVersion??0;if(j.kolideAppsVersion!==r){console.info(`\u{1F4E5} Updating local Device Trust from version ${r} to version ${j.kolideAppsVersion}`);let a=await this.accountHandler.client.getKolideApps(),n=kZj(a.definition,t);if(!n)return!1;`${t.uuid}${t.name}`,hj.accountHasFlag(this.accountHandler.uuid,"frameworks-dt4a-allow-disabled")&&(n.enabled=!0),await _A.getDatabase().removeKolideAppsForAccount(n),await _A.getDatabase().saveKolideAppsForAccount(t,n,j.kolideAppsVersion);let o=await la();return o?o.appListChanged(n.account,n.appList):console.info("\u{1F6AB} Could not get Device Trust Cache"),!0}return console.info(`\u{1F4E5} Local Device Trust version ${r} matched server version ${j.kolideAppsVersion}`),!1};this.accountHandler=j,this.managedApplicationsSyncer=e,this.isRunning=!1}async run(j){j.includes(0)&&(j=Object.values(JD).filter(r=>typeof r=="number"));let e=j.includes(0)?["all"]:j.map(r=>JD[r]);console.info(`\u{1F4E5} Sync started for account ${this.accountHandler.uuid} - syncing ${e.join(", ")}`),performance.mark("sync-start");let t={accountUpdated:!1,alreadyRunning:this.isRunning,itemTemplatesUpdated:!1,itemUsageUpdated:!1,keysetsUpdated:!1,vaultsUpdated:!1,billingUpdated:!1,newDeviceEnrollment:!1,policiesUpdated:!1,managedCredentialsUpdated:!1,managedCredentialsPoliciesUpdated:!1};if(t.alreadyRunning)return console.info(`Syncer already running for account <${this.accountHandler.uuid}>`),t;await _A.upgradingPromise(),this.isRunning=!0;try{let r=await _A.getDatabase().findAccountByUUID(this.accountHandler.uuid);if(!r)throw new q.LoggableError({errorClass:Qr,message:E`Unable to run syncer. Account with the given UUID could not be found.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});this.dbAccount=r;let a=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to run syncer. Account handler client could not be created. ${a}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});if(!this.accountHandler.client?.CTX)throw new q.LoggableError({errorClass:Qr,message:E`Unable to run syncer. Account handler client CTX was undefined.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let{language:n,languageChanged:o,shouldCachePasskeyIds:i}=YA();if(o)if(this.accountHandler.client)this.accountHandler.client.CTX.session.setLanguage(n);else throw new q.LoggableError({errorClass:Qr,message:E`Unable to run syncer. Failed to set language.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let s=this.accountHandler?.client?.CTX?.account?.subscription?.tier?.features,l=await this.accountHandler.client.getAccountOverview();if(j.includes(1)){let m=await this.accountHandler.client.getLatestUserPreferences();t.accountUpdated=this.dbAccount.accountVersion!==l.accountVersion||this.dbAccount.userVersion!==l.userVersion||this.dbAccount.userPreferences!==m||!!s&&!YL(this.dbAccount.tier?this.dbAccount.tier?.features:[],s),t.accountUpdated&&(this.dbAccount.billingStatus!==l.billingOverview.status&&(t.billingUpdated=!0),await this.syncAccount(l))}if(!t.accountUpdated&&j.includes(2)&&(t.billingUpdated=this.dbAccount.billingStatus!==l.billingOverview.status,t.billingUpdated&&await this.syncAccountBilling(l)),(j.includes(5)||j.includes(8)||j.includes(3)||t.billingUpdated)&&(t.keysetsUpdated=this.dbAccount.keysetVersion!==l.keysetVersion,t.keysetsUpdated&&await this.syncKeysets()),j.includes(8))if(t.vaultsUpdated=await this.syncVaults(l.vaults||[]),i){let m=hr();I6A(r.uuid,m)}else D6A(r.uuid);if(j.includes(3)&&(t.itemTemplatesUpdated=o||this.dbAccount.templateVersion!==l.templateVersion,t.itemTemplatesUpdated&&await this.syncItemTemplates()),!this.dbAccount?.id)throw new q.LoggableError({errorClass:Qr,message:E`Unable to run syncer. DB Account could not be found`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});if(j.includes(4)){let m=await _A.getDatabase().findItemUsageRequiringSync(this.dbAccount.id);l.supportsItemUsage?(t.itemUsageUpdated=m.length>0,t.itemUsageUpdated&&await this.syncItemUsage(m)):await _A.getDatabase().markItemUsageSynced(m)}j.includes(9)&&l.activationHubOverview?.lastUpdatedAt&&await this.accountHandler.updateActivationHubCacheIfNecessary(l.activationHubOverview.lastUpdatedAt),j.includes(7)&&this.accountHandler.isUnlocked&&(await this.getPendingEnrollmentNotifications()).length>0&&(t.newDeviceEnrollment=!0),j.includes(6)&&await this.syncManagedApplications(),j.includes(10)&&(t.policiesUpdated=await this.syncPolicies(l)),hj.accountHasFlag(this.accountHandler.uuid,"frameworks-kolide-apps-sync")&&j.includes(11)&&await this.syncKolideApps(l);let k=hj.accountHasFlag(this.accountHandler.uuid,"managed-credentials");if(k&&j.includes(12))try{t.managedCredentialsUpdated=await this.syncManagedCredentials(l)}catch(m){We(m)?lj(m):lj(new q.LoggableError({errorClass:Qr,message:E`Failed to sync managed credentials`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0}))}if(k&&j.includes(13))try{t.managedCredentialsPoliciesUpdated=await this.syncManagedCredentialsPolices(l)}catch(m){We(m)?lj(m):lj(new q.LoggableError({errorClass:Qr,message:E`Failed to sync managed credentials policies`}))}if(k&&l.vaults&&this.dbAccount&&l.managedCredentialsPolicyVersion)try{await uM(this.accountHandler)}catch(m){We(m)?lj(m):lj(new q.LoggableError({errorClass:Qr,message:E`Failed to run find and upload managed credentials`}))}performance.mark("sync-end");let u=performance.measure("sync","sync-start","sync-end").duration;return console.info(`\u2705 Sync completed for account ${this.accountHandler.uuid} - took ${Math.round(u)}ms`),this.isRunning=!1,t}catch(r){r instanceof DOMException&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&(Q_A(),console.error("Storage quota exceeded; try freeing up disk space.")),performance.mark("sync-end");let a=performance.measure("sync","sync-start","sync-end").duration;throw console.info(`\u{1F6AB} Sync failed for account ${this.accountHandler.uuid} - took ${Math.round(a)}ms`),this.isRunning=!1,r}}syncMustBeRunning(){if(!this.isRunning)throw new q.LoggableError({errorClass:Qr,message:E`Unable to run syncer. Sync is stopped but must be running.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0})}async getPendingEnrollmentNotifications(){if(!this.accountHandler.client?.CTX)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync device enrollment notifications. CTX is undefined.`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});try{return(await LA.getNotifications(this.accountHandler.client?.CTX)).filter(e=>e.type===cA.NotificationType.DeviceEnrollment)}catch(j){if(q.errors.isNewServerErrorWithStatus(j,q.errors.HTTPStatusCode.notFound))return await lj(new q.LoggableError({errorClass:E`NotificationError`,message:E`Failed to get notifications during sync.`,stackOverrideError:j,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0})),[];throw j}}async syncManagedCredentials(j){if(!this.dbAccount)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync managed credentials. Account could not be found`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let e=this.dbAccount.managedCredentialsVersion;if(!j.managedCredentialsVersion&&!e)return!1;console.info(`\u{1F4E5} Syncing Managed Credentials for account ${this.accountHandler.uuid}`);let t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync managed credentials. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});if(j.managedCredentialsVersion!==e){console.info(`\u{1F4E5} Updating local Managed Credentials from version ${e} to version ${j.managedCredentialsVersion}`);let r=[];return j.managedCredentialsVersion!==void 0?(r=[],`${this.dbAccount.uuid}${this.dbAccount.name}`):`${this.dbAccount.uuid}${this.dbAccount.name}`,await _A.getDatabase().replaceManagedCredentialsForAccount(j.managedCredentialsVersion,this.dbAccount,dM(r,this.dbAccount.uuid)),!0}return console.info(`\u{1F4E5} Managed Credentials version ${e} matched server version ${j.managedCredentialsVersion}`),!1}async syncManagedCredentialsPolices(j){if(!this.dbAccount)throw new q.LoggableError({errorClass:Qr,message:E`Unable to sync managed credentials policies. Account could not be found`,userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});let e=this.dbAccount.managedCredentialsPolicyVersion;if(!j.managedCredentialsPolicyVersion&&!e)return!1;console.info(`\u{1F4E5} Syncing Managed Credentials Policies for account ${this.accountHandler.uuid}`);let t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Qr,message:oj.assertLogSafe(`Unable to sync managed credentials policies. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?Z(this.accountHandler.user.uuid):void 0});if(j.managedCredentialsPolicyVersion!==e){console.info(`\u{1F4E5} Updating local Managed Credentials policies from version ${e} to version ${j.managedCredentialsPolicyVersion}`);let r=await this.accountHandler.client.getManagedCredentialPolicies(),a=await pM(this.accountHandler,r);return await _A.getDatabase().replaceManagedCredentialsPolicies(j.managedCredentialsPolicyVersion,this.dbAccount,a),!0}return console.info(`\u{1F4E5} Managed Credentials policy version ${e} matched server version ${j.managedCredentialsPolicyVersion}`),!1}};function dZj(A,j){let e=new URL(A),t=e.host.split(".");return t[0]=j,e.protocol+"//"+t.join(".")}function kZj(A,j){if(!j){console.warn("No account provided");return}let e=Object.entries(A.app_list).reduce((t,[r,a])=>{let n=cA.KolideApp.decode(a);return n&&(0,Z_A.isRight)(n)?t.push({name:n.right.name,includeUrlPatterns:n.right.include_url_patterns,excludeUrlPatterns:n.right.exclude_url_patterns}):n&&console.warn(`Invalid app entry for key ${r}`,n.left),t},[]);return{account:j,enabled:A.enabled,appList:e}}var Rk=W(aA()),uZj=Rk.partial({user:Rk.exact(Rk.type({sessionId:q.logsafe.LoggableStringC,authMethods:q.logsafe.LoggableStringC}))}),pZj=Rk.partial({app:Rk.exact(Rk.type({ophConnection:q.logsafe.LoggableStringC}))}),lHt=Rk.intersection([uZj,pZj]);function UD(A){return A?E`yes`:E`no`}var Ta=W(aA()),mZj=Ta.type({uuid:Ta.string,clientName:Ta.string,clientVersion:Ta.string,locationCity:Ta.union([Ta.string,Ta.undefined],"locationCity"),locationCountry:Ta.union([Ta.string,Ta.undefined],"locationCountry"),name:Ta.union([Ta.string,Ta.undefined],"deviceName")},"DeviceForEnrollment"),EZj=Ta.keyof({SELECTING_VERIFIER:null,WAITING_FOR_CODE:null,PENDING_VALIDATION:null,SUCCESS:null}),BZj=Ta.exact(Ta.type({enrollmentUuid:Ta.string,status:EZj,device:mZj},"DeviceEnrollment")),A9A=Ta.exact(Ta.type({accountUuid:Ta.string,accountName:Ta.string,enrollments:Ta.array(BZj)}),"PendingEnrollmentsForAccount");var wg=W(aA()),j9A=(A,j,e)=>({kid:gZj(e),enc:Tt,cty:"b5+jwk+json",data:A,iv:j});function gZj(A){switch(A){case"sso":return"1P_SSO_ENROLLMENT_TRANSPORT_KEY";case"webauthn":return"1P_WEBAUTHN_ENROLLMENT_TRANSPORT_KEY"}}var e9A=wg.exact(wg.type({ttl:wg.number,enrollments:wg.array(A9A)},"CachedEnrollments"));var JM="enrollments",hZj=1e3*30,qZj=3;async function UM(A,j){if(!j?.forceRefresh){let t=FZj();if(t&&t.size>0)return t}let e=await GZj(A);return t9A(e),e}async function kb(A,j){if(!j.client?.CTX)throw new Error("Missing CTX for canceling pending device enrollment");try{await j.client.cancelPendingDeviceEnrollment(A),Ed(void 0),ce.removeItem(JM)}catch(e){console.error(`Could not delete pending device enrollment ${A}: ${e instanceof Error?e.message:"unknown error"}`)}}async function vZj(A){if(!A.client||!A.client.CTX||!A.user){yn(new q.LoggableError({errorClass:E`GetDeviceCredentials`,message:E`Insufficient context, client, or user for enrollment`}),E`failed to decrypt Credential Bundle during enrollment`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0);return}let j=A.getDeviceCredentials();if(j.isErr()||!j.value.deviceKey){yn(new q.LoggableError({errorClass:E`GetDeviceCredentials`,message:E`Failed to get device credentials`}),E`failed to decrypt Credential Bundle during enrollment`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0,{isDeviceCredentialsPresent:UD(!!A.serveraccount.deviceCredentials),isDeviceKeyUUIDPresent:UD(!!A.serveraccount.deviceCredentials?.deviceKeyId)});return}try{if(Oe()){let a=hg(),n=await LA.getEncryptedCredentialBundle(A.client.CTX,j.value.deviceKeyId);return(await a.decrypt(A.serveraccount,j.value.deviceKeyId,n)).credentialBundle}let e=await LA.getEncryptedCredentialBundle(A.client.CTX,j.value.deviceKeyId);return await(await vs.fromObfuscated(j.value.deviceKey,A.uuid,A.user.uuid)).decryptCredentialBundle({kid:e.encCredentials.kid,enc:e.encCredentials.enc,cty:e.encCredentials.cty,data:e.encCredentials.data,iv:e.encCredentials.iv})}catch(e){yn(e,E`failed to decrypt Credential Bundle during enrollment`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0);return}}async function xZj(A,j,e){if(q.errors.isNewServerErrorWithStatus(j,q.errors.HTTPStatusCode.notFound)){let t=T6A();t&&t.enrollmentUuid===e.enrollmentUuid&&(await Jk({type:"cancelled",accountUuid:t.accountUuid,enrollmentUuid:t.enrollmentUuid}),await kb(t.enrollmentUuid,A));return}if(j.message.toLowerCase()==="invalid code used"){if(A.client?.CTX?.session&&(await cA.markSignatureInvalid(A.client.CTX.session,e.enrollmentUuid),await Qn(1e3)),e.attempts>=qZj){await kb(e.enrollmentUuid,A),Ed({...e,error:{type:"TooManyAttempts"}}),await Jk({type:"failed",accountUuid:e.accountUuid,enrollmentUuid:e.enrollmentUuid,content:{type:"TooManyAttempts"}});return}let t=q.generateDeviceEnrollmentCode(),r={...e,verificationCode:t,attempts:e.attempts+1};Ed(r),await Jk({type:"showNewCodeViewModel",accountUuid:r.accountUuid,enrollmentUuid:r.enrollmentUuid,content:{verificationCode:r.verificationCode}}),await XM(r,A);return}yn(j,E`failed to enrollTrustedDevice`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0,q.errors.isServerError(j)?{serverErrorReason:oj.assertLogSafe(j.message)}:{}),await kb(e.enrollmentUuid,A),Ed({...e,error:{type:"UnhandledError",message:j.message}}),await Jk({type:"failed",accountUuid:e.accountUuid,enrollmentUuid:e.enrollmentUuid,content:{type:"UnhandledError"}})}async function XM(A,j){if(!j.client?.CTX||!j.user){Ed({...A,error:{type:"AccountNotFound"}}),await Jk({type:"failed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid,content:{type:"AccountNotFound"}});return}if(!A.verificationCode){let t={...A,attempts:1,verificationCode:q.generateDeviceEnrollmentCode()};Ed(t),await Jk({type:"showNewCodeViewModel",accountUuid:t.accountUuid,enrollmentUuid:t.enrollmentUuid,content:{verificationCode:t.verificationCode}}),await XM(t,j);return}let e=await vZj(j);if(!e){Ed({...A,error:{type:"UnhandledError"}}),await Jk({type:"failed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid,content:{type:"UnhandledError"}});return}try{await fZj(j,{setupCode:A.verificationCode,email:j.serveraccount.email,signInAddress:j.serveraccount.signinAddress,enrollmentUuid:A.enrollmentUuid},e,"sso")}catch(t){if(t instanceof Error)return xZj(j,t,A);await kb(A.enrollmentUuid,j),Ed({...A,error:{type:"UnhandledError"}}),await Jk({type:"failed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid,content:{type:"UnhandledError"}});return}Ed(void 0),t9A(new Map),await Jk({type:"dismissed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid})}async function fZj(A,j,e,t){if(!A?.client)throw new Error("Client is undefined");if(!A.client.CTX)throw new Error("Client CTX is undefined");let r=A.client.CTX,{enrollmentUuid:a,email:n}=j,o=async(d,k)=>{let u=j9A(d,k,t);return MeA(r,a)(u)},s={credentialBundle:await e.__crypto_internal.serialize(),sendMsgA:HeA(r,a),recvMsgB:TeA(r,a),sendAuthA:KeA(r,a),recvAuthB:SeA(r,a),sendCredentials:o},l={useCase:t,...j,...s,email:n.toLocaleLowerCase()};await tA.enrollTrustedDevice(l)}async function GZj(A){let j=new Map;for(let e of A){if(!e.client||e.mustMigrateAuth)continue;let t=await e.client.getPendingDeviceEnrollments();t&&j.set(e.uuid,{accountName:e.b5account.name,accountUuid:e.uuid,enrollments:t.map(bZj)})}return j}function t9A(A){let j={ttl:new Date().getTime()+hZj,enrollments:[...A.values()]};try{ce.setItem(JM,JSON.stringify(j))}catch{console.error("Error saving enrollments.")}}function FZj(){try{let A=ce.getItem(JM);if(!A)return;let j=q.decode(A,q.json.pipe(e9A)).unwrap();if(j.ttl<new Date().getTime()){ce.removeItem(JM);return}return new Map(j.enrollments.map(e=>[e.accountUuid,e]))}catch(A){yn(new q.LoggableError({errorClass:E`GetPendingDeviceEnrollments`,message:E`Failed to load enrollments from sessionStorage`,stackOverrideError:A instanceof Error?A:void 0}),E`Failed to load enrollments from extension cache`);return}}var bZj=({enrollmentUuid:A,device:j,status:e})=>({device:{uuid:j.uuid,clientName:j.clientName,clientVersion:j.clientVersion,locationCity:j.locationCity,locationCountry:j.locationCountry,name:j.name},enrollmentUuid:A,status:e}),T6A=()=>{let A=vj.getItem("activeDeviceEnrollment");if(A)return JSON.parse(A)},Ed=A=>{A?vj.setItem("activeDeviceEnrollment",JSON.stringify(A)):vj.removeItem("activeDeviceEnrollment")};async function Jk(A){await Rj("trusted-device-enrollment-complete",A)}async function r9A(A){let e=(await UM([A],{forceRefresh:!0})).get(A.uuid);if(!e||e.enrollments.length===0)return;Rj("new-device-enrollments",void 0),!await K6A()&&(A.hasUnseenDeviceEnrollments=!0,ln({updateIconOnly:!0}),yZj(e))}function yZj(A){let j=$Zj();for(let e of A.enrollments)e.status==="SELECTING_VERIFIER"&&n9A(wZj(A.accountName,e,!!j),e.enrollmentUuid,j)}function $Zj(){if(HS().type==="Connected")return()=>{ub()}}function wZj(A,j,e){let t=j.device.locationCity&&j.device.locationCountry?`${j.device.locationCity}, ${j.device.locationCountry}`:"an unknown location",r=j.device.name||j.device.clientName||nA("Unknown Device");return e?nA("{deviceName} near {location} is trying to sign in to your {accountName} account.",{deviceName:r,location:t,accountName:A}):nA("{deviceName} near {location} is trying to sign in to your {accountName} account. Open 1Password in your browser's toolbar to view.",{deviceName:r,location:t,accountName:A})}function a9A(){_.markAllDeviceEnrollmentsSeen(),ln({updateIconOnly:!0})}var o9A=async A=>{if(A.isLocked)return;await Ij.loadAndDecryptItemCache();let j=await _.getFrozenAccountsInfo();return i9A(j),Promise.resolve()};async function XD(A,j){if(ie.getDesktopAppState().type==="Connected"||ie.getDesktopAppState().type==="Connecting")return;let e=A.accountUUID;if(e&&A.CTX)switch(j){case"All":QCA(e,await LA.getInitializationExport(A.CTX),A.CTX.session.auth?.srpX);break;case"Request":ZCA(e,A.CTX.session.requestId);break;default:ue(j)}}async function s9A(){if(["Connected","Connecting"].includes(ie.getDesktopAppState().type))return;let A=_.getAccountHandlers.filter(j=>j.isUnlocked);for(let j of A){if(!j.masterKey){console.warn("Missing JWK when attempting to save context init cache");continue}let e={accountUuid:j.uuid,masterKey:await j.masterKey.exportJwk()};j.client?.CTX&&j.hasSignedInClient&&(e.srpX=j.client.CTX.session.auth?.srpX,e.session={...await LA.getInitializationExport(j.client.CTX)}),B5(e)}}async function VM(A,j,e,t){let r=await Hk(),a=await S6A(A,r,j);return new Dv({signinAddress:A,signedInContext:a,deviceUuid:r,requestDelegatedSession:e,srpX:t})}var l9A=A=>{if(!A.client?.CTX)throw new Error("Missing CTX for setting detailed vault reporting keys");if(!A.client.CTX.account)throw new Error("Missing account for setting detailed vault reporting keys");fI(A.client.CTX.accountOverview)&&A.client.CTX.loadVaultReportingPubKey()};var c9A=async A=>{if(!A.isLocked)return await Ij.loadAndDecryptItemCache(),VD(),Promise.resolve()};function VD(){Rj("vaults-changed",void 0),zk()}var d9A=(A,j)=>{switch(j.type){case ej.TypePersonal:switch(A){case dt.Type.Individual:return nA("Personal");case dt.Type.Business:return nA("Employee");case dt.Type.Family:default:return nA("Private")}case ej.TypeEveryone:return j.name==="Shared"?nA("Shared"):j.name;case ej.TypeManagedApplications:return nA("Managed");default:return j.name}},M6A=async(A,j)=>Promise.resolve(A._findVaultWithUUID(j)),_6A=async(A,j)=>A.items?(await Promise.all(A.items.filter(t=>t.vault.uuid===j.uuid&&t.cacheInformation===void 0).map(async t=>t.localId?A.getItem({type:"databaseId",data:t.localId}):void 0))).filter(t=>!!t):Promise.resolve([]);var DZj=[{storageKey:"compromised-sites",importFn:LA.importWatchtowerData,loadFn:LA.loadWatchtowerData,getFn:LA.getWatchtowerData},{storageKey:"2fa-sites",importFn:LA.importTwoFactorSitesList,loadFn:LA.loadTwoFactorSitesList,getFn:LA.getTwoFactorSitesList},{storageKey:"passkey-sites",importFn:LA.importPasskeySitesList,loadFn:LA.loadPasskeySitesList,getFn:LA.getPasskeySitesList}],WD;async function WM(){if(WD!==void 0){await WD;return}let A=DZj.map(async j=>{let e=!1;try{let t=ce.getItem(j.storageKey);t!==void 0&&(j.importFn(t),e=!0)}catch{console.error(`Error importing Watchtower data from session storage with key ${j.storageKey}`)}return(async()=>{if(await j.loadFn(),e===!1){let t=j.getFn();Object.keys(t).length>0&&ce.setItem(j.storageKey,JSON.stringify(t))}})()});WD=Promise.all(A),await WD,WD=void 0}var pb=E`CreateSystemVaultError`,k9A=E`GetUserCountError`,PZj=E`GetPendingInvitesError`,tE=class A{constructor(j,e){this.markAccountDeviceEnrollmentsSeen=()=>{this.hasUnseenDeviceEnrollments=!1};this.credentials=j=>{let e=this.serveraccount;return{...j,email:e.email,signinAddress:e.signinAddress,secretKey:e.secretKey,dSecret:e.dSecret,accountIdentifier:this.accountIdentifier}};this.saveDeviceCredentials=async j=>_.updateAccount(this.serveraccount.uuid,{deviceCredentials:j});this.getDeviceCredentials=()=>this.serveraccount.deviceCredentials?.deviceKey&&this.serveraccount.deviceCredentials.deviceKeyId?Oj(this.serveraccount.deviceCredentials):TA(void 0);this.hasDeviceCredentials=()=>this.serveraccount.deviceCredentials!==void 0;this.hasDeletePermission=()=>!!this.client?.CTX?.user?.hasPermission(fA.Permission.DeleteTeam);this.verifyAccountPassword=async j=>{if(!this.serveraccount.id)throw new Error("Missing ID for server account.");let e=await Hk(),t=L6A(this.serveraccount,e);if(!t.user)throw new Error("Missing user.");t.user.password=j;let r=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(r.length>0)try{return await this.decryptKeysets(t,r),!0}catch{return!1}return!1};this.unlockWithCredentialBundle=async({auth:j,ssoAuth:{signInTokenDetails:e},user:t},r)=>{if(!this.serveraccount.id)throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Missing ID for server account.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(!j)throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Missing auth in OIDC response.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(this.serveraccount.userUUID!==t.userUuid||this.serveraccount.email!==t.email)throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Provided OIDC user does not match server account user.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let a=this.getDeviceCredentials();if(a.isErr()||!a.value.deviceKey)throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Failed to fetch device credentials during B5X unlock.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let n;Oe()?n=(await hg().decrypt(this.serveraccount,a.value.deviceKeyId,j)).credentialBundle:n=await(await vs.fromObfuscated(a.value.deviceKey,this.uuid,this.serveraccount.userUUID)).decryptCredentialBundle(j.encCredentials);let o={email:t.email,userUuid:t.userUuid,userAuth:j.userAuth,secretKeyFormat:j.accountKeyFormat,secretKeyUuid:j.accountKeyUuid,credentialBundle:n},i=await LA.signInWithCredentialBundle(r,o,e.token,{isDesignatedAsPublic:!1});if(i.type!=="verified_context")throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Unexpected signInResult when authenticating post-registration.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let{context:s}=i,l=new Dv({signedInContext:s,signinAddress:this.serveraccount.signinAddress,deviceUuid:this.deviceJson.uuid});this.setClient(l);let d=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(d.length>0)try{await LA.decryptKeysets(s,d)}catch{throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Failed to decrypt keysets.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}else try{await this.startSync(),d=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id),await LA.decryptKeysets(s,d)}catch{throw new q.LoggableError({errorClass:E`UnlockError`,message:E`Failed to decrypt keysets.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}return St("AppUnlock",{unlock_method:"SSO",status:"SUCCESS"},this.uuid),this.context=s,this};this.unlockWithAccountPassword=async j=>{if(!this.serveraccount.id)throw new Error("Missing ID for server account.");let e=await Hk(),t=L6A(this.serveraccount,e);if(!t.user)throw new Error("Missing user.");t.user.password=j;let r=this.credentials({accountPassword:j});this.restrictFailedLoginsPolicyLockout=void 0;let a=!1,n=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(n.length>0)try{if(Hm.isValidAccountType(this.serveraccount.type)){let o=bn();if(await o.initializePolicies([this],{skipFetch:!0}),a=o.getPolicyForAccount(this.uuid,"restrict-failed-login-attempts")?.definition?.enabled===!0,a)throw new Error("RFLA policy is enabled")}await this.decryptKeysets(t,n),St("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},this.serveraccount.uuid)}catch{try{await this.startSync({type:"Credentials",data:{credentials:r}})}catch(o){return a&&(o instanceof pu&&o.reason===Ci.failedLoginAttemptLockout?this.restrictFailedLoginsPolicyLockout=0:o instanceof mu&&o.code===Tc.unexpectedFetchError&&(this.restrictFailedLoginsPolicyLockout=1)),this}if(!this.serveraccount.secretKey)throw new Error("Missing secret key for server account.");n=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id),t.user=new fA.OldUser({uuid:this.serveraccount.userUUID,email:this.serveraccount.email,password:j,secretKey:Ya.SecretKey.fromInput(this.serveraccount.secretKey)});try{await this.decryptKeysets(t,n),St("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},this.serveraccount.uuid)}catch{return this}}else try{await this.startSync({type:"Credentials",data:{credentials:r}}),n=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id),await this.decryptKeysets(t,n),St("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},this.serveraccount.uuid)}catch{return await this.lock(!1),this}return this.context=t,this};this.lock=async(j=!0)=>{if(this.items=void 0,this.templates=void 0,this._vaults=void 0,this.vaultsById=void 0,this._hasUnseenDeviceEnrollments=!1,this._signInPromise=void 0,this.context&&(LA.clearAllCachesForContext(this.context),this.context=void 0),this._nakedDomainCache.clear(),this._brexCardCache.clear(),this._activationHubCache.clear(),Object.keys(this._integrationProviderTokenCache).forEach(e=>{let t=e;this._integrationProviderTokenCache[t].clear()}),this.syncer&&(this.syncer.stop(),this.syncer=void 0),!!this.client)try{await this.client.signOut()}finally{this.destroyClient(),j&&globalThis.dispatchEvent(new CustomEvent(Rg,{detail:{accountUuid:this.uuid}}))}};this.destroyClient=()=>{this._client=void 0};this.loadAndDecryptItemsLogger=new ht("\u{1F513} Load and decrypt item overviews");this.loadAndDecryptItemOverviews=async()=>{if(this.isLocked)throw new q.LoggableError({errorClass:E`LoadAndDecryptItemOverviewsError`,message:E`loadAndDecryptItemOverviews failed: Must be unlocked.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(this.loadAndDecryptItemsLogger.info(`Beginning to load and decrypt item overviews for account with UUID ${this.uuid}.`),!this.serveraccount.id)throw new q.LoggableError({errorClass:E`LoadAndDecryptItemOverviewsError`,message:E`loadAndDecryptItemOverviews failed: Missing ID for server account.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let j=js();this.decryptingOverviews=j.promise;let e={},t=await _A.getDatabase().getAllVaultsForAccount(this.serveraccount.id),r=[];for(let m of t){if(!m.id){console.error("Unable to load vault due to missing ID.");continue}e[m.uuid]=m.id,r.push(this.parseVault(this.b5account.type,m))}let a=await Promise.all(r);this._vaults=a;let n;this._brexCardCache.hasCards&&(n=CZj(),n.localId?(e[n.uuid]=n.localId,this._vaults.push(n)):console.error("Unable to load brex vault due to missing ID."));let o;try{this.context&&(o=await B9A(this.serveraccount.uuid,this.context))}catch(m){We(m)?lj(m):lj(new Pe({errorClass:Dl,message:E`Error getting managed credentials and vault when loading item overviews.`,metaData:{account:{accountUuid:Z(this.uuid)}}}))}o?.vault.localId&&(e[o.vault.uuid]=o.vault.localId,this._vaults.push(o.vault)),this._vaults.sort(a6.vaultSort);let i={};for(let m of a){let I=e[m.uuid];i[I]=m}this.vaultsById=i,await this.loadNakedDomainCache();let s=await _A.getDatabase().getItemOverviewsForAccount(this.serveraccount.id);this.loadAndDecryptItemsLogger.info(`${s?.length} dbItems found for server account ID ${this.serveraccount.id}`);let l=[];for(let m of s){if(!m.vault_id){console.warn(`Missing vault ID for server account ID ${this.serveraccount.id}`);continue}let I=this.vaultsById[m.vault_id];I.type===fA.Vault.TypeGeneratedPasswords||I.type===fA.Vault.TypeSystem||l.push(this.itemFromDatabase(I,m))}let d=await Promise.all(l);this.items=d,LSA(),n!==void 0&&this.items.push(...this._brexCardCache.cards(this.uuid,n)),o?.vault&&this.items.push(...o.items),this.loadAndDecryptItemsLogger.info(`${this.items?.length} items were loaded from the database for server account ID ${this.serveraccount.id}!`);let k=await _A.getDatabase().getTemplates(this.serveraccount.id),u=xa.vaultItemTemplatesFromAPI(k);this.templates=u.filter(m=>m!==null&&typeof m<"u"),await this.saveNakedDomainCache(),await this.loadIntegrationProviderTokenCache(["fastmail","brex"]),this.loadAndDecryptItemsLogger.info(`Finished loading and decrypting item overviews for account with UUID ${this.uuid}`),j.resolve()};this.getItem=async j=>{if(j.type!=="databaseId"&&j.type!=="cachedItem"&&j.type!=="managedCredential"){console.warn("Asked to load a type that is not either a database, cached item, or managed credential from an account handler");return}if(j.type==="cachedItem")return this.items?.find(e=>e.uuid===j.data.id&&e.cacheInformation?.provider===j.data.type);if(SK(j)){let e=this.items?.find(t=>t.uuid===j.data.uuid)?.vault;if(!e){console.warn("Could not find vault for managed credential.");return}if(!this.context){console.warn("Could not find context for managed credential.");return}return g9A(this.serveraccount.uuid,this.context,e,j)}return _A.getDatabase().getItem(j.data).then(async e=>{if(!this.vaultsById||!e?.vault_id){console.warn("Asked to load item with insufficient vault ID from an account handler");return}let t=this.vaultsById[e.vault_id];return this.itemFromDatabase(t,e)})};this.itemFromDatabase=async(j,e)=>{let t=await xa.vaultItemFromAPI(e,j);return t.overview.b5AccountUUID=this.serveraccount.uuid,t.localId=e.id,t.vault=j,t.urlToNakedDomains=this.getNakedDomainsForItem(t),t};this.setClient=j=>{this._client=j,this._client.onClientInvalidated=this.onClientInvalidated,this._client.onServerChanged=this.onServerChanged,XD(this._client,"All")};this.startSync=async(j,e)=>A6.asyncObserve("startSync","accountHandler",async t=>this.syncer?this.runSyncer([0]).catch(r=>_s(this,r)):A6.asyncObserve("startSync-newSyncer","accountHandler",async r=>{await this.signin(j),ts.info("Collecting account-based flags on account sync."),await iHA([this],r).finally(async()=>{let a=this.createManagedApplicationsSyncer();return this.syncer=new RM(this,a),this.runSyncer([0]).catch(n=>_s(this,n))})},t),e);this.createManagedApplicationsSyncer=()=>{let j=new zM(this),e=new LM(this),t=this.client?.CTX?.user;return new NM(e,j,t)};this.signin=async j=>{if(!this.hasSignedInClient){if(!j)throw new q.LoggableError({errorClass:E`SigninError`,message:E`Attempted to run signin but no initData was provided`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});return this._signInPromise=(async()=>{try{if(j.type==="Credentials"&&this.serveraccount.id){let{credentials:e,additionalSignInOptions:t}=j.data,r=await _A.getDatabase().hasGeneratedPasswordVault(this.serveraccount.id),a=await kd({credentials:e,device:this.deviceJson,onClientInvalidated:this.onClientInvalidated,onServerChanged:this.onServerChanged,accountAttrs:r?void 0:[cA.AccountAttrs.Groups],additionalSignInOptions:t});this.setClient(a)}else if(j.type==="Other"){let{client:e}=j.data;this.setClient(typeof e=="function"?await e():e)}else throw new q.LoggableError({errorClass:E`SigninError`,message:E`Attempted to run signin but no initData was provided`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});await this.updateAccountFromContext()}finally{this._signInPromise=void 0}})(),this._signInPromise}};this.waitForClient=async()=>{if(this.client)return this.client;if(this._signInPromise===void 0)throw new Pe({errorClass:E`AccountHandler`,message:E`waitForClient called, but client does not exist and no sign-in is in progress`});if(await j6.withTimeout(this._signInPromise,30*1e3,"waitForClient"),!this.client)throw new Pe({errorClass:E`AccountHandler`,message:E`_signInPromise resolved but client is undefined`});return this.client};this.hasGeneratedPasswordVault=async()=>!!this.serveraccount.id&&!!await _A.getDatabase().getGeneratedPasswordVault(this.serveraccount.id);this.getGeneratedPasswordVault=async()=>(await this.createGeneratedPasswordsVaultIfNeeded(),this._vaults?.find(j=>j.type===fA.Vault.TypeGeneratedPasswords));this.getSystemVaultFromMemory=()=>this._vaults?.find(j=>j.type===fA.Vault.TypeSystem);this.getManagedVaultFromDb=async()=>{let j=this._vaults?.find(r=>r.type===fA.Vault.TypeManagedApplications),e=this.serveraccount.id;if(!j||!e)return;let t=await _A.getDatabase().getVaultWithUUID(e,j.uuid);if(t)return await this.parseVault(this.b5account.type,t)};this.runSyncer=async j=>{if(!this.syncer)return;if(this.mustMigrateAuth){await this.syncer.run([5,1]).finally(async()=>qt.updateConnectivityStatus());return}let e=await this.syncer.run(j).finally(async()=>qt.updateConnectivityStatus()),t=await this._brexCardCache.update(async()=>{let r=await this.getIntegrationCredentials("brex");if(r.length>0){let a=r[0].accountId,n=await this.getIntegrationProviderAccessToken(a,"brex");if(n)return{accountId:a,accessToken:n.accessToken,clientId:n.context.clientId,clientSecret:n.context.clientSecret}}});if(this.isUnlocked){e.billingUpdated&&await o9A(this),e.newDeviceEnrollment&&await r9A(this),(e.vaultsUpdated||e.itemTemplatesUpdated||t.itemsUpdated)&&(await this.loadAndDecryptItemOverviews(),await c9A(this)),this.uploadWatchtowerReports();try{l9A(this),this.uploadVaultItemSnapshots()}catch(r){console.error("There was an issue uploading vault item snapshots to server:",r)}}};this.saveItem=async(j,e)=>{let t=await this.getVaultWithUUID(j.vault.uuid);if(!t){let r=Z(`vault doesn't exist: ${j.vault.uuid}`);throw this.createSaveError(r)}if(rp(t)){if(await this.reinitializeClient(),!this.client)throw this.createSaveError(E`No api client for save item`);return await h9A(this.client,this.serveraccount,j),j}return await this.saveItems(t,[j],e),j};this.saveItems=async(j,e,t=()=>QeA(E`"onSyncerFinished" callback omitted for "saveItems"`))=>{if(await this.reinitializeClient(),!this.client)throw this.createSaveError(E`undefined client`);let r,a;try{r=await this.client.saveItems(e,j)}catch(n){a=n}if(this.isVersionError(a)&&(r=await this.handleVersionAndRetry(e,j.uuid)),!r)throw this.createSaveError(E`nothing saved by client`,a);return await this.runSyncer([8]).catch(n=>_s(this,n)).then(t),this.sendItemSnapshot(r,j.uuid),e};this.createSaveError=(j,e)=>{let t="no loggable error provided";Kc(e)?t=`${e.reason} ${e.code}`:R0(e)?t=`${e.code}`:(Eu(e)||e instanceof Bd)&&(t=e.message);let r=Z(`Unable to save item: ${j.str} - ${t}`);return new q.LoggableError({errorClass:E`SaveItemError`,message:r,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})};this.getKolideAgentEnrollmentToken=async()=>this.client?.CTX?this.client.CTX?.session?await cA.getKolideAgentEnrollmentToken(this.client.CTX.session).then(e=>({type:"success",data:e})).catch(()=>({type:"failure",code:Z("unknown-fetch-b5-fail"),message:E`getKolideAgentEnrollmentToken failed while making request`})):{type:"failure",code:Z("missing-session"),message:E`getKolideAgentEnrollmentToken could not make request`}:{type:"failure",code:Z("missing-CTX"),message:E`getKolideAgentEnrollmentToken could not make request`};this.sendItemSnapshot=async(j,e)=>{let t=await this.getVaultWithUUID(e);if(!t)throw this.createSaveError(E`vault missing`);for(let r of await xa.vaultItemsFromAPI(j,t))this.sendItemSnapshotToServer(r).catch(a=>{console.error("There was an issue uploading vault item snapshots to server:",a)})};this.handleVersionAndRetry=async(j,e)=>{try{await this.runSyncer([8])}catch{throw this.createSaveError(E`sync failed during save`)}let t=await this.getVaultWithUUID(e);if(!t)throw this.createSaveError(E`vault missing`);if(!this.client)throw this.createSaveError(E`client was lost during save`);let a=(await Promise.all(j.map(async i=>Rr(i.uuid,e)))).filter(i=>!!i),n=j.map(i=>{let s=a.find(l=>l.uuid===i.uuid);return i.itemVersion=s?s.itemVersion:i.itemVersion,i}),o;try{o=await this.client.saveItems(n,t)}catch(i){throw console.error("Account Handler: failed to save after sync:",i),this.createSaveError(E`save failed after sync`,i)}return o};this.isVersionError=j=>q.errors.isServerError(j,void 0,q.errors.HTTPStatusCode.conflict);this.createDelegateSessionContextInitialization=async j=>{if(!this.client)throw console.error("Account handler doesn't have a client so it can't create a delegated session"),new Error("Account handler doesn't have a client so it can't create a delegated session");return this.client.getDelegateSessionInit(j)};this.signDeviceTrustPublicKey=async j=>{if(!this.client)throw console.error("Account handler doesn't have a client so it can't sign device trust public key"),new Error("Account handler doesn't have a client so it can't sign device trust public key");return this.client.signDeviceTrustPublicKey(j)};this.createAccountVaultOverview=()=>{let j=this.serveraccount,e=[];for(let t of this.vaults){if(!this.user)throw new q.LoggableError({errorClass:E`AccountHandler`,message:E`Missing user`,userUuid:void 0});if(rp(t)){let r=t.getCombinedAcl();if(r&&!Xj.includes(r,le.CreateItem))continue}else if(!this.user.hasVaultACL(t,fA.vaultACL.CreateItem))continue;e.push({uuid:t.uuid,accountUuid:j.uuid,name:t.name,baseAvatarUrl:j.baseAvatarURL,avatar:t.avatar,fullAvatarUrl:BTA(t.avatar,"",j.avatar,t.type,j.uuid,j.baseAvatarURL),type:t.type})}return{uuid:j.uuid,name:j.name,baseAvatarUrl:j.baseAvatarURL,avatar:j.avatar,fullAvatarUrl:ETA(new fA.Account(j)),type:j.type,vaults:e}};this._findVaultWithUUID=j=>{if(!(!this._vaults||!this.vaults||!this.user)){for(let e of this.vaults)if(e.uuid===j)return e}};this.findVaultWithUUIDAndCreatePermission=j=>{let e=this._findVaultWithUUID(j);if(!(e&&!this.user?.hasVaultACL(e,fA.vaultACL.CreateItem)))return e};this.markItemUsed=async(j,e)=>{if(j.cacheInformation?.provider!=="brex"){if(!this.serveraccount.id)throw new q.LoggableError({errorClass:E`AccountHandler`,message:E`Unable to mark item as used. Missing ID for server account`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});return _A.getDatabase().markItemUsed(this.serveraccount.id,j,j.vault,e)}};this.getVaultItems=async j=>{let e=await _A.getDatabase().getItemOverviewsForVault(j);return(await Promise.all(e.map(async r=>r.id?this.getItem({type:"databaseId",data:r.id}):void 0))).filter(r=>!!r)};this.loadPasswordHistory=async()=>{let j=await this.getGeneratedPasswordVault();if(!j?.localId)throw new q.LoggableError({errorClass:E`AccountHandler`,message:E`Unable to load password history. Invalid generated password vault`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});return this.getVaultItems(j.localId)};this.loadSystemVaultItems=async()=>{let{newlyCreated:j,vault:e}=await this.getOrCreateSystemVault();if(!e?.localId){if(j&&e.activeItemCount===0)return[];throw new q.LoggableError({errorClass:E`SystemVaultError`,message:E`Unable to load system vault items. Invalid system vault`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}return this.getVaultItems(e.localId)};this._getChildAccountRelationship=async j=>{let e="CACHED_CHILD_ACCOUNT_RELATIONSHIPS",t=ce.getItem(e),r=new Map(t?JSON.parse(t):[]),a=r.get(this.uuid);if(a)return a;let n=await LA.getChildAccountRelationship(j);return r.set(this.uuid,n),ce.setItem(e,JSON.stringify(Array.from(r))),n};this.loadPersonItem=async()=>{let e=(await this.loadSystemVaultItems()).find(t=>t.templateUuid==="910");if(e)return e.details};this.shouldShowFreeFamilyAccountNotification=async()=>{if(this.isLocked||!this.client||!this.hasBackOfficeFeature?.familyChildAccounts||this.client.account()?.subscription.status!==jl.Status.Active)return!1;let j=this.client.user();if(!j||Yj.isGuest(j)||j.state!==Yj.State.Active||!this.client.CTX)return!1;try{let{state:e}=await this._getChildAccountRelationship(this.client.CTX);return e===""||e===fA.ChildAccountRelationship.State.Ready}catch(e){return console.error("Unable to determine child account relationship for account:",e),!1}};this.shouldShowEmailPreferencesNotification=()=>{if(this.isLocked||!this.client)return!1;let j=this.client.account(),e=this.client.user();return!j||!e?!1:j.type===fA.Account.Type.Business&&(Yj.isOwner(e)||Yj.isAdmin(e))&&e.newsletterPrefs===0&&!!j.createdAt&&j.createdAt.getTime()<new Date(Date.UTC(2021,5,1)).getTime()};this.getFreeFamilyCode=async()=>{if(!this.client?.CTX)return;let{state:j,code:e}=await this._getChildAccountRelationship(this.client.CTX);switch(j){case"R":return e;case"":return(await LA.createChildAccountRelationship(this.client.CTX)).code;default:return}};this.updateSigninDetails=j=>{this.serveraccount=j};this.setUserState=async j=>_.updateAccount(this.serveraccount.uuid,{userState:j});this.onClientInvalidated=()=>{this.destroyClient(),qt.updateConnectivityStatus()};this.onServerChanged=j=>{if(this.isLocked||!this.syncer||this.syncer.isRunning)return;switch(j?.eventType){case 1:if(!this.user){console.warn("No user object during sync, skipping trelicaAppsUpdated event");break}Xt.invoke("TrelicaAppDataChanged",{accountUuid:this.b5account.uuid,userUuid:this.user?.uuid}).then(t=>{switch(t){case l0.FailedToSync:console.warn("Xam backend failed to process sync event");break;case l0.AccountNotFound:console.warn("Xam backend couldn't find account");break}}).catch(t=>{console.error(t)});break;default:this.runSyncer([0]).catch(t=>_s(this,t))}};this.parseVault=async(j,e)=>{let t=new fA.Vault({uuid:e.uuid,name:"",type:e.type,desc:""});if(t.localId=e.id,t.createdAt=e.createdAt?u9A(e.createdAt):void 0,t.updatedAt=e.updatedAt?u9A(e.updatedAt):void 0,t.attrVersion=e.attrVersion,t.contentVersion=e.contentVersion,t.activeItemCount=e.activeItemCount??t.activeItemCount,t.clientAccess=e.clientAccess??t.clientAccess,!e.combinedAccess)throw new Error("Missing vault combinedAccess information");return t.setCombinedAcl(e.combinedAccess.acl),this.parseAndDecryptVaultAccessRecord(t,e.combinedAccess).then(async r=>(t.setAccessList([r]),t.decryptAttrs(e.encAttrs).then(()=>d9A(j,t)).then(a=>{if(!this.user)throw new Error("Missing user.");return this.user.setVaultAccess(r),t.name=a,t})))};this.parseAndDecryptVaultAccessRecord=async(j,e)=>new Promise((t,r)=>{if(!this.context)throw new q.LoggableError({errorClass:E`AccountHandler`,message:E`Missing context. Unable to parse and decrypt vault: ${Z(j.uuid)}`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let a=new fA.VaultAccess(e);if(!a.encVaultKey)throw new q.LoggableError({errorClass:E`AccountHandler`,message:E`Missing encrypted vault key for vault: ${Z(j.uuid)}`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let n=LA.findDecryptedKeyset(this.context,a.encVaultKey.kid);if(!n)throw new q.LoggableError({errorClass:E`AccountHandler`,message:E`Missing keyset for vault: ${Z(j.uuid)}`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});a.decryptVaultKey(n).then(o=>{o.sn=e.vaultKeySN,a.vaultKey=o,j.activeKey||(j.activeKey=o),t(a)}).catch(o=>{r(o)})});this.loadNakedDomainCache=async()=>{if(this.masterKey&&this.serveraccount.id)try{let j=await _A.getDatabase().getEncryptedCache(this.serveraccount.id,"nakedDomain");if(j?.key==="096f51fd3813"){let e=await this.masterKey.decrypt(j.cache);this._nakedDomainCache.deserializeToCache(q.ab2str(e))}}catch{console.info("Failed to load encrypted cache.")}};this.saveNakedDomainCache=async()=>{if(this.masterKey&&this.serveraccount.id)try{let j=this._nakedDomainCache.serialize(),e=await this.masterKey.encrypt(q.str2ab(j));if(e){let t={account_id:this.serveraccount.id,cache:e,type:"nakedDomain",key:"096f51fd3813"};_A.getDatabase().saveEncryptedCache(t)}}catch{console.info("Failed to save encrypted domain cache.")}};this.getNakedDomainsForItem=j=>{if(j.overview.URLs){let e=j.overview.URLs.map(r=>({url:r.u,nakedDomain:this._nakedDomainCache.get(r.u)})),t={};for(let{url:r,nakedDomain:a}of e)t[r]=a;return t}return j.urlToNakedDomains};this.getIntegrationCredentials=async j=>{if(this.isLocked||this.mustMigrateAuth)return[];try{let t=(await this.loadSystemVaultItems()).filter(a=>a.templateUuid==="800"&&a.state===fA.VaultItem.ItemState.Active&&a.overview.integration===j),r=[];for(let a of t){let n=a.details.sections.find(s=>s.name===j),o=n?.fields?.find(s=>s.n==="accountId"),i=n?.fields?.find(s=>s.n==="refreshToken");if(!o||!i){console.error(`${j} Integration Item ${a.uuid} is malformed.`);continue}r.push({itemUuid:a.uuid,accountId:o.v,refreshToken:i.v})}return r}catch(e){return We(e)&&lj(e),[]}};this.getIntegrationProviderAccessToken=async(j,e)=>{let r=(await this.getIntegrationCredentials(e)).find(n=>n.accountId===j);if(!r)return;if(!this.client?.CTX){console.warn(`No client context for account ${this.uuid}, unable to get ${e} access token`);return}let a=await this._integrationProviderTokenCache[e].get(this.client.CTX,e==="brex"?r.itemUuid:void 0,r.accountId,r.refreshToken);if(a.isOk())return a.value.updated&&(await this.saveProviderTokenCache(e,this._integrationProviderTokenCache[e]),e==="brex"&&await this.updateBrexSystemVaultItems(j,a.value.refreshToken)),{...a.value,context:a.value.context}};this.removeProviderAccessToken=async(j,e)=>{this._integrationProviderTokenCache[e].delete(j),await this.saveProviderTokenCache(e,this._integrationProviderTokenCache[e])};this.loadIntegrationProviderTokenCache=async j=>{if(this.masterKey&&this.serveraccount.id)try{for(let e of j){if(!(this.masterKey&&this.serveraccount.id))return;let t=await _A.getDatabase().getEncryptedCache(this.serveraccount.id,`${e}Token`);if(t?.key==="096f51fd3813"){let r=await this.masterKey.decrypt(t.cache);this._integrationProviderTokenCache[e].deserializeToCache(q.ab2str(r))}}}catch{console.info("Failed to load encrypted cache.")}};this.saveProviderTokenCache=async(j,e)=>{if(this.masterKey&&this.serveraccount.id)try{let t=e.serialize(),r=await this.masterKey.encrypt(q.str2ab(t));if(r){let a={account_id:this.serveraccount.id,cache:r,type:`${j}Token`,key:"096f51fd3813"};_A.getDatabase().saveEncryptedCache(a)}}catch{console.info("Failed to save encrypted domain cache.")}};this.updateBrexSystemVaultItems=async(j,e)=>{try{let r=(await this.loadSystemVaultItems()).filter(a=>a.templateUuid==="800"&&a.state===fA.VaultItem.ItemState.Active&&a.overview.integration==="brex");await ITA(this.uuid,r,j,e)}catch(t){We(t)&&lj(t)}};this._getRawIntegrationCredentialItems=async j=>{try{return(await this.loadSystemVaultItems()).filter(t=>t.templateUuid==="800"&&t.state===fA.VaultItem.ItemState.Active&&t.overview.integration===j)}catch(e){return We(e)&&lj(e),[]}};this.syncBrexCards=async()=>this.runSyncer([8]).catch(j=>_s(this,j));this.destroyAccount=()=>{_A.getDatabase().deleteAccountWithUUID(this.b5account.uuid,({deletedItemIds:j,accountId:e})=>{Xt.handleDbUpdates({accountId:e,deletedItemIds:j,upsertedItemIds:[]})}).then(()=>globalThis.dispatchEvent(new Event(gp))),this.lock(!1)};this.getOrCreateSystemVault=async()=>{let j=await this.getSystemVault();return j?{newlyCreated:!1,vault:j}:this._createSystemVaultPromise!==void 0?this._createSystemVaultPromise:(this._createSystemVaultPromise=this._createSystemVault().catch(e=>{throw We(e)&&lj(e),new Error("Unable to create a system vault")}),this._createSystemVaultPromise)};this.waitForDecrypt=async()=>{if(!(typeof this.decryptingOverviews>"u"))return this.decryptingOverviews};this.getAndParseSystemVaultFromDatabase=async()=>{if(!this.serveraccount.id)return;let j=await _A.getDatabase().getSystemVault(this.serveraccount.id);if(j)return await this.parseVault(this.b5account.type,j)};this.getSystemVault=async()=>{let j=this.getSystemVaultFromMemory();if(j)return j;try{let e=await this.getAndParseSystemVaultFromDatabase();if(e)return e}catch(e){We(e)&&lj(e)}};this._createSystemVault=async()=>{if(!this.serveraccount.id)throw new q.LoggableError({errorClass:pb,message:E`Cannot create system vault due to missing server account ID`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(this.isLocked)throw new q.LoggableError({errorClass:pb,message:E`Cannot create system vault while locked`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(!this.client?.CTX)try{await this.reinitializeClient()}catch{lj(new q.LoggableError({errorClass:pb,message:E`Attempted to reinitialize the Client, but received an error.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0}))}if(!this.client)throw new q.LoggableError({errorClass:pb,message:E`Cannot create system vault due to missing client`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(!this.client.CTX)throw new q.LoggableError({errorClass:pb,message:E`Cannot create system vault due to missing client CTX`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});try{let j=await LA.getSystemVault(this.client.CTX);if(j){console.info(`System vault already created for account ${this.serveraccount.id}.`),await Promise.race([this.runSyncer([8]).catch(t=>_s(this,t)),new Promise(t=>setTimeout(t,500))]);let e=await this.getAndParseSystemVaultFromDatabase();return e?{newlyCreated:!1,vault:e}:{newlyCreated:!1,vault:j}}}catch(j){console.error(`Unable to determine if system vault exists ${this.serveraccount.id}.`,j)}try{return{newlyCreated:!0,vault:await LA.createSystemVault(this.client.CTX)}}catch(j){throw console.error(`Failed to create system vault for account ${this.serveraccount.id}.`,j),new q.LoggableError({errorClass:pb,message:E`Failed to create system vault for account`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}finally{this.runSyncer([8]).catch(j=>_s(this,j))}};this.updateAccountFromContext=async()=>{let{client:j,serveraccount:e}=this,t=[];return j?.CTX?.user?.email&&j.CTX.user.email!==e.email&&(`${e.uuid}`,t.push(_.updateAccount(e.uuid,{email:j.CTX.user.email}).catch(()=>console.error(`Failed update: email for ${e.uuid}`)))),j?.CTX?.user?.dSecret&&j.CTX.user.dSecret!==e.dSecret&&(`${e.uuid}`,t.push(_.updateAccount(e.uuid,{dSecret:j.CTX.user.dSecret}).catch(()=>console.error(`Failed update: dSecret for ${e.uuid}`)))),j?.CTX?.account?.domain&&j.CTX.account.domain!==e.domain&&(`${e.uuid}`,t.push(_.updateAccount(e.uuid,{domain:j.CTX.account.domain}).catch(()=>console.error(`Failed update: domain for ${e.uuid}`)))),Fi.onAccountSignInSuccess(),Promise.all(t)};this.getDecryptedCache=async j=>{if(this.masterKey&&this.serveraccount.id)try{let e=await _A.getDatabase().getEncryptedCache(this.serveraccount.id,j);if(!e)return;let t=await this.masterKey.decrypt(e.cache);return q.ab2str(t)}catch{return}};this.encryptAndSaveCache=async(j,e,t)=>{if(this.masterKey&&this.serveraccount.id)try{let r=await this.masterKey.encrypt(q.str2ab(t));if(r){let a={account_id:this.serveraccount.id,cache:r,type:j,key:e};_A.getDatabase().saveEncryptedCache(a)}}catch{console.info("Failed to save encrypted cache: ",j)}};this.uploadWatchtowerReports=async()=>{if(!this._isWatchtowerReportsUploading){this._isWatchtowerReportsUploading=!0;try{if(!this.client?.CTX)throw new Error("Missing CTX for uploading Watchtower reports");await WM(),await LA.uploadWatchtowerReports(this.client?.CTX,!0,async(j,e)=>M6A(this,e),async(j,e)=>_6A(this,e))}catch{console.error("There was an issue uploading Watchtower reports")}this._isWatchtowerReportsUploading=!1}};this.uploadVaultItemSnapshots=async()=>{if(!this._isDetailedVaultsReportingUploading){if(!this.client?.CTX)throw new Error("Missing CTX for uploading vault item snapshots");if(this.client.account()?.type===fA.Account.Type.Business)try{this._isDetailedVaultsReportingUploading=!0,await LA.uploadVaultItemSnapshots(this.client.CTX,!0,async(j,e)=>M6A(this,e),async(j,e)=>_6A(this,e))}catch{throw new q.LoggableError({errorClass:E`UploadVaultItemSnapshotsError`,message:E`There was an issue uploading vault item snapshots to server.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}finally{this._isDetailedVaultsReportingUploading=!1}}};this.sendItemSnapshotToServer=async j=>{if(this._isDetailedVaultsReportingUploading)return;if(!this.client?.CTX)throw new Error("Missing CTX for uploading vault item snapshots to server");if(this.client.account()?.type!==fA.Account.Type.Business)return;let e=j.vault.contentVersion+1,t=Y7(this.uuid,this);try{this._isDetailedVaultsReportingUploading=!0,await LA.sendItemSnapshotToServer(this.client.CTX,j,e,t)}catch{throw new q.LoggableError({errorClass:E`UploadVaultItemSnapshotsError`,message:E`There was an issue uploading vault item snapshots to server.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}finally{this._isDetailedVaultsReportingUploading=!1}};this.getFeatureFlags=async j=>{if(!this.client?.CTX)throw new Error(`Unable to get features for account ${this.client?.accountUUID}. CTX is undefined.`);return(await LA.getFeatures(this.client?.CTX,e7,j?.traceId,j?.spanId)).features.reduce((t,r)=>(Object.keys(wm).includes(r.name)&&(t[r.name]={enabled:!0,variant:r.variantPayload}),t),{})};this.updateActivationHubCacheIfNecessary=async j=>this._activationHubCache.updateCacheIfNecessary(this.client?.CTX,j);this.getActivationHubTasks=async(j,e)=>this._activationHubCache.getTasks(this.client?.CTX,j,e);this.completeActivationHubTask=async(j,e)=>{if(!this.client?.CTX){console.warn(`No client context for account ${this.uuid}, unable to get activation hub tasks`);return}let t=new Date().toISOString();return LA.completeActivationHubTask(this.client.CTX,{uuid:e,dismiss:j,completedAt:t})};this.completeActivationHubTaskByName=async(j,e)=>{if(!qv(this.uuid,j)){let t=await this.getActivationHubTasks();if(t){let r=t.tasks.find(a=>a.name===j&&a.completedAt===void 0);if(r){let a=!!e;await this.completeActivationHubTask(a,r.uuid),await this.getActivationHubTasks(!0)}TS(this.uuid,j)}}};this.inviteUsersViaEmail=async(j,e)=>{if(!this.client?.CTX){console.warn(`No client context for account ${this.uuid}, unable to send invitations`);return}try{let t=await LA.inviteUsersViaEmail(this.client.CTX,j,e);return St("InviteUser",{member_type:e==="G"?"GUEST":"REGULAR",invites_count:j.length,status:t.failedInvites.length===0?"SUCCESS":"FAIL",source:"GUIDED_SETUP"},this.uuid),t}catch{throw St("InviteUser",{member_type:e==="G"?"GUEST":"REGULAR",invites_count:j.length,status:"FAIL",source:"GUIDED_SETUP"},this.uuid),new q.LoggableError({errorClass:E`InviteUsersViaEmail`,message:E`Server error`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0})}};this.getAccountUserCounts=async()=>{if(this.isLocked){`${this.uuid}`;return}if(!this.client?.CTX)try{await this.reinitializeClient()}catch(j){lj(new q.LoggableError({errorClass:k9A,message:E`Attempted to reinitialize the Client, but received an error.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0,stackOverrideError:j instanceof Error?j:void 0}))}if(this.client?.CTX)try{return await LA.getAccountUserCounts(this.client.CTX)}catch(j){lj(new q.LoggableError({errorClass:k9A,message:E`Error calling getAccountUserCounts API`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0,stackOverrideError:j instanceof Error?j:void 0})),console.error("Error fetching account user counts:",j)}};this.getPendingInvites=async()=>{if(this.isLocked)return`${this.uuid}`,[];if(!this.client?.CTX)try{await this.reinitializeClient()}catch{lj(new q.LoggableError({errorClass:PZj,message:E`Attempted to reinitialize the Client, but received an error.`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0}))}return this.client?.CTX?await LA.getPendingInvitations(this.client.CTX):[]};this.serveraccount=j,this._nakedDomainCache=new SM(t=>tA.nakedDomainForUrl(t)),this._integrationProviderTokenCache={fastmail:new RD(H5A),brex:new RD(wTA)},this._brexCardCache=new _M,this._activationHubCache=new MM,this._isWatchtowerReportsUploading=!1,this._isDetailedVaultsReportingUploading=!1,this.b5account=new fA.Account(j),this.deviceJson=e,this._hasUnseenDeviceEnrollments=!1,this.primeIconColorCache()}get accountIdentifier(){let{uuid:j,userUUID:e,signinAddress:t}=this.serveraccount,r=ai(t);return{accountUUID:j,userUUID:e,server:r}}get hasBackOfficeFeature(){if(!this.client?.CTX?.account){console.warn(`Unable to get BO features for account ${this.client?.accountUUID}. CTX is undefined.`);return}return this.client.CTX.account.hasBackOfficeFeature}get client(){return this._client}get hasSignedInClient(){return this.client?.isSignedIn()??!1}get isLocked(){return!this.masterKey}get isUnlocked(){return!this.isLocked}get user(){return this.context?.user}get isUserSuspended(){return this.serveraccount.userState===Yj.State.Suspended}get masterKey(){return this.context?.user?.masterKey}get uuid(){return this.serveraccount.uuid}get vaults(){let j=r=>r.hasClientAccess(Zh.Extension),e=r=>r.type!==fA.Vault.TypeGeneratedPasswords,t=r=>r.type!==fA.Vault.TypeSystem;return this._vaults?.filter(r=>j(r)&&e(r)&&t(r))??[]}get hasUnseenDeviceEnrollments(){return this.isUnlocked&&this._hasUnseenDeviceEnrollments}set hasUnseenDeviceEnrollments(j){this._hasUnseenDeviceEnrollments=this.isUnlocked&&j}get mustMigrateAuth(){return hj.accountHasFlag(this.uuid,"auth-self-serve-migration-v1")&&this.client?.CTX?.session.ssoMigrationGracePeriod?.state===fA.User.State.MustMigrateAuth}getPreference(j){return this.serveraccount.userPreferences?Xj.includes(this.serveraccount.userPreferences,Qh[j]):!1}async reinitializeClient(){if(!this.client?.CTX){let j=await E9A(this.serveraccount.uuid);return this.client?.CTX?console.info(`Successfully reinitialized client for account ${this.serveraccount.uuid}.`):console.warn(`Unable to reinitialize client for account ${this.serveraccount.uuid}.`),j}return"No error occurred"}async decryptKeysets(j,e){await(async()=>{if(!j.user)throw new Error("Missing user.");if(j.user.masterKey)return;let r=e.find(n=>n.encryptedBy===fA.KID_MASTER_PASSWORD);if(!r)throw new Error("Missing active keyset.");let a=Yy(r.encSymKey);j.user.masterKey=await Zt.derive(a,j.user.getCredentials())})(),await LA.decryptKeysets(j,e)}static expectMuk(j){if(j.alg!==Tt)throw new Error(`Unexpected alg: ${j.alg}`);if(!j.ext)throw new Error("Unexpected ext");if(!j.key_ops||j.key_ops.length!==2)throw new Error(`Invalid key_ops: ${JSON.stringify(j.key_ops)}`);if(j.kty!=="oct")throw new Error(`Unexpected kty: ${j.kty}`);if(!j.k)throw new Error("undefined key material");return{alg:j.alg,ext:j.ext,key_ops:["decrypt","encrypt"],kty:j.kty,kid:j.kid,k:j.k}}async unlockWithMasterUnlockKey(j,e){let t=A.expectMuk(j);if(!this.serveraccount.id)throw console.error("Missing server account ID in unlockWithMasterUnlockKey"),new q.LoggableError({errorClass:E`AccountHandler`,message:E`Invalid server account ID`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});if(!j.alg||!j.k)throw console.error("Invalid muk in unlockWithMasterUnlockKey"),new q.LoggableError({errorClass:E`AccountHandler`,message:E`Invalid muk`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let r=await Hk(),a=L6A(this.serveraccount,r);if(!a.user)throw console.error("Missing user in unlockWithMasterUnlockKey"),new q.LoggableError({errorClass:E`AccountHandler`,message:E`Missing user`,userUuid:this.user?.uuid?Z(this.user.uuid):void 0});let n=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(a.user.masterKey=await Zt.fromJwk(t),n.length>0)try{await this.decryptKeysets(a,n)}catch{try{await this.startSync(e)}catch{return this}n=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id);let o=this.serveraccount.secretKey?Ya.SecretKey.fromInput(this.serveraccount.secretKey):void 0;a.user=new fA.OldUser({uuid:this.serveraccount.userUUID,email:this.serveraccount.email,secretKey:o}),a.user.masterKey=await Zt.fromJwk(t);try{await this.decryptKeysets(a,n)}catch{return this}}else await this.startSync(e),n=await _A.getDatabase().getKeysetsForAccount(this.serveraccount.id),await this.decryptKeysets(a,n);return this.context=a,console.info(`Hooray!; Unlocked account ${this.uuid} with MUK; \u{1F389}`),this}async getVaultWithUUID(j){if(!this.serveraccount.id){console.warn("Get vault with UUID. Missing server account ID.");return}let e=await _A.getDatabase().getVaultWithUUID(this.serveraccount.id,j);if(!e){console.warn("Get vault with UUID. Missing server vault.");return}return await this.parseVault(this.b5account.type,e)}async createGeneratedPasswordsVaultIfNeeded(){if(!this.serveraccount.id){console.warn("Create Generated Passwords Vault: Missing server account ID.");return}if(!await _A.getDatabase().hasGeneratedPasswordVault(this.serveraccount.id)&&!(this.isLocked||this.mustMigrateAuth)){if(!this.client?.CTX){console.warn("Create Generated Passwords Vault: Missing client CTX.");return}try{await LA.createGeneratedPasswordsVault(this.client.CTX)}catch{}return this.runSyncer([8]).catch(e=>_s(this,e))}}async primeIconColorCache(){if(!this.serveraccount.id){console.warn("Prime Icon Color Cache: Missing ID for server account.");return}let j=await _A.getDatabase().getItemOverviewsForAccount(this.serveraccount.id);for(let{uuid:e}of j)tA.generateRichIconBackgroundColor(e)}canUseTrustedDeviceAuth(){return LA.canPerformTrustedDeviceBasedAuth(this.serveraccount.authMethods)}canOnlyUseWebAuthn(){return LA.canOnlyPerformWebauthnAuth(this.serveraccount.authMethods)}},u9A=A=>{if(typeof A=="string")return A.indexOf("0001")===0?void 0:new Date(A)},L6A=(A,j)=>{let e=Uo(A.signinAddress,j),t;if(A.secretKey){let a=Ya.SecretKey.fromInput(A.secretKey);if(!a)throw new Error("Secret Key is invalid");t=a}let r=new fA.OldUser({uuid:A.userUUID,email:A.email,secretKey:t});return e.user=r,e};function CZj(){let A=new fA.Vault({uuid:q.generateUUID(),name:"Brex",type:fA.Vault.TypeUserCreated,desc:""});return A.setCombinedAcl(fA.vaultACL.ALL_READ),A.localId=globalThis.crypto.getRandomValues(new Uint32Array(1))[0],A.isVirtualVault=!0,A}async function YM(){return await vD(_.getAccountHandlers)}async function p9A(){let A=mg();return await vD(A)}function m9A(A){let{accountUuid:j}=A.data,t=bn().getPolicyForAccount(j,"app-launcher-allowed");return t?.policyName==="app-launcher-allowed"&&t.definition.appCatalogUrl?Tp(t.definition.appCatalogUrl):void 0}function q9A(A){if(!YA().showNotifications||Oe())return;let e="add-account-"+globalThis.crypto.getRandomValues(new Uint32Array(1)).toString();chrome.notifications.create(e,{type:"basic",iconUrl:Cs,title:nA("1Password account added"),message:nA('"{accountName}" was added to 1Password.',{accountName:A}),priority:2}),Sm("click",e,()=>mb())}async function ip(){return _A.isInitialized()?(await _A.getDatabase().getAllAccounts()).length>0:!1}function YD(A,j,e){return{uuid:A.uuid,name:A.name,state:A.state,email:j.email,signinAddress:e.signinAddress,domain:A.domain,secretKey:e.secretKey,deviceCredentials:e.deviceCredentials,dSecret:e.dSecret||void 0,userUUID:j.uuid,type:A.type,avatar:A.avatar,attrVersion:A.attrVersion,createdAt:JSON.stringify(A.createdAt),baseAvatarURL:A.baseAvatarURL,baseAttachmentURL:A.baseAttachmentURL,tier:A.subscription.tier?{gatedFeatures:Object.keys(A.gatedFeatures),tierChangeRestrictions:[],...A.subscription.tier}:void 0,accountVersion:A.attrVersion,templateVersion:0,userState:j.state,userVersion:j.attrVersion,userCreatedAt:j.createdAt,userPreferences:j.preferences,userAvatar:j.avatar,userName:j.name,userType:j.type,keysetVersion:0,userOverview:{permissions:0},authMethods:e.authMethods,billingStatus:A.subscription.status,freezesAt:A.subscription.freezesAt,teamMemberPolicies:A.settings?.teamMemberPolicies}}function v9A(A,j){return{uuid:A.accountUuid,name:A.teamName,state:A.accountState,email:A.userEmail,signinAddress:A.signInUrl,domain:YB.subdomainFromSignInAddress(A.signInUrl)??"",secretKey:A.signInProvider.type==="secretKey"?A.signInProvider.data:void 0,dSecret:void 0,userUUID:A.userUuid,type:A.accountType,avatar:A.teamAvatar,createdAt:"",baseAvatarURL:A.baseAvatarUrl,baseAttachmentURL:"",attrVersion:0,accountVersion:0,templateVersion:0,userState:A.userState,userVersion:0,userAvatar:"",userName:"",userType:"G",userPreferences:void 0,userCreatedAt:void 0,keysetVersion:0,userOverview:{permissions:0},authMethods:j,billingStatus:A.billingStatus,freezesAt:""}}async function Eb(A){let j=ud(A.muk),e=await x9A(A.details.accountUuid);if(e.isErr()){if(e.error.type==="RequestError")switch(console.error(`Failed to request delegated session: ${e.error.type}`),e.error.content){case Yg.UserSuspended:throw new q.errors.ServerError(q.errors.ServerErrorCode.suspendedLoginFailed,q.errors.ServerErrorReason.userSuspended);case Yg.Other:break}throw new q.LoggableError({errorClass:E`SigninError`,message:E`Failed to request delegated session: ${Z(e.error?.type)}`,severityLevel:"warning",userUuid:A.details?.userUuid?Z(A.details?.userUuid):void 0})}return QD({email:A.details.email,signInAddress:A.details.signInAddress,secretKey:A.secretKey},j,e.value)}async function QD(A,j,e,t=!0){return VM(A.signInAddress,{requestID:e.requestId??1,email:A.email,accountKey:A.secretKey,masterKey:j,serverConfig:{notifier:e.notifier},sessionKey:e.sessionKey},t?x9A:void 0)}async function x9A(A){let j={accountUuid:A,device:await L6()};if(!ie.desktopConnectionManager)return TA({type:"NoConnectionManager"});let e=await ie.desktopConnectionManager.requestDelegatedSession(j);return e.type==="Error"?TA({type:"RequestError",content:e.content}):Oj({notifier:e.content.notifier,sessionKey:ud(e.content.sessionKey)})}async function z6A(A,j=!0){if(_.accountIsUnlocked(A.data.accountIdentifier.accountUUID))return;let e=await L6(),t;if(A.type==="AccountPasswordCredentials")t=await kd({credentials:A.data,device:e}).finally(async()=>qt.updateConnectivityStatus());else{let{email:d,signinAddress:k}=A.data;t=await QD({email:d,signInAddress:k},A.data.muk,A.data.session,!1)}if(!t.CTX)return Promise.reject("Missing context on the client.");let r=t.account();if(!r)return Promise.reject("Missing account after signin.");let a=t.user();if(!a)return Promise.reject("Missing user after signin.");Fl.startAutoLockMonitor();let n,{authMethods:o}=await LA.getSignInMethods(t.CTX,a.email,a.uuid);A.type==="AccountPasswordCredentials"?n=YD(r,a,{...A.data,authMethods:o}):n=YD(r,a,{signinAddress:A.data.signinAddress,authMethods:o,secretKey:A.type==="MyceliumDelegatedSession"?A.data.secretKey:void 0}),await _A.getDatabase().saveAccount(n);let i=A.type==="DelegatedSession"&&LA.canPerformTrustedDeviceBasedAuth(o),s=new tE(n,e);if(s.setClient(t),_.addAccountHandler(s),i&&A.data.srpx)try{await CS(t,s,A.data.srpx)}catch(d){console.error("Failed to upgrade B5X to a Trusted Device for delegated session",d),We(d)&&lj(d)}let l;A.type==="AccountPasswordCredentials"?l=await Bb(A.data.accountPassword):l=await Xm({type:"DelegatedSession",data:{accountUuid:A.data.accountIdentifier.accountUUID,muk:A.data.muk,client:t}}),l.isErr()&&console.warn(`Failed to unlock newly added account: ${l.error.type}`),await s.createGeneratedPasswordsVaultIfNeeded(),await s.primeIconColorCache(),_.numberOfAccountHandlers===1&&(fD(),[dt.Type.Individual,dt.Type.Family].includes(n.type)&&O6A(n.uuid)),j&&q9A(s.serveraccount.name),bi.enableInsiderIfAppropriate(),globalThis.dispatchEvent(new Event(wi))}async function f9A(A){let j=await L6(),e=v9A(A,[]);await _A.getDatabase().saveAccount(e);let t=new tE(e,j),r=_.addAccountHandler(t),a=Uo(t.serveraccount.signinAddress,await Hk()),n=await LA.getSignInMethods(a,t.serveraccount.email,t.serveraccount.userUUID);_.updateAccount(t.serveraccount.uuid,{authMethods:n.authMethods}).catch(()=>console.error(`Failed to set auth methods for ${t.serveraccount.uuid}`)),r===1&&(fD(),[dt.Type.Individual,dt.Type.Family].includes(e.type)&&O6A(e.uuid)),bi.enableInsiderIfAppropriate(),globalThis.dispatchEvent(new Event(wi))}async function R6A(A){switch(A.type){case"B5SignInSucceeded":{let j={accountIdentifier:{userUUID:A.details.userUuid,accountUUID:A.details.accountUuid,server:ai(A.details.signinAddress)},dSecret:A.details.dSecret,email:A.details.email,accountPassword:A.details.masterPassword,secretKey:A.details.accountKey,signinAddress:A.details.signinAddress};await z6A({type:"AccountPasswordCredentials",data:j});break}case"B5DelegatedSignInSucceeded":case"B5MyceliumDelegatedSignInSucceeded":{let{accountUuid:j,session:e,masterKey:t,email:r,signinAddress:a,srpx:n}=A.details;if(!t){console.warn("Unable to add account without master key");return}if(!e){console.warn("Unable to add account without session");return}let o=ud(JSON.parse(t)),i={email:r,signinAddress:a,accountIdentifier:{accountUUID:j},muk:o,session:e,srpx:n};A.type==="B5MyceliumDelegatedSignInSucceeded"?await z6A({type:"MyceliumDelegatedSession",data:{...i,secretKey:"password_secret_key"in A.details.extraCredentials?A.details.extraCredentials.password_secret_key.secret_key:void 0}}):await z6A({type:"DelegatedSession",data:i});break}default:ue(A)}}var ZD;function HZj(A,j){return A.serveraccount.uuid===j.accountUuid&&A.serveraccount.userUUID===j.userUuid}function G9A(A,j){let{accountUuid:e}=j.type==="Locked"?j.content:j.content.details;return A.serveraccount.uuid===e}async function QM(A,j={}){if(ZD)return ZD;ZD=(async()=>{try{let t=0;for(let r of A){let a=_.getAccountHandlers.find(n=>n.serveraccount.uuid===r.accountUuid);if(a&&a.serveraccount.uuid===r.accountUuid&&a.serveraccount.userUUID!==r.userUuid){console.warn(`Unable to add secondary user from account ${r.accountUuid}`);continue}a||(t++,await f9A(r))}if(j.removeExtraAccounts)for(let r of _.getAccountHandlers)A.find(a=>HZj(r,a))||(t++,await _.removeAccount(r.uuid));return t>0}catch{throw new Error("When adding a locked account from OPI we ran in to a problem.")}})();let e=await ZD;return ZD=void 0,e}async function ZM(A,j={}){try{let e=[],t=0;for(let r of A)try{if(r.type!=="Unlocked")continue;let a=r.content,n=_.getAccountHandlers.find(o=>o.serveraccount.uuid===a.details.accountUuid);if(n&&n.serveraccount.uuid===a.details.accountUuid&&n.serveraccount.userUUID!==a.details.userUuid){console.warn(`Unable to add secondary user from account ${a.details.accountUuid}`);continue}if(n?.isUnlocked){(!n.client||!n.client.isSignedIn)&&(await A2(n,a),n.startSync());continue}if(n){let o=r.content.details.userState??Fc.Active;if(o!==n.serveraccount.userState){if(o===Fc.Unsupported)throw new Error("User state unsupported");await n.setUserState(o)}switch(o){case Fc.Suspended:continue;case(Fc.Deleted||Fc.Purging||Fc.Purged):n.destroyAccount();continue;default:}let i=a.srpX&&a.secretKey?{type:"Credentials",data:{credentials:n.credentials({muk:ud(a.muk),srpX:a.srpX}),additionalSignInOptions:{allowReauthorization:!0}}}:{type:"Other",data:{client:async()=>Eb(a)}};try{await F9A(n,a),n.serveraccount.deviceCredentials&&_.updateAccount(n.serveraccount.uuid,{deviceCredentials:void 0}),await n.unlockWithMasterUnlockKey(a.muk,i),t++,St("AppUnlock",{unlock_method:"SLS",status:"SUCCESS"},a.details.accountUuid),e.push(async()=>n.startSync(i).catch(s=>{console.error(`Sync error for account: ${a.details.accountUuid}`),_s(n,s)}))}catch(s){try{await n.startSync(i),await n.unlockWithMasterUnlockKey(a.muk,i),t++,St("AppUnlock",{unlock_method:"SLS",status:"SUCCESS"},a.details.accountUuid)}catch{console.error("Unable to unlock account after attempting to sync updated keysets.",s)}}}else try{await TZj(a)&&(t++,St("AppUnlock",{unlock_method:"SLS",status:"SUCCESS"},a.details.accountUuid))}catch(o){console.error("Unable to add new account",o)}}catch{let{accountUuid:a}=r.type==="Locked"?r.content:r.content.details,o=_.findAccountHandlerByUuid(a)?.serveraccount?.authMethods.map(i=>i.type);console.error(`Something went wrong when trying to unlock account with UUID ${a}, account auth methods: ${o?o.join(", "):"none"}`)}if(j.removeExtraAccounts)for(let r of _.getAccountHandlers)try{A.find(a=>G9A(r,a))||(console.warn(`Account ${r.uuid} is not in the native app, and b5x is cleaning up extra accounts. Removing account from B5x.`),await _.removeAccount(r.uuid))}catch{console.error(`Error checking extra account removal for ${r.uuid}`)}if(!ut())for(let r of _.getAccountHandlers)try{let a=!A.find(i=>G9A(r,i));if(!r.serveraccount.authMethods){console.warn(`authMethods are empty for account ${r.uuid}.`);continue}let n=r.serveraccount.authMethods.some(i=>i.type==="OIDC"),o=r.getDeviceCredentials().isErr();a&&n&&o&&(console.warn(`SSO Account ${r.uuid} is not in native app and does not have device credentials. Removing account from B5x.`),await _.removeAccount(r.uuid))}catch{console.error(`Error checking extra SSO account removal for ${r.uuid}`)}return e.forEach(async r=>r()),{numberOfUnlockedAccounts:t}}catch{throw new Error("When adding an account from an app we ran in to a problem.")}}async function TZj(A){let j=await L6(),e=ud(A.muk),t;if(!A.srpX||!A.secretKey?t=await Eb(A):t=await kd({credentials:{accountIdentifier:{accountUUID:A.details.accountUuid,userUUID:A.details.userUuid,server:A.details.server},uuid:A.details.userUuid,email:A.details.email,muk:e,secretKey:A.secretKey,signinAddress:A.details.signInAddress,srpX:A.srpX},device:j,additionalSignInOptions:{allowReauthorization:!0}}).finally(async()=>qt.updateConnectivityStatus()),!t.CTX)throw new Error("Missing context on the client.");let r=t.account();if(!r)throw new Error("Missing account after signin.");let a=t.user();if(!a)throw new Error("Missing user after signin.");Fl.startAutoLockMonitor();let n=await LA.getSignInMethods(t.CTX,a.email,a.uuid),o=YD(r,a,{secretKey:A.secretKey,signinAddress:A.details.signInAddress,dSecret:void 0,authMethods:n.authMethods});await _A.getDatabase().saveAccount(o);let i=new tE(o,j),s=_.addAccountHandler(i);try{i.setClient(t),await i.startSync(),await i.unlockWithMasterUnlockKey(A.muk)}catch(l){_s(i,l)}return await i.createGeneratedPasswordsVaultIfNeeded(),await i.primeIconColorCache(),s===1&&fD(),bi.enableInsiderIfAppropriate(),globalThis.dispatchEvent(new Event(wi)),i.isUnlocked}function b9A(A){switch(A.type){case"OpenLink":return KZj(A.content);case"PerformUndoAction":case"PerformItemAction":case"View":case"RetryFailedUpdate":case"RunUpdate":case"LaunchStoreProductPage":case"FileAction":case"HideToast":case"PerformSync":case"ShowSshAgentPromoModal":case"CommitSigning":return;default:ue(A)}}function KZj(A){He.openTab({url:A}),Go()}var MZj,_Zj,e2,J6A=!1;function w9A(){qe.resolve(qi).subscribe(zg,LZj).subscribe(qg,NZj),YA()?.inlineEnabled||Ss("autofill-disabled")}function I9A(){J6A=!0}function Go(){Rj("close-popup",void 0),b6A()}function LZj(){Go()}function D9A(){let A=E_A();return A||JSON.stringify({})}var O9A="contextual-import-dismiss",P9A="import-nudge-dismiss";function C9A(){return vj.getItem(O9A)}function H9A(A){return vj.setItem(O9A,JSON.stringify(A.data))}function T9A(){return vj.getItem(P9A)}function K9A(A){return vj.setItem(P9A,JSON.stringify(A.data))}var S9A="firefox-rich-icons";function M9A(){return vj.getItem(S9A)}function _9A(A){vj.setItem(S9A,JSON.stringify(A.data))}function L9A(A){B_A(A.data)}function N9A(A){B6(),wSA(),a9A(),X2A(),e2&&Ig(e2),eb({prefersColorSchemeDark:A.data.prefersColorSchemeDark})}async function z9A(A){let j=await Gt();if(!j)return;let e=j.URL()?.hostname,t=j.URL()?.host;if(!(e&&t))return;let r={id:j.id,unparsedUrl:j.unparsedUrl,hostname:e,host:t,nakedDomain:j?.unparsedUrl?.startsWith("http")?j.nakedDomain():""},a=await j8(j,A.data?.collectedPageDetailsHash);return a&&(r.suggestions=a.suggestions,r.collectedPageDetailsHash=a.collectedPageDetailsHash),r}async function R9A(A){B6();try{let j=await Ij.loadItemCache();if(!j)return{type:"NoItem"};let e=j.itemWithLocalId(A.data.itemId);if(!e)return{type:"NoItem"};let t=e.vault,r=j.accountForVaultID(Ua(t));if(!r)throw new Error("failed to find an account or vault overview");let{showRichIcons:a,newHibpEnabled:n,autoSubmitLogins:o}=YA(),i=await Gt(),s=await r6(e);if(!s)throw new Error("Failed to find decrypted item.");let l=z6().isEnabled(),d,k=s;k.cacheInformation&&k.cacheInformation.provider==="brex"&&(d=c1.Brex);let u=Y7(r.uuid),m={},I={};A.data.gatherAsyncData&&(m=await LA.generateWatchtowerReportForItem(s,n,!!r.hasBackOfficeFeature.itemsInWrongAccountPolicy,u),I=await M5A(s));let S=(await Wo()).map(yA=>{let VA=Y7(yA.uuid);return{email:yA.email,accountName:yA.name,accountUuid:yA.uuid,itemsInWrongAccountAllowedDomains:VA}}),f=e.overview.b5AccountUUID,v=t.getCombinedAcl();if(typeof v!="number")return console.error("Failed to load item details due to missing vaultACL"),{type:"UnknownError"};let D=(await _.getFrozenAccountsInfo()).frozenAccounts.some(yA=>yA===r.uuid),C=_.getUserStateForAccount(r.uuid),b=_.findAccountHandlerByUuid(r.uuid),h=!!await b?.shouldShowFreeFamilyAccountNotification(),O=!!b?.hasBackOfficeFeature?.familyChildAccounts,V=hj.anyAccountHasFlag("core-date-time-localization"),Y=Jm(e),rA=await tA.getItemDetails(s,{vaultUuid:t.uuid,name:t.name,baseAvatarUrl:r.baseAvatarURL??"",accountUuid:r.uuid,avatarFilename:t.avatar,vaultType:tA.parseVaultType(t.type)},{name:r.name,baseAvatarUrl:r.baseAvatarURL??"",accountUuid:r.uuid,avatarFilename:r.avatar,accountType:tA.parseAccountType(r.type)},tA.buildPermissionBundle(v,D,C),{mfaInformationPage:m.inactiveTwoFactor,hasVulnerablePassword:!!m.vulnerablePassword,compromisedDomain:m.compromisedDomain,passkeyInformationPage:m.inactivePasskey,checkForCompromisedWebsites:!0,checkForTwoFactorAuthentication:!0,checkForPasskeys:!0,checkForVulnerablePasswords:n,watchtowerAccounts:S,accountUuidForItem:f,allowedEmailDomains:u},i?.unparsedUrl,a,A.data.revealedFieldIds??[],l,I,h,O,V,o,Y,d);if(k.cacheInformation){let yA=rA.elements.find(Mj=>Mj.type==="Title")?.content,VA=V5(k.cacheInformation);yA&&VA&&(yA.icon.sources=[{type:"DefaultIcon",content:{file:VA,masked:!1,description:void 0}}]);let dj=rA.header.locationBar.elements.find(Mj=>Mj.type==="Vault")?.content,bA=UTA(k.cacheInformation);dj&&bA&&(dj.icon.sources=[{type:"DefaultIcon",content:{file:bA,masked:!1,description:void 0}}])}return rA.mustRecordItemUsage&&Ks(e,cA.ItemUsageAction.Reveal),{type:"Success",data:{...rA,itemTitle:e.title,shortcuts:{primaryCopyAction:void 0,secondaryCopyAction:void 0,tertiaryCopyAction:void 0},itemSpecifier:{itemId:gv(e).toString(),itemUuidComponents:{itemUuid:e.uuid,vaultUuid:t.uuid,accountUuid:r.uuid}}}}}catch{return console.error("Unable to generate item details"),{type:"UnknownError"}}}async function y9A(A){Go();let j=await Gt();await He.openTab({url:A,openerTabId:j?.id})}async function J9A(A){if(A.data.itemId.type!=="databaseId"){console.warn("Unable to perform watchtower actions on non-database items");return}let j=await hc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");if(A.data.action.type==="changePasswordOnWebsite")return Go(),WF(j.value);if(A.data.action.type==="scanQrCode")return sM(j.value);if(A.data.action.type==="openSupportUrl"){let r="https://support.1password.com/"+A.data.action.content;y9A(r);return}if(A.data.action.type==="usePasskey"){y9A(A.data.action.content);return}let e=await tA.handleWatchtowerAction(A.data.action,j.value),t=OF(j.value,e);await $a(t)}async function U9A(A){let j=await hc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");let e=await tA.getLargeTypeWithClientFormattedString(j.value,A.data.clientFormattedString);return e.isConfidential&&Ks(j.value,cA.ItemUsageAction.Reveal),e}async function X9A(A){let j=await hc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");let e=await tA.getLargeTypeWithFieldIdentifier(j.value,A.data.fieldIdentifier);return e.isConfidential&&Ks(j.value,cA.ItemUsageAction.Reveal),e}function Ig(A){e2=A,Rj("popup-view-state-changed",A)}var V9A="activation-hub-tooltip-seen";function W9A(){return vj.getItem(V9A)==="true"}function Y9A(){vj.setItem(V9A,"true")}async function j2(A,j,e,t){let r=()=>{if(j){if(j.isErr())return{type:Us.None};if(r2(j.value.settings),j.value.accountsState.type!=="noAccounts"&&!_.hasAccountHandlers)return{type:Us.None};switch(j.value.accountsState.type){case"noAccounts":return{type:Us.None};case"hasLockedAccounts":return{type:Us.None};case"onlyHasStandaloneVaults":return{type:Us.None};case"allAccountsUnlockable":return{type:j.value.biometryType}}}else return t&&_.hasAccountHandlers?{type:t}:{type:Us.None}},a=gg(),n,o=a.find(l=>l.signInProvider.type==="sso");if(o&&o.signInProvider.content){let l,d=o.signInProviderIconUrl;d?l={id:"valid",sources:[{type:"RichIcon",content:{url:d}}]}:l={id:"not-valid",sources:[{type:"DefaultIcon",content:{file:rr.Identity}}]};let k=o.signInProvider.content;k.toLowerCase()==="microsoft entra id"&&(k="Microsoft"),n={ssoSignInButton:{label:nA("Sign in with {authProvider}",{authProvider:k}),action:{type:"signIn",content:{type:"account",content:{accountUuid:o.uuid,provider:{providerName:o.signInProvider.content,iconUrl:o.signInProviderIconUrl},context:i0.Unlock}}},icon:l,state:Zb.Enabled,style:A0.TransparentBlue},accountLabel:o.name,accountUuid:o.id}}let i=a.filter(l=>l.signInProvider.type==="webAuthn").map(l=>({accountUuid:l.uuid,accountLabel:l.name,signInButton:{label:nA("Sign in with passkey"),action:{type:"withAccount",content:{accountUuid:l.uuid,context:i0.Unlock}},icon:{id:"passkey",sources:[{type:"ThemedIcon",content:{file:dx.Passkey}}]},state:Zb.Enabled,style:A0.TransparentBlue}})),s={accounts:gg(),biometry:r(),unlockWithPassword:a.some(l=>l.signInProvider.type==="secretKey"),unlockWithSso:n,unlockWithPasskey:i};if(A.type==="Disconnected"&&A.hasEverConnectedToDesktopApp&&A.invalidBrowserState===0){let l=await He.getBrowserInfo(),d=l.name===q.browserInfo.Browser.Other?nA("your browser"):l.name;s.message=[{type:"plainText",content:{text:nA("You\u2019re asked to re-enter your password because {browserName} has an update available.",{browserName:d})}}]}return ut()&&Km().then(async l=>{if(l.isOk()&&await QM(l.value.accounts,{removeExtraAccounts:!0})){let k=ie.getDesktopAppState();Ig(Kt()?{state:"AccountPasswordRequired",details:await j2(k)}:{state:"Unlocked"})}}),e&&(s.message=[{type:"plainText",content:{text:e}}]),s}async function NZj(A){let{state:j}=A.detail;!await K6A()||j.type==="Connecting"||A8({initiatedByUserAction:!1,desktopAppState:j}).then(Ig)}async function A8(A){let j=await zZj({...A});return e2=j,j}async function zZj({initiatedByUserAction:A,desktopAppState:j=ie.getDesktopAppState(),lockScreenMessage:e}){let t=gg();if(j.type==="Connecting")return A&&p_A(),{state:"AttemptingToConnectToDesktopApp",details:{accounts:t}};if(j.type==="Connected"){if(j.lockState==="Syncing")return{state:"SyncingViaDesktopApp",details:{accounts:t}};if(j.lockState==="Unlocking")return{state:"UnlockingViaDesktopApp",details:{accounts:t}};if(_.allAccountHandlersHasUserSuspended)return{state:"AccountPasswordRequired",details:{...await j2(j),error:!0,message:U6A({type:"SuspendedAccounts"})}};if(j.lockState==="Locked"){if(A){let s=await ie.desktopConnectionManager?.getDesktopApp()?.hasAccounts(),l=t.length>0?_.getAccountHandlers.find(d=>d.uuid===t[0].uuid):void 0;!s&&l?cb({components:{emailAddress:l.serveraccount.email,server:l.serveraccount.signinAddress,secretKey:l.serveraccount.secretKey,isSsoAccount:t[0].signInProvider.type==="sso"},accountUuid:l.serveraccount.uuid}):(eE(),UZj())}return{state:"PendingDesktopUnlock",details:{accounts:t}}}}let r=A&&gb("popup",async i=>{i.isOk()?(i.value.numberOfUnlockedAccounts===0&&(Kt()||await Un(),eE()),Ig({state:"UnlockingViaDesktopApp",details:{accounts:t}})):i.error.type==="NotAttempted"&&console.info("Decided not to attempt reconnection to the desktop app.")}),a=Kt(),n;if(a&&r&&Gi())return{state:"AttemptingToConnectToDesktopApp",details:{accounts:t}};let o;if(ut()){if(n=a?await Km():void 0,a&&n&&n.isOk()){if(n.value.accountsState.type==="noAccounts")return console.info("No accounts found when connecting to the 1Password App"),{state:"NoSavedAccountsInOPI"};if(n.value.accountsState.type==="onlyHasStandaloneVaults")return{state:"OnlyStandaloneVaultsInOPI"};n.value.accountsState.type==="allAccountsUnlockable"&&n.value.biometryType!==Us.None&&A&&Ov(!0)}}else if(a&&await Fi.isBiometryConfigured()){let i=await Fi.getBiometryAvailabilityStatus();o=Us.None,i.isBiometryAvailable?(o=Us.TouchID,ce.getItem(Fi.DISABLE_BIOMETRY_AUTO_PROMPT)==="Y"?ce.removeItem(Fi.DISABLE_BIOMETRY_AUTO_PROMPT):A&&Fi.promptForBiometricsAndUnlock()):i.currentBiometryAvailability===bo.EnrollmentChanged?e=nA("Touch ID sensor is currently unavailable. You need to sign in using your account password."):e=nA("Touch ID sensor is currently unavailable.")}return Kt&&A&&_.updateAccountAuthMethods().then(async i=>{if(i){let s=ie.getDesktopAppState();Ig(Kt()?{state:"AccountPasswordRequired",details:await j2(s)}:{state:"Unlocked"})}}),a?{state:"AccountPasswordRequired",details:await j2(j,n,e,o)}:{state:"Unlocked"}}async function Q9A(){let A=YA(),j=await He.getBrowserInfo(),e=J6A;J6A=!1;let t;hj.anyAccountHasFlag("b5x-single-pane-popup")?t=A.appWidth:t="double-pane",ut()&&await X6A();let r=X7();return{checkForRepaintWorkaround:j.osName===q.browserInfo.OperatingSystem.macOS&&ri(),connectivityStatus:await qt.connectivityStatus(),accountUuid:_Zj,vaultUuid:MZj,locale:A.language,initialView:await A8({initiatedByUserAction:!0}),defaultItemList:await VS()?"suggestions":A.defaultItemList,appTheme:A.appTheme,appWidth:t,openedByInlineForUnlock:e,unleashFeatures:r,universallyEnabledFlags:v5()}}async function Z9A(A){let{type:j,data:e}=A.data;if(j==="trelica"){await kS(e);return}let{itemUuid:t,action:r,url:a}=e,n=await Rr(t);if(!n){console.error(`Unable to load item uuid ${t} for fill.`);return}r===R6.Autofill?await pv(n,"POPUP"):r===R6.Go?await pg(n,{url:a}):r===R6.OpenURL&&await ID(n,{url:a})}async function A3A(A){let{accountUuid:j,vaultUuid:e}=A.data,t=await Ij.loadItemCache();return t?t.categoriesForNewPopup(j,e).map(a=>mSA(a,!1)):[]}function j3A(A){W6A(A.data.accountUuid)}async function e3A(){await Un(),globalThis.dispatchEvent(new Event(yg))}function t3A(){}function r3A(){chrome.tabs.create({url:"https://support.1password.com/getting-started-browser",active:!0})}function a3A(A){if(A.data.query){let j=encodeURIComponent(A.data.query);try{chrome.search.query({disposition:"CURRENT_TAB",text:A.data.query},()=>{})}catch{let e=`https://www.google.com/search?q=${j}`;chrome.tabs.update({url:e,active:!0})}}}function n3A(A){let{url:j}=A.data;chrome.tabs.create({url:j,active:!0})}function o3A(A){return _.findAccountHandlerByUuid(A.data)?.client?.user()?.name}async function i3A(){let A;if(await Fi.isBiometryConfigured()?A=await Fi.promptForBiometricsAndUnlock():A=await Ov(!0),A.isOk()){let j=gg(!0);return j.forEach(e=>{St("AppUnlock",{unlock_method:"BIOMETRIC",status:"SUCCESS"},e.uuid)}),{error:!1,accounts:j}}else return{error:!0,message:U6A(A.error)}}async function s3A(A){let{password:j}=A.data,e=await _A.checkThatDatabaseIsAvailable();try{return await RZj(j)}catch{return{error:!0,message:[{type:"plainText",content:{text:e?nA("An unknown error has occurred."):nA("A database error occurred.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:nA("Report error\u2026"),url:"https://support.1password.com/contact/?s=Get%20help%20with%201Password&b=x"}}]}}}async function l3A(A){let{action:j}=A.data,e=_.getFirstSsoAccountForKind(j.content),t=()=>({error:!0,message:[{type:"plainText",content:{text:nA("An unknown error has occurred.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:nA("Report error\u2026"),url:"https://support.1password.com/contact/?s=Get%20help%20with%201Password&b=x"}}]});if(!e)return console.error("no account handler found for SSO account ID"),t();let r=e.serveraccount,a=e.getDeviceCredentials(),n=hj.hasPreRegistrationFlag("b5x-sso-unlock");try{let o=await Gt();if(n&&a.isOk()){let i=Uo(e.serveraccount.signinAddress,e.deviceJson.uuid),s=await LA.startOidcAuth(i,{accountUuid:r.uuid,userUuid:r.userUUID,keyId:a.value.deviceKeyId}),l=new URL(s),d=l.searchParams.get("state"),k={accountUuid:r.uuid,b5State:d,clientShortCode:q.ClientShortCode.OnePasswordExtension};l.searchParams.set("state",JSON.stringify(k)),await AD(l.toString()),Go()}else{let i=`${r.signinAddress}/signin/?a=${r.userUUID}&auth-only=1`;sp({url:i,openerTabId:o?.id,ignoreIfDuplicate:{activateExisting:!0,customDuplicateCheck:s=>`${s.url}&auth-only=1`===i}}),Go()}St("AppUnlock",{unlock_method:"SSO",status:"REQUEST"},r.uuid)}catch{return t()}return{error:!1,accounts:gg(!0)}}async function c3A(A){let{action:j}=A.data;if(j.type==="withAccount"){let e=await _A.getDatabase().findAccountByUUID(j.content.accountUuid);if(!e)return{error:!0,message:[{type:"plainText",content:{text:nA("Unable to unlock account.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:nA("Report error\u2026"),url:"https://support.1password.com/contact/?s=Get%20help%20with%201Password&b=x"}}]};let t=await Gt(),r=await sp({url:`${e.signinAddress}/signin/?a=${e.userUUID}&auth-only=1`,openerTabId:t?.id});St("AppUnlock",{unlock_method:"PASSKEY",status:"REQUEST"},e.uuid),nr.subscribe(Or,a=>{r.id?chrome.tabs.remove(r.id):console.warn("Webauthn auth tab had no ID; unable to remove after unlock")},{once:!0})}return{error:!1,accounts:gg(!0)}}function U6A(A){switch(A.type){case"AppCommunicationFailed":return[{type:"plainText",content:{text:nA("Could not connect to the 1Password App. Try unlocking again.")}}];case"FailedToUnlock":return[{type:"plainText",content:{text:nA("That didn't work. Check your password and try again.")}}];case"NoSavedAccounts":return[{type:"plainText",content:{text:nA("No accounts found.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:nA("Add account\u2026"),url:"https://start.1password.com/signin/?auth-only=1"}}];case"SuspendedAccounts":return[{type:"plainText",content:{text:nA("Your account is suspended. Contact your family organizer or team administrator for more information.")}}];case"UserFallback":case"UserCancel":return[];case"FailedLoginAttempts":return[{type:"plainText",content:{text:A.subType==="offline"?nA("You're offline. To access your account, check your internet connection and try again."):nA("Your account access has been temporarily paused. Check your email for more details.")}}]}}async function RZj(A){let j=await Bb(A);return j.isOk()?{error:!1,accounts:gg(!0)}:{error:!0,message:U6A(j.error)}}function d3A(A){let j=A.data.accountUuid;return!!_.findAccountHandlerByUuid(j)?.client?.user()?.isGuest}function k3A(A){let j=A.data.accountUuid;return!!_.findAccountHandlerByUuid(j)?.client?.CTX?.account?.isBusiness}function u3A(A){let{templateUuid:j,accountUuid:e}=A.data,t,r;if(e?(t=_.findAccountHandlerByUuid(e),t?r=t.vaults[0]:[t,r]=_.defaultSavingLocation()):[t,r]=_.defaultSavingLocation(),!t)throw new Error("Unable to create a new item because all accounts are locked.");if(j===Ii&&!pd()){as($S());return}Go(),V6A(r,A.data.templateUuid)}async function p3A(){let A=await _.getFrozenAccountsInfo();if(pd()&&!A.areAllAccountsFrozen)return!0;let[j]=_.defaultSavingLocation();return!A.frozenAccounts.includes(j.uuid)}async function m3A(A){return tA.parseMarkdown(A.data.markdown)}async function E3A(A){let{data:{value:j,concealed:e}}=A;return CaA(j,e)}async function B3A(A){let{itemId:j,confirmed:e}=A.data;if(!e)as({id:"delete-generator-history-item-id",title:nA("Are you sure you want to delete this password?"),text:nA("This entry will be removed immediately."),primaryAction:{id:"delete-action-id",label:nA("Delete"),destructive:!0,action:{type:"DeleteGeneratorHistoryItem",content:j.toString()}},cancelAction:nA("Cancel")});else{let t=await j2A(j);t.isErr()&&(console.error("Unable to delete password history item:",t.error.type),Kr({id:"failed-to-delete-password",message:nA("Failed to delete password"),behavior:fr.Ephemeral}))}}async function g3A(A){try{let j=await Ij.loadItemCache(),e=JSON.parse(A.data.itemId),t=j?.itemWithLocalId(e);if(!t)throw new Error;let r=await W5(t);return r.isOk()&&r.value||""}catch{return""}}async function h3A(A){(await _k()).forEach(async t=>browser.tabs.sendMessage(t.id,{name:"item-detail-value-drag-start"}));let{dragData:e}=A.data;if(e){let t=await hc(e.itemId);if(!t.isOk())throw Error("Failed to load item");let r=await tA.fieldValueByIdentifier(t.value,e.action.identifier);if(!r.isOk())throw Error("Failed to get field value by identifier");r.value.mustRecordItemUsage&&Ks(t.value,cA.ItemUsageAction.SecureCopy)}}async function q3A(){(await _k()).forEach(async j=>browser.tabs.sendMessage(j.id,{name:"item-detail-value-drag-end"}))}async function v3A(A){let j=await Gt();if(typeof j?.id!="number")return console.error("Call to handleShowVirtualCardCreateDialog but tab id was missing"),!0;switch(A.data.provider){case yd.Privacy:Kk(j.id,{name:"privacy-create-credit-card",data:{}});break;case yd.Brex:Kk(j.id,{name:"brex-create-credit-card",data:{}});break;default:ue(A.data.provider)}return!0}async function x3A(A){return B6(),VMA(A.data.request)}async function f3A(A){return B6(),ZMA(A.data)}function G3A(A){return B6(),b9A(A.data)}async function F3A(A){return tA.refreshTotp(A.data.request)}async function b3A(){let A=await U3A();A&&(await Un({closePopup:!1}),A8({initiatedByUserAction:!0,lockScreenMessage:JZj(A)}).then(Ig))}async function $9A(){await Un({closePopup:!1}),A8({initiatedByUserAction:!0,lockScreenMessage:nA("Authentication was interrupted or timed out. Please try again.")}).then(Ig)}async function y3A(){let A=ce.getItem("offline-mfa-accounts");if(A){let e=JSON.parse(A)[0],t=_.findAccountHandlerByUuid(e);if(!t)return $9A();let r=`${t?.serveraccount.signinAddress}/signin/?a=${t?.serveraccount.userUUID}&auth-only=1`;try{await sp({url:r,ignoreIfDuplicate:{activateExisting:!0}})}catch(a){console.warn("Not opening a new B5 tab for MFA re-authentication",a)}finally{Go()}}else return $9A()}function JZj(A){switch(A){case"UnhandledSLSMessage":return nA("Couldn't complete authentication. Update 1Password for desktop and try again.");case"PasswordTimeboxUnavailable":case"DuoAuthenticatorUndefined":return nA("Authentication was interrupted or timed out. Please try again.");default:return ue(A)}}async function ub(){if(ut()){let A=await Gt();await He.openTab({url:IF(),openerTabId:A?.id})}else await He.openTab({url:"onepassword://"})}async function K6A(){if(na()){let A=`chrome-extension://${browser.runtime.id}/popup/index.html`;return VSA.matchAll({type:"window"}).then(j=>j.some(({url:e,visibilityState:t})=>e.startsWith(A)&&t==="visible")).catch(()=>!0)}else return browser.extension.getViews({type:"popup"}).length>0}function t2(){return!It()&&(browser.action?.openPopup!==void 0||browser.browserAction?.openPopup!==void 0)}function Dg(){if(browser.action?.openPopup!==void 0){try{browser.action.openPopup()}catch{console.info("The pop-up cannot be programatically opened.")}return}if(browser.browserAction?.openPopup!==void 0){try{browser.browserAction.openPopup()}catch{console.info("The pop-up cannot be programatically opened.")}return}console.info("Opening the popup is not supported in this browser.")}function UZj(){let A=setTimeout(()=>{try{nr.unsubscribe(Or,j)}catch{console.info("Unlock listener was already unsubscribed or was never registered")}},3e4),j=()=>{f6()?setTimeout(()=>{Dg()},500):Dg(),clearTimeout(A)};nr.subscribe(Or,j,{once:!0})}async function $3A(){return X3A()}async function w3A(A){let j=new Map,{data:e}=A,t=_.getAccountHandlers.filter(r=>r.isUnlocked&&r.hasSignedInClient&&r.canUseTrustedDeviceAuth());return t.length===0?{enrollments:[]}:(j=await UM(t,e),j?{enrollments:Array.from(j.values())}:{enrollments:[]})}async function I3A(A){let j=_.findAccountHandlerByUuid(A.data.accountUuid);if(!j||!j.hasSignedInClient){Ed(void 0),await Jk({type:"failed",accountUuid:A.data.accountUuid,enrollmentUuid:A.data.enrollmentUuid,content:{type:"AccountNotFound"}});return}await XM({accountUuid:A.data.accountUuid,enrollmentUuid:A.data.enrollmentUuid,verificationCode:"",attempts:0},j)}async function D3A(A){if(A.data.type!=="cancel"){console.error(`Invalid type ${A.data.type}, expected "cancel"`,A);return}let{accountUuid:j,enrollmentUuid:e}=A.data.content,t=_.getAccountHandlers.filter(a=>a.isUnlocked&&a.hasSignedInClient&&a.canUseTrustedDeviceAuth());if(t.length===0){console.error("Failed to find any accounts in scope for trusted device enrollment");return}let r=t.find(a=>a.uuid===j);if(!r){console.error(`Failed to find account ${j} for enrollment ${e}`);return}try{await kb(e,r)}catch(a){console.error(`Failed to cancelEnrollment for account ${j} and enrollment ${e}:`,a)}}function O3A(A){return T6A()}function P3A(A){Ed(A.data.activeDeviceEnrollment)}async function C3A(){let A=await wS(),j=HM();return{accounts:A,exclusions:j}}function H3A(){return HS()}function T3A(A){return!!_.getMustMigrateAuthAccount(A.data.accountUuid)}function K3A(A){return!!_.getMustMigrateAuthAccount()}async function S3A(A){let j=_.findAccountHandlerByUuid(A.data.accountUuid);if(j&&!j.mustMigrateAuth)return await XZj(j),j.getActivationHubTasks();throw Error("No account handler")}var XZj=async A=>{let j=A?[A]:_.getAccountHandlers;for(let e of j)if(e.isUnlocked&&e.b5account.type==="F"&&!qv(e.uuid,ix.InviteFamilyMembers)){let t=await e.getAccountUserCounts();t&&(t.activeGuests>0||t.activeMembers>1)?e.completeActivationHubTaskByName(ix.InviteFamilyMembers):(await e.getPendingInvites()).length>0&&e.completeActivationHubTaskByName(ix.InviteFamilyMembers)}};async function M3A(A){let j=_.findAccountHandlerByUuid(A.data.accountUuid);if(j&&j.isUnlocked)return j.completeActivationHubTaskByName(A.data.taskName,A.data.dismissed)}async function _3A(){let A=chrome.runtime.getURL("");await He.openTab({url:`${A}inline/tutorial/tutorial.html?close=true`})}async function L3A(A){await Un({closePopup:!1}),A8({initiatedByUserAction:!0,lockScreenMessage:A}).then(j=>{Ig(j)})}async function N3A(A){let j=A.data.accountUuid,e=_.findAccountHandlerByUuid(j);return e&&e.user&&e.client?.CTX?(await LA.getPerson(e.client.CTX,{uuid:e.user.uuid},{attrs:fA.Person.Attr.Devices,mustReload:!0})).devices:[]}async function z3A(A){let j=_.findAccountHandlerByUuid(A.data.accountUuid);if(j)return await j.inviteUsersViaEmail(A.data.emails,A.data.role)}async function R3A(A){return await tA.getRichIconForUrl(A.data.url,A.data.title,!0)}async function J3A(A){return tA.nakedDomainForUrls(A.data)}async function U3A(){let A=Y3A();if(pd())try{await ie.desktopConnectionManager?.requestUpgradeFromOfflineState();return}catch(j){let e=j===ux.UnknownInvocation;if(!A)return console.warn("Could not requestUpgradeFromOfflineState",{activeTimebox:A,ophRequestTypeUnsupported:e}),e?jD.UnhandledSLSMessage:jD.PasswordTimeboxUnavailable}if(!A)return jD.PasswordTimeboxUnavailable;try{await V3A(),It()&&Go()}catch(j){return console.error("[Duo MFA] Could not complete Duo Authentication in browser",j),jD.DuoAuthenticatorUndefined}}async function Fo(){qt.updateConnectivityStatus();let A=W3A(),j={id:"must-upgrade-offline",title:nA("Your account is offline"),accountUuid:A};if(await qt.connectivityStatus()==="offlineAuthenticationFailed"){if(A){as({...j,text:nA("You won't be able to save changes until you finish signing in."),primaryAction:{id:"open-mfa-prompt-id",label:nA("Continue Signing In"),destructive:!1,action:{type:"BeginDuoMfa"}},cancelAction:nA("Stay Offline")});return}ISA();return}await qt.connectivityStatus()==="networkOffline"&&as({...j,text:nA("You won't be able to save changes until you are signed in and online."),primaryAction:{id:"ok",label:nA("Ok"),destructive:!1,action:{type:"Ok"}}})}async function Q3A(A,j){let e={accountUuid:A.accountUUID,sessionId:j};return ut()?Z3A(e):ie.desktopConnectionManager?.requestDsecretProxy(e)}var ALA=A=>q.errors.isServerError(A,q.errors.ServerErrorCode.authenticationRequired,q.errors.HTTPStatusCode.unauthorized);async function jLA(A){let j=await xa.vaultItemToApi(A);return A.localId&&(j.id=A.localId),j}var a2,Y6A,aLA;async function V3A(){if(!a2)throw new Error("duo authenticator not initialized");return console.info("[Duo MFA] Opening and navigating to the Duo MFA URL"),a2()}function Q6A(){Y6A?.(),Y6A=void 0,a2=void 0}function W3A(){return aLA}function eLA(A){aLA=A}function Y3A(){return!!drA(!0)}async function kd({credentials:A,device:j,onServerChanged:e,onClientInvalidated:t,accountAttrs:r,additionalSignInOptions:a}){let n=await YZj(A,j,r,a);if(!n)throw new Error("No context provided to sign into account.");return new Dv({signinAddress:A.signinAddress,signedInContext:n,deviceUuid:j.uuid,onServerChanged:e,onClientInvalidated:t})}async function S6A(A,j,e){let t=Uo(A,j);return await LA.initialize(t,1,e),t}var Bd=class extends Error{constructor(){super(...arguments);this.name="InvalidClientError"}},Dv=class{constructor({signinAddress:j,signedInContext:e,deviceUuid:t,onServerChanged:r,onClientInvalidated:a,requestDelegatedSession:n,srpX:o}){this._invalid=!1;this.safeRegisterContext=j=>{this._dangerousInnerCTX=j,this._dangerousInnerCTX.nc.on(q.notification.ServerChanged,this.handleServerDidChange),this._dangerousInnerCTX.nc.on(q.notification.ServerConnected,this.handleServerDidConnect),this._dangerousInnerCTX.session.nc.on(q.notification.SessionRequestIdChanged,this.handleSessionRequestIdChanged),XD(this,"All")};this.getDelegateSessionInit=async j=>this.executeWithReauth(E`getDelegateSessionInit`,async e=>LA.delegateSession(e,j,!1));this.signDeviceTrustPublicKey=async j=>this.executeWithReauth(E`signDeviceTrustPublicKey`,async e=>cA.signDeviceTrustPublicKey(e.session,j));this.signOut=async()=>{if(!this.CTX){yn(new Error("Client Sign-out Failed"),E`cannot sign out a context that is not defined`);return}await this.safeSignOutClient(this.CTX,E`MANUAL`)};this.getLatestUserPreferences=async()=>{if(!this.CTX){let e=E`Unable to get user preferences. CTX is undefined`;throw console.error(e.str),new q.LoggableError({errorClass:E`ClientError`,message:e})}return this.CTX.user?(await cA.getUser(this.CTX.session,this.CTX.user.uuid,Hr.Attr.None)).preferences:void 0};this.isSignedIn=()=>this.CTX?.isSignedIn()??!1;this.saveItem=async(j,e)=>(await this.saveItems([j],e))[0];this.saveItems=async(j,e)=>{let t=await Promise.all(j.map(jLA)),r=await this.executeWithReauth(E`saveItems`,async a=>cA.patchVaultItems(a.session,e.uuid,e.contentVersion,t));if(r&&r.updatedItems&&Object.keys(r.updatedItems).length>0)return j.forEach(a=>{a.itemVersion=r.updatedItems[a.uuid]}),t;throw new Error(`Failed to save ${j.length} item(s) with vault ${e.uuid} in ${this.accountUUID}: no items updated`)};this.getAccountOverview=async()=>this.executeWithReauth(E`getAccountOverview`,async j=>cA.getAccountOverview(j.session));this.executeWithReauth=async(j,e)=>{if(this.reauthenticating){`${this.logPrefix.str}${j.str}`;let o=await this.reauthenticating.promise;if(o.type==="failure"){let i=`Did not request "${j.str}" in flight reauthentication failed: ${o.reason.str}`;throw new Bd(i)}}if(!this.CTX){let o=`Cannot invoke "${j.str}" or reauthenticate a context that doesn't exist`;throw console.error(o),new Bd(o)}let t=this.CTX;if(!t.account?.uuid){let o=`Will not invoke "${j.str}" or reauthenticate a context without an account uuid`;throw console.error(o),new Bd(o)}let r=t.account.uuid,a;try{return await lrA(async()=>e(t),j,this.logPrefix,E`with reauth support`)}catch(o){a=o}if(!ALA(a))throw`${this.logPrefix.str}${j.str}`,a;let n=await this.handleReauthenticate(j,r,t);if(n.type==="success"&&this.mustMigrate(n.ctx)){await L3A(nA("Grace period for authentication method migration has expired. Please sign in again.")),this.safeInvalidate(E`must-migrate`);let o=`failed to request "${j.str}" and reauthenticated ctx must be migrated`;throw new Bd(o)}if(n.type!=="success"){let o=`failed to request "${j.str}" and failed to reauthenticate: ${n.reason.str}`;throw new Bd(o)}return await lrA(async()=>e(n.ctx),j,this.logPrefix,E`with reauth support - attempt 2`)};this.safeInvalidate=async j=>{if(console.info(`${this.logPrefix.str}: "${j.str}" start invalidating`),this._invalid){`${this.logPrefix.str}${j.str}`;return}`${this.logPrefix.str}${j.str}`,this._invalid=!0,this.CTX&&await this.safeSignOutClient(this.CTX,j);try{this.onClientInvalidated?.(this)}catch(e){yn(e,E`Encountered error while invoking invalidate callback`)}`${this.logPrefix.str}${j.str}`};this.getAccount=async()=>this.executeWithReauth(E`getAccount`,async j=>cA.getAccountWithAttrs(j.session,[cA.AccountAttrs.Me,cA.AccountAttrs.Billing,cA.AccountAttrs.SettingsTeamMemberPolicies,cA.AccountAttrs.Tier]));this.getKeysets=async()=>this.executeWithReauth(E`getKeysets`,async j=>cA.getKeysets(j.session));this.getVault=async j=>{if(!this.CTX)throw new Error("Unable to get vault. CTX is undefined.");return(await this.CTX.session.request({name:Z("getVault"),method:"GET",url:"/api/v2/vault/"+j+"?attrs=combined-access,archived-keys",encrypted:!0})).json()};this.getItemTemplates=async()=>this.executeWithReauth(E`getItemTemplates`,async j=>cA.getAccountTemplates(j.session,!1));this.postItemUsage=async j=>{let e=j.map(t=>{let r=new Date;return r.setTime(t.used_at),{vaultUuid:t.vault_uuid,itemUuid:t.item_uuid,usedAt:ec(r),usedVersion:t.used_version,action:t.action}});return this.executeWithReauth(E`postItemUsage`,async t=>cA.reportItemUsage(t.session,e))};this.getFile=async(j,e)=>this.executeWithReauth(E`getFile`,async t=>cA.getFile(t.session,e,j.uuid,j.vault.uuid));this.uploadFile=async j=>{let{data:e,attributes:t}=await xa.encryptFile(j),{fileId:r,signingKey:a}=await this.executeWithReauth(E`uploadFile`,async n=>cA.uploadFile(n.session,e));if(r)return{...t,fileId:r,signingKey:a};throw new Error("Session did not provide file ID.")};this.getDocumentBlob=async(j,e)=>this.executeWithReauth(E`getDocumentBlob`,async t=>LA.getDocumentBlob(t,j,e));this.getPendingDeviceEnrollments=async()=>{try{return await this.executeWithReauth(E`getPendingDeviceEnrollments`,async j=>LA.getPendingDeviceEnrollments(j))}catch(j){if(j instanceof Bd){console.warn("Failed to get pending device enrollments: ",j);return}let e=q.errors.isServerError(j)?q.logsafe.assertLogSafe(`getPendingDeviceEnrollments returned server error (code: ${j.code})`):E`getPendingDeviceEnrollments request failed`;yn(new q.LoggableError({errorClass:E`GetPendingDeviceEnrollments`,message:e,userUuid:this.CTX?.user?.uuid?q.logsafe.assertLogSafe(this.CTX?.user?.uuid):void 0,stackOverrideError:j instanceof Error?j:void 0}),E`Failed to get pending device enrollments`);return}};this.cancelPendingDeviceEnrollment=async j=>this.executeWithReauth(E`cancelPendingDeviceEnrollment`,async e=>LA.cancelDeviceEnrollment(e,j));this.fetchPolicies=async()=>{if(!this.CTX)throw new Error("CTX undefined.");return this.executeWithReauth(E`fetchPolicies`,async()=>{let j=await LA.getAllPoliciesForCurrentAccount(this.CTX);return{...j,policies:j.policies.map(e=>{switch(e.policyName){case"auto-lock":case"release-channels":case"ssh-bookmarks":case"cli-integration":case"app-launcher-allowed":case"allow-maps":case"restrict-failed-login-attempts":case"reporting":case"extension-allowed":case"Unsupported":return e;default:try{ue(e)}catch{}return{policyName:"Unsupported",policyContext:"",definition:{},version:0}}})}})};this.getKolideApps=async()=>this.executeWithReauth(E`getKolideApps`,async j=>await cA.getKolideApps(j.session));this.getGroups=async j=>this.executeWithReauth(E`getGroups`,async e=>await cA.getGroups(e.session,fA.Group.Attr.None,j));this.getGroupPubKeys=async j=>this.executeWithReauth(E`getGroupPubKeys`,async e=>await cA.getGroupPubKeys(e.session,j));this.createManagedCredentials=async j=>this.executeWithReauth(E`createManagedCredentials`,async e=>await LA.createManagedCredentials(e,j));this.getManagedCredentialPolicies=async()=>this.executeWithReauth(E`getManagedCredentialPolicies`,async j=>await LA.getManagedCredentialPolicies(j));this.handleServerDidConnect=()=>{!this.accountUUID||!hj.accountHasFlag(this.accountUUID,"core-securityDevelopment-sync-notifierConnection")||this.handleServerDidChange()};this.handleServerDidChange=(...j)=>{let e=j[0];this.CTX?.isSignedIn()&&this.onServerChanged&&this.onServerChanged(e)};this.handleSessionRequestIdChanged=()=>{XD(this,"Request")};this.uuid=e.account?.uuid,this.signinAddress=MKA(j),this.deviceUuid=t,this.debugName=e.account?.name+"/"+e.domain,this.safeRegisterContext(e),this.onClientInvalidated=a,this.onServerChanged=r,this.requestDelegatedSession=n,this._srpX=o,this.logPrefix=Z(`Client-${this.uuid?this.uuid:"unknown"}`)}get invalid(){return this._invalid}get CTX(){return this._dangerousInnerCTX}get accountUUID(){return this.uuid}get deviceUUID(){return this.deviceUuid}account(){return this.CTX?.account}user(){return this.CTX?.user}get srpX(){if(this._srpX)return this._srpX;if(this.CTX?.session?.auth?.srpX)return this.CTX.session.auth.srpX;let j="Failed to determine srpX";throw console.error(j),new Error(j)}async handleReauthenticate(j,e,t){if(`${this.logPrefix.str}${j.str}`,this.reauthenticating)return`${this.logPrefix.str}${j.str}`,this.reauthenticating.promise;this.reauthenticating=js();let r=await this.safeReauthenticate(j,e,t);return r.type==="failure"&&(console.info(`${this.logPrefix.str}: "${j.str}" could not reauthenticate: ${r.reason.str} - invalidate context`),await this.safeInvalidate(j)),r.type==="success"&&(`${this.logPrefix.str}${j.str}`,this.safeRegisterContext(r.ctx),this._signOut(t).catch(a=>{yn(a,E`Could not sign stale CTX out - continuing reauthentication`)})),this.reauthenticating.resolve(r),this.reauthenticating=void 0,r}async safeReauthenticate(j,e,t){return this.reauthenticate(j,e,t).catch(()=>({type:"failure",reason:Z("unknown-reauth-error")}))}async reauthenticate(j,e,t){let r=await this.safeReauthWithDelegatedSession(j,e,t);if(r.type==="success")return r;if(`${this.logPrefix.str}${j.str}${r.reason.str}`,r.type==="failure"&&r.reason.str==="user-suspended")return`${this.logPrefix.str}${j.str}`,r;let a=await this.safeReauthWithMukSrpX(j,e,t);return a.type==="success"||`${this.logPrefix.str}${j.str}${a.reason.str}`,a}async safeReauthWithDelegatedSession(j,e,t){return this.reauthWithDelegatedSession(j,e,t).catch(()=>({type:"failure",reason:Z("unknown-delegate-error")}))}async reauthWithDelegatedSession(j,e,t){if(`${this.logPrefix.str}${j.str}`,!this.requestDelegatedSession)return{type:"failure",reason:Z("no-delegated-session-available")};let r;try{r=await this.requestDelegatedSession(e)}catch{return{type:"failure",reason:Z("delegating-session")}}if(r.isErr())return r.error.type==="RequestError"&&r.error.content===Yg.UserSuspended?{type:"failure",reason:Z("user-suspended")}:{type:"failure",reason:Z(`session-error-${r.error.type}`)};let{notifier:a,sessionKey:n}=r.value,o;try{o=await LA.getInitializationExport(t)}catch{return{type:"failure",reason:Z("initializing-context")}}let i;try{i=await S6A(this.signinAddress,this.deviceUUID,{...o,serverConfig:{notifier:a},sessionKey:n})}catch{return{type:"failure",reason:Z("building-new-context")}}return{type:"success",ctx:i}}async safeReauthWithMukSrpX(j,e,t){return this.reauthWithMukSrpX(j,e,t).catch(()=>({type:"failure",reason:Z("unknown-muk-srpx-error")}))}async reauthWithMukSrpX(j,e,t){`${this.uuid}${j.str}`;let r=await this.buildMukSrpXCredentials(e,t);if(r.type==="failure")return r;let a;try{a=Uo(this.signinAddress,this.deviceUUID)}catch{return{type:"failure",reason:Z("failed-initializing-new-ctx")}}let n;try{n=await nLA(a,r.credentials,void 0)}catch(o){let i="muk-request-failed-unknown";return q.errors.isServerError(o)&&(i=`muk-request-failed-${o.code}`),`${this.uuid}${j.str}${i}`,{type:"failure",reason:Z(i)}}return{type:"success",ctx:n}}async buildMukSrpXCredentials(j,e){if(!e.user?.uuid)return{type:"failure",reason:Z("missing-user-uuid")};if(!e.user.masterKey)return{type:"failure",reason:Z("missing-master-key")};if(!e.user.secretKey)return{type:"failure",reason:Z("missing-secret-key")};let t;try{t=await e.user.masterKey.exportJwk()}catch{return{type:"failure",reason:Z("export-jwk-failed")}}let r;try{r=e.user.secretKey.exportSensitiveReadableString()}catch{return{type:"failure",reason:Z("readable-secret-key-failed")}}return{type:"success",credentials:{accountIdentifier:{accountUUID:j,userUUID:e.user.uuid,server:e.config.server},uuid:e.user.uuid,email:e.user.email,muk:t,secretKey:r,signinAddress:this.signinAddress,srpX:this.srpX,dSecret:e.user.dSecret}}}async safeSignOutClient(j,e){try{await this._signOut(j)}catch(t){yn(t,E`Could not sign CTX out - continuing sign out cleanup`,void 0,{initiator:e})}this.onServerChanged=void 0,this._srpX=void 0,this._dangerousInnerCTX=void 0}async _signOut(j){j.nc.off(q.notification.ServerChanged,this.handleServerDidChange),j.nc.off(q.notification.ServerConnected,this.handleServerDidConnect),j.session.nc.off(q.notification.SessionRequestIdChanged,this.handleSessionRequestIdChanged),await LA.signOut(j)}mustMigrate(j){return!j.account?.uuid||!hj.accountHasFlag(j.account.uuid,"auth-self-serve-migration-v1")?!1:j.session.ssoMigrationGracePeriod?.state===Yj.State.MustMigrateAuth}async updateManagedCredential(j){return this.executeWithReauth(E`updateManagedCredential`,async e=>await LA.updateManagedCredential(e,j))}},YZj=async(A,j,e,t)=>{let{signinAddress:r}=A;q.config.setDevice(j);let a=Uo(r,j.uuid);return"accountPassword"in A?QZj(a,A,e):nLA(a,A,e,t)},e8={shouldLoadUniverse:!1,isDesignatedAsPublic:!1},nLA=async(A,j,e,t)=>{let r={...e8,...t},a=await LA.signIn(A,j,r);if(a.type==="domain_changed"&&(A.resetWithHost(a.newHost),a=await LA.signIn(A,j,r),a.type==="domain_changed"))throw new Error("Failed to sign in using new domain from server.");if(a.type==="mfa_required"&&(j.dSecret&&!a.details.dsecret?.enabled&&console.info("MFA flow: B5 signin returned undefined or false dsecret.enabled"),await iLA(A,a.details,j)),!A.user){let n=new Error("Missing CTX user when signing in with Muk and SrpX.");throw yn(n,E`Missing CTX user`),n}return A.account=await oLA(A,e),A},QZj=async(A,j,e)=>{let t=performance.now(),r=Ya.SecretKey.fromInput(j.secretKey);if(!r)throw new Error(`Secret Key for account ${j.accountIdentifier.accountUUID} invalid.`);let a={email:j.email,secretKey:r,password:j.accountPassword};try{let n=await LA.signIn(A,a,e8);if(n.type==="domain_changed"&&(A.resetWithHost(n.newHost),n=await LA.signIn(A,a,e8),n.type==="domain_changed"))throw new Error("Failed to sign in using new domain from server.");n.type==="mfa_required"&&(n.details.duo?.enabled&&rTA(a.password),await iLA(A,n.details,j))}catch(n){if(!A.isSignedIn())throw n}return A.user?(A.user.password=j.accountPassword,A.account=await oLA(A,e),A.user.password=void 0,console.info(`Signed in successfully to ${A.account.uuid} and loaded account details. %cElapse time ${(performance.now()-t).toFixed(0)}ms.`,"color:blue"),A):Promise.reject("Missing user")},oLA=async(A,j)=>{let e=await cA.getAccountWithAttrs(A.session,[cA.AccountAttrs.Me,cA.AccountAttrs.SettingsTeamMemberPolicies,...j||[]]);return(await xa.parseAccount(A,e)).account},iLA=async(A,j,e)=>{if(e.dSecret&&j.dsecret?.enabled){console.info("[MFA] Completing sign-in with dSecret...");try{await LA.completeMFASignInWithDSecret(A,e.dSecret,e8),rLA(e.accountIdentifier.accountUUID);return}catch(t){if(tLA(e.accountIdentifier.accountUUID),Eu(t,Tc.invalidMFA))console.error("Unable to complete MFA sign-in with stored dSecret. Device deauthorized?");else throw yn(t,E`Unexpected error when completing MFA with stored dSecret`,q.logsafe.assertLogSafe(e.accountIdentifier.userUUID)),t}}if(j.duo?.enabled){console.info("[Duo MFA] Completing MFA sign-in with Duo..."),eLA(e.accountIdentifier.accountUUID);try{A.user&&(A.user.password=void 0);let t=new S5;Fo(),ut()?await t.beginAuth(j):a2=async()=>Promise.resolve(t.beginAuth(j)),Y6A=()=>t.cancelAuth();let r=await t.completed();if(A.user){let a=drA();typeof a=="string"&&(A.user.password=a)}await LA.completeMFASignInWithDuo(A,{type:"duov4",code:r},{isDesignatedAsPublic:!0,shouldLoadUniverse:!0}),console.info("\u2705 Duo code successfully submitted!");return}catch(t){throw eLA(void 0),console.error("\u26D4 Duo auth failed:",t),new a5(0,"Unable to finish sign in because Duo MFA failed.")}finally{Q6A()}}if(j.dsecretProxy?.enabled){console.info("[MFA] Completing MFA sign-in with dSecret proxy...");try{let t=await Q3A(e.accountIdentifier,A.session.sessionUuid);if(!t)throw new Error("No dSecret proxy returned");try{await LA.completeMFASignInWithDSecretProxy(A,t.dsecretHmac,t.deviceUUID,e8),rLA(e.accountIdentifier.accountUUID);return}catch(r){yn(r,E`Unable to complete MFA sign-in with dSecret proxy.`,q.logsafe.assertLogSafe(e.accountIdentifier.userUUID))}}catch{console.error("Desktop App not connected or dSecret not available")}}throw tLA(e.accountIdentifier.accountUUID),new mu(q.errors.ClientErrorCode.invalidMFA,q.logsafe.L`Unable to sign in with available MFA options.`)},tLA=A=>{let j=ce.getItem("offline-mfa-accounts");if(j){let e=JSON.parse(j);if(!e.find(r=>r===A)){let r=[...e,A];ce.setItem("offline-mfa-accounts",JSON.stringify(r))}}else ce.setItem("offline-mfa-accounts",JSON.stringify([A]))},rLA=A=>{let j=ce.getItem("offline-mfa-accounts");if(j){let t=JSON.parse(j).filter(r=>r!==A);ce.setItem("offline-mfa-accounts",JSON.stringify(t))}};var iNA=W(LLA());var NLA=3e5,zLA=async A=>{if(A?.mediation==="conditional")return As();if(!A?.publicKey?.timeout)return As();let j=Math.max(A.publicKey.timeout,NLA);return As(j)},RLA=async A=>{if(!A?.publicKey?.timeout)return As();let j=Math.max(A.publicKey.timeout,NLA);return As(j)},g2=A=>atob(A.replace(/-/g,"+").replace(/_/g,"/")).split("").map(j=>j.charCodeAt(0)),JLA=async A=>{let j=await Ij.loadItemCache();if(!j)return[];let e=hr();return j.itemsForTab(A,t=>{if(t.state!==dA.ItemState.Active||t.templateUuid!==Je||t.overview.passkey)return!1;let r=t.vault.localId?j.accountForVaultID(t.vault.localId):void 0;return!(!r||e.isExcluded(r.uuid,t.vault.uuid))})},ULA=A=>{let j=new Map;return A.forEach(e=>{j.set(e.uuid,e)}),Array.from(j.values())},lp=A=>btoa(String.fromCharCode.apply(null,A)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");async function h2(A,j=[]){let e=await Ij.loadItemCache();if(!e)return[];let t=hr(),r=j.map(a=>({...a,id:lp(a.id)}));return e.fillableItems(a=>{if(a.state!==dA.ItemState.Active||a.overview.b5AccountUUID&&!Fb(a.overview.b5AccountUUID))return!1;let n=a.vault.localId?e.accountForVaultID(a.vault.localId):void 0;if(!n||t.isExcluded(n.uuid,a.vault.uuid)||a.overview.passkey&&typeof a.overview.passkey.credentialId!="string")return!1;let o=a.overview.passkey?.credentialId;if(!a.overview.passkey||typeof a.overview.passkey.rpId!="string"||a.overview.passkey.rpId!==A)return!1;let i=r.some(s=>s.type==="public-key"&&s.id===o);return!(j.length>0&&!i)})}function XLA(A){let j=A.overview.passkey,e=A.details.passkey;return!j||!e||!fA.VaultItem.isKnownPasskey(e)||e.type!=="webauthn"?(console.warn("Item was missing required key data"),TA(void 0)):Oj({credential_id:g2(j.credentialId),key:g2(e.privateKey),user_handle:g2(e.userHandle),rp_id:j.rpId??"",prf:zje(e.prf)})}function zje(A){return A?{alg:A.alg,cred_with_uv:g2(A.credWithUv)}:void 0}function VLA(A){if(A)return{numCreds:1}}function WLA(A){if(A&&A.alg==="HMAC_SHA256")return{alg:A.alg,credWithUv:lp(A.cred_with_uv)}}var q2=A=>A instanceof Error?A.message in TPA?oj.assertLogSafe(A.message):(A.message,oj.assertLogSafe("unknown")):oj.assertLogSafe("unknown"),v2=A=>A instanceof Error?A.message in KPA?oj.assertLogSafe(A.message):(A.message,oj.assertLogSafe("unknown")):oj.assertLogSafe("unknown"),x2=()=>{throw new Error("timeout")},Ol=(A,j)=>(o8(A,j),f2(A)),hd=(A,j,e)=>(pnA(A,j,e),f2(A)),pnA=(A,j,e)=>{if(!j)try{let[a]=_.defaultSavingLocation();j=a.uuid}catch{}let t=e?E`${e}: ${A}`:A,r="";try{j&&(r=_.findAccountHandlerByUuid(j)?.accountIdentifier.userUUID??""),o8(A,j),lj(new q.LoggableError({errorClass:E`HandleGetCredential`,message:t,userUuid:oj.assertLogSafe(r)}))}catch{console.error("An error was encountered while reporting handleGetCredential")}},o8=(A,j)=>{switch(A.str){case"timeout":gd(Qi.UsingPasskeyFailureTimeout,j);break;case"disabled":case"unauthorized":case"missing-url":case"missing-public-key":case"bad-rp-id":gd(Qi.UsingPasskeyFailureBadinput,j);break;case"authenticating-failed":case"corrupted-item":case"internal-error":case"messenger-error":case"port-error":case"unexpected-response":case"vault-data-failed":case"vault-icons-failed":case"conflicting-state":gd(Qi.UsingPasskeyFailureInternal,j);break;case"unknown":gd(Qi.UsingPasskeyFailureUnknown,j);break;case"missing-item":gd(Qi.UsingPasskeyFailureMissingItem,j);break;case"missing-cached-id":case"user-cancelled":case"fallback-requested":break;default:ue(A.str)}},f2=A=>({type:"get-credential-error",data:{reason:A.str}}),YLA=(A,j)=>({type:"get-credential-success",data:{credential:A,accountUuid:j}}),qd=(A,j)=>(QLA(A,j),ZLA(A)),Uk=(A,j)=>(Tv(A,j),ZLA(A)),Tv=(A,j)=>{if(!j)try{let[t]=_.defaultSavingLocation();j=t.uuid}catch{}let e="";try{j&&(e=_.findAccountHandlerByUuid(j)?.accountIdentifier.userUUID??""),QLA(A),lj(new q.LoggableError({errorClass:E`HandleCreateCredential`,message:A,userUuid:oj.assertLogSafe(e)}))}catch{console.error("An error was encountered while reporting handleCreateCredential")}},QLA=(A,j)=>{switch(A.str){case"timeout":gd(Qi.SavingPasskeyFailureTimeout,j);break;case"disabled":case"missing-public-key":case"missing-url":case"unauthorized":case"duplicate":gd(Qi.SavingPasskeyFailureBadinput,j);break;case"create-passkey-failed":case"internal-error":case"messenger-error":case"port-error":case"unexpected-response":case"preview-failed":case"save-passkey-failed":case"vault-data-failed":gd(Qi.SavingPasskeyFailureInternal,j);break;case"unknown":gd(Qi.SavingPasskeyFailureUnknown,j);break;case"user-cancelled":case"fallback-requested":break;default:ue(A.str)}},ZLA=A=>({type:"create-credential-error",data:{reason:A.str}}),ANA=(A,j)=>({type:"create-credential-success",data:{credential:A,accountUuid:j}}),gd=(A,j)=>{if(!j){try{let[e]=_.defaultSavingLocation();Bc(e.uuid,A)}catch{}return}Bc(j,A)},Rje=()=>_.getAccountHandlers.reduce((j,e)=>{let t=v_A(e.accountIdentifier.accountUUID);return j.concat(t.credentialIds)},[]),jNA=async A=>{let j=Rje(),e=A.map(r=>lp(r.id)).map(w6A);return(await Promise.all(e)).some(r=>j.includes(r))};async function mnA(){let A=await _A.getDatabase().getAllAccounts();return A.length===0?!0:A.some(j=>j.teamMemberPolicies===void 0?!1:j.teamMemberPolicies.blockPasskeyAuthenticator)}async function EnA(){let A=await _A.getDatabase().getAllAccounts();return A.length===0?!0:A.every(j=>j.teamMemberPolicies===void 0?!1:j.teamMemberPolicies.blockPasskeyAuthenticator)}function Fb(A){let j=_.findAccountHandlerByUuid(A);if(!j)return!0;let{teamMemberPolicies:e}=j.serveraccount;return e?!e.blockPasskeyAuthenticator:!0}var G2=xg(),F2=A=>{A||G2.broadcast({type:"b5x-unlocked",data:{}}),A&&G2.broadcast({type:"b5x-locked",data:{}})},eNA=async(A,j,e)=>{if(j!=="google.com"||A.origin!=="https://accounts.google.com")return;let t=(e||[]).map(n=>lp(n.id));if(t.length===0)return;let a=(await h2(j,[])).filter(n=>!!n).filter(n=>typeof n.overview.passkey?.credentialId>"u"?!1:t.includes(n.overview.passkey.credentialId));if(a.length!==0)return console.warn("Failed to validateExcludeCredentials: duplicate"),{reason:oj.assertLogSafe("duplicate"),accountUuid:a[0].overview.b5AccountUUID}};async function sNA(A,j){let e;try{e=await Jje(A,j)}catch(t){return console.error("_handleCreateCredential threw exception",t),Uk(oj.assertLogSafe("unknown"),void 0)}return e.type==="create-credential-success"&&gd(Qi.SavingPasskeySuccess,e.data.accountUuid),e}async function Jje(A,{tab:j,frame:e}){let t=_?.allAccountHandlersAreLocked??!0,[r,a]=await Promise.all([mnA(),EnA()]).catch(v=>(We(v)?lj(v):lj(new q.LoggableError({errorClass:E`HandleCreateCredential`,message:E`db-policy-lookup-failed`})),[!0,!0]));if(t&&r||!t&&a)return console.warn("Could not complete _handleCreateCredential: disabled"),qd(oj.assertLogSafe("disabled"),void 0);if(!A.data?.publicKey)return console.warn("Could not complete _handleCreateCredential: missing-public-key"),qd(oj.assertLogSafe("missing-public-key"),void 0);let n=A.data.publicKey,o=RLA(A.data),i=j.URL(),s=e.URL();if(!i||!s)return console.error("Failed to _handleCreateCredential: missing-url"),Uk(oj.assertLogSafe("missing-url"),void 0);if(!t){let v=await eNA(s,n.rp.id,n.excludeCredentials);if(v)return console.error("Failed to _handleCreateCredential:",v.reason.str),qd(v.reason,v.accountUuid)}let l=await cD(j.id,{type:"passkeySavePrompt"},5);if(!l)return console.error("Failed to send message: messenger-error"),Uk(oj.assertLogSafe("messenger-error"),void 0);let d;try{d=await G2.getPort(oj.assertLogSafe("passkey-save-prompt"),j.id,3e3,{reqId:l})}catch{return await SF(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Tv(oj.assertLogSafe("messenger-error"),void 0)),console.error("Failed to _handleCreateCredential: port-error"),Uk(oj.assertLogSafe("port-error"),void 0)}let k;try{k=await Uje(n,i,j)}catch{return await SF(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Tv(oj.assertLogSafe("messenger-error"),void 0)),d.close(),console.error("Failed to _handleCreateCredential: preview-failed"),Uk(oj.assertLogSafe("preview-failed"),void 0)}if(_.allAccountHandlersAreLocked){d.postMessage({type:"locked-preview-passkey-data",data:k});let v=await d.raceDisconnect([d.readMessage(),o]);if(v.type==="use-system-passkeys")return d.close(),console.warn("Could not complete _handleCreateCredential while locked: use-system-passkeys"),qd(oj.assertLogSafe("fallback-requested"),void 0);if(v.type==="disconnected")return d.close(),console.warn("Could not complete _handleCreateCredential while locked: disconnected"),qd(oj.assertLogSafe("fallback-requested"),void 0);if(v.type!=="passkey-unlocked")return d.sendErrorAndClose("unexpected-response"),console.error("Failed to _handleCreateCredential while locked: unexpected-response"),qd(oj.assertLogSafe("unexpected-response"),void 0)}let u=await eNA(s,n.rp.id,n.excludeCredentials);if(u)return eS(j.id,l).catch(()=>{Tv(oj.assertLogSafe("messenger-error"),void 0)}),d.close(),console.warn("Could not complete _handleCreateCredential: validate-credentials-failed"),qd(u.reason,u.accountUuid);try{await tNA(d,k),await rNA(d,j,s,n)}catch{return await SF(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Tv(oj.assertLogSafe("messenger-error"),void 0)),d.close(),console.error("Failed to _handleCreateCredential: vault-data-failed"),Uk(oj.assertLogSafe("vault-data-failed"),void 0)}let m,I="";for(;m=await d.raceDisconnect([d.readMessage(),o]);){if(m.type==="update-passkey-save"){let{accountUuid:v}=Mk(m.data.id);I=v;break}if(m.type==="new-passkey-save"){I=m.data.accountVaultUuid.accountUuid;break}if(m.type==="passkey-unlocked")try{await tNA(d,k),await rNA(d,j,s,n);continue}catch{return await SF(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Tv(oj.assertLogSafe("messenger-error"),void 0)),d.close(),console.error("Failed to _handleCreateCredential after unlock: vault-data-failed"),Uk(oj.assertLogSafe("vault-data-failed"),void 0)}if(m.type!=="passkey-locked"){if(m.type==="use-system-passkeys")return d.close(),console.warn("Could not complete _handleCreateCredential: use-system-passkeys"),qd(oj.assertLogSafe("fallback-requested"),void 0);if(m.type==="disconnected")return d.close(),console.warn("Could not complete _handleCreateCredential: disconnected"),qd(oj.assertLogSafe("fallback-requested"),void 0);if(m.type==="timeout")return d.sendErrorAndClose("timeout"),console.warn("Could not complete _handleCreateCredential: timeout"),qd(oj.assertLogSafe("timeout"),void 0);Ws(m.type,oj.assertLogSafe("response.type"))}}if(!(I?Fb(I):!0))return console.error("User attempted to save passkey on account with passkey blocking policy"),d.sendErrorAndClose("disabled"),console.warn("Could not complete _handleCreateCredential: disabled"),qd(oj.assertLogSafe("disabled"),I);let f;try{let v={publicKey:n};f=await Promise.race([tA.webAuthnRegister({url:s.origin,request:v,isPrfEnabled:await uNA()}).catch(P=>{let D=P instanceof Error?P.message:P;throw console.error("Failed to core.webAuthnRegister:",D),new Error("create-passkey-failed")}),o.then(x2)])}catch(v){let P=q2(v);return d.sendErrorAndClose(P.str),console.error("Failed to _handleCreateCredential:",P.str),Uk(P,I)}if(m.type==="update-passkey-save")try{let v=await Promise.race([Yje(m.data.id,n,f,i,s).catch(()=>{throw new Error("save-passkey-failed")}),o.then(x2)]);v.username&&(k.username=v.username.value)}catch(v){let P=q2(v);return d.sendErrorAndClose(P.str),console.error("Failed to _handleCreateCredential:",P.str),Uk(P,I)}if(m.type==="new-passkey-save")try{await Promise.race([Wje(j.title,i,s,m.data.accountVaultUuid,n,f).catch(()=>{throw new Error("save-passkey-failed")}),o.then(x2)])}catch(v){let P=q2(v);return d.sendErrorAndClose(P.str),console.error("Failed to _handleCreateCredential:",P.str),Uk(P,I)}return d.postMessage({type:"passkey-register-success",data:k}),d.close(),ANA(f.public_key,I)}var Uje=async(A,j,e)=>{let t=YA(),r=A.user.name,a=await tA.getRichIconForUrl(j.href,e.title,t.showRichIcons),n=await tA.inferBestTitle(e.title,e.unparsedUrl)??e.title;return{username:r,icon:a,title:n}},tNA=async(A,j)=>{let{defaultSuggestedVaultId:e,vaultListElements:t}=await Bg(void 0,{includeDontSaveOption:!1,accountsFilter:Fb});t.length===0&&console.warn("No vaults available to save passkey to");let r={...j,vaultListElements:t,defaultSuggestedVaultId:e};return A.postMessage({type:"new-passkey-data",data:r}),r},rNA=async(A,j,e,t)=>{let r=lp(t.user.id),a=t.rp.id||e.host,n=await Xje(j,a,t);if(n.length===0){A.postMessage({type:"update-passkey-data",data:[]});return}let o=Qje(n,r,t.user),i=await Lk(void 0),s=await Bv(i.filter(l=>Fb(l.uuid)),n,o?.localId);if(!o){for(let l of s)if(l.type==="option"){l.data.isDefault=!0;break}}A.postMessage({type:"update-passkey-data",data:s})},Xje=async(A,j,e)=>{let t=lp(e.user.id),r=await h2(j),n=(await Promise.all(r.map(async s=>r6(s)))).filter(s=>!!s).filter(s=>s?.details.passkey?.userHandle===t),o=await JLA(A);return ULA([...n,...o]).filter(({overview:s})=>s.b5AccountUUID?Fb(s.b5AccountUUID):!0)},lNA=(A,j)=>{A.details.fields=A.details.fields??[],A.details.fields.push({id:"identifier",type:"T",value:j,designation:"username"}),A.overview.ainfo=j},cNA=(A,j,e)=>{let t=Vje(j,e);A.overview.URLs=t,A.overview.url=t[0].u},Vje=(A,j)=>(0,iNA.default)([{l:"website",u:A.origin},{l:"website",u:j.origin}],"u"),Wje=async(A,j,e,t,r,a)=>{let n=_.findAccountHandlerByUuid(t.accountUuid);if(!n)throw new Error("No valid account handler available.");let o=n.vaults.find(s=>s.uuid===t.vaultUuid);if(!o)throw new Error("Vault does not exist.");let i=new dA(o);return i.vault=o,i.state=dA.ItemState.Active,i.templateUuid=Je,i.overview.b5AccountUUID=t.accountUuid,i.overview.title=await tA.inferBestTitle(A,j.origin)??A,cNA(i,j,e),lNA(i,r.user.name),dNA(i,r,a),await $a(i),i},Yje=async(A,j,e,t,r)=>{let{itemUuid:a}=Mk(A),n=await Rr(a);if(!n)throw new Error("could not find item to update");return n.overview.URLs&&n.overview.URLs.length>0||cNA(n,t,r),n.details.fields?.find(s=>s.designation==="username")||lNA(n,j.user.name),dNA(n,j,e),await $a(n),n},dNA=(A,j,e)=>{A.overview.passkey={credentialId:e.public_key.id,rpId:e.private_key.rp_id,userHandle:lp(j.user.id),prf:VLA(e.private_key.prf)},A.details.passkey={type:"webauthn",createdAt:Math.floor(new Date().getTime()/1e3),privateKey:lp(e.private_key.key),userHandle:lp(j.user.id),prf:WLA(e.private_key.prf)}};function Qje(A,j,e){let t=A.find(r=>r?.details.passkey?.userHandle===j);return t||(t=A.find(r=>{let a=r.overview.ainfo===e.name,n=r.overview.ainfo===e.displayName;if(a||n)return r})),t}async function kNA(A,j){let e;try{e=await Zje(A,j)}catch(t){return console.error("_handleGetCredential threw exception",t),hd(oj.assertLogSafe("unknown"),void 0)}return e.type==="get-credential-success"&&gd(Qi.UsingPasskeySuccess,e.data.accountUuid),e}async function Zje(A,{tab:j,frame:e}){let t=_?.allAccountHandlersAreLocked??!0,[r,a]=await Promise.all([mnA(),EnA()]).catch(h=>(We(h)?lj(h):lj(new q.LoggableError({errorClass:E`HandleGetCredential`,message:E`db-policy-lookup-failed`})),[!0,!0]));if(t&&r||!t&&a)return console.warn("Could not complete _handleGetCredential: disabled"),Ol(oj.assertLogSafe("disabled"),void 0);let n=A.data?.publicKey;if(!n)return console.warn("Could not complete _handleGetCredential: missing-public-key"),Ol(oj.assertLogSafe("missing-public-key"),void 0);let o=zLA(A.data);if(t&&n.allowCredentials&&n.allowCredentials.length>0&&!await jNA(n.allowCredentials)){let O=oj.assertLogSafe("missing-cached-id");return console.warn("Could not complete _handleGetCredential:",O),Ol(O,void 0)}let i=j.URL(),s=e.URL();if(!s||!i)return console.error("Failed to _handleGetCredential: missing-url"),hd(oj.assertLogSafe("missing-url"),void 0);if((await la())?.checkPageRestrictions(s.href)?.status==="blocked")return Ol(oj.assertLogSafe("disabled"),void 0);let k;try{if(k=await ip(),!k)throw console.warn("Could not complete _handleGetCredential: no-available-accounts"),new Error("no available accounts to retrieve passkey from")}catch{return console.warn("Could not complete _handleGetCredential: missing-item"),Ol(oj.assertLogSafe("missing-item"),void 0)}let u;if(t){try{u=await oNA(j.id,A.data?.mediation)}catch(O){let V=v2(O);return console.error("Failed to _handleGetCredential:",V),hd(V,void 0)}let h=await u.raceDisconnect([u.readMessage(),o]);if(h.type==="use-system-passkeys")return u.close(),console.warn("Could not complete _handleGetCredential: fallback-requested"),Ol(oj.assertLogSafe("fallback-requested"),void 0);if(h.type==="timeout")return u.sendErrorAndClose("timeout"),console.warn("Could not complete _handleGetCredential: timeout"),Ol(oj.assertLogSafe("timeout"),void 0);if(h.type==="disconnected")return u.close(),console.warn("Could not complete _handleGetCredential: disconnected"),Ol(oj.assertLogSafe("fallback-requested"),void 0);if(h.type!=="passkey-unlocked")return u.sendErrorAndClose("unexpected-response"),console.error("Failed to _handleGetCredential: unexpected-response"),hd(oj.assertLogSafe("unexpected-response"),void 0)}let m=YA(),I=await nNA(s,n,m.showRichIcons);if(I.status!=="success"){if(console.error("Failed to _handleGetCredential:",I.reason),!u){if(I.reason.str==="bad-rp-id")return console.error("Failed to _handleGetCredential while unlocked: bad-rp-id"),hd(I.reason,I.accountUuid,I.message);if(I.reason.str==="missing-item")return console.warn("Could not complete _handleGetCredential while unlocked: missing-item"),Ol(I.reason,I.accountUuid);if(I.reason.str==="vault-icons-failed")return console.error("Failed to _handleGetCredential while unlocked: vault-icons-failed"),hd(I.reason,I.accountUuid);ue(I.reason.str)}if(I.reason.str==="missing-item")console.warn("Could not complete _handleGetCredential while locked: missing-item"),o8(I.reason,I.accountUuid);else if(I.reason.str==="vault-icons-failed")console.error("Failed to _handleGetCredential while locked: vault-icons-failed"),pnA(I.reason,I.accountUuid);else{if(I.reason.str==="bad-rp-id")return console.error("Failed to _handleGetCredential while locked: bad-rp-id"),hd(I.reason,I.accountUuid,I.message);ue(I.reason.str)}return await aNA(u,o,I.reason)}let S=I.data.items;if(!u)try{u=await oNA(j.id,A.data?.mediation)}catch(h){let O=v2(h);return console.error("Failed to _handleGetCredential:",O.str),hd(O,S[0].overview.b5AccountUUID)}u.postMessage({type:"sign-in-with-passkey",data:{options:I.data.options}});let f,v;for(;f=await u.raceDisconnect([u.readMessage(),o]);){if(f.type==="select-passkey-item"){v=f.data.localId;break}if(f.type==="passkey-unlocked"){let h=await nNA(s,n,m.showRichIcons);if(h.status!=="success"){let{reason:O}=h;return console.warn("Could not complete _handleGetCredential:",O.str),o8(O,h.accountUuid),await aNA(u,o,O)}S=h.data.items,u.postMessage({type:"sign-in-with-passkey",data:{options:h.data.options}});continue}if(f.type!=="passkey-locked"){if(f.type==="use-system-passkeys")return u.close(),console.warn("Could not complete _handleGetCredential: use-system-passkeys"),Ol(oj.assertLogSafe("fallback-requested"),void 0);if(f.type==="disconnected")return u.close(),console.warn("Could not complete _handleGetCredential: disconnected"),Ol(oj.assertLogSafe("fallback-requested"),S[0].overview.b5AccountUUID);if(f.type==="timeout")return u.sendErrorAndClose("timeout"),console.warn("Could not complete _handleGetCredential: timeout"),Ol(oj.assertLogSafe("timeout"),S[0].overview.b5AccountUUID);Ws(f.type,oj.assertLogSafe("notificationState.type"))}}let P=S.find(h=>h.localId===v),D=await r6(P);if(!D)return console.error("User picked a localId that doesn't exist:",v),u.sendErrorAndClose("conflicting-state"),console.error("Failed to _handleGetCredential: conflicting-state"),hd(oj.assertLogSafe("conflicting-state"),void 0);let C=XLA(D);if(C.isErr())return console.error("Unable to find key to sign in with."),u.sendErrorAndClose("corrupted-item"),console.error("Failed to _handleGetCredential: corrupted-item"),hd(oj.assertLogSafe("corrupted-item"),D.overview.b5AccountUUID);let b;try{b=await Promise.race([tA.webAuthnLogin({url:s.origin,passkey:C.value,request:{publicKey:n},isPrfEnabled:await uNA()}).then(h=>({type:"auth-success",data:{credential:h.credential}})).catch(h=>{let O=h instanceof Error?h.message:h;throw console.error("Failed to core.webAuthnLogin:",O),new Error("authenticating-failed")}),o])}catch(h){let O=v2(h);return u.sendErrorAndClose(O.str),console.error("Failed to _handleGetCredential:",O.str),hd(O,D.overview.b5AccountUUID)}return b.type!=="auth-success"?(u.sendErrorAndClose("timeout"),console.warn("Could not complete _handleGetCredential: timeout"),Ol(oj.assertLogSafe("timeout"),D.overview.b5AccountUUID)):(u.postMessage({type:"sign-in-success",data:{}}),await u.raceDisconnect([],3500),u.close(),YLA(b.data.credential,D.overview.b5AccountUUID))}async function uNA(){let A=wm["securityDevelopment-passkeyPRF"];try{A=await Promise.race([hj.anyAccountHasFlag("securityDevelopment-passkeyPRF"),wI(1e3)])}catch{console.error(E`Failed to get user feature flags for prf`)}return A}var aNA=async(A,j,e)=>{A.postMessage({type:"error",data:{loggableReason:e.str}});let t,r;for(;t=await A.raceDisconnect([A.readMessage(),j]);){if(t.type==="use-system-passkeys"){r=oj.assertLogSafe("fallback-requested");break}if(t.type==="disconnected"){r=oj.assertLogSafe("fallback-requested");break}if(t.type==="timeout"){A.postMessage({type:"error",data:{loggableReason:"timeout"}}),r=oj.assertLogSafe("timeout");break}t.type==="passkey-unlocked"&&A.postMessage({type:"error",data:{loggableReason:e.str}})}return r||(r=oj.assertLogSafe("internal-error")),A.close(),f2(r)};async function pNA(A,j){return!YA().authenticatePasskeys||Jn.has(j.tab)||Aee(j.tab)?!1:await LO()}function Aee(A){return jee(A.unparsedUrl)}function jee(A){return W2A.some(j=>A.includes(j))}var nNA=async(A,j,e)=>{let t=await tA.webAuthnRPValidate({url:A.toString(),rpId:j.rpId}).then(o=>({status:"success",rpId:o})).catch(o=>{let i=o instanceof Error?o.message:void 0;return console.error("Failed to core.webAuthnRPValidate:",i||o),{status:"failure",reason:oj.assertLogSafe("bad-rp-id"),message:i?oj.assertLogSafe(i):void 0,accountUuid:void 0}});if(t.status==="failure")return t;let r=await h2(t.rpId,j.allowCredentials);if(r.length===0)return console.warn("Unable to find any fillable passkeys"),{status:"failure",reason:oj.assertLogSafe("missing-item"),accountUuid:void 0};let n=(await Promise.all(r.filter(o=>typeof o.localId<"u").map(async o=>xo(o,120,e).then(i=>({username:o.overview.ainfo,title:o.overview.title,icon:i,localId:o.localId})).catch(()=>{console.warn("Failed to load icon for item",o.uuid)})))).filter(o=>!!o);return n.length===0?(console.warn("Unable to load icons"),{status:"failure",reason:oj.assertLogSafe("vault-icons-failed"),accountUuid:r[0].overview.b5AccountUUID}):{status:"success",data:{options:n,items:r}}};async function oNA(A,j){let e=j?{mediation:j}:void 0,t=await cD(A,{type:"passkeySigningIn",params:e},5);if(!t)throw new Error("messenger-error");try{return await G2.getPort(oj.assertLogSafe("passkey-signin-prompt"),A,3e3,{reqId:t})}catch{throw await SF(A,t,{type:"passkeyGenericError"})?new Error("port-error"):(console.error("Failed to replaceNotification: messenger-error"),new Error("messenger-error"))}}var tee={closePopup:!0};async function Un(A=tee){for(let j of _.getAccountHandlers)hj.anyAccountHasFlag("frameworks-telem-applock-event")&&St("AppLock",{lock_reason:mNA.TelemetryString.assertSafeForTelemetry("B5X"),autolock_duration_setting:YA().autoLockMinutes},j.uuid),await j.lock(!1);pjA(),jHA(),ce.removeItem("offline-mfa-accounts"),BNA(A)}function ENA(A){let{accountUuid:j}=A.detail;AHA(j),BNA()}async function BNA(A){if($g(),!_.allAccountHandlersAreLocked){await Ij.loadAndDecryptItemCache();return}Ij.clearItemCache(),ree(A),tA.onLock(),VD(),ln(),Fl.stopAutoLockMonitor(),OM.clear(),Q6A(),F2(!0),globalThis.dispatchEvent(new Event(Rs)),console.info(`%c[OP] Locked at ${new Date().toString()}`,"color:blue")}function gNA(){return Fl.lockMonitor&&Fl.lockMonitor.queryCachedState()!=="active"?(Un(),!0):!1}async function ree(A){Rj("lock-state-changed",{locked:!0,...A}),await i8(!0)}function aee(A,j){if(!YA().showNotifications||Oe())return;let t=`authrequired-${A}`;chrome.notifications.getAll(r=>{let a=t in r,n={type:"basic",iconUrl:Cs,title:nA("Authentication Required"),message:nA("Sign in to your 1Password account ({accountName}) to continue.",{accountName:A})};It()||(n.requireInteraction=!0),a&&!It()&&!Oe()?chrome.notifications.update(t,n):(chrome.notifications.create(t,n),Sm("click",t,()=>{sp({url:j})}))})}function nee(A){if(!YA().showNotifications||Oe())return;let e=`duoauthrequired-${A}`;chrome.notifications.getAll(t=>{let r=e in t,a={type:"basic",iconUrl:Cs,title:nA("Duo Authentication Required"),message:nA("Sign in to your 1Password account ({accountName}) and authenticate with Duo to continue.",{accountName:A})};It()||(a.requireInteraction=!0),r&&!It()&&!Oe()?chrome.notifications.update(e,a):(chrome.notifications.create(e,a),Sm("click",e,()=>{Un()}))})}function n9A(A,j,e){if(!YA().showNotifications||Oe())return;let r=`td-enrollment-${j}`,a={type:"basic",iconUrl:Cs,title:nA("New app or browser found"),message:A,isClickable:!!e};chrome.notifications.create(r,a),e&&Sm("click",r,e)}function hNA(A,j){if(!A||!(A instanceof Error))return;let e=`${j.signinAddress}/signin?a=${j.userUUID}`;A.name==="SecretKeyIdOrFormatIsWrong"||A.message==="No dSecret available."||A.message==="Unable to complete MFA, dSecret option not available."||q.errors.isClientError(A,q.errors.ClientErrorCode.invalidMFA)||q.errors.isClientError(A,q.errors.ClientErrorCode.invalidEmailOrPassword)?aee(j.name,e):_PA(A,0)&&nee(j.name)}function oee(A,j){if(We(j))lj(j),console.error(`Sync error: ${j.message}`);else if(j instanceof Bd){let e=E`Unable to reauthenticate automatically during sync ${Z(j.message)}`;lj(new q.LoggableError({errorClass:Qr,message:e,severityLevel:"warning",stackOverrideError:j,userUuid:A.user?.uuid?Z(A.user.uuid):void 0})),console.error(e)}else if((ah(j)||Eu(j))&&j.code&&typeof j.code=="number"){if(console.error(`Sync error: ${j.name} ${j.code}`),Eu(j,Tc.unexpectedFetchError)||Eu(j,Tc.serverRequestTimedOut)||j instanceof pu&&j.code===Rl.tooManyRequests||j instanceof pu&&j.code===Rl.unauthorized)return;lj(new q.LoggableError({errorClass:Qr,message:E`Sync error: `.concat(Z(j.name)).concat(E` `).concat(yp(j.code)),stackOverrideError:j,userUuid:A.user?.uuid?Z(A.user.uuid):void 0}))}else q.errors.getErrorMessage(j).startsWith("Missing keyset for vault")?(lj(new q.LoggableError({errorClass:Qr,message:E`Missing keyset for vault.`,stackOverrideError:j,userUuid:A.user?.uuid?Z(A.user.uuid):void 0})),console.error("Sync error: Missing keyset for vault.")):console.error("Unknown sync error.")}function _s(A,j){oee(A,j),(q.errors.isClientError(j,q.errors.ClientErrorCode.invalidMFA)||j instanceof Error&&j.message==="Unable to complete MFA, dSecret option not available.")&&(BnA(A.serveraccount),console.info(`\u{1F4DD} Removing dSecret for account ${A.serveraccount.uuid}`),_.updateAccount(A.serveraccount.uuid,{dSecret:void 0})),q.errors.isClientError(j,q.errors.ClientErrorCode.incorrectMasterPassword)||q.errors.isClientError(j,q.errors.ClientErrorCode.invalidEmailOrPassword)?(console.info(`Account password changed since we last synced keysets for account ${A.uuid}. Locking.`),_A.getDatabase().resetAccountKeysets(A.serveraccount),A.lock()):q.errors.isServerError(j,q.errors.ServerErrorCode.suspendedLoginFailed)||q.errors.isServerError(j,q.errors.ServerErrorReason.userSuspended)?(A.setUserState(Yj.State.Suspended),A.lock()):q.errors.isServerError(j,q.errors.ServerErrorCode.deletedLoginFailed)||q.errors.isServerError(j,q.errors.ServerErrorReason.userDeleted)||q.errors.isServerError(j,q.errors.ServerErrorCode.registrationFailed)||q.errors.isClientError(j,q.errors.ClientErrorCode.deviceDeleted)?(console.info(`Destroying ${A.uuid} (error code ${j.code}).`),A.destroyAccount()):q.errors.isNewServerError(j,q.errors.ServerErrorReason.passwordAuthNotAllowed)?(console.info(`Account ${A.uuid} migrated to SSO. Locking.`),A.lock()):(hNA(j,A.serveraccount),bn().initializePolicies([A])),qt.updateConnectivityStatus()}var qNA="1",b2=class{constructor(){this._cache=new Set}deserializeAndMerge(j){this._cache=new Set([...this._cache,...JSON.parse(j)])}serialize(){return JSON.stringify(Array.from(this._cache))}addIgnoredHost(j){this.isIgnored(j)||this._cache.add(j)}isIgnored(j){return this._cache.has(j)}};var s8=class{constructor(){this._saveIgnoreCache=new b2}get saveIgnoreCache(){return this._saveIgnoreCache}async loadSaveIgnoreForUnlockedAccounts(){if(ug())for(let e of _.getAccountHandlers.filter(t=>t.isUnlocked)){let t=await e.getDecryptedCache("saveIgnore");t&&this._saveIgnoreCache.deserializeAndMerge(t)}}async addHostToSaveIgnoreList(j){if(!ug())return[];this._saveIgnoreCache.addIgnoredHost(j);let t=this._saveIgnoreCache.serialize(),r=[];for(let a of _.getAccountHandlers.filter(n=>n.isUnlocked))r.push(a.encryptAndSaveCache("saveIgnore",qNA,t));return Promise.all(r)}isHostInSaveIgnoreList(j){return ug()?this._saveIgnoreCache.isIgnored(j):!1}},vNA=qe.resolve(s8);async function iee(){Rj("lock-state-changed",{locked:!1,unlockedAccounts:_.getAccountHandlers.filter(A=>A.isUnlocked).map(A=>A.uuid)}),await i8(!1)}function l8(){s9A(),ln(),Fl.startAutoLockMonitor(),VD(),iee(),vNA.loadSaveIgnoreForUnlockedAccounts(),OM.begin(),globalThis.dispatchEvent(new Event(Or)),AKA(),aTA(),F2(!1)}async function y2(){if(ie.getDesktopAppState().type==="Connected"&&!_.allAccountHandlersHasUserSuspended)return{name:"yes",data:void 0};if(t2())return{name:"yes",data:void 0};let A=await He.getShortcuts();return{name:"no",data:{keyboardShortcut:A.browserAction!==""?A.browserAction:void 0}}}async function gnA(){return gb("inline"),y2()}async function Bb(A){return ut()?fNA(A):Xm({type:"AccountPassword",data:A})}function see(A){return _.getAccountHandlers.filter(j=>{switch(A.type){case"AccountPassword":return j.isLocked;case"DelegatedSession":return Array.isArray(A.data)?A.data.find(e=>e.accountUuid===j.uuid):j.uuid===A.data.accountUuid;case"SingleSignOn":return A.data.ssoResponse.user.accountUuid===j.uuid}})}function lee(A,j){return j.map(async e=>{try{switch(A.type){case"AccountPassword":return e.unlockWithAccountPassword(A.data);case"DelegatedSession":{let t=Array.isArray(A.data)?A.data.find(r=>r.accountUuid===e.uuid):A.data;return t?e.unlockWithMasterUnlockKey(t.muk,t.client?{type:"Other",data:{client:t.client}}:void 0):Promise.resolve(e)}case"SingleSignOn":return e.unlockWithCredentialBundle(A.data.ssoResponse,A.data.unverifiedContext);default:return ue(A)}}catch{return e}})}function cee(A,j){for(let e of A){let t;switch(j.type){case"AccountPassword":t={type:"Credentials",data:{credentials:e.credentials({accountPassword:j.data})}};break;case"DelegatedSession":{let r=Array.isArray(j.data)?j.data.find(a=>a.accountUuid===e.uuid)?.client:j.data.client;r&&(t={type:"Other",data:{client:r}});break}case"SingleSignOn":t={type:"Other",data:{client:e.client}};break}t&&e.startSync(t).catch(r=>_s(e,r))}l8()}async function Xm(A){if(!_.hasAccountHandlers)return TA({type:"NoSavedAccounts"});let j=see(A);if(j.length===0)return console.warn("UnlockViaB5x: No locked accounts found"),Oj(void 0);let e=lee(A,j),t=await Promise.all(e),r=t.filter(n=>n.isUnlocked),a=t.filter(n=>n.restrictFailedLoginsPolicyLockout!==void 0);if(A.type==="AccountPassword"){let n=await _.updateSuspendedAccounts(t,r,A.data);if(n.isErr())return n}return a.length>0?a[0].restrictFailedLoginsPolicyLockout===1?TA({type:"FailedLoginAttempts",subType:"offline"}):TA({type:"FailedLoginAttempts",subType:"server"}):r.length===0?TA({type:"FailedToUnlock"}):(await Ij.loadAndDecryptItemCache(A.options?.persistRestorePoint),cee(r,A),Oj(void 0))}async function xNA(){let A=UI();if(A.size===0)return;let j=[];for(let t of A.values()){let r=async()=>{let a=await _A.getDatabase().findAccountByUUID(t.accountUuid);if(!a)throw new Error("Unable to create client for unknown account");if(t.session)try{return await VM(a.signinAddress,t.session,void 0,t.srpX)}catch{console.warn("Failed to sign in using existing session, falling back to sign in...")}if(a&&a.secretKey&&t.srpX)return kd({credentials:{accountIdentifier:{accountUUID:a.uuid,userUUID:a.userUUID,server:ai(a.signinAddress)},email:a.email,muk:t.masterKey,secretKey:a.secretKey,signinAddress:a.signinAddress,srpX:t.srpX,dSecret:a.dSecret},device:await L6()}).finally(async()=>qt.updateConnectivityStatus());throw new Error(`Failed to sign in using context init cache for user ${a.userUUID}.`)};j.push({client:r,accountUuid:t.accountUuid,muk:t.masterKey})}let e=await Xm({type:"DelegatedSession",data:j,options:{persistRestorePoint:!0}});e.isErr()&&console.warn(`Unable to unlock accounts with a context initialization cache: ${e.error.type}`)}function GNA(){qe.resolve(qi).subscribe(Or,srA).subscribe(Rs,uKA)}async function fNA(A){let j=await IrA({type:"unlockUsingPrimaryAccountPassword",data:A});return FNA(j,"password")}async function Ov(A){let j=await IrA({type:"unlockFromKeychainData",data:{initiatedByUserAction:A}});return FNA(j,"keychain")}async function FNA(A,j){if(A.isOk()){let e=A.value;return await ZM(e.accounts,{removeExtraAccounts:!0}),Kt()?e.accounts.length===0?TA({type:"NoSavedAccounts"}):j==="password"?TA({type:"FailedToUnlock"}):TA({type:"AppCommunicationFailed"}):(Ij.loadAndDecryptItemCache().then(()=>{l8()}),e.accounts.forEach(t=>{t.type==="Unlocked"&&j==="password"&&St("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},t.content.details.accountUuid)}),Oj(void 0))}else return console.error(`Failed to connect to 1Password App due to error: ${A.error}`),TA({type:"AppCommunicationFailed"})}function r2(A){let j=rKA(A);tn(j)}async function Km(){return nKA()}async function dee(A){return cKA(A)}async function srA(){return dKA()}async function bNA(A){return kKA(A)}async function Z3A(A){let j=await dee(A);if(j.isOk())return j.value;throw new Error("DSecret proxy request failed")}async function yNA(){if(ie.initializeDesktopConnectionManager(),!ie.desktopConnectionManager)throw new Error("Unable to initialize the desktop connection manager.");if(ie.desktopConnectionManager.getState().type==="Disabled"&&ut()){GNA();let A=await Ov(!1);A.isErr()&&console.warn(`Failed to unlock accounts from OPI via keychain: ${A.error.type}`),Km().then(j=>{j.isOk()&&(r2(j.value.settings),QM(j.value.accounts,{removeExtraAccounts:!0}))})}}function gb(A,j){let e=i=>{let s=`[${A}] Not attempting to connect to desktop app: ${i}`;return A==="popup"&&console.info(s),j?.(TA({type:"NotAttempted"})),!1};if(!Rm)return e("initialization hasn't finished");if(!YA().useSharedLockState)return e("extension has integration turned off");let t=ie.getDesktopAppState(),r=t.type==="Disconnected",a=t.type==="Disconnected"&&t.latestReason===6;if(!(r&&!a))return e(r&&a?"desktop app has integration turned off":r?"unknown reason":"already connected or connecting to desktop app");let o=A==="popup";return setTimeout(()=>{ie.desktopConnectionManager?.reconnectWithDesktop(o).then(i=>{j?.(i)})},50),!0}function $NA(A){A?ie.desktopConnectionManager?.enableSharedLockState():ie.desktopConnectionManager?.disableSharedLockState()}function wNA(){YA().useSharedLockState&&(ie.desktopConnectionManager?.disableSharedLockState(),ie.desktopConnectionManager?.enableSharedLockState())}async function INA(A){let{state:j,prevState:e}=A.detail;if(j.type,j.type==="Connected"&&j.lockState==="Unlocked")return Ij.loadAndDecryptItemCache().then(()=>{l8()});ln({desktopAppState:j}),e.type==="Connected"&&j.type==="Disconnected"&&!_.allAccountHandlersAreLocked&&Un()}function zSA(A){Rj("desktop-app-state-changed",A,{enableTracing:!1})}function pd(){let A=ie.desktopConnectionManager?.getDesktopApp();return A?!A.isOp7:!1}var $2=class{constructor(j,e){this._connectivityStatus="online",this._navigator=j,this._notifyStatusChanged=e}get connectivityStatus(){return this._connectivityStatus}set connectivityStatus(j){this._connectivityStatus=j,this._notifyStatusChanged(j)}async queryForUpdate(j){if(!this._navigator.onLine){this.connectivityStatus="networkOffline";return}let e=!1;j.type==="DesktopConnectionManager"&&pd()&&(e=await this._queryDesktopConnectionManagerForUpdate(j.src)),j.type==="AccountHandler"&&(e=this._queryAccountHandlersForUpdate(j.src)),this.connectivityStatus=e?"offlineAuthenticationFailed":"online"}async _queryDesktopConnectionManagerForUpdate(j){return j.getState().type!=="Connected"?!1:(await j.offlineStatus()).authFailed}_queryAccountHandlersForUpdate(j){return j.some(e=>e.isUnlocked&&(!e.client||e.client.invalid))}};var c8=class{constructor(){this._connectivityStatusManager=new $2(globalThis.navigator,async j=>Rj("update-connectivity-status",j))}getPossiblyOutdatedConnectivityStatus(){return this._connectivityStatusManager.connectivityStatus}async connectivityStatus(){return await this.updateConnectivityStatus(),this._connectivityStatusManager.connectivityStatus}async updateConnectivityStatusHandler(){return this.updateConnectivityStatus()}async updateConnectivityStatus(j){if(j!==void 0){this._connectivityStatusManager.connectivityStatus=j?"offlineAuthenticationFailed":"online";return}if(ie.desktopConnectionManager&&ie.desktopConnectionManager.getState().type==="Connected")try{await this._connectivityStatusManager.queryForUpdate({type:"DesktopConnectionManager",src:ie.desktopConnectionManager});return}catch{}return this._connectivityStatusManager.queryForUpdate({type:"AccountHandler",src:_.getAccountHandlers})}},qt=qe.resolve(c8);var Cg=class{constructor(){this.queue=[];this.currentTask=null}async push(j){let e,t,r=new Promise((n,o)=>{e=n,t=o});if(!e||!t)return Promise.reject("Unable to process work");let a={work:j,resolve:e,reject:t};return this.queue.push(a),setTimeout(async()=>this.process()),r}async process(){if(this.currentTask)return;let j=this.queue.shift();if(j){this.currentTask=j;try{let e=await j.work();j.resolve(e)}catch(e){j.reject(e)}this.currentTask=null,setTimeout(async()=>this.process())}}};var iE="Unknown",DNA=async()=>{let A=await He.getBrowserInfo(),j=await L6(),e=X7();return{client_name:j.clientName+" for "+A.name,client_build:parseInt(j.clientVersion,10),client_processor:iE,client_is_locked:Kt(),os_name:A.osName,os_version:A.osVersion??iE,locale:YA().language,total_space:iE,free_space:iE,memory:iE,model_name:iE,features:Object.keys(e).filter(t=>e[t]===!0),extensions:(await OD()).map(t=>`${t.name} (${t.version}, ${t.enabled?"Enabled":"Disabled"})`),installer:iE,install_location:iE}},ONA=()=>{let A=lHA();return _.getAccountHandlers.map(j=>{let e=A.get(j.uuid)?.map(t=>t.name)??[];return{uuid:j.uuid,attr_version:j.b5account.attrVersion,device_uuid:j.deviceJson.uuid,user_uuid:j.user?.uuid||"",account_is_locked:j.isLocked,storage_used:j.b5account.subscription.storageUsed,account_type:j.b5account.type,account_state:j.b5account.state,url:j.client?.signinAddress??iE,vaults:j.vaults.map(t=>({uuid:t.uuid,created_at:t.createdAt?Date.parse(t.createdAt.toString())/1e3:0,vault_type:t.type,updated_at:t.updatedAt?Date.parse(t.updatedAt.toString())/1e3:0,acl:t.getCombinedAcl()||0,content_version:t.contentVersion,items:{active:t.activeItemCount,deleted:0,archived:0,rejected:0,with_offline_changes:[]}})),features:e}})},w2=A=>{if(A.length===0)return[];let j=new Map,e=[],t;A.map(n=>({date:n.date,message:n.message,type:n.type,timestamp:n.timestamp,origin:n.origin?n.origin:"Background"})).sort((n,o)=>n.origin.localeCompare(o.origin)).forEach(n=>{t!==n.origin&&t&&(j.set(t,e),e=[]),e.push({type:n.type,timestamp:n.timestamp,message:n.message,date:n.date}),t=n.origin}),t&&!j.has(t)&&e.length>0&&j.set(t,e);let a=[];return j.forEach((n,o)=>{let i=new Map,s=[],l;n.sort((d,k)=>d.date.localeCompare(k.date)).forEach(d=>{l!==d.date&&l&&(i.set(l,s),s=[]),s.push({type:d.type,timestamp:d.timestamp,message:d.message,origin:o}),l=d.date}),l&&!i.has(l)&&s.length>0&&i.set(l,s),i.forEach((d,k)=>{a.push({title:`/${o}/1Password_r_${k}`,content:d.map(u=>`${u.type}  ${new Date(u.timestamp).toISOString().replace("Z","")} ${u.message}`).join(`
`)})})}),a},PNA=()=>`1password_chromium_${Xo()}.beta_${yI()}_${YeA()}.1pdiagnostics`;async function kee(A){if(A.passwordType==="smart"){let t=await Gt();return uee(t)}let j=sx.Characters;switch(A.passwordType){case"pin":j=sx.Pin;break;case"words":j=sx.Words;break}let e;switch(A.separatorType){case"hyphens":e=eu.Hyphens;break;case"periods":e=eu.Periods;break;case"commas":e=eu.Commas;break;case"spaces":e=eu.Spaces;break;case"underscores":e=eu.Underscores;break;case"digits":e=eu.Digits;break;case"digits_and_symbols":e=eu.DigitsAndSymbols;break}return tA.generatePassword({separatorType:e,passwordType:j,wordListType:A.fullWords?o0.FullWords:o0.Syllables,size:A.length,capitalizeOne:A.capitalize,requireDigits:A.requireDigits,requireSymbols:A.requireSymbols})}async function uee(A){let j=A?await Yr(A):void 0;return tA.generateSuggestedPassword({url:A?.unparsedUrl,collectedPageDetails:j})}async function CNA(){let{generator:A,defaultPassGenType:j}=YA(),e=A.find(t=>t.passwordType===j);return kee(e)}async function bb(A,j,e,t){let r;if(e)try{r=(await d8(A.id,e))?.URL()?.origin}catch{}let a=fi(A),n=await Yr(A);if(!r&&(r=YB.urlComponentsForUnsafeURL(n.unparsedUrl)?.origin,!r))throw new q.LoggableError({errorClass:E`FillGeneratedPasswordForTab`,message:E`Unable to get origin from tab URL.`});try{await RF(A,n,{fillTargets:[{type:"Url",data:r}],fields:[{designation:Nj.NewPassword,value:t.password,htmlId:"",htmlName:"",fieldTypes:[Xg.Password],label:"",checked:!1,restricted:!0}]},a)}catch{let i="Error filling the fill object.";throw console.error(i),new q.LoggableError({errorClass:E`FillGeneratedPasswordForTab`,message:q.logsafe.assertLogSafe(i)})}let{autoSaveEnabled:o}=YA();try{o&&hj.anyAccountHasFlag("b5x-autosave-suggested-password")?IKA(A,t):await on(A,Je,{name:"collected-page-details",data:{collectedPageDetails:await Yr(A),generatePasswordDetails:t}})}catch{let i="Error showing the save dialog.";throw console.error(i),new q.LoggableError({errorClass:E`FillGeneratedPasswordForTab`,message:q.logsafe.assertLogSafe(i)})}}var hnA=async(A,j)=>{await A.purgeOutdatedConsoleLogs(0);let e=await A.openDatabase();for(let t of j)await e.saveConsoleLog(t)},HNA=[{id:"diagnostic",label:"Diagnostic report",shouldRun:W7,targetMs:1e3,numRepeats:1,setup:async()=>{let A=new Z7;await A.initDatabase();let j=await cd.getConsoleLogs();await A.purgeOutdatedConsoleLogs(0);let e={name:"1Password",job:"Company Owner"};for(let t=0;t<1e5;t++)await A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",e],"INFO");return hnA(A,j)},run:async()=>Hg(async()=>{let A=await cd.getConsoleLogs();w2(A)})},{id:"diagnostic-raw",label:"Diagnostic report",shouldRun:W7,targetMs:1e3,numRepeats:1,setup:async()=>{let A=new Z7;await A.initDatabase();let j=await cd.getConsoleLogs();await A.purgeOutdatedConsoleLogs(0);let e={name:"1Password",job:"Company Owner"};for(let t=0;t<1e5;t++)await A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",e],"INFO");return hnA(A,j)},run:async()=>Hg(async()=>{await cd.getConsoleLogs()})},{id:"generating-diagnostic-logs",label:"Generating diagnostic logs",shouldRun:W7,targetMs:300,numRepeats:5,setup:async()=>{let A=new Z7;await A.initDatabase();let j=await cd.getConsoleLogs();await A.purgeOutdatedConsoleLogs(0);let e={name:"1Password",job:"Company Owner"};for(let t=0;t<1e5;t++)await A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",e],"INFO");return hnA(A,j)},run:async()=>{let A=new Z7;await A.initDatabase();let j={name:"1Password",job:"Company Owner"},e=[];for(let t=0;t<1e3;t++)e.push(A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",j],"INFO"));return Hg(async()=>{await Promise.all(e)})}},{id:"wasm-init",label:"WASM Initialization",targetMs:1e3,run:()=>Kv("wasm-init")},{id:"wasm-init-import",label:"WASM Initialization - Import",targetMs:600,run:()=>Kv("wasm-init-import")},{id:"wasm-init-ffi",label:"WASM Initialization - ffi",targetMs:600,run:()=>Kv("wasm-init-ffi")},{id:"wasm-init-preconfig",label:"WASM Initialization - preconfig",targetMs:600,run:()=>Kv("wasm-init-preconfig")},{id:"wasm-init-loadssm",label:"WASM Initialization - ssm",targetMs:100,shouldRun:()=>!1,run:()=>Kv("wasm-init-ssm")},{id:"wasm-init-fsm",label:"WASM Initialization - fsm",targetMs:100,shouldRun:()=>na(),run:()=>Kv("wasm-init-fsm")},{id:"wasm-init-siw-sm",label:"WASM Initialization - siw sm",targetMs:100,shouldRun:()=>na(),run:()=>Kv("wasm-init-siw-sm")},{id:"item-decrypt",label:"Item Decryption",targetMs:1e3,numRepeats:5,run:async()=>Hg(async()=>{await Ij.loadAndDecryptItemCache()})},{id:"sync-all-accounts",label:"Sync - All Accounts",targetMs:800,numRepeats:5,run:async()=>Hg(async()=>{await Promise.all(_.signedInAccounts.map(async A=>_.runSyncerForAccount(A.uuid)))})},{id:"fill-all-fields",label:"Fill - All Fields",targetMs:100,numRepeats:5,run:async()=>{let{id:A}=await He.openTab({url:"https://fill.dev/all",waitForLoad:!0});if(!A)throw new Error("Tab was missing id!");let j=await an(A);if(!j)throw new Error("Unable to create tab info!");let e=await Hg(async()=>{await Yr(j,!1)});return browser.tabs.remove(j.id),e}},{id:"fill-generated-password",label:"Fill - Generated Password",targetMs:1e3,numRepeats:5,run:async()=>{let{id:A}=await He.openTab({url:"https://fill.dev/all",waitForLoad:!0});if(!A)throw new Error("Tab was missing id!");let j=await an(A);if(!j)throw new Error("Unable to create tab info!");It()&&await new Promise(t=>setTimeout(t,500));let e=await Hg(async()=>{await bb(j,!1,void 0,{password:"password123",entropy:0,strengthPercent:100})});return browser.tabs.remove(j.id),e}},{id:"sls-lock-state-request",label:"SLS - Lock State Request",targetMs:100,numRepeats:5,shouldRun:()=>ie.getDesktopAppState().type==="Connected",run:async()=>Hg(async()=>{await ie.desktopConnectionManager?.lockState()})}];function I2(A){performance.mark(`${A}-start`)}function vnA(A){performance.mark(`${A}-end`)}function Kv(A){try{let j=performance.measure(A,`${A}-start`,`${A}-end`).duration;return k8(j)}catch(j){throw j instanceof SyntaxError?new Error(`Unable to find start/end mark for "${A}"`):new Error(`Unable to measure performance for "${A}"`)}}function k8(A){return Math.round(A*100)/100}async function Hg(A){performance.mark("benchmark-start"),await A();let j=performance.measure("benchmark","benchmark-start").duration;return k8(j)}var qnA=[];function TNA(){return{benchmarks:HNA.map(({id:A,label:j,shouldRun:e,targetMs:t})=>({id:A,label:j,shouldRun:e?e():!0,targetMs:t}))}}async function KNA(A){let j=new ht("\u{1F4CA} Benchmarks");if(Kt())throw j.error("Couldn't run benchmarks, extension was locked"),new Error("Please unlock to run the benchmark");let e=HNA.find(t=>t.id===A.data.benchmarkId);if(!e)throw new Error("Could not locate benchmark");if(!(typeof e.shouldRun=="function"&&!e.shouldRun()))if(e.numRepeats!==void 0){let t=[];for(let n=0;n<e.numRepeats;n++)try{let o=e.setup&&await e.setup(),i=await e.run();j.log(`[${e.label} - ${n+1}/${e.numRepeats}] Ran in ${i}ms; Target is ${e.targetMs}ms`),t.push(i),o&&await o()}catch(o){j.warn(`[${e.label} - ${n+1}/${e.numRepeats}] ${o instanceof Error?o.message:"unknown error"}`)}let r=t.reduce((n,o)=>n+o,0),a={id:e.id,label:e.label,shouldRun:e.shouldRun?e.shouldRun():!0,targetMs:e.targetMs,ms:k8(r/t.length)};return qnA.push(a),a}else{let t;try{t=await e.run(),j.log(`[${e.label}] Ran in ${t}ms; Target is ${e.targetMs}ms`)}catch(a){j.warn(`[${e.label}] ${a instanceof Error?a.message:"unknown error"}`)}let r={id:e.id,label:e.label,shouldRun:e.shouldRun?e.shouldRun():!0,targetMs:e.targetMs,ms:t};return qnA.push(r),r}}async function SNA(){if(Kt())throw new Error("Please unlock to export the benchmark");let A=await Ij.loadItemCache(),j=await Wo(!0);await yb("benchmark.json",{userAgent:navigator.userAgent,version:np(),accounts:j.map(e=>({id:e.id,vaultCount:e.vaults?.length})),itemCount:A?.items().length,slsState:ie.desktopConnectionManager?.getState().type,results:qnA.map(e=>({label:e.label,ms:e.ms}))})}var MNA;function _NA(){MNA=chrome.runtime.connectNative(""),MNA.onMessage.addListener(mee)}function mee(A){xnA(A)&&sE()}function xnA(A){return!!(A&&typeof A=="object"&&"name"in A&&A.name&&A.name==="openWelcomePage")}var D2=class A{constructor(j,e){this.desktopAppIdentifier=j;this.notificationFn=e;this.callbackHandlers=new Map;this.port=null;this.connect=()=>{this.port||(console.info(`\u{1F4AB} Looking for desktop app ${this.desktopAppIdentifier}`),this.port=browser.runtime.connectNative(this.desktopAppIdentifier),this.port.onDisconnect.addListener(this.onDisconnect),this.port.onMessage.addListener(this.onMessage))};this.disconnect=()=>{this.port&&(this.port.disconnect(),this.port=null)};this.onDisconnect=j=>{let e;if(It()){let t="Error: None";j.error&&(t=`${j.error.message}`),console.info(`Desktop app port disconnected. ${t}`),e=t.indexOf("No such native application")!==-1?"HostNotFound":"PortClosed"}else{let t=chrome.runtime.lastError?.message??"None";console.info(`Desktop app port disconnected. Error: ${t}`),e=t.indexOf("Specified native messaging host not found")!==-1?"HostNotFound":"PortClosed"}this.port=null,this.callbackHandlers.forEach((t,r)=>{t.reject({type:e,content:`Terminating handler <${r}> as native messaging port was closed`}),this.callbackHandlers.delete(r)})};this.onMessage=j=>{let e=this.parseMessage(j);if(e)switch(e.type){case"Success":{let t=this.callbackHandlers.get(e.content.callbackId);if(!t){performance.clearMarks(`invoke-started-${e.content.callbackId}`);return}console.info(`\u{1F4E5} Received message <${e.content.response.type}> from native core <${e.content.callbackId}>. Duration: ${this.getInvocationDuration(e.content.callbackId)}ms`),t.resolve(e.content.response),this.callbackHandlers.delete(e.content.callbackId);break}case"Failure":case"BrowserSupport":{let t=this.callbackHandlers.get(e.content.callbackId);if(!t){performance.clearMarks(`invoke-started-${e.content.callbackId}`);return}e.type==="BrowserSupport"?console.info(`\u{1F4E5} Received failure for message <${e.content.response}> from Browser Support <${e.content.callbackId}>. Duration: ${this.getInvocationDuration(e.content.callbackId)}ms`):console.info(`\u{1F4E5} Received failure for message <${e.content.response.type}> from native core <${e.content.callbackId}>. Duration: ${this.getInvocationDuration(e.content.callbackId)}ms`),t?.reject(e.content.response),this.callbackHandlers.delete(e.content.callbackId);break}case"Notification":{console.info(`Received <${e.content.type}> from the native core`),this.notificationFn(e.content),(e.content.type==="AppQuit"||e.content.type==="BrowserVerificationFailed")&&this.callbackHandlers.forEach(({reject:t})=>t({type:"PortClosed",content:"Desktop app has closed the connection"}));break}}};this.getInvocationDuration=j=>{let e=performance.measure(`invoke-${j}`,`invoke-started-${j}`).duration;return k8(e)}}async invoke(j){if(!this.port)return Promise.reject(`\u{1F4A5} Failed to send <${j.type}> because our port was disconnected.`);let t=A.generateId();return performance.mark(`invoke-started-${t}`),console.info(`\u{1F4E4} Sending <${j.type}> message to native core <${t}>`),Promise.race([new Promise((r,a)=>{this.callbackHandlers.set(t,{resolve:r,reject:a});let n=this.formatMessage({callbackId:t,invocation:j});this.port?.postMessage(n)}),new Promise((r,a)=>setTimeout(()=>{this.callbackHandlers.delete(t)&&console.warn(`\u23F3 Timeout waiting for response to <${j.type}> from native core <${t}>`),a({type:"Timeout",content:`Timeout waiting for response to <${j.type}>`})},1e4))])}static{this.generateId=()=>globalThis.crypto.getRandomValues(new Uint32Array(1))[0]}},fnA=class extends D2{constructor(){super(...arguments);this.parseMessage=e=>e;this.formatMessage=e=>e}},GnA=class extends D2{constructor(){super(...arguments);this.parseMessage=e=>{if(this.isNotification(e))return e.userInfo.message;if(this.isNmhResponse(e))return e;xnA(e)||console.warn("Safari produced an unexpectedly shaped message")};this.formatMessage=e=>({name:"core",data:JSON.stringify({type:this.messageTypeFromRequest(e),data:e})})}messageTypeFromRequest(e){switch(e.invocation.type){default:return"Sls"}}isNotification(e){return!!(e&&typeof e=="object"&&"name"in e&&e.name&&e.name==="notification"&&"userInfo"in e&&typeof e.userInfo=="object"&&e.userInfo&&"message"in e.userInfo&&typeof e.userInfo.message=="object")}isNmhResponse(e){return!!(e&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&"content"in e&&typeof e.content=="object")}};function LNA(A,j){return f6()?new GnA(A,j):new fnA(A,j)}var yg="DesktopAppShouldSendLock",RNA=1,Bee="com.1password.1password",gee="com.1password.1password_debug",hee="com.1password.1password7",qee="com.1password.1password7_debug",FnA=class{constructor(j,e){this.messageQueue=new Cg;this.state={type:"Start"};this.clientCreatedInProgress=!1;this.init=async j=>{nr.subscribe(yg,this.onLock);let e=this.requestAndUnlockAccountsFromApp(!1,j);return this.nextState({type:"Connecting",connectionPromise:e.then(()=>this.state)}),e};this.hasAccounts=async()=>{switch(this.state.type){case"Connected":return this.state.accountUuids.length>0;case"Connecting":{let j=await this.state.connectionPromise;if(j.type==="Connected")return j.accountUuids.length>0}}return!1};this.requestDsecretHmac=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")throw new Error("Currently disconnected from Desktop app");return this.invoke({type:"NmRequestDSecretProxy",content:j})};this.requestDelegatedSession=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")throw new Error("Currently disconnected from Desktop app");return this._invokeWithoutDisconnect({type:"NmRequestDelegatedSession",content:j})};this.requestUpgradeFromOfflineState=async()=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")throw new Error("Currently disconnected from Desktop app");return this._invokeWithoutDisconnect({type:"NmRequestUpgradeOffline",content:void 0})};this.showUnlock=async()=>{if(!(this.state.type!=="Connected"&&this.state.type!=="Connecting"))return this.invoke({type:"NmShowUnlock",content:void 0})};this.showUnlockAccount=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmShowUnlockAccount",content:j}),!0}catch{return!1}};this.showDesktopSettingsPage=async j=>{if(!(this.state.type!=="Connected"&&this.state.type!=="Connecting"))return this.invoke({type:"NmShowDesktopSettingsPage",content:j})};this.editItem=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmEditItem",content:j}),!0}catch{return!1}};this.viewItem=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmViewItem",content:j}),!0}catch{return!1}};this.createItem=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmCreateItem",content:j}),!0}catch{return!1}};this.lockState=async()=>{if(this.state.type!=="Connected")return{lockState:qp.Locked};try{return await this.invoke({type:"NmLockState",content:void 0},!1)}catch{return{lockState:qp.Locked}}};this.offlineStatus=async()=>{if(this.state.type!=="Connected")return{authFailed:!0};try{return await this._invokeWithoutDisconnect({type:"NmOfflineStatus",content:void 0})}catch{throw new Error("Unable to check offline status")}};this.shouldPromptToAddAccount=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to check about accounts when Desktop app is not connected");return this.invoke({type:"NmShouldPromptToAddAccount",content:j})};this.promptDesktopAppToSignIn=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to prompt Desktop app when not connected");return this.invoke({type:"NmPromptToAddAccount",content:j})};this.sendCollectedPageDetails=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to prompt Desktop app when not connected");return this._invokeWithoutDisconnect({type:"NmCollectedPageDetails",content:{collectedPageDetails:j}})};this.handleDesktopAppNotification=async j=>{switch(j.type){case"LockStateChanged":switch(j.content){case qp.Locked:await Un(),this.nextState({type:"Locked"});break;case qp.Unlocked:this.requestAndUnlockAccountsFromApp();break}break;case"Offline":qt.updateConnectivityStatus(!0);break;case"RequestingMfa":qt.updateConnectivityStatus(!0),Fo();break;case"ClientCreated":if(this.clientCreatedInProgress)return;this.clientCreatedInProgress=!0;try{await UNA()}finally{this.clientCreatedInProgress=!1}qt.updateConnectivityStatus();break;case"SsoMigrationStarted":await Un(),this.nextState({type:"Locked"});break;case"SsoMigrationCompleted":this.requestAndUnlockAccountsFromApp();break;case"CloseTab":u8(j.content.url);break;case"AppQuit":this.nextState({type:"Disconnected",reason:8});break;case"BrowserVerificationFailed":this.nextState({type:"Disconnected",reason:j.content===k1.UnknownBrowser?5:4});break;case"AccountRemoved":_.removeAccount(j.content.accountUuid);break;case"FillShortcutActivated":{let e=await Gt();if(!e){console.warn("Cannot fill: Failed to resolve information on active tab");return}JNA(e);break}case"CollectActivePageDetails":{try{let e=await Gt();if(!e)throw new Error("Cannot collect page details: Failed to resolve information on active tab");let t=await Yr(e);this.sendCollectedPageDetails(t)}catch{console.warn("Unable to send active page details back to the desktop app")}break}case"BrowserHelperNotRegistered":{this.nextState({type:"Disconnected",reason:2});break}case"FillItem":{try{if(!await ynA()){console.info("We were asked to fill an item but we aren't the active browser");return}}catch{return}let e=!1;try{let t=await Rr(j.content.itemUuid);if(!t)throw new Error(`Unable to load item uuid ${j.content.itemUuid} for fill.`);await pv(t,"KEYBOARD_SHORTCUT"),e=!0}finally{this._invokeWithoutDisconnect({type:"NmAcknowledgeFillItem",content:{success:e}})}break}case"CheckExtensionPinStatus":{let e=!1;try{let t=await NO(),r=!It()&&!ri();e=t||r}finally{this._invokeWithoutDisconnect({type:"NmAcknowledgeCheckExtensionPinStatus",content:{isPinned:e}})}break}}};this.requestAccountsFromApp=async(j=!0,e=!1)=>{let t=(await this.invoke({type:"NmRequestAccounts",content:{version:RNA,userRequested:e,supportsDelegation:!0}},j)).accounts;return t.forEach(vee),t};this.requestAndUnlockAccountsFromApp=async(j=!0,e=!1)=>{try{let t;try{t=await this.requestAccountsFromApp(j,e)}catch(l){throw console.error("Failed to request accounts in requestAndUnlockAccountsFromApp:",l),l}let r=t.every(l=>l.type==="Locked"),a=t.map(l=>l.type==="Locked"?l.content.accountUuid:l.content.details.accountUuid);try{this.nextState({type:"AddingAccounts",accountUuids:a,unlockingUuids:a.filter(l=>!_.hasAccountHandler(l))})}catch(l){throw console.error("Failed to perform AddingAccounts state transition:",l),l}let{numberOfUnlockedAccounts:n}=await ZM(t,{removeExtraAccounts:!1}),o=_.signedInAccounts.length;r&&(Un(),o=0);try{this.nextState({type:"FinishedAddingAccounts",numberOfUnlockedAccounts:o})}catch(l){throw console.error("Failed to perform FinishedAddingAccounts transition"),l}let i=t.filter(l=>l.type==="Unlocked").length,s=t.filter(l=>l.type==="Locked").length;return console.info(`We successfully unlocked ${n} account(s) from a Desktop app with ${i} unlocked and ${s} locked account(s).`),!0}catch{return console.info("When requesting accounts we ran into a problem"),!1}};this.onLock=async()=>{if(this.state.type==="Connected")try{await this.invoke({type:"Lock",content:void 0},!1)}catch{}};this.desktopAppMessenger=LNA(j,this.handleDesktopAppNotification),this.isOp7=j.includes("1password7"),this.desktopAppMessenger.connect(),this.stateCallback=e}nextState(j){switch(j.type){case"Connecting":if(this.state.type==="Start"||this.state.type==="Disconnected")return this.updateState({type:"Connecting",connectionPromise:j.connectionPromise});break;case"AddingAccounts":if(this.state.type==="Connecting"||this.state.type==="Connected"||this.state.type==="Reconnecting"){vj.setItem("sls_app_connected","true");let e="Unlocking";return this.state.type==="Connected"&&this.state.lockState==="Unlocked"?e="Unlocked":j.unlockingUuids.length>0&&(e="Syncing"),this.updateState({type:"Connected",accountUuids:j.accountUuids,lockState:e})}break;case"FinishedAddingAccounts":if(this.state.type==="Connected")return this.updateState({type:"Connected",accountUuids:this.state.accountUuids,lockState:this.state.lockState==="Unlocked"||j.numberOfUnlockedAccounts>0?"Unlocked":"Locked"});break;case"Locked":if(this.state.type==="Connected"||this.state.type==="Reconnecting")return this.updateState({type:"Connected",accountUuids:this.state.accountUuids,lockState:"Locked"});break;case"Timeout":if(this.state.type==="Connecting")return this.reconnect();if(this.state.type==="Connected"||this.state.type==="Reconnecting")return this.state.type!=="Reconnecting"||this.state.attempts<2?this.reconnect():(this.desktopAppMessenger.disconnect(),this.updateState({type:"Disconnected",latestReason:3,browserSignatureInvalid:!1,browserIsUnknown:!1,hasEverConnectedToDesktopApp:Gi()}));break;case"ReattemptConnection":if(this.state.type==="Disconnected")return this.updateState({type:"Connecting",connectionPromise:j.connectionPromise});break;case"Disconnected":{let e=j.reason??0,t=j.reason===4,r=j.reason===5;if(this.state.type==="Start"&&(j.reason===8||j.reason===4||j.reason===5||j.reason===7)){this.desktopAppMessenger.disconnect(),this.state={type:"Disconnected",latestReason:e,browserSignatureInvalid:t,browserIsUnknown:r,hasEverConnectedToDesktopApp:Gi()};return}if(this.state.type==="Disconnected")return this.desktopAppMessenger.disconnect(),this.updateState({type:"Disconnected",latestReason:e,browserSignatureInvalid:this.state.browserSignatureInvalid||t,browserIsUnknown:this.state.browserIsUnknown||r,hasEverConnectedToDesktopApp:Gi()});if(this.state.type==="Connecting"||this.state.type==="Connected"||this.state.type==="Reconnecting")return j.shouldAttemptReconnect!==!1&&e===1&&(this.state.type!=="Reconnecting"||this.state.attempts<2)?this.reconnect():(this.desktopAppMessenger.disconnect(),this.updateState({type:"Disconnected",latestReason:e,browserSignatureInvalid:t,browserIsUnknown:r,hasEverConnectedToDesktopApp:Gi()}));break}}throw this.desktopAppMessenger.disconnect(),new Error(`Invalid State Request to <${j.type}> while in state <${this.state.type}>`)}updateState(j){this.state=j,this.stateCallback(this,j)}async invoke(j,e=!0){return this.messageQueue.push(async()=>{try{return(await this.desktopAppMessenger.invoke(j)).content}catch(t){if(Gee(t)&&t?.type==="Timeout"&&e)this.nextState({type:"Timeout"});else{let r=bnA(t);this.nextState({type:"Disconnected",reason:r,shouldAttemptReconnect:e})}throw t}})}async _invokeWithoutDisconnect(j){return this.messageQueue.push(async()=>(await this.desktopAppMessenger.invoke(j)).content)}reconnect(){let j=this.state.type==="Reconnecting"?this.state.attempts+1:0,e=this.state.type==="Connected"?this.state.accountUuids:[];return this.updateState({type:"Reconnecting",accountUuids:e,attempts:j,connectionPromise:new Promise(t=>{setTimeout(async()=>{try{this.desktopAppMessenger.connect(),await this.invoke({type:"NmLockState",content:void 0})}catch{}t(this.state)},2500)})})}disconnect(){this.nextState({type:"Disconnected",reason:6,shouldAttemptReconnect:!1})}disconnectWith(j){this.state={type:"Disconnected",latestReason:j,browserIsUnknown:j===5,browserSignatureInvalid:j===4,hasEverConnectedToDesktopApp:Gi()}}resetConnection(){this.state={type:"Start"},this.desktopAppMessenger.connect()}};async function RSA(A,j=!1){let t=(await He.getBrowserInfo()).osName===q.browserInfo.OperatingSystem.Linux,{slsChannel:r}=YA(),a=await NNA(xee(r),j,t?2:1,A);return a.isOk()||a.error.invalidBrowserState!==2||a.error.latestReason===7?a:!t&&!f6()?await NNA(fee(r),j,1,A):a}function bnA(A){if(A&&typeof A=="object"&&"reason"in A&&A?.reason==="ExtensionSupportDisabled")return 6;if(A&&typeof A=="object"&&"type"in A){if(A?.type==="ExtensionSupportDisabled")return 6;if(A.type==="PortClosed")return 1;if(A?.type==="HostNotFound")return 2}return A===ux.MainAppNotRunning?7:0}async function NNA(A,j,e,t){let r=new FnA(A,t),a;for(let i=0;i<e;i++)try{r.resetConnection();let{accounts:s}=(await r.desktopAppMessenger.invoke({type:"NmRequestAccounts",content:{version:RNA,userRequested:j,supportsDelegation:!0}})).content;return Oj({desktopApp:r,numberOfUnlockedAccounts:s.filter(l=>l.type==="Unlocked").length})}catch(s){if(a=s,bnA(a)===6){r.desktopAppMessenger.disconnect();break}else r.desktopAppMessenger.disconnect()}let n=r.state,o=bnA(a);return n.type!=="Disconnected"&&o===7&&r.disconnectWith(o),n.type!=="Disconnected"&&o===6?TA({type:"Disabled",invalidBrowserState:3,latestReason:o,hasEverConnectedToDesktopApp:Gi()}):TA({type:"Disconnected",invalidBrowserState:n.type==="Disconnected"?GaA(n):2,latestReason:o,hasEverConnectedToDesktopApp:Gi()})}function GaA(A){if(A.type!=="Disconnected")return 2;let{latestReason:j,browserSignatureInvalid:e,browserIsUnknown:t}=A;return j===6?2:e||t&&Gi()?0:t?1:2}function ud(A){if(!A.alg)throw new Error("Missing `alg` from Muk");if(!A.ext)throw new Error("Missing `ext` from Muk");if(!A.k)throw new Error("Missing `k` from Muk");if(!A.kid)throw new Error("Missing `kid` from Muk");return{alg:A.alg,ext:A.ext,k:A.k,key_ops:["encrypt","decrypt"],kid:A.kid,kty:"oct"}}function vee(A){A.type==="Locked"?A.content.signInAddress=zNA(A.content.signInAddress):A.content.details.signInAddress=zNA(A.content.details.signInAddress)}function zNA(A){return A.endsWith("/")?A.slice(0,A.length-1):A}function Gi(){return vj.getItem("sls_app_connected")==="true"}function xee(A){return A==="production"?Bee:gee}function fee(A){return A==="production"?hee:qee}async function JNA(A){try{if(Kt()){let a=Date.now(),n=async()=>{let o=Date.now(),i=await Gt();A.id===i?.id&&A.unparsedUrl===i?.unparsedUrl&&o-a<6e4?JNA(A):console.warn("Tab changed or timeout exceeded after fill shortcut activated.")};nr.subscribe(Or,n,{once:!0});return}let j=await Ij.loadItemCache();if(!j)throw new Error("The item cache was not initialized during fill from desktop app");let e=se.loginsAndPasswords,t=se.userSelected(hr(),void 0,void 0,j),r=j.itemsForTab(A,a=>t(a)&&e(a),a6.suggestedSort(A));if(r.length===1){let a=await r6(r[0]);if(!a)throw new Error("Could not decrypt item during fill from desktop app");pv(a,"KEYBOARD_SHORTCUT",{requireAuthorization:!0,postFill:{type:"focusLastFilledField"}})}else $nA(A)}catch{console.warn("Unable to handle fill shortcut event from the desktop app")}}function Gee(A){return!!(A&&typeof A=="object"&&"type"in A&&"content"in A)}var $b=(A,j)=>e=>j?e.serveraccount.uuid===A&&e.serveraccount.userUUID===j:e.serveraccount.uuid===A,XNA=(A,j)=>e=>j?e.serveraccount.uuid!==A&&e.serveraccount.userUUID!==j:e.serveraccount.uuid!==A;async function A2(A,j){let e=await L6(),t=ud(j.muk),r;if(!j.srpX||!j.secretKey?r=await Eb(j):r=await kd({credentials:{accountIdentifier:{accountUUID:j.details.accountUuid,userUUID:j.details.userUuid,server:j.details.server},uuid:j.details.userUuid,email:j.details.email,muk:t,secretKey:j.secretKey,signinAddress:j.details.signInAddress,srpX:j.srpX},device:e,additionalSignInOptions:{allowReauthorization:!0}}).finally(async()=>qt.updateConnectivityStatus()),!r.CTX)return Promise.reject("Missing context on the client.");A.setClient(r)}async function UNA(){let A=new ht("\u{1F501} reInitializeAllUnlockedAccountHandlerClients"),j=ie.desktopConnectionManager?.getDesktopApp();if(!j||ie.getDesktopAppState().type!=="Connected"){A.info("The user is not connected to the desktop app.");return}if(!_.hasAccountHandlers||_.allAccountHandlersAreLocked){A.info("No accountHandlers, or all handlers are locked");return}let e=n=>n.isLocked?!1:n.client?n.client.invalid||!n.client.isSignedIn:!0,t=_.getAccountHandlers.filter(n=>e(n));if(!t.length)return;let r;try{r=await j.requestAccountsFromApp()}catch(n){throw A.error("Failed to request accounts from desktop app."),n}if(!r?.length){A.info("No accounts were found from the desktop app.");return}let a=[];for(let n of t){let o=r.find(i=>i.type==="Unlocked"&&i.content.details.accountUuid===n.uuid);if(!o){A.info(`The unlocked account ${n.uuid} was not found.`);continue}if(o.type==="Locked"){A.info(`Ignoring unexpectedly locked account ${n.uuid}.`);continue}a.push(A2(n,o.content).catch(()=>{A.error(`Unable to upgrade account handler client from NmAccount for ${n.uuid}`)}))}A.info(`Attempting to reinitialize ${a.length} clients.`),await Promise.all(a)}async function E9A(A){let j=new ht(`\u{1F501} Reinitialize client for ${A}`),e=ie.desktopConnectionManager?.getDesktopApp();if(!(e&&ie.getDesktopAppState().type==="Connected"))return j.info("The user is not connected to the desktop app."),"User is not connected to the desktop app";let t=_.findAccountHandlerByUuid(A);if(!t)return j.info("We could not find the account handler."),"We could not find the account handler";if(t.isLocked)return j.info("The account handler is locked."),"The account handler is locked";let r;try{r=await e.requestAccountsFromApp()}catch(n){throw j.error("Failed to request accounts from desktop app."),n}if(!r?.length)return j.info("No accounts were found from the desktop app."),"No accounts were found from the desktop app";let a=r.find(n=>n.type==="Unlocked"&&n.content.details.accountUuid===A)?.content;if(!a)return j.info(`The unlocked account ${A} was not found.`),"Unlocked account was not found";j.info("Attempting to reinitialize the client.");try{await A2(t,a)}catch{return j.error("Unable to upgrade the account handler client from NmAccount"),"Unable to upgrade from NmAccount"}return"No error occurred"}async function i9A(A){Rj("frozen-accounts-changed",{frozenAccountsInfo:A}),await wnA(A)}async function F9A(A,j){let e=A.serveraccount.email===j.details.email,t=A.serveraccount.secretKey===j.secretKey,r=A.serveraccount.signinAddress===j.details.signInAddress,a=e&&t&&r,n=typeof j.details.userVersion!="number"||A.serveraccount.userVersion>=j.details.userVersion;if(!a&&!n){console.info(`Sign in details did not match, stayed the same: (email: ${e}, secret key: ${t}, sign in address: ${r})...`);let o={secretKey:j.secretKey,signinAddress:j.details.signInAddress,email:j.details.email,userVersion:j.details.userVersion};await _.updateAccount(A.serveraccount.uuid,o)}}function Bc(A,j){let e=_.findAccountHandlerByUuid(A);e?.client?.CTX&&LA.reportUsoAction(e.client.CTX,j).catch(t=>{})}async function Ts(A){let j=async r=>(await _A.getDatabase().getAllTemplates()).find(n=>n.uuid===r);if(_.allAccountHandlersAreLocked){let r=await j(A);return r?TB(r):void 0}let e=await Ij.loadItemCache();if(!e)throw new Error("Error loading item cache");let t=e.templateWithUUID(A);if(!t)throw new Error("Error loading item template");return t}async function X3A(){let A;for(let j of _.getAccountHandlers)if(!j.isLocked){for(let e of j.vaults)if(e.localId){let t=await j.getVaultItems(e.localId);A?A+=t.length:A=t.length}}return A}async function r6(A){if(!A||!A.vault||!Ij.itemCache)throw new q.LoggableError({errorClass:E`LoadItemDetailsError`,message:E`Unable to load item.`});let j=Ij.itemCache.accountForVaultID(Ua(A.vault));if(!j)throw new q.LoggableError({errorClass:E`LoadItemDetailsError`,message:E`Unable to find account for vault`});let e=_.getAccountHandlers.find($b(j.uuid));if(!e)throw new q.LoggableError({errorClass:E`LoadItemDetailsError`,message:E`Unable to find handler for account`});return e.getItem(_m(A))}async function Rr(A,j){if(!A)return null;let t=(await Ij.loadItemCache())?.itemWithUUID(A,j);return t?r6(t):null}async function hc(A){if(typeof A!="object"||A.type!=="databaseId"&&A.type!=="cachedItem"&&A.type!=="managedCredential")return TA(new Error("Id must be shaped like a LocalId"));let e=(await Ij.loadItemCache())?.itemWithLocalId(A);if(!e)return TA(new Error("No item found with matching ID"));let t=await r6(e);return t?Oj(t):TA(new Error("No item details found with matching ID"))}async function WMA(A,j){let e=await Rr(A);if(!e)return;let t=e.faveIndex!==0,r=typeof j=="boolean"?j:!t;return e.faveIndex=r?1:0,$a(e,!1)}function Ks(A,j){let e=_.findAccountHandlerByVault(A.vault);if(!e){console.error(`Failed to record item usage for vault <${A.vault.uuid}> with missing account handler`);return}e.markItemUsed(A,j)}async function YMA(A){let j=await Rr(A);if(!j)throw new Error(`Unable to load item: <${A}>`);if(Jm(j))throw new Error(`Can not archive a managed credential item: <${A}>`);let e=_.findAccountHandlerByVault(j.vault);if(!e)throw new Error(`Unable to find account for vault: <${j.vault.uuid}>`);return j.state=dA.ItemState.Archived,e.saveItem(j)}async function lM(A){let j=await Rr(A);if(!j)throw new Error(`Unable to load item: <${A}>`);let e=_.findAccountHandlerByVault(j.vault);if(!e)throw new Error(`Unable to find account for vault: <${j.vault.uuid}>`);return j.state=dA.ItemState.Deleted,e.saveItem(j)}function VNA(A,j,e){let t=_.findAccountHandlerByUuid(A);if(!t)throw new Error(`Attempted to create item for non-existent account: <${A}>`);let r=t.findVaultWithUUIDAndCreatePermission(j);if(!r)throw new Error(`Attempted to create item for non-existent vault <${j}> in account <${A}>`);let a=new dA(r);return a.templateUuid=e,a.vault=r,a}var O2=new Set;async function WNA(A,j){let e=await yee(A);return j&&j(e),e}async function bee(A){let j=await tA.fillSessionStatus(A);if(j?.state.type!=="autofill"||!j.item)return;let{itemUuid:e,vaultUuid:t}=j.item,r=await Rr(e,t),a=A.nakedDomain();if(!(!r||!r.urlToNakedDomains||!Object.values(r.urlToNakedDomains).includes(a)))return await tA.clearFillSession(A.id),{username:r.username?.value??"",password:r.getPassword()??""}}async function yee(A){let j=fKA(A),e=await bee(j);return e?(O2.delete(j.id),{authCredentials:e}):(O2.add(j.id),{})}async function D5A(A,j){return O2.has(A.id)?(await tA.startFillSession(A,j),await chrome.tabs.reload(A.id),!0):!1}function YNA(A){O2.delete(A)}var QNA=async(A,j)=>{if(!ri())return;let e=new URL(j);if(!wq(e)||await browser.permissions.contains({origins:[`${e.origin}/*`]}))return;let r=await an(A);if(!r)return;let a=await Ij.loadItemCache();if(!a)return;if(a.itemsForTab(r,se.loginsAndPasswords).length===0){wee(r.id);return}$ee(r.id)},$ee=A=>{let j=chrome.permissions.addHostAccessRequest;j&&typeof j=="function"&&j({tabId:A})},wee=A=>{let j=chrome.permissions.removeHostAccessRequest;j&&typeof j=="function"&&j({tabId:A})};var rzA=W(ZNA()),azA=W(ArA());var AzA=async(A,j)=>{let e=await la();if(!e){let n=_.getAccountHandlers,o=await Fg(n,hj,_A);console.warn(`DeviceTrust: access denied: ${o.loggableError().str} - aborting`);return}let t=e.checkPageRestrictions(j);if(!t)return;let r=await Dee(t);if(!(!r||(nn("deviceTrustNonBlocking")?[]:await Lm(A)).length>0&&r.type==="deviceTrustNonBlocking")){try{`${r.type}`,await cD(A,r,5)}catch{D6(E`failed to show device trust notification`,"show-notification-fail")}if(r.type!=="deviceTrustNoKolide"&&r.type!=="deviceTrustNeedsUnlock"){let n=await e.hintDevice("prompt_displayed").catch(o=>Ms(o,E`hintDevice failed unexpectedly`));if(n.type==="failure"){let o=wl(n,E`dt4a notification was shown but hint failed`);console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`)}}}},Dee=async A=>{if(!await la()){console.warn("DeviceTrust: access denied - aborting");return}let e;switch(A.status){case"kolide_not_authenticated":e="deviceTrustNeedsUnlock";break;case"kolide_not_enrolled":e="deviceTrustNoKolide";break;case"blocked":e="deviceTrustBlocking";break;case"will_block":case"notify":e="deviceTrustNonBlocking";break;case"kolide_tenant_mismatch":console.warn("DeviceTrust: local kolide agent is associated to a different tenant"),e=void 0;break;case"kolide_not_registered":console.warn("DeviceTrust: local kolide agent is not registered with the server"),e=void 0;break;default:Ws(A.status,E`restriction.status`,E`DeviceTrust`)}return e?{type:e,params:{blockedPage:A.appName,accountName:A.accountName,accountUuid:A.accountUuid}}:void 0};function P2(A,j){return`${"#".repeat(j)} ${A}`}function C2(A){return`**${A}**`}function DnA(A,j=!1){return A.map((e,t)=>j?`${t+1}. ${e}`:`- ${e}`).join(`
`)}function H2(A,j){return`<details>
<summary>${A}</summary>

${j}

</details>`}function OnA(A){return`<!-- ${A} -->`}function jzA(A,j){let e=`| ${A.join(" | ")} |`,t=`| ${A.map(()=>"---").join(" | ")} |`,r=j.map(a=>`| ${a.join(" | ")} |`).join(`
`);return[e,t,r].join(`
`)}function wb(A){return`\`${A}\``}if(chrome.tabs.onActivated.addListener(Kee),chrome.tabs.onUpdated.addListener(uzA),chrome.tabs.onRemoved.addListener(Mee),chrome.tabs.onCreated.addListener(See),chrome.webNavigation.onDOMContentLoaded.addListener(Lee),chrome.webNavigation.onBeforeNavigate.addListener(_ee),!Oe()){let A=It()?"blocking":"asyncBlocking";browser.webRequest.onAuthRequired.addListener(WNA,{urls:["<all_urls>"]},[A])}var PnA=new Map;async function Gt(){let A=new Promise(j=>{browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e===void 0||e.length===0){j(void 0);return}let t=e[0],r=Ft(t);j(r)})});return ut()?j6.withTimeout(A,500,"tab-manager:activeTab"):A}async function _k(){return new Promise(A=>{chrome.tabs.query({active:!0},j=>{A(j.map(Ft).filter(e=>e!==void 0))})})}async function an(A){return new Promise(j=>{chrome.tabs.get(A,e=>{j(Ft(e))})})}async function GrA(){return new Promise((A,j)=>{chrome.windows.getCurrent({},e=>{if(chrome.runtime.lastError||!e)return j();A(e)})})}async function ynA(){return new Promise((A,j)=>{chrome.windows.getAll({},e=>{if(chrome.runtime.lastError||!e)return j();A(!!e.find(t=>t.focused))})})}async function nzA(){return new Promise(A=>{chrome.tabs.captureVisibleTab({quality:100,format:"jpeg"},j=>{A(j)})})}async function ozA(A){let{imageData:j,width:e,height:t}=await IPA(A);if("BarcodeDetector"in globalThis){let n=await new BarcodeDetector().detect(j);for(let o of n)if(_I(o.rawValue))return o.rawValue}let r=(0,rzA.default)(j.data,e,t);if(r&&r.data&&_I(r.data))return r.data}async function wD(){try{let A=await nzA(),j=await ozA(A);if(j)return Oj(j);let e=await Gt(),t=e?.nakedDomain();if(e&&t==="epicgames.com"){let a=await EzA(e,"var _a; (_a = document.querySelector('.manual-key-entry')) === null || _a === void 0 ? void 0 : _a.innerText;",!0);for(let n of a)if(typeof n=="string"&&n.length===52)return Oj(n)}return TA(0)}catch{return TA(1)}}async function izA(A,j){na()?await browser.scripting.insertCSS({origin:"USER",target:{tabId:A,frameIds:[j]},files:["/inline/injected/styles/injected.css"]}):await browser.tabs.insertCSS(A,{file:"/inline/injected/styles/injected.css",cssOrigin:"user",frameId:j})}async function szA(A){let j=A instanceof String?A:JSON.stringify(A,null,"	"),e;if(na())e=`data:application/json;charset=UTF-8,${encodeURIComponent(j)}`;else{let t=new Blob([j],{type:"application/json"});e=URL.createObjectURL(t)}await new Promise(t=>chrome.tabs.create({url:e},t)),Oe()||na()||URL.revokeObjectURL(e)}async function yb(A,j){let e=j instanceof String?j:JSON.stringify(j,null,"	");await He.downloadFile(A,new Blob([e],{type:"application/json"}))}function paA(A){let j=`https://support.1password.com/getting-started-browser${A?`#${A}`:""}`;chrome.tabs.create({url:ic(j)})}async function CnA(A){let j=await Gt();if(!j){console.warn("Cannot collect page details: Failed to resolve information on active tab");return}let e=await Yr(j,!A.includeValues);switch(A.action){case"open":await szA(e);break;case"download":await yb("collected_page_structure.json",e);break}}function maA(){let e=ic("https://releases.1password.com/b5x/beta/#whats-new");chrome.tabs.create({url:e})}function EaA(){let A=ic("https://op8.agilebits.com/extension-first-survey");chrome.tabs.create({url:A})}function HnA(){chrome.tabs.create({url:ic("https://support.1password.com")})}function TnA(){chrome.tabs.create({url:"https://support.1password.com/contact/?s=Get+help+with+1Password&b=x",active:!0})}var KnA=A=>mb(A.data);function mb(A){let j=(e,t)=>{let r=e;if(t){let a=Object.keys(t);r+=`?${a.filter(n=>t[n]!==void 0).map(n=>`${n}=${t[n]}`).join("&")}`}return r};A?chrome.tabs.create({url:j(chrome.runtime.getURL("/app/app.html#/page/settings"),{categoryId:A.categoryId,highlightRowIds:A.highlightRowIds})}):chrome.tabs.create({url:chrome.runtime.getURL("/app/app.html#/page/settings")})}async function m8(A){let j=chrome.runtime.getManifest().version,e=await He.getBrowserInfo(),t=e.name,r=e.version,a=e.osName,n=e.osVersion,o=_.getAccountHandlers.find(O=>O.uuid===A),i=Xt.initState,s;i==="initialized"?s=await Xt.invoke("HealthCheck",void 0).catch(O=>{}):s=void 0;let l;try{l=ie.getDesktopAppState()}catch(O){console.warn("Feedback reporter: Failed to get DesktopAppState from dcmh:",O)}let d=e7.map(O=>({featureName:O,isEnabled:hj.anyAccountHasFlag(O)})),k=await Gt(),u="";if(k){let O=await Yr(k);O&&(u=O.unparsedUrl||"")}let m=[["B5X Version",j],["Browser",`${t} (${r})`],["OS",`${a} (${n})`]],I=encodeURIComponent(m.map(O=>O.join(": ")).join(", ")),f=await(await la())?.getDeviceHealth({}),v="";f&&(v=f.type);let P=["product:b5x","project::xam-app-launcher","status::Needs Triage"];/^chrome-extension:\/\/.*#\/page\/apps$/.test(u)&&P.push("project::launchpad-backend");let C=encodeURIComponent(P.join(",")),b=Oee({enabledFlags:d,currentUrl:u,deviceTrustOverallStatus:v,activeAccountHandler:o,desktopAppStateValue:l,xamBackendHealth:s}),h=`http://internal1p.com/bug-reporting-tool?appDetails=${I}&details=${b}&labels=${C}&feature=XAM App Launcher`;chrome.tabs.create({url:h})}function Oee(A){let j=[...A.enabledFlags].sort((n,o)=>n.featureName.localeCompare(o.featureName)).map(n=>[n.featureName,n.isEnabled?"true":"false"]),e=A.activeAccountHandler,t=A.xamBackendHealth,r=t?[`Elapsed Time: ${t.runningTimeInSeconds}`,`Backend Unlocked Accounts: ${t.unlockedAccounts.map(n=>n.accountUuid).join(",")}`]:[C2("No backend module found")],a=[P2("Issue",2),OnA("use_this_space_to_describe_the_issue"),P2("Steps to reproduce",2),OnA("use_this_space_to_describe_the_steps_to_reproduce_the_issue"),P2("Extension Details",2),H2("Extension Status",DnA([`Lock State: ${Kt()?wb("Locked"):wb("Unlocked")}`,`Current URL: ${wb(A.currentUrl)}`,`Device Trust Status: ${wb(A.deviceTrustOverallStatus)}`,`Desktop Status: ${A.desktopAppStateValue?wb(A.desktopAppStateValue.type):"unknown"}`])),H2("LauncherStatus",DnA([e?`Active Account: ${e.uuid} ${e.isLocked?C2("(Locked)"):""}`:`${C2("No active Account in launcher")}`,...r])),H2("Enabled Flags",jzA(["Feature","Enabled"],j))];return encodeURIComponent(a.join(`

`))}function SnA(){let A=chrome.runtime.getURL("/app/app.html#/page/benchmark");chrome.tabs.create({url:A})}async function Tg(A){await He.openTab({url:browser.runtime.getURL(`/app/app.html#/page/error?code=${A}`),ignoreIfDuplicate:!0})}function MnA(){browser.tabs.create({url:browser.runtime.getURL("/app/app.html#/page/migration"),active:!1})}async function _nA(){let A=await browser.tabs.query({url:browser.runtime.getURL("/app/app.html")});if(A){let j=A.find(e=>e.url?.includes("#/page/migration"));j?.id&&browser.tabs.remove(j.id)}}function LnA(A){let j=chrome.runtime.getURL("/app/app.html")+"#/page/ready";chrome.tabs.update(A.id,{active:!0,url:j})}async function sE(){let{language:A}=YA(),j=chrome.runtime.getURL("/app/app.html");if(!await E8(!0)&&!(vj.getItem("seenWelcomePage")&&_.hasAccountHandlers))return new Promise(e=>{chrome.tabs.query({url:j},async t=>{let r=t.find(a=>a.url?.includes("#/page/welcome"));if(vj.setItem("seenWelcomePage","true"),!r||r.id===void 0){await He.openTab({url:`${j}#/page/welcome?${new URLSearchParams({language:A}).toString()}`});return}chrome.tabs.update(r.id,{active:!0},a=>{!a||a.id===void 0||chrome.tabs.reload(a.id,{},()=>{e()})})})})}async function NnA(A){let{language:j}=YA(),e=chrome.runtime.getURL("/app/app.html");return new Promise(t=>{t7().then(r=>{let a=XnA(r),n=A.data.accountType??"F",o=A.data.owner??!0,i=A.data.accountUuid?A.data.accountUuid:"none",s=`${e}?type=${n}&owner=${o}&uuid=${i}#/page/welcome?${new URLSearchParams({language:j}).toString()}`,l=A?.data?.extensionFirstForSsoEnabled;if(a&&a.id){let d=a.id;a.url?.includes("sso-creating")&&l?(chrome.tabs.create({url:s,active:!0}),setTimeout(async()=>chrome.tabs.remove(d),2e3)):chrome.tabs.update(d,{url:s})}else chrome.tabs.create({url:s});vj.setItem("seenWelcomePage","true"),t()}).catch(r=>{console.error("Failed to get tabs:",r),chrome.tabs.create({url:`${e}#/page/welcome?${new URLSearchParams({language:j}).toString()}`}),vj.setItem("seenWelcomePage","true"),t()})})}async function znA(A){let j=A.data;await He.openTab({url:j})}function Pee(){chrome.tabs.create({url:ic("https://app.privacy.com/account")})}function Cee(){chrome.tabs.create({url:ic("http://1password.com/cards")})}async function RnA(){let A=await Gt();A?Jn.remove(A):console.warn("Attempted to remove URL from exclusion list but was unable to create TabInfo")}async function $nA(A){let j=await Yr(A),e=await tA.analyzePage(j,!1,await aD()),t;for(let r of e.resolvedPage.frames){let a=r.fields.find(n=>n.designation.autofillType==="username"||n.designation.autofillType==="current-password"||n.designation.autofillType==="one-time-code");if(a){t=a.opid;break}}t||`${A.id}`,A.id&&sn({tabId:A.id,message:{name:"show-inline",data:{opid:t}}})}function BnA(A){sp({url:`${A.signinAddress}/signin/?a=${A.userUUID}&auth-only=1`,ignoreIfDuplicate:{activateExisting:!0,customDuplicateCheck:j=>j.url?.startsWith(`${A.signinAddress}/signin/?a=${A.userUUID}`)??!1}}).catch(j=>{console.info("Did not open a new B5 signin tab as one or more already exist (for MFA).");let e=j?.firstDuplicateTabId;e!==void 0&&ta(e,{type:"signInTo1Password"})})}async function sp(A,j){let e=new URL(A.url);if(!$m(e.hostname))throw new Error("Requested to open b5 tab with invalid hostname");A.url=ic(A.url);let t=await He.openTab(A);return t.id&&j&&sn({tabId:t.id,onEvent:"b5Ready",repeat:!1,message:j}),t}async function lzA(A,j){await ta(A,{type:"addAccount",params:{uuid:j}})}async function T2(A,j){let e=new URL(chrome.runtime.getURL("/inline/notification/notification.html"));await lzA(A,j);try{return await j6.withTimeout(new Promise(r=>{qD({"add-account-response":a=>{a.data.uuid===j&&r(a.data.response)}})}),3e5,"Timed out waiting for add account response")}finally{nn("addAccount")?await KF("addAccount",A):sn({tabId:A,message:{name:"close-add-account-prompt",data:e.toString()}})}}async function i8(A){let j;A?j=await t7():j=await _k(),j.forEach(e=>{e.id!==void 0&&czA(e.id,A)})}function czA(A,j){Rj("lock-state-changed",{locked:j},{tabId:A})}async function wnA(A){(await t7()).forEach(e=>{e.id!==void 0&&Rj("frozen-accounts-changed",{frozenAccountsInfo:A},{tabId:e.id})})}async function X6A(){let A=await Gt();A?.id!==void 0&&sn({tabId:A.id,message:{name:"blur-active-field",data:void 0}})}async function FaA(){let A=await y2();(await _k()).forEach(e=>{e.id!==void 0&&dzA(e.id,A)})}function dzA(A,j){sn({tabId:A,message:{name:"can-request-unlock-changed",data:j}})}async function zk(){(await _k()).forEach(j=>{j.id!==void 0&&kzA(j.id)})}function kzA(A){sn({tabId:A,message:{name:"refresh-items",data:void 0}})}async function P6A(A){(await t7()).forEach(e=>{e.id!==void 0&&sn({tabId:e.id,message:{name:"notify-settings-changed",data:A}})})}async function zF(A){let j=await PF(A.id).then(async t=>Promise.all(t.map(async r=>Hee(A,r.frameId).catch(Error)))),e=new Set;for(let t of j)if(t instanceof Error)console.warn("Could not collect providers from all frames that were initially found.");else for(let r of t)e.add(r);return[...e]}async function Hee(A,j){return j6.withTimeout(new Promise((e,t)=>{Rj("uso-collect-providers",void 0,{tabId:A.id,frameId:j}).then(r=>{if(!r.ok){t("Could not collect frame details");return}e(r.data)})}),5e3,"Collect Uso Providers")}async function t7(){return new Promise(A=>{chrome.tabs&&chrome.tabs.query({},j=>{A(j)})})}async function d8(A,j){let e=sc.createUniqueId();return sn({tabId:A,message:{name:"get-frame-origin",data:{uuid:e,frameIdentifier:j}}}),new Promise(t=>{qD({"provide-frame-origin":(r,a)=>{r.data.uuid===e&&t(a.frame)}})})}async function uv(A,j){return sn({tabId:A.id,message:{name:"request-fill-authorization",data:j}})}var JnA=A=>[Nj.CcNumber,Nj.CcCsc,Nj.CcName,Nj.CcGivenName,Nj.CcAdditionalName,Nj.CcFamilyName,Nj.CcExp,Nj.CcExpMonth,Nj.CcExpYear].includes(A),UnA=A=>[Nj.Name,Nj.GivenName,Nj.AdditionalName,Nj.FamilyName,Nj.StreetAddress,Nj.AddressLine1,Nj.AddressLine2,Nj.AddressLevel1,Nj.AddressLevel2,Nj.Country,Nj.PostalCode].includes(A);async function Tee(A){A.frames.forEach(a=>a.uuid="");let j=JSON.stringify(A),e=new TextEncoder().encode(j),t=await crypto.subtle.digest("SHA-1",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}async function j8(A,j){if(!A){console.warn("Cannot collect page details to compute suggestions: Failed to resolve information on active tab");return}let e=performance.now(),t=await Yr(A),r=performance.now(),a=await Tee((0,azA.default)(t));if(a===j)return;let n=performance.now();return console.info(`%cLoaded page details in ${r-e} ms.`,"color:green"),console.info(`%cAnalyzed the page in ${n-r} ms.`,"color:green"),{suggestions:(await tA.analyzePage(t,!1,await aD())).suggestions,collectedPageDetailsHash:a}}async function Kee(A){await vj.init();let j=await an(A.tabId);if(ln({updateIconOnly:!0}),mzA(j),j){let e=Kt(),t=await y2();dzA(j.id,t),czA(j.id,e),kzA(j.id)}}function See(A){A.url===""&&Oe()?chrome.tabs.onUpdated.addListener(function j(e,t,r){r.id===A.id&&r.url&&(AaA(r),chrome.tabs.onUpdated.removeListener(j))}):AaA(A)}function Mee(A){PnA.delete(A),rSA(A),K5A(A),iv(A),tA.clearFillSession(A)}async function _ee(A){if(A.parentFrameId===-1){await vj.init();try{t5A(A)}catch{console.error("Unable to update the tab for launchpad")}pzA(A.tabId,A.url)}}async function uzA(A,j){if(await vj.init(),typeof j.url=="string"){if(PnA.get(A)===j.url)return;PnA.set(A,j.url),globalThis.dispatchEvent(new CustomEvent(qE,{detail:{tabId:A,changeInfo:j}})),ln({updateIconOnly:!0}),pzA(A,j.url);try{QNA(A,j.url)}catch{console.error("Unable to handle permissions on page change")}}}async function pzA(A,j){try{let e=await an(A);mzA(e)}catch(e){console.error("Unable to update tab context menus:",e)}try{S5A(A,j)}catch(e){console.error("Unable to handle Fastmail onPageChange:",e)}try{FS(A,j,!1)}catch(e){console.error("Unable to clear save session:",e)}}async function Lee(A){try{let j=new URL(A.url);if(!YB.isHttpOrHttps(j)||await Nee(j)||(A.parentFrameId===-1&&await AzA(A.tabId,j.href),YNA(A.tabId),!await ip()))return;Oe()||await izA(A.tabId,A.frameId)}catch{console.warn("Unable to inject for a URL (redacted)")}}async function u8(A){let j=new URL(A),e=j.searchParams.get("state");if(!e){let o=j.hash?.substring(1);e=new URLSearchParams(o).get("state")}if(!e||e.length===0){console.error("No state parameter present in the redirect URL");return}let t=tA.nakedDomainForUrl(A);t.includes("microsoft")&&(t="microsoftonline.com");let r=await browser.tabs.query({url:`*://*.${t}/*`,active:!0,lastFocusedWindow:!0});if(await ezA(e,r))return;let n=await browser.tabs.query({url:"*://*/sso/oidc/redirect/*",active:!0,lastFocusedWindow:!0});await ezA(e,n)}var ezA=async(A,j)=>{let e=j.filter(t=>t.id!==0&&(t.url?.includes(A)||t.pendingUrl?.includes(A)));return e.length!==1?!1:e[0].id?(await browser.tabs.remove(e[0].id),!0):(console.error("found tab to be closed but without an ID"),!1)},tzA=["audio","editable","frame","image","link","page","selection","video",...It()?["tab","password"]:[]];async function G6A(){let A=await Gt();md.createContextMenu({id:"tabSeparator",type:"separator",contexts:tzA}),md.createContextMenu({id:"tabToggleExclusion",type:"checkbox",title:nA("Hide on this page"),contexts:tzA,checked:A&&Jn.has(A),enabled:!!A})}async function mzA(A){return md.updateContextMenu("tabToggleExclusion",{checked:A&&Jn.has(A),enabled:!!A})}function $rA(A){return A==="chrome://newtab/"||A==="chrome://new-tab-page/"||A==="edge://newtab/"||A==="about:blank"||A==="about:newtab"}async function Nee(A){return(await He.getBrowserInfo()).name===q.browserInfo.Browser.Edge?A.origin==="https://devtools.azureedge.net":!1}async function EzA(A,j,e){return new Promise(t=>{na()?chrome.scripting.executeScript({target:{tabId:A.id,allFrames:e},files:[j]},r=>{t(r)}):chrome.tabs.executeScript(A.id,{code:j,allFrames:e},r=>{t(r)})})}function XnA(A){let j=/https:\/\/\S+[.]1password.(com|eu|ca)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*|https:\/\/\S+[.]b5local.com:(4000|3000)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*|https:\/\/\S+[.]b5test.(com|eu|ca)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*|https:\/\/\S+[.]b5dev.(com|eu|ca)(\/join\/|\/sign-up)\S*|https:\/\/\S+[.]b5rev.(com|eu|ca)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*/,e=A.filter(t=>t.url?.match(j)?.length);if(e.length)return e[0]}async function E8(A){let j=XnA(await t7());return j&&j.id?(A&&(await browser.tabs.update(j.id,{active:!0}),await browser.tabs.reload(j.id)),!0):!1}async function V6A(A,j){let e=ie.desktopConnectionManager?.getDesktopApp(),t=Ij.itemCache?.accountForVaultID(Ua(A))?.uuid,r=await _A.getDatabase().findAccountByUUID(t||"");if(e&&ie.getDesktopAppState().type==="Connected"){let n;try{let[,i]=_.defaultSavingLocation();n=i.uuid}catch{}if(r){let i=hj.accountHasFlag(r.uuid,"extension-first-for-sso");if((await e.shouldPromptToAddAccount({accountUuid:r.uuid})).shouldPrompt&&i)return await e.promptDesktopAppToSignIn({accountUuid:r.uuid,components:{isSsoAccount:!0,emailAddress:r.email,secretKey:r.secretKey,server:r.signinAddress}})}if(await e.createItem({category:j,defaultVaultUuid:n}))return}if(!r)throw new Error("Unable to find account by vault localId");let a=`/vaults/${A.uuid}/${j}/?action=add`;Xk(r.uuid,a)}async function TM(A){return Xk(A,"/profile")}async function C6A(A){return Xk(A,"/app")}function VnA(A){PS(A.data?.importPath,A.data?.accountUuid)}function PS(A,j){let[e]=_.defaultSavingLocation(),t=e.uuid,r=j||t;A?Xk(r,A):Xk(r,"/import")}async function H6A(A){return Xk(A,"/integrations/directory")}async function z5(A,j,e,t){let r=`/vaults/${A}/${e}/`;t&&(r+=t),await Xk(j,r)}function BzA(A,j){let e=_.findAccountHandlerByUuid(A);if(!e){console.error("Unable to find account to open home page");return}let t=new URLSearchParams;t.set("a",e.serveraccount.userUUID),j&&t.set("auth-only","1");let r=t.toString();if(e.isLocked){chrome.tabs.create({url:`${e.serveraccount.signinAddress}/signin/?${r}`}),Go();return}Xk(A,"/home")}async function WnA(A){let j=ie.getDesktopAppState();if(j.type==="Connected")if(j.accountUuids.includes(A.data.accountUuid))u_A({accountUuid:A.data.accountUuid});else{let e=await _A.getDatabase().findAccountByUUID(A.data.accountUuid);if(!e)throw new Error("Unable to open home page. Account with the given UUID could not be found.");cb({components:{emailAddress:e.email,secretKey:e.secretKey,server:e.signinAddress,isSsoAccount:LA.CanOnlyPerformOidcAuth(e.authMethods)},accountUuid:A.data.accountUuid})}else BzA(A.data.accountUuid,A.data.authOnly)}async function Q7(A,j){let e=Ij.itemCache?.accountForVaultID(Ua(A.vault));if(!e)throw new Error("Unable to find account by in openItemInB5");let t=`/vaults/${A.vault.uuid}/allitems/${A.uuid}${j?`/?action=${j}`:""}`;return Xk(e.uuid,t)}function BaA(A){Xk(A,"/profile/email-subscriptions")}async function W6A(A){let j="/sso/migration",e=_.getMustMigrateAuthAccount(A);if(!e){let t="Unable to find account handler in expired auth migration state";throw new Error(t+(A?` with UUID <${A}>`:""))}return Xk(e.uuid,j)}async function Xk(A,j){let e=_.findAccountHandlerByUuid(A);if(!e)throw new Error(`Unable to find account handler with UUID <${A}>`);let t=e.serveraccount.signinAddress+j,r=new URL(t),a=new globalThis.URLSearchParams(r.search);a.set("session-init","1");let n=a.toString();n!==""&&(r.search="?"+n);let o=await L6(),i=()=>{console.error("Unable to automatically sign into b5 tab"),r.searchParams.delete("session-init"),sp({url:r.toString()})};if(e.client)try{sp({url:r.toString()},{name:"auto-sign-in-to-b5",data:await e.client.getDelegateSessionInit(o)})}catch{i()}else i();Go()}async function AD(A){let j=await Gt();return(await He.openTab({url:A,openerTabId:j?.id})).id}function QaA(A){Q7(A,"share")}async function ID(A,j){let e;j?.url?e=j.url:e=A.overview.url,e&&await He.openTab({url:ic(e)})}var B8="open-db-terminated-error-page",gzA=A=>{if(A instanceof Error){if(A.name==="QuotaExceededError")return console.error("Storage quota exceeded. Try freeing up disk space."),"db-quota-exceeded";if(A.name==="InvalidStateError"&&A.message==="A mutation operation was attempted on a database that did not allow mutations."&&It())return console.error('Could not open the database because "Never Remember History" was enabled.'),"db-invalid-state"}return"db-unknown"};var g8=class{constructor(){this.getDatabase=()=>{if(!this._database)throw new q.LoggableError({errorClass:E`GetDatabaseError`,message:E`The database has not been initialized yet.`});return this._database};this.initDatabase=async()=>{try{return this._database=await this.openDatabase(),!0}catch(j){return Tg(gzA(j)),this.reportDatabaseError(j instanceof Error?j.message:"We were unable to open the database."),!1}};this.isInitialized=()=>!!this._database;this.openDatabase=async(j=Symbol())=>{for(let e=0;e<5;e++){let t=2e3+e*1e3;try{return await j6.withTimeout(kF.open(this.handleDbTerminated,this.handleDbUpgrading),t,`Opening the database timed out using a ${t/1e3} second limit.`,j)}catch(r){if(r!==j)throw r}}return j6.withTimeout(kF.open(this.handleDbTerminated,this.handleDbUpgrading),6e4,"Opening the database timed out using a 60 second limit.")};this.handleDbTerminated=async()=>this.resetDatabase(!0);this._isUpgradingPromise=void 0;this._isUpgradingPromiseResolver=void 0;this.upgradingPromise=async()=>this._isUpgradingPromise;this.handleDbUpgrading=j=>{if(j&&this._isUpgradingPromise===void 0){this._isUpgradingPromise=new Promise(e=>{this._isUpgradingPromiseResolver=e});return}!j&&this._isUpgradingPromiseResolver&&(this._isUpgradingPromiseResolver(),this._isUpgradingPromiseResolver=void 0,this._isUpgradingPromise=void 0)};this.resetDatabase=async(j=!1)=>{try{await this.getDatabase().resetDatabase(),vj.clear()}finally{j&&f6()?Tg("db-terminated"):j&&!ut()&&vj.setItem(B8,"enabled"),chrome.runtime.reload()}};this.checkThatDatabaseCanBeReopened=async()=>{try{return(await kF.open(this.handleDbTerminated,this.handleDbUpgrading)).checkThatDatabaseIsAvailable()}catch(j){return console.error(j),!1}};this._hasAttemptedToReopenDatabase=!1;this.checkThatDatabaseIsAvailable=async()=>{let j=await this.getDatabase().checkThatDatabaseIsAvailable();return!j&&!this._hasAttemptedToReopenDatabase&&(console.info(`\u{1F6E0} Attempted to reopen database. Success: ${await this.checkThatDatabaseCanBeReopened()}`),this._hasAttemptedToReopenDatabase=!0,this.reportDatabaseError("The database is currently not available and may have become corrupt.")),j}}reportDatabaseError(j){lj(new q.LoggableError({errorClass:E`DatabaseConnection`,message:q.logsafe.assertLogSafe(j)}))}},_A=qe.resolve(g8);var hzA=async A=>{try{let j=await A.getGroups({types:"AR"});if(j.length>0)return await A.getGroupPubKeys(j.map(e=>e.uuid))}catch(j){if(We(j))lj(j);else throw new q.LoggableError({errorClass:Dl,message:E`Failed to get admin group keys`})}return[]};var qzA=(A,j)=>A.reduce((e,t)=>{let r=zee(j,t);return r.length>0?[...e,{policies:r,item:t}]:e},[]),vzA=async(A,j)=>{let e=[];for(let{policies:t,item:r}of A){let n=(await j(_m(r)))?.username?.value;if(n){for(let o of t)if(o.usernames.includes(n)){e.push({policy:o,item:r});break}}}return e},zee=(A,j)=>A.filter(e=>Ree(e,j));function Ree(A,j){let e=j.overview.URLs??[];if(e.length===0)return!1;let t=A.urls.reduce((r,a)=>{try{let n=new URL(a).hostname;r.push(n)}catch{}return r},[]);return!!e.some(r=>{let a=iF(r.u)?.hostname;return a&&t.includes(a)})}var K2=async(A,j)=>{let e=[...j.accessors].sort((t,r)=>t.acl.includes("M")&&!r.acl.includes("M")?-1:!t.acl.includes("M")&&r.acl.includes("M")?1:0);for(let t of e){let r=u6(A,t.encryptedBy);if(!r)continue;let a=await Jee(r,t.encItemKey),n=t.acl.includes("M")?fA.vaultACL.ALL:fA.vaultACL.ReadItem;return{key:a,acl:n}}},Jee=async(A,j)=>{if(A.uuid!==j.kid)throw new q.LoggableError({errorClass:Dl,message:E`Accessor keyset UUID does not match item key enc UUID`});return new Tf().decryptWithKeyset(A,j)},xzA=async(A,j)=>{if(!j?.activeKeyset){console.error("findAndUploadManagedCredentials","No active keyset available");return}let e=await aB.fromActiveKeyset(j.activeKeyset);return Promise.all(A.map(async t=>await e.decrypt(t.encData)))};var fzA=async(A,j,e)=>Promise.all(A.map(async t=>{let{item:r,policy:a}=t,n=new Ya.ManagedCredentialKey;await n.generate();let o=PD(r.overview),i=cM(r.details),s=await Promise.all(j.map(async l=>{let d=await new fA.RSAPublicKey("").import(l.pubKey),k=await n.wrapWithKey(d);return{accessorUuid:l.uuid,encryptedBy:d.uuid,encItemKey:k}}));return n.encryptCreate({accessors:s,creatorUuid:e,overview:o,details:i,encryptedBy:n.uuid,policyUuid:a.uuid,source:{itemUuid:r.uuid,vaultUuid:r.vault.uuid,itemVersion:r.itemVersion},templateUuid:r.templateUuid??"001"})})),GzA=async(A,j,e)=>{let t={templateUuid:A.templateUuid||Je,overview:PD(A.overview),details:A.details,uuid:A.uuid,changerUuid:e};return j.encryptUpdated(t)};var YnA=(A,j,e)=>{let t=_.findAccountHandlerByUuid(j);if(!t)throw new q.LoggableError({errorClass:E`ManagedCredentialError`,message:E`Account handler did not exist when converting managed credential to vault item.`});let r=new dA(A);return r.details=e.details,r.localId=crypto.getRandomValues(new Uint32Array(1))[0],r.overview={...r.overview,...e.overview},r.overview.b5AccountUUID=j,r.templateUuid=Je,r.urlToNakedDomains=t.getNakedDomainsForItem(r),r.uuid=e.uuid,r.vault=A,r};var Dl=E`ManagedCredentialError`,FzA="_MCVault_",Jm=A=>rp(A.vault),rp=A=>A.uuid.startsWith(FzA),B9A=async(A,j)=>{if(!hj.accountHasFlag(A,"managed-credentials"))return;let t=await _A.getDatabase().getManagedCredentialsForAccount(A);if(t.length===0)return;let r=`${FzA}${A}`.slice(0,26);if(!Ja(Ra.uuid,r))throw new q.LoggableError({errorClass:E`ManagedCredentials`,message:E`Generated UUID was not 26 characaters`});let a=new ej({uuid:r,name:nA("Managed Credentials"),type:ej.TypeUserCreated,desc:""});a.localId=globalThis.crypto.getRandomValues(new Uint32Array(1))[0];let n=fA.vaultACL.ReadItem,o=await Promise.all(t.map(async i=>{let s=await K2(j,i);if(!s){console.warn("Unable to get response from getManagedCredentialKey when fetching overviews.");return}s.acl>n&&(n=s.acl);let l=await s.key.decrypt(i);return YnA(a,A,{...l,details:{sections:[]}})}));return a.setCombinedAcl(n),{items:o.filter(i=>!!i),vault:a}},g9A=async(A,j,e,t)=>{if(!hj.accountHasFlag(A,"managed-credentials"))return;let a=await _A.getDatabase().getManagedCredential(A,t.data.uuid);if(!a)return;let n=await K2(j,a);if(!n)return;let o=await n.key.decrypt(a);return YnA(e,A,o)};async function Uee(A){await _A.getDatabase().replaceManagedCredentialsPolicies(void 0,A.serveraccount,[])}var uM=async A=>{if(!hj.accountHasFlag(A.serveraccount.uuid,"managed-credentials"))return;if(!A.client)throw new q.LoggableError({errorClass:Dl,message:E`Client is not initialized`});if(!A.user)throw new q.LoggableError({errorClass:Dl,message:E`No user on account handler`});let j=await _A.getDatabase().getManagedCredentialsPolicies(A.uuid);if(j.length===0){console.info("findAndUploadManagedCredentials","No policies");return}if(await Ij.loadItemCache(),!A.items||A.items.length===0)return;let e=A.items.filter(se.combine(se.logins,s=>!Jm(s)));if(e.length===0)return;let t=await xzA(j,A.client.CTX?.user).catch(async s=>(console.warn("Could not decrypt local managed credential policies",s),await Uee(A).catch(l=>{console.error("Failed to clear managed credential policies")}),[]));if(!t||t.length===0)return;let r=qzA(e,t);if(r.length===0)return;r.length;let a=await vzA(r,A.getItem);if(a.length===0)return;a.length;let n=A.user.uuid;if(!n){console.warn("No user on the account handler when uplifting managed credentials.");return}let o=await hzA(A.client),i=await fzA(a,o,n);i.length,await A.client.createManagedCredentials(i)};async function pM(A,j){if(!A.client)throw new q.LoggableError({errorClass:Dl,message:E`Unable to encrypt managed credentials policies. Account handler client is not available`,userUuid:A.user?.uuid?Z(A.user.uuid):void 0});let e=A.client.CTX?.user?.activeKeyset;if(!e)throw new q.LoggableError({errorClass:Dl,message:E`Unable to sync managed credentials policies. No active keyset.`,userUuid:A.user?.uuid?Z(A.user.uuid):void 0});let t=await Ya.ManagedCredentialPolicyKey.fromActiveKeyset(e);return await Promise.all(j.map(async a=>{let n=await t.encrypt(a);return{uuid:a.uuid,accountUuid:A.serveraccount.uuid,encData:n}}))}async function h9A(A,j,e){let t=A.user()?.uuid;if(!t)throw new q.LoggableError({errorClass:Dl,message:E`No user id`});if(!A.CTX)throw new q.LoggableError({errorClass:Dl,message:E`Missing client context`,userUuid:Z(t)});let r=await _A.getDatabase().getManagedCredential(j.uuid,e.uuid);if(!r)throw new q.LoggableError({errorClass:Dl,message:E`No managed credential found for save item`,userUuid:Z(t)});let a=await K2(A.CTX,r);if(!a)throw new q.LoggableError({errorClass:Dl,message:E`No item encryption key could be looked up for managed credential`,userUuid:Z(t)});await A.updateManagedCredential(await GzA(e,a.key,t))}var Xee=[Je,q6,Ur,Js,Tl,Ii],vS=A=>!!A.templateUuid&&(A.templateUuid===Je||A.templateUuid===Js||A.templateUuid===Tl||A.templateUuid===Ur&&!!A.overview.URLs&&A.overview.URLs?.length>0),se={combine(...A){return function(j){return A.every(e=>e(j))}},invert(A){return function(j){return!A(j)}},if(A,j){return e=>A(e)?j(e):!0},active(A){return A.state===fA.VaultItem.ItemState.Active},archived(A){return A.state===fA.VaultItem.ItemState.Archived},managed(A){return A.vault.type===fA.Vault.TypeManagedApplications},logins(A){return A.templateUuid===Je},passwords(A){return A.templateUuid===Js},loginsAndPasswords(A){return A.templateUuid===Je||A.templateUuid===Js},creditCards(A){return A.templateUuid===Ur},identities(A){return A.templateUuid===q6},apiKeys(A){return A.templateUuid===Tl},cryptoWallets(A){return A.templateUuid===ax},sshKeys(A){return A.templateUuid===Ii},vaultTypePersonal(A){return A.vault.type===fA.Vault.TypePersonal},favorited(A){return!!A.faveIndex&&A.faveIndex>0},fillable(A){return!!A.templateUuid&&Xee.includes(A.templateUuid)},frozenAccountItem(A){return j=>{if(typeof j.vault.localId!="number")return!1;let e=A.accountForVaultID(j.vault.localId);return e?A.frozenAccountIds.includes(e.uuid):!1}},searchBy(A){return j=>Vee(j,A)&&j.state===fA.VaultItem.ItemState.Active},template(A){return j=>A===j.templateUuid},templates(A){return j=>!!j.templateUuid&&!!A.includes(j.templateUuid)},account(A){return j=>!!j.overview.b5AccountUUID&&j.overview.b5AccountUUID===A},tabInfo(A){let j=A.nakedDomain();return e=>vS(e)?(e.overview.URLs??[]).some(a=>a.m==="host"?iF(a.u)?.host===A.URL()?.host:a.m==="never"?!1:e.urlToNakedDomains?.[a.u]===j):se.identities(e)||se.creditCards(e)||se.apiKeys(e)||se.sshKeys(e)},nakedDomain(A){return j=>vS(j)&&j.urlToNakedDomains?Object.values(j.urlToNakedDomains).includes(A):!0},userSelected(A,j,e,t){return r=>{if(j)return r.vault.uuid===j.uuid;if(!r.vault.localId)return!1;let a=t.accountForVaultID(r.vault.localId);return a?e?A&&A.isExcluded(e.uuid,r.vault.uuid)?!1:a.uuid===e.uuid:!A?.isExcluded(a.uuid,r.vault.uuid):!1}},tag(A){return j=>{if(!j.overview.tags)return!1;for(let e of j.overview.tags)if(e.startsWith(A)&&(e.length===A.length||e[A.length]==="/"))return!0;return!1}},usoProviderLogins(A){return j=>se.logins(j)&&!se.archived(j)&&[j.url,j.overview.url??"",...j.overview.URLs?.map(e=>e.u)??[]].some(e=>e&&ZeA(e)===A)}};function Ib(A,...j){return!!A&&j.includes(A)}function JF(A,j){return j.some(e=>{let t=(r,a)=>a&&A.templateUuid===r&&A.uuid===a.itemUuid&&A.vault.uuid===a.vaultUuid;return t(q6,e.preferredDetails?.identity)||t(Ur,e.preferredDetails?.paymentCard)})}var a6={faved(A,j){return(j.faveIndex??0)-(A.faveIndex??0)},loginsBeforePasswords(A,j,e){if(!A.templateUuid&&!j.templateUuid)return 0;if(A.templateUuid&&!j.templateUuid)return-1;if(!A.templateUuid&&j.templateUuid)return 1;let t=Ib(A.templateUuid,"001","005"),r=Ib(j.templateUuid,"001","005");return!t&&!r?0:t&&!r?-1:!t&&r?1:A.templateUuid===j.templateUuid?a6.faved(A,j)||(e?e(A,j):0):A.templateUuid==="001"?-1:A.templateUuid==="005"?1:e?e(A,j):0},matchingCardsFirst(A,j){if(!(A.templateUuid&&j.templateUuid))return 0;let e=Ib(A.templateUuid,"002"),t=Ib(j.templateUuid,"002");if(!e&&!t)return 0;if(e&&!t)return-1;if(!e&&t)return 1;let r=A.overview.URLs!==void 0&&A.overview.URLs.length>0,a=j.overview.URLs!==void 0&&j.overview.URLs.length>0;return r&&a?0:r&&!a?-1:!r&&a?1:0},cardsBeforeIdentities(A,j){if(!(A.templateUuid&&j.templateUuid))return 0;let e=Ib(A.templateUuid,"002","004"),t=Ib(j.templateUuid,"002","004");return!e&&!t?0:e&&!t?-1:!e&&t?1:A.templateUuid===j.templateUuid?a6.matchingCardsFirst(A,j)||a6.faved(A,j):A.templateUuid==="002"?-1:A.templateUuid==="004"?1:0},localized(A){return(j,e)=>{let t=A.compare(j.title,e.title);return t!==0||j.overview.ainfo&&e.overview.ainfo&&(t=A.compare(j.overview.ainfo,e.overview.ainfo),t!==0)?t:j.uuid<e.uuid?-1:1}},tabInfo(A){let j=A.URL()?.hostname.split(".")||[];return(e,t)=>{let r=zrA(e.overview.URLs,j),a=zrA(t.overview.URLs,j);return r===a?0:r>a?-1:1}},suggestedSort(A){let j=a6.tabInfo(A);return(e,t)=>a6.loginsBeforePasswords(e,t,j)||a6.cardsBeforeIdentities(e,t)},fieldContextSort(A,j,e){let t=(n,o)=>{let i=JF(n,e),s=JF(o,e);return i&&!s?-1:!i&&s?1:0},r=(n,o)=>t(n,o)||a6.faved(n,o)||a6.tabInfo(A)(n,o);if(!j)return r;let a=(n,o)=>{let i=k=>(k.overview.ainfo??"").toLowerCase(),s=j.toLowerCase(),l=i(n),d=i(o);return l===d?0:l===s?-1:d===s?1:0};return(n,o)=>a(n,o)||r(n,o)},vaultSort(A,j){return fA.Vault.compare(A,j)}},S2=class{constructor(j,e,t,r,a,n){this.allAvailableCategories=j=>{let e=new Set;return this.items(a=>se.archived(a)||j&&!j(a)||!a.templateUuid?!1:(e.add(a.templateUuid),!0)),Array.from(e).sort(([a],[n])=>this.sorter.compare(a,n)).map(a=>new cF(a,this.templateWithUUID(a)))};this.templateWithUUID=j=>{for(let[,e]of Object.entries(this.templates)){let t=e.find(r=>r.uuid===j);if(t)return t}};this.sorter=new Intl.Collator(nA.set().locale,{sensitivity:"base"}),this.accounts=j,this.usersByAccountUUID=e,this.itemOverviews=t,this.templates=r,this.vaults=a,this.frozenAccountIds=n}items(j,e){let t=this.itemOverviews;j&&(t=this.itemOverviews.filter(j));let r=a6.localized(this.sorter);return t.sort((a,n)=>(e?e(a,n):0)||r(a,n)),t}tags(j,e){let t=this.items(j,e),r=[];for(let a of t)if(a.overview.tags&&a.overview.tags.length>0)for(let n of a.overview.tags)r.indexOf(n)===-1&&r.push(n);return r}activeItems(j=()=>!0){return this.items(e=>j(e)&&e.state===fA.VaultItem.ItemState.Active)}archivedItems(j=()=>!0){return this.items(e=>j(e)&&e.state===fA.VaultItem.ItemState.Archived)}itemsForTab(j,e,t){let r=se.tabInfo(j),a=e?se.combine(e,r):r;return this.fillableItems(a,t)}fillableItems(j,e){let t=[se.invert(se.archived),se.fillable,se.invert(se.frozenAccountItem(this))];return j&&t.push(j),this.items(se.combine(...t),e)}accountWithUUID(j){if(j)return this.accounts.find(e=>e.uuid===j)}vaultWithUUID(j,e){if(!e||!j)return;let t=this.vaults[e];if(t)return t.find(r=>r.uuid===j)}itemWithUUID(j,e){if(!j)return;let t=this.itemOverviews,r=e?n=>n.uuid===j&&n.vault.uuid===e:n=>n.uuid===j;return t.find(r)}itemWithLocalId(j){if(j)return this.itemOverviews.find(e=>j.type==="databaseId"?e.localId===j.data&&!e.cacheInformation:j.type==="cachedItem"?e.uuid===j.data.id&&e.cacheInformation?.provider===j.data.type:SK(j)?j.data.uuid===e.uuid&&Jm(e):void 0)}accountForVaultID(j){for(let e of Object.keys(this.vaults))if(this.vaults[e].find(a=>a.localId===j))return this.accounts.find(a=>a.uuid===e)}userForAccountUUID(j){return this.usersByAccountUUID[j]}totalItemCount(){return this.items().length}categoriesForNewPopup(j,e){let t=new Map,r=j?[j]:Object.keys(this.templates);for(let o of r)for(let i of this.templates[o])t.set(i.uuid,!1);this.items(o=>se.archived(o)||e&&o.vault.uuid!==e||!o.vault.localId||j&&this.accountForVaultID(o.vault.localId)?.uuid!==j||!o.templateUuid?!1:(t.set(o.templateUuid,!0),!0));let a=Array.from(t).sort(([o],[i])=>this.sorter.compare(o,i)),n=!1;return a.reduce((o,[i,s],l)=>{let d=this.templateWithUUID(i);return d?o.push(new cF(i,d,s)):n=!0,l===a.length-1&&n&&o.push(new cF("000",void 0,!0)),o},[])}};function Vee(A,j){if(!j||(j=j.toUpperCase(),A.title.toUpperCase().indexOf(j)!==-1))return!0;if(A.overview.URLs){for(let e of A.overview.URLs)if(e.u&&e.u.toUpperCase().indexOf(j)!==-1||e.l&&e.l.toUpperCase().indexOf(j)!==-1)return!0}if(A.overview.ainfo&&A.overview.ainfo.toUpperCase().indexOf(j)!==-1)return!0;if(A.overview.tags){for(let e of A.overview.tags)if(e.toUpperCase().indexOf(j)!==-1)return!0}return!1}var h8=class{constructor(){this._itemCachePromise=null,this._itemCache=null,this._itemCacheLogger=new ht("\u231B\uFE0F Loading item cache")}clearItemCache(){this._itemCachePromise=this._itemCache=null}get itemCache(){return this._itemCache}async loadItemCache(){if(!this._itemCachePromise){console.warn("The item cache has not been initialized yet.");return}return this._itemCachePromise}async loadAndDecryptItemCache(j=!1){try{if(!j)try{$g()}catch(e){let t="Unable to delete restore point";throw console.error(`${t}: ${G6(e)}`),new q.LoggableError({errorClass:E`LoadAndDecryptItemCacheError`,message:q.logsafe.assertLogSafe(t)})}return this._itemCachePromise=new Promise(e=>{let t=[];this._itemCacheLogger.info(`${_.numberOfAccountHandlers} account handlers found.`);for(let r of _.getAccountHandlers){if(r.isLocked){this._itemCacheLogger.info(`Account with UUID ${r.uuid} is locked and did not append as a promise.`);continue}if(r.mustMigrateAuth){this._itemCacheLogger.info(`Account with UUID ${r.uuid} must migrate authentication methods and did not append as a promise.`);continue}t.push(r.loadAndDecryptItemOverviews())}this._itemCacheLogger.info(`${t?.length} promises created for loading and decrypting item overviews.`),Promise.all(t).then(async()=>{this._itemCacheLogger.info("The promises for loading and decrypting item overviews were resolved.");let r=[],a=[],n={},o={},i={};for(let d of _.getAccountHandlers){if(d.isLocked){this._itemCacheLogger.info(`Account with UUID ${d.uuid} is locked and was not appended as an account, user, template or vault.`);continue}if(!d.user)throw new q.LoggableError({errorClass:E`LoadAndDecryptItemCacheError`,message:E`Missing user for unlocked account.`});r=r.concat(d.items||[]),a.push(d.b5account),i[d.b5account.uuid]=d.user,n[d.b5account.uuid]=d.templates??[],o[d.b5account.uuid]=d.vaults}this._itemCacheLogger.info(`Items: ${r?.length}. Accounts: ${a?.length}.`);let s=await _.getFrozenAccountsInfo(),l=new S2(a,i,r,n,o,s.frozenAccounts);this._itemCache=l,Rj("items-updated",void 0),e(l)})}),this._itemCachePromise}catch(e){let t="Received an error when loading and decrypting the item cache";throw We(e)?(lj(e),t=`${t}: ${e.name} - ${e.message}`):lj(new q.LoggableError({errorClass:E`ItemCacheHandler`,message:q.logsafe.assertLogSafe(t)})),console.error(t),e}}},Ij=qe.resolve(h8);function fo(A){return JSON.stringify({overview:A.overview,details:A.details,createdAt:A.createdAt,updatedAt:A.updatedAt,faveIndex:A.faveIndex,trashed:A.state,templateUuid:A.templateUuid,uuid:A.uuid})}function Wee(A){return JSON.stringify({overview:A.overview,createdAt:A.createdAt,updatedAt:A.updatedAt,faveIndex:A.faveIndex,trashed:A.state,templateUuid:A.templateUuid,uuid:A.uuid})}function bzA(A){return{itemOverviewJsonString:Wee(A),vaultId:1,vaultUuid:A.vault.uuid,accountId:0,accountUuid:ig(A),localId:gv(A)}}async function yzA(A){let j={};if(!A?.details?.sections)return j;let e=await Ij.loadItemCache();if(!e)return j;for(let t of A.details.sections)if(t?.fields){for(let r of t.fields)if(r?.k==="reference"){let a=r.v,n=e.itemWithUUID(a);n&&(j[a]=bzA(n))}else if(r?.k==="ssoLogin"&&r.v){let a=r.v.item,n=e.itemWithUUID(a?.itemUuid);n&&(j[a.itemUuid]=bzA(n))}}return j}function $zA(A){let j=[];function e(t,r){let a=r.documentId&&r.signingKey;j.push({position:t,status:a?n0.Available:n0.Missing})}return A.details?.documentAttributes&&e({type:"Root",content:void 0},A.details.documentAttributes),A.details?.sections?.forEach(t=>{t.fields?.forEach(r=>{r.k==="file"&&e({type:"Field",content:{sectionId:t.name,fieldId:r.n}},r.v)})}),j}var lE=W(aA());var M2=E`background/core.ts`,ap=lE.intersection([lE.partial({uuid:lE.string}),lE.type({templateUuid:lE.string,overview:fA.VaultItemOverview,details:fA.VaultItemDetails})],"CoreItem");async function Yee(){return(await browser.windows.getCurrent()).type==="popup"}var QnA=class{constructor(){this.richIconCache=new PK;this.wasmIsInitialized=!1}async init(j){return _O()||console.error("\u26D4 WebAssembly.instantiate not found. Is WebAssembly supported by your browser and enabled?"),I2("wasm-init"),I2("wasm-init-import"),await P4A(C4A),this.wasmIsInitialized=!0,vnA("wasm-init-import"),I2("wasm-init-ffi"),vnA("wasm-init"),this.setLocale(j)}ensureWasmIsInitialized(){if(!this.wasmIsInitialized)throw new Error("WASM is not initialized, unable to make core call.")}async setLocale(j){return this.sendCoreMessage({name:"set-core-locale",data:j})}async createItem(j,e){let t=await this.sendCoreMessage({name:"create-item",data:{collectedPageDetails:j,itemTemplate:JSON.stringify(e)}});return q.decode(t.item,q.json.pipe(ap),{mode:"unsafe_report_only",file:M2,func:E`createItem`}).unwrap()}async analyzePage(j,e,t){return this.sendCoreMessage({name:"analyze-page",data:{collectedPageDetails:j,mode:e?t0.ActiveFieldOnly:t0.AllFields,integrations:t,debugOptions:{sshKeyAnalysis:!0,enhancedIdentityAnalysis:!0}}})}async shouldPromptToSave(j){return this.sendCoreMessage({name:"should-prompt-to-save",data:{collectedPageDetails:j}})}async fieldValueByIdentifier(j,e){let t;try{t=j.templateUuid?await Ts(j.templateUuid):void 0}catch{console.warn("Unable to load template for item.")}let r=await this.sendCoreMessage({name:"field-value-by-identifier",data:{item:fo(j),fieldIdentifier:e,itemTemplateJson:t?JSON.stringify(t):void 0}});return r?Oj(r):TA(void 0)}async unOpaqueFilePosition(j){return this.sendCoreMessage({name:"un-opaque-file-position",data:{filePosition:j}})}async clearFillSession(j){return this.sendCoreMessage({name:"clear-fill-session",data:j})}async onLock(){try{this.ensureWasmIsInitialized()}catch{console.error("Calling WASM onLock failed because WASM wasn't initialized")}try{await b4A()}catch(j){console.error("Calling WASM onLock failed:",j)}}async fill(j,e,t){return this.sendCoreMessage({name:"fill",data:{collectedPageDetails:e,fillObject:j,postFill:t?.postFill}})}async fillItem(j,e,t){let r={collectedPageDetails:e,item:fo(j),additionalFillTargets:[],postFill:t?.postFill,designationFilter:t?.designationFilter};return this.sendCoreMessage({name:"fill-item",data:r})}async nextFill(j,e,t,r){let a={collectedPageDetails:e,item:fo(j),itemReference:{itemUuid:j.uuid,vaultUuid:j.vault.uuid},postFill:r?.postFill,sessionAssociation:{tabId:t.id,tabUrl:t.unparsedUrl}};return this.sendCoreMessage({name:"next-fill",data:a})}async fillSessionStatus({id:j,unparsedUrl:e}){return this.sendCoreMessage({name:"fill-session-status",data:{tabId:j,tabUrl:e}})}async advanceFillSession(j,e){return this.sendCoreMessage({name:"advance-fill-session",data:{sessionAssociation:{tabId:j.id,tabUrl:j.unparsedUrl},state:e}})}nakedDomainForUrl(j){return j?(this.ensureWasmIsInitialized(),F4A(j)):""}async nakedDomainForUrls(j){return this.ensureWasmIsInitialized(),this.sendCoreMessage({name:"naked-domain-for-url-strings",data:j})}async serviceIntegrationForUrl(j){return this.sendCoreMessage({name:"service-integration-for-url",data:j})}async startFillSession(j,e,t){return this.sendCoreMessage({name:"start-fill-session",data:{item:e&&fo(e),itemReference:YrA(e),sessionAssociation:{tabId:j.id,tabUrl:j.unparsedUrl},signInWithItem:t?.signInWithProviderItem,skipSignInWithCheck:t?.skipSignInWithCheck}})}async createPrivacyCard(j){return this.sendCoreMessage({name:"create-privacy-card",data:j})}async getPrivacyFundingAccounts(j){return this.sendCoreMessage({name:"get-funding-accounts",data:j})}async createItemFromSaveRequest(j){let e=await this.sendCoreMessage({name:"create-item-from-save-request",data:j});return q.decode(e.item,q.json.pipe(ap),{mode:"unsafe_report_only",file:M2,func:E`createItemFromSaveRequest`}).unwrap()}async saveUrlsFromSaveRequest(j){return await this.sendCoreMessage({name:"save-urls-from-save-request",data:j})}async validatePrivacyCardParams(j){return this.sendCoreMessage({name:"validate-privacy-card-params",data:j})}async generatePassword(j){return this.sendCoreMessage({name:"generate-password",data:j})}async generateSuggestedPassword(j){return this.sendCoreMessage({name:"generate-suggested-password",data:j})}async compareWatchTowerDiff(j,e){return this.sendCoreMessage({name:"watchtower-diff",data:{existingCompromisedWebsites:j,newCompromisedWebsites:e}})}async handleWatchtowerAction(j,e){let t=await this.sendCoreMessage({name:"handle-watchtower-action",data:{action:j,item:fo(e)}});return q.decode(t.item,q.json.pipe(ap),{mode:"unsafe_report_only",file:M2,func:E`handleWatchtowerItem`}).unwrap()}async generateOneTimePasswordFromUrl(j){return(await this.sendCoreMessage({name:"generate-totp",data:{url:j}})).oneTimePassword}generateRichIconBackgroundColor(j){this.ensureWasmIsInitialized();let e=this.richIconCache.get(j);if(e)return e;let t=G4A(j);return this.richIconCache.set(j,t),t}async generateSharableItemLink(j){return(await this.sendCoreMessage({name:"generate-shareable-item-link",data:j})).url}async getCreditCardType(j){try{return await this.sendCoreMessage({name:"classify-credit-card-number",data:j})}catch{return}}async concealCreditCardNumber(j){return this.sendCoreMessage({name:"conceal-credit-card-number",data:j})}async newCompromisedWebsiteItems(j){return this.sendCoreMessage({name:"new-compromised-website-items",data:j})}async parseMarkdown(j){return this.sendCoreMessage({name:"parse-markdown",data:j})}async editItemInit(j){return this.sendCoreMessage({name:"edit-item-init",data:j})}async editItemSave(j){return this.sendCoreMessage({name:"edit-item-save",data:j})}async editItemUpdate(j){return this.sendCoreMessage({name:"edit-item-update",data:j})}async edititemCancel(j){return this.sendCoreMessage({name:"edit-item-cancel",data:j})}async edititemCancelAll(){return this.sendCoreMessage({name:"edit-item-cancel-all",data:void 0})}async editItemFilter(j){return this.sendCoreMessage({name:"edit-item-filter",data:j})}async saveManagerCreate(j,e,t,r,a,n,o,i){return this.sendCoreMessage({name:"save-manager-create",data:{tabInfo:{tabId:j.id,tabUrl:j.unparsedUrl},clearOnNavigate:e,isTutorial:fi(j),itemTemplate:JSON.stringify(t),aliasData:r,initializationData:a,initializationOption:n,includeRichIcons:o,locale:i}})}async saveManagerStatus({id:j,unparsedUrl:e}){return this.sendCoreMessage({name:"save-manager-status",data:{tabInfo:{tabId:j,tabUrl:e}}})}async saveManagerConfigure(j,e,t,r){let a;if(t)switch(t.type){case"new":a={type:"new"};break;case"existing":if(!t.data.overview.b5AccountUUID)throw new q.LoggableError({errorClass:E`saveManagerConfigure`,message:E`Attempted to update an item without an associated b5 account.`});a={type:"existing",data:{item:fo(t.data),existingAccountUuid:t.data.overview.b5AccountUUID}};break;default:ue(t)}return this.sendCoreMessage({name:"save-manager-configure",data:{tabInfo:{tabId:j.id,tabUrl:j.unparsedUrl},vaultSelector:e,item:a,relatedItemData:r??{usernameSuggestions:[],tagSuggestions:[],relatedItems:[],watchtowerAccounts:[]}}})}async saveManagerAction(j){return await this.sendCoreMessage({name:"save-manager-action",data:j})}async saveManagerMatchingItems({id:j,unparsedUrl:e},t,r){return this.sendCoreMessage({name:"save-manager-matching-items",data:{tabInfo:{tabId:j,tabUrl:e},items:t.map(a=>({item:fo(a),isShellPlugin:!1,rowId:`${a.localId}`})),templateUuid:r}})}async autoSaveMatchingItems(j,e,t){return this.sendCoreMessage({name:"auto-save-matching-items",data:{existingItems:j.map(r=>({item:fo(r)})),saveObject:e,templateUuid:t}})}async autosubmitDetectElements(j){return this.sendCoreMessage({name:"autosubmit-detect-elements",data:j})}async createSaveObject(j,e,t){return this.sendCoreMessage({name:"create-save-object",data:{templateUuid:j,collectedPageDetails:e,generatePasswordDetails:t}})}async mergeSaveObjectWithItem(j,e,t,r){let a=await this.sendCoreMessage({name:"merge-save-object-with-item",data:{template:JSON.stringify(j),item:e?{item:fo(e)}:void 0,saveObject:t,aliasData:r}});return q.decode(a.item,q.json.pipe(ap),{mode:"unsafe_report_only",file:M2,func:E`createItem`}).unwrap()}parseVaultType(j){switch(j){case"P":return Gc.Personal;case"E":return Gc.Everyone;case"T":return Gc.Transfer;case"U":return Gc.UserCreated;case"S":return Gc.System;case"G":return Gc.GeneratedPasswords;default:return Gc.Unsupported}}parseAccountType(j){switch(j){case"I":return Au.Individual;case"F":return Au.Family;case"B":return Au.Team;default:return Au.Unsupported}}parseAccountState(j){switch(j){case"R":return ju.Registered;case"A":return ju.Active;case"S":return ju.Suspended;case"D":return ju.Deleted;case"X":return ju.Purging;case"Z":return ju.Purged;default:return ju.Unsupported}}getB5xBrowser(){return l1.Chrome}buildPermissionBundle(j,e,t){let r=j0.Active;return e&&(r=j0.Frozen),{vaultAcls:j,userState:t,billingStatus:r}}async getAccountIcon(j,e,t,r){let a={base_avatar_url:j,account_uuid:e,avatar_filename:t,account_type:this.parseAccountType(r)};return this.sendCoreMessage({name:"get-account-icon",data:a})}async getVaultIcon(j,e,t){let r={base_avatar_url:j,account_uuid:e,avatar_filename:t};return this.sendCoreMessage({name:"get-vault-icon",data:r})}async inferBestTitle(j,e){return this.sendCoreMessage({name:"infer-best-title",data:{title:j,url:e}})}async getAppleChangePasswordUrl(j){return this.sendCoreMessage({name:"get-apple-change-password-url",data:j})}async getItemDetails(j,e,t,r,a,n,o,i,s,l,d,k,u,m,I,S){let f;try{f=j.templateUuid?await Ts(j.templateUuid):void 0}catch{console.warn("Unable to load template for item.")}let v=await W5(j);return v.isErr()&&console.warn(`Unexpected error loading custom icon: ${v.error.type}`),await this.sendCoreMessage({name:"get-item-details",data:{item:fo(j),vaultInfo:e,accountInfo:t,itemTemplateJson:f?JSON.stringify(f):void 0,downloadRichIcons:o,customIconUrl:v.unwrapOr(void 0),relatedItemOverviews:await yzA(j),fileStatuses:$zA(j),permissionBundle:r,watchtowerData:a,aliasStates:l,activeTabUnparsedUrl:n,revealedElementIds:i,devtoolsEnabled:s,isInNewWindow:await Yee(),browser:this.getB5xBrowser(),includeTimestamps:!0,canAutofill:!0,includeLargeType:!0,integrationInformation:S,managesMultipleAccounts:d,familyChildAccountsEnabled:k,isDateTimeLocalizationEnabled:u,autosubmitEnabled:m,isManagedCredential:I}})}async getLargeTypeWithClientFormattedString(j,e){return this.sendCoreMessage({name:"large-type",data:{type:"withClientFormattedString",content:{item:fo(j),clientFormattedString:e}}})}async getLargeTypeWithFieldIdentifier(j,e){let t;try{t=j.templateUuid?await Ts(j.templateUuid):void 0}catch{console.warn("Unable to load template for item.")}return this.sendCoreMessage({name:"large-type",data:{type:"withFieldIdentifier",content:{item:fo(j),fieldIdentifier:e,itemTemplateJson:t?JSON.stringify(t):void 0}}})}async refreshTotp(j){return this.sendCoreMessage({name:"refresh-totp",data:{...j,includeLargeType:!0}})}async passwordGeneratorViewModel(j){return this.sendCoreMessage({name:"password-generator-view-model",data:j})}async sendCoreMessage(j){this.ensureWasmIsInitialized();let e=await x4A(JSON.stringify(j));return Qee(JSON.parse(e))}async startEmailAliasSession(j,e,t){return this.sendCoreMessage({name:"start-email-alias-session",data:{tabId:j.id,tabUrl:j.unparsedUrl,accountUuid:e,fastmailAccountId:t}})}async getEmailAliasSessionStatus(j,e){return this.sendCoreMessage({name:"get-email-alias-session-status",data:{tabId:j,tabUrl:e}})}async generateEmailAlias(j,e){return this.sendCoreMessage({name:"generate-email-alias",data:{tabId:j.id,tabUrl:j.unparsedUrl,accessToken:e}})}async endEmailAliasSession(j,e){return this.sendCoreMessage({name:"end-email-alias-session",data:{tabId:j,accessToken:e}})}async enableEmailAliasSession(j,e){return this.sendCoreMessage({name:"enable-email-alias-session",data:{tabId:j.id,tabUrl:j.unparsedUrl,accessToken:e}})}async getEmailAliasAccountName(j,e){return this.sendCoreMessage({name:"get-email-alias-account-name",data:{accessToken:j,accountId:e}})}async updateEmailAlias(j,e,t){return this.sendCoreMessage({name:"update-email-alias",data:{accessToken:j,aliasId:e,updateObject:t}})}async getEmailAliasState(j,e){return this.sendCoreMessage({name:"get-email-alias-state",data:{accessToken:j,aliasId:e}})}async getRichIconForUrl(j,e,t){return this.sendCoreMessage({name:"get-rich-icon-for-website",data:{url:j,title:e,richIcons:t}})}async getCurrentBrexUser(j){return this.sendCoreMessage({name:"get-current-brex-user",data:j})}async getAllCardsForBrexUser(j){return this.sendCoreMessage({name:"get-all-cards-for-brex-user",data:j})}async createBrexVendorCardForUser(j){return this.sendCoreMessage({name:"create-brex-vendor-card-for-user",data:j})}async getOauthAccessToken(j){return this.sendCoreMessage({name:"get-oauth-access-token",data:j})}async enrollTrustedDevice(j){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");await f4A(j.useCase,j.setupCode,j.email,j.signInAddress,j.enrollmentUuid,j.credentialBundle,j.sendMsgA,j.recvMsgB,j.sendAuthA,j.recvAuthB,j.sendCredentials)}async createSshKeyItem(j){return this.sendCoreMessage({name:"create-ssh-key-item",data:j})}async signInWithEvent(j){return this.sendCoreMessage({name:"sign-in-with-event",data:j})}async signInWithProviderConfig(j){return this.sendCoreMessage({name:"sign-in-with-provider-config",data:j})}async signInWithUrlToProvider(j){return this.sendCoreMessage({name:"sign-in-with-url-to-provider",data:j})}async webAuthnRegister(j){return this.sendCoreMessage({name:"web-authn-register",data:j})}async webAuthnLogin(j){return this.sendCoreMessage({name:"web-authn-login",data:j})}async webAuthnRPValidate(j){return this.sendCoreMessage({name:"web-authn-validate-relying-party",data:j})}async calculateEffectivePolicies(j){return this.sendCoreMessage({name:"calculate-effective-policies",data:j})}generateX25519Key(){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return KK.generate()}openNaClJwk(j,e,t){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return y4A(j,e,t)}lessSafeOpenNaCl(j,e,t){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return $4A(j,e,t)}sealNaClJwk(j,e){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return w4A(j,e)}lessSafeSealNaCl(j,e){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return I4A(j,e)}p256Sign(j,e){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return D4A(j,e)}};function Qee(A){if(!A)throw new Error("\u26D4 Unable to handle response from op-wasm-b5x, input was falsy");let{result:j,error:e}=A;if(e)throw new Error(`\u26D4 Core error code: ${typeof e=="string"?e:JSON.stringify(e)}`);return j}var tA=new QnA;import wzA from"/assets/js/messages.i18n-2DIDTOO5.js";var ZnA=new ht("\u{1F527} Popup config");function YA(){let A,j=Hd;try{A=JSON.parse(vj.getItem(W9)??"{}")}catch{ZnA.warn("Unable to retrieve the config from local storage"),A=JSON.parse("{}")}finally{j={...Hd,...IzA(A)},j!==A&&Kg(j)}return j}function tn(A){let j=YA();for(let[e,t]of Object.entries(A))j[e]=t;return Object.keys(A).includes("defaultPasswordManager")&&typeof A.defaultPasswordManager=="boolean"&&jte(A.defaultPasswordManager),Kg(j),j}function Kg(A){try{vj.setItem(W9,JSON.stringify(IzA(A)))}catch{ZnA.warn("Unable to save the config to local storage")}}function IzA(A){let j={};function e(t){j[t]=Hd[t]}try{for(let t in A)if(Object.prototype.hasOwnProperty.call(A,t)){if(typeof A[t]!=typeof Hd[t]){e(t);continue}switch(j[t]=A[t],t){case"autoLockMinutes":if(A[t]===ks)break;if(A[t]<WO||A[t]>X9){e(t);break}j[t]=Math.max(0,Math.min(A.autoLockMinutes,X9));break;case"defaultPassGenType":Hd.generator.find(r=>r.passwordType===A[t])||e(t);break;case"generator":A.generator.filter(r=>!Hd.generator.find(a=>r.passwordType===a.passwordType)).length!==0&&e(t),A.generator.length!==Hd.generator.length&&e(t);break;case"language":A.language in wzA||e(t);break}}return j}catch{return ZnA.warn("Unable to validate the config properties"),Hd}}var DzA,Zee,OzA;async function PzA(){let A=await Ate();return DzA=A.buildnum+"",Zee=A.builddate,OzA=A.buildchannel,YA()}function Xo(){return DzA}function Sv(){return OzA}async function Ate(){let A=new Headers({"Content-Type":"text/plain; charset=x-user-defined"});return new Promise(j=>{fetch(chrome.runtime.getURL("./build.info"),{headers:A}).then(e=>j(e.json()))})}var CzA="all-vaults";function hr(){let A=vj.getItem(CzA);A||(A="{}");let j=JSON.parse(A);return new yK(j)}function KM(A){vj.setItem(CzA,JSON.stringify(A))}async function DSA(){return new Promise(A=>{Oe()&&A(!1),chrome.privacy.services.passwordSavingEnabled.get({},j=>{j.value?A(!0):A(!1)})})}function jte(A){Oe()||(typeof chrome.privacy.services.autofillEnabled<"u"&&(A?chrome.privacy.services.autofillEnabled.set({value:!1}):(chrome.privacy.services.autofillEnabled.clear({}),typeof chrome.privacy.services.autofillCreditCardEnabled<"u"&&chrome.privacy.services.autofillCreditCardEnabled.clear({}),typeof chrome.privacy.services.autofillAddressEnabled<"u"&&chrome.privacy.services.autofillAddressEnabled.clear({}))),typeof chrome.privacy.services.passwordSavingEnabled<"u"&&(A?chrome.privacy.services.passwordSavingEnabled.set({value:!1}):chrome.privacy.services.passwordSavingEnabled.clear({})))}async function W_A(A){let j=tn(A);A.useSharedLockState!==void 0&&$NA(j.useSharedLockState),A.slsChannel!==void 0&&wNA(),(A.autoLockEnabled!==void 0||A.autoLockMinutes!==void 0||A.autoLockOnDeviceSleep!==void 0)&&(j.autoLockEnabled&&!_.allAccountHandlersAreLocked?(await Fl.startAutoLockMonitor(),Fl.lockMonitor?.updateAutoLockSettings(j.autoLockMinutes,j.autoLockOnDeviceSleep)):Fl.stopAutoLockMonitor()),j.languageChanged&&(nA.set({locale:j.language,messages:wzA}),await tA.setLocale(j.language),_.runSyncerForAllAccounts(),Rj("language-changed",j.language)),A.appTheme!==void 0&&Rj("app-theme-changed",{appTheme:A.appTheme}),A.defaultItemList!==void 0&&$g()}function AoA(A){let j=YA();j.ignoreAccounts.push(A),Kg(j)}function joA(A){return YA().ignoreAccounts.includes(A)}var q8=class{get desktopConnectionManager(){return this._desktopConnectionManager}initializeDesktopConnectionManager(){this._desktopConnectionManager=new KS({hasAccounts:_.hasAccountHandlers,useSharedLockState:YA().useSharedLockState,browser:"chromium"})}getDesktopAppState(){return this._desktopConnectionManager?this._desktopConnectionManager.getState():{type:"Disconnected",latestReason:0,invalidBrowserState:2,hasEverConnectedToDesktopApp:Gi()}}},ie=qe.resolve(q8);var b8=W(lRA()),Xre="https://4f3669ef553b434e86845ecd15a92e28:acaac9ba43f34f61917ae843f639604c@b5x-sentry.1passwordservices.com/4505427098533888";function cRA(){return Sv()}var Vre;function VF(){if(q.sentry.isInitialized()||It()&&!HF())return;let A=cRA(),j=A==="stable"?.5:1;q.sentry.init({appVersion:`b5x@${np()}-${Sv()}`,dsn:Xre,environment:A,sampleRate:j})}var lj=async A=>{if(It()&&!HF()||cRA()==="local"&&(console.error(`${A.loggableName.str}: ${A.loggableMessage.str}`),!z6().sendLocalSentryEnabled()))return;if(A.metaData=(0,b8.default)({},Vre,A.metaData),!q.config.getDevice()){let t=await He.getBrowserInfo(),r=q.sentry.assertLogSafeAndNormalizeDevice({uuid:"",clientName:CrA,clientVersion:Xo(),name:t.name,model:t.version,osName:t.osName,osVersion:t.osVersion,userAgent:navigator.userAgent});A.metaData=(0,b8.default)({},r,A.metaData)}let j={connectivityStatus:oj.assertLogSafe(qt.getPossiblyOutdatedConnectivityStatus())};ie.desktopConnectionManager&&(j.ophConnection=oj.assertLogSafe(ie.desktopConnectionManager.getState().type)),j.hasEverConnectedToOph=UD(Gi()),A.tags=(0,b8.default)({},j,A.tags);let e=A.userUuid?_.findAccountHandlerByUser(A.userUuid.str):_.numberOfAccountHandlers===1?_.getAccountHandlers[0]:void 0;if(e){let t={user:{sessionId:oj.assertLogSafe(e.client?.CTX?.session.sessionUuid??""),authMethods:oj.assertLogSafe(JSON.stringify(e.serveraccount.authMethods.map(r=>r.type).sort()))}};A.metaData=(0,b8.default)({},t,A.metaData)}q.reportError(A)};function yn(A,j,e,t){We(A)?(t&&(A.tags=A.tags?{...A.tags,...t}:t),lj(A),console.error(j,A)):(lj(new q.LoggableError({errorClass:E`Error`,message:j,userUuid:e,stackOverrideError:A instanceof Error?A:void 0,tags:t&&We(A)&&A.tags?{...A.tags,...t}:t})),console.error(j))}var doA="B5WEB_BACKUP_",koA="user_",uoA="deviceKey_";var poA=A=>A.replace(koA,""),V2=A=>`${koA}${A}`,dRA=A=>{let[j,e]=A.replace(uoA,"").split("_");return{accountUuid:j,userUuid:e}},kRA=(A,j)=>`${uoA}${A}_${j}`,moA=A=>{let j=JSON.parse(A);if(j.accountUuid)return j.accountUuid};var EoA=(A,j)=>{vj.setItem(doA+j,LeA.encode(A))},BoA=A=>{let j=vj.getItem(doA+A);return sj(j,LeA).unwrap()},uRA=A=>{let j=A.signinAddress,e=A.uuid,t=A.userUUID;try{let r=new URL(j).host,a=BoA(r),n=V2(t);a.userInfo[n]&&delete a.userInfo[n];let o=kRA(e,t);a.deviceKeys[o]&&delete a.deviceKeys[o],a.lastUserUuid===t&&(a.lastUserUuid=void 0),EoA(a,r)}catch{console.error("Failed to remove backup credentials for account"),lj(new Pe({errorClass:E`removeB5WebBackupCredentialsForAccount`,message:E`Failed to remove backup credentials for account`}))}};function goA(){_.hasAccountHandlers||tn({defaultPasswordManager:!1})}var pRA=W(iM());var Nv=class{constructor(){this._accountHandlers=[]}get getAccountHandlers(){return this._accountHandlers}setAccountHandlers(j){this._accountHandlers=j}addAccountHandler(...j){return this._accountHandlers.push(...j)}get hasAccountHandlers(){return this._accountHandlers.length>0}get numberOfAccountHandlers(){return this._accountHandlers.length}get allAccountHandlersAreLocked(){return this._accountHandlers.every(j=>j.isLocked)}get anyAccountIsSyncing(){return this._accountHandlers.some(j=>j.syncer?.isRunning)}get allAccountHandlersHasUserSuspended(){return this.hasAccountHandlers&&this._accountHandlers.every(j=>j.isUserSuspended)}async lockAccountHandler(j){let e=this._accountHandlers.find(t=>t.uuid===j);if(e)return e.lock(!1)}findAccountHandlerByUuid(j,e){return this._accountHandlers.find($b(j,e))}findAccountHandlerByUser(j){return this._accountHandlers.find(e=>e.user?.uuid===j)}findAccountHandlerByID(j){return this._accountHandlers.find(e=>e.serveraccount.id===j)}hasAccountHandler(j){return!!this.findAccountHandlerByUuid(j)}accountIsUnlocked(j){let e=this._accountHandlers.find($b(j));return!!e&&e.isUnlocked}get getUnlockedAccountOverviews(){let j=[];for(let e of this._accountHandlers){if(e.isLocked)continue;let t=e.createAccountVaultOverview();j.push(t)}return j}get signedInAccounts(){let j=[];for(let e of this._accountHandlers)e.isUnlocked&&j.push(new fA.Account(e.serveraccount));return j}get accountHandlersForSignedInAccounts(){return this._accountHandlers.filter(j=>j.isUnlocked)}get anyAccountHasUnseenDeviceEnrollments(){return!this.hasAccountHandlers||this.allAccountHandlersAreLocked?!1:this._accountHandlers.some(j=>j.hasUnseenDeviceEnrollments)}markAllDeviceEnrollmentsSeen(){if(!(!this.hasAccountHandlers||this.allAccountHandlersAreLocked))for(let j of this._accountHandlers)j.markAccountDeviceEnrollmentsSeen()}async getPersonItemsForAccounts(){let j=[];for(let e of this._accountHandlers){if(e.isLocked||e.mustMigrateAuth)continue;let t=await e.loadPersonItem().catch(r=>{yn(r,E`Failed to load person item`,e.user?.uuid!==void 0?q.logsafe.assertLogSafe(e.user.uuid):void 0)});t&&j.push(t)}return j}async getFrozenAccountsInfo(){let j=hr(),e=this._accountHandlers.filter(i=>i.isUnlocked),t=await Promise.all(e.map(async i=>i.serveraccount.id===void 0?Promise.resolve(null):_A.getDatabase().getAllVaultsForAccount(i.serveraccount.id))),r=e.filter((i,s)=>{let l=t[s];return l===null?!1:l.some(d=>![fA.Vault.TypeGeneratedPasswords,fA.Vault.TypeSystem].includes(d.type)&&!j.isExcluded(i.uuid,d.uuid))}),a=r.filter(i=>i.serveraccount.billingStatus==="F"),n=a.map(i=>i.uuid),o=a.length>0&&r.length===a.length;return{frozenAccounts:n,areAllAccountsFrozen:o}}findAccountHandlerByVault(j){if(!Ij.itemCache)return;let e=Ij.itemCache.accountForVaultID(Ua(j));if(e)return this.findAccountHandlerByUuid(e.uuid)}async removeAccount(j){let e=YA();j===e.saveNewItemsIn&&(e.saveNewItemsIn=V9,Kg(e));let t=await _A.getDatabase().findAccountByUUID(j);if(!t)return;if(Oe()&&t.deviceCredentials?.deviceKeyId)try{await hg().deleteDeviceKey(t,t.deviceCredentials.deviceKeyId)}catch(n){throw We(n)?lj(n):lj(new Pe({errorClass:E`AccountHandlers`,message:E`Failed to delete device key from the keychain - canceling account removal.`,stackOverrideError:n instanceof Error?n:void 0})),new Error("Failed to delete device key from the keychain - canceling account removal.")}await _A.getDatabase().deleteAccountWithUUID(j,({deletedItemIds:n,accountId:o})=>{Xt.handleDbUpdates({accountId:o,deletedItemIds:n,upsertedItemIds:[]})});let r=this._accountHandlers.find($b(j));if(!r){console.warn(`Asked to remove account <${j}> that doesn't exist`);return}this.setAccountHandlers(this._accountHandlers.filter(XNA(j))),await r.lock(),zk(),goA(),this.hasAccountHandlers||ln();let a=ce.getItem("offline-mfa-accounts");if(a){let n=JSON.parse(a);n.includes(j)&&ce.setItem("offline-mfa-accounts",JSON.stringify(n.filter(o=>o!==j)))}hj.removeAccount(j),x_A(j),uRA(t),f6()&&await Fi.removeAccountFromBiometryConfig(r),globalThis.dispatchEvent(new Event(Fd))}async deleteAccountPermanently(j){let e=this.findAccountHandlerByUuid(j);return e?e.client?.CTX?.session?cA.deleteAccount(e.client.CTX.session):Promise.reject(new Error("Unable to delete account - no context or session found on account handler.")):Promise.reject(new Error("Unable to delete account - no account found with that uuid"))}async updateAccount(j,e){let t=await _A.getDatabase().findAccountByUUID(j);if(!t)return Promise.reject(new Error("Unable to update account. Account with the given UUID could not be found."));t={...t,...e},await _A.getDatabase().saveAccount(t);let r=this.findAccountHandlerByUuid(t.uuid);r&&r.updateSigninDetails(t)}async updateAccountHandlers(){let j=await _A.getDatabase().getAllAccounts();if(this.setAccountHandlers(this._accountHandlers.filter(e=>j.some(t=>t.uuid===e.uuid))),globalThis.dispatchEvent(new Event(Qk)),!this.allAccountHandlersAreLocked){await Ij.loadAndDecryptItemCache();return}Un(),goA()}getFirstSsoAccountForKind(j){let e;switch(j.type){case"withoutAccount":e=j.content.provider.providerName;break;case"account":e=j.content.provider?.providerName;break;default:ue(j)}return this._accountHandlers.find(t=>t.serveraccount.authMethods.find(r=>r.type==="OIDC"&&r.provider&&r.provider===e)!==void 0)}getMustMigrateAuthAccount(j){return this._accountHandlers.find(e=>{let t=e.client?.CTX?.session.ssoMigrationGracePeriod?.state===Yj.State.MustMigrateAuth;return j?e.uuid===j&&t:t})}async runSyncerForAccount(j){let e=this.findAccountHandlerByUuid(j);return!e||e.isLocked?Promise.resolve():e.runSyncer([0])}async runSyncerForAllAccounts(){let j=this._accountHandlers.map(async e=>e.runSyncer([0]));return Promise.all(j)}async updateSuspendedAccounts(j,e,t){let r=j.filter(a=>a.isUserSuspended);for(let a of r)try{let n=a.credentials({accountPassword:t});await a.startSync({type:"Credentials",data:{credentials:n}})}catch{console.info(`Account <${a.uuid}> is suspended.`),await a.lock(!1)}return e.length>0&&r.length>0&&this.allAccountHandlersAreLocked?TA({type:"SuspendedAccounts"}):Oj(void 0)}async updateAccountAuthMethods(){let j=await Hk();return(await Promise.all(this.getAccountHandlers.map(async t=>{let r=Uo(t.serveraccount.signinAddress,j),a=await LA.getSignInMethods(r,t.serveraccount.email,t.serveraccount.userUUID);return a.authMethods.length===0||(0,pRA.default)(a.authMethods,t.serveraccount.authMethods)?!1:(await this.updateAccount(t.serveraccount.uuid,{authMethods:a.authMethods}).catch(()=>console.error(`Failed update: authMethods for ${t.serveraccount.uuid}`)),(LA.CanOnlyPerformOidcAuth(a.authMethods)||LA.canOnlyPerformWebauthnAuth(a.authMethods))&&this.updateAccount(t.serveraccount.uuid,{secretKey:void 0}).catch(()=>console.error(`Failed to set secretKey to undefined for ${t.serveraccount.uuid}`)),!0)}))).includes(!0)}bestUnlockedLocation(){for(let j of this._accountHandlers){if(!j.isUnlocked)continue;let e=j.vaults.find(t=>t.isPersonal);return e?[j.b5account,e]:[j.b5account,j.vaults[0]]}throw new Pe({errorClass:E`BestUnlockedLocation`,message:E`Could not find an available account/vault pair to save in.`})}defaultSavingLocation(){let j=YA().saveNewItemsIn;if(!j)return this.bestUnlockedLocation();let e=this.findAccountHandlerByUuid(j);if(e){if(e.isUnlocked){let t=e.vaults.find(r=>r.isPersonal)||e.vaults[0];if(t)try{let r=YA();return r.saveNewItemsIn=t.uuid,Kg(r),[e.b5account,t]}catch{throw new Pe({errorClass:E`DefaultSavingLocation`,message:E`Could not parse or add 'saveNewItemsIn' in config`})}}return this.bestUnlockedLocation()}for(let t of this._accountHandlers)if(t.isUnlocked){let r=t.vaults.find(a=>a.uuid===j);if(r)return[t.b5account,r]}return this.bestUnlockedLocation()}async getSystemVaultForAccount(j){let e=this.findAccountHandlerByUuid(j);if(!e)throw new Error(`Unable to find account handler for account UUID <${j}>`);return e.getOrCreateSystemVault()}getUserStateForAccount(j){let e=this.findAccountHandlerByUuid(j);if(!e)throw new Error(`Unable to get user state, unable to find account handler for account UUID <${j}>`);return Object.values(Fc).find(t=>t===e.serveraccount.userState)??Fc.Unsupported}};Nv=n6([dc()],Nv);var _=qe.resolve(Nv);var GRA=W(fRA()),j_=W(Ik()),aae="b5x",nae="b5x",oae="b5x-tracker",iae="https://telemetry.1passwordservices.com",sae="com.snowplowanalytics.snowplow/tp2";var lae=new URL(sae,iae),cae={appId:aae,trackerId:oae,collectorUrl:lae,namespace:nae},FRA=new GRA.SnowplowTracker(cae,j_.AllEvents,j_.AllContexts);var e_=class{async saveObjectHandler(j,e,t){if(e===Je)return ASA(t,j);on(t,e,{name:"save-request",data:{data:j,urls:[]}})}};var t_=class{async saveObjectHandler(j,e,t){let r=JSON.parse(j),a=await this.getTypeOfForm(t);if(typeof a!="string"){console.warn("Asked to save a card from ramp.com but was unable to find if it was Marqetta or Stripe");return}let n=a==="stripe"?await this.collectCreditCardFieldsForStripe(t):await this.collectCreditCardFieldsForMarqetta(t);return n.length>0&&r.fields.push(...n),on(t,e,{name:"save-request",data:{data:JSON.stringify(r),urls:[],integration:cx.Ramp}})}async getTypeOfForm(j){return new Promise(e=>{chrome.scripting.executeScript({target:{tabId:j.id,allFrames:!0},func:()=>{let t=document.querySelector("[data-id='STRIPE'],[data-id='MARQETA']");if(!t)return null;let r=t.getAttribute("data-id");return r!=="STRIPE"&&r!=="MARQETA"?null:r.toLowerCase()}},t=>{let r=t.find(({result:a})=>a!==null);return e(r?r.result:void 0)})})}async collectCreditCardFieldsForStripe(j){return new Promise(e=>{chrome.scripting.executeScript({target:{tabId:j.id,allFrames:!0},func:()=>{let t=document.querySelectorAll(".IssuingDisplayElement");return Array.prototype.slice.call(t,0).map(function(a){return a.innerText})}},t=>{(async()=>{let a=[],n=t.find(({result:s})=>s&&s.length===4);if(n&&n.result instanceof Array){let s=n.result.join(" ");a.push({autocomplete:Nj.CcNumber,value:s}),a.push({autocomplete:Nj.CcType,value:await tA.getCreditCardType(s)??Ml.Visa})}let o=t.find(({result:s})=>s instanceof Array?s.find(l=>typeof l=="string"&&!l.includes("/")&&l.length===3):!1);if(o&&o.result instanceof Array){let s=o.result.join("");a.push({autocomplete:Nj.CcCsc,value:s})}let i=t.find(({result:s})=>s instanceof Array?s.find(l=>typeof l=="string"&&!l.includes(" ")&&l.includes("/")):!1);if(i&&i.result instanceof Array){let[s,l]=i.result.join("").split("/");s&&l&&a.push({autocomplete:Nj.CcExp,value:`20${l}${s}`})}e(a)})()})})}async collectCreditCardFieldsForMarqetta(j){return new Promise(e=>{chrome.scripting.executeScript({target:{tabId:j.id,allFrames:!0},func:()=>{let t=document.querySelector("span");return t?t.innerText:null}},t=>{(async()=>{let a=[],n=t.find(({result:d})=>typeof d=="string"&&d.includes(" "));n&&(a.push({autocomplete:Nj.CcNumber,value:n.result}),a.push({autocomplete:Nj.CcType,value:await tA.getCreditCardType(n.result)??Ml.Visa}));let o=t.find(({result:d})=>typeof d=="string"&&!d.includes(" ")&&!d.includes("/")&&d.length===3);o&&a.push({autocomplete:Nj.CcCsc,value:o.result});let i=t.find(({result:d})=>typeof d=="string"&&!d.includes(" ")&&d.includes("/")),[s,l]=i?.result&&typeof i.result=="string"?i.result.split("/"):[];s&&l&&a.push({autocomplete:Nj.CcExp,value:`20${l}${s}`}),e(a)})()})})}};var r_=class{async saveObjectHandler(j,e,t){return on(t,e,{name:"save-request",data:{data:j,urls:[]}})}};var voA=class{async saveObjectHandler(j,e,t,r=[]){return on(t,e,{name:"save-request",data:{data:j,urls:r}})}},bRA={default:new voA,privacy:new e_,ramp:new t_,stripe:new r_};var dae={[fE.CreditCard]:Ur,[fE.Login]:Je,[fE.ApiKey]:Tl,[fE.CryptoWallet]:ax};function yRA(A){if(!A.priKey.jwk?.kid&&!A.pubKey.jwk?.kid)throw new Error("Both private and public JWKs are absent from the pair.");if(A.priKey.jwk?.kid){if(!A.pubKey.jwk?.kid)throw new Error("Public JWK absent from the pair.")}else throw new Error("Private JWK absent from the pair.")}var zv=class{constructor(j){this.handleGetSaveObjectPublicKey=async()=>{let j=await this.getOrCreateKeyPair();if(!j.pubKey.jwk?.kid)throw new Error("Unable to retrieve public key for 'Add to 1Password' feature.");return j.pubKey.jwk};this.handleAddSaveObject=async(j,{tab:e})=>{let t=j.data.data,{type:r,encrypted:a}=j.data;if(a){let n=await this.getOrCreateKeyPair();if(!n?.priKey.key)throw new Error("Private key missing for encrypted save object.");let o=await globalThis.crypto.subtle.decrypt("RSA-OAEP",n.priKey.key,q.base64urlToBytes(t));t=new TextDecoder().decode(new Uint8Array(o))}else t=this.decodeBase64Unicode(t);try{let n=await tA.serviceIntegrationForUrl(e.unparsedUrl);if(!n)return!1;let o=bRA[n];if(!o)return!1;if(r===fE.Login){let{urls:i}=await tA.saveUrlsFromSaveRequest({unparsedUrl:e.unparsedUrl,itemType:r});o.saveObjectHandler(this.processTotpFields(t),this.getUuidForItemType(r),e,i)}else o.saveObjectHandler(t,this.getUuidForItemType(r),e);return!0}catch{return!1}};this.getUuidForItemType=j=>dae[j];this.getOrCreateKeyPair=async()=>{let j=this._sessionStorage.getItem("keyPair");if(j){let r=JSON.parse(j);return yRA(r),new fA.EncryptionKeyPair(r.uuid,await new fA.RSAPublicKey(r.uuid).import(r.pubKey.jwk),await new fA.RSAPrivateKey(r.uuid).import(r.priKey.jwk))}let e=await fA.EncryptionKeyPair.generate();yRA(e);let t={priKey:{jwk:e.priKey.jwk},pubKey:{jwk:e.pubKey.jwk},uuid:e.uuid};return this._sessionStorage.setItem("keyPair",JSON.stringify(t)),e};this.decodeBase64Unicode=j=>{let e=atob(j),t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return new TextDecoder().decode(r)};this.processTotpFields=j=>{let e=JSON.parse(j),t=e.fields.filter(r=>r.autocomplete===Nj.OneTimeCode);t.length>1&&console.warn("Attempted to add more than one TOTP field.");for(let r of t)try{if(!_I(r.value)){let a=[tu.AppleOtpAuth,tu.OtpAuth,tu.Yjotp];console.warn(`TOTP URL is invalid, must be one of ${a.join(", ")}`)}}catch{console.warn("Was not able to validate TOTP field.")}return JSON.stringify(e)};this._sessionStorage=j}};zv=n6([dc(),Zv(0,_q("SessionStorage"))],zv);var xoA=()=>qe.resolve(zv);console.info=U5(console.info,"INFO");console.warn=U5(console.warn,"WARN");console.error=U5(console.error,"ERROR");na()?(qe.register("SessionStorage",e5,{lifecycle:rn.Singleton}),qe.register(qi,zq,{lifecycle:rn.Singleton})):(qe.register("SessionStorage",t5,{lifecycle:rn.Singleton}),qe.register(qi,Nq,{lifecycle:rn.Singleton}));var kae={useToken:j5};qe.register("PersistentStorage",kae,{lifecycle:rn.Singleton});qe.register("SnowplowTracker",{useValue:FRA});qe.registerSingleton(bv);qe.registerSingleton(zv);qe.registerSingleton(Nv);qe.registerSingleton(g8);qe.registerSingleton(Z7);qe.registerSingleton(q8);qe.registerSingleton(s8);qe.registerSingleton(c8);qe.registerSingleton(h8);qe.registerSingleton(Iv);qe.registerSingleton(ZI);qe.registerSingleton(cg);import tne from"/assets/js/messages.i18n-2DIDTOO5.js";async function foA(A,j,e){let t=globalThis.crypto.getRandomValues(new Uint32Array(1))[0],r=await sn({tabId:A,message:{name:"request-delegated-session",data:{accountUuid:j,userUuid:e,requestId:t}}});return r.requestId?r.requestId===t?Oj(r):TA("got delegated session response with incorrect request ID"):TA("got delegated session response without a request ID")}var vc=class extends Error{constructor(j,e){super(j),this.serverErrorReason=e}};async function $RA(A,{code:j,state:e}){let t=Uo(A.serveraccount.signinAddress,A.deviceJson.uuid),r;try{r=await LA.verifyOidc(t,j,e,A.deviceJson)}catch(a){if(q.errors.isNewServerError(a))switch(a.reason){case q.errors.ServerErrorReason.userSuspended:throw new vc("User is suspended",a.reason);case q.errors.ServerErrorReason.userDeleted:throw new vc("User does not exist",a.reason);case q.errors.ServerErrorReason.oidcUserDoesNotMatch:throw new vc("Identity provided to B5 does not match the user trying to authenticate",q.errors.ServerErrorReason.oidcUserDoesNotMatch);default:throw new vc("SSO Authentication server request failed")}throw new vc("SSO Authentication unsuccessful")}if(r.type!=="found")throw new vc("Extension is not trusted.",q.errors.ServerErrorReason.deviceNotEnrolled);return{unverifiedContext:t,ssoResponse:r}}function wRA(A){if(A instanceof vc)switch(A.serverErrorReason){case q.errors.ServerErrorReason.userDeleted:return"user-deleted";case q.errors.ServerErrorReason.userSuspended:return"user-suspended";case q.errors.ServerErrorReason.oidcUserDoesNotMatch:return"sso-identity-mismatch";case q.errors.ServerErrorReason.deviceNotEnrolled:return"device-not-trusted"}return q.errors.isNewServerError(A)?A.code===q.errors.HTTPStatusCode.internalServerError?"server-unavailable":"server-error":"unlock-error"}async function IRA(A,j,e){let t=CK(),r=new Promise((o,i)=>{sn({tabId:e,message:{name:"upgrade-trusted-device",data:{requestId:t,accountUuid:A,userUuid:j}}}).then(s=>{o(s)}).catch(s=>{i(s)})}),a=Symbol(),n;try{n=await $I(r,500,"background: upgrade-trusted-device",a)}catch(o){return o===a?TA({type:"TIMEOUT"}):TA({type:"MESSENGER_ERROR"})}return n?n.requestId?n.requestId!==t?TA({type:"BAD_REQUEST_ID",data:"requestId from response does not match"}):Oj(n):TA({type:"BAD_REQUEST_ID",data:"requestId missing from response"}):TA({type:"TIMEOUT"})}var DRA=A=>!!A.deviceUuid&&Object.keys(A.userInfo).length>0,ORA=(A,j)=>{let e=DRA(j);return DRA(A)||e&&A.deviceUuid===j.deviceUuid?{restoreRequired:!1,backUpB5WebState:!0}:e?{restoreRequired:!0,backUpB5WebState:!1}:{restoreRequired:!1,backUpB5WebState:!1}},PRA=A=>{let j=Object.entries(A.userInfo),e=Object.entries(A.deviceKeys),t={};j.forEach(([n,o])=>{mae([n,o])&&(t[n]=o)});let r={};e.forEach(([n,o])=>{Eae([n,o],t)&&(r[n]=o)});let a;return Bae(A.lastUserUuid,t)&&(a=A.lastUserUuid),{...A,userInfo:t,deviceKeys:r,lastUserUuid:a}},mae=([A,j])=>{try{let e=poA(A),t=moA(j);return t?!!_.findAccountHandlerByUuid(t,e):!1}catch{return!1}},Eae=([A,j],e)=>{try{let{accountUuid:t,userUuid:r}=dRA(A);return e[V2(r)]?!!_.findAccountHandlerByUuid(t,r):!1}catch{return!1}},Bae=(A,j)=>{if(!A)return!1;for(let[e,t]of Object.entries(j))try{let r=poA(e),a=moA(t);if(!a)continue;if(_.findAccountHandlerByUuid(a,r)&&A===r)return!0}catch{continue}return!1};async function CRA(A,{tab:j}){if(!j.url)return;let e=new URL(j.url);if(!$m(e.hostname)||!A.data.deviceInit||!j.id)return;let t=await L6();sn({tabId:j.id,message:{name:"initialize-device",data:{device:t}}})}var HRA=async(A,{tab:j})=>{let e=A.data.details.accountUuid;if(!await _A.getDatabase().findAccountByUUID(e)){console.error("Unable to create session. Account with the given UUID could not be found.");return}let r=_.findAccountHandlerByUuid(e);if(!r){console.error(`Unable to find account handler with UUID <${e}`);return}MRA(r,A,j.id)},TRA=async A=>{let{state:j,code:e,accountUuid:t}=A.data.details;if(!j||!e||!t){console.error("HandleB5SsoSignInComplete: Invalid arguments provided to complete B5 SSO sign in."),lj(new q.LoggableError({errorClass:E`UnlockError`,message:E`Invalid arguments provided to complete B5 SSO sign in.`,metaData:{account:{accountUuid:q.logsafe.assertLogSafe(t)}}}));return}let r=_.findAccountHandlerByUuid(t);if(!r){console.error(`HandleB5SsoSignInComplete: Unable to find account handler for provided account UUID <${t}>.`);return}u8(`https://mocked.1password.com/sso/oidc/redirect/#state=${j}`).catch();try{let a=await $RA(r,{code:e,state:j}),n=await Xm({type:"SingleSignOn",data:a});if(n.isErr())throw new Error(n.error.type)}catch(a){a instanceof vc&&await gae(r,a);let n=wRA(a);await Tg(n),We(a)?lj(a):lj(new q.LoggableError({errorClass:a instanceof vc?E`SSOAuthenticationError`:E`UnlockError`,message:E`Unable to unlock b5x with SSO.`,userUuid:q.logsafe.assertLogSafe(r.serveraccount.userUUID),metaData:{account:{accountUuid:q.logsafe.assertLogSafe(t)}},stackOverrideError:a})),console.error("HandleB5SsoSignInComplete: Unable to unlock b5x with SSO.",We(a)?`: ${a.name} - ${a.message}`:"");return}},gae=async(A,j)=>{switch(j.serverErrorReason){case q.errors.ServerErrorReason.userSuspended:await A.setUserState(Yj.State.Suspended).catch(e=>{console.error(`Could not update account's user state to ${Yj.State.Suspended}`,e)});break;case q.errors.ServerErrorReason.userDeleted:A.destroyAccount();break;case q.errors.ServerErrorReason.deviceNotEnrolled:await _.updateAccount(A.serveraccount.uuid,{deviceCredentials:void 0});break;default:break}},KRA=async(A,{tab:j})=>{let e=A.data.details.accountUuid,t=await _A.getDatabase().findAccountByUUID(e);if(!t){console.error("Unable to create session. Account with the given UUID could not be found.");return}let r=_.findAccountHandlerByUuid(e);if(!r){console.error(`Unable to find account handler with UUID <${e}`);return}let a=t.userUUID,n=A.data.details.userUuid;if(n&&n!==a){console.error("Unable to create session. Extension user and b5web user do not match.");return}MRA(r,A,j.id)},SRA=async(A,{frame:j})=>{let e=j.URL();if(!e||!$m(e.hostname))return{restoreRequired:!1,credentials:void 0,host:e?.host||""};let t=e.host;if(!hj.hasPreRegistrationFlag("b5x-account-hydration"))return{restoreRequired:!1,credentials:void 0,host:t};let{credentials:r}=A.data.details;await vj.init();let a=BoA(t),{backUpB5WebState:n,restoreRequired:o}=ORA(r,a),i=PRA(n?r:a);return EoA(i,t),{restoreRequired:o,credentials:i,host:t}},MRA=async(A,j,e)=>{let t,r=async()=>{if(!A.client&&(await A.reinitializeClient(),!A.client))return;let a={name:"auto-sign-in-to-b5",data:{...await A.client.getDelegateSessionInit(j.data.details.device),ssoNonce:j.data.type==="B5SessionInit"?j.data.details.ssoNonce:void 0}};sn({tabId:e,repeat:!1,message:a}),t&&clearTimeout(t)};A.isLocked?(await eE(),t=setTimeout(()=>{try{nr.unsubscribe(Or,r)}catch{console.info("Unlock listener was already unsubscribed or was never registered")}},3e4),nr.subscribe(Or,r,{once:!0})):r()};async function hae(A,j,e){let t=j.details;if(A)return console.error("Auth Only tabs should not be used when connected to a Desktop app"),chrome.tabs.remove(e);if(joA(t.accountUuid))return;let r=z6();if(r.isEnabled()&&!r.addAccountPromptEnabled()||!(await k_A(t.accountUuid)).shouldPrompt)return;let n;if(t.shouldAddAccountToExtension||await E8(!1)?n="YES":n=await T2(e,t.accountUuid),n==="YES"){let o,i=!1;switch(j.type){case"B5SignInSucceeded":o=j.details.accountKey,i=!1;break;case"B5DelegatedSignInSucceeded":i=!0;break;case"B5MyceliumDelegatedSignInSucceeded":"password_secret_key"in j.details.extraCredentials?(o=j.details.extraCredentials.password_secret_key.secret_key,i=!1):("sso"in j.details.extraCredentials||"webauthn"in j.details.extraCredentials)&&(i=!0);break;default:ue(j)}cb({components:{emailAddress:t.email,secretKey:o,server:t.signinAddress,isSsoAccount:i},accountUuid:t.accountUuid})}else n==="IGNORE"&&AoA(t.accountUuid)}function _RA(A){chrome.runtime.sendNativeMessage("application.id",{name:"iap",data:A.data.url})}async function LRA(A,{tab:j}){B6();let e=A.data.details,t=e.authOnly??!1,r=e.isSsoAccount??!1,a=e.shouldAddAccountToExtension??!1;if(ie.getDesktopAppState().type==="Connected"&&(!r||!a))return hae(t,A.data,j.id);zk();let n=await _A.getDatabase().findAccountByUUID(e.accountUuid);if(n){if(n.userUUID!==e.userUuid)return;let l=ai(n.signinAddress),d=ai(e.signinAddress);if(l.endsWith("/")&&(l=l.slice(0,-1)),d.endsWith("/")&&(d=d.slice(0,-1)),l!==d)return;if(!((A.data.type!=="B5SignInSucceeded"||n.secretKey===A.data.details.accountKey)&&n.signinAddress===e.signinAddress&&n.email===e.email&&n.dSecret===e.dSecret)){let u={signinAddress:e.signinAddress,email:e.email};e.dSecret&&(u.dSecret=e.dSecret),A.data.type==="B5SignInSucceeded"&&(u.secretKey=A.data.details.accountKey),await _.updateAccount(e.accountUuid,u),await _.lockAccountHandler(e.accountUuid)}switch(A.data.type){case"B5SignInSucceeded":{let u=await Bb(A.data.details.masterPassword);u.isErr()&&console.info(`Failed to unlock newly added account: ${u.error.type}`);break}case"B5DelegatedSignInSucceeded":case"B5MyceliumDelegatedSignInSucceeded":{let{accountUuid:u,userUuid:m,masterKey:I,email:S,signinAddress:f}=A.data.details,{session:v}=A.data.details;if(!I){console.warn("Unable to unlock account without master key");return}let P=sj(JSON.parse(I),co);if(P.type==="err"){console.warn("Failed to decode JWK");return}if(!v){let D=await foA(j.id,u,m);D.isOk()?v=D.value.sessionDetail.session:console.warn(`Failed to get delegated session response when trying to unlock account: ${D.error}`)}if(v){let D=await QD({email:S,signInAddress:f},P.value,{notifier:v.notifier,sessionKey:v.sessionKey},!1),C=await Xm({type:"DelegatedSession",data:{client:D,accountUuid:u,muk:P.value}});if(C.isErr()){console.warn(`Unable to unlock account with delegated session: ${C.error.type}`);return}let b=_.findAccountHandlerByUuid(n.uuid);if(b?.isUnlocked)try{await vae(D,A,j,b)}catch(h){yn(h,E`Failed upgrading saved account to Trusted Device`,b.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(b.serveraccount.uuid):void 0)}}break}default:ue(A.data)}await _.runSyncerForAccount(e.accountUuid),t&&(await chrome.tabs.remove(j.id),await Qn(100),Dg());return}if(t){let l=await ip();await R6A(A.data),l?chrome.tabs.remove(j.id):LnA(j);return}if(ut()||joA(e.accountUuid))return;let o=z6();if(o.isEnabled()&&!o.addAccountPromptEnabled())return;let i=(A.data.type==="B5DelegatedSignInSucceeded"||A.data.type==="B5MyceliumDelegatedSignInSucceeded")&&A.data.details.session===void 0,s;if(e.shouldAddAccountToExtension||await E8(!1)?s="YES":s=await T2(j.id,e.accountUuid),s==="YES"){if(i&&(A.data.type==="B5DelegatedSignInSucceeded"||A.data.type==="B5MyceliumDelegatedSignInSucceeded")){let l=await foA(j.id,A.data.details.accountUuid,A.data.details.userUuid);l.isOk()?(A.data.details.masterKey=l.value.sessionDetail.masterKey,A.data.details.session=l.value.sessionDetail.session):console.warn(`Failed to get delegated session response when trying to add account: ${l.error}`)}if(A.data.type==="B5DelegatedSignInSucceeded"||A.data.type==="B5MyceliumDelegatedSignInSucceeded"){let l=await NRA(A.data.details,j);l?.srpx&&(A.data.details.srpx=l.srpx)}await R6A(A.data)}s==="IGNORE"&&AoA(e.accountUuid)}async function NRA({userUuid:A,accountUuid:j},e){let t=await IRA(j,A,e.id);if(t.isErr()){let r=t.error.data?`${t.error.type}: ${t.error.data}`:t.error.type;console.warn(`Failed to get trusted device upgrade response while adding account: ${r}`),lj(new q.LoggableError({errorClass:E`HandleB5SignInSucceeded`,message:q.logsafe.assertLogSafe(`TrustedDeviceUpgrade request to b5web failed: ${t.error.type}`),userUuid:q.logsafe.assertLogSafe(A)}));return}return t.value}async function qae(A,j){if(!LA.canPerformTrustedDeviceBasedAuth(j.serveraccount.authMethods))return!1;let t=j.getDeviceCredentials();if(t.isErr())return!0;if(A?.CTX)try{await LA.getEncryptedCredentialBundle(A.CTX,t.value.deviceKeyId)}catch(r){if(q.errors.isServerError(r,Ci.deviceNotEnrolled,q.errors.HTTPStatusCode.notFound))return!0;if(q.errors.isServerError(r)&&r.code===q.errors.HTTPStatusCode.notFound)return!1;let a=q.errors.isServerError(r)||q.errors.isClientError(r)?`${r.name} + ${r.code}`:"unknown error";yn(r,q.logsafe.assertLogSafe(`Error (error: ${a}) while getting encrypted bundle for user ${j.serveraccount.userUUID}.`),j.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(j.serveraccount.uuid):void 0)}return!1}async function vae(A,j,e,t){if(A&&await qae(A,t)){let r=await NRA(j.data.details,e);r?.srpx&&await CS(A,t,r?.srpx)}}function zRA(A){if(!YA().showNotifications||Oe())return;let e=`up-to-date-${new Date().getTime()}`;chrome.notifications.create(e,{type:"basic",iconUrl:Cs,title:nA("1Password is up to date"),message:nA("Thank you for running the latest version ({version}) of 1Password!",{version:A})})}var JRA=W(SO());var xae="2.0.0",GoA="firefox-already-disabled-rich-icons",RRA="firefox-data-collection-opt-in",y8=class A{static async onInstalled(j){switch(j.reason){case chrome.runtime.OnInstalledReason.INSTALL:return A.onExtensionInstall();case chrome.runtime.OnInstalledReason.UPDATE:return j.previousVersion?A.onExtensionUpdate(j.previousVersion):void 0;case"browser_update":case chrome.runtime.OnInstalledReason.CHROME_UPDATE:return A.onBrowserUpdated()}}static onUpdateCheck(){let j=np();chrome.runtime.requestUpdateCheck(e=>{if(console.info(`1Password (${j}) update status: ${e}`),e!=="update_available")return zRA(j)})}static async onExtensionInstall(){let j=new Date;if(console.info(`1Password ${np()} has been installed on ${j.toString()}.`),await gc,!(Oe()&&await ip()))return It()&&(ng("firefox-rich-icon-enable"),ng("firefox-local-data-collection-enable"),vj.setItem(GoA,"true")),sE()}static async onExtensionUpdate(j){let e=np();if(console.info(`1Password has been updated to ${e} on ${new Date().toString()}.`),j!==e){if(await vj.init(),It()){vj.getItem(GoA)!=="true"&&(vj.setItem(GoA,"true"),tn({showRichIcons:!1}),Ss("firefox-rich-icon-enable"));let r=vj.getItem(RRA);r!==void 0?(tn({firefoxDataCollection:r==="true"}),vj.removeItem(RRA),ng("firefox-local-data-collection-enable")):Ss("firefox-local-data-collection-enable")}if((0,JRA.lt)(j,xae))return tn({showChangelogPopupOnInteraction:!0}),ln();Ss("update")}}static onBrowserUpdated(){console.info("\u{1F195} The browser was updated.")}};var fae=new Cg,URA=()=>{nr.subscribe(hp,Gae).subscribe(tx,Fae).subscribe(bd,bae).subscribe(rx,async A=>tA.clearFillSession(A.detail.tabId))};async function Gae(A){let j=Ft(A.detail.tab);if(!j){console.error("[Sign in with] Tab no longer exists for session");return}let e=await tA.fillSessionStatus(j);if(e?.state.type!=="sign-in-with-provider")return;if(e.nakedDomain!==j.nakedDomain())return console.error(`Naked domain mismatch for \`${e.state.type}\` fill session.`),tA.clearFillSession(j.id);let{provider:t}=e.state.data;(await zF(j)).includes(t)&&await CF(j,t)}var Fae=async A=>{let j=await an(A.detail.sessionTabId);if(!j){console.error("[Sign in with] Tab no longer exists for session");return}let e=await tA.fillSessionStatus(j);if(e?.state.type!=="sign-in-with-provider")return;let{provider:t}=e.state.data;if(t!==A.detail.provider)return console.error(`Invalid provider \`${t}\` received for \`${A.detail.provider}\` session.`),tA.clearFillSession(j.id);await tA.advanceFillSession(j,{type:"sign-in-with-flow-started",data:{sessionAssociation:{tabId:A.detail.tabId,tabUrl:A.detail.url}}})},bae=async A=>{let j=await an(A.detail.tabId);if(!j){console.error("[Sign in with] Tab no longer exists for session");return}let e=await tA.fillSessionStatus(j);if(!(e?.state.type!=="sign-in-with-provider"&&e?.state.type!=="sign-in-with-flow-started")){if(e.state.type==="sign-in-with-provider"&&e.state.data.provider!==A.detail.provider)return console.error(`Invalid provider \`${e.state.data.provider}\` received for \`${A.detail.provider}\` session.`),tA.clearFillSession(j.id);await tA.advanceFillSession(j,{type:"sign-in-with-detected"})}};async function FoA(A){return fae.push(async()=>{let j=await tA.fillSessionStatus(A);if(j?.state.type==="sign-in-with-provider"||!j?.item)return!1;try{let{itemUuid:e,vaultUuid:t}=j.item,r=await Rr(e,t);return r?(await ED(A,r,void 0),!0):(console.error(`Unable to load item by uuid while trying to resolve pending fill for tab <${A.id}>`),!1)}catch{return console.error(`Unable to fulfill resolve pending fill for tab <${A.id}>`),!1}})}var XRA=()=>{let[A]=_.defaultSavingLocation(),j=_.findAccountHandlerByUuid(A.uuid);return j?{name:j.serveraccount.name,hasSignedInClient:j.hasSignedInClient}:void 0};var VRA=({data:A})=>{let j={},e=Object.entries(A.tags??{});e.length>0&&e.forEach(([r,a])=>{a&&(j[r]=q.logsafe.assertLogSafe(a))});let t=new Error;t.stack=A.stack;try{lj(new q.LoggableError({errorClass:q.logsafe.assertLogSafe(A.name),message:q.logsafe.assertLogSafe(A.message),tags:j,severityLevel:A.severity,stackOverrideError:t}))}catch{console.error(`Could not report event: ${event instanceof Event?event.type:"unknown event"}`)}};function WRA(){f6()&&browser.runtime.connectNative("application.id").onMessage.addListener(async function(e){"name"in e&&e.name==="iap"&&(await _k()).forEach(r=>{sn({tabId:r.id,message:{name:"forward-iap-receipt-to-b5",data:e}})})})}async function YRA(A,j,e,t){switch(t.name){case"fill-item":return Dae(A,t.data.itemId,t.data.designationFilter);case"fill-tutorial-item":return Lae(A);case"fill-generated-password":return Cae(A,j,t.data);case"save-item":return Hae(A,e);case"show-privacy-dialog":return Tae(A,j);case"show-email-alias-dialog":return Kae(A);case"fill-existing-alias":return Sae(A);case"show-brex-create-dialog":return Mae(A,j);case"show-ssh-create-dialog":return _ae(A);default:ue(t)}}async function Iae(A){if(!A.cacheInformation)return!1;let j=A.overview.b5AccountUUID;if(!j)return console.error("Item was missing b5AccountUUID in isBrexCardLocked"),!0;let e=(await DF()).find(a=>a.accountUuid===j);if(!e)return console.warn(`Unable to check Brex card is locked for <${j}>`),!0;let t=await ld(e.accountUuid,e.accountId,"brex");if(!t)return console.warn("Failed to get token when checking if Brex card is locked"),!0;let r=await HTA(Mm(t.context.clientId),A.cacheInformation.cardId,t.accessToken);return r.isOk()&&r.value.status!==i1.Active?(J5(j,r.value.id),!0):r.isErr()?(console.warn(`Unable to get card deatils to check if it's locked for <${j}>`),!0):!1}async function Dae(A,j,e){if(gNA())return;let t=await hc(JSON.parse(j));if(t.isErr())throw new Error("Unable to load item with local id");let r=t.value;if(r.templateUuid===Ur&&await Iae(r)){alert(nA("This card has been locked/terminated, please use another card."));return}if(e)return ED(A,r,"INLINE",{designationFilter:e,requireAuthorization:!0});pc(A,r,"INLINE",{requireAuthorization:!0,skipSignInWithCheck:!0})}var Oae=async A=>A?await qt.connectivityStatus()!=="online"?{notification:"generatedPasswordUserOffline",message:"User is offline"}:A.isLocked?{notification:"generatedPasswordAccountIsLocked",message:"Account was found to be locked"}:A.hasSignedInClient?await A.hasGeneratedPasswordVault()?{notification:"generatedPasswordUnexpectedError",message:"Unexpected error"}:{notification:"generatedPasswordNoVaultFound",message:"Account has no generated password vault"}:{notification:"generatedPasswordNotSignedIn",message:"Account does not have a signed in client"}:{notification:"generatedPasswordNoDefaultSavingLocation",message:"No default saving location found"},a_="Unable to use the generated password",Pae=A=>{if(A instanceof Pe){lj(A).catch(()=>{console.error("Unable to track `savePasswordHistory` loggable error encountered")});return}let j=new Pe({errorClass:E`SavePasswordHistory`,message:E`Unable to save password history. Unknown reason.`});lj(j).catch(()=>{console.error("Unable to track `savePasswordHistory` error encountered")})};async function Cae(A,j,e){try{DD(e,A).catch(Pae),await bb(A,!1,j,e)}catch(t){if(!await Gt()){console.warn("Cannot send message: Failed to resolve information on active tab");return}let[a]=_.defaultSavingLocation(),n=_.findAccountHandlerByUuid(a.uuid),o=await Oae(n);ta(A.id,{type:o.notification}),o.notification==="generatedPasswordUserOffline"?console.error(`${a_}: The account is not signed in or appears offline`):We(t)?(lj(t),console.error(`${a_}: ${t.message}`)):(lj(new q.LoggableError({errorClass:E`FillGeneratedPassword`,message:q.logsafe.assertLogSafe(`${a_}: ${o.message}`),userUuid:q.logsafe.assertLogSafe(n?.accountIdentifier.userUUID??""),stackOverrideError:t instanceof Error?t:void 0})),console.error(`${a_}: ${o.message}`))}}async function Hae(A,j){let e;JnA(j)?e=Ur:UnA(j)?e=q6:e=Je,on(A,e,{name:"collected-page-details",data:{collectedPageDetails:await Yr(A)}})}function Tae(A,j){return Kk(A.id,{name:"privacy-create-credit-card",data:{frameIdentifier:j}})}function Kae(A){return Kk(A.id,{name:"create-an-email-alias",data:{frameIdentifier:void 0}})}async function Sae(A){let j=await tA.getEmailAliasSessionStatus(A.id,A.unparsedUrl);if(j?.alias)switch(j.alias.type){case"Fastmail":await BD(A,j.alias.content.alias);break;default:ue(j.alias.type)}}function Mae(A,j){return Kk(A.id,{name:"brex-create-credit-card",data:{frameIdentifier:j}})}function _ae(A){return Kk(A.id,{name:"create-ssh-key",data:void 0})}async function Lae(A){let j=await wrA(A),e=ce.getItem("tutorial-save");if(e&&j.isOk()){let t=await bS(e);if(t){let r={postFill:{type:"focusNextField"}},a=await tA.fillItem(t,j.value,r);await Rj("autofill-perform-fill",{nextFill:{fillPayload:a.fillPayload},authorizedUnsafeHttp:!0},{tabId:A.id})}}}var Nae=20;async function ZRA(A,j,e){let t=a=>e.some(n=>n.type==="SuggestedCategory"&&n.data.type===a);if(fi(A)&&j==="username")return BSA();if(t(q6)&&(j===Nj.Username||j===Nj.Email))return Vae(A);let r;return t(Je)&&(r=await zae(A)),Xae(A,j,e,r)}async function zae(A){if(A.URL()?.host!=="accounts.google.com")return;let j=await Yr(A);return(()=>{for(let t of j.frames)for(let r of t.fields)if(r.type==="email"&&r.htmlName==="identifier"&&r.htmlId==="hiddenEmail"&&r.value)return r.value})()}async function Rae(A,j,e,t){let r=await Ij.loadItemCache();if(!r)return[];let a;switch(e){case Je:a=se.logins;break;case Ur:a=se.creditCards;break;case q6:a=se.identities;break;case Js:a=se.passwords;break;case Ii:a=se.sshKeys;break;default:return[]}let{showRichIcons:n}=YA(),o=se.userSelected(hr(),void 0,void 0,r),i=await _.getPersonItemsForAccounts(),s=r.itemsForTab(A,k=>o(k)&&a(k),a6.fieldContextSort(A,t,i));e===Je&&(s=(await Promise.all(s.map(async u=>({decryptedItem:await r6(u),encryptedItem:u})))).filter(({decryptedItem:u})=>u?Jae(u,j):!1).map(({encryptedItem:u})=>u));let l=await Promise.all(s.map(async k=>sSA(k,{iconSize:120,showRichIcons:n,isPersonItem:JF(k,i)})));if(l.some(k=>k.name==="entry"&&k.data.accessory==="profile")){let k=l.find(u=>u.name==="entry"&&u.data.accessory!=="profile");k&&(k.data.insertDividerBefore=!0)}return l}function Jae(A,j){if(A.username?.value||A.getPassword())return!0;let e=A.details?.sections?.some(r=>r.fields?.some(fA.VaultItem.getSsoValue)),t=j===Nj.OneTimeCode&&A.details?.sections?.some(r=>r.fields?.some(fA.VaultItem.isTotpField));return!e||t}async function Uae(A){switch(A.type){case"Integration":switch(A.data){case yd.Brex:return uSA();case yd.Privacy:return dSA();default:return ue(A)}case"SuggestedPassword":{let j=await CNA();return lSA(j)}case"CreateSshKey":return cSA()}}async function Xae(A,j,e,t){let[r,a]=e.reduce((i,s)=>(s.type==="SuggestedAction"?i[0].push(s):i[1].push(s),i),[[],[]]),n=r.map(async i=>Uae(i.data)),o=(await Promise.all(a.map(async i=>Rae(A,j,i.data.type,t)))).reduce((i,s)=>i.concat(s),[]);return n.length>0&&o.length>0&&(o[0].data.insertDividerBefore=!0),Promise.all([...n,...o])}async function Vae(A){let j=await Qae(),e=await Wae(j);return await Yae(e,A),e}async function Wae(A){let j=new Map,e=[];for(let t of A)for(let r of t.fields){let a=j.get(r.value);a?j.set(r.value,a+1):(j.set(r.value,1),e.push({item:t.item,field:r}))}return e.sort((t,r)=>{let a=k=>(k.faveIndex??0)>0,n=a(t.item),o=a(r.item),i=j.get(t.field.value)??0,s=j.get(r.field.value)??0,l=t.field.value,d=r.field.value;return n&&!o?-1:!n&&o?1:i>s?-1:i<s?1:l.localeCompare(d)}),Promise.all(e.slice(0,Nae).map(({item:t,field:r})=>caA(t,{title:r.value,secondary:"",designationFilter:[r.designation]})))}var Yae=async(A,j)=>{if(await mv().catch(t=>(yn(t,E`Failed to get fastmail configuration`),!1))){let t=await tA.getEmailAliasSessionStatus(j.id,j.unparsedUrl);A.length>0&&(A[0].data.insertDividerBefore=!0),t?.alias?A.unshift(pSA()):A.unshift(kSA())}};async function Qae(){let A=await Ij.loadItemCache();if(!A)return[];let j=se.userSelected(hr(),void 0,void 0,A),e=a=>j(a)&&se.identities(a),t=A.fillableItems(e,a6.faved);return t.length>50&&(t=t.slice(0,50)),(await Promise.all(t.map(async a=>{if(a.templateUuid!==q6)return console.error("Tried to load username suggestions from unsupported item type."),{item:a,fields:[]};let n=await r6(a);return{item:a,fields:n?Zae(n):[]}}))).filter(a=>a.fields.length>0)}function QRA(A,j){if(!(!A.details||!A.details.sections)){for(let e of A.details.sections)if(e.fields){for(let t of e.fields)if(j(t))return t}}}function Zae(A){let j=[],e=QRA(A,r=>!!r.v&&(r.k==="string"&&r.n==="email"||r.k==="email"));e&&j.push({value:e.v,designation:Nj.Email});let t=QRA(A,r=>r.k==="string"&&r.n==="username"&&!!r.v);return t&&j.push({value:t.v,designation:Nj.Username}),j}var AJA=async A=>{hj.hasPreRegistrationFlag("b5x-notification-manager")&&await lD(A)&&ta(A,{type:"notificationManager"})};var A6e=E`background/inline-handler.ts`,boA=(A,j)=>{let e=A.name.toLowerCase(),t=j.name.toLowerCase();return e<t?-1:e>t?1:0};async function jJA(A,{tab:j,frame:e}){let t;A.data.targetParent&&(t=await e.parent());let r=typeof t=="number"?{frameId:t}:{};return new Promise(a=>{chrome.tabs.sendMessage(j.id,JSON.parse(A.data.message),r,a)})}function eJA(A,{tab:j}){let e={type:"targeted-inline-message",data:{message:A.data.message}};xg().sendMessage(j.id,oj.assertLogSafe("inline-menu"),e)}function tJA(A){}async function rJA(A,j){let e=await tA.analyzePage({unparsedUrl:j.tab.url,title:j.tab.title,frames:[A.data]},!0,await aD()),t=e.designations.fields[0],r=t?.autofillType??Nj.None,a=t?.formDesignation??a1.None,n=t?.correctAutocompleteOff??!1;return{fieldDesignation:r,formDesignation:a,requiresInteractionForMenu:n,suggestions:e.suggestions}}function aJA(A){gSA(A.data.event)}function nJA(A){vSA(A.data.event)}function oJA(A){hSA(A.data.accountUuid,A.data.event)}function iJA(A){qSA(A.data.accountUuid,A.data.event)}function sJA(A){IS(A.data.event)}function lJA(A){xSA(A.data.accountUuid,A.data.event)}function cJA(A){DS(A.data.event)}function dJA(A){fSA(A.data.event)}function kJA(A){qKA(A.data.event.eventType,A.data.event.data)}function uJA(A){GSA(A.data)}function pJA(A,j){gb("inline")}async function j6e(A){let{autoSubmitLogins:j}=YA();if(!j||!A.item)return;let{itemUuid:e,vaultUuid:t}=A.item,r=await Rr(e,t);if(!(!r||!YaA(r)))return r.username?.value}async function mJA(A,{tab:j,frame:e}){let t=YA(),r=await ip(),n=(await _.getFrozenAccountsInfo()).areAllAccountsFrozen,o=X7(),i=e.URL()?.toString(),s=i?await tA.signInWithUrlToProvider(i):void 0,l=async()=>{let k=await tA.fillSessionStatus(j);if(!k)return{fillPendingUserInteraction:!1,fillSessionAutosubmitGoogleUsername:void 0};let u=k.state.type!=="sign-in-with-provider"&&k.item!==void 0,m=s===J6.Google?await j6e(k):void 0;return{fillPendingUserInteraction:u,fillSessionAutosubmitGoogleUsername:m}},d=t.inlineSaveEnabled;return{locked:Kt(),basePath:chrome.runtime.getURL("").replace(/\/$/,"")+"/inline",autoshowMenu:t.inlineShowAutomatically,inlineDisabled:!t.inlineEnabled||Jn.has(j)||!r,inlineSavingEnabled:d,locale:t.language,canRequestUnlock:await gnA(),appTheme:t.appTheme,numberOfItems:ut()?3:4,usoLoginEnabled:t.socialLoginsEnabled,enabledAutosaveTypes:SrA(),topFrameNakedDomain:j.nakedDomain(),areAllAccountsFrozen:n,usoLogonPageProvider:s,unleashFeatures:o,autosaveTotpEnabled:t.autoSaveTotpEnabled,...await l()}}async function EJA(A,{tab:j}){B6();let{autofillType:e,suggestions:t}=A.data;return ZRA(j,e,t)}async function BJA(A,{tab:j}){B6();let{action:e,fieldDesignation:t,frameIdentifier:r}=A.data.request;await YRA(j,r,t,e),eb(A.data.contentScriptMetadata)}async function gJA(){let{language:A,appTheme:j}=YA(),e=await Wo(),t=e.find(r=>r.type===Z8)??e.find(r=>r.type===ox)??e.find(r=>r.type===nx);if(!t)throw new Error("Unable to open enable Privacy dialog when no accounts are present.");return{appTheme:j,locale:A,response:{type:"Success",data:{suggestedAccountUuid:t.uuid,accounts:e.sort(boA).map(r=>({uuid:r.uuid,name:r.name,icon:{id:"",sources:[{type:"RichIcon",content:{url:r.avatar,masked:!0}}],shape:Kl.RoundedRect}}))}}}}async function hJA(A,{tab:j}){if(!A.data)return{error:"FailedToCreateApiKey"};if(!_.accountIsUnlocked(A.data.accountUuid))return{error:"AccountLocked"};try{await jSA(j,A.data.accountUuid)}catch{return{error:"FailedToCreateApiKey"}}return UF(j,!0),{error:void 0}}async function qJA(A,{tab:j}){let{language:e,appTheme:t}=YA(),{defaultSuggestedVaultId:r,vaultListElements:a}=await Bg(void 0,{includeDontSaveOption:!0}),n=await zTA(),o=await tA.inferBestTitle(j.title,j.unparsedUrl);return{locale:e,response:n.length>0?{type:"Success",data:{suggestedVaultId:r,vaultListElements:a,fundingAccounts:n,defaultCardName:o}}:{type:"Error",data:"UnableToGetFundingAccounts"},appTheme:t}}async function vJA(A,{tab:j}){B6();let{frameIdentifier:e,vaultId:t}=A.data,r=t.vaultUuid!==GS,[a,n]=_.defaultSavingLocation(),o=t.accountUuid===saA?a.uuid:t.accountUuid,i=t.vaultUuid===GS?n.uuid:t.vaultUuid;if(!await X5())return{error:{type:"IntegrationDisabled",content:void 0}};if(_.allAccountHandlersAreLocked)return{error:{type:"AppLocked",content:void 0}};if(r&&!_.accountIsUnlocked(t.accountUuid))return{error:{type:"VaultLocked",content:void 0}};let l=await tA.validatePrivacyCardParams(A.data.params);if(l.type!=="Success")return{error:l.content};let{authorized:d}=await uv(j,4);if(!d)return{};let k;if(e)try{k=(await d8(j.id,e))?.URL()?.origin}catch{}let u=await tA.createPrivacyCard({params:A.data.params,tabUrl:j.unparsedUrl,frameUrl:k,itemTemplate:JSON.stringify(await Ts("002")),apiKey:A.data.apiKey,useSandboxApi:brA()});if(u.type!=="Success")return{error:u.content};let m=q.decode(u.content.item,q.json.pipe(ap),{mode:"unsafe_report_only",file:A6e,func:E`handleFillNewPrivacyCard`}).unwrap(),I=await LTA(m,o,i,r);return I.isErr()?{error:{type:"SaveFailed",content:void 0}}:(UF(j,!0),pc(j,I.value,"INLINE",{skipItemUsage:!r}),{})}async function xJA(){B6();let A=[],[j,e]=await Promise.all([await DF(),Wo()]);for(let r of j){if(!r.canCreateVendorCard)continue;let a=e.find(n=>n.uuid===r.accountUuid);a&&A.push(a)}if(A.length===0)return{type:"Error"};A.sort(boA);let t=q.generateUUID();return{type:"Success",data:{accounts:A.map(r=>({uuid:r.uuid,name:r.name,icon:{id:r.uuid,sources:[{type:"RichIcon",content:{url:r.avatar,masked:!0}}],shape:Kl.RoundedRect}})),idempotentKey:t}}}async function fJA(A,{tab:j}){B6();let{accountUuid:e}=A.data,t=(await DF()).find(i=>i.accountUuid===e);if(!t)return console.warn(`Unable to create Brex card as credentials are missing from system vault for account uuid <${e}>`),{type:"Error",data:{type:"UnableToGetToken",data:void 0}};if(!t.canCreateVendorCard)return{type:"Error",data:{type:"IntegrationDisabled",data:void 0}};if(_.allAccountHandlersAreLocked)return{type:"Error",data:{type:"AppLocked",data:void 0}};if(!A.data.title||!A.data.title.length)return{type:"Error",data:{type:"Validation",data:"TitleRequired"}};if(!A.data.spendLimit)return{type:"Error",data:{type:"Validation",data:"SpendLimitRequired"}};if(!A.data.spendLimitDuration)return{type:"Error",data:{type:"Validation",data:"SpendLimitDurationRequired"}};if(!A.data.lockCardType)return{type:"Error",data:{type:"Validation",data:"LockAfterRequired"}};if(!A.data.reasonForCard||!A.data.reasonForCard.length)return{type:"Error",data:{type:"Validation",data:"ReasonForCardRequired"}};let{authorized:r}=await uv(j,0);if(!r)return{type:"Error",data:{type:"DidNotAcceptFill",data:void 0}};let a=new Date;A.data.lockCardType.type==="seven-days"?a.setDate(a.getDate()+7):A.data.lockCardType.type==="one-month"?a.setMonth(a.getMonth()+1):A.data.lockCardType.type==="one-year"?a.setFullYear(a.getFullYear()+1):A.data.lockCardType.type;let n=await ld(t.accountUuid,t.accountId,"brex");if(!n)return console.warn("Failed to get token when generating a Brex card"),{type:"Error",data:{type:"UnableToGetToken",data:void 0}};let o=await TTA(Mm(n.context.clientId).type,n.accessToken,t.accountId,A.data.title,A.data.spendLimit,A.data.spendLimitDuration,A.data.reasonForCard,A.data.idempotentKey,A.data.lockCardType.type==="none"?void 0:a.toISOString().split("T")[0]);if(o.isOk()){let i=await J5(t.accountUuid,o.value.cardId);if(!i)return console.error("Unable to find created card"),{type:"Error",data:{type:"UnableToCreateCard",data:void 0}};await pc(j,i,"INLINE",{skipItemUsage:!0})}else if(o.isErr())return console.error(o),{type:"Error",data:{type:"UnableToCreateCard",data:void 0}};return{type:"Success",data:void 0}}async function GJA(){return gnA()}async function FJA(){if(ie.getDesktopAppState().type==="Connected")return eE();if(ut()){let A=await Km();if(A.isOk()&&A.value.accountsState.type==="allAccountsUnlockable"&&A.value.biometryType!==Us.None)return B6(),Ov(!0).then(()=>{});ub()}return t2()?(I9A(),Dg()):console.error("Unable to request unlock from Desktop app or popup")}function bJA(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");WTA(e.id,e.unparsedUrl),p5A(e),sMA(e),wKA(e),AJA(e.id),FoA(e)}async function yJA(A,j){if(!j.tab.id)throw new Error("InvalidTab");return tA.clearFillSession(j.tab.id)}async function $JA(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");return FoA(e)}async function wJA(){let A=[];for(let j of await Wo()){if(j.locked)continue;let e=await BS(j.uuid),t=[];for(let{accountId:r}of e)t.push({id:r});t.length&&A.push({...j,fastmailAccounts:t})}if(A.length===0)return{type:"Error",data:"UnknownError"};if(A.length>1||A[0].fastmailAccounts.length>1){let j=[],e={};for(let[t,r]of A.entries()){let a=!1;for(let n of r.fastmailAccounts)try{if(n.id in e)n.name=e[n.id];else{let o=await ld(r.uuid,n.id,"fastmail");if(!o)throw new Error("Could not obtain access token.");let i=await tA.getEmailAliasAccountName(o.accessToken,n.id);n.name=i,e[n.id]=i}a=!0}catch{console.error(`Unable to obtain alias account name (accountId: ${n.id})`),R5(r.uuid,n.id,"fastmail")}a||j.push(t)}for(let t of j)A.splice(t,1);if(A.length===0)return{type:"Error",data:"UnknownError"}}return{type:"Success",data:{accounts:A.sort(boA).map(j=>({uuid:j.uuid,name:j.name,icon:{id:"",sources:[{type:"RichIcon",content:{url:j.avatar,masked:!0}}],shape:Kl.RoundedRect},emailAliasAccounts:j.fastmailAccounts}))}}}async function IJA(A,{tab:j}){let{accountUuid:e,emailAliasAccountId:t}=A.data;try{await zm(j.id,j.unparsedUrl,async r=>tA.endEmailAliasSession(j.id,r),async()=>tA.endEmailAliasSession(j.id))}catch{}try{return await tA.startEmailAliasSession(j,e,t),{type:"Success",data:void 0}}catch{return{type:"Error",data:"Error occurred starting session."}}}function e6e(A){let j=nA("An error has occurred while generating the Masked Email.");switch(A.type){case"AliasError":switch(A.content){case kx.UnverifiedUser:return nA("Your account is unverified. Sign in to Fastmail to verify the selected account.");case kx.RateLimit:return nA("You've reached the daily limit for Masked Email creation for the selected account.");case kx.OverQuota:return nA("You've reached the maximum Masked Email creation quota for the selected account.");default:return j}case"InvalidSession":case"NakedDomainFailed":default:return j}}async function DJA(A,{tab:j}){try{let e=await zm(j.id,j.unparsedUrl,async t=>tA.generateEmailAlias(j,t));return e.type==="Success"?{type:"Success",data:e.data}:{type:"Error",data:e6e(e.data)}}catch{return{type:"Error",data:nA("An error has occurred while generating the Masked Email.")}}}async function OJA(A,{tab:j}){try{await zm(j.id,j.unparsedUrl,async e=>tA.endEmailAliasSession(j.id,e),async()=>tA.endEmailAliasSession(j.id))}catch{console.error("Could not clean up alias session when cancelled.")}}async function PJA(A,{tab:j}){let e=nA("An error occurred while enabling and filling the Masked Email."),t=A.data;if(t){try{if((await zm(j.id,j.unparsedUrl,async n=>tA.enableEmailAliasSession(j,n))).type==="Failure")return{type:"Error",data:e}}catch{return{type:"Error",data:e}}BD(j,t)}else return{type:"Error",data:e};return{type:"Success",data:await BD(j,t)}}function CJA(){if(!ut())return;let A=console.info.bind(console);console.info=(...n)=>{t({message:yoA(n),level:vE.Info}),A(...n)};let j=console.warn.bind(console);console.warn=(...n)=>{t({message:yoA(n),level:vE.Warn}),j(...n)};let e=console.error.bind(console);console.error=(...n)=>{t({message:yoA(n),level:vE.Error}),e(...n)},nr.subscribe("error",r).subscribe("unhandledrejection",a);function t(n){bNA(n).then(o=>{o.isErr()&&e("Failed to send log to native process")})}function r(n){let o=`Uncaught exception: ${n.message} 		  (${n.filename}:${n.lineno}:${n.colno}).`;t({message:o,level:vE.Exception})}function a(n){let o=`Unhandled Promise Rejection: ${n.reason}`;t({message:o,level:vE.Exception})}}function yoA(A){return A.reduce(function(j,e,t){return t>0?j+" "+e.toString():e.toString()},"")}var HJA=()=>{X("settings-account-sign-out",S_A),X("can-user-delete-account",M_A),X("delete-account-permanently",__A,!0),X("get-account-list",YM,!0),X("get-accounts-and-vaults-configuration",C3A,!0),X("open-account-profile-page",z_A),X("open-account-in-opb",R_A),X("open-default-account-profile-page",J_A),X("update-account-exclusion",H_A),X("verify-account-password",X_A,!0),X("validate-account-password",s3A),X("handle-is-active-account-guest",d3A),X("handle-is-active-account-business",k3A),X("get-user-name-for-account",o3A),X("redeem-free-family",kTA)};var TJA=()=>{X("get-activation-hub-tasks",S3A),X("complete-activation-hub-task",M3A),X("open-tutorial-in-new-tab",_3A),X("get-activation-hub-tooltip-status",W9A),X("set-activation-hub-tooltip-status",Y9A),X("complete-tutorial-activation-hub-task",NSA)};function a6e(A){try{return A?.useChrome||browser?.runtime===void 0?async j=>KJA(j):async j=>browser.runtime.sendMessage(j)}catch{return async e=>KJA(e)}}async function SJA(A,j){let t=await a6e(j)(A).catch(r=>{let a=r instanceof Error?r.message:String(r);if(a.includes("Receiving end does not exist"))`${A.name}`;else if(a.includes("The message port closed"))`${A.name}`;else if(!a)`${A.name}`;else throw new Error(`Unhandled error response received for message <${A.name}>`)});if(ysA(t))switch(t.type){case"Success":return t.data;case"Error":throw new Error(t.message??`Error response received for message <${A.name}>`)}if(t)throw new Error(`Unknown response type received for message <${A.name}>`);return t}async function KJA(A){return new Promise((j,e)=>{chrome.runtime.sendMessage(A,t=>{if(t?.type==="Success")j(t);else{let r=chrome.runtime.lastError;e(new Error(r?.message))}})})}var $8=W(SO()),n6e="background/offscreen.html",o6e="ignored",i6e=new Cg,MJA=async(A,j,e)=>i6e.push(async()=>{await s6e(j);let t=await SJA({name:A,data:e});return await l6e(),t}),_JA=async()=>{if(!na())return!1;let A=await bp(),j=(0,$8.coerce)(A.version),e=(0,$8.coerce)("109.0.0");return!j||!e?!1:(0,$8.gte)(j,e)},s6e=async A=>chrome.offscreen.createDocument({url:n6e,reasons:A,justification:o6e}),l6e=async()=>chrome.offscreen.closeDocument();var n_="migrateStorageTimestamp",d6e="\u{1F5C4} window.localStorage migration";var LJA="No entries found in window.localStorage to migrate.",k6e="Using the app page to migrate window.localStorage",u6e="Using offscreen documents to migrate window.localStorage",Rv=new ht(d6e),NJA=async()=>{let{migrateStorageTimestamp:A}=await browser.storage.local.get(n_);if(typeof A=="string"){Rv.info(`Migrated on: ${A}`);return}await _JA()?(Rv.info(u6e),MJA("GetStorageEntries",[chrome.offscreen.Reason.LOCAL_STORAGE]).then(async j=>$oA(j))):(Rv.info(k6e),MnA())};async function zJA(A){let[j,e,t,r]=await Promise.all([YA().language,ie.getDesktopAppState(),XF(),Xo()]),a=await Wo();return eb(A.data),{accounts:a,brainVersion:"096f51fd3813",desktopAppState:e,locale:j,version:t,buildNumber:r}}async function RJA(A){_nA(),await $oA(A.data)}async function $oA(A){let j=new Map(A);if(j?.size>0){for(let[e,t]of j)await browser.storage.local.set({[e]:t}),Rv.info(`Migrated storage entry: ${e}`);await browser.storage.local.set({[n_]:new Date().toString()}),Rv.info(`Migrated ${j.size} entries.`),browser.runtime.reload()}else vj.setItem(n_,new Date().toString()),Rv.info(LJA)}var JJA=()=>{X("app-ready",zJA)};var UJA=()=>{X("get-xam-app-launcher-account-list",p9A,!0),X("get-app-catalog-url-for-account",m9A,!0)};var woA=W(Ik());var XJA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");return yl.with(async t=>{let r=t.get(e.id);if(!r||!r.notificationState)throw console.error("[Autosave] Session no longer exists for tab."),new Error("expiredSession");return B6e(e,r)})},VJA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");return yl.with(async t=>{let r=t.get(e.id);if(!r||!r.notificationState)throw console.error("[Autosave] Session no longer exists for tab."),new Error("expiredSession");try{let a=await q6e(e,r,A.data);return r.notificationState=void 0,fi(e)?QJA():await AS(a)}catch(a){let n=_.findAccountHandlerByUuid(A.data.type==="new"?A.data.data.vaultSelector.accountUuid:Mk(A.data.data.id).accountUuid);throw lj(new Pe({errorClass:E`handleAutosaveNotification`,message:E`Autosave failed to save item.`,stackOverrideError:a instanceof Error?a:void 0,userUuid:n?.user?.uuid?Z(n?.user?.uuid):void 0})),new Error("save")}})},WJA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");return yl.with(async t=>{let r=t.get(e.id);if(!r||!r.notificationState)throw console.error("[Autosave] Session no longer exists for tab."),new Error("expiredSession");return m6e(e,r,A.data)})},YJA=async(A,j)=>{let e=j.tab.id;if(!e){console.error("[Autosave] Could not dismiss non-existent tab.");return}return yl.with(async t=>{let r=t.get(e);if(!r)return console.error("[Autosave] Could not dismiss because session no longer exists for tab."),Promise.resolve();r.notificationState=void 0})},m6e=async(A,j,e)=>{let t=async n=>{try{let o;if(n)o=(await Ij.loadItemCache())?.itemWithUUID(n)?.overview.b5AccountUUID;else{let[i]=_.defaultSavingLocation();o=i.uuid}o&&Bc(o,LA.UsoTelemetryActions.AutoSaveEditItem)}catch{}},r;if(e){let{itemUuid:n}=Mk(e);t(n),r={name:"update-item",data:{itemUuid:n}}}else t(void 0),r={name:"new-item"};let{templateUuid:a}=bl[j.saveType];on(A,a,{name:"save-object",data:await IoA(j)},r),iv(A.id)},QJA=()=>({icon:{id:"autosave-tutorial-icon",sources:[{type:"DefaultIcon",content:{file:rr.TutorialGlobe}}]},title:nA("Any Website"),subtitle:"user.name@example.com"}),E6e=async(A,j,e)=>{if(fi(A))return QJA();switch(j){case"login":{let{showRichIcons:t}=YA(),r=jp(e,Nj.Username)??"\u2014",[a,n]=await Promise.all([tA.getRichIconForUrl(e.urls[0],e.title??"",t),tA.inferBestTitle(e.title??"",e.urls[0])]);return{icon:a,title:n??nA("Login"),subtitle:r}}case"creditCard":{let t=jp(e,Nj.CcNumber)??"\u2014";return{icon:{id:"",sources:[{type:"DefaultIcon",content:{file:await Y5(t,bl[j].templateUuid),masked:!1,description:void 0}}],shape:Kl.RoundedRect},title:e.title??nA("Credit Card"),subtitle:await tA.concealCreditCardNumber(t)}}case"identity":{let t=jp(e,Nj.GivenName)??"",r=jp(e,Nj.FamilyName)??"",a=`${t} ${r}`.trim()||"\u2014";return{icon:{id:"",sources:[{type:"DefaultIcon",content:{file:await Y5(a,bl[j].templateUuid),masked:!1,description:void 0}}],shape:Kl.RoundedRect},title:e.title??nA("Identity"),subtitle:a}}default:ue(j)}},B6e=async(A,j)=>{let{templateUuid:e}=bl[j.saveType],t=await IoA(j),r;try{r=await tA.getEmailAliasSessionStatus(A.id)}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`sendVaultItemUpdate`,message:E`Failed to load masked email session for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}let{defaultSuggestedVaultId:a,vaultListElements:n}=await Bg(r,{includeDontSaveOption:!1}),o=[];try{o=await h6e(A,e,t,r)}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`AutosaveGetConfiguration`,message:E`Failed to load updatable items for session.`,stackOverrideError:s instanceof Error?s:void 0}))}let i;try{sD()&&(i=await g6e(await iD(e,t)))}catch(s){We(s)?lj(s):lj(new q.LoggableError({errorClass:E`AutosaveGetConfiguration`,message:E`Failed to check if saveObject is duplicate.`,stackOverrideError:s instanceof Error?s:void 0}))}return{preview:await E6e(A,j.saveType,t),saveType:j.saveType,vaultListElements:n,defaultSuggestedVaultId:a,updatableItemListElements:o,duplicateItemPreview:i}},g6e=async A=>{if(!A)return;let{showRichIcons:j}=YA();return{title:A.title,subtitle:A.subtitle,icon:await xo(A,60,j)}},h6e=async(A,j,e,t)=>{let r=await tA.nakedDomainForUrls(e.urls).then(l=>l.map(([,d])=>d)),a=await Lk(t),n=await hD(j,r,t),o=n.length>0?await tA.autoSaveMatchingItems(n,e,j):[],i=n.filter(l=>o.includes(l.uuid)),s=i.length>0?i[0]:void 0;return Bv(a,n,s?.localId)},q6e=async(A,j,e)=>{let{templateUuid:t}=bl[j.saveType],r;try{r=await iS(A,t)}catch(i){lj(new Pe({errorClass:E`saveItemFromSession`,message:E`Autosave failed to check for masked email data`,stackOverrideError:i instanceof Error?i:void 0}))}let a=await Ts(t),n=await IoA(j);if(!a)throw new Pe({errorClass:E`saveItemFromSession`,message:oj.assertLogSafe(`Autosave failed to load item template ${t}`)});let o=await v6e(a,n,r,e);return fi(A)?(qS(A,o),o):x6e(A,j,o,e)},IoA=async A=>{let{templateUuid:j}=bl[A.saveType];return A.notificationState?A.notificationState.saveObject:tA.createSaveObject(j,A.collectedPageDetails)},v6e=async(A,j,e,t)=>{let r=async a=>tA.mergeSaveObjectWithItem(A,a,j,e);switch(t.type){case"new":{let a=t.data.vaultSelector,n=sg(a.accountUuid,a.vaultUuid,await r(void 0));if(n.isErr())throw Error("unknown");return n.value}case"update":{let{itemUuid:a}=Mk(t.data.id),n=await Rr(a);if(!n)throw new Error("missingItem");return OF(n,await r(n))}default:ue(t)}},x6e=async(A,j,e,t)=>{try{await hS(A,e)}catch{}let r=await $a(e,!1);try{if(r.templateUuid&&r.overview.b5AccountUUID)switch(t.type){case"new":Bc(r.overview.b5AccountUUID,f6e(j,r.templateUuid)),St("ItemCreate",{template_uuid:woA.TelemetryString.assertSafeForTelemetry(r.templateUuid),status:"SUCCESS",create_method:"AUTOSAVE"},r.overview.b5AccountUUID);break;case"update":Bc(r.overview.b5AccountUUID,G6e(j,r.templateUuid)),St("ItemUpdate",{template_uuid:woA.TelemetryString.assertSafeForTelemetry(r.templateUuid),status:"SUCCESS",update_method:"AUTOSAVE"},r.overview.b5AccountUUID);break;default:ue(t)}}catch{}return r};function f6e(A,j){switch(j){case Je:return A.generatePasswordDetails?LA.UsoTelemetryActions.AutoSaveSaveItemSpg:LA.UsoTelemetryActions.AutoSaveSaveItem;case Ur:return LA.UsoTelemetryActions.AutoSaveSaveItemCreditCard;case q6:return LA.UsoTelemetryActions.AutoSaveSaveItemIdentity;default:return LA.UsoTelemetryActions.AutoSaveSaveItem}}function G6e(A,j){switch(j){case Je:return A.generatePasswordDetails?LA.UsoTelemetryActions.AutoSaveUpdateItemSpg:LA.UsoTelemetryActions.AutoSaveUpdateItem;case Ur:return LA.UsoTelemetryActions.AutoSaveUpdateItemCreditCard;case q6:return LA.UsoTelemetryActions.AutoSaveUpdateItemIdentity;default:return LA.UsoTelemetryActions.AutoSaveUpdateItem}}var ZJA=W(Ik());var AUA="AUTOSAVE_2FA_INTERACTION",jUA=async A=>{let j=await Lk(void 0),e=await hD(Je,[A.nakedDomain()],void 0);return{accounts:j,updateableItems:e}};async function eUA(A,j){let e=Ft(j.tab);if(!e){console.error("Couldn't not create tabInfo for tab");return}let t=await Lm(e.id);if(!nn("autosaveTotp")&&t.length>0)return;let r=await wD();if(r.isOk()){if(!_.allAccountHandlersAreLocked&&(await jUA(e)).updateableItems.length===0)return;await ta(e.id,{type:"autosaveTotp",params:{secret:r.value}})}}var tUA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");let{accounts:t,updateableItems:r}=await jUA(e);return{updatableItemListElements:await Bv(t,r,void 0),firstRun:vj.getItem(AUA)!=="true"}},rUA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");let t=A.data.secret,{itemUuid:r}=Mk(A.data.id),a=await y6e(r,t,A.data.overwrite);if(!a)return{type:"overwrite"};vj.setItem(AUA,"true");try{b6e(e,t)}catch{console.error("Failed to fill one-time password into the page.")}return{type:"success",data:await AS(a)}};async function b6e(A,j){let e=await tA.generateOneTimePasswordFromUrl(j),t=await Yr(A);RF(A,t,{fillTargets:[{type:"Url",data:A.unparsedUrl}],fields:[{designation:Nj.OneTimeCode,fieldTypes:[Xg.Text,Xg.Password],value:e,label:"",htmlId:"",htmlName:"",checked:!1,restricted:!0}]},!1)}async function y6e(A,j,e){let t=await Rr(A);if(!t)throw new Error("missingItem");t.details.sections||(t.details.sections=[]);let r;for(let n of t.details.sections)if(n.fields){for(let o of n.fields)if(fA.VaultItem.isTotpField(o)){r=o;break}}if(r)if(e)r.v=j;else return;else t.details.sections.push({title:"",fields:[{k:"concealed",n:"TOTP_"+q.generateUUID(),v:j,t:nA("one-time password")}],name:"Section_"+q.generateUUID()});let a=await $a(t);try{a.templateUuid&&a.overview.b5AccountUUID&&(Bc(a.overview.b5AccountUUID,LA.UsoTelemetryActions.AutoSaveUpdateItem2fa),St("ItemUpdate",{template_uuid:ZJA.TelemetryString.assertSafeForTelemetry(a.templateUuid),status:"SUCCESS",update_method:"AUTOSAVE",one_time_password_added:!0},a.overview.b5AccountUUID))}catch{}return a}var aUA=()=>{X("autosave-capture",yKA),X("autosave-submission",$KA),X("autosave-configuration",XJA),X("autosave-save",VJA),X("autosave-edit",WJA),X("autosave-dismiss",YJA),X("autosave-qr-code-detected",eUA),X("autosave-2fa-configuration",tUA),X("autosave-2fa-save",rUA)};var nUA=async(A,j)=>{let{opid:e}=A.data,t=Ft(j.tab);return t?tA.autosubmitDetectElements({opid:e,pageDetails:await Yr(t)}):[]};var oUA=()=>{X("autosubmit-detect-elements",nUA)};function iUA(){return{buildNumber:Xo(),setOldAttribute:!bi.hasInsiderAccount()}}async function sUA(){let A=await NO(),j=!It()&&!ri();return{isPinned:A||j}}var lUA=()=>{X("get-build-number",iUA),X("b5Ready",CRA)};var cUA=()=>{X("get-initial-benchmark-data",TNA),X("run-benchmark",KNA),X("export-benchmark",SNA)};var dUA=()=>{X("get-biometry-config",Fi.getBiometryConfig),X("set-biometry-config",Fi.setBiometryConfig)};var kUA=W(Dn()),w6e=7*24*60*60*1e3,uUA="outdated-browser-notice-is-dismissed",pUA=()=>{let A=Yn.decode(vj.getItem(uUA));if((0,kUA.isLeft)(A))return!1;let j=A.right.getTime();return new Date().getTime()-j<w6e},mUA=()=>vj.setItem(uUA,new Date().toISOString());var EUA=()=>{X("get-outdated-browser-notice-is-dismissed",pUA),X("set-outdated-browser-notice-is-dismissed",mUA),X("checkExtensionPinStatus",sUA)};var BUA=()=>{X("trigger-update-connectivity-status",()=>{qt&&qt.updateConnectivityStatusHandler()}),X("attempt-reconnect",Fo)};var gUA=()=>{X("reset-database",L_A)};var hUA=()=>{X("get-trusted-device-enrollments",w3A),X("start-trusted-device-enrollment",I3A),X("cancel-trusted-device-enrollment",D3A),X("get-active-device-enrollment",O3A),X("set-active-device-enrollment",P3A)};var qUA=()=>{X("ignore-device-trust-warning",C2A),X("recheck-device",T2A),X("force-device-trust-success",H2A),X("enroll-device",K2A),X("kolide-finished-rechecking",S2A),X("kolide-device-snoozed",M2A),X("kolide-device-sign-in-success",_2A),X("kolide-user-started-download",L2A),X("kolide-device-registered",N2A),X("autofill-device-recheck",z2A),X("autofill-clear-snoozes",R2A)};var vUA=()=>{X("get-user-devices",N3A)};var xUA=async()=>{if(!W7())return console.warn("Diagnostics logging is not enabled."),!1;let A;try{A=await cd.getConsoleLogs()}catch{A=[]}try{let j=ONA(),e={created_at:Date.now()/1e3,uuid:QB(),system:await DNA(),accounts:j,logs:w2(A),crash_report_entries:[]};yb(PNA(),e);for(let t of j)St("ExportDiagnosticsReport",{report_source:"B5X",export_status:"SUCCESSFUL",browser_console_logs_included:A.length},t.uuid);return!0}catch(j){return We(j)?(console.error("Error generating diagnostics report:",j),lj(j)):(console.error("Unable to generate diagnostics report"),lj(new Pe({errorClass:E`DiagnosticError`,message:E`Unable to generate diagnostics report`,severityLevel:"error",stackOverrideError:j}))),!1}};var fUA=()=>{X("generate-diagnostic",xUA)};async function GUA(A){return await tA.editItemFilter(A.data)}function FUA(A){}var bUA=()=>{X("edit-item-filter",GUA),X("edit-item-update",FUA)};async function yUA(A){let{accountUrl:j,accountUuid:e}=A.data,t=_.getAccountHandlers.find(n=>n.uuid===e),r=I6e(j);if(!t?.client?.CTX)return console.warn(`No client context for account ${A.data.accountUuid}, unable to get exchangable session token`),{tokenUrl:r,token:void 0};if(!t.hasBackOfficeFeature?.b2bXamTrelica)return console.warn(`Account ${t.uuid} does not have the required features for this operation`),{tokenUrl:r,token:void 0};let{token:a}=await cA.getCentralAccountHubToken(t.client.CTX.session).catch(n=>(console.error(`Error getting token for ${t.uuid}: ${n}`),{tokenUrl:r,token:void 0}));return{tokenUrl:r,token:a}}function I6e(A){let j,e=tA.nakedDomainForUrl(A);if(e==="b5local.com")return"https://localhost:3030";switch(e){case"b5dev.com":case"b5dev.eu":case"b5dev.ca":j="dev";break;case"1password.ca":case"1password.com":case"b5staging.com":j="app";break;case"1password.eu":j="eu";break;case"b5test.ca":case"b5test.eu":case"b5test.com":j="qa";break;default:j="app";break}return`https://${j}.trelica.com`}var $UA=()=>{X("open-trelica-catalog",yUA)};function wUA(A){return hj.hasPreRegistrationFlag(A.data)}function IUA(A){return hj.anyAccountHasFlag(A.data)}var DUA=()=>{X("has-pre-registration-flag",wUA),X("any-account-has-flag",IUA)};var OUA=()=>{X("page-ready",bJA),X("frame-manager-heartbeat",tJA),X("analyze-frame",rJA),X("resolve-pending-fill",$JA),X("clear-fill-session",yJA)};var D6e=(A,j)=>{let e=j?.find(t=>t.account.uuid===A);if(e)return{configuredAppsCount:e.deviceTrustUrlPatterns?.length||0}},PUA=async A=>{let j=_.getAccountHandlers.filter(h=>h.serveraccount.type==="B"),e=[],t=await _A.getDatabase().getAllDeviceTrustConfigs();for(let h of j){let O=h.serveraccount.name,V=h.accountIdentifier.accountUUID,Y=h.serveraccount.type,rA=h.isLocked,yA=Array.from(hj.getAllFlagsForAccount(V)).map(ae=>({flagName:ae.name,isEnabled:ae.enabled})),VA=h.serveraccount?.tier?.features?Array.from(h.serveraccount.tier.features).map(ae=>({flagName:ae,isEnabled:!0})):[],dj=[];!h.isLocked&&h.hasBackOfficeFeature?.b2bXamDeviceTrustEpmIntegration&&dj.push({flagName:"b2bXamDeviceTrustEpmIntegration",isEnabled:!0});let bA=!1,Mj=!1;for(let ae of t)ae.account.uuid===V&&(bA=!0,Mj=ae.enabled);let mj={userHasConfig:bA,isEnabled:Mj};e.push({accountName:O,accountUuid:V,accountTypeCode:Y,accountIsLocked:rA,enabledClientFeatures:yA,enabledServerAccountFeatures:VA,enabledBackOfficeAccountFeatures:dj,deviceTrustConfig:mj})}let r=await Fg(_.getAccountHandlers,hj,_A),a=r.problems.every(h=>h.type!=="browser"),n=r.problems.every(h=>h.type!=="client"),o=r.problems.every(h=>h.type!=="account"),i=r.problems.every(h=>h.type!=="account"),s=r.problems.every(h=>h.type!=="user"),l=await la(),d=r.problems.every(h=>h.type!=="account"),k=a&&n&&d?"starting":"disabled",u=l?.state.clientState?l.state.clientState:k,m={isRegistered:l?.state.isRegistered??!1,health:l?.state.health,localConnectionState:u},I={lastKnownServerVersion:void 0,configuredAppsCount:0,lastSyncTimestamp:void 0},f=(j.find(h=>!h.isLocked&&(h.serveraccount?.tier?.features?.includes("b2bXamDeviceTrustEpmIntegration")||h.hasBackOfficeFeature?.b2bXamDeviceTrustEpmIntegration))||j.find(h=>!h.isLocked)||j[0])?.uuid;if(f){let h=await _A.getDatabase().findAccountByUUID(f),O=0;l&&(O=D6e(f,l.accountData)?.configuredAppsCount??0),I={lastKnownServerVersion:h?.kolideAppsVersion??void 0,configuredAppsCount:O,lastSyncTimestamp:h?.updatedAt?new Date(h.updatedAt).getTime():void 0}}let v={browserSupported:a,clientFeatureEnabled:n,serverAccountFeatureEnabled:o,backOfficeAccountFeatureEnabled:i,accountHasDeviceTrustConfig:s,userFeatureEnabled:s,kolideAgentComms:m,appListSync:I},P=Kt()?"Locked":"Unlocked",D;try{D=ie.getDesktopAppState()}catch(h){console.warn("HealthStatus: Failed to get DesktopAppState from dcmh:",h)}let C={lockState:P,desktopAppState:D,buildNumber:Xo(),buildChannel:Sv()},b={accounts:e,deviceTrust:v,general:C};return b},CUA=async A=>{if(!_.getAccountHandlers.some(r=>r.serveraccount.type==="B"))return{shouldShowHealthCheck:!1};let j=tp(),e=Xt.initState,t;return e==="initialized"?t=await Xt.invoke("HealthCheck",void 0).catch(r=>{}):t=void 0,{shouldShowHealthCheck:!0,xamBackendInitState:e,healthCheck:t,enabledContext:j}};var HUA=()=>{X("get-system-health",PUA),X("get-app-launcher-health",CUA)};var TUA=()=>{X("heartbeat",t3A)};var KUA=()=>{X("get-contextual-import-dismiss",C9A),X("set-contextual-import-dismiss",H9A),X("get-import-nudge-dismiss",T9A),X("set-import-nudge-dismiss",K9A)};var MUA=()=>{X("set-fullscreen-notification",SUA),X("set-page-inert",SUA)},SUA=async(A,j)=>{if(!j.tab.id){console.error("Unable to relay message due to missing tab ID");return}return Rj(A.name,A.data,{tabId:j.tab.id})};var _UA=()=>{X("show-virtual-card-dialog",v3A)};var LUA=()=>{X("get-privacy-api-key",O_A),X("set-privacy-api-key",P_A)};var NUA=()=>{X("invite-users-via-email",z3A)};var zUA=(A={})=>({id:A.id??{type:"databaseId",data:0},uuid:Ja(Ra.uuid,A.uuid,""),vaultUuid:Ja(Ra.uuid,A.vaultUuid,""),accountUuid:Ja(Ra.uuid,A.accountUuid,""),trashed:Ja(Ra.boolean,A.trashed,!1),title:Ja(Ra.string,A.title,""),templateUuid:Ja(Ra.string,A.templateUuid,"001"),secondary:Ja(Ra.string,A.secondary,""),formattedSecondary:Ja(Ra.string,A.formattedSecondary,""),favorite:Ja(Ra.boolean,A.favorite,!1),urls:Ja(Ra.array,A.urls,[]),urlToNakedDomains:Ja(O6e,A.urlToNakedDomains,{}),coreIcon:A.coreIcon,tags:Ja(Ra.array,A.tags,[]),suggested:Ja(Ra.boolean,A.suggested,!1),performActionOnClick:Ja(Ra.boolean,A.performActionOnClick,!1),action:Ja(P6e,A.action,null),version:Ja(Ra.number,A.version,0),hasCustomIcon:Ja(Ra.boolean,A.hasCustomIcon,!1),isManagedApplication:Ja(Ra.boolean,A.isManagedApplication,!1)});function O6e(A){return!!A&&Object.entries(A).every(([j,e])=>typeof j=="string"&&typeof e=="string")}function P6e(A){return A?[R6.Autofill,R6.Go,R6.OpenURL,R6.Download,R6.CreatePrivacyCard,R6.CreateBrexVendorCard,R6.CatalogAppLaunch].includes(A):!1}var RUA=async({data:A})=>(B6(),await Promise.all([C6e(A.options),H6e(A.options?.accountUuid).catch(()=>(console.error("Unexpected error while loading catalog apps as item list entries."),[]))]).then(async([j,e])=>Promise.all([...j,...e]))),C6e=async(A={})=>{let j=await Ij.loadItemCache();if(!j)return[];let e=await Gt(),t,r=!1;r=e?.isHttpOrHttps()??!1,r&&(t=e?.nakedDomain());let a=[],{suggestions:n,favorites:o,templateUuids:i,accountUuid:s,vaultUuid:l,searchEverywhere:d}=A,k=Boolean,u=s&&j.accountWithUUID(s);if(!d&&(k=se.userSelected(hr(),void 0,void 0,j),u)){let f=l?j.vaultWithUUID(l,u.uuid):void 0;k=se.userSelected(hr(),f,u,j)}if(n)if(e){let P=((await j8(e))?.suggestions??[]).filter(D=>D.type==="SuggestedCategory").map(D=>D.data.type);a=j.itemsForTab(e,D=>k(D)&&!!D.templateUuid&&P.includes(D.templateUuid),a6.suggestedSort(e))}else a=[];else if(o)a=j.activeItems(f=>k(f)&&se.favorited(f));else if(i){let f=se.templates(i);a=j.activeItems(v=>k(v)&&f(v))}else a=j.activeItems(k);let{showRichIcons:m}=YA(),S=(await _.getFrozenAccountsInfo()).frozenAccounts;return a.map(async f=>{let v=f.templateUuid?j.templateWithUUID(f.templateUuid):void 0,P=f.overview.b5AccountUUID?S.includes(f.overview.b5AccountUUID):!1;return oSA(f,t,P,{hasHiddenTemplate:!v,showRichIcons:m})})};async function H6e(A){let j=hr(),e=mg().filter(o=>hj.accountHasFlag(o.uuid,"b5x-popup-catalog-apps")).filter(o=>!j.isExcluded(o.uuid));if(e.length===0)return[];let t=await vD(e),r=A?t.find(o=>o.uuid===A):t[0];if(!r)return[];let a=await Xt.invoke("AppCatalog",{sort:{primary:{sortKey:d1.Name}},accountAndUserUuid:{accountUuid:r.uuid,userUuid:r.userUuid}}).catch(o=>(console.error("Unable to fetch catalog apps as item list entries:",o),{type:"NoApps"}));if(a.type!=="Ok")return[];let{showRichIcons:n}=YA();return a.content.map(async o=>{let i=o.links.application||o.links.homePage||o.domains[0]||void 0,s=i?await tA.getRichIconForUrl(i,o.name,n):{id:"",sources:[{type:"MonogramIcon",content:{value:o.name.length>1?o.name.slice(0,2):o.name.charAt(0),color:tA.generateRichIconBackgroundColor(o.id)}}]},l={},d=[];for(let k of Object.values(o.links))typeof k=="string"&&(l[k]=tA.nakedDomainForUrl(k),d.push({url:k,mode:$d.Default}));return zUA({id:{type:"catalogApp",data:{id:o.id}},title:o.name,secondary:nA("Managed App"),coreIcon:s,urls:d,urlToNakedDomains:l,action:R6.CatalogAppLaunch})})}var JUA=async A=>{let j=await Ij.loadItemCache();if(!j)return;let e=j.itemWithUUID(A.data.itemUuid);if(!e||!e.localId)return;let t=YA(),{showRichIcons:r}=t,a=await xo(e,120,r);return{title:e.title,ainfo:e.overview.ainfo,icon:a.sources,localId:e.localId}};var UUA=()=>{X("get-item-list-entries",RUA,!0),X("get-core-item-details",R9A,!0),X("get-item-summary",JUA,!0),X("get-categories",A3A),X("create-new-item",u3A),X("autofill-item",Z9A),X("get-total-number-of-items",$3A),X("item-detail-value-drag-start",h3A),X("item-detail-value-drag-end",q3A),X("item-action",x3A),X("field-action",f3A),X("get-large-type-with-field-identifier",X9A,!0),X("get-large-type-with-client-formatted-string",U9A,!0),X("delete-password-history",B3A,!0),X("copy-to-clipboard",E3A,!0),X("refresh-totp",F3A,!0),X("scan-totp-qr-code",UMA),X("get-should-show-new-item-button",p3A),X("render-markdown",m3A),X("get-custom-icon-url",g3A),X("get-naked-domains-for-urls",J3A)};async function XUA(){let A=await la();if(!A)return{status:"not_supported"};let j=await A?.getDeviceHealth({});return j?j.type==="success"?{status:"success",data:j.data}:{status:"error"}:{status:"error"}}var VUA=()=>{X("get-device-health",XUA)};var WUA=()=>{X("can-request-unlock",GJA),X("get-extension-locked",Kt),X("request-managed-unlock",FJA),X("lock",e3A),X("unlock-with-biometrics",i3A),X("unlock-with-sso",l3A),X("unlock-with-passkey",c3A)};var YUA=A=>t2A(A.data);var QUA=()=>{X("set-extensions-as-disabled",YUA)};var ZUA=()=>{X("complete-duo-mfa-authentication",b3A),X("complete-mfa-via-b5-web",y3A)};var AXA=()=>{X("account-must-migrate-auth",T3A),X("any-account-must-migrate-auth",K3A)};var jXA=()=>{X("close-modal",tSA)};var eXA=()=>{X("get-desktop-app-status",H3A),X("open-native-app",ub)};var tXA=()=>{X("get-active-tab",z9A),X("open-help",r3A),X("open-extension-welcome-page",sE),X("browser-search-query",a3A),X("open-migration-enforcement",j3A),X("open-import-page",VnA),X("open-integrations-page",N_A),X("open-settings",KnA),X("open-tab",znA),X("open-url",n3A),X("open-popup",Dg),X("open-unlock-account-screen",WnA),X("open-support-link",TnA)};var rXA=async(A,j)=>{let e=j.tab.id;if(!e)throw new Error("Unable to retrieve notifications without a tab id");return ep(e)},aXA=async A=>aS(A.data.id),nXA=async(A,j)=>{let e=j.tab.id;if(!e)throw new Error("Unable to delete notifications without a tab id");return KF(A.data.type,e)},oXA=async(A,j)=>{let e=j.tab.id;if(!e)throw new Error("Unable to show notification without a tab id");return ta(e,{type:A.data.type,params:A.data.params})},iXA=async(A,j)=>({hasNotifications:!!(j.tab.id&&await lD(j.tab.id))});var sXA=()=>{X("notification-action",$SA),X("toast-action",G3A),X("hydrate-notifications",rXA),X("delete-notification",aXA),X("delete-notifications-by-type",nXA),X("show-notification",oXA),X("has-notifications",iXA)};function T6e(A){switch(A){case"Popup":return"Normal";case"Inline":return"Normal";case"SaveDialog_Ssh":return"SshKeygen";default:return console.error("Unsupported PasswordGeneratorMode"),"Normal"}}async function uXA(A){B6();let j=A.data;switch(j.type){case"initialization":return DoA(gXA(j.content));case"generate":{let e=s_(j.content.context),t=YA(),{currentPasswordAttrs:r}=i_(t,e.passwordType),a=S6e(j.content.values,e),{currentPasswordAttrs:n}=i_(a,e.passwordType);return e.mode==="SshKeygen"?r.passwordType!==n.passwordType?DoA(e):lXA(e):t.defaultPassGenType!==a.defaultPassGenType?K6e(e):r.passwordType!==n.passwordType||r.separatorType!==n.separatorType?DoA(e):lXA(e)}case"save":return OoA(j.content.context)}}async function pXA(A){B6();let j=s_(A.data.context),e=await Gt(),t={password:j.password,entropy:j.entropy,strengthPercent:j.strength_percent};try{if(!e)throw new Error("Unable to fill generated password: Failed to resolve information on active tab");await DD(t,e),await bb(e,!1,A.data.frameIdentifier,t)}catch(r){console.error("Unable to fill generated password");let a=await qt.connectivityStatus();throw a==="offlineAuthenticationFailed"?Fo():a==="networkOffline"?mXA():Kr({id:"fill-generated-password",message:nA("Unable to fill generated password"),behavior:fr.Ephemeral}),r}}var mXA=()=>{let[A]=_.defaultSavingLocation(),j=_.findAccountHandlerByUuid(A.uuid);as({id:"account-is-offline",title:nA("{accountName} is offline.",{accountName:j?.serveraccount?.name??"Account"}),text:nA("You won't be able to use a generated password until you are signed in and online."),primaryAction:{id:"ok",label:nA("OK"),destructive:!1,action:{type:"Ok",content:void 0}}})};async function EXA(A){B6();let j=s_(A.data.context),e=await Gt(),r=A.data.selectedText===void 0||A.data.selectedText===j.password?{password:j.password,entropy:j.entropy,strengthPercent:j.strength_percent}:{password:A.data.selectedText??"",entropy:0,strengthPercent:0};try{await DD(r,e)}catch(n){console.error("Unable to save generated password");let o=await qt.connectivityStatus();throw o==="offlineAuthenticationFailed"?Fo():o==="networkOffline"?mXA():Kr({id:"save-generated-password",message:nA("Unable to save generated password"),behavior:fr.Ephemeral}),n}let a=A.data.selectedText??j.password;try{await Nk(a,!0,A.data.initiator==="tab"?e:void 0),A.data.selectedText||Kr({id:"copy-generated-password",message:nA("Copied generated password"),behavior:fr.Ephemeral})}catch{Kr({id:"copy-generated-password",message:nA("Unable to copy generated password"),behavior:fr.Ephemeral})}}async function DoA(A){let j=YA(),e=await BXA(A.passwordType);return tA.passwordGeneratorViewModel({type:"ViewModel",content:{context:PoA(A),config:l_(j,A.passwordType),collected_page_details:e.collectedPageDetails,url:e.url}})}async function K6e(A){let j=YA();return tA.passwordGeneratorViewModel({type:"DefaultPasswordGeneratorChanged",content:{context:PoA(A),config:l_(j,A.passwordType)}})}async function lXA(A){let j=YA(),e=await BXA(A.passwordType);return tA.passwordGeneratorViewModel({type:"Preview",content:{context:PoA(A),config:l_(j,A.passwordType),collected_page_details:e.collectedPageDetails,url:e.url}})}async function OoA(A){let j=YA(),e=s_(A);return tA.passwordGeneratorViewModel({type:"Password",content:{context:A,config:l_(j,e.passwordType)}})}async function BXA(A){if(A!=="smart")return{};let j=await Gt();return{collectedPageDetails:j?await Yr(j):void 0,url:j?.unparsedUrl}}function gXA(A){let j;switch(A){case"Inline":j="characters";break;case"SaveDialog_Ssh":j="ed25519";break;case"Popup":default:j=YA().defaultPassGenType}let e=T6e(A);return{password:"",passwordType:j,entropy:0,strength_percent:0,mode:e}}function s_(A){try{return JSON.parse(atob(A))}catch{return gXA("Popup")}}function PoA(A){return btoa(JSON.stringify(A))}function S6e(A,j){let e=YA(),{currentPasswordAttrs:t}=i_(e,j.passwordType);for(let r of A)switch(r.type){case"boolean":r.content.elementId==="password-generator-toggle-numbers"?t.requireDigits=r.content.value:r.content.elementId==="password-generator-toggle-symbols"?t.requireSymbols=r.content.value:r.content.elementId==="password-generator-toggle-capitalize"?t.capitalize=r.content.value:r.content.elementId==="password-generator-toggle-full-words"?t.fullWords=r.content.value:r.content.elementId.startsWith("password-generator-toggle-default-suggestions")&&(r.content.value?e.defaultPassGenType=t.passwordType:e.defaultPassGenType="smart");break;case"number":(r.content.elementId==="password-generator-slider-size-random-password"||r.content.elementId==="password-generator-slider-size-memorable-password"||r.content.elementId==="password-generator-slider-size-pin-code"||r.content.elementId==="password-generator-slider-size-answer"||r.content.elementId==="ssh-keygen-rsa-bit-length")&&(t.length=r.content.value);break;case"menu":r.content.elementId==="password-generator-menu-separator"?t.separatorType=_6e(r.content.selectedEntryId):(r.content.elementId==="password-generator-menu-type"||r.content.elementId==="ssh-keygen-menu-type")&&(j.passwordType=kXA(r.content.selectedEntryId));break}return Kg(e),e}function cXA(A){switch(A){case"characters":return RO();case"pin":return JO();case"smart":return zO();case"words":return UO();case"rsa":return VO();case"ed25519":return XO();default:ue(A)}}function i_(A,j){let e=A.generator.find(r=>r.passwordType===A.defaultPassGenType)??cXA(A.defaultPassGenType);return{currentPasswordAttrs:A.generator.find(r=>r.passwordType===j)??cXA(j),defaultPasswordAttrs:e}}function o_(A,j){return A===j.passwordType?j.length:0}function l_(A,j){let{currentPasswordAttrs:e,defaultPasswordAttrs:t}=i_(A,j),r=e.separatorType;return{password_type:dXA(e.passwordType),size_security_question:0,size_ssh_rsa_key:o_("rsa",e),size_characters:o_("characters",e),size_words:o_("words",e),size_pin:o_("pin",e),separator_type:r?M6e(r):void 0,use_full_words:e.fullWords??!1,include_symbols:e.requireSymbols??!1,include_numbers:e.requireDigits??!1,include_capitalize:e.capitalize??!1,default_password_type_for_suggestions:dXA(t.passwordType)}}function dXA(A){switch(A){case"characters":return"password-generator-menu-entry-type-random-password";case"pin":return"password-generator-menu-entry-type-pin-code";case"smart":return"password-generator-menu-entry-type-password-rules";case"words":return"password-generator-menu-entry-type-memorable-password";case"ed25519":return"ssh-keygen-menu-entry-type-ed25519";case"rsa":return"ssh-keygen-menu-entry-type-rsa"}}function kXA(A){switch(A){case"password-generator-menu-entry-type-random-password":return"characters";case"password-generator-menu-entry-type-pin-code":return"pin";case"password-generator-menu-entry-type-password-rules":return"smart";case"password-generator-menu-entry-type-memorable-password":return"words";case"ssh-keygen-menu-entry-type-ed25519":return"ed25519";case"ssh-keygen-menu-entry-type-rsa":return"rsa";default:return"pin"}}function M6e(A){switch(A){case"commas":return"password-generator-menu-entry-separator-commas";case"digits":return"password-generator-menu-entry-separator-numbers";case"digits_and_symbols":return"password-generator-menu-entry-separator-numbers-and-symbols";case"hyphens":return"password-generator-menu-entry-separator-hyphens";case"periods":return"password-generator-menu-entry-separator-periods";case"spaces":return"password-generator-menu-entry-separator-spaces";case"underscores":return"password-generator-menu-entry-separator-underscores"}}function _6e(A){switch(A){case"password-generator-menu-entry-separator-commas":return"commas";case"password-generator-menu-entry-separator-numbers":return"digits";case"password-generator-menu-entry-separator-numbers-and-symbols":return"digits_and_symbols";case"password-generator-menu-entry-separator-hyphens":return"hyphens";case"password-generator-menu-entry-separator-periods":return"periods";case"password-generator-menu-entry-separator-spaces":return"spaces";case"password-generator-menu-entry-separator-underscores":return"underscores";default:return"commas"}}var hXA=()=>{X("fill-generated-password",pXA),X("copy-and-save-password",EXA),X("get-password-generator",uXA,!0)};async function qXA(){let A=await A2A();A.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());let j={};for(let e of A){let t=new Date(e.timestamp),r=t.toDateString(),a=t.toLocaleString(void 0,{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase(),n={itemId:e.itemId,label:e.url?`${a} - ${L6e(e.url)}`:a,url:e.url,styledValue:N6e(e.password),value:e.password};j[r]?j[r].push(n):j[r]=[n]}return{dates:Object.entries(j).map(([e,t])=>({label:new Date(e).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),uuid:globalThis.crypto.getRandomValues(new Uint32Array(1))[0].toString(36),passwords:t.reverse()})).reverse()}}function L6e(A){let j=fl(A);return j?j.host:A}function N6e(A){let j=[];for(let e of A){let t=j.length>0?j[j.length-1]:void 0;/^\d$/.test(e)?t?.type==="numericText"?t.content.text+=e:j.push({type:"numericText",content:{text:e}}):/^\s$/.test(e)?t?.type==="plainText"?t.content.text+=" ":j.push({type:"plainText",content:{text:" "}}):/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]$/.test(e)?t?.type==="punctuationText"?t.content.text+=e:j.push({type:"punctuationText",content:{text:e}}):t?.type==="plainText"?t.content.text+=e:j.push({type:"plainText",content:{text:e}})}return j}var vXA=()=>{X("get-new-password-history",qXA,!0)};var xXA=()=>{X("get-popup-config",Q9A),X("popup-ready",N9A),X("set-popup-restore-point",L9A),X("get-popup-restore-point",D9A),X("get-icon-for-url",R3A)};var fXA=()=>{X("save-dialog-configuration",L5A),X("save-dialog-edit-item",U5A),X("save-dialog-new-item-view",z5A),X("save-dialog-update-item-view",R5A),X("save-dialog-vault-selector",J5A)};var GXA=()=>v5().includes("authx-autolock_settings-profiles");var FXA=()=>{X("check-security-review-enabled",GXA)};var bXA=()=>{X("get-settings-configuration",w_A),X("update-settings-configuration",I_A),X("toggle-feature",D_A),X("show-app-settings-page",U_A),X("update-shortcut",C_A),X("reset-hide-on-this-page",V_A),X("update-account-and-vault-exclusions",K_A)};var z6e=E`background/share-service.ts`;function yXA(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let t=e.URL();if(!t||!$m(t.hostname))return;let r=sj(A.data.itemJson,Oo.pipe(ap),{mode:"unsafe_report_only",file:z6e,func:E`handleSaveItemRequest`}).unwrap(),a=new fA.VaultItem(new fA.Vault({name:"",type:"",desc:""}));if(a.details=r.details,a.overview=r.overview,a.templateUuid=r.templateUuid,!a.templateUuid||a.templateUuid===V8){console.error("Unsupported item type.");return}a.details?.passwordHistory&&(a.details.passwordHistory=[]),on(e,a.templateUuid,{name:"item",data:{item:fo(a),isShellPlugin:!1}})}var $XA=()=>{X("share-save-item",yXA)};var wXA=()=>{X("uso-save-configuration",m5A),X("uso-complete-session",E5A),X("uso-cancel-session",B5A),X("uso-context-account",w5A),X("sign-in-with-button-detected",(A,j)=>{globalThis.dispatchEvent(new CustomEvent(hp,{detail:{tab:j.tab}}))}),X("uso-prompt-configuration",f5A),X("uso-click-provider",G5A),X("uso-click-managed-app",F5A)};var IXA=()=>{X("ssh-onboarding-config",eMA),X("dismiss-ssh-onboarding",jMA),X("on-ssh-onboarding-clicked",rMA),X("ssh-onboarding-next-steps",tMA)};async function DXA(A,j){let e=await tA.inferBestTitle(j.tab.title??"",j.tab.url??"")??"SSH Key",{defaultSuggestedVaultId:t,vaultListElements:r}=await Bg();return{vaults:{suggestedVaultId:t,vaultListElements:r},title:e}}async function OXA(A,j){let e=Ft(j.tab);if(!e)throw new Error("InvalidTab");let{title:t,context:r,accountVaultUuid:a}=A.data,n=await OoA(r);if(n.type!=="password")return console.error("Invalid SPG response type."),!1;let o;try{o=await Ts(Ii)}catch{return console.error("SSH key item template not available."),!1}let{item:i}=await tA.createSshKeyItem({title:t,unparsedUrl:e.unparsedUrl,template:JSON.stringify(o),privateKey:n.content.password}),s=sg(a.accountUuid,a.vaultUuid,JSON.parse(i));if(s.isOk())try{return await $a(s.value,!0,void 0),await pc(e,s.value,"INLINE"),!0}catch(l){return console.error("Error saving item:",l),!1}else return console.error("Problem converting core item to b5 item."),!1}var PXA=()=>{X("get-ssh-create-dialog-configuration",DXA),X("generate-and-fill-ssh-key",OXA)};var CXA=()=>{X("app-storage-migration",RJA)};var HXA=()=>{X("record-view-event-first-account",aJA),X("record-view-event",oJA),X("record-input-event",iJA),X("record-view-event-all-accounts",sJA),X("record-click-event-first-account",nJA),X("record-click-event",lJA),X("record-click-event-all-accounts",cJA),X("record-background-action-event-all-accounts",dJA),X("record-preauth-event",kJA)};var w8=new ht("Trace Processor Logger:"),TXA=A=>{if(!It())if(_.allAccountHandlersAreLocked)try{let j=Uo("https://my.1password.com",q.config.getDevice().uuid);LA.sendPreAuthPerformanceTraces(j,A),w8.log("Traces sent pre-auth traces to datadog: ",A)}catch(j){w8.error("Error sending trace to server: ",j)}else{let j=_.accountHandlersForSignedInAccounts[0].client?.CTX;if(!j){w8.error("No account context found to make request. Traces not sent.");return}try{LA.sendPerformanceTraces(j,A),w8.log("Traces sent to datadog: ",A)}catch(e){w8.error("Error sending trace to server: ",e)}}};var CoA=new wK(ce,TXA,{maxBytes:5e3,maxSendInterval:3e4}),KXA=()=>{X("send-trace",A=>{CoA.addToBatch(A.data)})};async function SXA(A){return Xt.invoke("HealthCheck",A.data).catch(j=>{console.error(j)})}async function MXA(A){return Xt.invoke("SearchApps",A.data).catch(j=>{console.error(j)})}async function _XA(A){return await Xt.invoke("AppCatalog",A.data).catch(e=>(console.error(e),{type:"NoApps"}))}async function LXA(A){return Xt.invoke("GetItems",A.data).catch(j=>(console.error(j),{type:"error"}))}async function NXA(A){return Xt.invoke("SearchItems",A.data).catch(j=>{console.error(j)})}async function zXA(A){return Xt.invoke("CreateShortcut",A.data).catch(j=>{console.error(j)})}async function RXA(A){return Xt.invoke("SetPinnedLauncherObject",A.data).catch(j=>{console.error(j)})}async function JXA(A){return Xt.invoke("DeleteShortcut",A.data).catch(j=>{console.error(j)})}async function UXA(A){return Xt.invoke("RemovePinnedLauncherObject",A.data).catch(j=>{console.error(j)})}async function XXA(A){let j=[],e=await Xt.invoke("GetItems",{id:A.data.accountId}),t=await Xt.invoke("GetShortcuts",A.data).catch(n=>{console.error(n)}),a=(await Xt.invoke("GetPinnedLauncherObjects",A.data).catch(n=>{console.error(n)}))?.userPins;return!a||a.userPins?[]:(Object.values(a).forEach(n=>{if(n)switch(n.launcherId.type){case"item":{let o=e.content?.find(i=>i.uuid===n.launcherId.content);if(!o){console.error("Unable to load item title for shortcut",n.launcherId.content);return}j.push({type:"item",content:{content:o.uuid,title:o.title??"",icon:o.icon},pinIndex:n.pinIdx.content})}break;case"shortcut":{if(!t||!t.content)return;let o=t.content.find(i=>i.uuid===n.launcherId.content);if(!o)return;j.push({type:"shortcut",content:{title:o.title,url:o.url,uuid:o.uuid},pinIndex:n.pinIdx.content})}break;case"trelicaApp":j.push({type:"trelicaApp",content:n.launcherId.content,pinIndex:n?n.pinIdx.content:void 0});break}}),j.sort((n,o)=>{let i=n.pinIndex,s=o.pinIndex;return i===void 0&&s===void 0?0:i===void 0?1:s===void 0?-1:i-s}),j)}var VXA=()=>{X("get-catalog-apps",_XA),X("get-xam-items",LXA),X("search-xam-items",NXA),X("search-apps",MXA),X("xam-app-health-check",SXA),X("create-custom-url-shortcut",zXA),X("create-pinned-launcher-item",RXA),X("get-shortcuts",XXA),X("delete-custom-url-shortcut",JXA),X("delete-pinned-launcher-item",UXA)};var WXA=async(A,j)=>{let e=j??await Ij.loadItemCache();if(!e)return[];let t=[],r=eaA(A),{showRichIcons:a}=YA();for(let n of r){let o=n.item?e.itemWithUUID(n.item.itemUuid,n.item.vaultUuid):void 0;if(o)t.push({type:"sign-in-with",data:{title:o.title,subtitle:o.overview.ainfo,icon:await xo(o,120,a),item:{provider:n.provider,itemUuid:A.uuid,vaultUuid:A.vault.uuid,linkedItem:n.item}}});else{let{displayName:i,icon:s}=await tA.signInWithProviderConfig(n.provider);t.push({type:"sign-in-with",data:{title:i,icon:s,item:{provider:n.provider,itemUuid:A.uuid,vaultUuid:A.vault.uuid}}})}}return t};var YXA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");return{type:"entry-list",data:await ZXA(e)}},QXA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");return R6e(e)},ZXA=async A=>{let{showRichIcons:j}=YA(),e=await Ij.loadItemCache();if(!e)throw new Error("itemCacheNotLoaded");let t=(await Promise.all(e.itemsForTab(A,se.combine(se.logins,se.userSelected(hr(),void 0,void 0,e)),a6.faved).map(r6))).filter(n=>!!n),r=[],a=await dv(A);a&&r.push({type:"trelica-app",data:{title:a.name,icon:await tA.getRichIconForUrl(A.unparsedUrl,A.title,!0),app:a}});for(let n of t){let o=n.details.fields?.some(s=>s.value&&s.designation==="username"),i=n.details.fields?.some(s=>s.value&&s.designation==="password");(o||i)&&r.push({type:"autofill",data:{title:n.title,subtitle:n.overview.ainfo,icon:await xo(n,120,j),item:{itemUuid:n.uuid,vaultUuid:n.vault.uuid}}}),r.push(...await WXA(n,e))}return r},AVA=async(A,j)=>{let e=Ft(j.tab);if(!e)throw new Error("unknown");await tA.clearFillSession(e.id)},R6e=async A=>({type:"entry-list",data:await ZXA(A)});var jVA=()=>{X("uso-click-entry",YXA),X("uso-configuration",QXA),X("uso-dismiss",AVA)};var eVA=()=>{X("get-vault-exclusions",HM),X("update-vault-exclusion",T_A)};async function tVA(A){let j=await hc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");return WF(j.value)}var rVA=()=>{X("handle-watchtower-action",J9A),X("watchtower-change-password",tVA)};var aVA=()=>{X("get-viewed-firefox-rich-icons",M9A),X("set-viewed-firefox-rich-icons",_9A)};function nVA(A){let{accountUuid:j}=A.data;m8(j)}var oVA=()=>{X("launchpad-feedback",nVA),X("view-vault-item",a5A),X("app-launcher-enabled",tp),X("open-launchpad-url-in-tab",s5A)};var iVA=A=>{ReA(0,A),HJA(),TJA(),oUA(),aUA(),JJA(),UJA(),lUA(),cUA(),dUA(),EUA(),BUA(),gUA(),hUA(),vUA(),qUA(),fUA(),bUA(),DUA(),OUA(),$UA(),HUA(),TUA(),KUA(),MUA(),aVA(),NUA(),UUA(),VUA(),WUA(),QUA(),ZUA(),AXA(),jXA(),eXA(),tXA(),sXA(),hXA(),vXA(),xXA(),fXA(),FXA(),bXA(),$XA(),wXA(),IXA(),PXA(),CXA(),HXA(),KXA(),VXA(),jVA(),eVA(),rVA(),oVA(),_UA(),LUA()};var sVA=[{platformName:"ngrok",urlPattern:/^https:\/\/dashboard.ngrok.com\/api/,credentialName:"API Key",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/ngrok",secrets:{secretInPageDetails:[{fieldLabel:"api key",nodeSelector:"div.ant-modal-body code",toBeConcealed:!0,expectedLength:49}]}},{platformName:"GitHub",urlPattern:/^https:\/\/github.com\/settings\/tokens/,credentialName:"Personal Access Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/github",secrets:{secretInPageDetails:[{fieldLabel:"token",nodeSelector:"code#new-oauth-token",toBeConcealed:!0,expectedLength:40,expectedPrefix:"ghp_"}]}},{platformName:"AWS",urlPattern:/^https:\/\/(.*).console.aws.amazon.com\/iam/,credentialName:"Access Key",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/aws",secrets:{secretInPageDetails:[{fieldLabel:"access key id",nodeSelector:"div.create-root-access-key-content td:first-of-type div[class^='awsui_child_']:last-of-type",toBeConcealed:!1,expectedLength:20,expectedPrefix:"AKIA"},{fieldLabel:"secret access key",nodeSelector:"div.create-root-access-key-content td:last-of-type div[class^='awsui_child_']:first-of-type > span",toBeConcealed:!0,expectedLength:40}]}},{platformName:"GitLab",urlPattern:/^https:\/\/gitlab.com\/-\/profile\/personal_access_tokens/,credentialName:"Personal Access Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/gitlab",secrets:{baseHtmlNode:"div.content-wrapper",secretInPageDetails:[{fieldLabel:"token",nodeSelector:"button[title='Copy personal access token']",attribute:"data-clipboard-text",toBeConcealed:!0,expectedLength:26,expectedPrefix:"glpat-"}]}},{platformName:"CircleCI",urlPattern:/^https:\/\/app.circleci.com\/settings\/user\/tokens/,credentialName:"Personal API Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/circleci",secrets:{secretInPageDetails:[{fieldLabel:"token",nodeSelector:"input[class^='css-']",toBeConcealed:!0,expectedLength:40}]}},{platformName:"DigitalOcean",urlPattern:/^https:\/\/cloud.digitalocean.com\/account\/api\/tokens/,credentialName:"Personal Access Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/digitalocean",secrets:{secretInPageDetails:[{fieldLabel:"token",nodeSelector:"tr.copy-token.is-sensitive span.click-to-copy-text",toBeConcealed:!0,expectedLength:71,expectedPrefix:"dop_v1_"}]}},{platformName:"OpenAI",urlPattern:/^https:\/\/platform.openai.com\/account\/api-keys/,credentialName:"API Key",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/openai",secrets:{secretInPageDetails:[{fieldLabel:"api key",nodeSelector:"div.modal-body input[spellcheck='false']",toBeConcealed:!0,expectedLength:51,expectedPrefix:"sk-"}]}}];var J6e="shell_plugins_prompts_dismissed",U6e="shell-plugins-save-in-1password-dismissed",lVA="shell-plugins-last-detected-credential";function cVA(A){return A?J6e:U6e}async function X6e(A){return(await He.getBrowserInfo()).osName===Da.Windows||JSON.parse(vj.getItem(cVA(A))??"false")===!0}function dVA(A){vj.setItem(cVA(A.data.isFallBackNotification),JSON.stringify(!0))}async function kVA(A){if(await X6e(A.data.isFallBackNotification))return;let j=await Gt(),e=c_(j?.unparsedUrl);if(!e)return;let t=new URL(e.learnMoreUrl);return t.searchParams.append("utm_content",A.data.isFallBackNotification?"fallback_notification":"followup_notification"),t.searchParams.append("utm_source","browser_extension"),t.searchParams.append("utm_campaign","shell_plugins_save_in_1password"),{platformName:e.platformName,credentialName:e.credentialName,operatingSystem:(await He.getBrowserInfo()).osName,learnMoreUrl:t.toString()}}chrome.tabs.onUpdated.addListener((A,j)=>{let e=j.url;if(!e)return;let t=c_(e);if(!t&&nn("shellPlugins"))return;sn({tabId:A,message:t?{name:"shell-plugins-url-detected",data:void 0}:{name:"hide-notification",data:{}}})});async function uVA(A,{tab:j}){let[e,t]=_.defaultSavingLocation(),r=hVA();if(!r)return;let a=c_(j.unparsedUrl);if(!a)return;let n=V6e(e.uuid,t.uuid,`${a.platformName} ${a.credentialName}`,j.unparsedUrl,r.credentials);await on(j,Tl,{name:"item",data:{item:fo(n),isShellPlugin:!0}})}function V6e(A,j,e,t,r){let a=VNA(A,j,Tl);return a.overview.title=e,t&&(a.overview.url=t,a.overview.URLs=[{l:"website",u:t}]),a.details.sections.push({title:"",name:`Section_${q.generateUUID()}`,fields:[]}),r.forEach(n=>{a.details.sections[0].fields&&a.details.sections[0].fields.push({k:n.toBeConcealed?"concealed":"string",n:q.generateUUID(),v:n.value,t:n.fieldLabel,a:{guarded:"yes"}})}),a}async function pVA(A,{tab:j}){await ta(j.id,{type:"shellPlugins"})}async function mVA(A,{tab:j}){await ta(j.id,{type:"shellPluginsFallback"})}function EVA(A,{tab:j}){return c_(j.unparsedUrl)}function BVA(A){return hVA()?.credentials??[]}function gVA(A,j){ce.setItem(lVA,JSON.stringify(A.data))}function hVA(){let A=ce.getItem(lVA);return A?JSON.parse(A):void 0}function c_(A){if(A)return sVA.find(j=>j.urlPattern.test(A))}var qVA=async()=>{await Promise.all([vj.init(),ce.init()])};async function HoA(){if(Rm||await gc,_.hasAccountHandlers){console.error("1Password icon was clicked before popup is ready. Please click icon again to open.");return}sE()}var Y6e=250,ToA="sync-xam-app-launcher-accounts",uE=async()=>{await browser.alarms.get(ToA)===void 0&&browser.alarms.create(ToA,{delayInMinutes:Y6e/(1e3*60)})},Q6e=A=>{A.name===ToA&&Xt.syncAppLauncherAccountState()},vVA=()=>{browser.alarms.onAlarm.addListener(Q6e),nr.subscribe(gp,uE).subscribe(Fd,uE).subscribe(wi,uE).subscribe(Qk,uE).subscribe(Or,uE).subscribe(Rg,uE).subscribe(Rs,uE).subscribe(On,uE),bn().subscribe(uE)};var xVA=async()=>{await Z6e(),await pE()||Ane()},Z6e=async()=>{let A=bn(),j=_.getAccountHandlers.filter(e=>Hm.isValidAccountType(e.serveraccount.type)?!A.getPolicyForAccount(e.uuid,"app-launcher-allowed"):!1);await A.initializePolicies(j)},pE=async()=>{let A=Xt.initState;return A==="wasm_not_supported"||A==="initialized"||!tp().enabled&&!ib()||(await Xt.init(),Xt.initState!=="initialized")?!1:(await ene(),!0)},Ane=()=>{nr.subscribe(wi,pE),nr.subscribe(Or,pE),nr.subscribe(On,pE),bn().subscribe(pE)},jne=()=>{try{nr.unsubscribe(wi,pE),nr.unsubscribe(Or,pE),nr.unsubscribe(On,pE),bn().unsubscribe(pE)}catch{}},ene=async()=>{jne(),await Xt.syncAppLauncherAccountState(),vVA(),await r5A()};var Rm=!1,GVA,gc=new Promise(A=>GVA=A).then(()=>{Rm=!0});nr.initialize("error","unhandledrejection",qg,gp,Rg,Fd,wi,Qk,Rs,Or,On,zg,Jg,yg,Zk,hp,bd,tx,rx,X8,qE,ob);na()?browser.action.onClicked.addListener(HoA):browser.browserAction.onClicked.addListener(HoA),browser.commands.onCommand.addListener(A=>{ItA(A)&&!Kt()&&(Un(),globalThis.dispatchEvent(new Event(yg)))}),browser.runtime.onInstalled.addListener(y8.onInstalled),ut()||LD.setContextMenu(Un,async()=>oS(Je),async()=>oS(Ur),async()=>oS(q6),mb,m8,RnA,y8.onUpdateCheck,SnA,HnA,CnA);CJA();async function rne(){let A=await He.getBrowserInfo(),j=A.name==="Firefox"||A.name==="Safari"&&["10.15","10.15.7"].includes(A.osVersion)?"":` (${A.osVersion})`;console.info(`channel: ${Sv()}
version: ${XF()}
build: ${Xo()} (${A.version})
browser: ${A.name} (${A.version})
os: ${A.osName}${j}`)}async function fVA(A){await A6.asyncObserve("initializeStorage","initialize",async()=>qVA(),A,!0),await A6.asyncObserve("initialize-feature-flags-cache","initialize",async()=>hj.initializeFeatureFlagsCache(),A,!0),vj.getItem(B8)==="enabled"&&(vj.removeItem(B8),Tg("db-terminated")),ln({skipIconUpdate:!0});let{language:e}=await PzA();if(VF(),cd.initDatabase(),console.group("\u{1F44B} Initializing 1Password"),e_A(),rne(),f6()&&(_NA(),WRA()),await A6.asyncObserve("initializeCoreInterface","initialize",async()=>tA.init(e),A,!0),nA.set({locale:e,messages:tne}),!await _A.initDatabase())throw new Error("Unable to initialize the database.");let t=await L6();q.config.setDevice(t),await A6.asyncObserve("collectAllPreRegFeatureFlags","featureFlags",async o=>sHA(t.uuid,o),A,!0);let r=new A6("b5x-background",CoA.addToBatch);hj.hasPreRegistrationFlag("b5x-pre-auth-tracing")&&r.startObserver();let a=await _A.getDatabase().getAllAccounts();_.setAccountHandlers(a.map(o=>new tE(o,t))),q.crypto.init();let n=_.updateAccountHandlers.bind(_);nr.subscribe(zg,async()=>Un()).subscribe(Rg,ENA).subscribe(gp,n).subscribe(qg,INA).subscribe(On,()=>{Ss("extension-first-survey"),Ss("unified-panel-update"),ane()}).subscribe(Fd,()=>{GM()}),ln({skipIconUpdate:!0}),WM().catch(()=>{console.error("Error loading Watchtower data")}),Ss("extension-first-survey"),await A6.asyncObserve("initializeNativeAppConnection","initialize",async()=>yNA(),A,!0),await A6.asyncObserve("unlockWithContextInitCache","initialize",async()=>xNA(),A,!0).finally(ln),w9A(),y_A(),bi.enableInsiderIfAppropriate(),URA(),mS(),FKA(),TKA(),LD.initContextMenu(),Jn.init(),QSA();try{xVA(),s_A()}catch{console.error("App Launcher threw an unexpected error...")}NJA().catch(()=>{console.error("Unable to migrate storage")}),la(),console.info("\u{1F44D} Finished initializing 1Password"),console.groupEnd(),GVA()}function ane(){let A=X7();Rj("unleash-features-changed",{features:A})}na()?(async()=>await A6.asyncObserve("initialize","initialize",async A=>fVA(A),void 0,!0))():globalThis.addEventListener("load",async()=>{await A6.asyncObserve("initialize","initialize",async A=>fVA(A),void 0,!0)});iVA(gc);var iaA={"get-account-list":YM};qD({...iaA,"open-swe-native-wrapper":_RA,"sign-in-succeeded":LRA,"b5-session-init":HRA,"b5x-request-session-init":KRA,"b5-sso-complete":TRA,"b5x-credential-hydration":SRA,"relay-message-to-frames":jJA,"targeted-message-to-inline-menu":eJA,"refresh-can-request-unlock":pJA,"get-frame-manager-configuration":mJA,"get-inline-suggestions":EJA,"perform-inline-action":BJA,"record-inline-menu-render-event-all-accounts":uJA,"get-app-configuration":eSA,"add-save-object":xoA().handleAddSaveObject,"get-save-object-public-key":xoA().handleGetSaveObjectPublicKey,"enable-privacy-integration":hJA,"get-privacy-enable-dialog-configuration":gJA,"get-privacy-create-dialog-configuration":qJA,"fill-new-privacy-card":vJA,"get-email-alias-dialog-configuration":wJA,"start-email-alias-session":IJA,"generate-email-alias":DJA,"cancel-email-alias-session":OJA,"fill-new-email-alias":PJA,"get-brex-dialog-configuration":xJA,"fill-new-brex-card":fJA,"open-extension-welcome-page-for-onboarding":NnA,"get-default-account-info":XRA,"on-ssh-key-created":aMA,"ssh-next-steps-notification-config":nMA,"on-ssh-next-steps-confirm":oMA,"ssh-focus-public-key-field":iMA,"shell-plugins-notification-config":kVA,"shell-plugins-dismiss-notifications":dVA,"shell-plugins-save-in-1password-notification":pVA,"shell-plugins-fallback-notification":mVA,"shell-plugins-site-config":EVA,"shell-plugins-item-saving-prompt":uVA,"shell-plugins-get-last-detected-credentials":BVA,"shell-plugins-set-last-detected-credentials":gVA,"create-credential":sNA,"get-credential":kNA,"should-intercept-webauthn-request":pNA,"report-error":VRA});globalThis.bg={enableInsiders:bi.enableInsiderDev};export{iaA as b5xHandlers,rne as initBuildInfo,Rm as initializationHasFinished,gc as initializeFinishedPromise};

//# debugId=da58d091-1ab6-527a-a5c2-526914129329
